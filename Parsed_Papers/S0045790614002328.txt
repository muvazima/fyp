@&#MAIN-TITLE@&#Experimental analysis of solar energy harvesting circuits efficiency for low power applications

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Two solar energy harvesting circuits have been tested for low power applications.


                        
                        
                           
                           The directly coupling technique has been compared with an MPPT integrated circuit.


                        
                        
                           
                           A mathematical energy consumption analysis shows both circuits’ efficiency.


                        
                        
                           
                           For all tests performed the directly coupled circuit has been more efficient.


                        
                        
                           
                           Solar cell’s input current simulations have confirmed the experimental results.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Solar energy harvesting

Maximum Power Point Tracker

Low power wireless platforms

Energy consumption

@&#ABSTRACT@&#


               
               
                  This work presents an analysis on efficiency of solar energy harvesting circuits focused on low power, low voltage sensor platforms. Two different approaches were tested in order to operate a solar panel closely to its maximum power point. The first circuit precisely matches the solar cells with the batteries. The second one is based on a Maximum Power Point Tracker (MPPT) chip. The paper addresses the circuits’ design and evaluation. Two tests were performed outdoors, under two different irradiance conditions. Although the MPPT chip may be efficient for a variety of low power devices, experiments have shown that it did not extract more energy from the environment than the directly coupled circuit. A mathematical energy consumption analysis shows that, in both cases, the directly coupled circuit is more efficient. Therefore, this work shows that there is still a lack of industry solutions for low power, low voltage, solar harvesting circuits.
               
            

@&#INTRODUCTION@&#

Energy consumption is a topic of paramount importance in the context of wireless sensor networks (WSNs). In general, the node’s longevity is dictated by its power consumption and its energy storage unit capacity. However, the concept of node’s longevity has been entirely changed with the advent of energy harvesting capabilities. The possibility of extracting energy from the environment has drastically changed the energy management in WSN, increasing nodes’ longevity.

Among a number of energy sources that have been studied so far, solar has proved to be one of the most effective [1]. The solar energy conversion through photovoltaic (PV) cells is better performed at an optimum operating voltage. Operating a solar panel on this voltage results in transferring to the system the maximum amount of power available. In this context, Maximum Power Point Tracker (MPPT) circuits have been proposed. The drawback is that MPPT circuitry introduces losses to a solar harvesting system. Recently, as an attempt to solve this problem, the integrated circuits (IC) industry has released low power MPPT integrated circuits. However, most of them are not dedicated for the specific low power consumption range of less than 100mW, typical for sensor nodes based on low power wireless Platform-in-Packages (PiPs). Concerning these low power applications, it may be more energy efficient to have a good matching between the solar panel and the energy storage unit [2]. This well matched system could be able to work close to the maximum power point (MPP) with less power loss.

Consequently, the purpose of this work is to experimentally compare the performances of a directly coupled system and a MPPT IC based system. This research will guide the next steps on the development of a low power energy harvesting system based on low power wireless PiPs.

The paper is organized as follows: Section 2 presents the fundamentals of solar energy harvesting. Section 3 discusses the design and evaluation methods for the two proposed circuits under the perspective of low power wireless platforms. Section 4 presents the experimental results and simulations for both solar energy harvesting circuits, as well as a discussion about the MPPT IC efficiency. Finally, Section 5 closes the paper.

Power management is one of the main research topics in wireless sensor networks. Batteries, which have a limited energy capacity, are the most common option for powering sensors. However, several technologies have been developed over the past decades with the purpose of driving low-power electronic systems from energy extracted from the environment.

As shown in Table 1
                     , different harvesting technologies present different power densities [1]. Also, it is shown that the solar modality presents the highest power density. However, many parameters should be taken into account when planning to operate a photovoltaic panel, including: solar irradiance, temperature variation, spacial positioning and photovoltaic’s electrical characteristics.

Photovoltaic cells may be modeled as a p–n junction. Fig. 1
                     a shows an equivalent circuit for this model, considering a resistive load. Analyzing the model’s equivalent circuit, one notes that when the photovoltaic cell is in short-circuit state, the short-circuit current 
                        
                           
                              
                                 I
                              
                              
                                 sc
                              
                           
                        
                      is equal, in modulus, to the 
                        
                           
                              
                                 I
                              
                              
                                 ph
                              
                           
                        
                      current (Fig. 1b). The 
                        
                           
                              
                                 I
                              
                              
                                 ph
                              
                           
                        
                      current represents the photocurrent, which is related with the luminous intensity 
                        
                           
                              
                                 I
                              
                              
                                 l
                              
                           
                        
                      by Eq. (1). K is a constant which depends on photovoltaic cell intrinsic characteristics [3].
                        
                           (1)
                           
                              
                                 
                                    I
                                 
                                 
                                    sc
                                 
                              
                              =
                              -
                              
                                 
                                    I
                                 
                                 
                                    ph
                                 
                              
                              =
                              
                                 
                                    KI
                                 
                                 
                                    l
                                 
                              
                           
                        
                     
                  

When the cell is not in short-circuit state, a voltage V is observed over the resistor R (Fig. 1c). This voltage is established by the current I, which is described by Eq. (2). The current 
                        
                           
                              
                                 I
                              
                              
                                 d
                              
                           
                        
                      results from the p–n junction behavior and may be described by Eq. (3), where 
                        
                           
                              
                                 I
                              
                              
                                 0
                              
                           
                        
                      is the diode reverse saturation current, e is the electron charge, 
                        
                           η
                        
                      is an ideality factor (between 1 and 2), k is the Boltzmann constant and T is the temperature in kelvin. Therefore, rewriting Eq. (2) from Eq. (3), the total current I in function of voltage V may be obtained, as shown in Eq. (4).
                        
                           (2)
                           
                              I
                              =
                              
                                 
                                    I
                                 
                                 
                                    d
                                 
                              
                              -
                              
                                 
                                    I
                                 
                                 
                                    ph
                                 
                              
                           
                        
                     
                     
                        
                           (3)
                           
                              
                                 
                                    I
                                 
                                 
                                    d
                                 
                              
                              =
                              
                                 
                                    I
                                 
                                 
                                    0
                                 
                              
                              
                                 
                                    
                                       exp
                                       
                                          
                                             
                                                
                                                   
                                                      eV
                                                   
                                                   
                                                      η
                                                      kT
                                                   
                                                
                                             
                                          
                                       
                                       -
                                       1
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (4)
                           
                              I
                              =
                              -
                              
                                 
                                    I
                                 
                                 
                                    ph
                                 
                              
                              +
                              
                                 
                                    I
                                 
                                 
                                    0
                                 
                              
                              
                                 
                                    
                                       exp
                                       
                                          
                                             
                                                
                                                   
                                                      eV
                                                   
                                                   
                                                      η
                                                      kT
                                                   
                                                
                                             
                                          
                                       
                                       -
                                       1
                                    
                                 
                              
                           
                        
                     From Eq. (4), the solar cell I–V curves may be drawn, which defines its electrical characteristic. The solar cell’s power curve is given by the product of its voltage and current. As demonstrated above, the solar cell model considers variables as temperature and irradiance. As a consequence, a solar cell have many power curves. For each power curve, temperature and irradiance must be fixed. Examples of I–V and P–V curves are respectively shown in Fig. 12a and b.

These curves demonstrate that solar cells are remarkably versatile, as they can operate from the state of open circuit to the state of short circuit. As shown in Fig. 12b, the power curve has a maximum point, for a specific operation voltage. This voltage is known as Maximum Power Point Voltage (
                        
                           
                              
                                 V
                              
                              
                                 MPP
                              
                           
                        
                     ). Electronic circuits, called Maximum Power Point Trackers (MPPT), are responsible for ensuring the solar panel operation at this point.

The idea of operating a solar panel as close as possible to its 
                        
                           
                              
                                 V
                              
                              
                                 MPP
                              
                           
                        
                      is not new [4]. The target of the first MPPTs were the artificial satellites. Later on, the MPPT concept was disseminated through the embedded systems operating on shore. A new question has emerged as the embedded systems’ power consumption decreased: Are MPPT circuits advantageous for low power applications, or their intrinsic power consumption is an overhead, preventing their usage in these cases? Aiming to answer this question, research over MPPT circuits for low power applications has started.

In order to comprehend some issues behind this intriguing question, a better understanding of the MPPT concept is needed. The MPPT circuits operate by detecting changes on the solar panel, computing the new 
                        
                           
                              
                                 V
                              
                              
                                 MPP
                              
                           
                        
                      and operating the photovoltaic panel on this voltage. Changes in the behavior of the photovoltaic panel happen mainly due to variations in temperature and solar irradiance. Thus, sensors are needed to monitor state changes. As these sensors imply in extra load in the system, their use in energy-sensitive or low-power systems is often unfeasible. In order to solve this problem, electronic circuits were developed to extract the solar cell information directly from its electrical characteristics. Methods as Perturb and Observe [5,6], Incremental Conductance [7,8], Open Circuit Voltage [9,10], Constant Voltage [11] are the most well known.

All the works concerning MPPT methods mentioned above are implemented using printed circuit boards. Although these circuits have proved to be efficient, they could be enhanced by the miniaturization provided by integrated circuits’ techniques. This fact has motivated the microelectronics industry to invest in MPPT ICs. The growing popularity of portable devices (e.g. mobile phones, tablets, digital cameras, etc.) has provided economic reasons to the microelectronics industry to release the first MPPT ICs focused on low power devices. The questions, which are still unanswered, are: Are these MPPT ICs as efficient as the solutions proposed by the academy? If yes, for which range of power consumption are they indicated? The experimental analysis proposed by this work intends to answer these questions.

This section begins with a discussion about the solar cell and the energy storage unit used on both proposed circuits. These two circuits have been designed, tested and compared aiming to answer the questions risen on Section 2. The first circuit is based on Heliomote’s project, which directly couples the battery and the solar panel. This approach was chosen due to its simplicity and proved efficiency [2]. The second circuit has one of the most suitable MPPT IC for low power wireless platforms available in the market [12].

The relation between the solar cell and the energy storage unit is a crucial issue for a directly coupled solar energy harvesting circuit. This highlights the need of working as close as possible to the MPP, in order to extract the maximum amount of energy available. For the first circuit, which has no Maximum Power Point Tracker, the battery operating voltage should be as close as possible to the 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                           
                         for the selected solar cell.

The two available technologies to store energy, in a rechargeable way, are batteries and super capacitors. Although super capacitors are improving, they are not recommended for solar harvesting circuits yet due to intrinsic leakage, losses on parasitic paths in the external circuitry [2], and, mainly, low energy density. Among all the battery technologies available, the Nickel Metal Hydride (NiMH) has been chosen. The main reasons for this choice are the low complexity on the recharging circuit and the absence of memory effect. Consequently, the system is powered by two AA NiMH batteries with a nominal charge capacity of 2600mAh.

The PV module is composed by two 2V–130mA solar cells measuring 55×45mm connected in-series. The solar panels’ characterization curves were plotted (Fig. 12a and b) based on data collected outdoor, on May 03, 2013 from 12:05pm to 12:55pm. The goal of the test was to find out the solar panel’s open circuit voltage (
                           
                              
                                 
                                    V
                                 
                                 
                                    OC
                                 
                              
                              =
                              2.13
                              
                              V
                           
                        ), short circuit current (
                           
                              
                                 
                                    I
                                 
                                 
                                    SC
                                 
                              
                              =
                              97.7
                              
                              mA
                           
                        ) and 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                              =
                              1.69
                              
                              V
                           
                         in a real scenario.

Different methods may be used to characterize a solar panel. Due to its simplicity, this characterization was performed by varying a resistive load and measuring the solar panel current and voltage. An electronic load may be used when the focus is to verify the I–V curves in-situ [13]. The in-situ verification approach is convenient when analyzing the effects of external factors over time (dirt accumulated in the solar panel protection glass, field-aged degradation, blocking obstacles, etc.). However, the experiments conducted in this work were short enough to neglect these effects.

Batteries commonly have their capacity expressed in Ah. However, to interpret some phenomenons in battery charging it may be more convenient to consider the battery remaining electric charge. The electric charge calculation is an integral problem described by Eq. (5). It shows that for a determined period (
                           
                              
                                 
                                    t
                                 
                                 
                                    f
                                 
                              
                              -
                              
                                 
                                    t
                                 
                                 
                                    0
                                 
                              
                           
                        ) the electric charge (Q) is equal to electric current’s (
                           
                              I
                              (
                              t
                              )
                           
                        ) integral over time.
                           
                              (5)
                              
                                 Q
                                 =
                                 
                                    ∫
                                    
                                       
                                          
                                             t
                                          
                                          
                                             0
                                          
                                       
                                    
                                    
                                       
                                          
                                             t
                                          
                                          
                                             f
                                          
                                       
                                    
                                 
                                 I
                                 (
                                 t
                                 )
                                 d
                                 t
                              
                           
                        
                     

In this work the electric current is digitally expressed, as a result of the sampling process. Therefore, the Riemann sum was used (Eq. (6)) in order to compute the electric charge. In this generic equation, 
                           
                              f
                              (
                              i
                              )
                           
                         is the sample value for the instant 
                           
                              i
                              ,
                              
                              n
                           
                         is the number of samples and 
                           
                              
                                 
                                    Δ
                                 
                                 
                                    i
                                 
                              
                           
                         is the time interval between two consecutive samples.
                           
                              (6)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          n
                                       
                                    
                                 
                                 (
                                 
                                    
                                       Δ
                                    
                                    
                                       i
                                    
                                 
                                 ·
                                 f
                                 (
                                 i
                                 )
                                 )
                              
                           
                        
                     

The current to be integrated is the battery current. This current sampled by a battery monitoring IC at a constant rate. Thus, the electric charge calculus for a determined period is given by Eq. (7), where: 
                           
                              
                                 
                                    Q
                                 
                                 
                                    q
                                 
                              
                           
                         is the electric charge quantity stored in a period. 
                           
                              
                                 
                                    I
                                 
                                 
                                    bat
                                 
                              
                           
                         is the instantaneous electric current going in or out of the battery. If the current is going in the battery, 
                           
                              
                                 
                                    I
                                 
                                 
                                    bat
                                 
                              
                           
                         assumes positive values, otherwise, it assumes negative values. 
                           
                              
                                 
                                    t
                                 
                                 
                                    sample
                                 
                              
                           
                         is the period between samples, for which the current 
                           
                              
                                 
                                    I
                                 
                                 
                                    bat
                                 
                              
                           
                         is considered constant.
                           
                              (7)
                              
                                 
                                    
                                       Q
                                    
                                    
                                       q
                                    
                                 
                                 =
                                 
                                    
                                       I
                                    
                                    
                                       bat
                                    
                                 
                                 ·
                                 
                                    
                                       t
                                    
                                    
                                       sample
                                    
                                 
                              
                           
                        
                     

In order to obtain a battery remaining charge curve it is necessary to assume an electric charge initial value. Then, the battery remaining charge may be expressed by Eq. (8), where: 
                           
                              
                                 
                                    Q
                                 
                                 
                                    rem
                                 
                              
                              (
                              i
                              )
                           
                         is the battery remaining charge at an instant i. 
                           
                              
                                 
                                    Q
                                 
                                 
                                    0
                                 
                              
                           
                         is the battery electric charge initial value.
                           
                              (8)
                              
                                 
                                    
                                       Q
                                    
                                    
                                       rem
                                    
                                 
                                 (
                                 i
                                 )
                                 =
                                 
                                    
                                       Q
                                    
                                    
                                       0
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          n
                                       
                                    
                                 
                                 (
                                 
                                    
                                       I
                                    
                                    
                                       bat
                                    
                                 
                                 ·
                                 
                                    
                                       t
                                    
                                    
                                       sample
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       Q
                                    
                                    
                                       0
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          n
                                       
                                    
                                 
                                 
                                    
                                       Q
                                    
                                    
                                       q
                                    
                                 
                              
                           
                        
                     

Once the battery remaining charge generic equation has been shown, it is indispensable to particularize it for the case presented in this work. The first consideration to be done is related to the sampling period. The current data is read every second. Therefore, in this case, 
                           
                              
                                 
                                    t
                                 
                                 
                                    sample
                                 
                              
                           
                         is constant and equal to 1s (it must be divided by 3600 in order to obtain the result in hours). The second consideration refers to the initial battery electric charge value, which may vary according to the battery’s initial state of charge. Eq. (9) is the particularization of the battery remaining electric charge, where: 
                           
                              
                                 
                                    Q
                                 
                                 
                                    rem
                                 
                              
                              (
                              i
                              )
                           
                         and 
                           
                              
                                 
                                    I
                                 
                                 
                                    bat
                                 
                              
                           
                         are expressed, respectively in mAh e mA.
                           
                              (9)
                              
                                 
                                    
                                       Q
                                    
                                    
                                       rem
                                    
                                 
                                 (
                                 i
                                 )
                                 =
                                 
                                    
                                       Q
                                    
                                    
                                       0
                                    
                                 
                                 +
                                 
                                    
                                       1
                                    
                                    
                                       3600
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          n
                                       
                                    
                                 
                                 
                                    
                                       I
                                    
                                    
                                       bat
                                    
                                 
                              
                           
                        
                     

Another method to evaluate energy harvesting circuits is to compute the extracted energy in a period. Electric energy may be expressed by Eq. (10), which denotes the integral of power function 
                           
                              P
                              (
                              t
                              )
                           
                         over a period (
                           
                              
                                 
                                    t
                                 
                                 
                                    f
                                 
                              
                              -
                              
                                 
                                    t
                                 
                                 
                                    0
                                 
                              
                           
                        ).
                           
                              (10)
                              
                                 E
                                 =
                                 
                                    ∫
                                    
                                       
                                          
                                             t
                                          
                                          
                                             0
                                          
                                       
                                    
                                    
                                       
                                          
                                             t
                                          
                                          
                                             f
                                          
                                       
                                    
                                 
                                 P
                                 (
                                 t
                                 )
                                 d
                                 t
                              
                           
                        
                     

As in the electric charge case, the Riemann sum is applied since the power data are samples. Eq. (11) shows the input power definition in terms of sampled battery voltage 
                           
                              
                                 
                                    V
                                 
                                 
                                    bat
                                 
                              
                           
                         and current 
                           
                              
                                 
                                    I
                                 
                                 
                                    bat
                                 
                              
                           
                        . Also in this case, if the current is going in the battery, 
                           
                              
                                 
                                    I
                                 
                                 
                                    bat
                                 
                              
                           
                         assumes positive values, otherwise, it assumes negative values.
                           
                              (11)
                              
                                 f
                                 (
                                 i
                                 )
                                 =
                                 
                                    
                                       P
                                    
                                    
                                       inst
                                    
                                 
                                 =
                                 
                                    
                                       V
                                    
                                    
                                       bat
                                    
                                 
                                 ·
                                 
                                    
                                       I
                                    
                                    
                                       bat
                                    
                                 
                              
                           
                        
                     

Eq. (12) gives the energy extracted by the system for a determined period. Finally, Eq. (12) may be simplified to Eq. (13), once 
                           
                              
                                 
                                    t
                                 
                                 
                                    sample
                                 
                              
                           
                         is constant and equal to 1s.
                           
                              (12)
                              
                                 E
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          n
                                       
                                    
                                 
                                 (
                                 
                                    
                                       V
                                    
                                    
                                       bat
                                    
                                 
                                 ·
                                 
                                    
                                       I
                                    
                                    
                                       bat
                                    
                                 
                                 )
                                 ·
                                 
                                    
                                       t
                                    
                                    
                                       sample
                                    
                                 
                              
                           
                        
                        
                           
                              (13)
                              
                                 E
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          n
                                       
                                    
                                 
                                 (
                                 
                                    
                                       V
                                    
                                    
                                       bat
                                    
                                 
                                 ·
                                 
                                    
                                       I
                                    
                                    
                                       bat
                                    
                                 
                                 )
                              
                           
                        
                     

In order to understand the design considerations made for the directly coupled circuit, it is essential to know some of the low power wireless platforms’ characteristics. Table 2
                         shows three different examples that have motivated the changes applied to Helimote’s [2] circuit. They are typical Platform-in-Package (PiP) which features a 2.4GHz radio frequency transceiver. As shown in Table 2, all these PiPs may operate with voltages lower than 3.3V. Therefore, there is no need for the step-up converter used in Heliomote’s project (which elevates the output voltage to 3.3V). The new generation of PiPs normally operates at 1.8V, having a built-in buck regulator. Hence, the harvesting circuit efficiency is improved by eliminating the step-up converter.

This harvesting circuit is planned to charge the NiMH batteries until it reaches a predefined threshold voltage. This voltage is set by external resistors in a voltage monitor (ICL7665). The threshold voltage selected was based on the charging behavior of the NiMH battery. The battery used on the experiments is considered fully charged when it reaches a voltage around 1.45V. The selected threshold voltage was 2.9V, since the two AA cells were arranged in-series. An analog switch short circuits the solar panel to the ground when this value is reached. The overvoltage signal provided by the ICL7665 controls the analog switch. This prevents battery overcharges. A normally open (MAX4614) analog switch has been used instead of a normally closed one. Hence, if the initial battery voltage is bellow 2V the battery is automatically charged by the solar panel.

The circuit must also to take care of the undercharge situation. There are two different reasons to avoid that. First, there is a minimum voltage threshold from which batteries do not operate properly. In this case, it is recommended to disconnect the load in order to avoid battery degradation. The second reason is that the input voltage of the wireless MCU’s should not be lower than 2V. Thus, the under voltage pin of the ICL7665 is connected to a transistor. Then, when the battery voltage drops below 2.1V the transistor is opened, disconnecting the sensor node. A simplified block diagram of the harvesting circuit is shown in Fig. 2
                        .

Besides the already mentioned features, the circuit has a battery monitor (DS2438). This IC communicates through a protocol called 1-Wire. It provides the battery’s information (battery voltage, battery current, remaining capacity and temperature) that may be used by an energy-aware task scheduler. The DS2438 also has an integrated current accumulator, which informs the total current going in and out of the battery.

Before describing the characteristics of the energy harvesting circuit based on the MPPT IC, some remarks regarding the system should be done. In order to allow a fair comparison between both circuits, the solar cells used for this circuit were the same used for the directly coupled one. This provides to both systems nearly the same power input. The batteries were also maintained.

Some MPPT ICs from different manufacturers are available in the market (SPV1040, SPV1020, MPT612, SM72442, etc.). Among these options, the SPV1040 from STMicroelectronics is one of the most suitable for low power applications. It is a low power (maximum output power of 3W), low voltage, monolithic step-up converter. It is provided with three distinct operation modes, which allows the IC to work from 0.3V to 5.5V [12].

The first design consideration occurs at the system level, which is concerning the voltage for charging the batteries (around 2.9V). It means that the two solar cells should not be arranged in series anymore, since the SPV1040 is a step-up converter. In order to maintain the same input power than the directly coupled circuit, the two 2.0V solar cells were connected in parallel. Therefore, the MPPT IC converts the input voltage (from 0.3V to 2V) to the batteries’ charging voltage level (maximum set to 2.9V).

The basis for the following design considerations was the application note provide by STMicroelectronics [14]. The pins MPP-SET and XSHUT were connected to the solar panel through a 1KΩresistor. A 10mΩ(1%) was the output current sense resistor. The battery monitor circuit is the same used in the directly coupled circuit. Figs. 3 and 4
                        
                        
                         show, respectively, the simplified block diagram of the circuit and the MPPT block schematic.

Before discussing the experimental results, it is interesting to briefly describe the hardware for which both energy harvesting circuits were designed. It is called EPOSMoteII platform, a module for the development of low-power wireless sensor network applications. The Plataform-in-Package chosen for the EPOSMoteII board is the Freescale MC13224V. It is based in a 32-bit ARM7 core [15].

Both proposed energy harvesting circuits have been integrated to the power management mechanism of Epos 
                        [16]. Epos is a component-based operating system for embedded applications, which is provided with a task-scheduler. This task-scheduler receives information from the battery monitoring IC (present in both circuits). The battery state information sent by the battery monitoring IC allows the task-scheduler to decide whether noncritical tasks should be enabled or not. With all these information in mind the experimental results discussion can be started.

In order to adequately evaluate the proposed energy harvesting circuits designed to the EPOSMoteII sensing platform, two outdoor tests have been performed. The tests’ goal was to evaluate the circuits under different environmental conditions.

The first test was carried out in cloudy days, while the second one, in sunny days. For both tests (and for both circuits) the EPOSMoteII radio was configured to continuously transmit random data. This 100% duty cycle was used in order to test critical conditions and also to reduce tests’ duration. By reducing the duty cycle, it would be necessary to extend the tests to several weeks to verify considerable battery discharge. This occurs because the MC13224V standby mode’s current consumption is around only 5μA. This current consumption is more than 5000 times smaller than the 29mA that the PiP consumes when transmitting data at full power.

The duration of the first test was 59h and 5min. It started on December 13, 2012 at 4:10pm and finished on December 16, 2012 at 3:15am. The first issue to be analyzed in this test is the battery current (Fig. 13a). Fig. 13a shows the battery current sampled nearly every second. This current is the net sum of the incoming current from solar panel (positive values) and the current consumed by the system (negative values).

Most of the values in this plot are negative because of the low solar irradiance level of the cloudy days. It means that, for the most part of the test, the system current consumption was higher than the current coming from the solar panel. Fig. 13a demonstrates that, at no time, the battery current of the MPPT circuit solar panel was higher than the battery current of the directly coupled one. From this plot it is also possible to determine the system’s current consume. During the night period there was no energy input. Therefore, the total system’s current consume (considering the sensor node, the battery monitoring IC, the voltage detector and also the analog switches) may be considered as nearly 50mA (which is constant due to the operation mode of EPOSMoteII sensing platform). From this conclusion, it is possible to plot a second current curve, which represents only the current delivered by the solar panel (Fig. 6
                        a).

The second issue is the battery voltage. Fig. 11a shows the battery voltage for both circuits. This plot shows that the battery voltage of the MPPT circuit was higher than the battery voltage of the directly coupled circuit at the beginning of the test. However, due to the less current input in the MPPT circuit’s battery (Fig. 13a), the battery voltage became lower than the battery voltage of the directly coupled circuit.

Looking at Figs. 6a and 11a it cannot be clearly inferred that the directly coupled circuit has harvested more energy during the test. Therefore, Eq. (9) was used to generate a plot of remaining battery charge over the time. Fig. 10a shows the battery’s remaining electric charge during the experiment. The batteries were considered fully charged (
                           
                              
                                 
                                    Q
                                 
                                 
                                    0
                                 
                              
                              =
                              2600
                              
                              mA h
                           
                        ) at the beginning of the test. From this figure it is clear that the directly coupled circuit has harvested more energy during the test, once the electric charge level in the directly coupled circuit’s battery was higher than in the MPPT circuit’s battery. In order to avoid a purely visual analysis, the energy extracted by both circuits during the test was calculated by Eq. (13). The MPPT circuit has harvested 7.09kJ during the test, against 8.41kJ extracted by the directly coupled circuit.

Finally, Fig. 9a shows the solar irradiance acquired during the first test by a pyranometer placed beside the solar panel, with 27° of inclination (since Florianópolis is located at 27.6°S, 48.5°W). Solar irradiance data are essential for a comparison with the second test carried out in a sunny day, in order to understand the MPPT IC circuit behavior.

The second test period was 37h and 45min. It started on January 24, 2013 at 8:05am and finished on January 25, 2013 at 10:50pm. The differences from the first test were the environmental condition and the batteries’ state of charge. For this test, the batteries were not completely charged at the beginning of the test (
                           
                              
                                 
                                    Q
                                 
                                 
                                    0
                                 
                              
                              =
                              2100
                              
                              mA h
                           
                        ). This test has initiated during the morning, therefore the experiment should not start with fully charged batteries. As shown in Fig. 9b, the irradiance level was much higher during this test. Fig. 13b shows the battery current evolution for both circuits. Differently from the first test, Fig. 13b shows a visible difference in batteries’ currents. The MPPT battery current was significantly smaller during high irradiance levels. Exactly as in the first test, system’s current consumption is nearly 50mA for both circuits. This allowed to plot the current delivered by the solar panels during the second experiment (Fig. 6b).

The difference between the batteries’ voltages was also higher in this test (Fig. 11b). Also in order to compare the harvesting capacity of both circuits, the battery remaining electric charge is shown in Fig. 10b. This plot evidences the efficiency difference between both harvesting circuits, where it is notable that the directly coupled circuit has harvested more energy. Eq. (13) was used again in order to determine the amount of energy harvested by both circuits during the test. The MPPT circuit has harvested 11.63kJ against 16.33kJ harvested by the directly coupled circuit. Therefore, the MPPT circuit has harvested 28.78% less energy than the directly coupled one.

Simulations have been performed in order to validate the experimental results of this work. The chosen method for this validation was to calculate the theoretical current delivered by the solar panel. The first simulation consists in calculating the solar panel current when it operates on MPP. Eq. (4) was used to achieve this. The solar panel parameters were extracted from the solar panel characterization (Fig. 12a and b).

In order to obtain the 
                           
                              
                                 
                                    I
                                 
                                 
                                    MPP
                                 
                              
                           
                         (Maximum Power Point Current), Eq. (4) could be used, replacing the voltage V by the theoretical voltage 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                           
                        . However, Eq. (4) models only one solar cell. Solar panels are made of a set of solar cells arranged in series and/or in parallel. Therefore, Eq. (4) was rewritten to model a solar panel, resulting in Eq. (14), where: Np is the number of solar cells connected in parallel and Ns is the number of solar cells connected in series. The signal on the right side in Eq. (4) was also changed, in order to result in positive values for the solar panel current (since the battery monitoring IC considers incoming current as positive values).
                           
                              (14)
                              
                                 I
                                 =
                                 
                                    
                                       NsI
                                    
                                    
                                       ph
                                    
                                 
                                 -
                                 
                                    
                                       NsI
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       
                                          exp
                                          
                                             
                                                
                                                   
                                                      
                                                         eV
                                                      
                                                      
                                                         η
                                                         kTNp
                                                      
                                                   
                                                
                                             
                                          
                                          -
                                          1
                                       
                                    
                                 
                              
                           
                        
                     

For every irradiance level, the solar panel has a different 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                           
                        . Therefore, the first step was to obtain the theoretical 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                           
                         for each irradiance level verified during the tests. For this, the irradiance level vectors (Fig. 9a and b) were used to calculate the 
                           
                              
                                 
                                    I
                                 
                                 
                                    ph
                                 
                              
                           
                        . Following, I–V vectors were calculated (using Eq. (14)), with V varying from 0V to 
                           
                              
                                 
                                    V
                                 
                                 
                                    OC
                                 
                              
                           
                        . From the I–V vectors it is possible to calculate the solar panel power vector (multiplying I by V). Finally, the maximum power point is found (applying a simple max function to the power vector) and the voltage value which results in the maximum power (theoretical 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                           
                        ) is stored.

After finding the theoretical 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                           
                         for every irradiance level verified during the experiments, the 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                           
                         was used in Eq. (14) to generate the 
                           
                              
                                 
                                    I
                                 
                                 
                                    MPP
                                 
                              
                           
                        . Comparative curves are shown in Fig. 7
                        a and b. Fig. 7a shows that the simulated current was closer to the experimental in experiment 1. This is related to the MPPT IC efficiency, which was higher for low irradiance levels. Next section discusses the reasons for the MPPT IC better performance for low irradiance levels. It is important to note that, as expected, for both experiments, the simulated current was higher for the MPPT IC circuit than for the directly coupled circuit (see Fig. 8
                        a and b).

The solar panel current was also simulated for the directly coupled circuit. In this case it was the direct application of Eq. (4). 
                           
                              
                                 
                                    I
                                 
                                 
                                    ph
                                 
                              
                           
                         values were generated from the irradiance level vectors (Fig. 9
                        a and b). 
                        
                        
                        The voltage V was replaced by the battery voltage vectors (Fig. 11a and b), since the solar panel is directly coupled to the battery. Comparative curves are shown in Fig. 8a and b, which have a good fitting with the experimental data.

From the data presented in the previous section, one concludes that the directly coupled circuit is more efficient than the MPPT circuit. A closer look at the MPPT IC characteristics is necessary to understand this. As mentioned before, the SPV1040 is a dc/dc step up converter. This implies in the output voltage being higher than the input voltage. This restriction was respected during both tests. However, the higher the step up converter input power, the lower its efficiency (as shown in Fig. 5). In the first test, for low irradiance levels, the power delivered by the solar panel was lower than in the second test. This explains the difference in the MPPT circuit efficiency between the first and the second test.

Therefore, there is still an intriguing question. Why has not the MPPT circuit presented higher efficiency than the directly coupled circuit if the current limit was respected in both tests? In order to answer this question, another SPV1040 characteristic must be understood. The SPV1040 datasheet [12] shows that the IC output range from 2V to 5.2V when 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                    -
                                    SET
                                 
                              
                              ⩾
                              1.5
                              
                              V
                           
                        . It does not mean that the MPPT functionality is not enabled for lower 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                    -
                                    SET
                                 
                              
                           
                         voltages, since the datasheet states that once output voltage is higher than 2V the IC is in MPPT mode. However, the datasheet shows efficiency curves only for output voltages higher than 3V (including the one shown in Fig. 5), which indicates that for output voltages lower than 3V, the IC may not be working on its maximum efficiency. It is exactly what has been shown in the previous section (Fig. 11a and b). For output voltages lower than 3V the IC is still on MPPT mode but, may not be as efficient as it could be.

How could the SPV1040 be operated on its best performance case? The answer is to have a higher output voltage (higher battery voltage). This would improve the IC’s efficiency in two aspects: first, it would allow the usage of a solar panel with higher 
                           
                              
                                 
                                    V
                                 
                                 
                                    MPP
                                 
                              
                           
                        . Second, it would allow an output voltage higher than 3V (SPV1040 working in a higher efficiency operation point). However, as many other low power PiPs, the EPOSMoteII’s supply voltage ranges from 2V to 3.6V. This precludes the idea of adding one more NiMH battery cell to the system (which would imply in voltages higher than 3.6V).

Consequently, the solution is to design an MPPT circuit dedicated for low power PiPs. Some low power MPPT circuits have been proposed [6,10,17,18]. However, the MPPT methods are implemented in hardware [10,17,18] or in software [6]. A possible more suitable solution for EPOSMoteII would be the combination of low complexity Fractional Open Circuit Voltage (FOCV) method implemented in hardware but with a software control. The analysis of all data shown in Section 4 has led to this hybrid-circuit concept (software/hardware integrated FOCV technique), which is already being developed. Since the EPOSMoteII is already receiving solar panel current information (through the DS2438, see Section 3), it could change the FOCV duty cycle by software. Then, for periods of higher solar irradiance the duty cycle is increased, obtaining a better MPP tracking. For low irradiance levels, the FOCV duty cycle is reduced in order to save energy. Therefore, the system would be able to keep its energy-aware task-scheduler (which uses the DS2438 data) but it would also be energy efficient.

@&#CONCLUSION@&#

Although MPPT integrated circuits are efficient for a variety of electronic devices, this work demonstrates that there is still a lack in the MPPT solutions proposed by the integrated circuit industry. Through experimental and theoretical analysis, this work has shown that, for low power wireless platforms, even one of the most suitable MPPT ICs available in the market, does not overcome the circuit directly connecting the solar panel with batteries.

Two experiments carried under different environmental conditions have shown that, at no time, the MPPT IC was more efficient than the directly coupled circuit. For the test performed in a cloudy day (maximum irradiance of 
                        
                           810
                           
                           W
                           /
                           
                              
                                 m
                              
                              
                                 2
                              
                           
                        
                     ), the directly coupled circuit has harvested 8.41kJ against 7.09kJ from the MPPT circuit. For the test performed in a sunny day (maximum irradiance of 
                        
                           1133
                           
                           W
                           /
                           
                              
                                 m
                              
                              
                                 2
                              
                           
                        
                     ), the directly coupled circuit has harvested 16.33kJ against 11.63kJ from the MPPT circuit. Simulations have shown that, theoretically, the MPPT IC should extract more energy from the environment. However, due to the load’s characteristic (low voltage, low power) the MPPT IC step-up converter has worked on an inefficient operating point.

Finally, this paper motivates future works aiming to develop MPPT energy harvesting circuits dedicated for low power sensor platforms. The reasoning about MPPT efficiency presented here suggests that a lower power consumption MPPT technique could be implemented (i.e. Fractional Open Circuit Voltage). The usage of a software control is also suggested, in order to save energy and provide more flexibility to the MPPT system. The hypothesis of a hybrid MPPT system (low power hardware controlled by software) will be investigated in a following experiment.

@&#REFERENCES@&#

