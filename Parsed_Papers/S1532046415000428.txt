@&#MAIN-TITLE@&#DIRECT secure messaging as a common transport layer for reporting structured and unstructured lab results to outpatient providers

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Many outpatient providers with EHRs still cannot receive lab results electronically.


                        
                        
                           
                           The recently developed “DIRECT” secure messaging standard may help address this.


                        
                        
                           
                           Results are delivered as HL7 or PDF files attachments to secure email messages.


                        
                        
                           
                           An electronic provider directory centrally stores routing and format information.


                        
                        
                           
                           The modelled system is compatible with labs’ and EHRs’ existing HL7-based processes.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Health information exchange

Electronic health record systems

Laboratory results

HL7

Secure transport layer

Message routing

@&#ABSTRACT@&#


               
               
                  This report describes a grant-funded project to explore the use of DIRECT secure messaging for the electronic delivery of laboratory test results to outpatient physicians and electronic health record systems. The project seeks to leverage the inherent attributes of DIRECT secure messaging and electronic provider directories to overcome certain barriers to the delivery of lab test results in the outpatient setting.
                  The described system enables laboratories that generate test results as HL7 messages to deliver these results as structured or unstructured documents attached to DIRECT secure messages. The system automatically analyzes generated HL7 messages and consults an electronic provider directory to determine the appropriate DIRECT address and delivery format for each indicated recipient.
                  The system also enables lab results delivered to providers as structured attachments to be consumed by HL7 interface engines and incorporated into electronic health record systems. Lab results delivered as unstructured attachments may be printed or incorporated into patient records as PDF files. The system receives and logs acknowledgement messages to document the status of each transmitted lab result, and a graphical interface allows searching and review of this logged information.
                  The described system is a fully implemented prototype that has been tested in a laboratory setting. Although this approach is promising, further work is required to pilot test the system in production settings with clinical laboratories and outpatient provider organizations.
               
            

@&#INTRODUCTION@&#

The receipt and management of laboratory test results are among the most common information-processing tasks in outpatient medicine [1,2]. The use of electronic health record (EHR) systems can improve the clinical effectiveness and administrative efficiency of these tasks. As a result, practicing physicians have cited the ability to import and display lab results as one of the most desirable [3], frequently used [4] and productive [5] features of EHRs. The electronic management of lab results has also been shown to reduce test-related errors and improve patient safety relative to the paper-based processes [6–8].

For these benefits to be realized, test-result data must be transmitted from laboratories and incorporated into EHRs in an electronic form. This task is made difficult, in the general case, by the large number of disparate labs and EHRs that must communicate with each other and the absence of effective and widely adopted industry standards for electronic lab-result reporting [9]. Recently, the magnitude and urgency of this problem have increased. The federal government’s “meaningful-use” program has incentivized many more physician practices to adopt EHRs over the past several years [10,11], and the requirements of the program dictate that these EHRs receive and manage lab-result data electronically [12].

Among the challenges of electronically interfacing large number of laboratories and physician EHRs are (1) the need to route test results to the correct electronic addresses of the ordering provider and any copied providers, regardless of the practices these providers are associated with and the EHRs those practices use, and (2) the need to securely and reliably transmit test results to any provider’s EHR in a manner that they can and will accept. Until recently, no effective and widely adopted standard existed to facilitate these processes. In this paper, we identify a recently developed standard that is suitable for these processes and that is quickly gaining adherence, and we describe a prototype software system we have developed that applies this standard to correctly route and reliably delivery lab test results across many different EHRs and laboratories.

Although the HL7 standard has supported the electronic delivery of structured test results for over two decades, many laboratories and outpatient practices continue to have difficulty making the requisite connections to exchange lab test orders and results electronically. The difficulty arises because HL7 interfaces must typically be highly customized for each pair of communicating labs and physician practices. The need for customization stems from the under-specification of two fundamental aspects of HL7 interfacing:
                        
                           •
                           
                              Content: Although HL7 is a standardized messaging structure, a high degree of variability and optionality exists within the structures used to communicate lab results [13]. This lack of standardization within the HL7 standard necessitates substantial further analysis, negotiation, and custom programming to build a functioning lab-reporting interface.


                              Transport: HL7 does not specify the means by which lab-result messages are securely and reliably transmitted between the lab and the physician practice over a network. Organizations have used a variety of technical mechanisms, including secure FTP, TCP/IP sockets over VPN connections, SOAP (HTTP/S) messaging, and application-level encryption of content over non-secure networks. Use of these mechanisms requires common networking configurations by both parties, and sometimes the procurement of the same proprietary software.

In the best case, this need for customization in terms of both content and transport creates significant development and maintenance costs for both labs and practices [14]. Anecdotal evidence suggests that each lab interface costs a physician practice between $3500 and $25,000 [9,15–17]. Those practices that can afford lab interfaces must often wait three to six months to have an interface implemented, given the substantial effort required on the part of their EMR and lab vendors, as well as the recent avalanche of requests from other practices seeking to achieve meaningful use [18]. In the worst case, the prospect of such costs precludes the building of interfaces between certain pairs of labs and practices. Laboratories will often support HL7 interfaces for only their higher volume and more lucrative clients. Physician practices that use multiple lab providers can often afford HL7 interfaces for only their highest-volume labs. As a result, many pairs of labs and physician practices that would benefit from an electronic lab interface still lack such a facility [19].

Recently, headway has been made in the further standardization of content for lab-result reporting. In 2007, a tightly specified subset of the HL7 lab-result message called “ELINCS” was developed under the sponsorship of CHCF and approved as an HL7-balloted implementation guide [20]. Based in part on this work, HL7 subsequently specified a related implementation guide for lab-result reporting called “LRI-R1” [21], support for which has been mandated as part of the EHR certification criteria for stage 2 of meaningful use [22].

Meanwhile, no such progress has yet occurred in standardizing and streamlining a transport mechanism for lab-result reporting to outpatient physicians. The advent of DIRECT secure messaging, however, presents an opportunity to also standardize transport for lab-result reporting by leveraging a secure and versatile messaging technology that is projected to be broadly available among outpatient physicians in the near future.

Further, DIRECT messaging could also be leveraged to electronically deliver lab-test results as unstructured, human-readable documents (such as PDF files), in lieu of faxing or mail delivery for provider organizations that lack EHRs or have EHRs that cannot receive or incorporate HL7 messages.

DIRECT secure messaging (“DIRECT”) is a set of technical protocols and policies for the secure transmission of email messages containing patient health information [23,24]. DIRECT leverages mature technologies for secure email, namely SMTP, MIME, and the public key infrastructure (PKI), which are already used broadly across industries. As importantly, DIRECT leverages long-established conventions for patient-information sharing: Information is explicitly “pushed” from one party to another, in a secure and trusted manner, on a case-by-case basis, and in response to an ad hoc request or a mutually agreed upon information-sharing process. The EHR certification criteria for stage-2 of the CMS meaningful use program mandate that certified products support the DIRECT messaging standards [25]. Owing to these attributes, DIRECT technology is likely to enjoy widespread adoption and could, therefore, serve as a platform for a variety of health data interoperability functions, including a transport mechanism for lab result reporting.

Specific features of DIRECT support the result-reporting use case:
                           
                              •
                              Email addresses are already bound to identities (organizational and/or individual) through digital certificates and related identity-proofing processes.

Secure transmission over the public internet is provided through a non-proprietary, robust, but relatively simple technology, which extends the reach of DIRECT messaging to almost any organization.

MIME provides support for a large variety of supported content, enabling the customized formatting of lab-result information for different recipients (for example, as HL7 messages, PDF documents, or both).

A well-defined message-disposition notification (MDN) protocol provides a simple but reliable mechanism for communicating whether a lab result was successfully delivered to the intended recipient’s mailbox [26,27].

The “mailbox” paradigm of email servers provides built-in queueing for incoming traffic and logging of inbound and outbound messaging.

The POP3 and IMAP client APIs are supported by virtually all email servers, which enables arbitrary applications to send and receive DIRECT secure messages. This capability allows DIRECT secure messaging to support a variety of use cases for health information exchange, beyond “human-to-human” email messaging:
                                    
                                       –
                                       Machine-to-human (e.g., the automated delivery to caregivers of test results as PDF documents attached to secure email messages, as described in this report).

Human-to-machine (e.g., a simple query/response mechanism allowing caregivers to access patient data stored in an online repository [28]).

Machine-to-machine (e.g., the transport of lab results as structured HL7 messages between clinical laboratories and electronic health record systems, as described in this paper).

Although DIRECT secure messaging has been suggested in the past as a transport layer to deliver laboratory test results [29], this paper is the first to describe a general-purpose technology that automatically analyzes, appropriately formats, correctly routes, and securely delivers lab results via DIRECT secure messaging.

Based on these features of DIRECT messaging, we have developed a bi-directional DIRECT gateway for delivering lab results via secure email. Through this gateway, lab results generated as HL7 messages may be delivered as file attachments to a DIRECT message, either in their original HL7 text formats or as human-readable PDF files. The determination of which format(s) should be sent and which DIRECT addresses should be used is made by programmatically interrogating a provider directory.

The DIRECT gateway supports the following specific functions, as illustrated in Fig. 1
                        :
                           
                              1.
                              Delivery of HL7 lab results as PDF file attachments in DIRECT messages, and processing of acknowledgements sent back by recipients.

Delivery of HL7 lab results as HL7 file attachments in DIRECT messages, and processing of acknowledgements sent back by recipients.

Receipt of HL7 lab results as HL7 file attachments in DIRECT messages, forwarding of the HL7 content to a local HL7 interface engine, and transmission of acknowledgements back to senders.

The DIRECT gateway can transmit HL7 lab results to providers who lack HL7 interface engines or even lack EHRs, as long as they have DIRECT messaging accounts. As shown in Fig. 1, this situation may arise when a provider uses an EHR that lacks an HL7 interface but has built-in DIRECT messaging capabilities (top branch), which allow her to receive, review, and upload PDF file attachments to a patient’s record. It can also arise when a provider uses a stand-alone DIRECT messaging application (bottom branch), because she has no EHR or her EHR has neither an HL7 interface nor a built-in DIRECT messaging capability. In this case, the stand-alone application allows her to receive and review PDF file attachments, and subsequently print them or save them as files for later attachment to a patient’s record.

The DIRECT gateway transmits a lab result as a PDF file via the following process steps:
                              
                                 1.
                                 The gateway receives an HL7 lab result from the clinical laboratory’s HL7 interface engine.

The gateway automatically interrogates an online provider directory and determines that one or more providers designated as an ordering or a copied provider within the HL7 message can only receive lab results as PDF files (a determination made via the process described in Section 3.3).

It subsequently transforms the HL7-formatted result into a human-readable PDF file and attaches this file to a DIRECT message that it has automatically formulated and addressed to the designated provider (again, after determining the provider’s DIRECT address via the provider directory).

It then submits the DIRECT message to a DIRECT secure transfer agent (STA) for transmission to the addressed recipient. In our implementation, the STA is integrated with the DIRECT gateway.

If successfully transmitted, the message and attachment will appear in the recipient’s DIRECT messaging “in-box” (see Fig. 2
                                    ). Fig. 3
                                     shows the contents of the delivered PDF file attachment, which was generated from the original HL7 message (the original HL7 message is displayed in Section 3.2.2). Note that the OBR segment of the original message indicates the ordering provider to be “Walter Sujansky”, and a copied provider to be “James Morris” (the copied provider is not visible in the displayed view of the message). Based on this information and further data accessed from the provider directory, the gateway formulated two DIRECT messages containing the PDF file and sent one message to each of the providers.

The gateway subsequently awaits and logs the results of the transmission, which may include:
                                       
                                          i.
                                          The message was not sent because the recipient’s address could not be verified as a secure DIRECT address (for example, due to an untrusted digital certificate).

The message was sent, but could not be delivered to the recipient’s DIRECT mailbox, as indicated by a timeout or by a negative message disposition notification (MDN) from the recipient’s STA.

The message was sent and successfully delivered to the recipient’s DIRECT mailbox, as indicated by a positive message disposition notification (MDN) from the recipient’s STA.

Based on the results of the transmission, the gateway formulates an appropriate HL7 ACK message that corresponds to the originally received HL7 message, and returns that ACK message to the clinical laboratory’s HL7 interface engine.

The same DIRECT gateway can also support the transmission of HL7 lab results as “native” HL7 messages attached to DIRECT messages, rather than as PDF files. This capability is intended to support the machine-to-machine communication of structured lab results, in conjunction with HL7 interface engines at the sending and receiving ends. Fig. 4
                            illustrates the flow of HL7 messages and DIRECT messages in this approach.

Use of DIRECT gateways in this manner provides two benefits:
                              
                                 1.
                                 It allows DIRECT messaging to be used as a standardized secure transport mechanism for HL7 interfacing between laboratories and their often numerous and heterogeneous outpatient provider clients. Standardizing on DIRECT messaging could enable laboratories and outpatient providers to leverage a single, common, and already available infrastructure for secure transport, rather than having to agree upon, implement, and support different transport mechanisms for different interface partners. Specifically, DIRECT messaging provides organizational and individual identity proofing, a standard non-proprietary protocol for encryption and digital signature, and centrally maintained provider directories. Use of DIRECT messaging could conceivably render the configuration of a secure transport channel for HL7 lab-result interfacing as simple as a provider organization publishing its DIRECT address for lab-result delivery in a provider directory.

It allows a single gateway module to appropriately format and route HL7 lab-result messages to a variety of provider organizations with a variety of interoperability capabilities (see Fig. 1). As discussed, the DIRECT gateway programmatically interrogates a provider directory to determine how various intended recipients of HL7 lab results can receive those data, then formats and addresses the data appropriately. Enabling the gateway to equally transmit lab results as PDF files designed for human review and as structured HL7 documents designed for incorporation into an EHR via an HL7 interface engine simplifies the process for laboratories to electronically distribute lab results to various of their provider clients. It also can streamline the process for provider organizations to migrate from receiving lab results in unstructured (PDF) formats to receiving them in structured (HL7) formats, for example by simply changing the address and format information published in a provider directory.

As seen in Fig. 4, separate DIRECT gateways operated by senders and receivers can provide a secure transport mechanism for HL7 interfacing. The role of the gateway in sending HL7 messages from a laboratory is discussed in this section. The role of the gateway in receiving HL7 messages at a provider organization is described in Section 3.2.3.

At the laboratory, the DIRECT gateway transmits an HL7-formatted result via the following process steps:
                              
                                 1.
                                 The gateway receives an HL7 lab result from the clinical laboratory’s HL7 interface engine.

The gateway automatically interrogates an online provider directory and determines that a provider designated as an ordering or a copied provider within the HL7 message can receive lab results as HL7 messages (a determination made via a process described in Section 3.3).

It subsequently attaches the received HL7 message as a text file (unchanged) to a DIRECT message that it has automatically formulated and addressed to the designated provider (again, determining the provider’s DIRECT address from the provider directory). An example of such a file attachment is shown in Fig. 5
                                    .

It then submits the DIRECT message to its internal secure transfer agent (STA) for transmission.

The gateway subsequently awaits and logs the results of the transmission, which again includes an MDN indicating whether the DIRECT message was successfully received and delivered by the recipient’s STA (as described in Section 3.2.1). However, because the transmitted HL7 message may ultimately be processed by another HL7 interface engine at the receiving end, the transmission may also result in the receipt of an HL7 acknowledgement (“ACK”) message from that interface engine. This ACK message would also be received as an attachment to a DIRECT message reply from the recipient’s STA, as described in Section 3.2.3. In this case, the DIRECT gateway must deliver the ACK message back to the laboratory’s HL7 interface, which may have its own application-level logic for processing the acknowledgement. In addition, the DIRECT gateway logs receipt of the MDN and HL7 ACK messages and associates them with the original outgoing HL7 message so a full audit trail of the lab-result delivery transaction is available for review.

An important requirement for using DIRECT messaging as the transport mechanism for an HL7 interface is that the means and details of the DIRECT transport layer be transparent to the laboratory’s HL7 interface engine. To this end, the DIRECT gateway must be seen by the sending interface as the recipient of the HL7 message, and all HL7-level acknowledgement messages must be forwarded to the sending interface as if they originated at the DIRECT gateway.

The DIRECT gateway also provides the ability for provider organizations to receive HL7 lab results as “native” HL7 message files attached to DIRECT messages. In this mode, as shown in Fig. 4, the gateway resides between the sender’s DIRECT gateway and the recipient’s HL7 interface engine, and it relays HL7 lab-result messages and HL7 acknowledgement (“ACK”) messages between the two. To the provider organization’s HL7 interface engine, therefore, the DIRECT gateway appears and behaves as if it were the sender’s HL7 interface engine.

The provider organization’s DIRECT gateway performs this relay function via the following process steps:
                              
                                 1.
                                 Upon receipt of a DIRECT message and safe storage of the message to the recipient’s mailbox, the gateway’s STA sends a “Dispatched” MDN notification back to the sender’s mailbox, per the standard notification protocol for DIRECT messaging.

If the received DIRECT message includes an HL7 lab-result file attachment, the gateway logs receipt of the DIRECT and HL7 messages, extracts and opens the file attachment, and forwards the HL7 message to the local HL7 interface engine. The unique identifier of the HL7 lab-result message (“message control ID”) is recorded for subsequent reference. If the received DIRECT message does not contain an HL7 lab-result file attachment, the message is ignored.

The gateway’s HL7 listener awaits the receipt of ACK messages for any of the HL7 messages that were previously received and forwarded to the local HL7 interface engine. Upon receipt of an ACK message, the gateway attempts to match the ACK to a previously received HL7 message, and, if successful, to the DIRECT message in which that HL7 message was attached.

Using the REPLY-TO address in the associated DIRECT message (or the FROM address if no REPLY-TO address was specified), the gateway formulates a new DIRECT message to this address, attaches the HL7 ACK message as a text file attachment, and submits the DIRECT message to its internal secure transfer agent (STA) for transmission.

The gateway subsequently waits for and logs the results of the transmission, which again includes an indication of whether the DIRECT message containing the ACK was successfully delivered by the recipient’s STA (as described in Section 3.2.1).

Logging of each message’s disposition is important to the sending laboratory for compliance with government regulations. The DIRECT gateway used by a sending laboratory, therefore, maintains a database of all HL7 messages it received from the laboratory’s HL7 interface engine, how many DIRECT messages were generated to deliver these HL7 messages to the intended providers, to which DIRECT addresses these messages were sent, and the ultimate disposition of each DIRECT message. Fig. 6
                            shows a simplified view of the logging information for a single HL7 message as displayed in the DIRECT gateway’s web-based administrative console.

The DIRECT gateway used by a receiving provider organization maintains an analogous database, which records:
                              
                                 •
                                 Each of the DIRECT messages received.

Which received messages contained a HL7 lab-result attachment.

Whether each attachment was submitted to a local HL7 interface engine.

Whether any resulting HL7 ACK messages were received from the local HL7 interface engine and sent back to the sending laboratory as DIRECT message attachments.

The disposition of each DIRECT message containing an HL7 ACK message that was sent back to the sending laboratory.

The DIRECT gateway includes a web-based administrative console for searching and reviewing this database.

In addition to standards for secure email messaging, standards are also emerging for electronic provider directories. These directories store the identifying attributes, contact information, and DIRECT secure addresses of individual providers and provider organizations. Users and applications access this information through web applications or programmatic APIs in order to determine the appropriate addresses for secure communications. Standardization of web-services APIs enables client applications to access provider directories over the internet, as needed.

One recently developed standard for provider-directories is HPDPlus [30], which specifies an LDAP-based model for representing provider information and a SOAP-based protocol for accessing the information from remote LDAP servers. The DIRECT gateway for lab-result reporting uses the HPDPlus v1.1 standard to retrieve information about the intended recipients of test results, so that the gateway may format the results as appropriate (PDF vs. HL7) and send the results to the appropriate DIRECT messaging address for each recipient.

The availability of a standard data model and web-services API for provider directories, such as HPDPlus, enables different laboratories with DIRECT gateways to readily access a single provider directory to inform their delivery of lab-test results. A single provider directory centralizes the relevant address information, as opposed to each laboratory building and maintaining its own directory of DIRECT addresses for ordering providers and other providers who may be copied on lab results. Fig. 7
                         illustrates now multiple labs can use the information in a single, shared provider directory to appropriately deliver test results to community physicians.

The DIRECT gateway determines the appropriate format(s) and address(es) for delivering a HL7 lab-result message via the following process:
                           
                              1.
                              The gateway parses the HL7 message and extracts the identity of the ordering provider and any copied-to providers from the OBR segment. A national provider identifier (NPI) must be included in the HL7 message for each of these providers.

The gateway also extracts the identity of the organization to which the lab test should be reported, as specified in the Receiving Facility field of the MSH segment (MSH-5). An NPI must be included for this organization also.

The gateway submits a query to the provider directory to retrieve the “Provider” record for the ordering provider, using the NPI as a unique identifier. The gateway subsequently retrieves each “Membership” record associated with the retrieved Provider record, which identifies the organization(s) to which this provider belongs (the HPDPlus data model allows a provider to belong to multiple organizations). Lastly, the gateway retrieves the “Organization” record corresponding to each of the Membership records.

If a Membership record indicates that the ordering provider belongs to an organization that matches the organization to which the lab test should be reported (based on matching NPIs), the gateway then retrieves each of the “Electronic Service” records associated with the Membership record. These Electronic Service records contain information about the DIRECT address(es) to for the ordering provider at that organization.

The gateway inspects the hpdIntegrationProfile and hpdContentProfile attributes of each Electronic Service record thus retrieved.

If the gateway encounters an hpdIntegrationProfile attribute with the value “DirectProjectSMTP” and an hpdContentProfile attribute with the value “Lab-Result-HL7v2”, it concludes that this Electronic Service record specifies the DIRECT address to which lab results formatted as HL7v2 messages should be sent. The gateway subsequently retrieves the value of the hpdServiceAddress and delivers the HL7 lab-result message as an attachment to a DIRECT message addressed to this value.

If the gateway encounters an hpdIntegrationProfile attribute with the value “DirectProjectSMTP” and an hpdContentProfile value of “PDF”, it concludes that this Electronic Service record specifies the DIRECT address to which lab results formatted as PDF documents should be sent. The gateway subsequently retrieves the value of the hpdServiceAddress, transforms the HL7 lab-result message to a PDF document, and delivers the PDF document as an attachment to a DIRECT message addressed to this value.

If the gateway does not find a suitable combination of hpdIntegrationProfile and hpdContentProfile for delivering the lab-test result, it logs that it could not locate an appropriate DIRECT address for delivering the lab result to the ordering provider.

The gateway then processes the identity of each of the copied-to providers in a similar manner. If the provider belongs to the same organization to which the lab test should be reported, then the gateway attempts to find an appropriate ElectronicService record associated with that provider–organization Membership. If the provider does not belong to the same organization as the ordering provider, the gateway determines whether the provider belongs to a single other organization, and tries to find an appropriate ElectronicService record associated with that provider–organization membership. If the provider belongs to multiple other organizations, the gateway does not try to deliver the lab result because there is typically not sufficient information in the HL7 message to determine which organization should be the appropriate recipient. In the latter case, the gateway logs that it could not find an appropriate DIRECT address for delivery of the lab result to that copied provider.

Organizations that use DIRECT gateways as a transport mechanism for sending or receiving HL7 messages can continue to operate HL7 interfaces with organizations using other transport mechanisms. Because each DIRECT gateway works in conjunction with an existing HL7 interface engine at a laboratory or provider organization, the existing interface engine can also be configured to send or receive HL7 messages through transport mechanisms other than DIRECT messaging, as illustrated in Fig. 8
                        .

This feature allows, for example, laboratories and provider organizations to continue to exchange HL7 messages with their larger trading partners via existing HL7 interfaces, while also leveraging DIRECT messaging as a transport mechanism to build new HL7 interfaces with their smaller trading partners. Note that additional logic within HL7 interfaces would be required to route specific outgoing messages appropriately, but such logic could be based on routing mechanisms that are already required and in use (such as mappings between client accounts and IP addresses).

We have implemented the technology described above in a prototype system that successfully delivers both HL7-formatted and PDF-formatted lab results as attachments to DIRECT messages, per the diagram in Fig. 1.

The DIRECT gateways include a built-in HL7 processing module based on the HAPI libraries [31] to interface with legacy HL7 interface engines at the sending and (when applicable) receiving ends. The DIRECT gateways also include built-in DIRECT STA modules based on the DIRECT Java reference implementation [32], which send and (when applicable) receive secure messages per the DIRECT protocol.

The sending DIRECT gateway looks up providers’ address information stored in a separately hosted HPDPlus provider directory via standard SOAP/DSML web-services calls. Authentication occurs via username and password embedded in the SOAP messages. The sending gateway also automatically transforms HL7 lab-result messages into human-readable PDF documents (when applicable) using an XSLT script to transform HL7 v2.xml messages to HTML and a commercial library to transform HTML to PDF [33].

The DIRECT gateway logs the processing and disposition of each transmitted and (when applicable) received lab result in a local relational database (MySQL), and allows administrators to review the contents of this database through a user-friendly, web-based application.

The system has been tested to date using a mocked-up HL7 interface engine to represent the sending laboratory and mocked-up HL7 messages to represent the generated test results. Similarly, a mocked-up HL7 interface engine has been used to represent the receiving EHR when results are sent as native HL7 messages. A web-based DIRECT messaging application (MirthMail) has been used to test the receipt and display of lab-result messages sent as PDF documents.

The system has not yet been tested with an HL7 interface engine at an actual clinical laboratory as the result source, nor with an HL7 interface engine and EHR at an actual provider organization as the result consumer. Such a pilot test is the next phase of this project development.

A number of limitations exist in our current implementations:
                           
                              •
                              The transformation of HL7 messages to PDF documents is based on a specific implementation guide for HL7 lab-result messages (ELINCS). ELINCS is a highly constrained implementation guide based on HL7 v2.5 and used primarily in California at this time. The HL7-to-PDF transformation script would need to be customized for different HL7 implementations of lab-result messages.

The HAPI HL7 library does not currently support asynchronous acknowledgement (ACKs) to HL7 messages. This limitation has prevented the DIRECT gateway from passing returned ACK messages back to the originating HL7 interface engine when DIRECT messaging is used as a transport mechanism for HL7, per the data flow depicted in Fig. 4. We would need to customize the (open source) HAPI implementation or migrate to a different HL7 library to fully implement the “round trip” processing of HL7 result and acknowledgement messages that is envisioned.

To support the correct addressing and formatting of HL7 lab-result messages as described in Section 3.3, the messages must contain the NPIs of the ordering provider, the ordering facility, and any copied-to providers. Laboratories may not typically include these identifiers in HL7 lab-result messages today (especially that of the ordering facility), so that changes to the HL7 interface engine and/or laboratory information system at a sending laboratory may be required to use the described solution.

EHRs may evolve to accept structured lab results in formats other than HL7 messages, such as CCR, CCD, or C-CDA documents [34]. The DIRECT gateway could be enhanced to transform HL7-encoded results into any of these document formats to accommodate such EHRs. This enhancement would allow DIRECT-enabled EHRs that can process CCR, CCD, or C-CDA encoded documents to receive and import lab result data, while allowing laboratories to continue encoding test results in HL7 only.

The solution described above could be modified or generalized to apply DIRECT messaging to the secure delivery of other types of clinical information.

When patients are admitted to a hospital or seen in a hospital’s emergency department, the registration of these patients is often communicated internally through HL7 ADT messages. Using DIRECT gateways similar to those described above, hospitals could also immediately notify patients’ healthcare providers or insurers outside of the hospital of these registration events. Such “real-time” notifications can be valuable to help community physicians or insurers better manage patients’ care during and immediately after hospital encounters.

This application of DIRECT gateways would require an additional component that is not currently part of the solution described above: An up-to-date online repository of patients’ associations with community providers and health insurers to determine which providers and/or insurers should be notified of a specific patient’s hospital encounter. Because these associations change periodically and are not well documented (particularly patient-physician relationships), the development and maintenance of such a repository may be a significant challenge. However, at least one organization has implemented such a “patient-insurer directory” to enable insurers to be notified of their members’ hospital encounters in real time [35].

Where imaging centres already use HL7 interface engines to transmit radiology reports to certain of their outpatient physician groups, the DIRECT gateway described above could be readily adapted to send out these reports as PDF documents attached to DIRECT messages or to serve as an alternative transport mechanism for delivering structured HL7 radiology reports to smaller provider organizations. This model would enable DIRECT messaging to replace telephone facsimile (fax) delivery of radiology reports to many physician practices, as well as to replace custom transport mechanisms (VPN, sFTP, etc.) for the delivery of structured reports via HL7 interfaces.

Note that DIRECT messaging may not be an appropriate mechanism for delivering medical images, themselves, owing to the size of certain of these files and the limitations of certain email servers. To communicate the images themselves, however, DIRECT messages could contain one-time hyperlinks and other secure references to online copies of the images, which could be accessed from within the messages via other transmission modalities (e.g., a web browser or image-viewing plug-in).

@&#CONCLUSION@&#

The electronic reporting of lab results to every outpatient physician who uses an EHR would substantially improve practice efficiency and benefit healthcare quality. This goal is currently thwarted by the absence of effective, widely adopted standards for uniformly representing test results, for reliably routing them to the appropriate providers, and for securely delivering them to any EHR system. The DIRECT messaging protocol may provide a standardized and scalable solution for the reliable routing and secure delivery of test results for the large number of laboratories and physician practices that still lack such electronic connectivity. Our prototype design and implementation suggest that the DIRECT protocols and related provider-directory standards are capable of routing and transporting lab results to outpatient providers in a manner compatible with laboratories’ existing HL7-based processes and providers’ growing adoption of DIRECT. Very broad adoption of the DIRECT protocol among providers is likely due to the protocol’s relative simplicity, basis in mature technologies already used broadly across industries, and inclusion in the federal government’s stage-2 EHR certification criteria. Hence, additional exploration of the model described in this paper is warranted, including refinement and pilot testing in production environments. Although ubiquitous electronic reporting of structured lab results will also require better standardization of content, DIRECT secure messaging may provide a widely available, cost-effective, and practical transport layer for this important EHR capability.

@&#ACKNOWLEDGMENTS@&#

The authors would like to thank the California HealthCare Foundation for its generous support of this work (Grant #17753).

@&#REFERENCES@&#

