@&#MAIN-TITLE@&#A Semi-Markov decision problem for proactive and reactive transshipments between multiple warehouses

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Semi-Markov decision problem formulation.


                        
                        
                           
                           Benefits of proactive over different reactive transshipment rules.


                        
                        
                           
                           Networks with intermediate opportunities of demand pooling.


                        
                        
                           
                           The difference between reactive transshipment rules is negligible.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Lateral transshipments

Inventory control

Multiple locations

Markov decision problem

@&#ABSTRACT@&#


               
               
                  Lateral transshipments are an effective strategy to pool inventories. We present a Semi-Markov decision problem formulation for proactive and reactive transshipments in a multi-location continuous review distribution inventory system with Poisson demand and one-for-one replenishment policy. For a two-location model we state the monotonicity of an optimal policy. In a numerical study, we compare the benefits of proactive and different reactive transshipment rules. The benefits of proactive transshipments are the largest for networks with intermediate opportunities of demand pooling and the difference between alternative reactive transshipment rules is negligible.
               
            

@&#INTRODUCTION@&#

Rapid changes in demand structure driven by emerging markets force companies to re-design their distribution networks. High service levels require shorter lead times which can be met only by new distribution locations close to emerging demand nodes. Angel et al. (2006) emphasize the growing importance of European regional distribution centers supplied directly from factories and report that the customers are not concerned about the location the goods are coming from, as long as their service requirements are met. This offers the advantage that customers do not necessarily have to be served by pre-selected locations but can be supplied by the location which is best for the supplier and therefore enables further inventory pooling opportunities. An inventory system which distributes a product to customers over a large geographical region often requires several locations. Theoretically, each market can be served by each warehouse if transshipment cost and service time are negligible. Markets face time constraints from service level agreements and, given geographical distances, markets usually can be served only by a limited number of warehouses within a predetermined service time. In this case, the network is divided into pooling groups that can share their inventories.

Lateral transshipments are a strategy for inventory sharing between the members of a pooling group. They are widely used when transshipment costs are relatively low compared to high holding costs and penalty costs for failing to meet demand. This cost structure is very common for expensive spare parts. However, transshipments are also used for parts in general. Two main types of lateral transshipments can be identified in the literature, proactive and reactive transshipments. They differ as to when transshipments are performed. Proactive transshipments are used in advance of stockouts to avoid future stockouts. Reactive transshipments are triggered when a warehouse faces a stockout by transferring inventory from another warehouse with stock on hand. Applying reactive lateral transshipments, the challenge is to find optimal base stock levels and the optimal source for a transshipment. Proactive transshipments additionally require a decision on the optimal moment for the stock movement.

Alternatively, lateral transshipments can be seen as a redirection of demand, a view that we will follow in this paper. If the base warehouse is out of stock when a customer arrives, this results in a request for a reactive transshipment that can physically be either shipped to the customer via the original base warehouse or directly from the sending warehouse. Redirecting an incoming customer to another warehouse even if the base warehouse for this customer still has on-hand stock can be seen as a proactive transshipment. We study proactive and reactive transshipments between several markets and warehouses in different network structures under continuous review. The warehouses use one-for-one inventory replenishment policies which are common for expensive spare parts, because of high prices, low demand rates, and rather negligible fixed ordering costs (see Axsäter (2003)).

Lateral transshipments have been widely addressed in the literature. Recent overviews are provided in Wong et al. (2006) and Paterson et al. (2011). In the next four paragraphs, we summarize the main literature grouped by timing of review and by pro- or reactiveness of the shipments, i.e. proactive and period review, proactive and continuous, reactive and continuous, and reactive and periodic.

The research on proactive transshipments is dominated by periodic review, because the beginning and the end of each period provide a natural occasion for stock redistribution. Reactive transshipments were analyzed both in periodic and continuous review settings. One of the first redistribution models for proactive transshipments with a single period is presented in Allen (1958). All retailers together build a single pooling group where the transshipment times for redistribution are negligible and the stock can be rebalanced subject to transportation cost. Agrawal et al. (2004) consider a system where rebalancing is done at a predetermined time before all demand has been realized and present a dynamic programming formulation to determine optimal decisions. They conclude that a dynamic policy often outperforms a static one. Tagaras and Vlachos (2002) combine proactive transshipment and replenishment decisions. Two locations are supplied periodically by a central warehouse and the redistribution point in time has a large effect on performance. Furthermore, they investigate several different types of ordering and transshipment policies and find that type and variability of demand are the key parameters for an appropriate transshipment policy. Our approach differs in that it allows for transshipment decisions being triggered by every demand event in continuous time and allowing for an arbitrary number of multiple locations.

For proactive transshipments in a continuous time review setting, Van Wijk et al. (2011) study a two location inventory network for repairable parts where both warehouses can hold back some inventory. They derive the optimal transshipment policy for both warehouses by a Markov Decision Process and present conditions under which the optimal policy is of a simple type. The two location nature does not require a source decision, which is one of our main contributions. Paterson et al. (2012) analyze a network with multiple warehouses that follow (R,Q) policies and complete pooling. They assume a significant fixed cost for carrying out a transshipment and combine proactive and reactive elements to develop a hybrid policy for stock redistribution. Triggered by a stockout as for reactive policies, the existence of fixed transshipment costs provides an incentive to not just clear a shortage but use the opportunity for further inventory rebalancing, an element of proactive transshipments. The hybrid policy significantly improves a pure reactive policy. As opposed to our approach, transshipments are triggered by a stockout and the proactive nature is only driven by fixed costs driven economies of scale.

For reactive lateral transshipments under continuous review and backordering, Lee (1987) proposes a model for pooling groups of identical locations where replenishments are one-for-one and compares three transshipment rules for the choice of the sending source: random rule, maximum stock on hand, and smallest number of outstanding orders. Lee finds that for all rules the use of transshipments leads to significant cost savings but there is no significant performance difference between the three rules. Axsäter (1990) extends the model to non-identical locations within a pooling group but only analyzes a random transshipment rule. Dada (1992) analyzes a pooling model under lost sales where the inventory is controlled by one-for-one replenishment policy. He uses a Markov chain approach to calculate different system performance measures. Alfredsson and Verrijdt (1999) extend this model to include emergency deliveries from upper echelons. They further find that the assumption of exponentially distributed lead times is rather robust. Kutanoglu and Mahajan (2009) extend the model by Alfredsson and Verrijdt (1999) to time-based service constraints. They assume that immediate service rather than stock availability is the key to successful service. Therefore, they analyze a situation where the warehouses are required to satisfy a certain part of overall demand within a given time window. While the above references consider complete pooling, Reijnen et al. (2009) consider lateral transshipments for expensive spare parts with delivery time requirements in partial pooling structures. In case of a stockout, the transshipment source is obtained from a predetermined, ordered list (e.g., according to transshipment time). The authors present a Markov-analysis to evaluate the system performance and present algorithms to set the initial base-stock levels. They further integrate the use of lateral transshipments into the design of inventory networks which can lead to significant cost reductions. Lien et al. (2011) investigate the benefits of transshipments depending on the network configuration and show analytically that chain configurations known from manufacturing flexibility analysis are a superior choice in transshipment settings, too. Our work differs from the above as it generalizes to proactive transshipments and further allows for partial (endogenously determined) pooling between warehouses only constrained by maximum service time requirements.


                     Gross (1963) examines reactive lateral transshipments in a single period, single echelon setting with multiple locations and characterizes the optimal policy. Robinson (1990) analyzes a multi-period problem and derives the optimal solution for identical locations or a maximum of two different locations. For more than two non-identical warehouses, a linear programming based heuristic is presented. Herer et al. (2006) consider the problem of Robinson for a more general cost structure and provide an approach which guarantees convergence. Tagaras (1999) studies a network with three warehouses, complete pooling and (R,Q) replenishment policy and compares three transshipment rules: random rule, risk balancing and maximum stock on hand using simulation. He finds no significant differences between the transshipment rules. While the above references study inventory shipments after all demand in the period has been observed, Archibald (2006) analyzes a situation where continuous demand may trigger a reactive transshipment.

In the following, we present a hierarchical optimization approach with centralized control and information that is capable to solve both the proactive and the reactive transshipment problem. At the lower level, we use a Semi-Markov-Decision-Process (SMDP) to find the optimal transshipment policy. For a proactive strategy, this problem optimally determines the source location for every incoming customer demand, for the reactive policy the source is either optimally chosen or determined by a simple predetermined rule. The following rules will be considered:
                        
                           1.
                           
                              Random: The source is chosen with uniform probability among the feasible warehouses with stock on hand.


                              Highest inventory level: The warehouse with maximum stock on hand among the potential sources is chosen.


                              Minimal transshipment cost: The warehouse with minimum transshipment cost is chosen.


                              Highest run-out-time: The warehouse with maximum run-out-time (fraction of stock on hand and mean arrival rate) is chosen.

At the upper level, we determine the required order-up-to-levels by a greedy heuristic anticipating the optimal demand and sourcing management by the SMDP for any transshipment policy.

Section 2 introduces model assumptions and notation while also presenting the SMDP formulation. In Section 3, we discuss the solution methods for solving small instances to optimality. For a simple two-location network, we characterize the optimal policy and provide structural results of the optimal transshipment policy. The numerical study in Section 4 compares the performance of proactive and different reactive transshipment rules for various network configurations and parameter settings. We summarize the results and indicate further research in Section 5.

We consider ∣R∣ warehouses r
                        ∈
                        R selling a single product to m
                        ∈
                        M markets with Poisson demand. The demand rate for market m is denoted by λ
                        
                           m
                         and unsatisfied demand is assumed to be lost at a unit penalty cost l
                        
                           m
                        . Each warehouse r continuously reviews inventory and replenishes items from an external supplier with infinite supply according to an (S
                        −1,
                        S)-policy with base stock S
                        
                           r
                        . The replenishment lead time of warehouse r is exponentially distributed with mean 1/μ
                        
                           r
                         and the replenishment unit cost is z
                        
                           r
                        . The storage of units at warehouse r is subject to holding costs h
                        
                           r
                         per unit of time.

Due to service level requirements and geographical distance, each market m can only be served by a subset of warehouses W
                        
                           m
                        , where the warehouses in the list W
                        
                           m
                         are ordered by increasing distance to market m. We assume that longer distance corresponds to higher shipment cost to fulfill the service level requirement. The closest source of market m is called the base warehouse w(m) which is by definition the first warehouse in the list W
                        
                           m
                        . The base warehouse serves the respective market without additional costs, i.e., delivery costs are included in the unit replenishment cost. If a market m is served from another source r than the base warehouse, this can be seen as a transshipment with an additional shipment cost t
                        
                           mr
                        . Although we do not model delivery and transshipment times explicitly, the assignment of markets to warehouses through W
                        
                           m
                         accounts for such a delivery time requirement. Therefore, a warehouse which is not an element of W
                        
                           m
                         can be interpreted as a location whose delivery time does not fulfill the service time requirements of market m. Furthermore, we assume (l
                        
                           m
                        
                        −
                        z
                        
                           r
                        )>0∀r
                        ∈
                        W
                        
                           m
                        , i.e. a warehouse is only a candidate source for a market if the replenishment cost is smaller than the unit lost sales penalty. Table 1
                         summarizes the notation.

In the following, we model the second-stage transshipment problem for given base-stock levels S
                        
                           r
                         as a SMDP. A state represents a combination of inventory levels for all warehouses. There is a set of different decision alternatives in each state. If one alternative has been chosen, the system transfers to another state with a corresponding probability after a random period of time. The objective is to minimize expected long-run average costs under centralized information and decision. Within the general SMDP framework, we specify the differences in decision space and transition probabilities for proactive and reactive strategies. For ProTS, the optimal decisions, i.e. the sending warehouse for an incoming demand of a market, have to be found in each state. In ReTS, decisions are limited to states where the base warehouse for a customer is out of stock, i.e. a reactive transshipment is triggered. In that case, the sending source can either be determined optimally from all candidate warehouses (Rule 5) or be fixed in advance by a simple rule. In the latter cases, the SMDP formulation only serves to evaluate the long-run average cost of a policy.

Let i
                        =(i
                        1,…,
                        i
                        ∣R∣), i
                        ∈
                        I be a state that contains the inventory levels of all warehouses and 0⩽
                        i
                        
                           r
                        
                        ⩽
                        S
                        
                           r
                        , where I is the set of all states. A decision q
                        
                           im
                        
                        =
                        r, r
                        ∈
                        W
                        
                           m
                         assigns a potential next demand from market m to warehouse r in state i. The vector of all decisions in state i is expressed as a list of warehouses that serve the particular markets, Q
                        
                           i
                        
                        =(q
                        
                           i1,…,
                        q
                        
                           i∣M∣). The set of possible supply warehouses for every market can change in each state if some warehouses are out of stock. Warehouses which are out of stock are not considered as potential sources, except the base warehouse. Assigning a demand to the base warehouse which is out of stock is interpreted as a lost sale. For a given state i and market m we denote the list of potential sources as W
                        
                           im
                        
                        ={r
                        ∈ 
                        W
                        
                           m
                        ∣r
                        =
                        w(m)∨
                        i
                        
                           r
                        
                        >0}, i
                        ∈
                        I, m
                        ∈
                        M. We note that the proactive decision problem could alternatively (at the cost of a more complex exposition) be modeled by an after demand arrival state representation where we do not have to make a potential sourcing decision in advance of a demand arrival but can include the market of the next demand into another state variable.

For ProTS, all markets in every state can be served by every warehouse among the possible sources which have stock on hand or the base warehouse.
                              
                                 (1)
                                 
                                    
                                       
                                          q
                                       
                                       
                                          im
                                       
                                    
                                    ∈
                                    
                                       
                                          W
                                       
                                       
                                          im
                                       
                                    
                                    ,
                                    
                                    ∀
                                    m
                                    ∈
                                    M
                                    ,
                                    
                                    ∀
                                    i
                                    ∈
                                    I
                                 
                              
                           The definition in (1) includes decisions q
                           
                              im
                            which direct demand to a base warehouse with zero inventory even though other potential sources still have stock on hand if this is not economically beneficial, i.e., when the penalty cost is relatively low compared to the transshipment and replenishment cost.

ReTS initiates transshipments only if the base warehouse is out of stock. If the base warehouse has stock on hand, the decision is q
                           
                              im
                           
                           =
                           w(m), ∀i
                           ∈
                           I, m
                           ∈
                           M. If the base warehouse is out of stock, either a transshipment is triggered or the demand is lost. The source for the transshipment, q
                           
                              im
                           , is determined by one of the following rules.
                              
                                 1.
                                 
                                    Random rule: If the base warehouse is out of stock, the source is randomly chosen from all feasible supply sources with positive stock. Market m in state i has an opportunity for a transshipment only if the list of potential sources contains more than one element, ∣W
                                    
                                       im
                                    ∣>1.


                                    Highest inventory rule: If the base warehouse is out of stock, the warehouse with the highest inventory among the potential sources W
                                    
                                       im
                                     is chosen as source for market m in state i.
                                       
                                          (2)
                                          
                                             
                                                
                                                   q
                                                
                                                
                                                   im
                                                
                                             
                                             =
                                             
                                                
                                                   argmax
                                                   {
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         r
                                                      
                                                   
                                                   }
                                                
                                                
                                                   r
                                                   ∈
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         im
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 


                                    Minimal transshipment cost rule: The warehouse with minimum transshipment cost is chosen as sending location for lateral transshipment for market m in state i among the potential sources W
                                    
                                       im
                                    .
                                       
                                          (3)
                                          
                                             
                                                
                                                   q
                                                
                                                
                                                   im
                                                
                                             
                                             =
                                             
                                                
                                                   argmin
                                                   {
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         mr
                                                      
                                                   
                                                   }
                                                
                                                
                                                   r
                                                   ∈
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         im
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 


                                    Highest run-out-time rule: The run-out-time ρ
                                    
                                       ir
                                     of warehouse r in state i is defined as current inventory level divided by the sum of the demand rates of all markets being primarily assigned to warehouse r, 
                                       
                                          
                                             
                                                ρ
                                             
                                             
                                                ir
                                             
                                          
                                          =
                                          
                                             
                                                i
                                             
                                             
                                                r
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         m
                                                         ∈
                                                         M
                                                         |
                                                         r
                                                         =
                                                         w
                                                         (
                                                         m
                                                         )
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         m
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    .
                                       
                                          (4)
                                          
                                             
                                                
                                                   q
                                                
                                                
                                                   im
                                                
                                             
                                             =
                                             
                                                
                                                   argmax
                                                   {
                                                   
                                                      
                                                         ρ
                                                      
                                                      
                                                         ir
                                                      
                                                   
                                                   }
                                                
                                                
                                                   r
                                                   ∈
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         im
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 


                                    Optimal decision rule: This rule chooses the source so as to minimize expected cost. Therefore, the decision space comprises all possible warehouses W
                                    
                                       m
                                     with stock on hand in state i and the base warehouse if the demand should not be satisfied.
                                       
                                          (5)
                                          
                                             
                                                
                                                   q
                                                
                                                
                                                   im
                                                
                                             
                                             ∈
                                             
                                                
                                                   W
                                                
                                                
                                                   im
                                                
                                             
                                          
                                       
                                    
                                 

The transshipment rules 2, 3, 4, and 5 can have ties between the warehouses. In that case the first warehouse in the list of potential sources W
                           
                              im
                            is chosen (which, by assumption of ordering, has the lowest transshipment cost) but, of course, this can also be assumed differently.

A state transition from state i to state j is either triggered by a demand or the arrival of an outstanding order. Let 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    A
                                 
                              
                           
                         denote the average time of being in state i. As the stochastic process of the time until the next event is again a Poisson process with a rate equal to the sum of the individual demand rates and the arrival rates of all outstanding orders, 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    A
                                 
                              
                              =
                              1
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      m
                                                      ∈
                                                      M
                                                   
                                                
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      m
                                                   
                                                
                                                +
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      r
                                                      ∈
                                                      R
                                                   
                                                
                                                (
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      r
                                                   
                                                
                                                -
                                                
                                                   
                                                      i
                                                   
                                                   
                                                      r
                                                   
                                                
                                                )
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      r
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        . 
                           
                              
                                 
                                    λ
                                 
                                 
                                    m
                                 
                              
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    A
                                 
                              
                           
                         is the probability that the next event is a demand at market m. Each event leads either to an increase, decrease, or no inventory change (in case of a lost sale) at one warehouse. The set of feasible transition states from state i, T
                        
                           i
                         is therefore grouped into three subsets 
                           
                              
                                 
                                    
                                       
                                          
                                             T
                                          
                                          
                                             i
                                          
                                          
                                             +
                                          
                                       
                                       ,
                                       
                                          
                                             T
                                          
                                          
                                             i
                                          
                                          
                                             0
                                          
                                       
                                       ,
                                       
                                          
                                             T
                                          
                                          
                                             i
                                          
                                          
                                             -
                                          
                                       
                                    
                                 
                              
                           
                        . The subset 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    +
                                 
                              
                           
                         comprises all states triggered by the arrival of an order. The inventory at a single warehouse increases by one unit while the other warehouses remain at the same inventory level. The subsets 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    0
                                 
                              
                           
                         and 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    -
                                 
                              
                           
                         are triggered by demand arrival. 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    0
                                 
                              
                           
                         represents the set where a demand is not satisfied and the system remains in the same state. 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    -
                                 
                              
                           
                         is a set of states where the inventory at a single warehouse decreases by one unit and all other warehouses retain their inventory levels. Next we define those states j
                        ∈
                        I which result from a transition that is triggered by an event (demand or arrival) at warehouse r
                        ∗.
                           
                              (6)
                              
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       +
                                    
                                 
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 =
                                 {
                                 
                                 j
                                 ∈
                                 I
                                 |
                                 
                                 
                                    
                                       j
                                    
                                    
                                       
                                          
                                             r
                                          
                                          
                                             ∗
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       i
                                    
                                    
                                       
                                          
                                             r
                                          
                                          
                                             ∗
                                          
                                       
                                    
                                 
                                 +
                                 1
                                 ;
                                 
                                    
                                       j
                                    
                                    
                                       r
                                    
                                 
                                 =
                                 
                                    
                                       i
                                    
                                    
                                       r
                                    
                                 
                                 
                                 ∀
                                 r
                                 
                                 ≠
                                 
                                 
                                    
                                       r
                                    
                                    
                                       ∗
                                    
                                 
                                 }
                              
                           
                        
                        
                           
                              (7)
                              
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       0
                                    
                                 
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 =
                                 {
                                 
                                 j
                                 ∈
                                 I
                                 |
                                 
                                 
                                    
                                       i
                                    
                                    
                                       
                                          
                                             r
                                          
                                          
                                             ∗
                                          
                                       
                                    
                                 
                                 =
                                 0
                                 ;
                                 
                                    
                                       j
                                    
                                    
                                       r
                                    
                                 
                                 =
                                 
                                    
                                       i
                                    
                                    
                                       r
                                    
                                 
                                 
                                 ∀
                                 r
                                 
                                 ≠
                                 
                                 
                                    
                                       r
                                    
                                    
                                       ∗
                                    
                                 
                                 }
                              
                           
                        
                        
                           
                              (8)
                              
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       -
                                    
                                 
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 =
                                 {
                                 
                                 j
                                 ∈
                                 I
                                 |
                                 
                                 
                                    
                                       j
                                    
                                    
                                       
                                          
                                             r
                                          
                                          
                                             ∗
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       i
                                    
                                    
                                       
                                          
                                             r
                                          
                                          
                                             ∗
                                          
                                       
                                    
                                 
                                 -
                                 1
                                 ;
                                 
                                    
                                       j
                                    
                                    
                                       r
                                    
                                 
                                 =
                                 
                                    
                                       i
                                    
                                    
                                       r
                                    
                                 
                                 
                                 ∀
                                 r
                                 
                                 ≠
                                 
                                 
                                    
                                       r
                                    
                                    
                                       ∗
                                    
                                 
                                 }
                              
                           
                        Then, 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    +
                                 
                              
                              =
                              
                                 
                                    ∪
                                 
                                 
                                    
                                       
                                          r
                                       
                                       
                                          ∗
                                       
                                    
                                    ∈
                                    R
                                 
                              
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    +
                                 
                              
                              (
                              
                                 
                                    r
                                 
                                 
                                    ∗
                                 
                              
                              )
                           
                        , 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    0
                                 
                              
                              =
                              
                                 
                                    ∪
                                 
                                 
                                    
                                       
                                          r
                                       
                                       
                                          ∗
                                       
                                    
                                    ∈
                                    R
                                 
                              
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    0
                                 
                              
                              (
                              
                                 
                                    r
                                 
                                 
                                    ∗
                                 
                              
                              )
                           
                        , and 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    -
                                 
                              
                              =
                              
                                 
                                    ∪
                                 
                                 
                                    
                                       
                                          r
                                       
                                       
                                          ∗
                                       
                                    
                                    ∈
                                    R
                                 
                              
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                                 
                                    -
                                 
                              
                              (
                              
                                 
                                    r
                                 
                                 
                                    ∗
                                 
                              
                              )
                           
                        .

By considering all events for each state under decision set Q
                        
                           i
                        , we identify the transition probabilities p
                        
                           ij
                        (Q
                        
                           i
                        ) that the system will be in state j under decision set Q
                        
                           i
                         leaving state i.
                           
                              (9)
                              
                                 
                                    
                                       p
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       A
                                    
                                 
                                 ·
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         
                                                            
                                                               r
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ∈
                                                         R
                                                      
                                                   
                                                   
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         m
                                                         ∈
                                                         M
                                                         |
                                                         
                                                            
                                                               q
                                                            
                                                            
                                                               im
                                                            
                                                         
                                                         =
                                                         
                                                            
                                                               r
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ∨
                                                         
                                                            
                                                               i
                                                            
                                                            
                                                               
                                                                  
                                                                     r
                                                                  
                                                                  
                                                                     ∗
                                                                  
                                                               
                                                            
                                                         
                                                         >
                                                         0
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         m
                                                      
                                                   
                                                
                                                
                                                   if
                                                   
                                                   j
                                                   ∈
                                                   
                                                      
                                                         T
                                                      
                                                      
                                                         i
                                                      
                                                      
                                                         -
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         
                                                            
                                                               r
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ∈
                                                         R
                                                      
                                                   
                                                   
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         m
                                                         ∈
                                                         M
                                                         |
                                                         
                                                            
                                                               q
                                                            
                                                            
                                                               im
                                                            
                                                         
                                                         =
                                                         
                                                            
                                                               r
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ∨
                                                         
                                                            
                                                               i
                                                            
                                                            
                                                               
                                                                  
                                                                     r
                                                                  
                                                                  
                                                                     ∗
                                                                  
                                                               
                                                            
                                                         
                                                         =
                                                         0
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         m
                                                      
                                                   
                                                
                                                
                                                   if
                                                   
                                                   j
                                                   ∈
                                                   
                                                      
                                                         T
                                                      
                                                      
                                                         i
                                                      
                                                      
                                                         -
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         
                                                            
                                                               r
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ∈
                                                         R
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  S
                                                               
                                                               
                                                                  
                                                                     
                                                                        r
                                                                     
                                                                     
                                                                        ∗
                                                                     
                                                                  
                                                               
                                                            
                                                            -
                                                            
                                                               
                                                                  i
                                                               
                                                               
                                                                  
                                                                     
                                                                        r
                                                                     
                                                                     
                                                                        ∗
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         μ
                                                      
                                                      
                                                         
                                                            
                                                               r
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   if
                                                   
                                                   j
                                                   ∈
                                                   
                                                      
                                                         T
                                                      
                                                      
                                                         i
                                                      
                                                      
                                                         +
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   0
                                                
                                                
                                                   otherwise
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        The first case covers all transitions with a demand that depletes inventory, the second case covers all demands resulting in a lost sale, and the last case the arrival of an outstanding order.

ReTS with random transshipment source requires a modification of the first case of above transition probabilities. Let p
                        
                           i
                        (m)=1/(∣W
                        
                           im
                        ∣−1), where ∣W
                        
                           im
                        ∣−1 is the number of possible sources for market m which have stock on hand in state i. A market m will be served by an arbitrary non-base warehouse with probability p
                        
                           i
                        (m).
                           
                              (10)
                              
                                 
                                    
                                       p
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   m
                                                   ∈
                                                   M
                                                   |
                                                   w
                                                   (
                                                   m
                                                   )
                                                   =
                                                   
                                                      
                                                         r
                                                      
                                                      
                                                         ∗
                                                      
                                                   
                                                   ∨
                                                   |
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         im
                                                      
                                                   
                                                   |
                                                   =
                                                   1
                                                
                                             
                                          
                                          
                                             
                                                λ
                                             
                                             
                                                m
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   m
                                                   ∈
                                                   M
                                                   |
                                                   |
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         im
                                                      
                                                   
                                                   |
                                                   >
                                                   1
                                                
                                             
                                          
                                          
                                             
                                                λ
                                             
                                             
                                                m
                                             
                                          
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                          (
                                          m
                                          )
                                       
                                    
                                 
                                 ·
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       A
                                    
                                 
                                 
                                 if
                                 
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       -
                                    
                                 
                                 (
                                 
                                    
                                       r
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 =
                                 j
                              
                           
                        
                     

The holding cost in state i is determined by the current inventory levels i
                        
                           r
                         for each warehouse and the time the system resides in state i which is independent of Q
                        
                           i
                        .
                           
                              (11)
                              
                                 
                                    
                                       y
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          r
                                          ∈
                                          R
                                       
                                    
                                 
                                 
                                    
                                       h
                                    
                                    
                                       r
                                    
                                 
                                 ·
                                 
                                    
                                       i
                                    
                                    
                                       r
                                    
                                 
                                 ·
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       A
                                    
                                 
                              
                           
                        A penalty cost l
                        
                           m
                         occurs when the decision Q
                        
                           i
                         assigns the demand of market m to the base warehouse r
                        =
                        w(m) which is out of stock (i
                        
                           r
                        
                        =0) weighted with the probability that the demand is for market m.
                           
                              (12)
                              
                                 
                                    
                                       l
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          ∈
                                          M
                                          |
                                          
                                             
                                                q
                                             
                                             
                                                im
                                             
                                          
                                          =
                                          w
                                          (
                                          m
                                          )
                                          ∧
                                          
                                             
                                                i
                                             
                                             
                                                w
                                                (
                                                m
                                                )
                                             
                                          
                                          =
                                          0
                                       
                                    
                                 
                                 
                                    
                                       l
                                    
                                    
                                       m
                                    
                                 
                                 ·
                                 
                                    
                                       λ
                                    
                                    
                                       m
                                    
                                 
                                 ·
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       A
                                    
                                 
                              
                           
                        The cost of placing a replenishment order is associated with satisfying a demand by a warehouse. Therefore, we consider those state transitions where the inventory level reduces.
                           
                              (13)
                              
                                 
                                    
                                       z
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          r
                                          ∈
                                          R
                                       
                                    
                                 
                                 
                                    
                                       z
                                    
                                    
                                       r
                                    
                                 
                                 ·
                                 
                                    
                                       p
                                    
                                    
                                       i
                                       ,
                                       
                                          
                                             T
                                          
                                          
                                             i
                                          
                                          
                                             -
                                          
                                       
                                       (
                                       r
                                       )
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                           
                        The transshipment cost occurs only if market m is served by a source other than the base warehouse w(m).
                           
                              (14)
                              
                                 
                                    
                                       t
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          r
                                          ∈
                                          R
                                          ⧹
                                          w
                                          (
                                          m
                                          )
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          ∈
                                          M
                                          |
                                          
                                             
                                                q
                                             
                                             
                                                im
                                             
                                          
                                          =
                                          r
                                       
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       mr
                                    
                                 
                                 ·
                                 
                                    
                                       λ
                                    
                                    
                                       m
                                    
                                 
                                 ·
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       A
                                    
                                 
                              
                           
                        For ReTS with random rule this again requires a modification.
                           
                              (15)
                              
                                 
                                    
                                       t
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          ∈
                                          M
                                          |
                                          |
                                          
                                             
                                                W
                                             
                                             
                                                im
                                             
                                          
                                          |
                                          >
                                          1
                                       
                                    
                                 
                                 
                                    
                                       λ
                                    
                                    
                                       m
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          r
                                          ∈
                                          
                                             
                                                W
                                             
                                             
                                                im
                                             
                                          
                                          ⧹
                                          w
                                          (
                                          m
                                          )
                                       
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       mr
                                    
                                 
                                 ·
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 m
                                 )
                                 ·
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       A
                                    
                                 
                              
                           
                        The expected cost for being in state i under decision Q
                        
                           i
                         is
                           
                              (16)
                              
                                 
                                    
                                       e
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       i
                                    
                                 
                                 +
                                 
                                    
                                       l
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 +
                                 
                                    
                                       z
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 +
                                 
                                    
                                       t
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 ,
                                 
                                 ∀
                                 i
                                 ∈
                                 I
                                 .
                              
                           
                        
                     

To solve an infinite horizon SMDP we must find decisions Q
                        
                           i
                         for every state i
                        ∈
                        I such that the average cost per unit of time C for given base stock levels S
                        
                           r
                         is minimized. This problem can be solved by linear programming, policy iteration or value iteration, see Tijms (2003). We use linear programming to find the minimal expected average cost per unit of time C
                        ∗. To find the optimal base stock levels S
                        
                           r
                         for each warehouse, we use a heuristic algorithm based on a greedy approach as suggested in Kranenburg and van Houtum (2009). This method proceeds iteratively and in each iteration places or displaces a unit of stock at the warehouse that provides the biggest improvement on total expected cost. This iterative procedure requires the solution of the Linear Program in each iteration step.

The number of iterations required for finding the minimal cost is already high for relatively small networks and the computation time increases rapidly for each iteration with the level of base stocks. Thus, in order to limit the required computation time it is crucial to find a good starting solution. Therefore, we separately optimize base stock levels for each warehouse as an initial solution for the greedy algorithm. Finding cost minimizing base stock levels for each warehouse can be considered as optimizing an M∣M∣S∣S queue where the steady-state probabilities can be obtained analytically. Let j be a number of units, 0⩽
                        j
                        ⩽
                        S and p
                        
                           j
                         the steady-state probability that the warehouse has j units on hand (for brevity, we omit that all probabilities p
                        
                           j
                         are functions of S). Then,
                           
                              (17)
                              
                                 
                                    
                                       1
                                    
                                    
                                       
                                          
                                             p
                                          
                                          
                                             S
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          =
                                          0
                                       
                                       
                                          S
                                       
                                    
                                 
                                 
                                    
                                       (
                                       λ
                                       /
                                       μ
                                       
                                          
                                             )
                                          
                                          
                                             j
                                          
                                       
                                    
                                    
                                       j
                                       !
                                    
                                 
                                 
                                 and
                                 
                                 
                                    
                                       p
                                    
                                    
                                       j
                                    
                                 
                                 =
                                 
                                    
                                       (
                                       λ
                                       /
                                       μ
                                       
                                          
                                             )
                                          
                                          
                                             S
                                             -
                                             j
                                          
                                       
                                    
                                    
                                       (
                                       S
                                       -
                                       j
                                       )
                                       !
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       S
                                    
                                 
                                 ,
                                 
                                 j
                                 =
                                 0
                                 ,
                                 …
                                 ,
                                 S
                                 -
                                 1
                                 .
                              
                           
                        The total cost for a given base stock level includes all relevant costs from above except the transshipment cost. Let 
                           
                              
                                 
                                    λ
                                 
                                 
                                    r
                                 
                              
                              =
                              
                                 
                                    ∑
                                 
                                 
                                    m
                                    ∈
                                    M
                                    |
                                    r
                                    =
                                    w
                                    (
                                    m
                                    )
                                 
                              
                              
                                 
                                    λ
                                 
                                 
                                    m
                                 
                              
                           
                         denote the total demand rate of all markets with r as the base warehouse.
                           
                              (18)
                              
                                 
                                    
                                       C
                                    
                                    
                                       r
                                    
                                 
                                 (
                                 S
                                 )
                                 =
                                 
                                    
                                       h
                                    
                                    
                                       r
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          =
                                          0
                                       
                                       
                                          S
                                       
                                    
                                 
                                 
                                    
                                       jp
                                    
                                    
                                       j
                                    
                                 
                                 +
                                 
                                    
                                       p
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          ∈
                                          M
                                          |
                                          r
                                          =
                                          w
                                          (
                                          m
                                          )
                                       
                                    
                                 
                                 
                                    
                                       l
                                    
                                    
                                       m
                                    
                                 
                                 
                                    
                                       λ
                                    
                                    
                                       m
                                    
                                 
                                 +
                                 
                                    
                                       z
                                    
                                    
                                       r
                                    
                                 
                                 
                                    
                                       λ
                                    
                                    
                                       r
                                    
                                 
                                 (
                                 1
                                 -
                                 
                                    
                                       p
                                    
                                    
                                       0
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       h
                                    
                                    
                                       r
                                    
                                 
                                 S
                                 +
                                 
                                    
                                       λ
                                    
                                    
                                       r
                                    
                                 
                                 (
                                 
                                    
                                       h
                                    
                                    
                                       r
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       r
                                    
                                 
                                 -
                                 
                                    
                                       z
                                    
                                    
                                       r
                                    
                                 
                                 )
                                 
                                    
                                       p
                                    
                                    
                                       0
                                    
                                 
                                 +
                                 
                                    
                                       p
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          ∈
                                          M
                                          |
                                          r
                                          =
                                          w
                                          (
                                          m
                                          )
                                       
                                    
                                 
                                 
                                    
                                       l
                                    
                                    
                                       m
                                    
                                 
                                 
                                    
                                       λ
                                    
                                    
                                       m
                                    
                                 
                                 +
                                 
                                    
                                       λ
                                    
                                    
                                       r
                                    
                                 
                                 (
                                 
                                    
                                       z
                                    
                                    
                                       r
                                    
                                 
                                 -
                                 
                                    
                                       h
                                    
                                    
                                       r
                                    
                                 
                                 )
                              
                           
                        We iteratively place an extra unit of inventory at the warehouse until no further cost reduction can be achieved. This procedure is exact as C
                        
                           r
                        (S) is convex in S as h
                        
                           r
                        
                        S is linear in S and p
                        0 is the well known Erlang loss function being a convex function of S (see Messerli, 1972).

We illustrate the optimal sourcing decisions for given base stock levels in a network with two warehouses and three markets as depicted in Fig. 1
                        . The market to warehouse assignment is W
                        1
                        ={1}, W
                        2
                        ={1,2} and W
                        3
                        ={2}. The connections to the base warehouse are illustrated with a solid line and the other opportunities with a dashed line.

For a base case with identical warehouses and parameter values λ
                        =0.3, μ
                        =0.2, h
                        =0.2, l
                        =20, z
                        =1, t
                        22
                        =0.5 and S
                        1
                        =
                        S
                        2
                        =5 (although these are not cost optimal levels), we compute the optimal sourcing policy for market 2 which is a function of the inventory levels of both retailers, as illustrated in Fig. 2
                        . “No transshipment” indicates that market 2 is served by the base warehouse and “Transshipment” corresponds to a shipment from warehouse 2.

The optimal policy for the considered base case is to use transshipments already when there are small differences in inventory levels in order to avoid future stockouts with additional penalty cost when demands for single-sourced markets 1 or 3 will occur. Note that a reactive policy has transshipments only if the base warehouse 1 is out of stock.

An increase of the base stock level at the base warehouse 1 for market 2 increases the separation line between the two decision regions (see Fig. 3
                        a). Decreasing the penalty cost, we observe that transshipments are preferably used when inventory differences are large (see Fig. 3b). Different arrival rates λ
                        1
                        =
                        λ
                        3
                        =0.7, λ
                        2
                        =0.1, i.e., higher stockout probability at the base warehouse (see Fig. 3c), show that transshipments are used more often. A higher transshipment cost (see Fig. 3d) increases the separating line between the two decisions, i.e. reduces the attractiveness of transshipments.

For this particular network, we analyze properties of an optimal policy. The data for the decision process simplifies to the following. Let (i
                        1,
                        i
                        2) denote the inventory state and q
                        2 the only decision required. Applying uniformization using the average time in state i,
                           
                              (19)
                              
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                    
                                       A
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       (
                                       
                                          
                                             S
                                          
                                          
                                             1
                                          
                                       
                                       -
                                       
                                          
                                             i
                                          
                                          
                                             1
                                          
                                       
                                       )
                                       
                                          
                                             μ
                                          
                                          
                                             1
                                          
                                       
                                       +
                                       (
                                       
                                          
                                             S
                                          
                                          
                                             2
                                          
                                       
                                       -
                                       
                                          
                                             i
                                          
                                          
                                             2
                                          
                                       
                                       )
                                       
                                          
                                             μ
                                          
                                          
                                             2
                                          
                                       
                                       +
                                       
                                          
                                             ∑
                                          
                                          
                                             i
                                             =
                                             1
                                          
                                          
                                             3
                                          
                                       
                                       
                                          
                                             λ
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                           
                        we find the direct cost in state i taking decision q
                        2, 
                           
                              
                                 
                                    
                                       
                                          e
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                              (
                              
                                 
                                    q
                                 
                                 
                                    2
                                 
                              
                              )
                           
                         to be
                           
                              (20)
                              
                                 
                                    
                                       
                                          
                                             e
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 1
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         h
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         h
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         z
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                   +
                                                   
                                                      
                                                         z
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   >
                                                   0
                                                   ,
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   >
                                                   0
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         h
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         z
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   >
                                                   0
                                                   ,
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   =
                                                   0
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         h
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         z
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   =
                                                   0
                                                   ,
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   >
                                                   0
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   =
                                                   0
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (21)
                              
                                 
                                    
                                       
                                          
                                             e
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 2
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         h
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         h
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         z
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         z
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                   )
                                                   +
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         22
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   >
                                                   0
                                                   ,
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   >
                                                   0
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         h
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         z
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   >
                                                   0
                                                   ,
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   =
                                                   0
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         h
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         z
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                   )
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         22
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   =
                                                   0
                                                   ,
                                                   
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   >
                                                   0
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         l
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   =
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   =
                                                   0
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        The transition parameters 
                           
                              
                                 
                                    
                                       
                                          p
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    ij
                                 
                              
                              (
                              
                                 
                                    q
                                 
                                 
                                    2
                                 
                              
                              )
                           
                         are
                           
                              (22)
                              
                                 
                                    
                                       
                                          
                                             p
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 1
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                                
                                                   j
                                                   =
                                                   (
                                                   (
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   -
                                                   1
                                                   
                                                      
                                                         )
                                                      
                                                      
                                                         +
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                                
                                                   j
                                                   =
                                                   (
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   ,
                                                   (
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   -
                                                   1
                                                   
                                                      
                                                         )
                                                      
                                                      
                                                         +
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         S
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   )
                                                   
                                                      
                                                         μ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                                
                                                   j
                                                   =
                                                   (
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   1
                                                   ,
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         S
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                   
                                                      
                                                         μ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                                
                                                   j
                                                   =
                                                   (
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   1
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (23)
                              
                                 
                                    
                                       
                                          
                                             p
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 2
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                                
                                                   j
                                                   =
                                                   (
                                                   (
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   -
                                                   1
                                                   
                                                      
                                                         )
                                                      
                                                      
                                                         +
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         3
                                                      
                                                   
                                                
                                                
                                                   j
                                                   =
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  i
                                                               
                                                               
                                                                  1
                                                               
                                                            
                                                            ,
                                                            (
                                                            
                                                               
                                                                  i
                                                               
                                                               
                                                                  2
                                                               
                                                            
                                                            -
                                                            1
                                                            
                                                               
                                                                  )
                                                               
                                                               
                                                                  +
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         S
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   )
                                                   
                                                      
                                                         μ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                                
                                                   j
                                                   =
                                                   (
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   +
                                                   1
                                                   ,
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         S
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                   
                                                      
                                                         μ
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                                
                                                   j
                                                   =
                                                   (
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   ,
                                                   
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   1
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        Let V(i) denote the per unit of time value of being in state i taking the optimal decision. Then,
                           
                              (24)
                              
                                 V
                                 (
                                 i
                                 )
                                 =
                                 
                                    
                                       
                                          min
                                       
                                       
                                          
                                             
                                                q
                                             
                                             
                                                2
                                             
                                          
                                          ∈
                                          {
                                          1
                                          ,
                                          2
                                          }
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      e
                                                   
                                                   
                                                      ̃
                                                   
                                                
                                             
                                             
                                                i
                                             
                                          
                                          (
                                          
                                             
                                                q
                                             
                                             
                                                2
                                             
                                          
                                          )
                                          +
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   j
                                                   ∈
                                                   
                                                      
                                                         T
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      p
                                                   
                                                   
                                                      ̃
                                                   
                                                
                                             
                                             
                                                ij
                                             
                                          
                                          (
                                          
                                             
                                                q
                                             
                                             
                                                2
                                             
                                          
                                          )
                                          V
                                          (
                                          j
                                          )
                                       
                                    
                                 
                              
                           
                        Let a threshold function 
                           
                              
                                 
                                    
                                       
                                          i
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                              (
                              
                                 
                                    i
                                 
                                 
                                    1
                                 
                              
                              )
                           
                         define the minimum inventory level of warehouse 2 given the inventory level of warehouse 1 where it is optimal to source a market 2 demand from warehouse 2 (transshipment). The threshold function is characterized by
                           
                              (25)
                              
                                 
                                    
                                       
                                          
                                             i
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       2
                                    
                                 
                                 (
                                 
                                    
                                       i
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 =
                                 arg
                                 
                                 
                                    
                                       
                                          min
                                       
                                       
                                          
                                             
                                                i
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                z
                                             
                                             
                                                2
                                             
                                          
                                          +
                                          
                                             
                                                t
                                             
                                             
                                                22
                                             
                                          
                                          +
                                          V
                                          (
                                          
                                             
                                                i
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          
                                             
                                                i
                                             
                                             
                                                2
                                             
                                          
                                          -
                                          1
                                          )
                                          ⩽
                                          
                                             
                                                z
                                             
                                             
                                                1
                                             
                                          
                                          +
                                          V
                                          (
                                          
                                             
                                                i
                                             
                                             
                                                1
                                             
                                          
                                          -
                                          1
                                          ,
                                          
                                             
                                                i
                                             
                                             
                                                2
                                             
                                          
                                          )
                                       
                                    
                                 
                              
                           
                        
                        
                           Proposition 1
                           
                              The optimal policy is monotone in the value of the state variables.
                           

Monotonicity of the optimal decision (see Puterman (1994), Koole (2006)) of the policy in all the states is assured if the following conditions are satisfied:
                                 
                                    (i)
                                    the direct cost is an increasing, superadditive function in the state, which can be observed from (20) and (21) and

the probability to leave a state to a state with more inventory (i.e. arrival of an outstanding order) is an increasing, superadditive function of the state variables. This holds because
                                          
                                             
                                                
                                                   
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      +
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      +
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            k
                                                            =
                                                            1
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                                +
                                                
                                                   
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      1
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      +
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      1
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      1
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      +
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      1
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            k
                                                            =
                                                            1
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                                ⩽
                                                
                                                   
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      1
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      +
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      1
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      +
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            k
                                                            =
                                                            1
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                                +
                                                
                                                   
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      +
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      1
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      +
                                                      (
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      -
                                                      1
                                                      )
                                                      
                                                         
                                                            μ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            k
                                                            =
                                                            1
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                                
                                                □
                                             
                                          
                                       
                                    

As a consequence, the threshold function 
                           
                              
                                 
                                    
                                       
                                          i
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                              (
                              
                                 
                                    i
                                 
                                 
                                    1
                                 
                              
                              )
                           
                         indicating the region without transshipments from warehouse 2, leaving all other parameters and decisions unchanged, is increasing in the inventory level i
                        1. Further, from our numerical investigation, we find that the threshold function
                           
                              •
                              increases with the base-stock level of the base warehouse 1, and decreases with the base-stock level of warehouse 2,

increases with the base warehouse replenishment rate μ
                                 1 and decreases with the replenishment rate μ
                                 2 of warehouse 2,

decreases with the base warehouse replenishment cost z
                                 1 and increases with the backup warehouse replenishment cost z
                                 2,

decreases with the base warehouse holding cost h
                                 1 and increases with the backup warehouse holding cost h
                                 2,

decreases with the lost sales penalties of markets 1 and 2 and increases with market 3’s penalty l
                                 3,

decreases with the demand rates of markets 1 and 3 and increases with the demand rate λ
                                 2 of market 2,

increases with the transshipment cost t
                                 22.

We compare proactive and reactive transshipments and investigate the performance of different transshipment rules. To evaluate the different transshipment strategies and source selection rules, we consider several different networks with complete and partial pooling. In order to quantify the cost differences, we define
                        
                           (26)
                           
                              
                                 
                                    Δ
                                 
                                 
                                    x
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          C
                                       
                                       
                                          ReTS
                                       
                                       
                                          x
                                       
                                    
                                    -
                                    
                                       
                                          C
                                       
                                       
                                          ProTS
                                       
                                    
                                 
                                 
                                    
                                       
                                          C
                                       
                                       
                                          ProTS
                                       
                                    
                                 
                              
                              ·
                              100
                              ,
                           
                        
                     which states the percentage of total cost savings of ProTS compared to ReTS under transshipment rule x. Furthermore, we define Δ
                     
                        No
                      as the improvement of ProTS compared to a system with no transshipments when all markets are assigned to their base warehouse. In order to quantify the pooling level of a network, we define an inventory pooling factor ϑ as
                        
                           (27)
                           
                              ϑ
                              =
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          =
                                          1
                                       
                                       
                                          |
                                          M
                                          |
                                       
                                    
                                    (
                                    |
                                    
                                       
                                          W
                                       
                                       
                                          m
                                       
                                    
                                    |
                                    -
                                    1
                                    )
                                    
                                       
                                          λ
                                       
                                       
                                          m
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          =
                                          1
                                       
                                       
                                          |
                                          M
                                          |
                                       
                                    
                                    (
                                    |
                                    R
                                    |
                                    -
                                    1
                                    )
                                    
                                       
                                          λ
                                       
                                       
                                          m
                                       
                                    
                                 
                              
                              .
                           
                        
                     The numerator is the sum of pooled arrival rates (weighted by the number of possible sources except the base warehouse) and the denominator is the maximum pooling opportunity (sum of arrival rates multiplied by the number of all warehouses except the base warehouse).

@&#EXPERIMENTAL DESIGN@&#

Due to the computational burden of an exact analysis of transshipment policies and because we are mainly interested in the general benefits of proactive over reactive transshipments, we investigate rather small networks with three warehouses and three or six markets, respectively. Markets can be differently assigned to one or multiple warehouses. For each network type, we generate five different instances by randomly (uniformly) assigning markets to warehouses using a given number of links. Besides the randomly generated networks, we considered pre-specified networks with complete pooling, networks exhibiting a chaining structure, and a particular partial pooling network. The latter structure was used to analyze the improvements between proactive and reactive transshipments for different pooling factors. By varying the arrival rates for markets assigned to warehouses that exhibit complete pooling or no pooling, we generate a set of parameter values ϑ. Three warehouses and six markets were investigated for 9, 12, 15 and 18 links (complete pooling). Fig. 4
                         shows the investigated networks with pre-specified structure.

We assume that all warehouses have identical cost parameters and expected replenishment times. The unit replenishment cost is fixed to one (z
                        =1). All other parameters are varied. Defining the transshipment cost t
                        
                           mr
                        , we follow the idea that higher geographical distance corresponds to higher transshipment cost. Specifically, we assume that transshipment cost doubles with each additional warehouse in the set of possible sources of a market.
                           
                              (28)
                              
                                 
                                    
                                       t
                                    
                                    
                                       mr
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         f
                                                      
                                                   
                                                   ·
                                                   
                                                      
                                                         2
                                                      
                                                      
                                                         (
                                                         y
                                                         -
                                                         1
                                                         )
                                                      
                                                   
                                                   |
                                                   r
                                                   =
                                                   
                                                      
                                                         r
                                                      
                                                      
                                                         y
                                                      
                                                   
                                                   ,
                                                   
                                                   ∀
                                                   y
                                                   ∈
                                                   |
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         m
                                                      
                                                   
                                                   |
                                                
                                                
                                                   if
                                                   
                                                   y
                                                   ⩾
                                                   1
                                                
                                             
                                             
                                                
                                                   0
                                                
                                                
                                                   if
                                                   
                                                   y
                                                   =
                                                   0
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where y is the position index of warehouse r in the list W
                        
                           m
                         and y
                        =0 denotes the base warehouse with position index zero. To avoid a bias in the definition of transshipment cost, the index positions are assigned in such a way that every warehouse appears at each position equally often. This definition limits the number of transshipment cost parameters to t
                        
                           f
                         only. Demand rates are specified by choosing an average demand rate λ and a range parameter σ such that λσ is the largest difference between arrival rates. The ∣M∣ arrival rate values for the markets are equidistantly spaced over the interval [λ(1−0.5σ),
                        λ(1+0.5σ)] and randomly (uniform) assigned to the markets.

Our numerical study used a full factorial design of the parameters shown in Table 2
                        . For chain networks, we limited the number of instances by assuming identical arrival rates (σ
                        =0) and we only considered λ
                        ∈{0.1,0.3,0.5}. Networks with three warehouses and six markets were only considered for λ
                        ∈{0.1,0.3,0.5}.

The linear programs were solved using the solver XPRESS-MP version 7.2 on a PC with Intel (R) Core (TM) i7-2600 3.40gigahertz and 16gigabyte RAM.

@&#RESULTS@&#

For the three warehouses and three markets (see Tables 3 and 4
                        
                        ), we observe an average saving of ProTS compared to the situation without transshipments of 35.41% for the complete pooling network (1536 instances), 17.14 % for a network with 6 links (7680 instances) and 22.92% for the chaining network (288 instances). The average benefit only increases slightly to 23.94% for a larger chaining network with 5 rather than 3 locations and decreases slightly to 21.05% for the chaining network with six markets (Fig. 4c). Because of our identical cost assumption, proactive transshipments are not beneficial compared to optimal reactive transshipments in a complete pooling network. In the chaining network, Δ
                        5
                        =1.20% and in the network with 6 links, Δ
                        5
                        =0.77%. No benefit for a proactive approach in a complete pooling network is an intuitive result, since, in the setup with identical cost parameters and complete pooling, the decision about the optimal moment for transshipment is irrelevant because all warehouses can be considered as one source.


                        Table 3 shows the average cost savings of proactive transshipments over no transshipments and over optimally chosen reactive transshipments for chaining networks with 3, 5 warehouses and 6 markets for each parameter value. We observe that the overall benefits of transshipments (Δ
                        
                           No
                        ) decrease with the average demand rate λ. In this case, however, the relative benefit of a proactive over a reactive strategy (Δ
                        5) increases. For increasing average replenishment lead time, holding cost and penalty cost both the value of transshipments and the advantage of proactive transshipments increase, whereas for increasing transshipment costs, both values decrease.


                        Table 4 shows the average savings of ProTS over different reactive rules detailed by single parameter values for a network with six links and the complete pooling network with three warehouses and three markets. The results illustrate that in a complete pooling network, ReTS with minimal transshipment cost selection rule provides optimal decisions. This result is evident, since transshipment cost is the only cost factor which is subject to optimization choosing the sending location if the other cost parameters are identical between the warehouses. In networks with 6 links, rule 3 can on average be improved by 1.20% if we use proactive transshipments and is inferior to rules 2, 4 and 5. However, the general differences between the reactive transshipment rules are rather negligible.

The results for networks with three warehouses and six markets are summarized in Table 5
                         (5760 instances for the networks with 9, 12, and 15 links, 1152 instances for the complete pooling networks). We observe that, increasing the number of links in the network, the average savings compared to no transshipments increase, Δ
                        
                           No
                        
                        =12.21% for 9 links, Δ
                        
                           No
                        
                        =17.17% for 12 links, Δ
                        
                           No
                        
                        =22.96% for 15 links and Δ
                        
                           No
                        
                        =26.75% for complete pooling. Potential savings of ProTS relative to ReTS with rule 5 first increase from Δ
                        5
                        =1.17% for 9 links to Δ
                        5
                        =3.18% for 12 links and then decrease to Δ
                        5
                        =1.83% for 15 links and finally to Δ
                        5
                        =0.00% for complete pooling network. The value of proactive transshipments increases with faster replenishment lead times, lower transshipment costs, higher lost sales penalty and inventory holding costs, and similarity in demand rates.

We observe that improvements of proactive transshipments strongly depend on the number of links in a network. We use the partial pooling network (Fig. 4d) to determine several pooling parameter values ϑ. We generated in total 6144 instances using the parameters from Table 2, with the average demand rates combining 4 values for the group of pooled and 4 values for the unpooled warehouses. This results in 16 combination, 4 of them having a pooling factor of 0.5. The first line in Table 6
                         is trivial, the values of the last line are obtained from Table 4 for complete pooling. The results in Table 6 show that the savings of ProTS relative to ReTS increase until ϑ
                        =0.58 and then decrease. The second effect is that, up until ϑ
                        =0.70, transshipment rule 3 shows higher potential savings compared to transshipment rules 2 and 4, which corresponds to inferior rule. From ϑ
                        =0.75, rule 3 shows lower cost savings and is superior to transshipment rules 2 and 4.

Comparing the proposed transshipment rules, the random rule is significantly inferior to all other rules (two-tailed t-test, p
                        <0.001). Rule 2 performs slightly better than rule 4. This effect is caused by our definition of run-out-time which only considers the demand rates of primarily assigned markets to a warehouse and not of markets which trigger a transshipment from the respective warehouse. Rule 3 does not significantly differ from rule 4 for pooling factors ϑ
                        < 0.17 (p
                        =0.20) whereas for 0.17<
                        ϑ
                        <0.62 it is significantly inferior (p
                        <0.001) and it is superior for larger pooling factors ϑ
                        >0.75 (p
                        <0.001). This implies that for very low pooling opportunities the choice of a rule is irrelevant since the potential savings are in general very low. For low to intermediate pooling opportunities, a careful deployment of inventory is more important, whereas for high pooling, transportation choice becomes more important.


                        Fig. 5
                         visualizes the results from Table 6 gained from the partial pooling network and from the three warehouse and six markets (3×6) networks from Table 5 for 9, 12, 15 and 18 links which are shown by the crosses and triangles. The potential cost savings of proactive transshipments for different pooling values (compared to random or optimal choice) of the sending location first increase and then decrease. Networks with intermediate flexibility and pooling opportunities exhibit the largest savings for proactive over reactive transshipments.

The assumption of exponentially distributed lead times might appear to be rather limiting. In line with the literature, e.g., Alfredsson and Verrijdt (1999) for reactive transshipments and complete pooling and Reijnen et al. (2009) for partial pooling, we analyze the sensitivity of the results with respect to the lead time distribution assumption. We use the network depicted in Fig. 1 with all possible combinations of parameters shown in Table 2 (1536 instances). The base stock levels were optimized under the exponential lead time assumption. Using 4,000,000 arrivals, the system was simulated with deterministic (det) and gamma (gam
                        
                           c
                        ) distributed lead times with a coefficient of variation of c
                        =0.5 and c
                        =2 exhibiting the same mean as the exponential distribution. The average cost difference of lead time type x is defined by 
                           
                              
                                 
                                    δ
                                 
                                 
                                    x
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      C
                                                   
                                                   
                                                      ProTS
                                                   
                                                
                                                -
                                                
                                                   
                                                      C
                                                   
                                                   
                                                      x
                                                   
                                                   
                                                      sim
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    C
                                 
                                 
                                    ProTS
                                 
                              
                              ·
                              100
                           
                        , where 
                           
                              
                                 
                                    C
                                 
                                 
                                    x
                                 
                                 
                                    sim
                                 
                              
                           
                         are the costs obtained through simulation with x corresponding to deterministic or exponentially and gamma distributed lead times. The average difference over all instances is denoted by 
                           
                              
                                 
                                    
                                       
                                          δ
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    x
                                 
                              
                           
                        . The results show cost differences for exponential and for both tested gamma distributions of 
                           
                              
                                 
                                    
                                       
                                          δ
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    exp
                                 
                              
                              =
                              0.0467
                              %
                           
                        , 
                           
                              
                                 
                                    
                                       
                                          δ
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    
                                       
                                          gam
                                       
                                       
                                          0.5
                                       
                                    
                                 
                              
                              =
                              0.0418
                              %
                           
                        , 
                           
                              
                                 
                                    
                                       
                                          δ
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    
                                       
                                          gam
                                       
                                       
                                          2
                                       
                                    
                                 
                              
                              =
                              0.0536
                              %
                           
                        . For deterministic lead times, the average cost differences are 
                           
                              
                                 
                                    
                                       
                                          δ
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    det
                                 
                              
                              =
                              0.0631
                              %
                           
                        . These results support that the exponential lead time assumption is robust. Only for deterministic lead time, we observe slightly larger, but still negligible differences. This finding is supported by the fact that isolated warehouses can be considered as M/M/S/S queues which have the same resulting lead time characteristics as M/G/S/S systems.

@&#CONCLUSION@&#

We formulated an SMDP to optimize proactive transshipment decisions and evaluated different reactive transshipment rules. The contribution to the literature is an integrated continuous review approach that contains both, proactive and reactive transshipments and determines an optimal source for a transshipment in contrast to widely used predetermined assignments. While usually either a proactive or reactive approach is followed and the benefits compared to no transshipments or between different rules are reported, we present a comparison between proactive and reactive transshipments for several networks with different connectivity. Our results indicate that proactive transshipments can lead to significant cost reductions in comparison to using only reactive transshipments, especially in systems that exhibit only intermediate opportunities of inventory pooling. This result has an implication on the design of inventory pooling networks. Besides the well known fact that a clever linking of markets to warehouses might achieve benefits close to complete pooling, the full benefits can only be achieved if transshipments are optimized proactively. If reactive transshipments are used, our results confirm earlier findings that the differences between different transshipment rules are negligible.

Further research is required to overcome the curse of dimensionality when providing results for large networks as our exact analysis is limited to small problems. Here, Approximate Dynamic Programming (see Powell, 2011) and tailored proactive transshipment rules with optimized parameters are promising venues for extension.

@&#ACKNOWLEDGEMENTS@&#

The authors gratefully acknowledge the helpful comments of two anonymous reviewers that helped to improve the content and exposition of the paper.

@&#REFERENCES@&#

