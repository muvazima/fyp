@&#MAIN-TITLE@&#Driving modes for designing the cornering response of fully electric vehicles with multiple motors

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Driving modes for designing the cornering response of fully electric vehicles.


                        
                        
                           
                           Off-line optimization for designing the non-linear feedforward yaw moment contribution.


                        
                        
                           
                           Automated tuning procedure of the feedback controller.


                        
                        
                           
                           Experimental assessment of vehicle performance in different driving modes.


                        
                        
                           
                           Experimental assessment of the effect of the understeer gradient on power consumption.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Torque-vectoring control

Fully electric vehicle

Yaw rate

Driving modes

@&#ABSTRACT@&#


               
               
                  Fully electric vehicles with multiple drivetrains allow a significant variation of the steady-state and transient cornering responses through the individual control of the electric motor drives. As a consequence, alternative driving modes can be created that provide the driver the option to select the preferred dynamic vehicle behavior. This article presents a torque-vectoring control structure based on the combination of feedforward and feedback contributions for the continuous control of vehicle yaw rate. The controller is specifically developed to be easily implementable on real-world vehicles. A novel model-based procedure for the definition of the control objectives is described in detail, together with the automated tuning process of the algorithm. The implemented control functions are demonstrated with experimental vehicle tests. The results show the possibilities of torque-vectoring control in designing the vehicle understeer characteristic.
               
            

@&#INTRODUCTION@&#

In recent years, powertrain configurations of fully electric vehicles ranging from one to four electric motor drives have been investigated. Many of them allow torque-vectoring, i.e., the asymmetric drivetrain torque distribution between the two wheels of the same axle in order to actuate continuous yaw moment control [1]. For example, torque-vectoring can be actuated through an active differential [2], or the installation of one motor per wheel [3], according to on-board [4] or in-wheel [5] layouts. Alternatively, a configuration with two on-board motors coupled with a specific central transmission with torque-vectoring capability can be used [6]; one (main) motor generates the axle torque demand (requested by the driver), and the second motor produces the required wheel torque difference to achieve the torque-vectoring functionality. This solution has the advantage that the peak yaw moment to be generated by each driven axle is independent from the axle torque demand. On the contrary, layouts with two motors per axle (each of them driving a wheel) are characterized by a linearly decreasing value of the maximum yaw moment as a function of the wheel torque demand (e.g., at the maximum brake/drive torque demand, the achievable yaw moment is zero). Moreover, many authors (e.g., [7]) consider electric vehicle configurations with multiple motors and front and rear active steering, in order to independently control yaw rate and sideslip.

Authors [8–33] provide an overview of different algorithms and techniques suitable for designing continuous torque-vectoring controllers. Advanced implementations include first and second order sliding mode [22,23], linear quadratic regulators with gain scheduling (based on a smooth estimation of tire cornering stiffness, [24]), internal model control [23], implicit and explicit model predictive control [25–27], and H-infinity control [28]. Despite several papers on the subject, a widely recognized method for exploiting the significant benefits of torque-vectoring control does not exist yet. Moreover, experimental results demonstrating the implementation and actuation of torque-vectoring control are not commonly found in the literature. A possible exploitation option of torque-vectoring, proposed in this paper, consists of setting multiple driving modes, selectable by the driver, corresponding to different understeer characteristics, defining the reference quasi-static cornering response of the vehicle. In this respect, some industrial patents (for example, [34–36]) mention driving modes for modifying vehicle response depending on driver׳s selection; however, most of them simply describe a variation of the tuning parameters of the different control systems installed on the vehicle, without a holistic approach to the control system design for each driving mode. Author [37] discusses methods for managing the look-up tables of different sets of reference yaw rates within a controller characterized by multiple driving modes; however, neither does it provide details of the procedure for generating the look-up tables such that the reference is actually achievable through the controller, nor does it mention any feedforward control action based on torque-vectoring.

This paper is concerned with the experimental assessment of the performance of a control structure for continuous torque-vectoring control with two driving modes that yield significantly different vehicle cornering response in steady-state and transient conditions. The novel contributions are:
                        
                           •
                           The implementation of a method for specifying alternative driving modes in terms of sets of understeer characteristics at different longitudinal accelerations, including the automated model-based assessment of their actual feasibility for the specific vehicle and drivetrain data.

A systematic procedure for designing and automatically fine tuning a continuous yaw moment controller with a simple control structure (for ease of implementation on a real vehicle), based on the combination of feedforward and feedback contributions, thus significantly reducing the vehicle testing time on the proving ground.

The experimental assessment of the presented methodology on a two-wheel-drive fully electric demonstrator vehicle (the Range Rover Evoque of the European FP7 project E-VECTOORC). This includes the analysis of the yaw rate tracking performance and the assessment of the impact of the understeer characteristic on the input power of the electric drivetrains.


                     Section 2 of the paper describes the layout of the case study vehicle and the experimentally validated simulation models adopted for the design of the yaw moment controller. Section 3 discusses the definition of the driving mode characteristics and the control structure configuration. Section 4 presents the procedures for tuning the parameters of the feedforward and feedback contributions of the controller. Section 5 deals with the experimental results obtained on the electric vehicle demonstrator in steady-state and transient maneuvers.

The case-study vehicle is a Range Rover Evoque prototype with two on-board electric drivetrains installed on the front axle (
                        Fig. 1). Each drivetrain consists of an inverter (I1 and I2 in Fig. 1) and a switched reluctance electric motor (M1 and M2), which is connected to the wheel through a single-speed transmission, constant-velocity joints and a half-shaft. The on-board layout of the electric drivetrains poses less packaging issues than an in-wheel layout, especially in case of significant values of wheel torque and power. The vehicle is equipped with an electro-hydraulic braking system, capable of generating a requested brake pressure, 
                           
                              
                                 p
                              
                              
                                 b
                                 ,
                                 d
                                 e
                                 m
                                 ,
                                 i
                              
                           
                        , on the individual caliper, so that continuous torque-vectoring control is possible also for significant braking torque values (this aspect is not investigated here). The main vehicle parameters are reported in 
                        Table 1. Experimental tests (
                        Fig. 2) with the developed yaw moment controller were carried out at the Lommel proving ground (Belgium), firstly, to validate the simulation models for control system design (Section 2.2), and, secondly, to assess the performance of the vehicle with the driving modes defined here (Section 5).

The list of main inputs and outputs of the torque-vectoring controller is reported in 
                        Table 2, together with their discretization time and indication whether they are transmitted through the Controller Area Network (CAN) of the vehicle. The vehicle control system was implemented on a dSPACE AutoBox system. In addition to the sensors signals used by the torque-vectoring controller, the longitudinal/lateral velocity and sideslip outputs from a Corrsys Datron sensor were logged during the experimental tests. The inertial measurement unit (IMU), providing 
                           r
                        , 
                           
                              
                                 a
                              
                              
                                 x
                              
                           
                         and 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                         as main outputs, is directly connected to the dSPACE board, whilst the other main I/O signals, for example the steering wheel angle measured by the sensor of the electric power steering system, are exchanged through the vehicle CAN.

The model-based design procedure of the yaw moment controller uses three simulation models to determine the vehicle handling response:
                           
                              (i)
                              Quasi-static model – this vehicle model is used for checking the feasibility of the reference understeer characteristics and the design of the feedforward contribution of the yaw moment controller (discussed in detail in Section 4.1). Owing to the quasi-static modeling approach, the model does not require the forward time integration of the equations of motion as the time derivatives of the main states of the system are considered to be zero: 
                                    
                                       r
                                       ̇
                                    
                                    =
                                    
                                       β
                                       ̇
                                    
                                    =
                                    
                                       φ
                                       ̇
                                    
                                    =
                                    0
                                 , where 
                                    r
                                 , 
                                    β
                                  and 
                                    φ
                                  are vehicle yaw rate, sideslip angle and roll angle, respectively. Hence, the model is well-suited for the fast and effective derivation of the vehicle understeer characteristics at different values of a
                                 
                                    x
                                 . Details of the model are reported in [11]. The non-linearities of the tangential tire forces and self-aligning moments are modeled with the Magic Formula [38].

Simplified non-linear vehicle model – this model is used for the tuning of the feedback gains of the yaw moment controller (discussed in Section 4.2). It includes longitudinal, lateral and yaw dynamics, and a transfer function for modeling the actuation dynamics of the yaw moment controller. Tire characteristics are simulated through the same model as for (i), while the suspension elasto-kinematics are neglected, together with the vehicle roll dynamics. The results are close to those of model (iii) for most of the operating conditions. A linearized version of model (ii) is used for the frequency response analysis of the vehicle reported in Section 4.

Detailed vehicle simulation model in IPG CarMaker – this model is used for the final verification of the performance of the yaw moment controller before its installation on the vehicle demonstrator. To achieve the required model fidelity, a detailed description of the powertrain torsional dynamics (induced by the torsional compliances of the half-shafts), mechanical plays and longitudinal tire slip dynamics (relaxation lengths) is implemented in Matlab-Simulink and integrated with CarMaker.

The simulation models (i) and (iii) were validated against experimental results obtained with the vehicle demonstrator with even torque distribution between the left and right wheels. For example, 
                        
                        Figs. 3 and 4 show the relevant data sets of a skid-pad test [39] and a step steer test [40] (a detailed description of the testing procedures is reported in Section 5) that were used for the validation of the CarMaker model. The experimental validation of model (i) is discussed in [12].

Models (i) and (iii) are also used for the controller design aspects related to energy efficiency (i.e., the effect of the understeer characteristic on the power consumption) and take into account the power loss contributions of the different components of the electric drivetrain. As the efficiency of the electric motor drives is significantly high in most operating conditions, contributions such as those relating to the longitudinal and lateral tire slip power losses are relevant even during non-extreme driving. In particular, the models include calculation of:
                           
                              •
                              Inverter and motor power losses, 
                                    
                                       
                                          P
                                       
                                       
                                          I
                                          M
                                          _
                                          l
                                          o
                                          s
                                          s
                                          e
                                          s
                                       
                                    
                                 , i.e., the difference between the total electrical input power to the two inverters (Fig. 1) and the mechanical output power at the motor shafts (this definition refers to traction conditions). The inverter and motor losses are computed as the sum of the losses on the individual drivetrains, 
                                    
                                       
                                          P
                                       
                                       
                                          I
                                          M
                                          _
                                          l
                                          o
                                          s
                                          s
                                          ,
                                          i
                                       
                                    
                                 . The calculation is based on experimentally measured data providing the efficiency of the individual motors and inverters, 
                                    
                                       
                                          η
                                       
                                       
                                          I
                                          M
                                          ,
                                          i
                                       
                                    
                                 , as a function of motor torque, 
                                    
                                       
                                          T
                                       
                                       
                                          M
                                          ,
                                          i
                                       
                                    
                                 , and angular speed, 
                                    
                                       
                                          ω
                                       
                                       
                                          M
                                          ,
                                          i
                                       
                                    
                                 , for each value of mechanical power output of the motors, 
                                    
                                       
                                          P
                                       
                                       
                                          M
                                          ,
                                          i
                                       
                                    
                                  (with 
                                    
                                       
                                          P
                                       
                                       
                                          M
                                          ,
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          T
                                       
                                       
                                          M
                                          ,
                                          i
                                       
                                    
                                    
                                       
                                          ω
                                       
                                       
                                          M
                                          ,
                                          i
                                       
                                    
                                 ).
                                    
                                       (1)
                                       
                                          
                                             P
                                             
                                                I
                                                M
                                                _
                                                l
                                                o
                                                s
                                                s
                                                e
                                                s
                                             
                                          
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             2
                                          
                                          
                                             P
                                             
                                                I
                                                M
                                                _
                                                l
                                                o
                                                s
                                                s
                                                ,
                                                i
                                             
                                          
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             2
                                          
                                          
                                             
                                                
                                                   P
                                                   
                                                      M
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                   
                                                      1
                                                      −
                                                      
                                                         η
                                                         
                                                            I
                                                            M
                                                            ,
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               T
                                                               
                                                                  M
                                                                  ,
                                                                  i
                                                               
                                                            
                                                            ,
                                                            
                                                               ω
                                                               
                                                                  M
                                                                  ,
                                                                  i
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         η
                                                         
                                                            I
                                                            M
                                                            ,
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               T
                                                               
                                                                  M
                                                                  ,
                                                                  i
                                                               
                                                            
                                                            ,
                                                            
                                                               ω
                                                               
                                                                  M
                                                                  ,
                                                                  i
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             2
                                          
                                          
                                             
                                                
                                                   T
                                                   
                                                      M
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                   ω
                                                   
                                                      M
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                   
                                                      1
                                                      −
                                                      
                                                         η
                                                         
                                                            I
                                                            M
                                                            ,
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               T
                                                               
                                                                  M
                                                                  ,
                                                                  i
                                                               
                                                            
                                                            ,
                                                            
                                                               ω
                                                               
                                                                  M
                                                                  ,
                                                                  i
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         η
                                                         
                                                            I
                                                            M
                                                            ,
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               T
                                                               
                                                                  M
                                                                  ,
                                                                  i
                                                               
                                                            
                                                            ,
                                                            
                                                               ω
                                                               
                                                                  M
                                                                  ,
                                                                  i
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 where the subscript ‘
                                    i
                                 ’ indicates an individual vehicle corner (hence an individual electric motor drive), according to the convention in Fig. 1.

Transmission power losses calculated from transmission efficiency maps that are functions of the transmission input torque and speed.

Tire-related power losses, 
                                    
                                       
                                          P
                                       
                                       
                                          t
                                          i
                                          r
                                          e
                                          _
                                          l
                                          o
                                          s
                                          s
                                          e
                                          s
                                       
                                    
                                 , given by the sum of the individual tire power losses, 
                                    
                                       P
                                       
                                          t
                                          i
                                          r
                                          e
                                          _
                                          l
                                          o
                                          s
                                          s
                                          ,
                                          i
                                       
                                    
                                 , due to the contributions of rolling resistance, 
                                    
                                       
                                          P
                                       
                                       
                                          r
                                          o
                                          l
                                          l
                                          ,
                                          i
                                       
                                    
                                 , longitudinal slip, 
                                    
                                       
                                          P
                                       
                                       
                                          l
                                          o
                                          n
                                          g
                                          ,
                                          i
                                       
                                    
                                 , and lateral slip, 
                                    
                                       
                                          P
                                       
                                       
                                          l
                                          a
                                          t
                                          ,
                                          i
                                       
                                    
                                 :
                                    
                                       (2)
                                       
                                          
                                             
                                                P
                                             
                                             
                                                t
                                                i
                                                r
                                                e
                                                _
                                                l
                                                o
                                                s
                                                s
                                                e
                                                s
                                             
                                          
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             4
                                          
                                          
                                             
                                                P
                                             
                                             
                                                t
                                                i
                                                r
                                                e
                                                _
                                                l
                                                o
                                                s
                                                s
                                                ,
                                                i
                                             
                                          
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             4
                                          
                                          
                                             (
                                             
                                                
                                                   
                                                      P
                                                   
                                                   
                                                      r
                                                      o
                                                      l
                                                      l
                                                      ,
                                                      i
                                                   
                                                
                                                +
                                                
                                                   
                                                      P
                                                   
                                                   
                                                      l
                                                      o
                                                      n
                                                      g
                                                      ,
                                                      i
                                                   
                                                
                                                +
                                                
                                                   
                                                      P
                                                   
                                                   
                                                      l
                                                      a
                                                      t
                                                      ,
                                                      i
                                                   
                                                
                                             
                                             )
                                          
                                       
                                    
                                 where
                                    
                                       (3)
                                       
                                          
                                             
                                                P
                                             
                                             
                                                r
                                                o
                                                l
                                                l
                                                ,
                                                i
                                             
                                          
                                          =
                                          |
                                          
                                             
                                                ω
                                             
                                             
                                                W
                                                ,
                                                i
                                             
                                          
                                          
                                             
                                                T
                                             
                                             
                                                r
                                                o
                                                l
                                                l
                                                ,
                                                i
                                             
                                          
                                          |
                                       
                                    
                                 
                                 
                                    
                                       (4)
                                       
                                          
                                             
                                                P
                                             
                                             
                                                l
                                                o
                                                n
                                                g
                                                ,
                                                i
                                             
                                          
                                          =
                                          
                                             |
                                             
                                                
                                                   
                                                      F
                                                   
                                                   
                                                      x
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                   
                                                      V
                                                   
                                                   
                                                      x
                                                      ,
                                                      i
                                                   
                                                   
                                                      S
                                                   
                                                
                                             
                                             |
                                          
                                          ≈
                                          
                                             |
                                             
                                                
                                                   
                                                      F
                                                   
                                                   
                                                      x
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                   [
                                                   
                                                      (
                                                      V
                                                      c
                                                      o
                                                      s
                                                      β
                                                      −
                                                      r
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      )
                                                      c
                                                      o
                                                      s
                                                      
                                                         
                                                            δ
                                                         
                                                         
                                                            W
                                                            ,
                                                            i
                                                         
                                                      
                                                      +
                                                      (
                                                      V
                                                      s
                                                      i
                                                      n
                                                      β
                                                      +
                                                      r
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      )
                                                      s
                                                      i
                                                      n
                                                      
                                                         
                                                            δ
                                                         
                                                         
                                                            W
                                                            ,
                                                            i
                                                         
                                                      
                                                      −
                                                      
                                                         
                                                            ω
                                                         
                                                         
                                                            W
                                                            ,
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            R
                                                         
                                                         
                                                            W
                                                            ,
                                                            i
                                                         
                                                      
                                                   
                                                   ]
                                                
                                             
                                             |
                                          
                                       
                                    
                                 
                                 
                                    
                                       (5)
                                       
                                          
                                             
                                                P
                                             
                                             
                                                l
                                                a
                                                t
                                                ,
                                                i
                                             
                                          
                                          =
                                          
                                             |
                                             
                                                
                                                   
                                                      F
                                                   
                                                   
                                                      y
                                                      .
                                                      i
                                                   
                                                
                                                
                                                   
                                                      V
                                                   
                                                   
                                                      y
                                                      ,
                                                      i
                                                   
                                                   
                                                      S
                                                   
                                                
                                             
                                             |
                                          
                                          ≈
                                          
                                             |
                                             
                                                
                                                   
                                                      F
                                                   
                                                   
                                                      y
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                   [
                                                   
                                                      −
                                                      (
                                                      V
                                                      c
                                                      o
                                                      s
                                                      β
                                                      −
                                                      r
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      )
                                                      s
                                                      i
                                                      n
                                                      
                                                         
                                                            δ
                                                         
                                                         
                                                            W
                                                            ,
                                                            i
                                                         
                                                      
                                                      +
                                                      (
                                                      V
                                                      s
                                                      i
                                                      n
                                                      β
                                                      +
                                                      r
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      )
                                                      c
                                                      o
                                                      s
                                                      
                                                         
                                                            δ
                                                         
                                                         
                                                            W
                                                            ,
                                                            i
                                                         
                                                      
                                                   
                                                   ]
                                                
                                             
                                             |
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ω
                                       
                                       
                                          W
                                          ,
                                          i
                                       
                                    
                                  is the angular speed of the i-th wheel (according to the convention in Fig. 1) with rolling radius 
                                    
                                       
                                          R
                                       
                                       
                                          W
                                          ,
                                          i
                                       
                                    
                                 ; 
                                    
                                       
                                          T
                                       
                                       
                                          r
                                          o
                                          l
                                          l
                                          ,
                                          i
                                       
                                    
                                  is the rolling resistance torque, calculated with a rolling resistance coefficient defined by a second order polynomial in 
                                    
                                       
                                          ω
                                       
                                       
                                          W
                                          ,
                                          i
                                       
                                    
                                 ; 
                                    
                                       
                                          F
                                       
                                       
                                          x
                                          ,
                                          i
                                       
                                    
                                  and 
                                    
                                       
                                          F
                                       
                                       
                                          y
                                          ,
                                          i
                                       
                                    
                                  are the longitudinal and lateral tire forces respectively; 
                                    
                                       
                                          V
                                       
                                       
                                          x
                                          ,
                                          i
                                       
                                       
                                          S
                                       
                                    
                                  and 
                                    
                                       
                                          V
                                       
                                       
                                          y
                                          ,
                                          i
                                       
                                       
                                          S
                                       
                                    
                                  are the slip speeds of the tires in longitudinal and lateral directions respectively; 
                                    V
                                  is the vehicle speed; 
                                    
                                       
                                          x
                                       
                                       
                                          i
                                       
                                    
                                  and 
                                    
                                       
                                          y
                                       
                                       
                                          i
                                       
                                    
                                  are the coordinates of the i-th wheel in longitudinal and lateral directions, respectively, in the vehicle reference system (with origin coincident with the center of gravity of the vehicle in a top view); and 
                                    
                                       
                                          δ
                                       
                                       
                                          W
                                          ,
                                          i
                                       
                                    
                                  is the steering angle at the i-th wheel.

The experimental validation of the input power to the electric drivetrains during a skid-pad test is shown in 
                        Fig. 5. The significant increase of input power as a function of lateral acceleration, usually not presented in the literature, is mostly due to the tire slip power losses. In particular, the contribution corresponding to Eq. (5) is the one characterized by the highest gradient as a function of 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                        .

Continuous torque-vectoring control enables to create and ‘design’ a notably different vehicle behavior without changing the hardware. In particular, different software-enabled driving modes can be offered to the driver, which alter vehicle experience even in normal driving conditions with low lateral accelerations, a
                        
                           y
                        . For instance, the understeer characteristic of a baseline vehicle can be modified to improve the ‘fun-to-drive’ aspect or to reduce the power consumption.

For this study, two driving modes are analyzed: (i) the ‘normal mode’, which corresponds to a vehicle with similar understeer gradient to the baseline (i.e., passive) vehicle, a slightly extended region of linear response, and the same value of maximum lateral acceleration, a
                        
                           y,MAX
                        ; and (ii) the ‘sport mode’, which has a consistently reduced understeer gradient, an extended linearity of the characteristic and an increased maximum value of a
                        
                           y,MAX
                        , according to the limitations dictated by the available tire–road friction coefficient. Both driving modes provide significant compensation of the variation of the understeer characteristics with changing a
                        
                           x
                        , experienced with the passive vehicle. This variation is due to the concurrent effect of the longitudinal load transfer and the interaction between the longitudinal and lateral tire forces (tire friction ellipse). For example, 
                        
                        Figs. 6 and 7 show the set of understeer characteristics for the baseline vehicle and the vehicle with torque-vectoring controller in ‘sport mode’ (which is deliberately set to be highly responsive) for a
                        
                           x
                        >0 (traction conditions).

In order to easily express the objectives of the control system within the design procedure, a simplified mathematical formulation of the understeer characteristic is required. In [11], the authors of this paper have shown that in a first approximation the target understeer characteristics can be expressed in terms of the three parameters, 
                           
                              
                                 K
                              
                              
                                 U
                              
                              
                                 l
                                 i
                                 n
                              
                           
                        , a
                        
                           y
                        
                        
                           ⁎
                         and a
                        
                           y,MAX
                        , which are functions of longitudinal acceleration, a
                        
                           x
                        , and tire–road friction coefficient, μ:
                           
                              (6)
                              
                                 
                                    
                                       a
                                    
                                    
                                       y
                                    
                                 
                                 =
                                 
                                    {
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      1
                                                      
                                                         
                                                            
                                                               K
                                                            
                                                            
                                                               U
                                                            
                                                            
                                                               l
                                                               i
                                                               n
                                                            
                                                         
                                                         (
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               x
                                                            
                                                         
                                                         ,
                                                         μ
                                                         )
                                                      
                                                   
                                                   
                                                      
                                                         δ
                                                      
                                                      
                                                         d
                                                         y
                                                         n
                                                      
                                                   
                                                   
                                                   i
                                                   f
                                                   
                                                   
                                                      
                                                         δ
                                                      
                                                      
                                                         d
                                                         y
                                                         n
                                                      
                                                   
                                                   <
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         y
                                                      
                                                      
                                                         ⁎
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         x
                                                      
                                                   
                                                   ,
                                                   μ
                                                   )
                                                   
                                                      
                                                         K
                                                      
                                                      
                                                         U
                                                      
                                                      
                                                         l
                                                         i
                                                         n
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         x
                                                      
                                                   
                                                   ,
                                                   μ
                                                   )
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         y
                                                         ,
                                                         M
                                                         A
                                                         X
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         x
                                                      
                                                   
                                                   ,
                                                   μ
                                                   )
                                                   +
                                                   
                                                      (
                                                      
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               y
                                                            
                                                            
                                                               ⁎
                                                            
                                                         
                                                         (
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               x
                                                            
                                                         
                                                         ,
                                                         μ
                                                         )
                                                         −
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               y
                                                               ,
                                                               M
                                                               A
                                                               X
                                                            
                                                         
                                                         (
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               x
                                                            
                                                         
                                                         ,
                                                         μ
                                                         )
                                                      
                                                      )
                                                   
                                                   
                                                      
                                                         e
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     K
                                                                  
                                                                  
                                                                     U
                                                                  
                                                                  
                                                                     l
                                                                     i
                                                                     n
                                                                  
                                                               
                                                               (
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     x
                                                                  
                                                               
                                                               ,
                                                               μ
                                                               )
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     y
                                                                  
                                                                  
                                                                     ⁎
                                                                  
                                                               
                                                               (
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     x
                                                                  
                                                               
                                                               ,
                                                               μ
                                                               )
                                                               −
                                                               
                                                                  
                                                                     δ
                                                                  
                                                                  
                                                                     d
                                                                     y
                                                                     n
                                                                  
                                                               
                                                            
                                                            
                                                               
                                                                  (
                                                                  
                                                                     
                                                                        
                                                                           a
                                                                        
                                                                        
                                                                           y
                                                                           ,
                                                                           M
                                                                           A
                                                                           X
                                                                        
                                                                     
                                                                     (
                                                                     
                                                                        
                                                                           a
                                                                        
                                                                        
                                                                           x
                                                                        
                                                                     
                                                                     ,
                                                                     μ
                                                                     )
                                                                     −
                                                                     
                                                                        
                                                                           a
                                                                        
                                                                        
                                                                           y
                                                                        
                                                                        
                                                                           ⁎
                                                                        
                                                                     
                                                                     (
                                                                     
                                                                        
                                                                           a
                                                                        
                                                                        
                                                                           x
                                                                        
                                                                     
                                                                     ,
                                                                     μ
                                                                     )
                                                                  
                                                                  )
                                                               
                                                               
                                                                  
                                                                     K
                                                                  
                                                                  
                                                                     U
                                                                  
                                                                  
                                                                     l
                                                                     i
                                                                     n
                                                                  
                                                               
                                                               (
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     x
                                                                  
                                                               
                                                               ,
                                                               μ
                                                               )
                                                            
                                                         
                                                      
                                                   
                                                   
                                                   
                                                   
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   i
                                                   f
                                                   
                                                   
                                                      
                                                         δ
                                                      
                                                      
                                                         d
                                                         y
                                                         n
                                                      
                                                   
                                                   ≥
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         y
                                                      
                                                      
                                                         ⁎
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         x
                                                      
                                                   
                                                   ,
                                                   μ
                                                   )
                                                   
                                                      
                                                         K
                                                      
                                                      
                                                         U
                                                      
                                                      
                                                         l
                                                         i
                                                         n
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         x
                                                      
                                                   
                                                   ,
                                                   μ
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              
                                 δ
                              
                              
                                 d
                                 y
                                 n
                              
                           
                         is the dynamic steering wheel angle, equal to the difference between the actual steering wheel angle, 
                           δ
                        , and the kinematic steering wheel angle, 
                           
                              
                                 δ
                              
                              
                                 k
                                 i
                                 n
                              
                           
                        , deriving from the kinematic wheel steer angle, 
                           
                              
                                 δ
                              
                              
                                 W
                                 ,
                                 k
                                 i
                                 n
                              
                           
                        . 
                           
                              
                                 δ
                              
                              
                                 W
                                 ,
                                 k
                                 i
                                 n
                              
                           
                         can be calculated from the Ackermann formula [17], 
                           
                              
                                 δ
                              
                              
                                 W
                                 ,
                                 k
                                 i
                                 n
                              
                           
                           =
                           (
                           L
                           /
                           R
                           )
                        , where 
                           L
                         is the wheelbase and 
                           R
                         is the trajectory radius of the center of gravity of the vehicle. 
                           
                              
                                 K
                              
                              
                                 U
                              
                              
                                 l
                                 i
                                 n
                              
                           
                         (
                           
                              
                                 K
                              
                              
                                 U
                              
                              
                                 l
                                 i
                                 n
                              
                           
                           =
                           ∂
                           
                              
                                 δ
                              
                              
                                 d
                                 y
                                 n
                              
                           
                           /
                           ∂
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                        ) is the understeer gradient in the linear region of the understeer characteristic. a
                        
                           y
                        
                        
                           ⁎
                         and a
                        
                           y,MAX
                         represent the maximum extension of the linear region of the characteristic and the maximum achievable lateral acceleration, respectively. The empirical Eq. (6) was validated through vehicle tests in [11].

From the set of target understeer characteristics, the look-up tables of the steady-state reference yaw rate,
                           
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 S
                              
                           
                        , which represents the actual control variable, are obtained as functions of steering wheel angle, 
                           δ
                        , vehicle speed, 
                           V
                        , longitudinal acceleration, ax
                        , and tire–road friction coefficient, μ, according to the following steps:
                           
                              •
                              For the assigned values of 
                                    
                                       
                                          a
                                       
                                       
                                          y
                                       
                                    
                                  and 
                                    V
                                 , the reference yaw rate is calculated as: 
                                    
                                       
                                          r
                                       
                                       
                                          r
                                          e
                                          f
                                          ,
                                          S
                                       
                                    
                                    =
                                    (
                                    
                                       
                                          a
                                       
                                       
                                          y
                                       
                                    
                                    /
                                    V
                                    )
                                  (with the hypothesis of 
                                    
                                       β
                                       ̇
                                    
                                    ≈
                                    0
                                 , relating to steady-state cornering conditions).

The corresponding dynamic steering wheel angle, 
                                    
                                       
                                          δ
                                       
                                       
                                          d
                                          y
                                          n
                                       
                                    
                                 , is expressed by using Eq. (6), for example corresponding to the reference characteristics of Fig. 7: 
                                    
                                       
                                          δ
                                       
                                       
                                          d
                                          y
                                          n
                                       
                                    
                                    =
                                    
                                       
                                          δ
                                       
                                       
                                          d
                                          y
                                          n
                                       
                                    
                                    
                                       (
                                       
                                          
                                             
                                                a
                                             
                                             
                                                y
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                x
                                             
                                          
                                          ,
                                          μ
                                       
                                       )
                                    
                                 .

The kinematic steering wheel angle, 
                                    
                                       
                                          δ
                                       
                                       
                                          k
                                          i
                                          n
                                       
                                    
                                 , is calculated through the non-linear look-up table describing the steering system kinematics: 
                                    
                                       
                                          δ
                                       
                                       
                                          k
                                          i
                                          n
                                       
                                    
                                    =
                                    ρ
                                    
                                       (
                                       
                                          
                                             
                                                δ
                                             
                                             
                                                W
                                                ,
                                                k
                                                i
                                                n
                                             
                                          
                                       
                                       )
                                    
                                    =
                                    ρ
                                    
                                       (
                                       
                                          L
                                          (
                                          
                                             
                                                r
                                             
                                             
                                                r
                                                e
                                                f
                                                ,
                                                S
                                             
                                          
                                          /
                                          V
                                          )
                                       
                                       )
                                    
                                 . 
                                    ρ
                                  is the non-linear relationship between the steer angle at the wheel, 
                                    
                                       
                                          δ
                                       
                                       
                                          W
                                       
                                    
                                 , and steering wheel angle, 
                                    δ
                                 .

The actual steering wheel angle, 
                                    
                                    δ
                                 , including the dynamic and kinematic contributions, is computed as:
                                    
                                       (7)
                                       
                                          δ
                                          
                                             (
                                             
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      y
                                                   
                                                
                                                ,
                                                V
                                                ,
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      x
                                                   
                                                
                                                ,
                                                μ
                                             
                                             )
                                          
                                          =
                                          
                                             
                                                δ
                                             
                                             
                                                d
                                                y
                                                n
                                             
                                          
                                          
                                             (
                                             
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      y
                                                   
                                                
                                                ,
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      x
                                                   
                                                
                                                ,
                                                μ
                                             
                                             )
                                          
                                          +
                                          
                                             
                                                δ
                                             
                                             
                                                k
                                                i
                                                n
                                             
                                          
                                          =
                                          
                                             
                                                δ
                                             
                                             
                                                d
                                                y
                                                n
                                             
                                          
                                          
                                             (
                                             
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      y
                                                   
                                                
                                                ,
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      x
                                                   
                                                
                                                ,
                                                μ
                                             
                                             )
                                          
                                          +
                                          ρ
                                          
                                             (
                                             
                                                L
                                                
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            y
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            V
                                                         
                                                         2
                                                      
                                                   
                                                
                                             
                                             )
                                          
                                          =
                                          
                                             
                                                δ
                                             
                                             
                                                d
                                                y
                                                n
                                             
                                          
                                          
                                             (
                                             
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      r
                                                      e
                                                      f
                                                      ,
                                                      S
                                                   
                                                
                                                V
                                                ,
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      x
                                                   
                                                
                                                ,
                                                μ
                                             
                                             )
                                          
                                          +
                                          ρ
                                          
                                             (
                                             
                                                L
                                                
                                                   
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            r
                                                            e
                                                            f
                                                            ,
                                                            S
                                                         
                                                      
                                                   
                                                   V
                                                
                                             
                                             )
                                          
                                       
                                    
                                 
                              

The tables of 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 S
                              
                           
                           =
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 S
                              
                           
                           
                              (
                              
                                 δ
                                 ,
                                 V
                                 ,
                                 
                                    
                                       a
                                    
                                    
                                       x
                                    
                                 
                                 ,
                                 μ
                              
                              )
                           
                         provide the reference for the control system.

An example of look-up table of 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 S
                              
                           
                         for high friction conditions and a
                        
                           x
                        =0 is reported in 
                        Fig. 8.


                        
                        Fig. 9 shows the simplified block diagram of the torque-vectoring controller. The reference yaw rate generator produces a reference yaw rate, 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                              
                           
                        , calculated from the steady-state reference, 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 S
                              
                           
                        , through a first order filter: 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                              
                           
                           =
                           (
                           
                              
                                 ω
                              
                              
                                 c
                              
                           
                           /
                           (
                           s
                           +
                           
                              
                                 ω
                              
                              
                                 c
                              
                           
                           )
                           )
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 S
                              
                           
                        . 
                           
                              
                                 ω
                              
                              
                                 c
                              
                           
                         is a tuning parameter of the desired vehicle dynamic response, which can be varied for the different driving modes. The high-level controller calculates the reference yaw moment, 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 +
                              
                           
                           =
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                           +
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 B
                              
                           
                        , which is then saturated (thus, giving origin to 
                           
                              
                                 M
                              
                              
                                 Z
                              
                           
                        ) according to the limitations of the electric drivetrains (this applies to traction only) and the available tire–road friction coefficient. The saturation can be either managed directly by the optimization-based low-level controller or by a specific intermediate function located between the high-level and low-level controllers (this is the case in Fig. 9, which simplifies the low-level controller).

The wheel torque demand from the drivability controller, 
                           
                              
                                 T
                              
                              
                                 W
                              
                              
                                 t
                                 o
                                 t
                              
                           
                        , calculated as a function of the accelerator pedal and brake pedal positions, respectively 
                           p
                           o
                           
                              
                                 s
                              
                              
                                 a
                              
                           
                         and 
                           p
                           o
                           
                              
                                 s
                              
                              
                                 b
                              
                           
                        , is manipulated (i.e., the traction torque is reduced) by the yaw moment controller in case of a significant yaw rate error, 
                           e
                           =
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                              
                           
                           −
                           r
                        . The feedforward contribution of the reference yaw moment, 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                           
                              (
                              
                                 δ
                                 ,
                                 V
                                 ,
                                 
                                    
                                       a
                                    
                                    
                                       x
                                    
                                 
                                 ,
                                 μ
                              
                              )
                           
                        , derives from the look-up table output by the optimization procedure described in Section 4. The feedforward controller guarantees a smooth control action in most operating conditions, as 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                         is mainly dependent on the (filtered) values of steering wheel angle, estimated vehicle speed and longitudinal acceleration. The purpose of the feedforward contribution is to provide the desired vehicle cornering response (i.e., the reference understeer characteristic) for slow steering wheel and accelerator/brake pedal inputs, when the vehicle parameters are close to the nominal ones.

The feedback controller is designed for safe yaw rate tracking in transient conditions, disturbance compensation (e.g., compensation of the effect of lateral wind gusts) and robust performance in case of significant variation of the vehicle parameters. The feedback contribution, 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 B
                              
                           
                        , is based on a gain-scheduled PID controller with anti-windup for managing the saturation of the integral term:
                           
                              (8)
                              
                                 
                                    
                                       M
                                    
                                    
                                       Z
                                    
                                    
                                       F
                                       B
                                    
                                 
                                 =
                                 
                                    
                                       K
                                    
                                    
                                       P
                                    
                                 
                                 
                                    (
                                    
                                       e
                                       +
                                       
                                          
                                             T
                                          
                                          
                                             D
                                          
                                       
                                       
                                          e
                                          ̇
                                       
                                    
                                    )
                                 
                                 +
                                 
                                    
                                       K
                                    
                                    
                                       P
                                    
                                 
                                 
                                    ∫
                                    
                                       
                                          
                                             t
                                          
                                          
                                             i
                                             n
                                          
                                       
                                    
                                    
                                       
                                          
                                             t
                                          
                                          
                                             f
                                             i
                                             n
                                          
                                       
                                    
                                 
                                 
                                    (
                                    
                                       
                                          e
                                          
                                             
                                                
                                                   T
                                                
                                                
                                                   I
                                                
                                             
                                          
                                       
                                       −
                                       
                                          
                                             
                                                
                                                   e
                                                
                                                
                                                   T
                                                
                                             
                                          
                                          
                                             
                                                
                                                   K
                                                
                                                
                                                   P
                                                
                                             
                                             
                                                
                                                   T
                                                
                                                
                                                   T
                                                
                                             
                                          
                                       
                                    
                                    )
                                 
                                 d
                                 t
                              
                           
                        with 
                           
                              
                                 e
                              
                              
                                 T
                              
                           
                         being:
                           
                              (9)
                              
                                 
                                    
                                       e
                                    
                                    
                                       T
                                    
                                 
                                 =
                                 
                                    
                                       M
                                    
                                    
                                       Z
                                    
                                    
                                       +
                                    
                                 
                                 −
                                 
                                    
                                       M
                                    
                                    
                                       Z
                                    
                                 
                              
                           
                        where 
                           
                              
                                 K
                              
                              
                                 P
                              
                           
                        , 
                           
                              
                                 T
                              
                              
                                 D
                              
                           
                        , 
                           
                              
                                 T
                              
                              
                                 I
                              
                           
                         and 
                           
                              
                                 T
                              
                              
                                 T
                              
                           
                         are the parameters defining the proportional, derivative, integral and anti-windup contributions of the PID controller respectively. In the practical implementation of the controller, the integral contribution will be active only for 
                           |
                           e
                           |
                         larger than a threshold, which determines a reset integrator condition. Deadbands can also be applied to the calculation of 
                           e
                         and 
                           
                              e
                              ̇
                           
                         for the proportional and derivative parts.

In the most complex formulation implemented on the demonstrator vehicle, the low-level controller includes an active set-based control allocation algorithm [41] distributing the wheel torques, minimizing a cost function J with the following structure:
                           
                              (10)
                              
                                 J
                                 =
                                 
                                    ‖
                                    
                                       
                                          
                                             
                                                
                                                   B
                                                   
                                                      
                                                         τ
                                                      
                                                      
                                                         W
                                                      
                                                   
                                                   −
                                                   v
                                                
                                             
                                          
                                          
                                             
                                                
                                                   γ
                                                   
                                                      (
                                                      
                                                         D
                                                         
                                                            
                                                               τ
                                                            
                                                            
                                                               W
                                                            
                                                         
                                                         −
                                                         u
                                                      
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                    ‖
                                 
                              
                           
                        where 
                           
                              
                                 τ
                              
                              
                                 W
                              
                           
                         contains the wheel torque demands to be calculated, 
                           B
                         is the control effectiveness matrix, 
                           v
                         is the virtual control vector (with components 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 +
                              
                           
                         and 
                           
                              
                                 T
                              
                              
                                 W
                              
                           
                        ), and 
                           D
                           
                              
                                 τ
                              
                              
                                 W
                              
                           
                           −
                           u
                         represents the wheel torque distribution criterion (i.e., the cost function of the control allocation algorithm), with 
                           γ
                         being the weight between the two terms. The constraints relating to tire friction and drivetrain power limitations are expressed in the form 
                           C
                           
                              
                                 τ
                              
                              
                                 W
                              
                           
                           >
                           W
                        . Owing to the front wheel drive vehicle layout, the system is not characterized by actuation redundancy in traction, but in braking. Nevertheless, the implemented control allocation algorithm allows systematic consideration of the constraints for all cases. From the wheel torque demands calculated by the control allocation algorithm, the motor torque demands, 
                           
                              
                                 T
                              
                              
                                 M
                                 ,
                                 i
                              
                           
                        , and brake pressure demands, 
                           
                              
                                 p
                              
                              
                                 b
                                 .
                                 d
                                 e
                                 m
                                 ,
                                 i
                              
                           
                        , are then computed, considering the limitations deriving from the motor maps. The actual controller implemented on the vehicle demonstrator includes a wheel slip controller (with anti-lock braking and traction control functionalities), here omitted for brevity.

The design of the feedforward contribution of the yaw moment controller, 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                           
                              (
                              
                                 δ
                                 ,
                                 V
                                 ,
                                 
                                    
                                       a
                                    
                                    
                                       x
                                    
                                 
                                 ,
                                 μ
                              
                              )
                           
                        , is carried out through the non-linear quasi-static model, according to the following off-line optimization procedure:
                           
                              •
                              Definition of the set of reference understeer characteristics, 
                                    
                                       
                                          δ
                                       
                                       
                                          d
                                          y
                                          n
                                       
                                    
                                    
                                       (
                                       
                                          
                                             
                                                a
                                             
                                             
                                                y
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                x
                                             
                                          
                                          ,
                                          μ
                                       
                                       )
                                    
                                 , for the specific driving mode, according to the method of Section 3.1. The understeer characteristics represent the equality constraints of the optimization, together with the condition that the overall yaw moment, including all contributions (not only those from the torque-vectoring controller, defining the longitudinal tire forces, but also those from lateral forces and self-aligning moments), is zero (vehicle in trimmed conditions), which means that the yaw acceleration of the vehicle is imposed to be zero.

Definition of the set of inequality constraints, relating to: (i) maximum and minimum battery power (relevant for the case in which the peak battery power is lower than the sum of the peak motor powers); (ii) maximum and minimum motor torque characteristics; and (iii) individual tire slip ratios, as it is preferable to keep the slip ratios within pre-defined limits, in order to prevent frequent interventions of the wheel slip controllers.

Definition of an objective function defining the wheel torque distribution criterion, in case of a redundant actuation system. Examples of objective functions are discussed in [11–13], for instance, based on the minimization of the power consumption of the electric drivetrains, or the variance of the slip ratios among the four wheels. The objective function used for the off-line optimization must have the same formulation as the second term in Eq. (10) (i.e., 
                                    D
                                    
                                       
                                          τ
                                       
                                       
                                          W
                                       
                                    
                                    −
                                    u
                                 ) adopted within the on-line control allocation algorithm discussed in Section 3.2.

The optimization routine is run based on the interior point method, with different initial conditions, in order to reduce the risks related to local minima (relevant especially if the motor efficiency maps are involved in the optimization).

The main outputs of the optimization are the look-up tables of the feedforward contribution, 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                        , and all the physical parameters (e.g., wheel torque distribution, motor efficiency distribution, slip ratio distribution) providing an insight of the vehicle operation in quasi-static conditions. 
                        Fig. 10 presents an example of the 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                         map, for the ‘sport mode’ and ‘normal mode’. The positive values of 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                         of the ‘sport mode’ show the destabilizing action of the yaw moment controller, which reduces vehicle understeer in order to maintain the responsiveness of the car and, hence, improve the ‘fun-to-drive’.

A correct design procedure of the non-linear quasi-static look-up tables of 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                         should yield adequate margins (
                           |
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                           −
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 A
                                 X
                              
                           
                           |
                         and 
                           |
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                           −
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 I
                                 N
                              
                           
                           |
                        ) with respect to the top and bottom boundaries, 
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 A
                                 X
                              
                           
                         and 
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 I
                                 N
                              
                           
                         respectively, of the available yaw moment for the specific operating condition (defined by 
                           δ
                        , 
                           V
                        , 
                           
                              
                                 a
                              
                              
                                 x
                              
                           
                        , and 
                           μ
                        ) and drivetrain constraints. These margins are important as they ensure (i) safe and predictable vehicle response (e.g., absence of significant slip ratios or unexpected vehicle instability due to modeling simplifications associated with the quasi-static model) when the controller is implemented on the vehicle and (ii) vehicle controllability in transient conditions (i.e., high values of 
                           
                              r
                              ̇
                           
                         achievable for swift feedback control), when 
                           
                              
                                 M
                              
                              
                                 Z
                              
                           
                         significantly differs from 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                        . 
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 A
                                 X
                              
                           
                         and 
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 I
                                 N
                              
                           
                         are computed through the optimization procedure described earlier (including the same constraints, apart from the one on the total yaw moment), by respectively maximizing and minimizing the cost function, 
                           
                              
                                 J
                              
                              
                                 M
                              
                           
                        , consisting of the yaw moment contributions induced by 
                           
                              
                                 F
                              
                              
                                 x
                                 ,
                                 i
                              
                           
                         and 
                           
                              
                                 F
                              
                              
                                 y
                                 ,
                                 i
                              
                           
                         and the tire self-aligning moments, 
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 i
                              
                           
                        :
                           
                              (11)
                              
                                 
                                    
                                       J
                                    
                                    
                                       M
                                    
                                 
                                 =
                                 −
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    4
                                 
                                 
                                    
                                       
                                          F
                                       
                                       
                                          x
                                          ,
                                          i
                                       
                                    
                                    
                                    cos
                                    
                                    
                                       
                                          δ
                                       
                                       
                                          W
                                          ,
                                          i
                                       
                                    
                                    
                                       
                                          y
                                       
                                       
                                          i
                                       
                                    
                                 
                                 +
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    4
                                 
                                 
                                    
                                       
                                          F
                                       
                                       
                                          x
                                          ,
                                          i
                                       
                                    
                                    
                                    sin
                                    
                                    
                                       
                                          δ
                                       
                                       
                                          W
                                          ,
                                          i
                                       
                                    
                                    
                                       
                                          x
                                       
                                       
                                          i
                                       
                                    
                                    
                                 
                                 
                                 +
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    4
                                 
                                 
                                    
                                       
                                          F
                                       
                                       
                                          y
                                          ,
                                          i
                                       
                                    
                                    
                                    cos
                                    
                                    
                                       
                                          δ
                                       
                                       
                                          W
                                          ,
                                          i
                                       
                                    
                                    
                                       
                                          x
                                       
                                       
                                          i
                                       
                                    
                                 
                                 +
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    4
                                 
                                 
                                    
                                       
                                          F
                                       
                                       
                                          y
                                          ,
                                          i
                                       
                                    
                                    
                                    sin
                                    
                                    
                                       
                                          δ
                                       
                                       
                                          W
                                          ,
                                          i
                                       
                                    
                                    
                                       
                                          y
                                       
                                       
                                          i
                                       
                                    
                                 
                                 +
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    4
                                 
                                 
                                    
                                       
                                          M
                                       
                                       
                                          Z
                                          ,
                                          i
                                       
                                    
                                 
                              
                           
                        
                     

The values of 
                           
                              
                                 δ
                              
                              
                                 W
                                 ,
                                 i
                              
                           
                         and 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                         corresponding to the respective point of the understeer characteristic are imposed. Because of the interaction between 
                           
                              
                                 F
                              
                              
                                 x
                                 ,
                                 i
                              
                           
                         and 
                           
                              
                                 F
                              
                              
                                 y
                                 ,
                                 i
                              
                           
                         (tire friction ellipse), the yaw moment contribution due to 
                           
                              
                                 F
                              
                              
                                 y
                                 ,
                                 i
                              
                           
                         is essential in this assessment. As an example, 
                        Fig. 11 reports the values of 
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 A
                                 X
                              
                           
                         and 
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 I
                                 N
                              
                           
                         corresponding to the 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                         characteristic of Fig. 10 at 
                           
                              
                                 a
                              
                              
                                 x
                              
                           
                        =0m/s2 and V=70km/h. The figure shows that the minimum yaw moment margin, 
                           |
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 F
                                 F
                              
                           
                           −
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 A
                                 X
                              
                           
                           |
                           ≅
                           
                           3000
                           
                           N
                           
                           m
                        , is achieved for 
                           δ
                           ≈
                        110 deg, which means that the feedback part of the controller will be able to generate a maximum 
                           
                              r
                              ̇
                           
                         correction (given by 
                           |
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 F
                                 F
                              
                           
                           −
                           
                              
                                 M
                              
                              
                                 Z
                                 ,
                                 M
                                 A
                                 X
                              
                           
                           |
                           /
                           
                              
                                 J
                              
                              
                                 Z
                              
                           
                        ) of about 1rad/s2 in transient conditions. This margin is usually lower for significant values of 
                           |
                           
                              
                                 a
                              
                              
                                 x
                              
                           
                           |
                        .

Within the tuning of the feedback controller, the main design decision relates to the variables with respect to which the gain scheduling should be implemented, as the vehicle response characteristics change as functions of 
                           
                              
                                 a
                              
                              
                                 x
                              
                           
                        , 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                         and V. For example, 
                        Fig. 12 plots the yaw rate frequency response characteristics (obtained through linearization of model (ii) in Section 2.2) for a range of V, for constant values of the front and rear tire cornering stiffness, 
                           
                              
                                 C
                              
                              
                                 F
                              
                           
                         and 
                           
                              
                                 C
                              
                              
                                 R
                              
                           
                         respectively. The decrease of yaw damping is evident. In this paper, focused on the implementation of a simple and easy-to-tune controller, the gain scheduling of the PID contribution is performed as a function of V only, as (i) V is precisely estimated by any existing vehicle stability control system and (ii) its variation is relatively slow with respect to the yaw rate dynamics involved during extreme transients.

Further gain scheduling as a function of 
                           
                              
                                 a
                              
                              
                                 x
                              
                           
                         and 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                         (indirectly related to 
                           
                              
                                 C
                              
                              
                                 F
                              
                           
                         and 
                           
                              
                                 C
                              
                              
                                 R
                              
                           
                        , which are the actual sources of the non-linearity), or directly as a function of the estimated 
                           
                              
                                 C
                              
                              
                                 F
                              
                           
                         and 
                           
                              
                                 C
                              
                              
                                 R
                              
                           
                         (as proposed in [24]), can improve performance at the price of potential oscillations and harshness of the control action in real-world testing, since (i) all these parameters often vary very quickly in transient cornering conditions; (ii) some noise is always present in the measurement of 
                           
                              
                                 a
                              
                              
                                 x
                              
                           
                         and 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                        , and significant noise is expected in any estimation of 
                           
                              
                                 C
                              
                              
                                 F
                              
                           
                         and 
                           
                              
                                 C
                              
                              
                                 R
                              
                           
                        ; and (iii) large errors are present in the existing state estimators of 
                           
                              
                                 C
                              
                              
                                 F
                              
                           
                         and 
                           
                              
                                 C
                              
                              
                                 R
                              
                           
                        .

The tuning of the PID controller gains must address extreme transient cornering conditions (e.g., as experienced during step steer maneuvers), with 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                         values close to the tire friction limits, as the feedback contribution is essential to prevent yaw rate oscillations and, hence, maintain vehicle safety. In sub-limit conditions the feedforward contribution provides most of the control action, and the main specification of the PID controller is its smoothness, in order to avoid compromising vehicle feel. As a consequence of these specifications and the standard practice in stability control systems׳ tuning, the choice was to fine-tune the controller gains in the time domain, without dealing with the significant simplifications relating to the linearization of the system, required for a tuning entirely carried out in the frequency domain. Therefore the PID controller was fine-tuned through a Particle Swarm Optimization (PSO) algorithm, a nature-inspired heuristic algorithm whose effectiveness for tuning PID controllers in the time domain has been demonstrated in several applications [42,43].

The iterations of the optimization algorithm adopted for this specific application are based on the following formulation of the particle velocities and positions:
                           
                              (12)
                              
                                 
                                    
                                       p
                                    
                                    
                                       k
                                    
                                 
                                 
                                    (
                                    
                                       n
                                       +
                                       1
                                    
                                    )
                                 
                                 =
                                 z
                                 
                                    
                                       p
                                    
                                    
                                       k
                                    
                                 
                                 
                                    (
                                    n
                                    )
                                 
                                 +
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       r
                                    
                                    
                                       1
                                    
                                 
                                 
                                    (
                                    
                                       
                                          
                                             
                                                q
                                                ¯
                                             
                                          
                                          
                                             k
                                          
                                       
                                       −
                                       
                                          
                                             q
                                          
                                          
                                             k
                                          
                                       
                                       
                                          (
                                          n
                                          )
                                       
                                    
                                    )
                                 
                                 +
                                 
                                    
                                       c
                                    
                                    
                                       2
                                    
                                 
                                 
                                    
                                       r
                                    
                                    
                                       2
                                    
                                 
                                 
                                    (
                                    
                                       
                                          q
                                          ˜
                                       
                                       −
                                       
                                          
                                             q
                                          
                                          
                                             k
                                          
                                       
                                       
                                          (
                                          n
                                          )
                                       
                                    
                                    )
                                 
                              
                           
                        
                        
                           
                              (13)
                              
                                 
                                    
                                       q
                                    
                                    
                                       k
                                    
                                 
                                 
                                    (
                                    
                                       n
                                       +
                                       1
                                    
                                    )
                                 
                                 =
                                 
                                    
                                       q
                                    
                                    
                                       k
                                    
                                 
                                 
                                    (
                                    n
                                    )
                                 
                                 +
                                 
                                    
                                       p
                                    
                                    
                                       k
                                    
                                 
                                 
                                    (
                                    
                                       n
                                       +
                                       1
                                    
                                    )
                                 
                              
                           
                        where 
                           n
                         is the number of iterations (i.e., generations), 
                           
                              
                                 p
                              
                              
                                 k
                              
                           
                         is the velocity of the particle 
                           k
                        , 
                           
                              
                                 q
                              
                              
                                 k
                              
                           
                         is the position of the particle 
                           k
                        , 
                           
                              
                                 
                                    q
                                    ¯
                                 
                              
                              
                                 k
                              
                           
                         is the best position of particle 
                           k
                        , 
                           
                              q
                              ˜
                           
                         is the global best position of the swarm, and 
                           z
                         is the inertia weight. 
                           
                              
                                 r
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 r
                              
                              
                                 2
                              
                           
                         are the randomly generated numbers with uniform distribution between 0 and 1, and 
                           
                              
                                 c
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 c
                              
                              
                                 2
                              
                           
                         are the respective weighting factors. The position vector of each particle includes the parameters to be optimized and in this case is expressed as
                           
                              (14)
                              
                                 
                                    
                                       q
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       [
                                       
                                          
                                             
                                                K
                                             
                                             
                                                P
                                             
                                          
                                          ,
                                          
                                             
                                                T
                                             
                                             
                                                I
                                             
                                          
                                          ,
                                          
                                             
                                                T
                                             
                                             
                                                D
                                             
                                          
                                       
                                       ]
                                    
                                    T
                                 
                              
                           
                        
                     

The inertia term 
                           z
                         (
                           
                              
                                 z
                              
                              
                                 M
                                 I
                                 N
                              
                           
                           <
                           z
                           <
                           
                              
                                 z
                              
                              
                                 M
                                 A
                                 X
                              
                           
                        ) allows the particle to decelerate when approaching the maximum number of iterations, 
                           
                              
                                 n
                              
                              
                                 M
                                 A
                                 X
                              
                           
                        , to improve the search capability and not to let the particle pass away from the possible optimal solution. In formulas:
                           
                              (15)
                              
                                 z
                                 =
                                 
                                    
                                       z
                                    
                                    
                                       M
                                       A
                                       X
                                    
                                 
                                 −
                                 
                                    
                                       
                                          
                                             z
                                          
                                          
                                             M
                                             A
                                             X
                                          
                                       
                                       −
                                       
                                          
                                             z
                                          
                                          
                                             M
                                             I
                                             N
                                          
                                       
                                    
                                    
                                       
                                          
                                             n
                                          
                                          
                                             M
                                             A
                                             X
                                          
                                       
                                    
                                 
                                 n
                              
                           
                        
                     

The feasibility of the problem is ensured by finding at least one initial point within the constrained space.

The optimization algorithm is implemented according to the following steps, repeated at different values of 
                           V
                        :
                           
                              •
                              Choice of the particles׳ initial positions and velocities. To ensure a feasible starting point with a relatively small number of agents (e.g., 30 for the specific application), the initial coordinates are chosen from the loop shaping-derived values of 
                                    
                                       
                                          K
                                       
                                       
                                          P
                                       
                                    
                                 , 
                                    
                                       
                                          T
                                       
                                       
                                          I
                                       
                                    
                                  and 
                                    
                                       
                                          T
                                       
                                       
                                          D
                                       
                                    
                                  
                                 [44]. The initial particle position and velocity distribution is selected with random generated Gaussian distribution numbers within a defined closed interval.

Numerical integration of the equations of motion of model (ii) outlined in Section 2.2 during simulations of step steer maneuvers at different steering amplitudes.

Evaluation of the cost function for each particle. The specific cost function is the sum of the weighted combination (with weights w1
                                  and w2
                                 ) of the yaw rate overshoot (the peak value of yaw rate, 
                                    
                                       
                                          r
                                       
                                       
                                          M
                                          A
                                          X
                                          ,
                                          j
                                       
                                    
                                 , is referred to the desired value of vehicle yaw rate, 
                                    
                                       
                                          r
                                       
                                       
                                          r
                                          e
                                          f
                                          ,
                                          t
                                          M
                                          A
                                          X
                                          ,
                                          j
                                       
                                    
                                 , for the specific operating condition) and the Root Mean Square (RMS) yaw rate error, 
                                    
                                       
                                          e
                                       
                                       
                                          R
                                          M
                                          S
                                          ,
                                          j
                                       
                                    
                                 , for each step steering input j:
                                    
                                       (16)
                                       
                                          
                                             
                                                J
                                             
                                             
                                                r
                                             
                                          
                                          =
                                          
                                             ∑
                                             
                                                j
                                                =
                                                1
                                             
                                             m
                                          
                                          
                                             (
                                             
                                                
                                                   
                                                      w
                                                   
                                                   
                                                      1
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            M
                                                            A
                                                            X
                                                            ,
                                                            j
                                                         
                                                      
                                                      −
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            r
                                                            e
                                                            f
                                                            ,
                                                            t
                                                            M
                                                            A
                                                            X
                                                            ,
                                                            j
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            r
                                                            e
                                                            f
                                                            ,
                                                            t
                                                            M
                                                            A
                                                            X
                                                            ,
                                                            j
                                                         
                                                      
                                                   
                                                
                                                100
                                                +
                                                
                                                   
                                                      w
                                                   
                                                   
                                                      2
                                                   
                                                
                                                
                                                   
                                                      e
                                                   
                                                   
                                                      R
                                                      M
                                                      S
                                                      ,
                                                      j
                                                   
                                                
                                             
                                             )
                                          
                                       
                                    
                                 
                              

Check of the constraints. Unfeasible solutions are penalized with a large penalty factor. The considered constraints are the maximum yaw moment and yaw rate error.

Check of the system stability. The poles of the closed-loop transfer function 
                                    r
                                    /
                                    δ
                                 , obtained through linearization of the non-linear model for specific operating points, are computed. Stability is evaluated at each iteration, if the system results unstable in a single integration step the solution is considered unfeasible and is assigned a large penalty factor.

Selection of the best position of each particle and the best position of the whole swarm till the current iteration.

Update of the particle velocities and positions according to Eqs. (12) and (13) within the allowed range.

@&#EXPERIMENTAL RESULTS@&#

In order to evaluate the actual change of the vehicle cornering behavior with the different driving modes, steady-state circular driving tests were carried out according to ISO standard 4138 [39]. During these tests, the driver progressively increases vehicle speed, and simultaneously adjusts the steering wheel input in order to make the vehicle follow a circular trajectory. The outputs of these tests are the steady-state characteristics (as the vehicle operating conditions are changing very slowly) of the vehicle, for example expressed in terms of understeer characteristic (steering wheel angle as a function of lateral acceleration), sideslip characteristic (sideslip angle as a function of lateral acceleration), roll characteristic (roll angle as a function of lateral acceleration), control yaw moment characteristic (control yaw moment as a function of lateral acceleration) and drivetrain input power characteristic (drivetrain input power as a function of lateral acceleration).

The results of 
                        Fig. 13 confirm the expected targets. For example, when the vehicle is in ‘sport mode’, the understeer gradient is lower than for the baseline vehicle. For 3m/s2<
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                        <5m/s2, the average understeer gradient is less than 0.5degs2/m in ‘sport mode’ and about 2degs2/m for the baseline vehicle. The linear region of the characteristic is also extended, since the understeer characteristic in ‘sport mode’ is almost flat up to 8m/s2. The maximum lateral acceleration in ‘sport mode’ is increased by more than 1m/s2 with respect to the baseline vehicle, which represents a major achievement. For the vehicle in ‘normal mode’, the cornering behavior resembles the baseline one, according to the design objectives. From the driver׳s perspective, the difference between the two driving modes is immediately perceivable even in normal driving conditions. In fact, in ‘sport mode’ the vehicle generates significantly higher values of lateral acceleration for the same steering wheel input (i.e., the vehicle is more reactive), thus enhancing the ‘fun-to-drive’ aspect.


                        
                        Fig. 14 shows that 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                         is the predominant contribution of the control yaw moment during the skid-pad maneuver. The feedback contribution, 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 B
                              
                           
                        , remains negligible up to values of 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                         larger than 8m/s2, which is an excellent result, especially considering that the look-up tables of 
                           
                              
                                 M
                              
                              
                                 Z
                              
                              
                                 F
                                 F
                              
                           
                         produced by the off-line optimization procedure were directly implemented on the vehicle without further fine tuning. Moreover, based on the full set of test results, the design methodology of the feedforward yaw moment presented in Section 4.1 can be assumed to be experimentally validated.


                        
                        Fig. 15 highlights another important finding of this study. The electric power consumption during cornering reduces with the reduction of the understeer gradient through torque-vectoring. This behavior is due to the tire slip which is the largest power loss contribution at medium and large values of 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                         
                        [13]. In the baseline vehicle the vertical load variation between the inner and outer wheels with the same drivetrain torque is the cause of a substantial difference in the slip ratios. On the other hand, with the reduction of the understeer gradient, typical of the ‘sport mode’, a more even distribution of lateral and longitudinal tire slips can be achieved as more traction force is given to the tires with higher vertical load, and, hence, the overall tire slip losses are reduced. In this particular case study test, the average reduction of 
                           
                              
                                 P
                              
                              
                                 i
                                 n
                              
                           
                         is about 3% for 1m/s2<
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                        <8m/s2. Above 8m/s2, the same values of 
                           
                              
                                 P
                              
                              
                                 i
                                 n
                              
                           
                         allow the ‘sport mode’ vehicle to reach a lateral acceleration that is more than 1m/s2 greater than the baseline vehicle, which corresponds to a 5m/s higher velocity at R=30m.

Step-steer tests were carried out according to the ISO standard 7401 [40] by applying a fast steering wheel input (in a repeatable way for the different driving modes) from 0 deg to 150 deg (at a steering wheel rate of approximately 500deg/s), with an initial vehicle speed of 50km/h and by keeping a constant wheel torque demand. During the step steer the wheel torque demand is automatically set, through the dSPACE AutoBox (Fig. 1), at the level required to keep the vehicle at the constant speed of 50km/h in straightline conditions. According to this test procedure, the driver has to maintain the accelerator pedal in fully depressed position to indicate that the operating condition is safe, even if the actual torque demand is imposed through the dSPACE. As a safety feature during the experiments, the wheel torque demand returns back to the driver׳s control if the driver reduces the displacement of the accelerator pedal. As significant lateral tire slip power losses occur after the steering wheel angle application, the vehicle velocity reduces during the test.

The time histories of 
                           r
                           
                         and 
                           
                              
                                 M
                              
                              
                                 Z
                              
                           
                         are reported in 
                        Fig. 16, with the main performance indicators summarized in 
                        Table 3. The yaw rate overshoot is defined as 100 (
                           
                              
                                 r
                              
                              
                                 M
                                 A
                                 X
                              
                           
                           −
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 t
                                 M
                                 A
                                 X
                              
                           
                        )/
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 t
                                 M
                                 A
                                 X
                              
                           
                        , with 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 t
                                 M
                                 A
                                 X
                              
                           
                         being the value of 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                              
                           
                         at the time the peak value of yaw rate, 
                           
                              
                                 r
                              
                              
                                 M
                                 A
                                 X
                              
                           
                        , is achieved. The overshoot is a relevant indicator of vehicle safety in transient conditions, and is significantly reduced by the torque-vectoring controller; from more than 45% for the baseline vehicle to 19% and 25%, respectively, for the ‘sport mode’ and the ‘normal mode’.

In both driving modes the yaw moment controller is very effective in reducing the time delay between the reference yaw rate and the actual yaw rate during the fast steering wheel input application, which contributes to enhancing the ‘fun-to-drive’ aspect. The delay is assessed for 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                              
                           
                           =
                           10
                           
                           deg
                           /
                           s
                         and 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                              
                           
                           =
                           20
                           
                           deg
                           /
                           s
                        , corresponding to the delay values 
                           
                              
                                 t
                              
                              
                                 D
                              
                           
                           
                              
                                 |
                              
                              
                                 10
                                 
                                 deg
                                 /
                                 s
                              
                           
                         and 
                           
                              
                                 t
                              
                              
                                 D
                              
                           
                           
                              
                                 |
                              
                              
                                 20
                                 
                                 deg
                                 /
                                 s
                              
                           
                         in Table 3, which are lower by at least 20% for the controlled vehicles, in both ‘sport mode’ and ‘normal mode’. The Root Mean Square (RMS) value of the yaw rate error, 
                           
                              
                                 e
                              
                              
                                 R
                                 M
                                 S
                              
                           
                        , calculated for the 2s following the steering wheel angle application, is halved by the torque-vectoring controller. For the baseline vehicle, this value is computed with the yaw rate reference of the ‘normal mode’. Fig. 16 shows that 
                           
                              
                                 M
                              
                              
                                 Z
                              
                           
                         remains significant even after the completion of the transient part of the maneuver for the vehicle in ‘sport mode’, because of the required feedforward contribution to make the vehicle follow the reference understeer characteristic, different from the one of the baseline vehicle.

In general, for the same steering wheel angle and vehicle velocity, the vehicle in ‘sport mode’ requires more input power than the vehicle in ‘normal mode’, because of the higher lateral acceleration values, even if for the same 
                           
                              
                                 a
                              
                              
                                 y
                              
                           
                         (corresponding to a lower value of 
                           δ
                         in ‘sport mode’ than for the ‘normal mode’) less power is required, as discussed for the skid-pad test results. During the specific step-steer, the initial yaw moment transient of the ‘sport mode’ provokes a significantly higher peak of 
                           
                              
                                 P
                              
                              
                                 i
                                 n
                              
                           
                         (
                        Fig. 17).


                        
                        Fig. 18 shows the magnitude of the experimental yaw rate frequency response characteristic, 
                           r
                           /
                           δ
                        , of the baseline vehicle and the controlled vehicle with the two driving modes. The results were obtained from a sequence of sinusoidal tests with an amplitude of the steering wheel input of 50 deg at a vehicle velocity of 50km/h. The response of the baseline vehicle is characterized by the typical peak corresponding to the first resonance frequency of the system, which is an indicator of underdamped response and potential yaw rate oscillations in transient conditions. The response of the controlled vehicles has a steady-state gain corresponding to the respective reference understeer characteristic, and a substantially flat magnitude as a function of frequency without the peak, which represents a benefit of the torque-vectoring controller. The roll-off of the frequency response characteristic at high frequency for the controlled vehicle can be tuned through the transfer function from 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                              
                           
                         to 
                           
                              
                                 r
                              
                              
                                 r
                                 e
                                 f
                                 ,
                                 S
                              
                           
                        , discussed in Section 3.2.

@&#CONCLUSIONS@&#

This paper presented and demonstrated with vehicle tests an easily implementable torque-vectoring control structure for fully electric vehicles with multiple drivetrains, allowing different driving modes for cornering conditions. The main achievements are:
                        
                           •
                           A design methodology of the non-linear steady-state feedforward contribution of the vehicle yaw moment, including pre-assessment of the feasibility of the reference vehicle behavior through a quasi-static vehicle model. The procedure permits the predictable modification of the vehicle understeer characteristic according to the required vehicle cornering behavior, defined in a set of driving modes selectable by the driver.

The demonstration of the possibility of defining radically different driving modes, corresponding to sets of understeer characteristics, which can be implemented through the control of the same drivetrain hardware and selected by the driver.

The analysis of the impact of lateral acceleration and the shape of the vehicle understeer characteristic on the input power to the electric drivetrain. A reduction of the understeer gradient in traction reduces the battery power demand for the same value of lateral acceleration.

The models adopted for the automated tuning of the controller were validated against results obtained on a two-wheel-drive fully electric vehicle demonstrator. The performance of the controller was experimentally assessed in steady-state and transient cornering conditions. The results show an excellent tracking performance of the reference understeer characteristics in steady-state conditions, achieved through the feedforward contribution of the yaw moment controller, and a safe damping of the yaw rate oscillations during transients, obtained through the intervention of the feedback contribution.

Further developments of this research work will consist of a comprehensive set of tests with a larger variety of maneuvers and vehicle conditions, including the full exploitation of the torque-vectoring potential through a four-wheel-drive vehicle demonstrator.

@&#ACKNOWLEDGMENTS@&#

The research leading to these results has received funding from the European Union Seventh Framework Programme 
                  FP7/2007-2013 under Grant agreement no. 284708.

@&#REFERENCES@&#

