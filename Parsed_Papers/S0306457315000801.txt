@&#MAIN-TITLE@&#Statistical comparisons of non-deterministic IR systems using two dimensional variance

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We propose methods to compare non-deterministic IR systems.


                        
                        
                           
                           We show pitfalls in using standard significance tests to compare such systems.


                        
                        
                           
                           We verify the applicability of proposed methods using simulations and a case study.


                        
                        
                           
                           We show how to compare a non-deterministic IR system for equivalent effectiveness.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Information retrieval evaluation

Non-determinism

Randomization

Statistical analysis

Distributed IR

Personalised web search

@&#ABSTRACT@&#


               
               
                  Retrieval systems with non-deterministic output are widely used in information retrieval. Common examples include sampling, approximation algorithms, or interactive user input. The effectiveness of such systems differs not just for different topics, but also for different instances of the system. The inherent variance presents a dilemma – What is the best way to measure the effectiveness of a non-deterministic IR system? Existing approaches to IR evaluation do not consider this problem, or the potential impact on statistical significance. In this paper, we explore how such variance can affect system comparisons, and propose an evaluation framework and methodologies capable of doing this comparison.
                  Using the context of distributed information retrieval as a case study for our investigation, we show that the approaches provide a consistent and reliable methodology to compare the effectiveness of a non-deterministic system with a deterministic or another non-deterministic system. In addition, we present a statistical best-practice that can be used to safely show how a non-deterministic IR system has equivalent effectiveness to another IR system, and how to avoid the common pitfall of misusing a lack of significance as a proof that two systems have equivalent effectiveness.
               
            

@&#INTRODUCTION@&#

The output of IR systems can be non-deterministic. This can be due to the use of sampling in randomized algorithms (Aly, Hiemstra, & Demeester, 2013; Callan & Connell, 2001; Callan, Connell, & Du, 1999; Kulkarni & Callan, 2010; Shokouhi, 2007; Si & Callan, 2003, 2004, 2005; Thomas & Shokouhi, 2009), or training based on user input (Finkelstein et al., 2001; Lawrence, 2000; Liu, Yu, & Meng, 2004). Evaluating the effectiveness of these systems can be difficult because each run can produce a different IR system instance, hence different results and effectiveness scores. Fig. 1
                      illustrates this situation. How can the effectiveness of an IR system be measured if each run can produce a different output?

An evaluation based on a single instance of an IR system may produce results which can change an experimental conclusion of whether one IR system has better effectiveness than another. The obvious solution is to generate many system instances and make statistically grounded inferences about the overall average effectiveness.

Experiments in IR add another layer of complexity to the problem as retrieval effectiveness varies by topic (Voorhees & Buckley, 2002). Recall that the effectiveness of an IR system instance is characterized and compared using average effectiveness under whatever evaluation metric is employed across a set of topics. Differences are tested for statistical significance across a hypothetical population of topics using a significance test. However, standard significance tests only support one source of variability, in this instance the choice of topics. The use of non-deterministic IR systems introduces an additional dimension of variability. So, how can we determine that one IR system is significantly better than another when averaging across all topics and all possible IR system instantiations?

In order to understand the uncertainty due to variability in more than one dimension, consider the following simulation. We consider the effectiveness of each topic on each non-deterministic IR system instance as composed of two effects. First, we randomly sample the “topical effect” between 0 and 1 from a uniform distribution for each topic. Next, we realize the effect due to non-determinism in the system capped between 0 and 1 from a normal distribution 
                        
                           N
                           (
                           μ
                           ,
                           
                              
                                 σ
                              
                              
                                 2
                              
                           
                           )
                        
                     . Now assume that the simulated effectiveness for each topic on each system instance is the Euclidean distance (
                        
                           
                              
                                 L
                              
                              
                                 2
                              
                           
                        
                      
                     norm)
                        1
                        The Euclidean distance (
                              
                                 
                                    
                                       L
                                    
                                    
                                       2
                                    
                                 
                              
                            norm) is the square root of the sum of the squares of each effect.
                     
                     
                        1
                      between the two effects, normalized to a value between 0 and 1. Consider another synthetic system with a deterministic output. We randomly sample the effectiveness between 0 and 1 for each topic from a uniform distribution for the deterministic system. For the simulation, we sample two sets of 50 topical effects, one for each system being compared and 100 system instances for a given μ and σ from the respective distributions. We then compare the effectiveness for each system instance with the deterministic system using a standard t-test, and note the mean of the number of significant differences over 100 repetitions of the above process as μ and σ are varied. This is equivalent to repeatedly comparing an instance of a non-deterministic IR system having two dimensional variance with a deterministic IR system. The results are illustrated in Fig. 2
                     . The expected effectiveness for the deterministic system is 0.5. Similarly, the expected effectiveness for the non-deterministic IR system is 0.5 when μ is 0.5. Therefore, the majority of comparisons show no significant difference when μ is 0.5 with a small σ. When the standard deviation is increased, the majority of the comparisons with a μ less than 0.5 are not significantly different. However, a comprehensive analysis of the impact on a standard significance test due to variation in system instance effect for a non-deterministic IR system is not possible with the above simple simulation. The take home message from the simulation is that all comparisons derive the same conclusion when number of significant differences are 0 (darkest grey) or 100 (lightest grey). An intermediate shade of grey implies that conclusions derived using some instances contradict the conclusions from the rest of the instances when using the same non-deterministic IR system. For example, 50% of the comparisons show no significant difference at the centre of the grey scale, while the rest imply the opposite. So the gradual hill climbing pattern (from lightest grey to darkest grey) of the graph implies that experimental conclusions derived with certain system instances can be contradicted by the others and exemplifies the pitfalls in using standard significance tests to compare non-deterministic IR systems.

In this paper, we extend our prior work on non-deterministic system evaluation (Jayasinghe, Webber, Sanderson, Dharmasena, & Culpepper, 2014). In our previous work, we used a linear model to evaluate non-deterministic IR systems, and a limited case study using a single evaluation metric (NDCG@10) on the TREC GOV2 dataset was presented. In this work, we include an alternative evaluation methodology based on the bootstrap, and show that the two evaluation methodologies produce similar conclusions. We also demonstrate the applicability of proposed solutions using a simulation in addition to the original case study. We also extend coverage to include more evaluation metrics (NDCG@10, P@10, MAP) and two different test collections (TREC GOV2, and ClueWeb ’09B).


                        
                           
                              1.
                              We propose a pair of methodologies, bootstrapping (Section 3.1.1) and multivariate linear modelling (Section 3.1.2) to solve the two-dimensional significance testing problem of comparing a non-deterministic IR system with a deterministic IR system. Both methods result in equivalent inferences (Sections 4 and 5.2).

We extend the multivariate linear modelling approach to support the comparison of two non-deterministic IR systems (Section 3.2).

We verify the applicability of the solutions in real world scenarios using a case study of common sampling algorithms – shard construction and centralized resource allocation in distributed IR (Kulkarni & Callan, 2010; Si & Callan, 2003) (Section 5).

We present a methodology for comparing a non-deterministic IR system for equivalent or greater effectiveness with either a deterministic or another non-deterministic IR system using a two dimensional evaluation (Section 5.4).

@&#BACKGROUND@&#

Since the early 1960s, researchers in the IR community have benefited greatly from sharing test collections. A collection typically is composed of documents, test topics, and relevance judgments. Using these collections, IR systems can be compared by calculating the effectiveness of each system using a common metric such as MAP or NDCG. However, proving that one system is “better” than any other simply on the basis of achieving a higher effectiveness score on a collection is not as straightforward as it might initially seem. The subtle differences in average score might just be coincidental to the particular set of topics selected, and may not hold across the full population of possible queries and topics. In response, IR research has adopted the practice of hypothesis testing.

Let 
                           
                              
                                 
                                    a
                                 
                                 
                                    n
                                 
                              
                           
                         and 
                           
                              
                                 
                                    b
                                 
                                 
                                    n
                                 
                              
                           
                         be the effectiveness measured using an evaluation metric for topic 
                           
                              
                                 
                                    t
                                 
                                 
                                    n
                                 
                              
                           
                         on System 
                           
                              A
                           
                         and System 
                           
                              B
                           
                         for a random sample of N topics. Given that System 
                           
                              A
                           
                         has achieved a higher average effectiveness score than System 
                           
                              B
                           
                         on the sample of topics, the hypothesis test determines the confidence that a similar behaviour is observed across the population of all topics. This question is answered by setting two hypotheses: 
                           
                              
                                 
                                    H
                                 
                                 
                                    0
                                 
                              
                           
                        , called the null hypothesis, assumes the two systems have equal effectiveness across the population of topics; 
                           
                              
                                 
                                    H
                                 
                                 
                                    1
                                 
                              
                           
                        , called the alternative hypothesis, assumes they are not equal.
                           
                              (1)
                              
                                 
                                    
                                       H
                                    
                                    
                                       0
                                    
                                 
                                 :
                                 
                                    
                                       M
                                    
                                    
                                       A
                                    
                                 
                                 =
                                 
                                    
                                       M
                                    
                                    
                                       B
                                    
                                 
                              
                           
                        
                        
                           
                              (2)
                              
                                 
                                    
                                       H
                                    
                                    
                                       1
                                    
                                 
                                 :
                                 
                                    
                                       M
                                    
                                    
                                       A
                                    
                                 
                                 
                                 ≠
                                 
                                 
                                    
                                       M
                                    
                                    
                                       B
                                    
                                 
                                 .
                              
                           
                        Here, 
                           
                              M
                           
                         is the average effectiveness for the population of topics. The question then is: If the null hypothesis 
                           
                              
                                 
                                    H
                                 
                                 
                                    0
                                 
                              
                           
                         were true (that is, the two systems have hypothetically equal mean effectiveness), how likely would the difference in effectiveness observed in the sample be due to the chance of random sampling? The likelihood of two systems being hypothetically equal is known as the p-value of the test. Precisely how the p-value is calculated differs from test to test, but the basic idea is to compare the observed average difference (Δ) against the observed variability in per-topic score differences. A p-value below a commonly accepted level of significance (α) implies a systematic difference that cannot be attributed purely to the chance in selection of topics. So, the null hypothesis is rejected and the alternative hypothesis is accepted. Conversely, a larger p-value fails to reject the null hypothesis and therefore the difference is not statistically significant. However, failing to reject the null hypothesis is not the same as accepting it. Common levels of significance are 0.1, 0.05, and 0.01.

Commonly used approaches for hypothesis testing of IR systems include Student’s paired t-test, the bootstrap test (Efron, 1979, 1982; Efron & Tibshirani, 1993; Sakai, 2006; Savoy, 1997), the multivariate linear model test (Carterette, 2011), the sign test, the Wilcoxon signed rank test (Wilcoxon, 1945), and Fisher’s randomization test (Fisher, 1935). Next, we summarize the use of these approaches.

Recall that a significance test compares the difference in effectiveness between two IR systems against the variability in per-topic score differences. This is achieved with a Student’s paired t-test as follows. Let 
                              
                                 
                                    
                                       z
                                    
                                    
                                       n
                                    
                                 
                                 =
                                 (
                                 
                                    
                                       a
                                    
                                    
                                       n
                                    
                                 
                                 -
                                 
                                    
                                       b
                                    
                                    
                                       n
                                    
                                 
                                 )
                              
                            be the difference in effectiveness for the 
                              
                                 n
                                 ·
                                 th
                              
                            topic between System 
                              
                                 A
                              
                            and System 
                              
                                 B
                              
                           , and 
                              
                                 z
                                 =
                                 [
                                 
                                    
                                       z
                                    
                                    
                                       n
                                    
                                 
                                 ]
                              
                           . A student’s paired t-test computes a test statistic as follows:
                              
                                 (3)
                                 
                                    t
                                    (
                                    z
                                    )
                                    =
                                    
                                       
                                          
                                             
                                                z
                                             
                                             
                                                ‾
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            σ
                                                         
                                                         
                                                            ̂
                                                         
                                                      
                                                   
                                                   
                                                      z
                                                   
                                                   
                                                      2
                                                   
                                                
                                                /
                                                N
                                             
                                          
                                       
                                    
                                    ,
                                 
                              
                           where 
                              
                                 
                                    
                                       z
                                    
                                    
                                       ‾
                                    
                                 
                              
                            is the mean of z, and 
                              
                                 
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             ̂
                                          
                                       
                                    
                                    
                                       z
                                    
                                    
                                       2
                                    
                                 
                              
                            is the variance estimated as follows:
                              
                                 (4)
                                 
                                    
                                       
                                          
                                             
                                                σ
                                             
                                             
                                                ̂
                                             
                                          
                                       
                                       
                                          z
                                       
                                       
                                          2
                                       
                                    
                                    =
                                    
                                       
                                          1
                                       
                                       
                                          N
                                          -
                                          1
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             i
                                             =
                                             1
                                          
                                          
                                             N
                                          
                                       
                                    
                                    
                                       
                                          (
                                          
                                             
                                                z
                                             
                                             
                                                i
                                             
                                          
                                          -
                                          
                                             
                                                z
                                             
                                             
                                                ¯
                                             
                                          
                                          )
                                       
                                       
                                          2
                                       
                                    
                                    .
                                 
                              
                           The test statistic can be used to derive the p-value from the t distribution with 
                              
                                 N
                                 -
                                 1
                              
                            degrees of freedom.


                           
                              Algorithm 1
                              Bootstrap algorithm for comparing two deterministic IR systems. 
                                    
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         BS
                                                         
                                                         ←
                                                      
                                                   
                                                   Number of bootstrap samples;
                                             
                                             
                                                
                                                   
                                                      
                                                         N
                                                         
                                                         ←
                                                      
                                                   
                                                   Number of topics;
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               n
                                                            
                                                         
                                                         
                                                         ←
                                                      
                                                   
                                                   Vector of scores for IR System 
                                                      
                                                         A
                                                      
                                                    on the 
                                                      
                                                         n
                                                         ·
                                                         th
                                                      
                                                    topic, where 
                                                      
                                                         n
                                                         =
                                                         1
                                                         ,
                                                         …
                                                         ,
                                                         N
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               b
                                                            
                                                            
                                                               n
                                                            
                                                         
                                                         
                                                         ←
                                                      
                                                   
                                                   Vector of scores for IR System 
                                                      
                                                         B
                                                      
                                                    on the 
                                                      
                                                         n
                                                         ·
                                                         th
                                                      
                                                    topic, where 
                                                      
                                                         n
                                                         =
                                                         1
                                                         ,
                                                         …
                                                         ,
                                                         N
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                
                                             
                                             
                                                // Compute 
                                                      
                                                         t
                                                         (
                                                         z
                                                         )
                                                      
                                                   .
                                             
                                             
                                                
                                                   
                                                      
                                                         z
                                                         ←
                                                         [
                                                         (
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               b
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         )
                                                         ,
                                                         …
                                                         ,
                                                         (
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               N
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               b
                                                            
                                                            
                                                               N
                                                            
                                                         
                                                         )
                                                         ]
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                      
                                                         t
                                                         (
                                                         z
                                                         )
                                                         ←
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               ‾
                                                            
                                                         
                                                         /
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           σ
                                                                        
                                                                        
                                                                           ̂
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     z
                                                                  
                                                                  
                                                                     2
                                                                  
                                                               
                                                               /
                                                               N
                                                            
                                                         
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                
                                             
                                             
                                                // Compute p-value.
                                             
                                             
                                                
                                                   
                                                      
                                                         count
                                                         ←
                                                         0
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                      
                                                         bootstrap
                                                         _
                                                         samples
                                                         ←
                                                         [
                                                         
                                                         ]
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                      
                                                         total
                                                         _
                                                         shift
                                                         ←
                                                         0
                                                      
                                                   ;
                                             
                                             
                                                
                                                   for 
                                                   
                                                      
                                                         i
                                                         =
                                                         1
                                                      
                                                    to BS 
                                                   do
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ←
                                                      
                                                    Resample N items with replacement from 
                                                      
                                                         z
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         bootstrap
                                                         _
                                                         samples
                                                         .
                                                         append
                                                         (
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         )
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         total
                                                         _
                                                         shift
                                                         ←
                                                         total
                                                         _
                                                         shift
                                                         +
                                                         mean
                                                         (
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         )
                                                      
                                                   ;
                                             
                                             
                                                
                                                   end
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         shift
                                                         ←
                                                         total
                                                         _
                                                         shift
                                                         /
                                                         BS
                                                      
                                                   ;
                                             
                                             
                                                
                                                   for 
                                                   
                                                      
                                                         i
                                                         =
                                                         1
                                                      
                                                    
                                                   to BS 
                                                   do
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ←
                                                         bootstrap
                                                         _
                                                         samples
                                                         [
                                                         i
                                                         ]
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   for 
                                                   
                                                      
                                                         n
                                                         =
                                                         1
                                                      
                                                    to N 
                                                   do
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         [
                                                         n
                                                         ]
                                                         ←
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         [
                                                         n
                                                         ]
                                                         -
                                                         shift
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   end
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         t
                                                         (
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         )
                                                         ←
                                                         
                                                            
                                                               
                                                                  
                                                                     z
                                                                  
                                                                  
                                                                     ‾
                                                                  
                                                               
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         /
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           σ
                                                                        
                                                                        
                                                                           ̂
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           z
                                                                        
                                                                        
                                                                           i
                                                                        
                                                                        
                                                                           ∗
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     2
                                                                  
                                                               
                                                               /
                                                               N
                                                            
                                                         
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   if 
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  t
                                                                  (
                                                                  
                                                                     
                                                                        z
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                     
                                                                        ∗
                                                                     
                                                                  
                                                                  )
                                                               
                                                            
                                                         
                                                         ⩾
                                                         
                                                            
                                                               
                                                                  t
                                                                  (
                                                                  z
                                                                  )
                                                               
                                                            
                                                         
                                                      
                                                    
                                                   then
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         count
                                                         ←
                                                         count
                                                         +
                                                         1
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   end
                                                
                                             
                                             
                                                
                                                   end
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         p
                                                         _
                                                         value
                                                         ←
                                                         count
                                                         /
                                                         BS
                                                      
                                                   ;
                                             
                                          
                                       
                                    
                                 
                              

An alternative is to empirically estimate the p-value using evidence gathered from a sample. A bootstrap approach for comparing two IR systems (
                              
                                 A
                              
                            and 
                              
                                 B
                              
                           ) for mean effectiveness with pairing by topic is shown in Algorithm 1. The test creates BS bootstrap samples of size similar to the original sample by repeatedly resampling with replacement. The bootstrap samples are then recentered by deducting the mean of bootstrap samples from each value in the bootstrap samples. So, the recentered samples can be assumed to be from two equivalently effective systems. In prior literature bootstrap samples have been recentered by deducting the mean of the original sample from each element in bootstrap samples (Sakai, 2006). However, this approach could produce a bias equal to the difference between the mean of the mean estimates derived from bootstrap samples and the single mean estimate obtained from the original sample. Therefore, the bootstrap samples are recentered in the manner shown in Algorithm 1 to obtain a bias-corrected estimate of the statistic. Now the evidence for the null hypothesis can be observed by comparing individual recentered bootstrap samples with the original sample. Let 
                              
                                 t
                                 (
                                 z
                                 )
                              
                            and 
                              
                                 t
                                 (
                                 
                                    
                                       z
                                    
                                    
                                       i
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                              
                            be the t-statistic for the original and the 
                              
                                 i
                                 ·
                                 th
                              
                            recentered bootstrap samples. (Use of the t statistic makes this known as a Studentized bootstrap.) Given a probability function 
                              
                                 p
                              
                           , the p-value is computed as:
                              
                                 (5)
                                 
                                    p
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      t
                                                      (
                                                      
                                                         
                                                            z
                                                         
                                                         
                                                            ∗
                                                         
                                                      
                                                      )
                                                   
                                                
                                             
                                             ⩾
                                             
                                                
                                                   
                                                      t
                                                      (
                                                      z
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        

Another approach for testing significance is through linear modelling. When comparing two IR systems, the following linear regression model is applied:
                              
                                 (6)
                                 
                                    
                                       
                                          y
                                       
                                       
                                          ℓ
                                          n
                                       
                                    
                                    =
                                    γ
                                    +
                                    
                                       
                                          s
                                       
                                       
                                          ℓ
                                       
                                    
                                    +
                                    
                                       
                                          t
                                       
                                       
                                          n
                                       
                                    
                                    +
                                    
                                       
                                          ε
                                       
                                       
                                          ℓ
                                          n
                                       
                                    
                                    .
                                 
                              
                           Here, 
                              
                                 
                                    
                                       y
                                    
                                    
                                       ℓ
                                       n
                                    
                                 
                              
                            is the effectiveness of system 
                              
                                 ℓ
                              
                            on topic n and variance is assumed to come solely from the selection of topics. The effectiveness due to the two factors or effects is modelled as: the system effect 
                              
                                 
                                    
                                       s
                                    
                                    
                                       ℓ
                                    
                                 
                              
                            (the effectiveness of one system relative to the other system) which has two levels for systems 
                              
                                 A
                              
                            and 
                              
                                 B
                              
                           , and the topic effect 
                              
                                 
                                    
                                       t
                                    
                                    
                                       n
                                    
                                 
                              
                            which has N levels, one for each topic (the difficulty of the topic relative to all other topics). The intercept in the model, γ, is the average effectiveness of all systems across all topics, and 
                              
                                 
                                    
                                       ε
                                    
                                    
                                       ℓ
                                       n
                                    
                                 
                              
                            is the residual or error term that accounts for the deviation of the observed effectiveness. The p-value for the system effect can either be computed using the t-statistic derived from 
                              
                                 
                                    
                                       Δ
                                    
                                    
                                       
                                          
                                             s
                                          
                                          
                                             ℓ
                                          
                                       
                                    
                                 
                                 /
                                 
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             2
                                          
                                       
                                       /
                                       N
                                    
                                 
                              
                            or from ANOVA which follows a Student’s t distribution with 
                              
                                 N
                                 -
                                 1
                              
                            degrees of freedom. Here 
                              
                                 
                                    
                                       Δ
                                    
                                    
                                       
                                          
                                             s
                                          
                                          
                                             ℓ
                                          
                                       
                                    
                                 
                              
                            is the difference between the two system effects, 
                              
                                 
                                    
                                       σ
                                    
                                    
                                       2
                                    
                                 
                              
                            is the variance of the residuals, and N is the number of topics.

Alternatively, the same can be modelled using a linear mixed effect (LME) model, consisting of fixed (non-random) and random effects (Carterette, Kanoulas, & Yilmaz, 2011; Robertson & Kanoulas, 2012). For this scenario, sampled topics produce a random effect, and systems produce a fixed effect. As we will see later, LME can be used to build complex models that capture repeated measurements and hierarchical grouping. For large samples, the p-value can be computed from a t-statistic obtained from LME with 
                              
                                 N
                                 -
                                 f
                              
                            degrees of freedom, where f is the number of fixed effect parameters (
                              
                                 f
                                 =
                                 1
                              
                            for the above scenario) (Baayen, Davidson, & Bates, 2008).

Another way to compute the p-value is to use Bayesian inference and Markov Chain Monte Carlo (MCMC) simulations (Baayen et al., 2008). MCMC sampling can be derived from the posterior probabilities of the parameter subsets of the LME model (σ, parameters defining the variance–covariance for random effects, and fixed and random effects). The posterior probability distributions are produced with repeated and cyclic sampling from each parameter subset conditioned on the other two parameter subsets and on the data, thus making variance of all other parameter subsets reflect the variance for each parameter subset. For this process of sampling a Markov chain is used, so that the sampling spends more effort on regions of most importance (Andrieu, De Freitas, Doucet, & Jordan, 2003). The posterior distribution of the fixed system effect factor is expected to follow at least a near symmetric normal distribution which can be used to compute the p-value. Deriving the posterior distribution also allows us to obtain the highest posterior density (HPD) interval which is analogous to the standard confidence interval. A 
                              
                                 ϑ
                                 %
                              
                            HPD interval represents the shortest interval enclosing 
                              
                                 (
                                 1
                                 -
                                 ϑ
                                 )
                                 %
                              
                            of the posterior probability mass of the distribution. Therefore, the HPD interval is considered a better representation than a standard error interval (Chen & Shao, 1999).

All of the significance testing approaches discussed so far assume an IR system with a deterministic output, where only one observation exists per topic. Carterette et al. (2011) and Robertson and Kanoulas (2012) observed that the measured effectiveness for the same topic on the same IR system can vary under varying experimental conditions leading to repeated observations along a single dimension.

Topical variance can be thought of as combining two components: first, measurement or model error; and second, the fact that some systems do better on some topics than others (both systems and topics). If we only have one observation per topic, we cannot separate these two factors; but if we have repeated observations, the two factors can be separately estimated. Taking system effect as fixed, and topic and system–topic interaction effects as random, the above can be modelled with LME, as follows:
                              
                                 (7)
                                 
                                    
                                       
                                          y
                                       
                                       
                                          ℓ
                                          ni
                                       
                                    
                                    =
                                    γ
                                    +
                                    
                                       
                                          s
                                       
                                       
                                          ℓ
                                       
                                    
                                    +
                                    
                                       
                                          t
                                       
                                       
                                          n
                                       
                                    
                                    +
                                    
                                       
                                          st
                                       
                                       
                                          ℓ
                                          n
                                       
                                    
                                    +
                                    
                                       
                                          ε
                                       
                                       
                                          ℓ
                                          ni
                                       
                                    
                                    .
                                 
                              
                           Here 
                              
                                 
                                    
                                       y
                                    
                                    
                                       ℓ
                                       ni
                                    
                                 
                              
                            is the effectiveness on the 
                              
                                 i
                                 ·
                                 th
                              
                            observation of system 
                              
                                 ℓ
                              
                            on topic 
                              
                                 n
                                 ,
                                 
                                 
                                    
                                       st
                                    
                                    
                                       ℓ
                                       n
                                    
                                 
                              
                            is the system-topic interaction effect, and 
                              
                                 
                                    
                                       ε
                                    
                                    
                                       ℓ
                                       ni
                                    
                                 
                              
                            represents the (random) error of a single observation. However, the model only makes sense if different observations on the same system-topic pair lead to different scores. In Robertson and Kanoulas (2012), this variability in system-topic scores is observed over different document sets, whereas in Carterette et al. (2011) the variability is in different user types. Our focus in this paper is on the added dimension of variability introduced by using a sampling-based algorithm or user feedback. Hence, variability exists in two dimensions, IR system instances and topics, with topical variation grouped within the IR system instances.

Statistical hypothesis testing only minimizes the uncertainty associated with a scientific conclusion, and has been surrounded by controversy for many years (Cohen, 1994). The main criticism is that p-values can be misinterpreted. For example, one may incorrectly consider failing to accept the alternative hypothesis as accepting null hypothesis. This potential problem is discussed in detail in Section 2.3.

An alternative solution relying on p-values is to use confidence intervals. A confidence interval for the differences in effectiveness for a set of topics that does not include zero implies a systematic difference between two systems at a predetermined level of confidence (
                              
                                 1
                                 -
                                 α
                              
                           ). Assessing the probability of two systems as being equal is not appropriate, as the performance of two systems will always have some differences. For example, the effectiveness of two IR systems will always be significantly different when two systems are compared across a huge number of topics. Hence, statistical significance should be reported with effect size, which quantifies the magnitude of the difference in average effectiveness.

The effect size (Cohen, 2013) can be computed as:
                           
                              (8)
                              
                                 effect
                                 
                                 size
                                 =
                                 
                                    
                                       
                                          
                                             z
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   σ
                                                
                                                
                                                   ̂
                                                
                                             
                                          
                                          
                                             z
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        The common rule of thumb when classifying effect size is: 0.8 and above is a large effect, 0.5–0.8 is a medium effect, and 0.2–0.5 is a small effect. An effect of less than 0.2 is considered negligible.

Systems are often required to be compared for similar effectiveness when sampling or approximation is used to increase efficiency. This is done to ensure that the efficiency gains do not harm the overall effectiveness of the system being evaluated. Hypothesis testing as described above cannot be used for such a comparison. In reality, the null hypothesis is a statistical straw man. Even when two systems are identical, using the failure of a statistical significance test to reject the null hypothesis as a proof for equivalence promotes bad practice. If the main goal is to find no significant difference between two systems, an experimentalist might be tempted to reduce the sample size. This minimizes the likelihood of finding any significant difference between the baseline and the new system and “justifies” the experimental objective. This is clearly the wrong approach.

The conclusion that two systems are equivalent can only be reached after seeing the population. Therefore, determining the (rough) similarity of the effectiveness of two systems using the performance observed for a sample of experimental units is not as straightforward as it might initially seem.

Inevitably, an average estimated on a sample is subject to variance, and hence uncertainty. Therefore, if hypothesis testing is used to recognize “statistically significant equivalence”, a better practice is to consider the least difference in mean performance, 
                           
                              δ
                           
                        , that one would consider as being consequential (Ahn, Park, & Lee, 2013; Walker & Nowacki, 2011). Here, 
                           
                              |
                              
                                 
                                    M
                                 
                                 
                                    A
                                 
                              
                              -
                              
                                 
                                    M
                                 
                                 
                                    B
                                 
                              
                              |
                              ⩾
                              δ
                           
                        , becomes the null hypothesis; and 
                           
                              |
                              
                                 
                                    M
                                 
                                 
                                    A
                                 
                              
                              -
                              
                                 
                                    M
                                 
                                 
                                    B
                                 
                              
                              |
                              <
                              δ
                           
                         is the alternative hypothesis. The null hypothesis, that is, is that the difference between the two systems (on the full population of topics) is consequential; if we reject this null hypothesis, we instead accept the alternative hypothesis, that any difference between the systems is inconsequential; that is, that they are approximately equal in their effectiveness. This process not only makes statistical sense, it also drives good practice – the experimentalist is encouraged to increase the sample size and thus the accuracy of the average estimates. The pros and cons of these two methods of testing for statistically significant equivalence are summarized in Table 1
                        .

The above principle can also be indirectly tested using confidence intervals. If the confidence interval is above 
                           
                              -
                              δ
                           
                         and below 
                           
                              δ
                           
                        , one can conclude that any difference between the two systems are not more than 
                           
                              δ
                           
                         at a given level of confidence. Hence, one method is not consequentially different than the other method.

In order to demonstrate the approach, we now present a simple simulation as a concrete example. Consider the case, where the mean effectiveness of 
                           
                              A
                           
                         and 
                           
                              B
                           
                         are equal, such that the expectation of 
                           
                              
                                 
                                    M
                                 
                                 
                                    A
                                 
                              
                              -
                              
                                 
                                    M
                                 
                                 
                                    B
                                 
                              
                           
                         is 0. Assume that the difference in effectiveness between the two systems for a synthetic set of topics is sampled from a normal distribution 
                           
                              N
                              (
                              0
                              ,
                              
                                 
                                    σ
                                 
                                 
                                    2
                                 
                              
                              )
                           
                        . Here the choice of 
                           
                              δ
                           
                         is defined by the user, and is problem dependent. The value should be set to the minimum difference in effectiveness that is considered consequential. Recall that a lower value of 
                           
                              α
                           
                         is preferred to show difference in effectiveness between two systems. Similarly a lower value of 
                           
                              δ
                           
                         is desired to demonstrate similarity between two systems. Although, potential values for 
                           
                              α
                           
                         are commonly accepted, no convention exists for 
                           
                              δ
                           
                        . The most appropriate value of 
                           
                              δ
                           
                         can depend on a number of other factors such as test collection and evaluation metric. For a more detailed discussion of parameter selection, see the recent work of Sakai (2014). In the remainder of this work, we use 
                           
                              δ
                              =
                              0.01
                           
                        .

The 95% confidence interval for increasing values of N is shown in Fig. 3
                        . A variation in confidence intervals is observed as values are sampled from 
                           
                              N
                              (
                              0
                              ,
                              
                                 
                                    σ
                                 
                                 
                                    2
                                 
                              
                              )
                           
                         in the simulation. Increasing the sample size causes the confidence intervals to narrow, and fit within 
                           
                              ±
                              δ
                           
                        . This exemplifies the encouraged behaviour of expanding the sample to find “statistically significant equivalence”. Next methodologies for comparing non-deterministic IR systems with a two dimensional variance for better effectiveness is discussed.

In this section, we present methodologies for comparing a non-deterministic system with a deterministic system, as well as with another non-deterministic system. We start with the deterministic – non-deterministic comparison.

We propose two novel significance tests to compare a non-deterministic IR system with a deterministic IR system next. One solution is an extension of the standard bootstrap test, and the other is based on multivariate linear modelling.


                           
                              Algorithm 2
                              Bootstrap algorithm for comparing a non-deterministic IR system with a deterministic IR system. 
                                    
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         BS
                                                         
                                                         ←
                                                      
                                                   
                                                   Number of bootstrap samples;
                                             
                                             
                                                
                                                   
                                                      
                                                         N
                                                         
                                                         ←
                                                      
                                                   
                                                   Number of topics;
                                             
                                             
                                                
                                                   
                                                      
                                                         M
                                                         
                                                         ←
                                                      
                                                   
                                                   Number of IR system instances;
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               n
                                                            
                                                            
                                                               m
                                                            
                                                         
                                                         
                                                         ←
                                                      
                                                   
                                                   Matrix of scores for the 
                                                      
                                                         m
                                                         ·
                                                         th
                                                      
                                                    IR system instance of the non-deterministic IR system a on the 
                                                      
                                                         n
                                                         ·
                                                         th
                                                      
                                                    topic, where 
                                                      
                                                         m
                                                         =
                                                         1
                                                         ,
                                                         …
                                                         ,
                                                         M
                                                      
                                                    and 
                                                      
                                                         n
                                                         =
                                                         1
                                                         ,
                                                         …
                                                         ,
                                                         N
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               b
                                                            
                                                            
                                                               n
                                                            
                                                         
                                                         
                                                         ←
                                                      
                                                   
                                                   Vector of scores of deterministic IR system 
                                                      
                                                         b
                                                      
                                                    on 
                                                      
                                                         n
                                                         ·
                                                         th
                                                      
                                                    topic, where 
                                                      
                                                         n
                                                         =
                                                         1
                                                         ,
                                                         …
                                                         ,
                                                         N
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                
                                             
                                             
                                                // Compute 
                                                      
                                                         t
                                                         (
                                                         z
                                                         )
                                                      
                                                    using mean effectiveness for each topic.
                                             
                                             
                                                
                                                   
                                                      
                                                         z
                                                         ←
                                                         [
                                                         
                                                         ]
                                                      
                                                   ;
                                             
                                             
                                                
                                                   for 
                                                   
                                                      
                                                         n
                                                         =
                                                         1
                                                      
                                                    to 
                                                      
                                                         N
                                                      
                                                    
                                                   do
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               mean
                                                            
                                                            
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     n
                                                                  
                                                               
                                                            
                                                         
                                                         ←
                                                         
                                                            
                                                               
                                                                  
                                                                     ∑
                                                                  
                                                                  
                                                                     m
                                                                     =
                                                                     1
                                                                  
                                                                  
                                                                     M
                                                                  
                                                               
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     n
                                                                  
                                                                  
                                                                     m
                                                                  
                                                               
                                                            
                                                            
                                                               M
                                                            
                                                         
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         z
                                                         [
                                                         n
                                                         ]
                                                         ←
                                                         
                                                            
                                                               mean
                                                            
                                                            
                                                               
                                                                  
                                                                     a
                                                                  
                                                                  
                                                                     n
                                                                  
                                                               
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               b
                                                            
                                                            
                                                               n
                                                            
                                                         
                                                      
                                                   ;
                                             
                                             
                                                
                                                   end
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         t
                                                         (
                                                         z
                                                         )
                                                         ←
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               ‾
                                                            
                                                         
                                                         /
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           σ
                                                                        
                                                                        
                                                                           ̂
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     z
                                                                  
                                                                  
                                                                     2
                                                                  
                                                               
                                                               /
                                                               N
                                                            
                                                         
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                
                                             
                                             
                                                // Compute p-value.
                                             
                                             
                                                
                                                   
                                                      
                                                         count
                                                         ←
                                                         0
                                                      
                                                   ;
                                             
                                             
                                                
                                                   for 
                                                   
                                                      
                                                         m
                                                         =
                                                         1
                                                      
                                                    to M 
                                                   do
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         z
                                                         ←
                                                         [
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               1
                                                            
                                                            
                                                               m
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               b
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         ,
                                                         …
                                                         ,
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               N
                                                            
                                                            
                                                               m
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               b
                                                            
                                                            
                                                               N
                                                            
                                                         
                                                         ]
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         bootstrap
                                                         _
                                                         samples
                                                         ←
                                                         [
                                                         ]
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         total
                                                         _
                                                         shift
                                                         ←
                                                         0
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   for 
                                                   
                                                      
                                                         i
                                                         =
                                                         1
                                                      
                                                    to BS 
                                                   do
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ←
                                                      
                                                    Resample N items with replacement from 
                                                      
                                                         z
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         bootstrap
                                                         _
                                                         samples
                                                         .
                                                         append
                                                         (
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         )
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         total
                                                         _
                                                         shift
                                                         ←
                                                         total
                                                         _
                                                         shift
                                                         +
                                                         mean
                                                         (
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         )
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   end
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         shift
                                                         ←
                                                         total
                                                         _
                                                         shift
                                                         /
                                                         BS
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   for 
                                                   
                                                      
                                                         i
                                                         =
                                                         1
                                                      
                                                    to BS 
                                                   do
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         ←
                                                         bootstrap
                                                         _
                                                         samples
                                                         [
                                                         i
                                                         ]
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   for 
                                                   
                                                      
                                                         n
                                                         =
                                                         1
                                                      
                                                    to 
                                                      
                                                         N
                                                      
                                                    
                                                   do
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         [
                                                         n
                                                         ]
                                                         ←
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         [
                                                         n
                                                         ]
                                                         -
                                                         shift
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   end
                                                
                                             
                                             
                                                
                                                   
                                                   
                                                      
                                                         t
                                                         (
                                                         
                                                            
                                                               z
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         )
                                                         ←
                                                         
                                                            
                                                               
                                                                  
                                                                     z
                                                                  
                                                                  
                                                                     ‾
                                                                  
                                                               
                                                            
                                                            
                                                               i
                                                            
                                                            
                                                               ∗
                                                            
                                                         
                                                         /
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           σ
                                                                        
                                                                        
                                                                           ̂
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           z
                                                                        
                                                                        
                                                                           i
                                                                        
                                                                        
                                                                           ∗
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     2
                                                                  
                                                               
                                                               /
                                                               N
                                                            
                                                         
                                                      
                                                   ;
                                             
                                             
                                                
                                                   
                                                   end
                                                
                                             
                                             
                                                
                                                   end
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         p
                                                         _
                                                         value
                                                         ←
                                                         count
                                                         /
                                                         (
                                                         BS
                                                         ×
                                                         M
                                                         )
                                                      
                                                   ;
                                             
                                          
                                       
                                    
                                 
                              


                           Algorithm 2 presents the bootstrap based approach for comparing a non-deterministic IR system with a deterministic IR system. The principle is the same in spirit as in Algorithm 1, except that the additional complexity of comparing over M IR system instances of the non-deterministic IR system must be included. Effectiveness scores on each IR system instance are paired by topic with the effectiveness scores of the deterministic IR system. As the effectiveness scores for the same set of topics are now measured on many IR system instances, the t-statistic for the original effectiveness score deltas 
                              
                                 t
                                 (
                                 z
                                 )
                              
                            is computed from the mean score delta for each topic across M IR system instances. The BS bootstrap observations are drawn from the topic score deltas observed for each IR system instance, and recentered by deducting the mean from the BS bootstrap observations. Evidence in favour of the null hypothesis is found each time the absolute value of the t-statistic for a recentered bootstrap resample 
                              
                                 t
                                 (
                                 
                                    
                                       z
                                    
                                    
                                       i
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                              
                            is greater than or equal to the absolute value of 
                              
                                 t
                                 (
                                 z
                                 )
                              
                           . The final p-value is the count of evidence in favour of null hypothesis divided by 
                              
                                 (
                                 BS
                                 ×
                                 M
                                 )
                              
                           .

The second approach for comparing a non-deterministic IR system with a deterministic IR system uses the following LME model:
                              
                                 (9)
                                 
                                    
                                       
                                          y
                                       
                                       
                                          ℓ
                                          mn
                                       
                                    
                                    =
                                    γ
                                    +
                                    
                                       
                                          s
                                       
                                       
                                          ℓ
                                       
                                    
                                    +
                                    
                                       
                                          i
                                       
                                       
                                          m
                                       
                                    
                                    +
                                    
                                       
                                          t
                                       
                                       
                                          n
                                       
                                    
                                    +
                                    
                                       
                                          st
                                       
                                       
                                          ℓ
                                          n
                                       
                                    
                                    +
                                    
                                       
                                          ε
                                       
                                       
                                          ℓ
                                          mn
                                       
                                    
                                    .
                                 
                              
                           Here 
                              
                                 
                                    
                                       y
                                    
                                    
                                       ℓ
                                       mn
                                    
                                 
                              
                            is the effectiveness score observed for the 
                              
                                 n
                                 ·
                                 th
                              
                            topic on the 
                              
                                 m
                                 ·
                                 th
                              
                            IR system instance produced with the 
                              
                                 ℓ
                                 ·
                                 th
                              
                            non-deterministic IR system, and γ is the model intercept. The factors 
                              
                                 
                                    
                                       s
                                    
                                    
                                       ℓ
                                    
                                 
                                 ,
                                 
                                    
                                       i
                                    
                                    
                                       m
                                    
                                 
                              
                           , and 
                              
                                 
                                    
                                       t
                                    
                                    
                                       n
                                    
                                 
                              
                            are the effects due to the 
                              
                                 ℓ
                                 ·
                                 th
                              
                            IR system, the 
                              
                                 m
                                 ·
                                 th
                              
                            IR system instance, and the 
                              
                                 n
                                 ·
                                 th
                              
                            topic respectively. The system-topic interaction effect is 
                              
                                 
                                    
                                       st
                                    
                                    
                                       ℓ
                                       n
                                    
                                 
                              
                           . The unallocated portion of effectiveness 
                              
                                 
                                    
                                       y
                                    
                                    
                                       ℓ
                                       mn
                                    
                                 
                              
                            is what resides in 
                              
                                 
                                    
                                       ε
                                    
                                    
                                       ℓ
                                       mn
                                    
                                 
                              
                           . The IR system effect (
                              
                                 
                                    
                                       s
                                    
                                    
                                       ℓ
                                    
                                 
                              
                           ) is fixed in the above model where topics (
                              
                                 
                                    
                                       t
                                    
                                    
                                       n
                                    
                                 
                              
                           ), IR system instances (
                              
                                 
                                    
                                       i
                                    
                                    
                                       m
                                    
                                 
                              
                           ) and IR system-topic interaction (
                              
                                 
                                    
                                       st
                                    
                                    
                                       ℓ
                                       n
                                    
                                 
                              
                           ) provide the non-deterministic effects.

The data for the above model consists of effectiveness 
                              
                                 (
                                 y
                                 )
                              
                           , and three other factor variables for IR system 
                              
                                 (
                                 s
                                 )
                              
                           , IR system instance 
                              
                                 (
                                 i
                                 )
                              
                            and topic 
                              
                                 (
                                 t
                                 )
                              
                           . Two factors are crossed when each level of one factor occurs in every level of another factor, and nested if the levels of one factor occurring within the levels of another factor differ. Crossed factors produce an interactive effect in the presence of repeated observations. The effectiveness scores for the same set of topics is measured on each non-deterministic IR system instance and deterministic IR system. Hence, a crossed design can be used where each level of the IR system instance factor for the deterministic IR system is a replicate. In this model, the IR system and IR system instance factors are crossed with the factor topics which result in a system-topic interaction effect (
                              
                                 
                                    
                                       st
                                    
                                    
                                       ℓ
                                       m
                                    
                                 
                              
                           ), but not a system instance-topic interaction effect (
                              
                                 
                                    
                                       it
                                    
                                    
                                       mn
                                    
                                 
                              
                           ) as repeated observations are not available. The p-value for the test is obtained by using the t-statistic for the IR system factor. The degrees of freedom for the test are the number of observations less one.

Now we extend the multivariate linear model test to compare two non-deterministic IR systems. The equation for the model remains the same. The comparison is based on M IR system instances sampled from each non-deterministic IR system. These system instances are different from each other. Therefore, the IR system instance factor (i) naturally nests within the IR system factor (s), as opposed to the crossed design used when comparing against a deterministic IR system. Similar to before the IR system factor is crossed with topics, and causes a IR system-topic interaction effect. The IR system instance-topic interaction effect (
                           
                              
                                 
                                    it
                                 
                                 
                                    mn
                                 
                              
                           
                        ) does not occur as the factors are not crossed and have no repeated observations. The p-value for the test is computed in the same fashion.

We now compare the two approaches directly to determine if the two proposed methods for a deterministic – non-deterministic IR system comparison agree. In order to do the comparison, we extend the simulations used in the previous sections. For the deterministic IR system, we randomly pick an effectiveness score between 0 and 1 from a uniform distribution for each topic. For the non-deterministic IR system, we sample a topic effect between 0 and 1 from a uniform distribution, a system instance effect between 0 and 1 from a normal distribution 
                        
                           N
                           (
                           μ
                           ,
                           
                              
                                 σ
                              
                              
                                 2
                              
                           
                           )
                        
                     . We randomly generate the mean 
                        
                           μ
                        
                      and the variance 
                        
                           
                              
                                 σ
                              
                              
                                 2
                              
                           
                        
                      between 0 and 1 for the non-deterministic IR system. The effectiveness for a topic-system instance pair is the normalized Euclidean distance between the two effects. In order to generate the effectiveness scores for many system instances for a non-deterministic IR system, the topic effect is fixed, and the system instance effect is sampled repeatedly. We generate effectiveness scores for a set of 50 topics with 100 IR system instances for the non-deterministic IR system, and compared with the effectiveness scores for the deterministic IR system using the two evaluation methods proposed. Fig. 4
                      illustrates the agreement between the two approaches for 5000 such comparisons. Both methods yield similar results.

We now apply the proposed evaluation methods in a real-world IR scenario. Sharding and tiering are well-known distributed IR techniques (Callan, 2002). As the systems tend to be large and complex, a great deal of work has been done to improve the efficiency and the effectiveness in the distributed systems. For example, efficiency can be improved in the system if the query is only sent to a subset of the indexes. However, there is a risk that relevant documents in unsearched shards will be missed. The question becomes how many and which shards should be queried without causing a measurable loss in retrieval effectiveness?

In order to efficiently and effectively select the best subset of shards to visit for each query, the ReDDE algorithm can be used (Si & Callan, 2003). ReDDE takes a sample of documents from each shard, and uses an index over the sampled shards to select the ordering of shards to search. There are several other resource allocation techniques available but covering all of them is beyond the scope of this paper. See for example Aly et al. (2013), Callan, Lu, and Croft (1995), Kulkarni, Tigelaar, Hiemstra, and Callan (2012), and Xu and Callan (1998). Here we focus on resource allocation schemes which depend on sampling, such as ReDDE and Rank-S. We refer to any sample-based resource allocation scheme as a central sample index (csi) in the remainder of this paper. The most important take away is that the csi is a representation of the collection statistics but can vary depending on the samples used.

The simplest form of sharding splits the document collection between shards randomly. Since shards can be searched in parallel, efficiency and throughput can be increased through a variety of mirroring or tiering methods. However, all shards must be searched in order to guarantee the same effectiveness as exhaustive search over the entire collection. This is analogous to a deterministic search in our scenario since the entire collection is searched.

Recent work has shown that the search costs can be reduced by reordering the documents for each shard by topic or similarity (Kulkarni & Callan, 2010; Xu & Croft, 1999). Topical partitioning gathers similar documents into a single shard. Now, a search over a carefully selected subset of shards can achieve early precision (P@
                     D, and NDCG@
                     D) closer to exhaustive search without searching the entire collection. The k-means algorithm is one approach to form topically partitioned shards (Kulkarni & Callan, 2010; Xu & Croft, 1999). Each document is represented in a sparse vector space as a bag-of-words, where each unique term is a dimension. The k-means algorithm is not able to scale to large IR collections and therefore sampling is required. Randomly selected seeds from the sampled documents form the initial cluster centroids. Documents are assigned to the closet cluster centroid, based on a similarity metric. After all documents are assigned, the centre of the assigned documents for each cluster form the new cluster centroids. New random seeds from the sample of documents are used to replace cluster centroids without documents. The process is repeated for several iterations, each time improving the quality of clusters. Finally, all of the remaining documents in the collection are assigned to the closest cluster centroid to form 
                        
                           k
                        
                      topically partitioned shards. Each time the algorithm is ran, the shard compositions can change dramatically. Fig. 5
                      shows the system composition of a topical partitioning distributed selective search system.

For the purpose of this study, the problem of determining the optimal csi sample rate is reexamined and follows the process originally presented by Si and Callan (2003). To select a subset of shards for a given query, the csi is searched first. The proportion of documents from each shard in the csi search results are used to rank shards for a given query. Therefore, the time spent on searching the csi is a key factor determining query response time and the csi search time is correlated to the sample rate used to construct the csi as well as the query difficulty. The sample rate used for constructing the csi must be sufficiently high to represent the shard in order to avoid poor retrieval effectiveness. A high sample rate can also minimize the likelihood of encountering out-of-vocabulary (OOV) terms in the mapping of the csi to the shards. This is a classic effectiveness and efficiency trade-off problem, whereby the best query response time is achieved when the sample rate is set to the smallest level that still achieves similar effectiveness to that resulting from exhaustive search.

We perform experiments using the TREC GOV2 dataset with TREC topics 701–850 and the ClueWeb ’09B dataset using TREC ’09 topics 1–50. We use MAP, NDCG@10, and P@10 to evaluate experiments.
                           2
                           trec_eval from http://trec.nist.gov is used with default settings to compute the effectiveness of retrieval results.
                        
                        
                           2
                         When not explicitly specified, NDCG@10 is used.

On two independent 1% samples of the document collection, we form 5 topical partitions for each sample using the topical partitioning algorithm proposed by Kulkarni and Callan (2010). Here, a 1% sample is used following prior research by Kulkarni and Callan (2010). Thus, 10 different topical partitions are created and used. As with the original experiments (Kulkarni & Callan, 2010), 50 shards per instance for the TREC GOV2 dataset and 100 shards per instance for the ClueWeb ’09B dataset are formed, and the full dependency model (FDM) is used to rank the queries (Metzler & Croft, 2005). For topically partitioned shards, searching up to 5 shards produced early precision results equivalent to exhaustive search (Kulkarni & Callan, 2010). Therefore, on topically partitioned shards up to 5 ranked shards are searched for each query, except for MAP where a maximum of 10 and 15 shards are searched respectively for TREC GOV2 and ClueWeb ’09B datasets. For each of the sharded version, 10 csi instances are formed for each sample rate, giving 100 instances in total for each sample rate. ReDDE algorithm is used to query shards.

@&#RESULTS@&#

We first investigate the necessity for a two dimensional significance test. The effectiveness varies for each instances of a non-deterministic IR system, and therefore evaluation for a single instance can be inaccurate. This is illustrated in Fig. 6
                        . The figure shows the variation in mean effectiveness for the 100 IR system instances constructed with the topical partitioning scheme for each csi sample rate on the two datasets. Ignoring variation due to system instances by using a single instance for evaluation is therefore likely to lead to inconsistent conclusions if the sample rate is too aggressive.

So, what is the impact of using conventional significance tests to evaluate non-deterministic IR systems? We compare each individual IR system instance for the topical partitioning scheme with the exhaustive search using a paired t-test, and illustrate the results in Fig. 7
                        . As can be seen on both datasets, the number of significant differences with a mean deterioration compared to exhaustive search increases as the csi sample rates are reduced. Similarly, the number of significant differences with a mean improvement compared to exhaustive search also increases along with increasing csi sample rates. On both datasets some individual comparisons show a significant difference while others agree. For example, on the TREC GOV2 dataset using a csi sample rate of 0.5%, 3% of the comparisons show a mean deterioration and a significant difference with a p-value less than 0.05, and 8% with a p-value less than 0.1. For the same csi sample rate, 2% show a mean improvement and significant difference over deterministic exhaustive search with a p-value less than 0.1, and 90% show no significant difference. This exemplifies the difficulty in evaluating systems which use approximation and/or randomization to improve efficiency.

The mean effectiveness for each topic across a large number of non-deterministic IR system instances can be reported to reduce the likelihood of producing inconsistent results. However, such a comparison ignores the variance due to non-deterministic IR system instance effect, and is analogous to comparing two deterministic IR systems just by considering the average effectiveness over a sampled set of topics rather than performing a hypothesis test which takes topical variance into account. We illustrate the variance in effectiveness for TREC topics 801–850 on the TREC GOV2 dataset and TREC ’09 topics 1–50 on the ClueWeb ’09B dataset across 100 topically partitioned distributed IR system instances for topical partitioning scheme in Fig. 8
                        . While effectiveness for some topics is consistent, others are not. For example, on the TREC GOV2 dataset the TREC topic 826 “Florida Seminole Indians” demonstrate a high variation in effectiveness across system instances, while the topic 836 “illegal immigrant wages” in the same environment displays consistent effectiveness. Similarly, on the ClueWeb ’09B dataset TREC ’09 topic 1 “obama family tree” shows a high variation in effectiveness, while TREC ’09 topic 11 “gmat prep classes” shows no variation in effectiveness.

There is no obvious reason for these discrepancies, but a few possible reasons can be rationalized. One is the distribution of potentially relevant documents in the csi. The effectiveness is normally high when potentially relevant documents are explicitly represented in the csi. Similarly, the effectiveness tends to be low when the csi sampling does not include these documents. Another possibility is the split of relevant documents across shards. The effectiveness is maximized when relevant documents are concentrated in few shards, and low when they are split between many shards. However, the approaches outlined in this work can help alleviate the problem regardless of the cause.

Measuring the effectiveness of a non-deterministic search algorithm using a single instance can never be recommended due to the variance in p-values. The variation in p-value can somewhat be offset by increasing the number of IR system instances in the sample. We illustrate this scenario for the topical partitioning scheme on the TREC GOV2 dataset with TREC topics 701–850 and ClueWeb ’09B dataset with TREC ’09 topics 1–50 in Fig. 9
                        . We generate 50 samples of IR system instance pools for each varying pool size on each dataset using sampling with replacement (bootstrapping). For the experiment, we form 100 IR system instances for each csi sample rate. These 100 IR system instances for each csi sample rate are assumed to produce the ground truth for the population. We compare each sample with exhaustive search using the proposed methods for comparing a non-deterministic IR system with a deterministic one. As the graphs for varying csi sample rates illustrate, having more IR system instances leads to more accurate evaluation.

Recall that the probability of rejecting the null hypothesis when in fact the alternative hypothesis is true is “the power” of the significance test. Plotting the p-values for the number of tests in descending order for each comparison has been a standard practise to illustrate the potential power of significance tests (Robertson & Kanoulas, 2012; Sakai, 2006). The p-values for all comparisons performed in the previous experiment on the TREC GOV2 and ClueWeb ’09B datasets are arranged in the above manner in Fig. 10
                        . Results for each evaluation metric are shown separately, as each graph illustrates a unique set of comparisons. To construct the plot for the standard t-test and the standard bootstrap test, we randomly select an IR system instance from the pool of instances for each comparison. Although the multivariate linear model test and the bootstrap test derive similar p-values as shown in Fig. 4, they are not identical. The power of the multivariate linear model test is higher than the bootstrap test for the examples considered here. The difference in the two tests are attributed to fewer assumptions being made about the sampling distribution in a bootstrap test. Both approaches demonstrate a much higher power than either of the standard tests. This indicates the standard tests lack discriminative power due to less observations (data) seen by standard tests than in the two-dimensional tests. Further, more comparisons are found to be significantly different with NDCG@10 than with P@10 for the ClueWeb ’09B dataset. This is due to the prominence given to higher ranked relevant documents and inclusion of graded relevance in NDCG@10. A similar observation was made previously by Sakai (2007).

Whenever a new evaluation methodology is proposed, validating the approach should be done carefully. In this section, we extended two standard hypothesis testing methodologies from first principles to compare a non-deterministic IR system with a deterministic system. The two approaches use different techniques to compute the p-value. The agreement between the two approaches on the comparisons conducted for previous experiments on TREC GOV2 dataset, and ClueWeb ’09B dataset with each evaluation metric are shown in Fig. 11
                        . Here, the p-values for comparisons on TREC GOV2 dataset when evaluated with MAP is notable. The topical sharding algorithm shows a significant deterioration with MAP for all comparisons on TREC GOV2 dataset and therefore are located around zero. As shown in the figure, both methods yield consistently correlated results.

When a new sample-based IR system is introduced for efficiency purposes, a common question is: What is the minimum sample rate required to achieve an equivalent or greater effectiveness than a deterministic baseline? Recall the method used to test for statistically significant equivalence in Section 2. We now extend the method to compare effectiveness of non-deterministic IR systems for similarity.

A possible approach is to apply a multivariate linear model as previously discussed. The goal is to find a setting that is still able to achieve equivalent or greater effectiveness than the exhaustive solution while increasing the efficiency. Hence, only a minimally consequential degradation is considered, so the null hypothesis is 
                           
                              
                                 
                                    M
                                 
                                 
                                    A
                                 
                              
                              -
                              
                                 
                                    M
                                 
                                 
                                    B
                                 
                              
                              ⩽
                              δ
                           
                        , instead of 
                           
                              |
                              
                                 
                                    M
                                 
                                 
                                    A
                                 
                              
                              -
                              
                                 
                                    M
                                 
                                 
                                    B
                                 
                              
                              |
                              ⩾
                              δ
                           
                        . So 
                           
                              
                                 
                                    M
                                 
                                 
                                    A
                                 
                              
                              -
                              
                                 
                                    M
                                 
                                 
                                    B
                                 
                              
                              >
                              δ
                           
                         becomes the alternative hypothesis. Here, 
                           
                              A
                           
                         is the non-deterministic approach and 
                           
                              B
                           
                         is the deterministic baseline. For this experiment, a degradation of 0.01 for 
                           
                              δ
                           
                         is assumed as to be an acceptable threshold. The null hypothesis is tested, and the smallest setting for which this null hypothesis is rejected is selected. So, effectiveness of a non-deterministic IR system is significantly better than the minimal consequential degradation.

We can indirectly test the null hypothesis using the 95% highest posterior density (HPD) confidence interval computed using a posterior distribution for the system factor in the multivariate linear model. If the confidence interval is above 
                           
                              δ
                           
                        , the null hypothesis can be rejected, and conclude with a 95% confidence that the effectiveness of the non-deterministic IR system is within 
                           
                              δ
                           
                         of the effectiveness of an exhaustive search. However, if 
                           
                              δ
                           
                         overlaps with the HPD confidence interval, then the null hypothesis cannot be rejected.

We now consider the problem of finding the best cutoff in a selective search system. The 95% HPD interval for the scheme as the csi sample rates are varied for the TREC GOV2 and the ClueWeb ’09B datasets is shown in Fig. 12
                        . Keeping the focus on NDCG@10, we analyze the results below. The effectiveness is clearly worse than exhaustive search when the sample rate is low. The maximum consequential degradation 
                           
                              δ
                           
                         is greater than the confidence interval for sample rates of 0.01% and 0.05% on the TREC GOV2 dataset and 0.01% on the ClueWeb ’09B dataset. The 
                           
                              δ
                           
                         is within the confidence interval for sample rates 0.1% and above on the TREC GOV2 dataset. So, the non-deterministic approach might not be consequentially worse than exhaustive search, but one cannot conclude this with any certainty. For sample rates 
                           
                              ⩾
                              1
                              %
                           
                         for the TREC GOV2 dataset and 
                           
                              ⩾
                              0.05
                              %
                           
                         for the ClueWeb ’09B dataset, the confidence intervals are above the 
                           
                              δ
                           
                         degradation level, and therefore one can conclude that the effectiveness for the non-deterministic method is at least as good or greater than the exhaustive search. The confidence intervals are above zero for a sample rate 
                           
                              ⩾
                              0.1
                              %
                           
                         on the ClueWeb ’09B dataset. A confidence interval lying above the 
                           
                              randomized
                              -
                              exhaustive
                              =
                              0
                           
                         line implies that the approach performs significantly better than exhaustive search. A pattern similar to NDCG@10 is observed for P@10 on both datasets. Here the effect size can be computed by dividing the difference in mean effectiveness by the standard deviation of the residuals. The effect size at a sample rate of 0.1% on this dataset is 0.52 and 0.41 for NDCG@10 and P@10 respectively. This is an improvement with a medium effect for NDCG@10 and a small effect for P@10. The scheme proposed by Kulkarni and Callan (2010) is more effective than the exhaustive approach at a 95% confidence level. Shard cutoffs of 10 and 15 are considered for MAP on the TREC GOV2 and ClueWeb ’09B datasets respectively. However, for MAP one cannot conclude with confidence that the effectiveness is no worse than 
                           
                              δ
                           
                         for csi sample rates up to 4%. Here, we illustrated a few applications of the proposed evaluation methods for comparing a non-deterministic IR system with a deterministic IR system. Next, we present results for evaluating two non-deterministic IR systems.

We demonstrate the results for separately comparing the topical partitioning scheme at varying csi sample rates with the same scheme using a csi sample rate of 4% (another non-deterministic IR system) in Fig. 13
                        . The two IR systems are equivalent when the csi sample rate on the x-axis is 4%. The fact that the comparisons agree as the csi sample rate approaches 4% for the one with varying csi sample rate illustrates the validity of the proposed approach for comparing two non-deterministic systems.

@&#CONCLUSION@&#

One important aspect of this work is the recognition of the role multidimensional variance has in evaluation, which occurs when more than one type of experimental unit is being sampled. An example is sampling of system instances and topics for evaluating non-deterministic IR systems. Further, the evaluation can have repeated observations for the same experimental unit, caused by inconsistent experimental conditions. Therefore, variance can be subdivided into many dimensions with the possibility of repeated observations in each dimension.

Despite non-deterministic IR systems with a two dimensional variance becoming increasingly common, little work has been done on how best to compare these systems using traditional evaluation frameworks. We have explored the pitfalls of depending on a single instance of a system. By demonstrating that the effectiveness for the same topic varies across different instances of a non-deterministic system, we motivated the notion of two-dimensional significance testing.

We have proposed two methodologies based on bootstrapping and multivariate linear modelling to compare a non-deterministic system with a deterministic system. Both approaches derive similar p-values, and demonstrate a higher power than current evaluation methodologies. We then extend the multivariate linear modelling approach to compare two non-deterministic systems. Finally, we describe how the proposed methods can be extended to demonstrate that a non-deterministic system has similar performance to another comparable system. The approaches can easily be extended to support repeated measurements for the same topic on the same system instance or for other dimensions of variance.


                     Future work: We have explored common scenarios in IR where sampling and approximation can lead to difficulty in evaluation. Similar issues exist in other domains such as machine learning. For example, recommender systems can also have effectiveness vary in two dimensions – users and products. Data analytics is another area where multi-dimensional evaluation could be necessary. We expect to extend this evaluation framework to other areas in future work.

@&#ACKNOWLEDGEMENTS@&#

This work was supported in part by the Australian Research Council (DP130104007). Dr. Culpepper is the recipient of an ARC DECRA Research Fellowship (DE140100275).

@&#REFERENCES@&#

