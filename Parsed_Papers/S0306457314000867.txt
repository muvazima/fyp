@&#MAIN-TITLE@&#Geo-temporal distribution of tag terms for event-related image retrieval

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We have developed a new approach that effectively retrieves event-based images.


                        
                        
                           
                           We have proposed a rigorous technique to extract spatial features from image tags.


                        
                        
                           
                           We have developed a method for summarizing spatial distributions of single tags.


                        
                        
                           
                           We have developed new techniques for spatial relatedness between two tag terms.


                        
                        
                           
                           Our spatio-temporal IR method improves the retrieval performance significantly.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Information retrieval

Spatial profile

Tag relatedness

Query expansion

Event retrieval

Social media retrieval

@&#ABSTRACT@&#


               
               
                  Media sharing applications, such as Flickr and Panoramio, contain a large amount of pictures related to real life events. For this reason, the development of effective methods to retrieve these pictures is important, but still a challenging task. Recognizing this importance, and to improve the retrieval effectiveness of tag-based event retrieval systems, we propose a new method to extract a set of geographical tag features from raw geo-spatial profiles of user tags. The main idea is to use these features to select the best expansion terms in a machine learning-based query expansion approach. Specifically, we apply rigorous statistical exploratory analysis of spatial point patterns to extract the geo-spatial features. We use the features both to summarize the spatial characteristics of the spatial distribution of a single term, and to determine the similarity between the spatial profiles of two terms – i.e., term-to-term spatial similarity. To further improve our approach, we investigate the effect of combining our geo-spatial features with temporal features on choosing the expansion terms. To evaluate our method, we perform several experiments, including well-known feature analyzes. Such analyzes show how much our proposed geo-spatial features contribute to improve the overall retrieval performance. The results from our experiments demonstrate the effectiveness and viability of our method.
               
            

@&#INTRODUCTION@&#

The proliferation of web and social media-based photo sharing has not only opened many possibilities but also resulted in new needs and new challenges. Despite recent developments and technological advances within – e.g., web-based media sharing applications, the continuously increasing amount of available information has made the access to these photos still a demanding task. In general, we can address this challenge by allowing the photo collections to be organized and browsed through the concept of event (Papadopoulos, Troncy, Mezaris, Huet, & Kompatsiaris, 2011; Ruocco & Ramampiaro, 2012). Also, most users are generally familiar with searching photo collections using events as starting points. Thus, aiming at supporting the detection and search of event-related photos, we propose an event retrieval framework to improve the state-of-the-art in real-life event retrieval systems in term of retrieval effectiveness.

Focusing on media sharing applications, an event refers to “something happening in a specific place at a specific time, and tagged with a specific term” (Ruocco & Ramampiaro, 2012). With an event-retrieval system, we can assume two types of scenarios: (1) A user directly retrieves media resources related to a particular event; and (2) a user uses a given tagged photo representing an event to retrieve other photos related to any similar events from a large image collection. In this work, we mainly focus on scenario (2). Due to their characteristics, pictures in photo sharing applications such as Flickr
                     
                        1
                        See http://www.flickr.com/.
                     
                     
                        1
                      and Panoramio
                     
                        2
                        See http://www.panoramio.com/.
                     
                     
                        2
                      are particularly interesting. For example, most of such pictures are accompanied with contextual metadata and other related information added by users, such as Title, Tags, Description, temporal information represented by the picture capture and upload times, and geolocation. Hence, with photo sharing applications in mind, we study how we can exploit contextual metadata to retrieve event-related pictures.

The main goals of this work are (1) to build a framework to extract a set of geographical features from geographical raw data of documents or pictures, and (2) to develop an approach to allow effective retrieval of event-based images. Specifically, we develop a set of geographical features that can capture the characteristics of the geographical distributions of social (or user) tags. Further, we investigate how we can combine these features with the state-of-the-art temporal features to improve the retrieval performance of an event-based image retrieval system. Finally, we explore integrating a machine-learning-based approach with our retrieval system. We study how these features can be used in a query expansion framework. Here, we are especially interested in the contributions of the features on the selection of expansion terms from feedback documents.

To this end, we propose a novel framework that improves the retrieval effectiveness of tag-based image search by including the geographical profile of terms. We have developed a new method for extracting spatial features using information about the geographical distribution of tags. Our main idea is to use such features to characterize the clustering tendency of tag terms and the geographical correlation between two geographical distributions of two tags. Spatio-temporal information retrieval is an established field already. However, existing approaches have mainly been concerned with point-of-interests (POI) extraction (Rae, Murdock, Popescu, & Bouchard, 2012) and trajectory mining (Yin, Cao, Han, Luo, & Huang, 2011). With the constantly increasing number of geotagged pictures – e.g., in Flickr,
                        3
                        Around 220M of Flickr pictures are geotagged. See also http://www.flickr.com/map/.
                     
                     
                        3
                      exploring the raw geographical metadata has become increasingly important.

In summary, the main contributions of this paper are as follows. First, we propose a new robust set of geographical features that can be used (1) to determine the clustering tendency of tags by analyzing the geographical structure of their geographical distribution, and (2) to analyze the tag-relatedness between two tags by exploring the correlation between the geographical distributions. To do this, we have developed new measures derived from a well-founded Exploratory Analysis theory from Statistics. More specifically, we adapt the Ripley’s K-function and Ripley Cross-K function (K-function and cross-K function for short) (Ripley, 1976) as part of our approach to extract the geographical features. Second, we show how our features can be incorporated in a machine learning-based query expansion model to improve the ability to select good expansion terms. In addition, we demonstrate how these features can be combined with existing document-based approaches and temporal features to achieve improved retrieval performance. Third, through our experimental evaluation we show the effectiveness and practical feasibility of our approach. This includes comparing with both baseline retrieval models and baseline approaches for geo-temporal tag-relatedness. Fourth, we perform a thorough analysis to show the effectiveness of our proposed geographical features – in the afore-mentioned machine learning-based query expansion process.

The rest of this paper is organized as follows. To put our research in a perspective Section 2 provides an overview of approaches related to our work. Section 3 gives an overview of the preliminary theory underlying our approach and defines the problems addressed in this paper. Section 4 presents our proposed geographical features and explains how we extract them. Section 5 describes our framework applying these features in a learning-based re-weighting process for a query expansion model. Section 6 explains our experimental setup. Section 7 presents the results from our experiments. Finally, in Section 8 we conclude the paper and outline our future work.

@&#RELATED WORK@&#

In the past decades, detection of events from textual document streams and databases has been treated extensively in the literature (Allan, Papka, & Lavrenko, 1998; Brants, Chen, & Farahat, 2003). However, although mining and retrieving pictures related to real-life events is an active field, it is still not a fully mature research domain (Ruocco & Ramampiaro, 2012; Gkalelis, Mezaris, & Kompatsiaris, 2010; Trad, Joly, & Boujemaa, 2011). Most related approaches have been aimed at extracting events from different types of datasets. To the best of our knowledge, only few works have addressed the problems of retrieval of events in connection to media sharing, and many of these approaches were presented in the Social Event Detection (SED) task at MediaEval
                        4
                        
                           http://www.multimediaeval.org/mediaeval2011/.
                     
                     
                        4
                      (Papadopoulos et al., 2011), where the main objective was to propose event retrieval systems for Flickr pictures.

A research area closely related to ours is pseudo-relevance feedback. Generally speaking, pseudo-relevance feedback refers to techniques to average top-retrieved documents to automatically expand an initial query. It has been studied widely in information retrieval both to extend existing retrieval models (Cao, Nie, Gao, & Robertson, 2008; Lavrenko & Croft, 2001; Tao & Zhai, 2006; Zhai & Lafferty, 2001), and as part of query expansion frameworks (Carpineto, de Mori, Romano, & Bigi, 2001; Rocchio, 1971). Specifically, (Lavrenko & Croft, 2001; Zhai & Lafferty, 2001) propose two methods – the Relevance Model and the Mixture Model, respectively – to include feedback information in the Kullback–Leibler (KL) divergence retrieval model (Lafferty & Zhai, 2001). The idea is to estimate a new query model using terms in the top-k retrieved documents, also called pseudo-relevant feedback documents to update an existing query model. Experiments have shown that these approaches are indeed able to improve the standard retrieval models with respect to retrieval effectiveness (Lv & Zhai, 2009). This has also been the main motivation for including them in our study.


                     Cao et al. (2008) present a classification approach to automatically select good expansion terms from a set of candidate terms from the pseudo-relevant documents. To do this, they train a classifier using a set of good and bad candidate expansion terms represented by feature vectors. Such feature vectors consist of traditional statistical features based on the distribution of the terms both in the whole collection, and the set of (pseudo) relevant documents. Lin, Lin, Jin, and Ye (2011) propose an extension of this work by applying a learning-to-rank approach for training and classifying the candidate expansion terms. They show that they can improve the retrieval effectiveness by using social annotation from external tagged resources, such as the de.li.cio.us
                     
                        5
                        
                           http://www.delicious.com/.
                     
                     
                        5
                      social bookmarking web service, as a source for extracting useful expansion terms. The use of social annotation as source for improving the retrieval performance has also previously been investigated by Zhou, Bian, Zheng, Zha, and Giles (2008). These approaches are related to ours in that we also use classification to select good expansion terms. Their main differences with our approach are that none of them applies either temporal, geo-spatial or geo-spatio-temporal features.

As discussed later in this paper, we are interested in investigating the contributions of the temporal characteristics of a term in a pseudo relevance feedback context. Within event retrieval, the usefulness of the temporal information is evident. Also within general information retrieval, results from existing work have proven its usefulness. For example, (Dakka, Gravano, & Ipeirotis, 2012; Jones & Diaz, 2007) show how the temporal profile of queries can be used to improve existing retrieval models; whereas (Keikha, Gerani, & Crestani, 2011; Whiting, Klampanos, & Jose, 2012) propose new temporal-based approaches to improve pseudo relevance feedback based models. Nevertheless, while existing approaches seem to have focused on the temporal aspects only, to fully support event retrieval, we stress the necessity of including both the temporal profile of social tags and the spatial profile. To the best of our knowledge, the combination of both temporal and spatial features of social tags to improve the retrieval effectiveness has still not been sufficiently investigated. Only few methods – e.g., (Radinsky, Agichtein, Gabrilovich, & Markovitch, 2011; Zhang, Korayem, You, & Crandall, 2012), incorporate temporal and spatial correlation measures to compute term-to-term relatedness. Specifically, (Radinsky et al., 2011) propose a method to improve the semantic relatedness measure of two terms by capturing the correlation between the temporal profiles of tags and concepts associated with the two terms. Zhang et al. (2012), on the other hand, analyze the tag relatedness by using different correlation measures, based on spatial and temporal co-occurrence. In summary, although these approaches are related ours, the way we extract the spatial profiles of tags and apply them in combination with the temporal profile is different. Also, while these approaches were originally developed for textual documents containing much term redundancy that can normally carry the document semantics, image tags usually consist of few unique terms. This makes it more challenging to derive term-based semantic relatedness for image retrieval in general (Sun, Bhowmick, Nam Nguyen, & Bai, 2011), thus further proving the usefulness of our approaches.

In this section, we first describe the data our approach is based on and define the problem we address. Thereafter, we give an overview the statistical method our approach are built on.

This work mainly focuses on media sharing applications, where resources are usually tagged with terms – i.e., tags, that describe the content of the resources. Such resources may also have information specifying their geographical locations, expressed in longitude and latitude values, and are referred to as geotagged resources.

Let 
                           
                              D
                              =
                              {
                              
                                 
                                    P
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    P
                                 
                                 
                                    N
                                 
                              
                              }
                           
                         be a set containing 
                           
                              N
                              =
                              |
                              D
                              |
                           
                         resources. Then, assume that each resource 
                           
                              
                                 
                                    P
                                 
                                 
                                    i
                                 
                              
                           
                         can be annotated with a set of tag 
                           
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                              
                           
                        , a temporal timestamp 
                           
                              
                                 
                                    t
                                 
                                 
                                    i
                                 
                              
                           
                         and a geotag 
                           
                              
                                 
                                    g
                                 
                                 
                                    i
                                 
                              
                              =
                              (
                              latitude
                              ,
                              longitude
                              )
                           
                        , such that 
                           
                              
                                 
                                    P
                                 
                                 
                                    i
                                 
                              
                              =
                              {
                              
                                 
                                    g
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    τ
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                              
                              }
                              ,
                              i
                              =
                              1
                              ,
                              …
                              ,
                              N
                           
                        . Without loss of generality, we assume our resources to be a set geotagged pictures downloaded from Flickr, that may or may not contain all of the above information at the same time. Further, let 
                           
                              E
                              =
                              {
                              
                                 
                                    E
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    E
                                 
                                 
                                    M
                                 
                              
                              }
                              ,
                              M
                              =
                              |
                              E
                              |
                           
                        , be a set of picture clusters 
                           
                              
                                 
                                    E
                                 
                                 
                                    i
                                 
                              
                              =
                              {
                              
                                 
                                    P
                                 
                                 
                                    
                                       
                                          j
                                       
                                       
                                          1
                                       
                                    
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    P
                                 
                                 
                                    
                                       
                                          j
                                       
                                       
                                          
                                             
                                                N
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                 
                              
                              }
                              ,
                              i
                              =
                              1
                              ,
                              …
                              ,
                              M
                           
                        , each of which contains images related to the same event. To make our approach as general as possible, we assume that a query picture has only a set of textual tag terms – i.e., it does not contain any geotags or temporal timestamps. This means that following our setup above, a query picture related to an event 
                           
                              
                                 
                                    E
                                 
                                 
                                    
                                       
                                          i
                                       
                                       
                                          q
                                       
                                    
                                 
                              
                              ∈
                              E
                           
                         can be expressed as 
                           
                              
                                 
                                    P
                                 
                                 
                                    
                                       
                                          j
                                       
                                       
                                          q
                                       
                                    
                                 
                              
                              =
                              {
                              
                                 
                                    T
                                 
                                 
                                    
                                       
                                          j
                                       
                                       
                                          q
                                       
                                    
                                 
                              
                              }
                           
                         – i.e., 
                           
                              
                                 
                                    g
                                 
                                 
                                    
                                       
                                          j
                                       
                                       
                                          q
                                       
                                    
                                 
                              
                           
                         and 
                           
                              
                                 
                                    τ
                                 
                                 
                                    
                                       
                                          j
                                       
                                       
                                          q
                                       
                                    
                                 
                              
                           
                         are not included. For simplicity, we will use 
                           
                              Q
                           
                         to denote a query picture – i.e., 
                           
                              
                                 
                                    T
                                 
                                 
                                    
                                       
                                          j
                                       
                                       
                                          q
                                       
                                    
                                 
                              
                              =
                              Q
                              =
                              {
                              
                                 
                                    q
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    q
                                 
                                 
                                    n
                                 
                              
                              }
                           
                        , where 
                           
                              n
                              =
                              |
                              Q
                              |
                           
                         and 
                           
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                              
                              ,
                              i
                              =
                              1
                              ,
                              …
                              ,
                              n
                           
                         are query tag terms.

The problem addressed in this paper concerns how we can effectively retrieve event-related pictures with a query 
                           
                              Q
                           
                        , using only the textual tags. First, we investigate how current state-the-art information retrieval methods perform when applied on our dataset, and let the methods serve as the baseline for our experimental evaluation. Second, we study how a query expansion framework using a set of spatial features summarizing the spatial statistics of the distribution related to a tag, and a set of features defining geographical relatedness between two tags can help us improve the retrieval effectiveness. Third and finally, we compare our method with the baseline methods.

As mentioned in Section 1, our approach is based on geo-spatial features for picture tags. To achieve this, we have to build a spatial profile for each tag.

Assume now we have a large dataset 
                           
                              
                                 
                                    D
                                 
                                 
                                    ^
                                 
                              
                              ⊆
                              D
                           
                         containing 
                           
                              L
                              =
                              |
                              
                                 
                                    D
                                 
                                 
                                    ^
                                 
                              
                              |
                           
                         geotagged pictures – i.e., 
                           
                              
                                 
                                    D
                                 
                                 
                                    ^
                                 
                              
                              =
                              {
                              
                                 
                                    
                                       
                                          P
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    
                                       
                                          P
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    L
                                 
                              
                              }
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          P
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                              =
                              {
                              
                                 
                                    g
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    T
                                 
                                 
                                    i
                                 
                              
                              }
                              ,
                              i
                              =
                              1
                              ,
                              …
                              ,
                              L
                           
                        . Further, let 
                           
                              V
                              =
                              {
                              
                                 
                                    w
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    w
                                 
                                 
                                    W
                                 
                              
                              }
                           
                         be the vocabulary with size 
                           
                              W
                              =
                              |
                              V
                              |
                           
                         of the set of social tags used to annotate 
                           
                              
                                 
                                    D
                                 
                                 
                                    ^
                                 
                              
                           
                        . Then, to extract the spatial features from each tag 
                           
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              ∈
                              W
                           
                        , we analyze the spatial characteristics for the tags using statistical exploratory analysis (Diggle, 2003).

To be able to use and understand the ideas of exploratory analysis translated into our domain, we need to establish two important concepts our approach is founded on: picture point processes and tag point pattern. First, considering Flickr pictures as our geotagged web resources, we model the spatial distribution of pictures taken in a specific geographical area as picture point processes, which is formally defined as follows:
                           Definition 3.1
                           Picture Point Process


                           A Picture Point Process is a point process modeling the spatial distribution of pictures taken in a 2-dimensional study region 
                                 
                                    
                                       
                                          R
                                       
                                       
                                          2
                                       
                                    
                                 
                              . So, any realization of the random variable, 
                                 
                                    P
                                 
                              , modeling the Picture Point Process is called Picture Point Pattern.

Second, for each term 
                           
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              ∈
                              V
                           
                        , we can assume that we have a set of points representing the spatial distribution of the tags in a studied region. With this assumption, we derive a so-called Tag Point Pattern from Definition 3.1 as:
                           Definition 3.2
                           Tag Point Pattern


                           A Tag Point Pattern 
                                 
                                    
                                       
                                          P
                                       
                                       
                                          
                                             
                                                w
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                 
                               – or just 
                                 
                                    
                                       
                                          P
                                       
                                       
                                          i
                                       
                                    
                                 
                               for simplicity – for a tag term 
                                 
                                    
                                       
                                          w
                                       
                                       
                                          i
                                       
                                    
                                 
                               is a subset of a Picture Point Pattern 
                                 
                                    P
                                 
                              , and is a set consisting of the geographical positions of pictures annotated with 
                                 
                                    
                                       
                                          w
                                       
                                       
                                          i
                                       
                                    
                                 
                              .

With these definitions, we can now use statistical exploratory analysis to derive the geo-spatial characteristics of image tags. More specifically, we use a tool called multivariate Ripley K-function (Ripley, 1976) to get the geo-spatial features from the tags. It is used to study the interaction between two or more spatial point patterns. To help understand how this is done, below is a brief overview of the multivariate Ripley’s K-function.

The Ripley’s K-function is mainly a tool for analyzing completely mapped spatial point patterns data in a two-dimensional space (Ripley, 1976). Hence, it can be used to determine the spatial distribution patterns of objects in spaces.

Let h denote a distance and λ be the intensity of a spatial point pattern, then Ripley’s K-function, 
                              
                                 K
                                 (
                                 h
                                 )
                              
                           , is defined as Ripley (1976):
                              
                                 (1)
                                 
                                    K
                                    (
                                    h
                                    )
                                    =
                                    
                                       
                                          λ
                                       
                                       
                                          -
                                          1
                                       
                                    
                                    E
                                    [
                                    #
                                    
                                    other points within distance
                                    
                                    h
                                    
                                    of an arbitrary point
                                    ]
                                    .
                                 
                              
                           
                        

The multivariate Ripley’s 
                              
                                 
                                    
                                       K
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                              
                            function is a generalization of 
                              
                                 K
                                 (
                                 h
                                 )
                              
                           , and is used to analyze the characteristics of an isotropic spatial point process. It contains information about clustering and dispersion of point patterns at different distance scales h. The multivariate form aims at answering questions regarding the interaction between two or more point patterns – i.e., bivariate or multivariate point patterns. It is specified as follows (Ripley, 1976): Let 
                              
                                 
                                    
                                       λ
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       λ
                                    
                                    
                                       j
                                    
                                 
                              
                            be the intensity of the spatial point patterns 
                              
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       P
                                    
                                    
                                       j
                                    
                                 
                              
                           , and assume 
                              
                                 
                                    
                                       λ
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       λ
                                    
                                    
                                       j
                                    
                                 
                              
                            being constant throughout 
                              
                                 
                                    
                                       R
                                    
                                    
                                       2
                                    
                                 
                              
                           . Then,
                              
                                 (2)
                                 
                                    
                                       
                                          K
                                       
                                       
                                          ij
                                       
                                    
                                    (
                                    h
                                    )
                                    =
                                    
                                       
                                          λ
                                       
                                       
                                          j
                                       
                                       
                                          -
                                          1
                                       
                                    
                                    E
                                    
                                       
                                          
                                             #
                                             
                                             points of type
                                             
                                             i
                                             
                                             within distance
                                             
                                             h
                                             
                                             from an arbitrary point
                                             
                                             j
                                          
                                       
                                    
                                    .
                                 
                              
                           Translated to our application, a point here would be a geographical position of a picture. Restricting to the case of two point patterns, we have four K functions: two self-K functions 
                           
                              
                                 
                                    
                                       K
                                    
                                    
                                       11
                                    
                                 
                                 (
                                 h
                                 )
                                 ,
                                 
                                    
                                       K
                                    
                                    
                                       22
                                    
                                 
                                 (
                                 h
                                 )
                              
                           , and two cross-K functions 
                           
                              
                                 
                                    
                                       K
                                    
                                    
                                       12
                                    
                                 
                                 (
                                 h
                                 )
                                 ,
                                 
                                    
                                       K
                                    
                                    
                                       21
                                    
                                 
                                 (
                                 h
                                 )
                              
                           . The following is most used estimation of 
                              
                                 
                                    
                                       K
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                              
                           , as proposed by Ripley (1976):
                              
                                 (3)
                                 
                                    
                                       
                                          
                                             
                                                K
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          ij
                                       
                                    
                                    (
                                    h
                                    )
                                    =
                                    
                                       
                                          1
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                j
                                             
                                          
                                          A
                                       
                                    
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             l
                                          
                                       
                                    
                                    
                                       
                                          I
                                       
                                       
                                          h
                                       
                                    
                                    (
                                    
                                       
                                          d
                                       
                                       
                                          
                                             
                                                i
                                             
                                             
                                                k
                                             
                                          
                                          
                                             
                                                j
                                             
                                             
                                                l
                                             
                                          
                                       
                                    
                                    )
                                    ,
                                 
                              
                           where 
                              
                                 
                                    
                                       d
                                    
                                    
                                       
                                          
                                             i
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             j
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                              
                            is the distance between a k-th point of type i and a l-th observed point of type j. 
                              
                                 
                                    
                                       I
                                    
                                    
                                       h
                                    
                                 
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       
                                          
                                             i
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             j
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 )
                              
                            is an indicator, such that 
                              
                                 
                                    
                                       I
                                    
                                    
                                       h
                                    
                                 
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       
                                          
                                             i
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             j
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 )
                                 =
                                 1
                              
                           , if 
                              
                                 
                                    
                                       d
                                    
                                    
                                       
                                          
                                             i
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             j
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 ⩽
                                 h
                              
                           ; and 
                              
                                 
                                    
                                       I
                                    
                                    
                                       h
                                    
                                 
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       
                                          
                                             i
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             j
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 )
                                 =
                                 0
                              
                           , otherwise. 
                              
                                 
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       n
                                    
                                    
                                       i
                                    
                                 
                                 /
                                 A
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       j
                                    
                                 
                                 =
                                 
                                    
                                       n
                                    
                                    
                                       j
                                    
                                 
                                 /
                                 A
                              
                            are the intensity of the two spatial point patterns as the rate between the number of points and the considered area A.

The above four 
                              
                                 
                                    
                                       K
                                    
                                    
                                       ij
                                    
                                 
                              
                            functions are used in the exploratory analysis to study the relationship between two spatial point patterns. For example, in the independence approach proposed by Lotwick and Silverman (1982), the null model assume that two spatial point patterns are generated by two different and independent spatial processes. Under this independence assumption, with the bivariate form or the cross-K function, 
                              
                                 
                                    
                                       K
                                    
                                    
                                       12
                                    
                                 
                                 (
                                 h
                                 )
                                 =
                                 π
                                 
                                    
                                       h
                                    
                                    
                                       2
                                    
                                 
                              
                           . From this, the empirical/estimated cross-K function 
                              
                                 
                                    
                                       
                                          
                                             K
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                              
                            calculated on the spatial point patterns, 
                              
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       P
                                    
                                    
                                       j
                                    
                                 
                              
                           , can be compared with the null model to determine the distribution characteristics between the two point patterns as follows: Attraction, if 
                              
                                 
                                    
                                       
                                          
                                             K
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 >
                                 π
                                 
                                    
                                       h
                                    
                                    
                                       2
                                    
                                 
                              
                           ; spatial independence, if 
                              
                                 
                                    
                                       
                                          
                                             K
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 =
                                 π
                                 
                                    
                                       h
                                    
                                    
                                       2
                                    
                                 
                              
                           ; and repulsion, if 
                              
                                 
                                    
                                       
                                          
                                             K
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 <
                                 π
                                 
                                    
                                       h
                                    
                                    
                                       2
                                    
                                 
                              
                           .

As can be derived from the above discussion, Ripley’s cross-K functions are useful in characterizing the distributions of spatial point patterns. However, the graph of the 
                              
                                 
                                    
                                       
                                          
                                             K
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                              
                            function has normally a parabolic curve, which normally makes it less straightforward to interpret. As a result, a so-called L-function is often used instead. An L-function is defined as
                              
                                 (4)
                                 
                                    
                                       
                                          L
                                       
                                       
                                          ij
                                       
                                    
                                    (
                                    h
                                    )
                                    =
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      K
                                                   
                                                   
                                                      ij
                                                   
                                                
                                                (
                                                h
                                                )
                                             
                                             
                                                π
                                             
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        

Using the same assumption of independence of spatial point patterns as before, we get 
                              
                                 
                                    
                                       L
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 =
                                 h
                              
                           . As with the K-function, the empirical values of 
                              
                                 
                                    
                                       L
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 ,
                                 
                                    
                                       
                                          
                                             L
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                              
                           , can be used to characterize tag point patterns 
                              
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       P
                                    
                                    
                                       j
                                    
                                 
                              
                            as follows: 
                              
                                 
                                    
                                       
                                          
                                             L
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 >
                                 h
                              
                            indicates attraction between the point patterns, 
                              
                                 
                                    
                                       
                                          
                                             L
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 =
                                 h
                              
                            shows spatial independence, whereas 
                              
                                 
                                    
                                       
                                          
                                             L
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 <
                                 h
                              
                            means repulsion. To further facilitate our interpretation, we normalize the cross-L function again to get a so-called D-function for two tag point patterns. Based on the empirical cross-L function, the D-function is given by
                              
                                 (5)
                                 
                                    
                                       
                                          
                                             
                                                D
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          ij
                                       
                                    
                                    (
                                    h
                                    )
                                    =
                                    
                                       
                                          
                                             
                                                L
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          ij
                                       
                                    
                                    (
                                    h
                                    )
                                    -
                                    h
                                    .
                                 
                              
                           Again, we can use 
                              
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                              
                            to characterize the two tag point patterns 
                              
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       P
                                    
                                    
                                       j
                                    
                                 
                              
                            as follows: 
                              
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 >
                                 0
                              
                            indicates attraction between 
                              
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       P
                                    
                                    
                                       j
                                    
                                 
                                 ;
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 =
                                 0
                              
                            means we have independence between 
                              
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       P
                                    
                                    
                                       j
                                    
                                 
                              
                           ; whereas 
                              
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       ij
                                    
                                 
                                 (
                                 h
                                 )
                                 <
                                 0
                              
                            implies repulsion between 
                              
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       P
                                    
                                    
                                       j
                                    
                                 
                              
                           . In the rest of the paper, assuming 
                              
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                                 
                                 ≠
                                 
                                 
                                    
                                       P
                                    
                                    
                                       j
                                    
                                 
                              
                           , we refer this function to as cross-D function.


                           Example [Cross-D function]: To explain our ideas, assume we have ‘‘Old Royal Naval College" and ‘‘University of Greenwich" as two specific tags, both referring to areas in London. Then, consider a cross-L function 
                              
                                 
                                    
                                       L
                                    
                                    
                                       12
                                    
                                 
                              
                            between two tag point patterns, 
                              
                                 
                                    
                                       P
                                    
                                    
                                       1
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       P
                                    
                                    
                                       2
                                    
                                 
                              
                           , as specified in Definition 3.2, related to these two tags, respectively. A general observation is that the University of Greenwich
                              6
                              See http://en.wikipedia.org/wiki/University_of_Greenwich.
                           
                           
                              6
                            is located within the area of the Old Naval College.
                              7
                              See http://en.wikipedia.org/wiki/Old_Royal_Naval_College.
                           
                           
                              7
                            Thus, although the tags are syntactically different, they are connected and refer to the same geographical entity. Within our spatial statistics, this means that pictures tagged with ‘‘Old Royal Naval College" are spatially attracted to pictures tagged with University of Greenwich (See Fig. 1
                           a and b). To further illustrate this relatedness, consider the corresponding cross-D function 
                              
                                 
                                    
                                       D
                                    
                                    
                                       12
                                    
                                 
                                 (
                                 h
                                 )
                              
                            in Fig. 2
                           , varying the values of h between 0 and 2km. Using the statistical test described above, we can check the validity of our observation about the spatial attraction among the studied point patterns. As can be seen in Fig. 2, the graph of 
                              
                                 
                                    
                                       D
                                    
                                    
                                       12
                                    
                                 
                                 (
                                 h
                                 )
                              
                            (denoted as “observed” in the figure) is greater than the upper envelope (denoted as “higher” in the figure), at all values of h.
                              8
                              We computed the envelope by simulating the random labeling with a null model and 99 simulations.
                           
                           
                              8
                            Hence, based on our distribution “rules” we have “attraction” between the two point patterns.

In the following, we elaborate on how we extract our set of features based on the spatial characteristics of a tag point pattern, and the interaction between two spatial point patterns derived from the cross-D function.

Recall that the primary goal of this work is to find effective ways to exploit the spatial characteristics of tags to improve the retrieval performance. To achieve this, we investigate applying methods from spatial statistics to explore the spatial distribution of tags. In brief, we apply a collection of features derived from the bivariate Ripley’s cross-L function presented in Eq. (4) and the Ripley’s L-function for a single tag point pattern. To show how we do this, in Section 4.1 we present our method for extraction of general spatial features of tags, including both single and term-to-term spatial features. In Section 4.2, we focus on special tags, such as tags describing point-of-interests, and introduce a method to extract the spatial features for such tags.

We divide the spatial characteristics for tag terms into two main classes: (1) single-term spatial features, which determine the aggregation tendency of a single tag spatial point pattern; and (2) term-to-term spatial similarity features, which are related to the geographical similarity between the spatial profiles of two considered tags 
                           
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                           
                         and 
                           
                              
                                 
                                    w
                                 
                                 
                                    j
                                 
                              
                           
                        . In the following we explain how we extract both these features.

Assume we have a scale interval 
                           
                              S
                              =
                              [
                              0
                              …
                              R
                              ]
                           
                         in kilometres, and that we divide the set of the induced intervals into K discrete and equidistant points 
                           
                              
                                 
                                    h
                                 
                                 
                                    k
                                 
                              
                              ,
                              k
                              =
                              1
                              ,
                              …
                              K
                           
                        . To extract both the single and term-to-term spatial features, we will use the D-function from Section 3.2.1, estimated over this interval.

To capture the clustering tendency of tag point patterns for single terms, in Ruocco and Ramampiaro (2012) we introduced two features called 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    SUM
                                 
                              
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    MAX
                                 
                              
                           
                         estimators. 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    SUM
                                 
                              
                           
                         is computed by extracting the positive area within the intersection between the D-function and the curve representing the null hypothesis; whereas 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    MAX
                                 
                              
                           
                         is the maximum distance between the D-function and the null hypothesis curve. If we assume that 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                           
                         represents the estimated value of our D-function for a tag point pattern 
                           
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           
                        . Then, for a given tag term 
                           
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                           
                        ,
                           
                              (6)
                              
                                 
                                    
                                       
                                          
                                             I
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       SUM
                                    
                                 
                                 (
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          =
                                          1
                                       
                                       
                                          K
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            D
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                
                                                   
                                                      h
                                                   
                                                   
                                                      k
                                                   
                                                
                                                )
                                             
                                             
                                                
                                                   
                                                      Var
                                                      (
                                                      
                                                         
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  ^
                                                               
                                                            
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      )
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                 and
                              
                           
                        
                        
                           
                              (7)
                              
                                 
                                    
                                       
                                          
                                             I
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       MAX
                                    
                                 
                                 (
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          k
                                          =
                                          1
                                          ,
                                          …
                                          K
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            D
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                
                                                   
                                                      h
                                                   
                                                   
                                                      k
                                                   
                                                
                                                )
                                             
                                             
                                                
                                                   
                                                      Var
                                                      (
                                                      
                                                         
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  ^
                                                               
                                                            
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      )
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        In other words, 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    SUM
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         is computed by summing the difference between the D-function and the null hypothesis. A high value of 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    SUM
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         means that there is a strong aggregation among pictures that are annotated with 
                           
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                           
                         and connected to the tag point pattern 
                           
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           
                        . Further, 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    MAX
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         is calculated by estimating the maximum normalized distance between the D-function and the null hypothesis. Hence, it determines the highest positive difference between the K-function of the tag point pattern that the D-function was derived from and the null hypothesis. A high value of 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    MAX
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         means that the tag point pattern 
                           
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           
                         contributes to a high degree of clustering.

For the bivariate case, we can do similar estimation of the attraction tendency of two tag point patterns as follows:
                           
                              (8)
                              
                                 
                                    
                                       
                                          
                                             I
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       SUM
                                    
                                 
                                 (
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                                 ,
                                 
                                    
                                       w
                                    
                                    
                                       j
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          =
                                          1
                                       
                                       
                                          K
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            D
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      ij
                                                   
                                                
                                                (
                                                
                                                   
                                                      h
                                                   
                                                   
                                                      k
                                                   
                                                
                                                )
                                             
                                             
                                                
                                                   
                                                      Var
                                                      (
                                                      
                                                         
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  ^
                                                               
                                                            
                                                         
                                                         
                                                            ij
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      )
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                 and
                              
                           
                        
                        
                           
                              (9)
                              
                                 
                                    
                                       
                                          
                                             I
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       MAX
                                    
                                 
                                 (
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                                 ,
                                 
                                    
                                       w
                                    
                                    
                                       j
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          k
                                          =
                                          1
                                          ,
                                          …
                                          K
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            D
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      ij
                                                   
                                                
                                                (
                                                
                                                   
                                                      h
                                                   
                                                   
                                                      k
                                                   
                                                
                                                )
                                             
                                             
                                                
                                                   
                                                      Var
                                                      (
                                                      
                                                         
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  ^
                                                               
                                                            
                                                         
                                                         
                                                            ij
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      )
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                           
                         and 
                           
                              
                                 
                                    w
                                 
                                 
                                    j
                                 
                              
                           
                         are two specific tags with their tag point pattern 
                           
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           
                         and 
                           
                              
                                 
                                    p
                                 
                                 
                                    j
                                 
                              
                           
                        .

Our initial studies have shown the potentials and the usefulness of the above estimators (Ruocco & Ramampiaro, 2012). To apply them in retrieval settings, however, we have to make them more generic, and introduce two new concepts: the Relative Discrete Positive Area (RDPA) and Relative Discrete Maximum Distance (RDMD). The main idea is to extend 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    SUM
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              )
                              ,
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    SUM
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    w
                                 
                                 
                                    j
                                 
                              
                              )
                              ,
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    MAX
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    MAX
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    w
                                 
                                 
                                    j
                                 
                              
                              )
                           
                         by including their behavior at different scales, and not only at a fixed scale. So, let 
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    Sum
                                 
                              
                           
                         denote the function representing the relative discrete positive area between the D-function and the null hypothesis in a given scale interval, and assume 
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    Max
                                 
                              
                           
                         represents the maximum distance within the same considered interval. Then, 
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    Sum
                                 
                              
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    Max
                                 
                              
                           
                         are computed as follows:
                           
                              (10)
                              
                                 
                                    
                                       
                                          
                                             g
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       Sum
                                    
                                 
                                 (
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                                 ,
                                 [
                                 
                                    
                                       h
                                    
                                    
                                       f
                                    
                                 
                                 ,
                                 
                                    
                                       h
                                    
                                    
                                       g
                                    
                                 
                                 ]
                                 )
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          =
                                          f
                                       
                                       
                                          g
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            D
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                
                                                   
                                                      h
                                                   
                                                   
                                                      k
                                                   
                                                
                                                )
                                             
                                             
                                                
                                                   
                                                      Var
                                                      (
                                                      
                                                         
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  ^
                                                               
                                                            
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      )
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                 and
                              
                           
                        
                        
                           
                              (11)
                              
                                 
                                    
                                       
                                          
                                             g
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       Max
                                    
                                 
                                 (
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                                 ,
                                 [
                                 
                                    
                                       h
                                    
                                    
                                       f
                                    
                                 
                                 ,
                                 
                                    
                                       h
                                    
                                    
                                       g
                                    
                                 
                                 ]
                                 )
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          k
                                          =
                                          f
                                          ,
                                          …
                                          g
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            D
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                
                                                   
                                                      h
                                                   
                                                   
                                                      k
                                                   
                                                
                                                )
                                             
                                             
                                                
                                                   
                                                      Var
                                                      (
                                                      
                                                         
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  ^
                                                               
                                                            
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      )
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where f and g, with 
                           
                              f
                              <
                              g
                           
                        , are two indexes related to two points 
                           
                              
                                 
                                    h
                                 
                                 
                                    f
                                 
                              
                           
                         and 
                           
                              
                                 
                                    h
                                 
                                 
                                    g
                                 
                              
                           
                         of the scale interval S. Note that if 
                           
                              f
                              =
                              1
                           
                         and 
                           
                              g
                              =
                              K
                           
                        , then 
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    Sum
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              ,
                              [
                              
                                 
                                    h
                                 
                                 
                                    f
                                 
                              
                              ,
                              
                                 
                                    h
                                 
                                 
                                    g
                                 
                              
                              ]
                              )
                              =
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    SUM
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    Max
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              ,
                              [
                              
                                 
                                    h
                                 
                                 
                                    f
                                 
                              
                              ,
                              
                                 
                                    h
                                 
                                 
                                    g
                                 
                              
                              ]
                              )
                              =
                              
                                 
                                    
                                       
                                          I
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    MAX
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              )
                           
                        . In conclusion, the generalization captures more features, which divide and summarize the spatial characteristics over more sub-intervals within the original scale interval.

For the bivariate case, we apply a similar approach, and compute 
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    Sum
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    w
                                 
                                 
                                    j
                                 
                              
                              ,
                              [
                              
                                 
                                    h
                                 
                                 
                                    f
                                 
                              
                              ,
                              
                                 
                                    h
                                 
                                 
                                    g
                                 
                              
                              ]
                              )
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    Max
                                 
                              
                              (
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    w
                                 
                                 
                                    j
                                 
                              
                              ,
                              [
                              
                                 
                                    h
                                 
                                 
                                    f
                                 
                              
                              ,
                              
                                 
                                    h
                                 
                                 
                                    g
                                 
                              
                              ]
                              )
                           
                         by replacing the 
                           
                              
                                 
                                    D
                                 
                                 
                                    i
                                 
                              
                           
                         function with 
                           
                              
                                 
                                    D
                                 
                                 
                                    ij
                                 
                              
                           
                        .

The features in Eqs. (10) and (11) estimate the deviation of the D-function of the tag point pattern (or the two tag point patterns) from the null hypothesis – i.e., the spatial randomness for a single tag point pattern, and the spatial independence between two tag point patterns, respectively. In addition to this, in our study we observed that for some tags representing point-of-interests, the curve of the D-function related to a tag point pattern tends to be steeper within a short scale sub-interval. Therefore, to also capture such a characteristic, we propose a set of features, called first order spatial features that can extract the information on the shape of the curve of the D-function. In Geometry, the derivative 
                        
                           
                              
                                 
                                    f
                                 
                                 
                                    ′
                                 
                              
                              (
                              x
                              )
                           
                         of a source function 
                           
                              f
                              (
                              x
                              )
                           
                         can generally be used to determine the slope coefficient of the tangent of the source curve at a point x. Using this as a starting point, our idea is to analyze the derivative function of the D-function for each sub-interval. Since the D-function is discrete over the scale values 
                           
                              
                                 
                                    h
                                 
                                 
                                    k
                                 
                              
                              ,
                              k
                              =
                              1
                              ,
                              …
                              ,
                              K
                           
                        , we apply the discrete equivalent of the derivative function, or more specifically the forward finite difference (Smith, 1985), as follows:
                           
                              (12)
                              
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       i
                                    
                                    
                                       ′
                                    
                                 
                                 (
                                 h
                                 )
                                 =
                                 
                                    
                                       Δ
                                    
                                    
                                       l
                                       ,
                                       m
                                    
                                 
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 h
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       h
                                    
                                    
                                       l
                                    
                                 
                                 )
                                 -
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 
                                    
                                       h
                                    
                                    
                                       m
                                    
                                 
                                 )
                                 ,
                                 
                                 ∀
                                 
                                    
                                       h
                                    
                                    
                                       l
                                    
                                 
                                 <
                                 
                                    
                                       h
                                    
                                    
                                       m
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    h
                                 
                                 
                                    l
                                 
                              
                           
                         and 
                           
                              
                                 
                                    h
                                 
                                 
                                    m
                                 
                              
                           
                         are two specific scale points. Note that the value of 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                                 
                                    ′
                                 
                              
                              (
                              h
                              )
                           
                         is positive at each scale point where the D-function increases, but negative at all scale points where D-function decreases. Moreover, the higher the positive value of the 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                                 
                                    ′
                                 
                              
                              (
                              h
                              )
                           
                         is, the more the intensity of the function increases. Finally, for the bivariate form of the D-function, we can compute the derivative of 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    ij
                                 
                              
                              (
                              h
                              )
                           
                         as 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    ij
                                 
                                 
                                    ′
                                 
                              
                              (
                              h
                              )
                           
                         by extending Eq. (12) to take into account both 
                           
                              
                                 
                                    w
                                 
                                 
                                    i
                                 
                              
                           
                         and 
                           
                              
                                 
                                    w
                                 
                                 
                                    j
                                 
                              
                           
                        .

Besides determining the slope of the D-function, we are also interested in knowing about the concavity of this function at some point x. This gives us more information about the structure or the shape of the function, thus providing us more spatial features. We call such features second order spatial features, which we get by doing further derivation of the function 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                                 
                                    ′
                                 
                              
                              (
                              h
                              )
                           
                        . As before, we estimate the resulting 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                                 
                                    ″
                                 
                              
                              (
                              h
                              )
                           
                         function by finite differences. This means that we can extract the spatial features from 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                                 
                                    ′
                                 
                              
                              (
                              h
                              )
                              ,
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    ij
                                 
                                 
                                    ′
                                 
                              
                              (
                              h
                              )
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                                 
                                    ″
                                 
                              
                              (
                              h
                              )
                              ,
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    ij
                                 
                                 
                                    ″
                                 
                              
                              (
                              h
                              )
                           
                         using the positive area and the maximum distance estimators in Eqs. (10) and (11).

In the next section, we show how the spatial features presented above are useful, especially when used in a query expansion framework for event-based image retrieval.

Query expansion techniques have been one of the most studied approaches within the information retrieval field since the work by Maron et al. (1960). However, new application areas have made query expansion still needed in order to improve the retrieval effectiveness (Carpineto & Romano, 2012). Nevertheless, reinventing query expansion techniques is not the focus of this work, per se. Rather, we use it as a framework to evaluate the effectiveness of our proposed method on event-related image retrieval. In this section, we specifically elaborate on how we use our proposed spatial features within a query expansion framework. In addition, we explain how spatial features can be combined with temporal features for better retrieval performance.

A general query expansion model is a post-processing step in a retrieval system that expand and re-weight an original query with terms from top-k retrieved documents that are assumed to be pseudo-relevant. Such top-k retrieved documents are also called feedback documents.

The Kullback–Leibler divergence-based approach (or just KL-divergence) is a query expansion approach that has been proven effective focusing on retrieval performance (Lafferty & Zhai, 2001). The main idea with KL-divergence is to analyze the term distributions, and maximize the divergence between the distribution of the terms from the top-k retrieved documents and the distribution of terms over the entire collection. The terms chosen for the query expansion are those contributing to the highest divergence – i.e., the terms having the highest so-called KL-scores (Carpineto et al., 2001). To compute the KL-score for a specific term t in the feedback documents, the following equation is used (Carpineto et al., 2001):
                           
                              (13)
                              
                                 KL
                                 =
                                 
                                    
                                       P
                                    
                                    
                                       Rel
                                    
                                 
                                 (
                                 t
                                 )
                                 log
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      P
                                                   
                                                   
                                                      Rel
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                             
                                                
                                                   
                                                      P
                                                   
                                                   
                                                      Coll
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    P
                                 
                                 
                                    Rel
                                 
                              
                              (
                              t
                              )
                           
                         and 
                           
                              
                                 
                                    P
                                 
                                 
                                    Coll
                                 
                              
                              (
                              t
                              )
                           
                         are the probability that t appears in the top-k documents and the collection, respectively. 
                           
                              
                                 
                                    P
                                 
                                 
                                    Rel
                                 
                              
                              (
                              t
                              )
                           
                         can be estimated by the normalized term frequency of t in the top-k documents, while 
                           
                              
                                 
                                    P
                                 
                                 
                                    Coll
                                 
                              
                              (
                              t
                              )
                           
                         can be computed as the normalized frequency of t in the entire collection. This also means that using Eq. (13), terms with low probability in the entire collection and high probability on the retrieved top-k documents have the highest KL-score.

After the expansion terms have been selected, we can proceed to re-weighting the query terms. A classical approach for this is the Rocchio’s algorithm (Rocchio, 1971) using the Rocchio’s Beta equation (Pérez-Agüera & Araujo, 2008), given by:
                           
                              (14)
                              
                                 
                                    
                                       w
                                    
                                    
                                       ˆ
                                    
                                 
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       q
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             tf
                                          
                                          
                                             
                                                
                                                   q
                                                
                                                
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         q
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          max
                                       
                                       
                                          
                                             tf
                                          
                                          
                                             q
                                          
                                       
                                    
                                 
                                 +
                                 β
                                 
                                    
                                       w
                                       (
                                       
                                          
                                             t
                                          
                                          
                                             q
                                          
                                       
                                       )
                                    
                                    
                                       
                                          max
                                       
                                       w
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    w
                                 
                                 
                                    ˆ
                                 
                              
                              (
                              
                                 
                                    t
                                 
                                 
                                    q
                                 
                              
                              )
                           
                         denotes the new weight of a term 
                           
                              
                                 
                                    t
                                 
                                 
                                    q
                                 
                              
                           
                         of the query, 
                           
                              w
                              (
                              
                                 
                                    t
                                 
                                 
                                    q
                                 
                              
                              )
                           
                         is the weight from the expansion model – i.e., 
                           
                              
                                 
                                    KL
                                 
                                 
                                    Div
                                 
                              
                              (
                              
                                 
                                    t
                                 
                                 
                                    q
                                 
                              
                              )
                              ,
                              max
                              w
                           
                         is the maximum weight from the expanded weight model, 
                           
                              max
                              
                                 
                                    tf
                                 
                                 
                                    q
                                 
                              
                           
                         is the maximum term frequency in the query, and 
                           
                              
                                 
                                    tf
                                 
                                 
                                    
                                       
                                          q
                                       
                                       
                                          
                                             
                                                t
                                             
                                             
                                                q
                                             
                                          
                                       
                                    
                                 
                              
                           
                         denotes the frequency of the term in the query.

Since KL divergence is currently one of the state-of-the-art query expansion approaches, it has been the natural baseline approach for our experiments.

As can be inferred from our discussion in previous sections, the approach proposed in this paper concerns using geo-spatio temporal features in query expansion frameworks. In particular, we develop a learning-based approach to choose good expansion terms and maximize the retrieval performance.


                        Fig. 3
                         shows the principle behind our approach. As shown in this figure, the process is divided into two main parts consisting of an offline processing and an online search module. In the offline part, we mainly focus on building a classification model for selecting good candidate terms. In the online part, on the other hand, the main focus is on using the model in a search context to select the actual – previously unseen – candidate expansion terms. Algorithm 1 summarizes the steps in the query expansion (QE) process.
                           Algorithm 1
                           Query expansion procedure 
                                 
                                    
                                       
                                       
                                          
                                             1: Run query 
                                                
                                                   
                                                      Q
                                                   
                                                 applying ranking model r
                                             
                                          
                                          
                                             2: Get the set D of top-N relevant docs
                                          
                                          
                                             3: Extract unique tags from D and get the candidate expansion term set 
                                                   
                                                      E
                                                   
                                                
                                             
                                          
                                          
                                             4: for 
                                                
                                                   
                                                      
                                                         
                                                            e
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                   
                                                 
                                                
                                                   
                                                      ∈
                                                   
                                                 
                                                
                                                   
                                                      E
                                                   
                                                 
                                                do
                                             
                                          
                                          
                                             5: 
                                                
                                                   
                                                      X
                                                   
                                                 
                                                
                                                   
                                                      ←
                                                   
                                                 
                                                
                                                   
                                                      ExtractTermFeats
                                                      (
                                                      
                                                         
                                                            e
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      ,
                                                      Q
                                                      )
                                                   
                                                 
                                                ▷ Section 5.2.1
                                             
                                          
                                          
                                             6: 
                                                
                                                   
                                                      Y
                                                   
                                                 
                                                
                                                   
                                                      ←
                                                   
                                                 
                                                
                                                   
                                                      ExtractTemporalFeats
                                                      (
                                                      
                                                         
                                                            e
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      ,
                                                      Q
                                                      )
                                                   
                                                 
                                                ▷ Section 5.2.1
                                             
                                          
                                          
                                             7: 
                                                
                                                   
                                                      Z
                                                   
                                                 
                                                
                                                   
                                                      ←
                                                   
                                                 
                                                
                                                   
                                                      ExtractGeoFeats
                                                      (
                                                      
                                                         
                                                            e
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      ,
                                                      Q
                                                      )
                                                   
                                                 
                                                ▷ Section 5.2.1, Section 5.2.2
                                             
                                          
                                          
                                             8: 
                                                Calculate confidence value Conf 
                                                ▷ Section 5.2.3, Fig. 4
                                             
                                          
                                          
                                             9: 
                                                Combine KL score and confidence value Conf in a single score 
                                                   
                                                      →
                                                   
                                                 
                                                
                                                   
                                                      
                                                         
                                                            KL
                                                         
                                                         
                                                            Final
                                                         
                                                      
                                                      (
                                                      Q
                                                      ,
                                                      
                                                         
                                                            e
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                ▷ Section 5.2.3
                                             
                                          
                                          
                                             10: end for
                                             
                                          
                                          
                                             11: Rank 
                                                
                                                   
                                                      
                                                         
                                                            e
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      ∈
                                                      E
                                                   
                                                 terms according to 
                                                   
                                                      
                                                         
                                                            KL
                                                         
                                                         
                                                            Final
                                                         
                                                      
                                                      (
                                                      
                                                         
                                                            e
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                      )
                                                   
                                                 
                                                
                                                   
                                                      →
                                                   
                                                 
                                                
                                                   
                                                      
                                                         
                                                            E
                                                         
                                                         
                                                            Rank
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             12: Re-build 
                                                
                                                   
                                                      Q
                                                   
                                                 with the top-k terms from 
                                                   
                                                      
                                                         
                                                            E
                                                         
                                                         
                                                            Rank
                                                         
                                                      
                                                   
                                                 
                                                
                                                   
                                                      →
                                                   
                                                 
                                                
                                                   
                                                      
                                                         
                                                            Q
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             13: Run Query 
                                                
                                                   
                                                      
                                                         
                                                            Q
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                 by using ranking model r
                                             
                                          
                                       
                                    
                                 
                              
                           

An important question is: how do we select the candidate expansion terms? To answer this question, recall 
                           
                              Q
                              =
                              {
                              
                                 
                                    q
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    q
                                 
                                 
                                    n
                                 
                              
                              }
                           
                         is query consisting of n terms, and 
                           
                              E
                              =
                              {
                              
                                 
                                    e
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    e
                                 
                                 
                                    m
                                 
                              
                              }
                           
                         denote the set of candidate terms for the query expansion process. A good candidate expansion term 
                           
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                           
                         is a term that improves the retrieval performance of the original query 
                           
                              Q
                           
                        . Building on a similar principle as the approach in Cao et al. (2008), we find 
                           
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                           
                         by computing the improvements in the average precisions (AP). The idea is as follows. First, for any 
                           
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                           
                         we compute the average precisions gained from running the original query 
                           
                              Q
                           
                        . We call this 
                           
                              AP
                              (
                              Q
                              )
                           
                        . Then, we calculate 
                           
                              AP
                              (
                              Q
                              +
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                              )
                           
                        , which is average precision for the query we get from expanding 
                           
                              Q
                           
                         with a specific candidate term expansion 
                           
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                           
                        . Finally, we find out the improvement in term of average precision from the original query to the expanded on by computing
                           
                              (15)
                              
                                 
                                    
                                       AP
                                    
                                    
                                       diff
                                    
                                 
                                 (
                                 Q
                                 ,
                                 
                                    
                                       e
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       AP
                                       (
                                       Q
                                       +
                                       
                                          
                                             e
                                          
                                          
                                             i
                                          
                                       
                                       )
                                       -
                                       AP
                                       (
                                       Q
                                       )
                                    
                                    
                                       AP
                                       (
                                       Q
                                       )
                                    
                                 
                                 .
                              
                           
                        In other words, a candidate expansion term 
                           
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                           
                         is a good term if 
                           
                              
                                 
                                    AP
                                 
                                 
                                    diff
                                 
                              
                              (
                              Q
                              ,
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         is positive. Otherwise, it is considered as a bad term. In practice, a threshold θ is used to control the difference value, such that 
                           
                              
                                 
                                    AP
                                 
                                 
                                    diff
                                 
                              
                              (
                              Q
                              ,
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                              )
                              >
                              θ
                           
                         means we have a good expansion term, whereas 
                           
                              
                                 
                                    AP
                                 
                                 
                                    diff
                                 
                              
                              (
                              Q
                              ,
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                              )
                              <
                              θ
                           
                         means 
                           
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                           
                         is a bad term. Cao et al. (2008) suggest 
                           
                              θ
                              =
                              0.005
                           
                         as the default threshold. However, because the application area of Cao et al. (2008) is mainly different from ours, we decided to do an empirical study with different classification algorithms to find the optimal value of θ (see Section 7.1).

To perform the actual term selection, we define the selection task as a binary classification problem. The main idea is to learn a classifier to discriminate the good expansion terms from the bad ones. Thus, we use Eq. (15) as a basis for the learning process, and to define the positive examples for the classifier. As we will discuss in Section 7, the main advantage with this approach is its effectiveness. However, to achieve good results, selection of features is a crucial task. Below, we discuss how we select the feature set that can be used to represent each expansion term 
                           
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                           
                        . Thereafter, we explain how we use a classifier to compute a confidence value as function of 
                           
                              
                                 
                                    e
                                 
                                 
                                    i
                                 
                              
                           
                        , as part of the retrieval process. Finally, we present a way to combine this value with the baseline KL-score of the same candidate term to re-rank the set of candidate expansion terms 
                           
                              E
                           
                        .

Selecting the right set of features has a direct impact on the accuracy of a classification algorithm. This is also one of the reasons we emphasize the importance of studying the effects of selection of features in the end (retrieval) results. To learn a classifier, we define a vector of features for each candidate expansion term e from the top-k retrieved items, given a query 
                              
                                 Q
                                 =
                                 {
                                 
                                    
                                       q
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       q
                                    
                                    
                                       2
                                    
                                 
                                 ,
                                 …
                                 ,
                                 
                                    
                                       q
                                    
                                    
                                       n
                                    
                                 
                                 }
                              
                           . Table 1
                            lists the features we study in this work. We group them into three sets of features: term, temporal and spatial features. Since our focus is on event-based retrieval, this calls for features beyond those describing document contents only.


                           Term Features (
                           
                              
                                 X
                              
                           
                           ): The term features consist of features that are used to characterize a document content. They are chosen based on the hypothesis that terms that contribute to improve the retrieval effectiveness are those being most frequent and distinctive (Cao et al., 2008). Existing studies suggest using features related to the distribution of the candidate term e in the feedback documents and the whole collection, and those capturing the co-occurrence of e with the terms in the original query 
                              
                                 Q
                              
                            (Cao et al., 2008; Lin et al., 2011). It is, however, worth noting that these features has mainly been applied in full-text document retrieval, where term redundancy is normal, and thus term frequency would be an important feature. Since a tag generally appears only once for each picture, term frequency as a feature has generally no impact on the classification accuracy. For this reason, in our experiments, our set of term features does not include term frequency but other traditional statistical features such as document frequency (DF) (Baeza-Yates & Ribeiro-Neto, 2011). As part of evaluating our approach, we will use the term features in implementing the baseline approach for our experiments. This will also allow us to assess how well the features suggested in this work improve the retrieval performance.


                           Temporal Features (
                           
                              
                                 Y
                              
                           
                           ): Once again, since our focus is on event retrieval, we are interested in capturing how each term in image tags contributes to characterizing the images over time periods. Therefore, we need a set of statistical features that represent the temporal distribution of the term in the whole collection. Here, we propose single term features and term-to-term features related to the temporal correlation of the candidate expansion term and the query terms. More specifically, to capture the characteristics of the temporal distribution of a single term, we adopt the concept of kurtosis defined as 
                              
                                 
                                    
                                       μ
                                    
                                    
                                       4
                                    
                                 
                                 /
                                 
                                    
                                       μ
                                    
                                    
                                       2
                                    
                                    
                                       2
                                    
                                 
                              
                           , where μ is the mean and 
                              
                                 
                                    
                                       μ
                                    
                                    
                                       j
                                    
                                 
                              
                            is the j-th central moment. Kurtosis were originally proposed by Jones and Diaz (2007) to capture the dynamics of a time series. It can be used to quantify the probability distribution concentrated in peaks of a time series – i.e., the “peakedness”. In this work, we propose to measure the peakedness for both a single candidate expansion term e (
                              
                                 KURT
                                 1
                              
                           ), and the combination of a candidate expansion term e with a term 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            from the original query (
                              
                                 KURT
                                 12
                              
                           ).

In addition to this, we are interested in knowing about the randomness of terms over time. A way to detect such a randomness is to use autocorrelation (Box, Jenkins, & Reinsel, 2013). In general, autocorrelation is computed by finding the statistical correlation between two values of the same variable at a given time 
                              
                                 
                                    
                                       t
                                    
                                    
                                       l
                                    
                                 
                              
                            and another time 
                              
                                 
                                    
                                       t
                                    
                                    
                                       l
                                       +
                                       m
                                    
                                 
                              
                           . Such values can, for example, be the number of occurrences of a term e at specific times. The hypothesis is that bursty events in a time series normally contribute to a high autocorrelation value (Jones & Diaz, 2007). To capture this, we compute the first order autocorrelation of a time series for both a single candidate expansion term e (
                              
                                 AC
                                 1
                              
                           ), and the combination of a candidate expansion term e with a term 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            from the original query (
                              
                                 AC
                                 12
                              
                           ). Finally, to measure the temporal similarity between the time series of two different terms 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            and e, we can apply the cross-correlation measure (CC) (Chien & Immorlica, 2005; Radinsky et al., 2011). Cross-correlation is computed by assessing the correlation of the frequency of 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            and e to measure the relationship between 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            and e. To compute the temporal features, we varied the time windows or bins from one day to seven days, with which seven days gave the best results. To summarize, we investigate how combining previously proposed temporal features would affect the retrieval performance. These have proven successful in other more general information retrieval approaches, but the way we analyze the effects of their combination within event-related image retrieval have not been done before.


                           Spatial Features (
                           
                              
                                 Z
                              
                           
                           ): As explained in Section 1, the concept of event is strongly related to the spatial dimension – i.e., geographical location. We hypothesize that a good expansion term is spatially correlated with at least one of the query terms. This is the main reason we study the impact of clustering tendency, with respect to the spatial distribution for the pictures annotated with the candidate expansion terms. As part of this, we compute the spatial features as presented in Section 4.1. For each pair of terms e and 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                           , we first extract the set of geographical world tiles 
                              
                                 
                                    
                                       T
                                    
                                    
                                       
                                          
                                             q
                                          
                                          
                                             i
                                          
                                       
                                       ,
                                       e
                                    
                                 
                              
                            containing spatial points related to documents annotated with 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                           , spatial points associated to documents annotated with e, and those related to documents annotated with both 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            and e. Next, we extract a set of six spatial feature vectors from each tile 
                              
                                 
                                    
                                       T
                                    
                                    
                                       
                                          
                                             q
                                          
                                          
                                             i
                                          
                                       
                                       ,
                                       e
                                    
                                 
                              
                           . The first three feature vectors are the vectors computed using 
                              
                                 
                                    
                                       
                                          
                                             g
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       Max
                                    
                                 
                              
                            – i.e., the relative discrete maximum distance function for the specified tag point pattern (see Eq. (11)), consisting of 
                              
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             →
                                          
                                       
                                    
                                    
                                       Max
                                    
                                 
                                 (
                                 e
                                 )
                                 ,
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             →
                                          
                                       
                                    
                                    
                                       Max
                                    
                                 
                                 (
                                 e
                                 +
                                 Q
                                 )
                                 ,
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             →
                                          
                                       
                                    
                                    
                                       Max
                                    
                                 
                                 (
                                 e
                                 ,
                                 Q
                                 )
                              
                           . The second set of feature vectors are based on 
                              
                                 
                                    
                                       
                                          
                                             g
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       Sum
                                    
                                 
                              
                            – i.e., the relative discrete positive area function (see Eq. (10)), consisting of 
                              
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             →
                                          
                                       
                                    
                                    
                                       Sum
                                    
                                 
                                 (
                                 e
                                 )
                                 ,
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             →
                                          
                                       
                                    
                                    
                                       Sum
                                    
                                 
                                 (
                                 e
                                 +
                                 Q
                                 )
                                 ,
                                 
                                    
                                       
                                          
                                             D
                                          
                                          
                                             →
                                          
                                       
                                    
                                    
                                       Sum
                                    
                                 
                                 (
                                 e
                                 ,
                                 Q
                                 )
                              
                           . For all the extracted features, we compute the values of the functions by varying the distance values from 0 to 
                              
                                 1
                                 km
                              
                           , with a step of 
                              
                                 0.1
                                 km
                              
                           . Finally, for both the resulting first and second derivative of 
                              
                                 
                                    
                                       
                                          
                                             g
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       Max
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             g
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       Sum
                                    
                                 
                              
                           , we perform similar operations as described in Section 4.2. Note that as can be inferred from this, the input query 
                              
                                 Q
                              
                            used to extract the features may have varying dimensions. However, this does not cause problem but may only affect the number of spatial points used to build the feature vectors, which is, according to Eqs. (2)–(5), implicitly decided by the value of the distance scale h.

In this work, we study the impacts of with these features combining the temporal features. In Section 7, we analyze their usefulness and importance with respect to improving the retrieval performance.

Our dataset has been built from a collection of Flickr pictures covering the whole world map. For this reason, the spatial distribution of the pictures is not uniform. To cope with this, we divide the entire world map into a number of tiles. More specifically, we divide the world map into grids with size of one latitude degree and one longitude degree. We span the latitude in the range of 
                              
                                 [
                                 -
                                 180
                                 ,
                                 …
                                 ,
                                 +
                                 180
                                 ]
                              
                            degrees, while the longitude in 
                              
                                 [
                                 -
                                 70
                                 ,
                                 …
                                 ,
                                 +
                                 70
                                 ]
                              
                           , instead of 
                              
                                 [
                                 -
                                 90
                                 ,
                                 …
                                 ,
                                 +
                                 90
                                 ]
                              
                            degrees to avoid the Arctic and Antarctic areas, since these areas have normally poor photographic activity. The width of each tile for each (or one) degree of latitude is constant, and has a size of 111km, while following the latitude values, the tile heights vary from around 0 at the poles to around 111km at the equator. This would give us in total 50,400 tiles. However, to restrict the computation cost, we only consider tiles containing a significant number of pictures – i.e., more than 1000 pictures. Let such tiles be significant tiles, denoted by 
                              
                                 T
                              
                           .

With this in mind, we extract the spatial feature vectors for a pair of terms 
                              
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       w
                                    
                                    
                                       j
                                    
                                 
                              
                            – e.g., a query term 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            and an expansion term e, as follows. First, let 
                              
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 {
                                 
                                    
                                       T
                                    
                                    
                                       
                                          
                                             i
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 ,
                                 
                                    
                                       T
                                    
                                    
                                       
                                          
                                             i
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 …
                                 ,
                                 
                                    
                                       T
                                    
                                    
                                       
                                          
                                             i
                                          
                                          
                                             N
                                          
                                       
                                    
                                 
                                 }
                              
                            be the set of N tiles containing pictures tagged with 
                              
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                              
                           , and 
                              
                                 
                                    
                                       T
                                    
                                    
                                       j
                                    
                                 
                                 =
                                 {
                                 
                                    
                                       T
                                    
                                    
                                       
                                          
                                             j
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 ,
                                 
                                    
                                       T
                                    
                                    
                                       
                                          
                                             j
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 …
                                 ,
                                 
                                    
                                       T
                                    
                                    
                                       
                                          
                                             j
                                          
                                          
                                             M
                                          
                                       
                                    
                                 
                                 }
                              
                            be the set of M tiles containing pictures tagged with 
                              
                                 
                                    
                                       w
                                    
                                    
                                       j
                                    
                                 
                              
                           . Then, to find a significant tile, 
                              
                                 
                                    
                                       T
                                    
                                    
                                       ij
                                    
                                 
                                 ∈
                                 T
                              
                           , containing pictures tagged with both 
                              
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       w
                                    
                                    
                                       j
                                    
                                 
                              
                           , we merge the two sets 
                              
                                 
                                    
                                       T
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       T
                                    
                                    
                                       j
                                    
                                 
                              
                           . Finally, to get the feature vectors, for each tile, 
                              
                                 
                                    
                                       T
                                    
                                    
                                       ij
                                    
                                 
                              
                           , we compute the bivariate D-function and the corresponding estimators for the tag point patterns for both 
                              
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       w
                                    
                                    
                                       j
                                    
                                 
                              
                            (see Section 4).

To have a data structure allowing efficient feature extraction operations, we index each tile 
                              
                                 
                                    
                                       T
                                    
                                    
                                       l
                                    
                                 
                              
                            as a document composed by the set 
                              
                                 
                                    
                                       W
                                    
                                    
                                       
                                          
                                             T
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                                 =
                                 {
                                 
                                    
                                       w
                                    
                                    
                                       
                                          
                                             l
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 ,
                                 …
                                 ,
                                 
                                    
                                       w
                                    
                                    
                                       
                                          
                                             l
                                          
                                          
                                             |
                                             
                                                
                                                   T
                                                
                                                
                                                   l
                                                
                                             
                                             |
                                          
                                       
                                    
                                 
                                 }
                              
                            of all tags annotating the pictures from each tile 
                              
                                 
                                    
                                       T
                                    
                                    
                                       l
                                    
                                 
                              
                           . To do this, we create an inverted index, 
                              
                                 I
                              
                           , for each tag 
                              
                                 
                                    
                                       w
                                    
                                    
                                       
                                          
                                             l
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                                 ∈
                                 
                                    
                                       W
                                    
                                    
                                       
                                          
                                             T
                                          
                                          
                                             l
                                          
                                       
                                    
                                 
                              
                           , which we can formulate formally as follows:
                              
                                 (16)
                                 
                                    I
                                    :
                                    
                                       
                                          {
                                          
                                             
                                                w
                                             
                                             
                                                i
                                             
                                          
                                          ⟶
                                          {
                                          <
                                          
                                             
                                                T
                                             
                                             
                                                
                                                   
                                                      i
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                          
                                          ,
                                          
                                             
                                                tf
                                             
                                             
                                                
                                                   
                                                      T
                                                   
                                                   
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          (
                                          
                                             
                                                w
                                             
                                             
                                                i
                                             
                                          
                                          )
                                          >
                                          ,
                                          <
                                          
                                             
                                                T
                                             
                                             
                                                
                                                   
                                                      i
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          ,
                                          
                                             
                                                tf
                                             
                                             
                                                
                                                   
                                                      T
                                                   
                                                   
                                                      
                                                         
                                                            i
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          (
                                          
                                             
                                                w
                                             
                                             
                                                i
                                             
                                          
                                          )
                                          >
                                          ,
                                          …
                                          }
                                          }
                                       
                                       
                                          i
                                       
                                    
                                    .
                                 
                              
                           This means that each tag is linked to an inverted list containing the id of the tile and the term frequency, 
                              
                                 
                                    
                                       tf
                                    
                                    
                                       
                                          
                                             T
                                          
                                          
                                             
                                                
                                                   i
                                                
                                                
                                                   1
                                                
                                             
                                          
                                       
                                    
                                 
                                 (
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                           , of a tag, 
                              
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                              
                           .


                           Selection of the Tiles for Spatial Features Extraction. To select the tiles for spatial feature extraction, we are mainly interested in the tiles containing pictures that are annotated with both at least one term in 
                              
                                 Q
                              
                            and a candidate expansion term e. However, to make the spatial features suitable for our classifier, we select only one tile that is most representative to a specific input query 
                              
                                 Q
                              
                           . We call this the best tile. To do this, we first run 
                              
                                 Q
                              
                            on our dataset. Then, we select the first K geotagged pictures from the resulting ranked list. Finally, we select the tile containing the highest TF-IDF-based ranking score. For simplicity, by treating tiles as documents, we index and search them using Solr
                           
                              9
                              
                                 http://lucene.apache.org/solr/.
                           
                           
                              9
                            search platform. Thus, the resulting list of tiles is ranked using Lucene scores.
                              10
                              
                                 http://lucene.apache.org/core/3_6_2/scoring.html.
                           
                           
                              10
                           
                        

We now explain how we perform the re-weighting process using the sets of features presented in the previous sections.


                           Fig. 4
                            shows a part of the term selection and re-weighting process. As depicted in the figure, the Temporal Classifier is trained with positive and negative examples using only term and temporal features, while the Spatio-Temporal Classifier is trained with instances using the complete set of features. Thus, given a query term 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            and the candidate expansion term e, we first extract the complete set of features. Thereafter, the input instances are classified with both of the classifiers. Finally, a Final Score Selection module designates the final confidence value. By default, our system produces scores based on all three feature sets. However, we might have a situation in which we do not have geo-tagged pictures that are annotated with both e and any 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                                 ∈
                                 Q
                              
                           . Thus, producing the spatial feature vectors from the functions 
                              
                                 
                                    
                                       g
                                    
                                    
                                       Max
                                    
                                 
                                 (
                                 Q
                                 +
                                 e
                                 )
                              
                            and 
                              
                                 
                                    
                                       g
                                    
                                    
                                       Sum
                                    
                                 
                                 (
                                 Q
                                 +
                                 e
                                 )
                              
                            would be hard. If this happens, then the final score from the Final Score Selection module is based on the term and temporal features only.

We call the final confidence score for good candidate expansion terms from our expansion term selection process 
                              
                                 Conf
                                 (
                                 +
                                 |
                                 e
                                 )
                              
                           . To produce the final Kullback–Leibler (KL) score for the query expansion process, we combine 
                              
                                 Conf
                                 (
                                 +
                                 |
                                 e
                                 )
                              
                            with the term-based KL-score as follows:
                              
                                 (17)
                                 
                                    
                                       
                                          KL
                                       
                                       
                                          Final
                                       
                                    
                                    (
                                    e
                                    )
                                    =
                                    α
                                    KL
                                    (
                                    e
                                    )
                                    +
                                    (
                                    1
                                    -
                                    α
                                    )
                                    Conf
                                    (
                                    +
                                    |
                                    e
                                    )
                                    .
                                 
                              
                           Note that to allow this combination, both 
                              
                                 Conf
                                 (
                                 +
                                 |
                                 e
                                 )
                              
                            and 
                              
                                 KL
                                 (
                                 e
                                 )
                              
                            values are normalized. Here, α is a constant used to decide which component should have the highest contribution. That is, 
                              
                                 α
                                 =
                                 1
                              
                            means that we only apply the regular KL-divergence, whereas 
                              
                                 α
                                 =
                                 0
                              
                            means we rely entirely on the classification modules to choose good expansion terms. Since we are interested in the impacts of our expansion terms to the retrieval performance, we let both components to have equal contributions to the final score – i.e., we use 
                              
                                 α
                                 =
                                 0.5
                              
                           .

The confidence value 
                              
                                 Conf
                                 (
                                 +
                                 |
                                 e
                                 )
                              
                            is computed based on the idea that both the temporal and the spatio-temporal classifiers give their contributions exploring terms over different dimensions, and that they complement, rather than extend each other. With this in mind, 
                              
                                 Conf
                                 (
                                 +
                                 |
                                 e
                                 )
                              
                            can be computed as follows:
                              
                                 (18)
                                 
                                    Conf
                                    =
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      0
                                                      ,
                                                   
                                                   
                                                      if
                                                      
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            T
                                                         
                                                      
                                                      <
                                                      0.5
                                                      
                                                      and
                                                      
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            ST
                                                         
                                                      
                                                      <
                                                      0.5
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            T
                                                         
                                                      
                                                      ,
                                                   
                                                   
                                                      if
                                                      
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            T
                                                         
                                                      
                                                      >
                                                      0.5
                                                      
                                                      and
                                                      
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            ST
                                                         
                                                      
                                                      <
                                                      0.5
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            ST
                                                         
                                                      
                                                      ,
                                                   
                                                   
                                                      if
                                                      
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            T
                                                         
                                                      
                                                      <
                                                      0.5
                                                      
                                                      and
                                                      
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            ST
                                                         
                                                      
                                                      >
                                                      0.5
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  Conf
                                                               
                                                               
                                                                  T
                                                               
                                                            
                                                            +
                                                            
                                                               
                                                                  Conf
                                                               
                                                               
                                                                  ST
                                                               
                                                            
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      ,
                                                   
                                                   
                                                      if
                                                      
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            T
                                                         
                                                      
                                                      >
                                                      0.5
                                                      
                                                      and
                                                      
                                                      
                                                         
                                                            Conf
                                                         
                                                         
                                                            ST
                                                         
                                                      
                                                      >
                                                      0.5
                                                      .
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           Here, 
                              
                                 
                                    
                                       Conf
                                    
                                    
                                       T
                                    
                                 
                                 (
                                 +
                                 |
                                 e
                                 )
                              
                            and 
                              
                                 
                                    
                                       Conf
                                    
                                    
                                       ST
                                    
                                 
                                 (
                                 +
                                 |
                                 e
                                 )
                              
                            are the confidence values from the Temporal Classifier and Spatio-Temporal Classifier, respectively. The choice of the value 0.5 as threshold is made based on the fact that 
                              
                                 0
                                 ⩽
                                 Conf
                                 (
                                 +
                                 |
                                 e
                                 )
                                 ⩽
                                 1
                              
                            and that we aim at having final confidence values higher than half the highest possible value. Our experimental results have shown that this is a sensible choice.

In this section we present our dataset and the methodology for our experimental evaluation.

To perform our experiments with tag-based search of event retrieval pictures and to check the feasibility of our approach, we use a large dataset of pictures gathered from Flickr
                           11
                           We used Flickr API, http://www.flickr.com/services/api/.
                        
                        
                           11
                         covering a time period from 01.01.2006 to 31.12.2010 and without spatial restrictions. This results in a final dataset consisting of 88,257,485 pictures, of which 18,861,585 pictures are without any tags and around 23.5 % are with 1 to 3 tags. For relevance judgement we apply the well-established Upcoming dataset (Becker, Naaman, & Gravano, 2010) as our ground truth. It has also been used previously in other related approaches (Wang, Sundaram, & Xie, 2012). Specifically, the Upcoming dataset consists of 270,425 pictures from Flickr, taken between 01.01.2006 and 31.12.2008, each of which belongs to a specific event from the Upcoming event database.
                           12
                           See http://www.cs.columbia.edu/hila/wsdm-data.html.
                        
                        
                           12
                         The unique number of events are 9,515. Each event is composed by a variable number of images, varying from 1 to 2,398 pictures. This large number and the heterogeneity of the included events are the main advantage of the Upcoming dataset, and the main reason we decided to use it. For generality, we merged the Upcoming dataset with the set of other Flickr pictures.

To perform our experiments, we indexed all image tags using Terrier.
                           13
                           See http://www.terrier.org/.
                        
                        
                           13
                         As part of the dataset preparation, we perform a preprocessing step consisting of tokenization based on whitespace and punctuation marks; stemming, by using the Porter stemmer algorithm (Porter, 1980); and English stopword removal.

In this section, we briefly explain how we evaluate our approach. First, we present our input query set. Second, we discuss the methods we used as baseline for our experiments. Third, we elaborate on the evaluation metrics we applied.

We randomly selected set of 150 pictures, one for each event cluster in the Upcoming dataset, and use the tags annotating the pictures as queries. We divide this set of queries into two subsets, one subset consisting of 100 queries that we use to train and evaluate the performance of the classifiers, and another subset consisting of the remaining 50 queries that are used as the test set to evaluate the retrieval effectiveness of the proposed retrieval framework. For completeness, in Table 2
                           , we show some example of input queries used in our experiments.

To assess the effectiveness of the retrieval framework, we compare our models with several baseline methods. First, we perform the searching process by using classical retrieval models, including the Vector Space Model (VSM), Okapi BM25 (BM25) (Robertson & Walker, 1994), and the Language Model (LM) for information retrieval – with Jelineck and Dirichlet smoothing. Since BM25 gave the best results in term of effectiveness, we only show the results related to this model. We use the default parameter values 
                              
                                 
                                    
                                       k
                                    
                                    
                                       1
                                    
                                 
                                 =
                                 1.2
                                 ,
                                 
                                    
                                       k
                                    
                                    
                                       3
                                    
                                 
                                 =
                                 8
                              
                            and 
                              
                                 b
                                 =
                                 0.75
                              
                            as baseline for our evaluation. As a query expansion model, we use the basic KL-divergence model (KL) and the machine learning approach with the baseline features as proposed (Lin et al., 2011) as baseline (KLML). For simplicity and readability, we only show the results of KL since we observed that the MAP values of KLML are comparable with the MAP values of KL. We compare the baseline approaches with our proposed methods, first by comparing them with a query expansion framework applying a classifier trained with the combination of terms and temporal features (KL_T); and then a framework with a classifier learned with the combination of terms, temporal, and spatial features (KL_ST). Note that in addition to the above models, we also experimented with the Mixture Model (Zhai & Lafferty, 2001) and the Relevance Model (Lavrenko & Croft, 2001), also incorporating the feedback documents in the ranking score computation. However, the results from these experiments were, though comparable, worse than those from the BM25+KL query expansion models. Thus, for simplicity we did not include the results from these experiments.

To have a fair comparison with similar approaches, we implemented the geo-temporal tag relatedness by Zhang et al. (2012), which we, from now on, refer to as ZKYC (Zhang et al., 2012) for simplicity. As with our approach, with ZKYC (Zhang et al., 2012) the similarity between two tags is computed by comparing their temporal and geographical distributions with so-called geo-spatial, temporal, and geo-temporal similarity measures. First, they quantize the world map (space) into m tiles of 1 degree, and the time into n temporal bins of two weeks. Then, they extract the tag features based on the three measures using vectors of numbers of users applying a tag in each bin. This means that for a specific tag the geo-spatial feature vector contains m elements of numbers of users applying that tag in each bin; the temporal feature vector contains n elements of numbers of users applying the tag in each bin; and the geo-temporal feature vector or matrix contains 
                              
                                 m
                                 ×
                                 n
                              
                            elements of the counts of unique users tagging a picture within the geo-temporal bin. All vectors are normalized with 
                              
                                 
                                    
                                       l
                                    
                                    
                                       2
                                    
                                 
                              
                           -norm. Zhang et al. (2012) get the similarities between two tags by computing the euclidean distance between the two corresponding feature vectors.

As can be inferred from this, the main difference between our approach and ZKYC (Zhang et al., 2012) is the geographical and geo-temporal features used and how they are extracted. Specifically, with ZKYC (Zhang et al., 2012), the geographical feature vector related to a tag is static, and representing the distribution of the tag over a single size of bin; whereas basing our approach on the Ripley K-function enable characterizing the geographical distribution of tags over non-fixed geographical scales. As discussed previously, the Ripley K-function also allow us to extract the clustering properties of tags. In our experiments, we pay special attention to how this difference affects the retrieval performance. Specifically, we consider a range between 0km and 3km of scales when computing the K-function. According to Zhang et al. (2012), the geo-temporal features yielded the best results. For this reason, we only compare our approach using with the one applying the geo-temporal features. To incorporate this relatedness in a retrieval framework and compare it with our approach, we define a ranking equation equivalent to Eq. (17) as 
                              
                                 α
                                 KL
                                 +
                                 (
                                 1
                                 -
                                 α
                                 )
                                 
                                    
                                       rel
                                    
                                    
                                       geo
                                       -
                                       temp
                                    
                                 
                              
                           , where α is a constant deciding the contribution of the components, KL is the KL-score and 
                              
                                 
                                    
                                       rel
                                    
                                    
                                       geo
                                       -
                                       temp
                                    
                                 
                              
                            denotes the geo-temporal tag relatedness score. We tune and select the best value of the parameter α over a set of 50 queries.

To evaluate the retrieval performance of all the models, we use Mean Average Precision (MAP), a widely used evaluation metric within information retrieval (Baeza-Yates & Ribeiro-Neto, 2011). We compute our MAP values based on 1000 retrieved documents (images). To make sure that any improvements are statistically significant, we perform paired two-sample one-tailed t-tests at 
                              
                                 p
                                 <
                                 0.05
                              
                            or 95% confidence interval. Any stated improvements in this paper are all statistically significant, unless otherwise specified.

@&#RESULTS@&#

In this section we perform two different analyzes. First, we study the impact of using our temporal and spatial features on training classification algorithms. Second, we investigate the effectiveness of using the temporal and spatial features in a classifier with an optimal feature selection procedure.

As part of the process of designing a good classifier for selection of good expansion terms, we investigated which classifier is suitable for our application. We evaluated several existing classifiers with respect to their classification accuracy, and selected the classifier yielding the best accuracy. Specifically, we tested our method using Naïve Bayes classifier, Support Vector Machine (SVM), C4.5 decision tree (also named J48) and Random Forest. We used Weka (Hall et al., 2009) machine learning toolkit with default parameter settings to test the classifiers. The training set was composed by a set of 1,000 terms, equally divided into good and bad terms. These were obtained by randomly selecting the feedback terms from the results of running the queries using the training set.

To perform a thorough evaluation, we calculated the accuracy, precision and recall values for each classifier, with a leave-one-out cross validation. We performed the test for five different training sets that we obtained by selecting a positive and a negative class using different values of threshold θ (see also Section 5). The θ values we selected were 0.001, 0.005, 0.01, 0.05, 0.1, and 0.5.

We summarize the averaged results in Table 3
                        . Here, “+” is the positive class containing the good candidate terms, whereas “
                           
                              -
                           
                        ” denotes the negative class holding terms considered bad expansion terms. From these results, we can observe that the general performances of the classifiers are good using the proposed set of features. The overall best result was gained by using Random Forest classifier, with an accuracy of around 95%. The precision for the classification of the good terms was 93% and the recall was as high as 97.56%.

We now analyze the behavior of the accuracy value of the four proposed classifier over the different θ values. The results is summarized in Fig. 5
                        . Here, we can observe that the higher the threshold value is, the more the accuracy of the classifier increases. Moreover, both J48 and Random Forest (RF) outperformed the Naïve Bayes (NB) and SVM, with high margin.

There are several factors that may affect the performance of classification algorithms, which can also be used to explain this. These include randomness and sparsity of the actual dataset, the probability of noises and outliers, the size of the dataset, and the number of independent features – i.e., dimensionality. In addition, many algorithms need calibration to perform well (Caruana & Niculescu-Mizil, 2006). Focusing on our experiments, the results showed that tree-based classification approaches work best, of which Random Forest is the best classifier. This is because we experimented with a large dataset that has a high degree of randomness and a high number of independent features. This conclusion is also supported by results from other studies (Caruana & Niculescu-Mizil, 2006; Balog, Takhirov, Ramampiaro, & Norvaag, 2013). Moreover, the fact that we applied the classifiers with default parameters, with no tuning, played an important role. Since we focus on the ability to treat the classifiers as a “black-box”, squeezing out every bit of performance by tweaking the classifiers’ parameters is beyond the scope of this work. In conclusion, we choose Random Forest as the base classifier for our framework.

As part of our evaluation, we performed a comparative study on the retrieval performance. We compared our approaches with the baseline methods by executing a standard retrieval model – i.e., the BM25, and applying the query expansion models described in the previous section – i.e., Kullback–Leibler (KL) divergence, in combination with both the temporal features (KL_T) and with the spatio-temporal features (KL_ST). More specifically, we used the Rocchio’s framework weighting model, with both the KL divergence model to choose the expansion terms. For each query expansion run, we used the default value of β from Pérez-Agüera and Araujo (2008) – i.e., 
                           
                              β
                              =
                              0.4
                           
                        , and chose the first n terms of the top-k documents for the Rocchio’s Beta weighting model. The numbers of pseudo relevant documents, k, were set to 20, 40, 60, 80, 100, and 120, and the numbers of selected terms, n, were 15, 25, 35, 45, and 55. Finally, we performed the query expansion baseline model based on the geo-temporal tag similarities as proposed by Zhang et al. (2012) – i.e., the ZKYC (Zhang et al., 2012) discussed in Section 6.2.3.


                        Table 4
                         lists the results from our experiments. As shown, the baseline query expansion method is better than the baseline BM25 in all of our tests, with the best MAP improvement of 6.2%. We can also see that ranking the feedback tags using KL and ZKYC (Zhang et al., 2012) to select query expansion terms does not significantly improve the effectiveness of the ranking score of KL. This is mainly because ZKYC (Zhang et al., 2012) captures the feature of a tag distribution on a fixed geo-temporal scale, due to the size of the geo-temporal bin.

Overall, both our proposed query expansion methods outperform both of the baseline methods, for all the combinations of number of documents and number of terms. For KL_T, the maximum MAP improvement is 9.7%, while for KL_ST, the improvement is 12.4%. Moreover, studying the MAP values, both KL_T and KL_ST outperform ZKYC (Zhang et al., 2012). As discussed in Section 6.2.3, an important difference between our method and ZKYC (Zhang et al., 2012) is the property of geo-temporal attractiveness of terms with respect to scales. Recall that with ZKYC (Zhang et al., 2012), the geo-temporal features are extracted using a fixed scale. In contrast, our methods allow extracting the features at different scales, and take spatial attractiveness into account (see Section 3). Because the concentration of pictures normally vary both in time and space, considering spatial attractiveness and scales is important. The above results further confirm this importance. In conclusion, the ability to capture the geo-temporal attractivenesses of terms at different geo-temporal scales leads to improved retrieval performance.

In Fig. 6
                        , we summarize the improvements of MAP compared to BM25, while varying the numbers of feedback documents (k). Specifically, in Fig. 6a, for each method, we first take the average MAP values for different numbers of terms. Then, we plot the values as function of the number of feedback documents. In Fig. 6b, on the other hand, we plot the best MAP values for each method by only taking into account the numbers of feedback documents, independent of the number of terms. As we can observe in both graphs, all the four query expansion methods have similar trends; that is, the search process using each method gains benefits from the query expansion until reaching a specific number of documents – i.e., a breakpoint, and thereafter this benefit decreases. However, the breakpoint for both of our two approaches (KL_T and KL_ST) is much higher than with both the baseline KL and ZKYC (Zhang et al., 2012) – i.e., 80 versus 40. The reason for this is that with baseline KL, the set of candidate expansion terms are explored by considering only document features, which seems to be too restrictive. Moreover, ZKYC (Zhang et al., 2012) does not consider spatial attractiveness and variation in scales.

In this section, we analyze the effectiveness the temporal and spatial features we have used to learn the classifiers for selection of the expansion terms. The question we want answered is: Do the features we have proposed in this paper contribute to improve the classification accuracy, and which features work best? To ensure comprehensiveness, we perform our analyzes using three different widely-used correlation-based feature evaluation methods. More specifically, we use Information Gain (IG) (Yang & Pedersen, 1997), Gain Ratio (GR) (Forman, 2003) and Symmetrical Uncertainly (SU) (Yu & Liu, 2003). Information Gain is given by 
                           
                              IG
                              (
                              C
                              ,
                              F
                              )
                              =
                              H
                              (
                              C
                              )
                              -
                              H
                              (
                              C
                              |
                              F
                              )
                           
                        , where 
                           
                              H
                              (
                              C
                              )
                           
                         is the entropy of a class C and 
                           
                              H
                              (
                              C
                              |
                              F
                              )
                           
                         is the entropy of the class, given a feature F. Gain Ratio is the direct extension of Information Gain, which is 
                           
                              GR
                              (
                              C
                              ,
                              F
                              )
                              =
                              IG
                              (
                              C
                              ,
                              F
                              )
                              /
                              H
                              (
                              C
                              )
                           
                        . Symmetrical Uncertainly (SU) evaluates the goodness of a subset of features F by comparing its symmetrical uncertainty with another subset of features (Yu & Liu, 2003). Let 
                           
                              
                                 
                                    F
                                 
                                 
                                    
                                       
                                          Sub
                                       
                                       
                                          1
                                       
                                    
                                 
                              
                              ⊂
                              F
                           
                         and 
                           
                              
                                 
                                    F
                                 
                                 
                                    
                                       
                                          Sub
                                       
                                       
                                          2
                                       
                                    
                                 
                              
                              ⊂
                              F
                           
                         such two subsets. Then, 
                           
                              SU
                              (
                              
                                 
                                    F
                                 
                                 
                                    
                                       
                                          Sub
                                       
                                       
                                          1
                                       
                                    
                                 
                              
                              ,
                              
                                 
                                    F
                                 
                                 
                                    
                                       
                                          Sub
                                       
                                       
                                          2
                                       
                                    
                                 
                              
                              )
                              =
                              IG
                              (
                              
                                 
                                    F
                                 
                                 
                                    
                                       
                                          Sub
                                       
                                       
                                          1
                                       
                                    
                                 
                              
                              ,
                              
                                 
                                    F
                                 
                                 
                                    
                                       
                                          Sub
                                       
                                       
                                          2
                                       
                                    
                                 
                              
                              )
                              /
                              (
                              H
                              (
                              
                                 
                                    F
                                 
                                 
                                    
                                       
                                          Sub
                                       
                                       
                                          1
                                       
                                    
                                 
                              
                              )
                              +
                              H
                              (
                              
                                 
                                    F
                                 
                                 
                                    
                                       
                                          Sub
                                       
                                       
                                          2
                                       
                                    
                                 
                              
                              )
                              )
                           
                        . As before, we use Weka to implement of the feature selection methods.


                        Tables 5–7
                        
                        
                         report the IG, GR and SU scores, respectively, for the features we used in our classification of good and bad expansion terms. They show which features are the best using the baseline and temporal features compared with applying baseline, temporal and spatial features.

Focusing on the baseline and temporal features, these results show that with all the three feature selection methods – i.e., IG, GR and SU, none of the features related to the temporal autocorrelation (AC1) and kurtosis (KURT1) have any impact on the classification. This means that the information about peaks in the temporal distribution of candidate expansion terms does not seem to have any effects on determining good candidate expansion terms. However, the temporal correlation between the distribution of documents annotated with a candidate expansion term and of those annotated with a term from the initial query – i.e., AC12, KURT12 and AC12, seem important, as their scores are within the top-5 highest scores. Similar observation can be made on the cross-correlation – i.e., CC, between the time series of a candidate expansion term and a query term.

Focusing on our set of features – i.e., the baseline, temporal and spatial features, on the other hand, our observation is that with all the three feature selection methods, the most important features are those related to the vectors 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          →
                                       
                                    
                                 
                                 
                                    Max
                                 
                              
                              (
                              Q
                              ,
                              e
                              )
                           
                         (called 
                           
                              RDMDL
                              12
                           
                         in Table 5–7), 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          →
                                       
                                    
                                 
                                 
                                    Max
                                 
                              
                              (
                              Q
                              +
                              e
                              )
                           
                         (or 
                           
                              RDMD
                              12
                           
                        ), 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          →
                                       
                                    
                                 
                                 
                                    Sum
                                 
                              
                              (
                              Q
                              ,
                              e
                              )
                           
                         (called 
                           
                              RDPAL
                              12
                           
                         in Table 5–7) and 
                           
                              
                                 
                                    
                                       
                                          D
                                       
                                       
                                          →
                                       
                                    
                                 
                                 
                                    Sum
                                 
                              
                              (
                              Q
                              +
                              e
                              )
                           
                         (or 
                           
                              RDPAL
                              12
                           
                        ). This means that the features related to the spatial distributions of the documents annotated with both the candidate expansion terms and the query terms, and the spatial correlation between the two tag point patterns have a strong impact on the classification results. As a conclusion, our analysis confirms the importance of using the spatial correlations between a candidate expansion term and a query term as features for classification of good and bad candidate expansion terms.

@&#CONCLUSION@&#

In this work, we have developed a new approach to effectively retrieve event-based images from typical media sharing applications, such as Flickr. To achieve this, we have developed a new method using a new set of spatial features extracted from image tags to capture the characteristics of the spatial distributions of such tags. This has included applying rigorous statistical exploratory analysis of spatial point patterns to extract the geo-spatial features. As we have shown in this paper, with these features, we have been able to both summarize the spatial characteristics of the spatial distribution of a single term, and identify the similarity between the spatial profiles of two terms. Further, aiming at improving the retrieval performance, we have investigated the gain of combining our geo-spatial features with a set of temporal features from the current state-of-the-art approaches within information retrieval. In addition, we have studied the usefulness of our method by applying our features in a machine-learning-based query expansion framework. More specifically, we have used our spatial and temporal features to select of the best candidate terms for the query expansion process. The originality of this work lies in the way we extract these features and how we use them to choose the best expansion terms. Our experiments and extensive analyzes, including comparison against the baseline methods and existing work, have demonstrated the effectiveness of our approach. These have particularly shown the importance of our proposed spatial features and the feasibility of our approach.

Nevertheless, there are interesting aspects of this work that we have left for further investigation. First, to further explore the usefulness of our spatial features in more general information retrieval settings, we currently study applying our approach on other resources than pictures. Second, in this paper, we have focused on selecting candidate expansion terms as a binary classification problem. As part of making our approach even more generic, we are investigating performing unsupervised selection of expansion terms based on their associated temporal and geo-spatial characteristics. Third, we are exploring the combination of this approach with Open Linked Data usage, such as DBPedia, to further improve the choice of best expansion term candidates.

@&#ACKNOWLEDGEMENT@&#

We acknowledge the anonymous reviewers comments, which have been invaluable in improving the quality of this manuscript. This work is supported by the Research Council of Norway, VERDIKT Program Grant No. 176858.

@&#REFERENCES@&#

