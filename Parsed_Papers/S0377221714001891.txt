@&#MAIN-TITLE@&#Modeling framework for optimal evacuation of large-scale crowded pedestrian facilities

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A novel approach for optimizing evacuation decisions for large-scale pedestrian facilities.


                        
                        
                           
                           Optimizing exit gate decision and time interval at which each subarea starts evacuation.


                        
                        
                           
                           Iterative approach where a genetic algorithm is used on the top of pedestrian simulation model.


                        
                        
                           
                           The model converges to a good optimal evacuation plan within acceptable number of iterations.


                        
                        
                           
                           Evacuation plan that outperforms a possible plan in which pedestrians exit from the closest gate.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Crowd dynamics

Evacuation

Simulation

Cellular automata

Genetic algorithms

@&#ABSTRACT@&#


               
               
                  The paper presents a simulation–optimization modeling framework for the evacuation of large-scale pedestrian facilities with multiple exit gates. The framework integrates a genetic algorithm (GA) and a microscopic pedestrian simulation–assignment model. The GA searches for the optimal evacuation plan, while the simulation model guides the search through evaluating the quality of the generated evacuation plans. Evacuees are assumed to receive evacuation instructions in terms of the optimal exit gates and evacuation start times. The framework is applied to develop an optimal evacuation plan for a hypothetical crowded exhibition hall. The obtained results show that the model converges to a superior optimal evacuation plan within an acceptable number of iterations. In addition, the obtained evacuation plan outperforms conventional plans that implement nearest-gate immediate evacuation strategies.
               
            

Large-scale crowded pedestrian facilities such as stadiums, worship facilities, airport terminals and exhibition halls require adequate crowd management plans to ensure visitors’ safety and comfort. The development of these plans tends to be more challenging in emergency situations where hasty evacuation of these facilities is required. When hazardous incidents occur in crowded pedestrian facilities, with the absence of a safe and efficient evacuation plan, the casualties are likely to be more catastrophic in terms of both numbers and severity. During most evacuation events, chaos is the norm. Evacuees tend to be panicked and egocentric, while seeking their own safety and paying less attention to their surroundings. Nonetheless, safe and efficient evacuation could be achieved in large-scale pedestrian facilities, if an effective evacuation plan is designed and properly disseminated to the users of the facility. This plan should be able to guide each pedestrian, or group of pedestrians, through their safe evacuation, such that a desirable overall evacuation performance is achieved. An evacuation plan provides information for each user on the exit gate, the path to follow to reach this gate, and possibly the time at which evacuation should start. The overall objective could be minimizing the evacuation time of the facility (i.e. time period at which the facility is totally evacuated), minimizing the users’ average evacuation time, or maximizing the cumulative exit throughput within a given time period. Each representation will have its own safety consequences depending on the facility configuration and demand levels.

In small and medium size pedestrian facilities, evaluating the efficiency of any proposed evacuation plan is usually performed by conducting real-world experiments. In these experiments, users of the facility are given instructions to evacuate the facility following a certain plan and the corresponding performance of this plan is recorded. For large-scale facilities, experimenting with large crowds is impractical. Simulation models have emerged as an alternative approach by providing a realistic representation of the facility and the behavior of the evacuees considering all possible extreme conditions. Nonetheless, most of these simulation models are descriptive in nature. They are limited to representing crowd dynamics and associated system performance under the predefined evacuation scenarios. They lack the capability to provide the facility managers with the optimal evacuation schemes.

Several challenges pertain to the problem of developing an optimal evacuation plan for large-scale pedestrian facilities. For example, the problem is computationally cumbersome as numerous plans could be generated for most large-scale facilities. A developed framework should be able to efficiently search for the optimal plans to minimize the time required to produce an optimal or near optimal plan. In addition, the problem is naturally nonlinear since the decisions of pedestrians on how to evacuate depend on the congestion dynamics at the gates and along the used evacuation routes, which are determined by the pedestrian evacuation decisions. Finally, methodologies used to develop the evacuation plans should provide accurate representation of the facility as well as the pedestrians’ heterogeneous behavior especially under extreme conditions. Inadequate representation of the facility and the pedestrians’ behavior could result in unrealistic or less efficient evacuation plans.

This paper presents a simulation-based optimization modeling framework to determine the optimal evacuation plan for a large-scale crowded pedestrian facility. The framework adopts a genetic algorithm (GA) that is integrated with a microscopic crowd simulation model. The GA iteratively searches for the optimal evacuation plan, while the crowd simulation model guides the search by evaluating the performance of the solutions generated by the GA. Given the configuration of the facility and the spatial distribution of the users, the model determines the optimal exit gate and associated routes for all pedestrians in order to minimize the average evacuation time. The model is also extended to provide the optimal evacuation start time of the pedestrians as part of the provided evacuation instructions. In the latter case, the model allows examining the effectiveness of phased evacuation strategies where the pedestrians exit rate is metered. A micro-simulation assignment model for multidirectional pedestrian movement in crowded facilities is used as part of the modeling framework (Abdelghany, Abdelghany, Mahmassani, & Al-Gadhi, 2005; Abdelghany, Abdelghany, & Mahmassani, 2014). The model adopts a Cellular Automata (CA) discrete system, which allows detailed representation of the pedestrians’ movements in the facility. The modeling approach seeks to capture crowd dynamics in the facility through representing the pedestrians’ behavioral rules and decisions at the individual level. These rules and decisions include destination and path choice, walking speed adjustment, and congestion aversion attitude.

The research work presented in this paper contributes to the existing literature in several aspects. First, as presented hereafter, limited research work is devoted to developing optimization-based models that can be used to design efficient evacuation plans for large-scale facilities. The presented modeling framework closes this gap through adopting a meta-heuristic optimization methodology that determines a near optimal evacuation scheme in terms of the exit gate, evacuation route, and evacuation start time. In addition, the use of a microscopic simulation model to evaluate the generated evacuation plans ensures accurate representation of the facility performance and the associated crowd dynamics pattern under these plans. Also, the research presents a comparison between optimal evacuation strategies and traditional nearest-gate evacuation strategies. The obtained results emphasize the importance of developing optimal evacuation plans as they could significantly outperform widely-adopted plans that implement nearest-gate evacuation strategies. Finally, the model allows examining the effectiveness of phased evacuation strategies where the pedestrians exit rate is metered. This paper is organized as follows. The following section provides a summary of main recent studies on pedestrian evacuation models. Next, a detailed description of the modeling framework is provided. The application of the developed models to generate the optimal evacuation plan for a hypothetical facility is presented. Main results that illustrate the different capabilities of the developed modeling framework are also presented. The last section provides concluding comments and possible research extensions.

Extensive research effort has been devoted to studying the evacuation of pedestrian facilities. These models could generally be classified into two main categories. The first category includes models that are developed to replicate crowd dynamics during evacuation and evaluate the overall performance of the evacuation process considering different crowd management schemes. The second category includes models that seek to determine the optimal evacuation plan for a facility using an optimization-based methodology. Most existing models fall under the first model category. These models differ in their assumptions, underlying theory, scalability and scope of application. Zheng, Zhong, and Liu (2009) compared seven different modeling approaches for crowd evacuation. These modeling approaches include cellular automata models, lattice gas models, social force models, fluid-dynamic models, agent-based models, game theoretic models, and approaches based on experiments with animals. They conclude that these approaches could be used to answer different questions about the evacuation process and an analyst might need to combine different modeling approaches to adequately study the crowd evacuation phenomena.

As an example of the first models category, Kirchner and Schadschneider (2002) presented a cellular automata simulation-based model to study pedestrian evacuation. A simple scenario is considered where a single space facility is evacuated using one or two doors. Daoliang, Lizhong, and Jian (2006) developed a two-dimensional cellular automata model to simulate the egress dynamics during evacuation. The developed model is used to derive useful information on the required width of the exit gates and recommended gate separation. In a similar effort, Varas et al. (2007) presented a cellular automata model to simulate the process of evacuation of pedestrians in a room with fixed obstacles. They compared different door configuration: single (where only one person can pass) and double (two persons can pass simultaneously). The results show that replacing the double door by two single doors does not improve evacuation times noticeably. Abdelghany, Abdelghany, Mahmassani, Al-Ahmadi, and Alhalabi (2010) presented a cellular automata crowd simulation model for large-scale facilities. A behavioral module in the form of a logit-based model is used to replicate how evacuees select their exit gates. The model captures the trade-off between travel distance to the gate and the level of congestion at the gate. The model is applied to study the evacuation of a crowded pilgrimage facility in Mecca, Saudi Arabia. Alizadeh (2011) presented a dynamic cellular automaton (CA) model to simulate the evacuation process in spaces with obstacles. The model considers basic parameters such as human psychology, placement of the gates and their width, and position of the obstacles. The model shows that the initial distribution of the crowd plays an important role in the obtained results. Fu, Luo, Deng, Kong, and Kuang (2012) presented a cellular automaton model to simulate the evacuation processes in a large classroom by considering the different exit choices and movement rules. Similar to the results in Alizadeh (2011), they showed that the local density distribution of pedestrians could have significant impact on the evacuation performance. Zheng and Cheng (2011) presented a game-theoretical model to study the evacuees’ cooperative and competitive behavior during an emergency evacuation. The model is used to determine the density at which cooperative and competitive behaviors are observed and their corresponding evacuation performance. Xiong, Tang, and Zhao (2013) proposed a hybrid model which integrates a macroscopic model and microscopic model. The integrated model represents the crowd movement tendency as well as the individual’s heterogeneous behavior to accurately simulate crowd evacuation.


                     Helbing, Farkas, Molnar, and Vicsek (2002) presented a generalized force simulation model of interactive pedestrian dynamics. Spatial–temporal patterns in pedestrian crowds are interpreted as self-organized phenomena. A single parameter, the “nervousness”, is used to reflect fluctuation strengths, desired speeds, and the tendency of herding. Helbing, Isobe, Nagatani, and Takimoto (2003) studied the evacuation process from a classroom by means of experiments and simulations. The focus is on the spatial dependence of the escape times on the initial positions, which was shown to be highly significant. The escape time distribution turns out to be rather broad due to jamming of the students at the exit. Hoogendoorn and Bovy (2004) developed a model for user-optimal dynamic assignment in continuous time and space for pedestrian facilities. The model provides more accurate representation of pedestrian movements as it overcomes the limitation of models that limit number of paths available between origin–destination pairs. Parisi and Dorso (2005) studied the facility evacuation problem using the social force model, which allows modeling the behavior of the evacuees assuming different levels of panic. Song, Xu, Wang, and Ni (2006) introduced a modified version of the social force model entitled multi-grid model. The study considered an evacuation scenario where pedestrians are evacuating a large room with only one door. The study analyzed the influences of interaction forces and drift on evacuation time.


                     Li, Chen, Pan, Shen, and Yuan (2008) and Zhang, Song, and Xu (2008) studied the evacuation of an office building and a classroom, respectively, using real-world experiments and simulation models. The goal is to examine the model’s accuracy in capturing the observed phenomena during evacuation. For instance, in Li et al. (2008), the collected data from the experiments suggests introducing a new variable into the model to describe the occupants’ familiarity with different exits in a building. Huang and Ren-Yong (2008) presented a model to simulate pedestrian evacuation in rooms with internal obstacles and multiple exits. The evacuation time is showed to be sensitive to the exit location as well as some of the model parameters, which emphasized the importance of conducting adequate model calibration and validation. Izquierdo, Montalvo, Pérez, and Fuertes (2009) presented a model for evacuation simulation for estimating evacuation times, which is inspired by the so-called Particle Swarm Optimization (PSO). The PSO-based model allows for assessment of the behavioral patterns followed by individuals during a rapid evacuation event. Guo and Huang (2011) and Yan and Huang (2012) presented simulation models which consider the pedestrians’ direction visual field. The results show that considering this modeling feature allows more realistic representation of pedestrians’ route choice in evacuation scenarios. Several authors have studied the impact of exit configuration on the evacuation time of the room. For example, Helbing, Farkas, and Vicsek (2000), Helbing, Buzna, Johansson, and Werner (2005), Hughes (2003), Piccoli and Tosin (2009) called attention to the fact that placing an obstacle near the exit improves the evacuation time of the room. On the contrary, Frank and Dorso (2011) showed that placing an obstacle does not guarantee, by itself, better chances of survival for all pedestrians. The way they choose to avoid the obstacle is critical for their own performance.

Agent-based simulation models have been used to model pedestrian evacuation in buildings. Examples of this approach include the model presented by Shi, Ren, and Chen (2009) which adopts an agent simulation approach to analyze the egress progress in large indoor stadium. The model combines rule reasoning with numerical calculation, and crowd pedestrian flow phenomenon such as aching and rerouting. Sharma (2009) presented AvatarSim, which is a multi-agent system, for simulating emergency evacuation scenarios. It models human behavioral parameters such as stress, anger, and panic which brings a sense of reality during emergency evacuations. Murphy, Brown, and Sreenan (2013) presented EvacSim which is a multi-agent building evacuation simulation. The model represents agents occupying two-dimensional continuous free-space to simulate pedestrian egress for day-to-day operation performance and evacuation planning. The model considers elements that govern microscopic agent movement such as personal space preservation, obstacle avoidance and moving together as a crowd. The model is validated against real-world pedestrian data, comparing flow rates, density and velocity for corridor entry and for merging crowds. Yamamoto (2013) presented an agent-based simulation model to study the evacuation of multi-storey buildings at the time of outbreak of an earthquake and fire. The simulator is designed to reflect the situation when some destruction occurred in a passage and the stairs resulting in dynamic change in their capacities. Mustapha, Mcheick, and Mellouli (2013) proposed an agent-based simulation methodology which incorporates measures for the possible organizational structure of the facility and evacuation management policies. Finally, wagner and Agrawal (2014) presented a prototype of a decision support system that uses agent-based modeling to simulate crowd evacuation in the presence of a fire disaster and provides for studying the evacuation performance under multiple disaster scenarios.

While abundant research effort is directed to developing simulation platforms to study the effectiveness of evacuation schemes, less work is devoted to adopting optimization-based approaches to develop optimal evacuation schemes. For example, the early work of Kisko and Francis (1985) presents an interactive computer program that allows the modeling of emergency building evacuations. The problem is modeled as a dynamic network with side constraints where the objective is to minimize the turnstile cost. Cepolina (2005, 2006) presented an optimization modeling approach for phased evacuation, which takes into account the capacity drop phenomenon in pedestrian flows. The model adopts a randomized search technique to determine the optimal evacuation routes in a pedestrian facility. A simulation model is used to capture congestion dynamics along these routes. However, the model assumes that only a set of predefined evacuation routes could be used by the evacuees, which limits its application for open space areas with infinite routing options. In addition, the suitability of the framework for studying large-scale facilities is not clear. Johansson and Helbing (2007) used genetic algorithm to optimize the location of obstacles to obtain efficient evacuation. Zarboutis and Marmaras (2007) presented a methodological framework for the design of formative evacuation plans for complex socio-technical systems in crisis. The framework adopts an adaptive systems modeling approach, and proposes the agent-based simulation as cognitive tool for the team which designs the plans. Deng, Chen, Mehta, and Meyn (2008) modeled the occupancy evolution during egress for large buildings. They obtained lower bounds on evacuation time and constructed control solutions to instruct occupants in order to efficiently evacuate the building. The results are illustrated with the aid of simulations carried out using realistic building models. Pursals and Garzón (2009) presented a formulation of the building optimal evacuation problem that incorporates evacuation routes. The model considers macroscopic based functions to represent the movement of pedestrians during evacuation. Park, Jang, Park, and Lee (2009) propose a time-dependent optimal routing algorithm to develop real-time evacuation systems. The network data that represents navigable spaces in buildings is used for determining the optimal path. The time-dependent optimal path is defined based on updated environmental information and the positions of evacuees and rescuer at each time slot, for avoiding places jammed with evacuees. Zhao and Gao (2010) presented a modified cellular automata model to simulate the pedestrian evacuation behavior in a room with multiple exits by considering the reserve capacity of the exit. Simulation results show that wise exit choosing with the consideration of reserve capacity may reduce the evacuation time significantly. Finally, Xie and Zhang (2013) presented an agent-based approach to modeling crowd evacuation in large building with focus on providing global and local navigation information to enhance the evacuation performance. However, the provided information is based on heuristic rules and does not guarantee optimal evacuation performance.

As described above, the use of a simulation model to evaluate the effectiveness of the evacuation plans has been adopted in most of the presented models. While the modeling framework presented in this paper shares such feature, it differentiates from existing models by integrating the simulation model in the optimization framework to evaluate the objective function and guide the search process. In addition, due to the large search space with respect to the number of available evacuation exits and paths, most existing models assume evacuees follow a predefined number of paths, which limits the applicability of these models in open spaces with infinite routes. The modeling framework presented in this paper optimizes the evacuee routes endogenously through using a microscopic simulation model that implements dynamic path optimization and assignment capabilities. Finally, most presented models have limited scalability which precludes their application to large-scale facilities with large numbers of evacuees. The framework presented in this paper is carefully designed to allow its application for large-scale facilities with complex configuration and large number of users.

Given is the floor plan of a pedestrian facility under evacuation. The area of the facility is assumed to be divided into a set of smaller subareas S such that pedestrians occupying a subarea s
                     ∊
                     S are assumed to receive the same evacuation instructions, as illustrated in the example in Fig. 1
                     . The size of the subareas could be reduced to the average space occupied by a single pedestrian implying that the evacuation instructions are provided at the individual level. The set E describes the exit gates of the facility, where each exit gate e
                     ∊
                     E is defined by its location and egress capacity. Users of the facility are assumed to be distributed among the subareas following a predefined pattern such that the location of each pedestrian at the start of the evacuation process is known.

Two evacuation instruction scenarios are considered as part of the modeling framework. In the first scenario, pedestrians in the same subarea s
                     ∊
                     S are assumed to receive evacuation instructions in the form of the optimal exit gate. In the second scenario, pedestrians in the same subarea are receiving instructions on the optimal exit gate as well as the optimal evacuation start time. In the latter case, it is assumed that flow metering capabilities are available to control the time when pedestrians are allowed to start moving towards their exit gates. In both cases, pedestrians are assumed to optimize their own paths from their current locations to the assigned exit gates. They are assumed to minimize their travel times by trading-off between following the shortest routes and avoiding congestion along these routes. Pedestrians are assumed to be heterogeneous in terms of their walking speeds and congestion aversion behavior. All evacuees are assumed to comply with the provided evacuation instructions. We define the binary decision variable xse
                     
                     ∊
                     X, which is equal to one if pedestrians in subarea s
                     ∊
                     S are instructed to evacuate at gate at e
                     ∊
                     E, and zero otherwise. Also, for an evacuation plan X, we define tse
                     (X) as the average evacuation time for pedestrians in subarea s
                     ∊
                     S instructed to evacuate the facility through gate e
                     ∊
                     E. The evacuation time tse
                     (X) consists of two components (a) the travel time to reach the assigned gate; and (b) the time consumed in the queue, if any, at this gate. Both components are expected to depend on the overall congestion pattern in the facility associated with the evacuation plan X.

For the case in which the evacuation start time is considered as part of the evacuation instructions, we add index τ
                     ∊
                     T to the variables defined above to describe the optimal time in which evacuation starts, where T is the horizon of interest. Thus, 
                        
                           
                              
                                 x
                              
                              
                                 se
                              
                              
                                 τ
                              
                           
                        
                      is equal to one if pedestrians in subarea s
                     ∊
                     S are instructed to start evacuating the facility at time τ
                     ∊
                     T through gate e
                     ∊
                     E, and zero otherwise. Also, 
                        
                           
                              
                                 t
                              
                              
                                 se
                              
                              
                                 τ
                              
                           
                        
                      is defined as the average evacuation time for pedestrians in subarea s
                     ∊
                     S instructed to start evacuating the facility at time τ
                     ∊
                     T through gate e
                     ∊
                     E. The problem is to determine the optimal evacuation plan X to minimize the average evacuation time. In the following, we provide the mathematical formulation for the optimal evacuation problem, which considers the scenario in which the evacuation start time is part of the provided evacuation instructions. The formulation for the scenario in which the exit gate is the only provided instruction is a special case and can be obtained by eliminating the time index τ from all used variables.
                        
                           (1)
                           
                              Minimize
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       τ
                                       ∈
                                       T
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       s
                                       ∈
                                       S
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       e
                                       ∈
                                       E
                                    
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    se
                                 
                                 
                                    τ
                                 
                              
                              (
                              X
                              )
                           
                        
                     
                     
                        
                           (2)
                           
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       e
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       τ
                                    
                                 
                              
                              
                                 
                                    x
                                 
                                 
                                    se
                                 
                                 
                                    τ
                                 
                              
                              =
                              1
                              
                              
                              ∀
                              
                              s
                              
                              ∈
                              
                              S
                           
                        
                     
                     
                        
                           (3)
                           
                              
                                 
                                    X
                                 
                                 
                                    se
                                 
                                 
                                    τ
                                 
                              
                              ∈
                              {
                              0
                              ,
                              1
                              }
                              
                              
                              ∀
                              s
                              ∈
                              S
                              ,
                              ∀
                              e
                              ∈
                              E
                              
                              and
                              
                              ∀
                              τ
                              ∈
                              T
                           
                        
                     
                  

The problem is formulated as a nonlinear mixed integer program. The objective function given in (1) minimizes the average evacuation time. Other objective functions could be tried in the model such as maximizing the overall total throughput of the facility within a certain time period, or minimizing the total evacuation time. The latter objective could be more suitable for facilities that have irregular configurations where some areas need excessive time to evacuate (Abdelghany et al., 2010; Pereira, Duczmal, & Cruz, 2013). As mentioned earlier, the objective function in (1) is nonlinear as the overall performance of the facility measured in terms of the evacuation time and the optimal evacuation plan are mutually interdependent. The constraints in (2) ensure that users in any subarea s
                     ∊
                     S are instructed to start evacuating at time τ and through the same gate e
                     ∊
                     E. Finally, the constraints in (3) are the integral constraints.

Considering the nonlinearity of the problem, an iterative simulation–optimization solution approach is used to determine a near optimal evacuation plan for the facility. The proposed model adopts a randomized search technique in the form of a GA that is developed on top of a crowd simulation model. The GA iteratively searches for the optimal solution, while the crowd simulation model evaluates the fitness of the generated solutions and guides the randomized search process. GA is an abstraction of the biological evolution phenomenon which ensures the survival of the fittest (Goldberg, 1989). It adopts selective breeding mechanism of individuals in the population to produce offspring better than the parents. Feasible solutions are represented in a format that is analogous to human chromosomes. Each chromosome consists of genes that describe the characteristics of the chromosome (solution). A fitness score, which depends on the characteristics of the chromosome, is assigned to each chromosome representing the abilities of this chromosome to compete. Highly fit chromosomes are given more opportunities to reproduce, so that offspring inherit characteristics from each parent. A population of a predefined number of chromosomes with associated fitness values is maintained in the consecutive iterations. Thus, chromosomes with low fitness values are replaced by the new chromosomes. Once all mating opportunities in the old population have been exhausted, a new generation of solutions is created. The new generation contains, on average, better genes than a typical chromosome in a previous generation. The algorithm converges when a population is not producing chromosomes noticeably different from those in previous generations.

After an initial population of chromosomes is randomly generated, the algorithm applies through three operations in the consecutive iterations which are (1) selection; (2) crossover; and (3) mutation. In the selection, preference is given to highly fit solutions, allowing them to pass on their characteristics (genes) to the next generation. Crossover represents mating between individuals. It is a process of taking more than one parent solution and producing children solutions from them. This is done by randomly selecting some of the genes of the parents and passing them to the children. In most implementations, two children are generated from each two parents. Mutation introduces random modifications to the generated solutions. A small portion of the new individuals, that are randomly selected, will have some of their genes altered. Its purpose is to maintain diversity within the solution population and prevent premature convergence.

For the purpose of the evacuation optimization problem described above, the GA is developed such that each chromosome represents a feasible evacuation plan. For the problem in which the evacuation instructions include the exit gate only, a feasible evacuation plan requires assigning an exit gate for each subarea. Thus, a solution could be represented by a chromosome that includes a number of genes that is equal to the number of predefined subareas. A gene records the exit gate information for its subarea. For the problem in which both the exit gate and the evacuation start time are part of the evacuation instructions, two genes are used to represent each subarea. The first gene records the gate information while the second gene records the evacuation start time. Considering the facility in Fig. 1 which is divided into 25 subareas, Fig. 2
                      illustrates the chromosome structure and an example of the crossover and mutation operations. Each black dot represents the gene(s) assigned to each subarea. As illustrated in Fig. 2, two genes are assigned to each subarea to store the gate and evacuation start time information. The gate information is stored in the form of the gate ID (0–9), while the evacuation start time information is stored in the form of the time at which the evacuation at this subarea should start. A horizon of 20 starting times is considered in the example.

As mentioned earlier, the solution methodology integrates a genetic algorithm and a microscopic pedestrian simulation model. Fig. 3
                      illustrates the different steps of this methodology. First, a random population of feasible evacuation plans is generated. Next, each generated plan is evaluated to determine its overall performance (fitness). For that purpose, a microscopic pedestrian simulation model is used to model the crowd dynamics during the evacuation under the proposed plan, and to determine the corresponding overall system performance. While the stopping criterion is not satisfied, a new population is generated through a combination of selection, crossover and mutation operations which are performed on the population of the previous iteration. The algorithm stops when there is no better solution can be obtained in a predefined number of successive iterations. The next section describes the crowd simulation model used to evaluate the generated evacuation plans. More detailed description of the crowd simulation model can be found in Abdelghany et al. (2005, submitted for publication).

A two-layer network is defined to identify the open spaces for pedestrians and possible walking paths, as shown in Fig. 4
                     . The first layer, L1, consists of a Cellular Automata (CA) system in which all open spaces are divided into a set of uniform cells, C, such that the size of each cell c
                     ∊
                     C is to be occupied by one person (i.e. location of one person). Each cell c
                     ∊
                     C is defined by its location and its set of adjacent cells J
                     c
                     ⊂
                     C, where c
                     ∉
                     Jc
                     . Two cells are defined to be adjacent cells, if they share any of their borders. All areas that are occupied by obstacles are not considered in the CA system. The second layer, L2, consists of a set of nodes N and a set of arcs A. The nodes and arcs are defined such that they determine the possible walking paths of pedestrians in the area. Enough nodes and arcs are defined in the area to generate all possible walking paths of pedestrians. Thus, nodes are defined arbitrarily along corridors and between obstacles at reasonable distances. Arcs are defined by connecting between adjacent nodes. Each arc a
                     ∊
                     A represents the average vision line of a pedestrian standing at the upstream node of the arc and heading to its downstream node.

For purpose of modeling an evacuation scenario, the pedestrian demand is assumed to be distributed based on a predefined density over the different subareas. The current location of the evacuees is set as her/his origin and the assigned exit gate is set as the destination for this evacuees. Two attributes are defined for each simulated pedestrian, which describes the pedestrian’s free flow speed and congestion aversion behavior. The free flow speed defines the average number of steps (cells) that a pedestrian can cross per time interval when allowed to walk freely in the area. The congestion aversion behavior is represented by the maximum density that a pedestrian would tolerate while proceeding towards congested spots along her/his path. These two variables could be treated as fixed values for the entire simulation horizon or randomized following predefined probabilistic distributions. The latter option is more realistic as most empirical observations reveal that these variables might change at certain locations or while performing certain activities.

Given the network representation of the facility, the model adopts a shortest path algorithm to determine the optimal paths from all nodes to all destinations. As mentioned above, a set of major destinations, D
                     ⊂
                     N, are defined in the model. The shortest path calculations consider the travel cost on each arc of the network. The cost function could be based on travel distance, which is suitable for low density scenarios. It could also be based on travel time on the links, which depends on the current level of congestion in the area surrounding the link. In this case, it is assumed that pedestrians would avoid congested paths and switch to less crowded ones. In the later case, the path calculation is periodically updated to reflect the congestion dynamics over the simulation horizon.

The simulation component captures the collective congestion dynamics that result from the pedestrians’ decisions while moving in the area. Based on the current condition in the facility, each pedestrian selects her/his path that connects his/her current location to the assigned exit destination. For each link, the pedestrian arbitrarily chooses a walking trajectory along that link. The walking trajectory connects the current location of the pedestrian to a cell in the vicinity of her/his downstream node along the path. Once a walking trajectory is identified, the number of steps that the pedestrian can make in one simulation interval is first determined depending on her/his desired speed. A step is a movement from a cell to the next adjacent cell along the desired moving trajectory. The next cell is selected such that it keeps the pedestrian as close as possible to her/his selected trajectory. A pedestrian can move to the next cell, only if this cell is not occupied by another pedestrian and the congestion aversion threshold of this pedestrian is satisfied. If the pedestrian fails to move into this cell, another adjacent cell along the pedestrian’s desired motion direction is attempted. If all adjacent cells are full, a location swapping module is activated to allow the pedestrian to swap his/her cell with one of the pedestrians in the adjacent cell, given that they are both interested in their new cells (e.g. moving in opposite directions). The location of each pedestrian is consequently updated. Without loss of generality, the order by which cells are updated is assumed fixed in all simulation intervals. However, the model is ready to adopt other logics such as the random order where a randomly generated updating sequence for the cells is used in each simulation interval. If none of the adjacent cells permits the movement of the pedestrian, the pedestrian is held in her/his current cell. The process continues until the entire path is completed and the pedestrian reaches her/his destination. Once a pedestrian exits the facility, relevant statistics are collected to report the overall performance of the system. For the purpose of the evacuation plan evaluation, the travel time for each pedestrian is recorded in order to compute the average evacuation time for all users. Other performance measures such as time-dependent throughput and maximum evacuation time are also readily available from the model.

The model is applied to determine the optimal evacuation plan of the pedestrian facility given in Fig. 1. The facility represents a rectangular hall with a length of 250meters and a width of 200meters. The total area is divided into 25 subareas. Each subarea has a rectangular shape of 50meters by 40meters. As mentioned above, pedestrians in the same subarea are assumed to follow the same evacuation plan. The facility includes 10 identical exit gates with total exit width of 125meters. A total demand of about 25,000 pedestrians is assumed to be uniformly distributed over the area (i.e., density of about 0.5pedestrian per square meter). A cellular automata system with uniform cells of 0.5 by 0.5meter is considered (i.e. maximum density of 4 pedestrians per square meter). All pedestrians are assumed to have a free flow speed of 1.0meter per second and an average congestion average threshold of 3 pedestrians per square meter. These parameters are selected based on a previous application of the simulation model to represent the crowd congestion phenomena in a real-world facility (Abdelghany et al., 2005).


                     Fig. 5
                      shows the model convergence pattern considering three different population sizes for the GA, which are 10, 20 and 40. In all cases, the initial population is generated by randomly assigning each subarea to one of the three closest gates. The evacuation plan is generated in terms of the optimal exit gate for each subarea. As illustrated in the figure, the model converges to the same solution for the three considered population sizes. The average evacuation time is reduced from about 1.85minutes at the initial population to about 1.1minutes at convergence. In addition, as expected, the model converges in less number of iterations as the size of the population increases. For example, when a population size of 40 solutions is used, the model generates the solution after 11 iterations. The number of iterations increased to 19 when the population size is reduced to 10.


                     Fig. 6
                      compares the optimal solution obtained from the model to one of the randomly generated plans in the initial population. The randomly generated plan assigns each subarea to one of the three closest gates. The figure gives the subarea-gate assignment pattern for both cases. The index of the subarea is given in its bottom left corner. One can notice that the randomly generated plan results in uneven distribution of the evacuees among the exits. As shown in Fig. 6, for the randomly generated plan, eight subareas are assigned to gate 0 which results in excessive delays at this gate. On the contrary, the model produces a plan that achieves balanced distribution of the evacuees among the exit gates, which improves the overall evacuation performance. Snapshots of the simulation model at different times along the simulation horizon for the two plans are given in Figs. 7 and 8
                     
                     . The model interface illustrates the congestion at gate 0 for the randomly generated plan. This congestion is significantly reduced in the snapshots of the optimal plan.

The analysis is extended to compare the quality of the solution obtained by the model against different other possible evacuation plans. Four different evacuation strategies are considered to generate these plans: (1) each subarea is randomly assigned a gate from the four closest exit gates, (2) each subarea is randomly assigned a gate from the three closest exit gates, (3) each subarea is randomly assigned a gate from the two closest exit gates and (4) each subarea is assigned to its closest exit gate. The experimental setting described above is again used for this experiment with an initial population size that is equal to 20. The average evacuation time for all plans is shown in Fig. 9
                     . As shown in the figure, the evacuation plan produced by the model outperforms all the other plans. For example, in this experiment, the optimized plan outperforms the plan in which pedestrians exit from the closest exit gate by 6.3% implying that evacuating from the closest exit gate, which is widely adopted in most real-world evacuations, does not necessarily result in the best evacuation performance.

The next set of experiments examines the effect of the size of the subarea on the performance of the evacuation plan. Three different scenarios are considered where the facility in Fig. 1 is divided into 16, 25, and 36 subareas, respectively. Fig. 10
                      gives the average evacuation time at convergence for the three considered resolutions. As shown in the Figure, as the size of the subareas gets smaller, better evacuation performance is achieved. For example, an average evacuation time of 1.21minutes is recorded for the case in which 16 subareas are considered. The average evacuation time is reduced to 1.06minutes the scenario with 36 subareas. Reducing the size of the subareas provides more flexibility in distributing the demand among the gates. Thus, a more balanced distribution and an overall improvement in the evacuation performance could be obtained.

An additional experiment is presented to illustrate an evacuation scenario for a facility with obstacles. Considering the facility configuration used in the previous experiment, a rectangular shape obstacle of 230meters by 12.5meters is placed in front of gates 0, 1, and 2, as shown in Fig. 11
                     . Similar to the previous experiments, the facility has an initial demand loading of 0.5 pedestrian per square meter. Fig. 11 shows the exit gate for each subarea as suggested by the model. Fig. 12
                      shows snapshots of the simulation model at different times along the simulation horizon for the evacuation plan given in Fig. 11. The model interface illustrates that gates 0, 1, and 2 are hardly used by the evacuees, as exiting from these gates involves circulating along the obstacle which entails longer evacuation time. When comparing the average evacuation time to the case where no obstacles exists, the average evacuation time increases by about 26%. This increase is contributed to longer travel time to reach the exit gates behind the obstacles and the increased level of congestion at other gates located away from the obstacle.

The last set of experiments examines the scenario in which the evacuation instructions include information on the exit gate and the time to start the evacuation. In this experiment, the facility is divided into 25 subareas. Also, a population size of 20 is used in the GA for both cases. Four evacuation start times are used as possible evacuation start times for each subarea. These times are 0, 5, 10, and 15seconds. For example, if the 15second starting time is assigned to a subarea, the evacuation of this subarea is delayed 15seconds after the evacuation start time. Similar to previous experiments, a total demand of about 25,000 pedestrians is assumed to be uniformly distributed over the area (density of about 0.5 pedestrian per square meter). Fig. 13
                      presents the model convergence pattern for this scenario and compares it with the scenario where the evacuation instructions are limited to the gate information. As illustrated in the figure, adding the evacuation start time to the evacuation instructions increases the problem size, which requires more iterations for the algorithm to converge. In addition, for the tested configuration and under this demand level, the algorithm produced a solution that requires all subareas to start evacuation immediately with no delays. One should expect a delayed evacuation of a subarea to be instructed only if the amount of imposed delay is less than the delay externalities imposed by evacuating other subareas. Such conditions do not seem to be met in the tested facility under this low demand level.

The above experiment is repeated after increasing the demand level to about 1 and 1.5 pedestrian per square meter (a total of 50,000 and 75,000 pedestrians, respectively). The model is used to determine the optimal evacuation plan for the case in which the evacuation instructions are limited to the gate information only (i.e. no start time instructions) and the case in which the evacuation instructions include both the gate and evacuation start time. Fig. 14
                      gives the average evacuation time for the different scenarios. As shown in the figure, for the demand levels of 0.5, 1.0 and 1.5 pedestrian per square meter, the average evacuation time is slightly reduced when evacuation instructions are given for both exit gate and evacuation start time, compared to the case where only exit gate instructions are provided. As shown in the figure, the average evacuation time is reduced from 2.65 to 2.56minutes for demand level of 1.0 pedestrian per square meter. Similarly, the average evacuation time is reduced from 3.88 to 3.76minutes for demand level of 1.5 pedestrian per square meter. While the reduction is the average evacuation time is marginal, it still shows the significance of adopting possible metering strategies for crowd evacuation.


                     Figs. 15 and 16
                     
                      illustrate the optimal solution obtained from the model, for the demand levels of 1.0 and 1.5 pedestrian per square meter, respectively. The figures give the subarea-gate assignment pattern and evacuation start time for each subarea for both demand levels. Snapshots of the simulation model at different times along the simulation horizon for the two demand levels are given in Figs. 17 and 18
                     
                     , respectively. In these figures, white particles indicate individuals that have not started evacuation, while yellow particles indicate individuals performing evacuation. As the demand level increases, the model suggests that some subareas are to be delayed to prevent high congestion at the gates, which could result in a flow breakdown at these gates. For example, for the demand level of 1.0 pedestrian per square meter, the model suggests that the pedestrians in subareas 6, 7, 8, 16, 17, and 18 are to be delayed for 5seconds in their evacuation. For the demand level of 1.5 pedestrian per square meter, the model suggests that the pedestrians in subareas 0, 4, 12, 20, and 24 are to be delayed for 5seconds. Moreover, pedestrians in subareas 6, 7, 8, 16, 17, and 18 are to be delayed for 10seconds in their evacuation.

This paper presents a modeling framework for optimal evacuation of large-scale pedestrian facilities. The framework adopts a simulation–optimization approach in which a GA is integrated with a microscopic pedestrian simulation model. The GA searches for the optimal evacuation plan, while the pedestrian simulation model evaluates the evacuation plans generated by the GA. The facility is divided into homogenous subareas such that users in one subarea receive the same evacuation instructions. Two evacuation instruction scenarios are presented in this paper. In the first scenario, evacuees are assumed to receive instructions on the optimal exit gate. In the second scenario, the evacuation instructions include the exit gate as well as the time to start evacuation. The latter scenario assumed that some subareas in the facility could be metered to prevent overcrowding along the evacuation routes and at the exit gates. The simulation model replicates the movement of pedestrians in the facility at a high level of detail. It accurately represents the configuration of the facility in terms of open areas, obstacles, boundaries, entrances, and exits. In addition, the model captures different behavioral rules that govern the movements of pedestrians over time and space.

The framework is applied to evacuate a hypothetical pedestrian facility. The results show that the developed model converges to a superior evacuation plan within an acceptable number of iterations. In addition, the resulting plan is shown to outperform the traditional nearest-gate evacuation plans. Furthermore, applying the model at higher resolution in terms of the size of subareas improves the evacuation performance. Using smaller subareas allows more flexibility in distributing the demand among the gates. Finally, scenario in which the evacuation instructions include information on the exit gate and the time to start the evacuation is examined. The results indicate that a delayed evacuation of a subarea is instructed only if the amount of imposed delay is less than the externalities resulting from evacuating the other subareas.

Several extensions are considered for this research work. For example, work is underway to compare the performance of the evacuation plans produced by the presented model with those generated by other existing models. In addition, we will examine the robustness of the developed evacuation plans considering different levels of evacuees’ compliance with the provided evacuation instructions. Effort is also underway to integrate more rigorous models that better capture the crowd behavior under panic and stress conditions (e.g., aggressiveness, confusion, dizziness and fatigue, etc.). Another research extension is related to accounting for the dynamics of the environmental conditions in the facility. For instance, under fire disasters, the fire spreading pattern could significantly impact the evacuation decisions from time to time. Developing a framework that integrates evacuation models and fire models is expected to provide safer evacuation plans. Finally, the application of the model to develop optimal evacuation plans for mega facilities such as the pilgrimage facilities in Mecca, Saudi Arabia is under investigation.

@&#REFERENCES@&#

