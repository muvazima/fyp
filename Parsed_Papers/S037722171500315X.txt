@&#MAIN-TITLE@&#Joint optimization for coordinated configuration of product families and supply chains by a leader-follower Stackelberg game

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Studies in joint configuration of product families and supply chains are reviewed.


                        
                        
                           
                           Mathematical models for product families and supply chains are formulated.


                        
                        
                           
                           Joint configuration is modeled by a Stackelberg game.


                        
                        
                           
                           A bi-level, nested genetic algorithm is employed to solve the game.


                        
                        
                           
                           Experiments are conducted and the managerial implications are discussed.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Product family

Supply chain

Module configuration

Stackelberg game

Bi-level optimization

@&#ABSTRACT@&#


               
               
                  Product family design by module configuration is conducive to accommodating product variety while maintaining mass production efficiency. Effective fulfillment of product families necessitates joint decision making of product family configuration (PFC) and downstream supply chain configuration (SCC), due to nowadays manufacturers’ moving towards assembly-to-order production throughout a distributed supply chain network. Existing decision models for joint optimization of product family and supply chain configuration are originated from an “all-in-one” approach that assumes both PFC and SCC decisions can be integrated into one optimization problem by aggregating two different types of objectives into a single objective function. Such an assumption neglects the complex tradeoffs underlying two different decision making problems and fails to reveal the inherent coupling of PFC and SCC.
                  This paper formulates joint configuration of a product family and its supply chain as a leader-follower Stackelberg game that is enacted through a bi-level hierarchical optimization mechanism to model the coordination between two self-interested decision makers for PFC and SCC. The PFC decisions are modeled as an upper-level optimization problem (called leader) for optimal selection of modules, module instances, and product variants. The SCC decisions are modeled as a lower-level optimization problem (called follower), which responds to decisions of the upper level in order to determine an optimal supply chain configuration and inventory policies. A nonlinear, mixed integer programming model is formulated for the bi-level joint decision in the leader-follower game. To solve the nonlinear optimization model, a bi-level, nested genetic algorithm with constraint reasoning is developed and implemented. A case study of a power transformer product family and supply chain configuration is reported to demonstrate the feasibility and potential of the proposed leader-follower game-theoretic method.
               
            

@&#INTRODUCTION@&#

Product family design and module configuration have been well recognized as an effective means for achieving mass customization production (Jiao & Tseng, 1999). Product family configuration (PFC) aims to offer optimal product varieties to satisfy diverse needs of multiple market segments by configuring common modules and variant modules through a modular product platform (Simpson, 2004). Owing to its advantages in accommodating customization while keeping mass production efficiency, PFC has received much attention from both industry and academia alike (Simpson, Siddique, & Jiao, 2005).

Originally PFC has been motivated toward optimizing the total cost of aggregated modules or customer-perceived utilities (Jiao, Zhang, & Wang, 2007). While the traditional focus of PFC is on the product design domain, there is limited emphasis on the downstream supply chain-related issues. With nowadays globally distributed operations and assembly-to-order production of more and more manufacturers, the fulfillment of PFC is closely coupled with downstream decisions of supply chain configuration (SCC), involving such issues as facility locations and node selections in a supply chain network (ElMaraghy & Mahmoudi, 2009; Park, 2001). For example, PFC much also take into account the implications and consequence of different outsourcing policies of certain modules in the supply chain (Lamothe, Hadj-Hamou, & Aldanondo, 2006). While PFC determines the topology and structures of the supply chain for a product family, the modules to be selected in PFC are to be delivered by appropriate suppliers in the supply chain. Therefore the PFC and SCC problems are closely interrelated to each other, and in turn joint decision making is deemed to be imperative (El Hadj Khalaf, Agard, & Penz, 2011; Huang, Zhang, & Liang, 2005; Shahzad & Hadj-Hamou, 2013).

Existing decision models for joint optimization of product family and supply chain configurations are originated from a basic assumption that both PFC and SCC decisions can be integrated into one optimization problem by aggregating two different types of objectives into a single objective function through certain coordinated protocol, such as weighted sum (Fujita, Amaya, & Akai, 2013; Shahzad & Hadj-Hamou, 2013). However, such a straightforward “all-in-one” approach neglects the complex tradeoffs underlying two different decision making problems and fails to reveal the inherent coupling of PFC and SCC. Key technical challenges of joint PFC and SCC optimization can be observed as the following:

(1) Coordinated configuration: The joint PFC and SCC optimization involves coordination in multiple dimensions. The joint decision first entails a cross-domain configuration problem from the product family domain to the supply chain domain. The heterogeneity of the goals and constraints as well as information exchange exists between these two different domains. Furthermore, the joint configuration starts with a cross-space configuration problem in the product family domain, encompassing from the customer space, to the product space and to the module space (Jiao et al., 2007). Meanwhile it involves cross-level configuration in the supply chain domain, mapping from the strategic to tactical level decisions (Simchi-Levi, Kaminsky, & Simchi-Levi, 1999). The interrelationships across the product spaces and the supply chain levels are non-trivial. Additionally, PFC and SCC must be coordinated in line with the cross-echelon configuration decisions in the supply chain domain as well, involving facility location decisions for suppliers, distribution center (DCs) and assembly plants (Daskin, Snyder, & Berger, 2005; Melo, Nickel, & Saldanha-da-Gama, 2009). It is challenging to model such coordinated configuration along these multiple dimensions.

(2) Conflicting goals: Either PFC or SCC may involve inconsistent, or even conflicting, objectives in their own optimization problems. For example, the optimization objective of PFC is mainly geared towards a maximal customer-perceived utility per cost (Jiao et al., 2007), whereas SCC aims at minimization of total supply chain costs (Graves & Willems, 2005). On the one hand, an optimal product family configuration itself may not ensure effective and efficient operations of the supply chain. It is also possible that a pre-determined supply chain network cannot feedback its network configuration decision for PFC to improve such decisions as selection or de-selection of certain modules and product variants for specific market segments. It thus necessary to explicitly deal with the tradeoffs related to inconsistent interests of two different configuration optimization problems.

(3) Non-cooperative games: The prevailing “all-in-one” approach treats joint optimization decisions as an aggregated problem (Fujita et al., 2013) and assumes that the self-interested decision makers can always be coordinated, regardless that they often possess different or even conflicting objectives. In practice, PFC and SCC are carried out by different departments or even different companies, and thus different decision makers are of their conflicting interests in maximizing their own payoffs. In this sense, joint optimization decision entails a non-cooperative game. Moreover, such a coordinated configuration decision game exemplifies a leader-follower decision making process, whereby PFC takes place first and subsequently SCC responds to the PFC decisions.

(4) Constraint handling: Various types of configuration constraints exist for such a cross-domain, cross-space, cross-level and cross-echelon configuration problem. For product family configuration, typical configuration constraints include compatibility constraints and incompatible constraints among module instances (Jiao et al., 2007). For supply chain configuration, production capacity constraints, inventory constraints and transportation constraints are widely found in a supply chain network (Daskin et al., 2005). Furthermore, the mapping constraints from the product family to supply chain domains are coupled with production compatibility constraints related to different module production facilities (Jiao, Xu, Wu, & Ng, 2009). It is important to explore effective constraint handling techniques throughout the coordination.

To handle inherent interactions and hierarchical characteristics of joint decisions between two self-interested roles of PFC and SCC, we explicitly formulate joint optimization for coordinated configuration of product families and supply chains as a Stackelberg game (von Stackelberg, 1952), which is also referred to a leader-follower game, such that a bi-level decision structure performs to model PFC as a leader and SCC as a follower. Acting as the leader, PFC decides the combination of potential product variants and anticipates manufacturing costs of modules to be provided by the supply chain partners. The follower serves SCC decisions by observing the results of PFC (namely decisions on selection of product variants and modules), and in the meantime has the autonomy in determining appropriate facility locations (such as selection of DCs and manufacturing plants) and the corresponding inventory operations polices. Consistent with the bi-level programming model, a bi-level nested genetic algorithm with constraint-reasoning is developed to derive optimal or near-optimal product family and supply chain configuration solutions

@&#RELATED WORK@&#

A product family, as an effective means for implementing mass customization, is the set of similar products that are derived from a common product platform and yet possess specific features or functionality to meet particular customer requirements (Meyer & Utterback, 1993). A larger number of studies on product family design and platform-based product development have been reported over the last decade. Jiao and Tseng (1999) present product family architecture (PFA) to describe logic mapping between functional, structural and technical views of a product family. Further, Du, Jiao, and Tseng (2001) adopt generic product structure (GPS) to depict hierarchical and structural organization of modules, module instances and product variants in a product family. Other researchers investigate the technology of how to obtain a common product platform, on which a product family is built, from a set of alternative modules. For instance, Oivares-Benitez and Gonzalez-Velarde (2008) propose the meta-heuristic procedures to select a common platform for a modular product family using Scatter Search and Tabu Search algorithms. Zacharias and Yassine (2008) develop an optimal product family platform taking both engineering and marketing factors into account. Also, there are a numerous number of studies addressing the measure of commonality in product family platform (Siddique, Rosen, & Wang, 1998; Thevenot & Simpson, 2005), etc.

Supply chain configuration determines the structures of a supply chain and the links (both logical and physical) between the components of the supply chain (Truong & Azadivar, 2005). The term supply chain configuration is first introduced by Graves and Willems (2005) in their studies which address how to configure the supply chain for a new product. The supply chain configuration in their study includes the selection of supply options at each stage of the supply chain and the placement of safe inventory in the supply chain. However, it is assumed that products have been designed before corresponding supply chain is configured.

As a matter of fact, there exists a close connection between product design and supply chains. A great deal of research examines the implication of product design on supply chains. Fixson (2005) presents a comprehensive overview of how product architectures significantly influence the domains of manufacturing and supply chain issues. Novak and Eppinger (2001) empirically explore the link between product architectures and vertical integration decisions of supply chains. Their analysis suggests that the companies optimizing the requirements of their product architectures as well as the capacities of their supply chains will outperform the firms focusing only on supply chain structures or product characteristics. Nepal, Monplaisir, and Famuyiw (2012) emphasize that it is important to integrate product architecture decisions and supply chain decisions during the early stages of the product development. Further, several studies address optimizing product design by incorporating supply chains in early design stages of the product development. Chiu and Okudan (2011) present a graph-based optimization for product design by proactively considering the selection of component suppliers in product design stages.

With the increasing customer demands for greater product variety, enterprises are moving from mass production to mass customization. Focusing on core competencies forces the manufacturers with mass customization paradigm to put special emphasis on the operations of their supply chains. Salvador, Forza, Rungtusanatham, and Forza (2004) qualitatively analyze how the supply chain including manufacturing and distribution networks should be configured when different degrees of customization, i.e. high-level or moderate level, are adopted. Since product family-based design is an effective method for implementing mass customization, recent studies have focused on simultaneous optimization of product families (product platforms) and supply chains. Huang et al. (2005) explore the integrated optimization of platform products, manufacturing processes and supply chains using Generic Bill-of-Material (GBOM) for representing product families and the genetic algorithm for solving the optimization problem, respectively. Further, Huang, Zhang, and Lo (2007) and Huang, Huang, and Newman (2011) apply Nash game theory to optimize platform product family and supplier selection decisions. However, it is assumed that a predetermined and fixed product platform is given in their studies. Luo, Kwong, Tang, Deng, and Gong (2011) and Cao, Luo, Kwong, Tang, and Zhou (2012) investigate joint optimization of product family design and supplier selection and apply consumer choice theory such as conjoint analysis and multinomial logic (MNL) to represent the probability of choosing a product variant. Nevertheless, only the component suppliers in supply chains are considered and the key parts such as inventory decision and transportation decisions are ignored in their research. Simultaneous consideration of product modules, product family and supply chains is also reported by El Hadj Khalaf, Agard, and Penz (2010, 2011) and Gupta and Krishnan (1999). Likewise, only decisions on component supplier or assembly plants are dealt with. Kumar and Chatterjee (2013) develop mixed integer linear programming (MILP) models to simultaneously optimize product line decisions and supply chain configuration. However, only rather simple network topology of supply chains is considered and more complex supply chain nodes such as assembly activities and complex logic flows between the nodes such as transportation are not dealt with in their studies.

Several recent research efforts have extended the above work to joint optimization of various stages in both product families and supply chains using the “all-in-one” method, namely aggregating the objectives of the two problems into one single objection function (Fujita et al., 2013; Shahzad & Hadj-Hamou, 2013). However, the pitfall of this “all-in-one” approach is the ignorance of the conflicting goals and hierarchy underlying these two different types of configuration problems, which entails a non-cooperative game per se, and thus calls for equilibrium solutions, instead of global optima (Jiao & Tseng, 2013).

A leader-follower decision structure originating from Stackelberg games (von Stackelberg, 1952) contains an upper-level optimization problem (referred to as a leader) and one or more lower-level optimization problems (referred to as followers). The leader holds a powerful position in the hierarchical decision problem and the followers react rationally to the leader's decision (Gibbons, 1992). The Stackelberg game has been applied in a number of fields, including advertising (Aust & Buscher, 2012), networks (van Hoesel, 2008), retailer supply chains (Esmaeili, Aryanezhad, & Zeephongsekul, 2009; Xiao, Choi, & Cheng, 2014), and supply chain contracts (Chen, Zhang, & Sun, 2012). Recently, the leader-follower game has been studied in green modular design of a product family to leverage material reuse and functional modularization (Ji, Jiao, Chen, & Wu, 2013).

The joint configuration in the product family domain must deal with the coordination of decisions across the spaces of a product family, i.e. cross-space decisions in the product family domain. As illustrated in Fig. 1
                        
                        , the product family configuration domain encompasses the module space, product space and customer space. The module space means the physical components, module instances, and sub-assemblies whereas product variants with assembled modules constitute the product space. The customer space describes the customer requirements for specific market segments. To coordinate configuration decisions across the three spaces, the mapping between the spaces, structural restrictions and constraints within the spaces must be observed.

In the module space, a product family, as a compact representation of a set of similar products, as shown in the left part of this figure, comprises common modules and compound (sub-assembly) modules that can be further decomposed into primitive module units, i.e. selective modules or common modules. Here, the selective modules, which are instantiated as disjunctive module instances (i.e. components), act as variable elements of the product platform whereas common modules constitute the common part of the product platform. For example, M
                        1 is a compound module that is composed of two selective modules M
                        4 and M
                        5, which are further instantiated as module instances 
                           
                              P
                              
                                 41
                              
                              *
                           
                        (
                           
                              P
                              
                                 42
                              
                              *
                           
                        ), 
                           
                              P
                              
                                 51
                              
                              *
                           
                        (
                           
                              P
                              
                                 52
                              
                              *
                           
                        ), respectively. The modules M
                        3 and M
                        6 form the common product platform of the product family. Furthermore, the module will not be selected if its corresponding module instance is NULL. For instance, the module M
                        8 will not be included in the end-product variants if 
                           
                              P
                              
                                 82
                              
                              *
                           
                         represents NULL value. Compatible constraints exist between module instances. For instance, 
                           
                              P
                              
                                 51
                              
                              *
                           
                         and 
                           
                              P
                              
                                 72
                              
                              *
                           
                         are compatible.

In the product space, as shown in the middle part of this figure, product variants can be derived from a product family to satisfy the specific requirements of segment markets. The requirements of the market segments in the customer space can be specified as the values of product features or product attributes, which are further mapped into the requirements on module instances of corresponding modules in terms of functions to components mapping. For convenience, the requirements of the market segments are directly specified on module instances (components) in this study. Therefore, product family configuration problem can be formulated as:

Given: 
                           
                              P
                              F
                              =
                              
                                 {
                                 
                                    
                                       M
                                       F
                                    
                                    ,
                                    
                                    
                                       P
                                       F
                                    
                                 
                                 }
                              
                              ∪
                              
                              
                                 {
                                 
                                    
                                       
                                          C
                                          s
                                       
                                    
                                    F
                                 
                                 ,
                                 
                                    
                                       
                                          C
                                          c
                                       
                                    
                                    F
                                 
                                 ,
                                 
                                 M
                                 
                                    R
                                    F
                                 
                                 }
                              
                           
                        , where MF
                         is a set of modules (selective, common and compound) in the module space; PF
                         is a set of module instances (components) in the module space; 
                           
                              C
                              s
                              F
                           
                         is a set of structural relations (such as AND, XOR) in the module space; Cc
                        
                        
                           F
                         is a set of compatible constraints or incompatible constraints; and MRF
                         is a set of customer requirements for market segmentation in the customer space.

Find: 
                           
                              f
                              :
                              {
                              
                                 
                                    M
                                    F
                                 
                                 ,
                                 
                                 
                                    P
                                    F
                                 
                              
                              }
                              →
                              R
                           
                        , where f is a mapping which associates a subset of modules and module instances, namely product variants in the product space, with a real value (such as costs or utilities) such that all constraints in Cc
                        
                        
                           F
                        , structural relations in 
                           
                              C
                              s
                              F
                           
                         and customer requirements in MRF
                         are satisfied.

Configuration in the supply chain domain of a product family must coordinate the activities of cross-level decisions and cross-echelon decisions. The decisions in supply chains can be decomposed into strategic level, tactical level and operational level (Simchi-Levi et al., 1999). This study mainly deals with the cross-level decisions in both strategic level and tactical level, as shown in Fig. 2. Decisions in the strategic level of a supply chain encompass the factors that last for a rather long period such as 5–10 years. Such decisions in the supply chain of a product family are facility locations like locating assembly plants for product variants (yn
                        ), manufacturing plants for fabricating modules (zu
                        ), and distribution centers (xm
                        ), as well as the supplier selection for offering module instances (ws
                        ). Decisions in the tactical level of a supply chain are the factors for half year to one year, such as inventory policies. For example, the ordering cycles in the multi-echelon supply chain for a product family includes ordering variables for DC (
                           
                              
                                 
                                    t
                                    0
                                 
                              
                              
                                 D
                                 
                                    C
                                    i
                                 
                              
                           
                        ), assembly plants (t
                        1), and manufacturing plants (t
                        2), respectively. The cross-echelon decision variables in the tactical level exist between supply chain echelons, like transportation/production information (dui,duj
                        ) from downstream entities to upstream entities. Therefore, supply chain configuration problem for a product family can be formulated as:

Given: 
                           
                              S
                              C
                              =
                              {
                              
                                 
                                    S
                                    S
                                 
                                 ,
                                 
                                 M
                                 
                                    P
                                    S
                                 
                                 ,
                                 
                                 A
                                 
                                    P
                                    S
                                 
                                 ,
                                 
                                 D
                                 
                                    C
                                    S
                                 
                                 ,
                                 
                                    R
                                    S
                                 
                                 ,
                                 
                                    }
                                    ∪
                                    
                                    {
                                 
                                 I
                                 
                                    V
                                    S
                                 
                                 ,
                                 
                                    C
                                    S
                                 
                                 ,
                                 C
                                 O
                                 N
                                 
                                    N
                                    S
                                 
                              
                              }
                           
                        , where SS
                         is a set of alternative suppliers; MPS
                         is a set of alternative manufacturing plants; APS
                         is a set of optional assembly plants; DCS
                         is a set of distribution centers; RS
                         is a set of retailers; CS
                         is a set of production capacity, transportation, selection constraints and customer demands; IVS
                         is a set of inventory policies (such as replenishment cycle) for DCs, manufacturing plants, and assembly plants; and CONNS
                         is a set of connections between supply chain nodes.

Find: 
                           
                              g
                              :
                              S
                              C
                              →
                              R
                           
                        , where g is a mapping which associates a subset of nodes, inventory polices and the connections between nodes with a real value (such as cost), such that all constraints in CS
                         are satisfied

As described aforementioned, both PFC and SCC are of inconsistent objectives where PFC aims at maximization of customer-perceived utility per cost and SCC concentrates on the reduction of total supply chain costs. The conflicting goals as well as interactions between the decisions make the coordination between two configuration problems indispensable. Stackelberg game, namely leader-follower game, is a decision game for solving two self-interested players with hierarchical characteristics. When product configuration design is finished, corresponding supply chain configuration is then carried out. Consequently, PFC firstly makes decisions and then SCC responds to PFC's strategy by making own decisions. As a result, joint configuration for coordinated PFC and SCC can be formulated as a leader-follower game where PFC is a leader and SCC a follower. Coordinated configuration of a product family and its supply chain must handle well decision interactions between the two configuration problems. Fig. 3 elaborates such interaction for decision making in the coordinated configuration. The upper part of the figure shows the contents of the product family configuration domain whereas the supply chain configuration domain is depicted in the lower part. As shown in the leftmost part of this figure, the information about instance configuration (
                           
                              γ
                              
                                 
                                 k
                              
                           
                        ) is offered by the instance sub-space in the module space of the PFC domain. With the instance configuration information (
                           
                              γ
                              
                                 
                                 k
                              
                           
                        ) and optional instance suppliers (S) as the input, the supplier echelon in the SCC domain is to determine which supplier instance can offer some specific module instances (ηjks
                        ). Also, the costs of corresponding modules (czjk
                        ) provided by the selected suppliers are fed back to the instance sub-space in the module space. The manufacturing echelon is to choose the manufacturing plants (ϕju
                        ) from the alternatives (U) to fabricate the modules when information regarding module configuration (θj
                        ) is obtained from the module sub-space in the PFC domain. The costs of the fabricated modules (czj
                        ) are sent back to the PFC domain. Similarly, the costs of product variants (czi
                        ) are retrieved by PFC domain when an assembly plant is chosen from the alternatives (N). Likewise, which DC is responsible for serving the some retailers with specific product demands (βmri
                        ) is determined in the DC echelon. Furthermore, the constraints such as the selection constraints (CΠ
                        ) and capacity constraints (Cξ
                        ) exist in each decision echelon of both supply chain and product family configuration, which the coordinated configuration should observe.

The research problem for joint optimization for coordinated configuration of product families and supply chains can be defined by the following assumptions:

                           
                              (1)
                              There exists one-to-one mapping between product variants and market segmentation. That is to say that for a specific market segment, a specific product variant is offered to meet its individualized requirements. However, the main manufacturer (i.e. assembly plant) has the right to decide whether or not the product should be provided for the corresponding market segmentation.

A retailer can sell multiple end-product variants, which may be shipped by more than one DC. However, one specific type of product variant can only be offered by one DC.

The prices and demands of product variants are fixed and predetermined.

One type of module instance (component) is only provided by one supplier. The production of a compound module (sub-assembly) may occur in several manufacturing plants. Only one assembly plant is selected for assembling end-products.

VMI (Vendor-managed Inventory) strategy has already been implemented in the supply chain between the assembly plant, DCs, and retailers (Simchi-Levi et al., 1999; Waller, Johnson, & Davis, 1999). The DCs act as warehouses for storing and holding the inventory of the commodities of the retailers, and the retailers cannot hold inventories. VMI strategy means that the assembly plant is responsible for making decision on the ordering policies such as the replenishment cycles for the inventory in DCs. VMI strategy, a widely adopted inventory policy in practice, is of such advantages like risk pooling, reducing bullwhip effect and inventory costs (Kristianto, Helo, Jiao, & Sandhu, 2012).

A common replenishment cycle policy (Viswanathan & Piplani, 2001) is adopted by the assembly plant and the retailers to manage the inventories of the end-products. This means that the replenishment cycle of all retailers keep the same.

The integer-ratio policy (Wang, 2004) is also employed between retailers, the assembly plant, and the manufacturing plants. That is to say that the replenishment cycle of the manufacturing plants is integer multiplier of that of the assembly plant which in turn is integer multiplier of the replenishment cycle of retailers.

The notations used in formulating decision models of joint configuration optimization are shown in Tables 1–3
                        .

Product family configuration aims to derive product variants by selecting alternative module instances and modules from the product platform to satisfy the customized requirements of market segments. The objective of product family configuration optimization is to maximize the customer-perceived utility per cost from both the customer and engineering perspectives (Jiao et al., 2007; Jiao & Zhang, 2005). The optimization problem for product family configuration, as a leader, is formulated as below.

                        
                           (1.0)
                           
                              
                                 M
                                 a
                                 x
                                 
                                 f
                                 
                                    (
                                    
                                       
                                          v
                                          i
                                       
                                       ,
                                       
                                          m
                                          
                                             i
                                             j
                                          
                                       
                                       ,
                                       
                                          o
                                          
                                             i
                                             j
                                             k
                                          
                                       
                                       ,
                                       
                                       
                                          θ
                                          j
                                       
                                       ,
                                       
                                       
                                          γ
                                          k
                                       
                                       ;
                                       c
                                       
                                          z
                                          i
                                       
                                       ,
                                       c
                                       
                                          z
                                          j
                                       
                                       ,
                                       c
                                       
                                          z
                                          
                                             j
                                             k
                                          
                                       
                                       ;
                                       
                                          c
                                          i
                                       
                                       ,
                                       
                                          c
                                          j
                                       
                                       ,
                                       
                                          c
                                          k
                                       
                                    
                                    )
                                 
                                 =
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                                 
                                    
                                       U
                                       i
                                    
                                    
                                       C
                                       i
                                    
                                 
                                 
                                    D
                                    i
                                 
                                 
                                    v
                                    i
                                 
                              
                           
                        
                     s.t.

                        
                           (1.1)
                           
                              
                                 
                                    c
                                    i
                                 
                                 =
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       J
                                    
                                 
                                 
                                    [
                                    N
                                    
                                       M
                                       
                                          i
                                          j
                                       
                                    
                                    
                                       (
                                       
                                          c
                                          j
                                       
                                       
                                          m
                                          
                                             i
                                             j
                                          
                                       
                                       +
                                       
                                          ∑
                                          
                                             k
                                             ∈
                                             K
                                          
                                       
                                       
                                          c
                                          
                                             j
                                             k
                                          
                                       
                                       
                                          o
                                          
                                             i
                                             j
                                             k
                                          
                                       
                                       )
                                    
                                    ]
                                 
                                 +
                                 c
                                 
                                    z
                                    i
                                 
                                 +
                                 C
                                 
                                    Y
                                    i
                                 
                                 
                                 ∀
                                 i
                                 ∈
                                 I
                              
                           
                        
                     
                     
                        
                           (1.2)
                           
                              
                                 
                                    c
                                    j
                                 
                                 =
                                 c
                                 
                                    z
                                    j
                                 
                                 +
                                 C
                                 
                                    Y
                                    j
                                 
                                 
                                 ∀
                                 j
                                 ∈
                                 J
                                 
                                 
                              
                           
                        
                     
                     
                        
                           (1.3)
                           
                              
                                 
                                    c
                                    
                                       j
                                       k
                                    
                                 
                                 =
                                 c
                                 
                                    z
                                    
                                       j
                                       k
                                    
                                 
                                 +
                                 C
                                 
                                    Y
                                    
                                       j
                                       k
                                    
                                 
                                 
                                 ∀
                                 j
                                 ∈
                                 J
                                 ,
                                 
                                 ∀
                                 k
                                 ∈
                                 K
                              
                           
                        
                     
                     
                        
                           (1.4)
                           
                              
                                 
                                    u
                                    i
                                 
                                 =
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       J
                                    
                                 
                                 
                                    ∑
                                    
                                       k
                                       ∈
                                       K
                                    
                                 
                                 
                                    (
                                    
                                       
                                          ω
                                          
                                             j
                                             k
                                          
                                       
                                       
                                          U
                                          
                                             j
                                             k
                                          
                                       
                                       
                                          o
                                          
                                             i
                                             j
                                             k
                                          
                                       
                                       +
                                       
                                          π
                                          i
                                       
                                    
                                    )
                                 
                                 +
                                 
                                    
                                       ɛ
                                    
                                    i
                                 
                                 
                                 ∀
                                 i
                                 ∈
                                 I
                              
                           
                        
                     
                     
                        
                           (1.5)
                           
                              
                                 
                                    v
                                    i
                                 
                                 =
                                 
                                    m
                                    
                                       i
                                       j
                                    
                                 
                                 =
                                 
                                    m
                                    
                                       i
                                       
                                          j
                                          ′
                                       
                                    
                                 
                                 
                                 ∀
                                 A
                                 N
                                 D
                                 
                                    (
                                    
                                       i
                                       ,
                                       j
                                       ,
                                       
                                          j
                                          ′
                                       
                                    
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (1.6)
                           
                              
                                 
                                    m
                                    
                                       i
                                       j
                                    
                                 
                                 =
                                 
                                    o
                                    
                                       i
                                       j
                                       k
                                    
                                 
                                 +
                                 
                                    o
                                    
                                       i
                                       j
                                       
                                          k
                                          ′
                                       
                                    
                                 
                                 
                                 ∀
                                 X
                                 O
                                 R
                                 
                                    (
                                    
                                       j
                                       ,
                                       k
                                       ,
                                       
                                          k
                                          ′
                                       
                                    
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (1.7)
                           
                              
                                 
                                    ∑
                                    
                                       k
                                       ∈
                                       K
                                    
                                 
                                 
                                    o
                                    
                                       i
                                       j
                                       k
                                    
                                 
                                 =
                                 1
                                 
                                 ∀
                                 i
                                 ∈
                                 I
                                 ,
                                 
                                 ∀
                                 j
                                 ∈
                                 J
                              
                           
                        
                     
                     
                        
                           (1.8)
                           
                              
                                 
                                    o
                                    
                                       i
                                       j
                                       k
                                    
                                 
                                 =
                                 R
                                 
                                    I
                                    
                                       i
                                       j
                                       k
                                    
                                 
                                 
                                 ∀
                                 i
                                 ∈
                                 I
                                 ,
                                 
                                    
                                    
                                 
                                 ∀
                                 j
                                 ∈
                                 J
                                 ,
                                 
                                 ∀
                                 k
                                 ∈
                                 K
                              
                           
                        
                     
                     
                        
                           (1.9)
                           
                              
                                 
                                    θ
                                    j
                                 
                                 =
                                 
                                    {
                                    
                                       
                                          
                                             1
                                          
                                          
                                             
                                                
                                                
                                                   
                                                   if
                                                   
                                                   
                                                      ∑
                                                      i
                                                   
                                                   N
                                                   
                                                      M
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                   
                                                      m
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                   >
                                                   0
                                                
                                             
                                          
                                       
                                       
                                          
                                             0
                                          
                                          
                                             
                                                
                                                otherwise
                                             
                                          
                                       
                                    
                                 
                                 
                                 ∀
                                 j
                                 ∈
                                 J
                              
                           
                        
                     
                     
                        
                           (1.10)
                           
                              
                                 
                                    γ
                                    k
                                 
                                 =
                                 
                                    {
                                    
                                       
                                          
                                             1
                                          
                                          
                                             
                                                
                                                
                                                   if
                                                   
                                                   
                                                      ∑
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                   
                                                      ∑
                                                      
                                                         j
                                                         ∈
                                                         J
                                                      
                                                   
                                                   
                                                      o
                                                      
                                                         i
                                                         j
                                                         k
                                                      
                                                   
                                                   >
                                                   0
                                                
                                             
                                          
                                       
                                       
                                          
                                             0
                                          
                                          
                                             
                                                
                                                otherwise
                                             
                                          
                                       
                                    
                                 
                                 
                                 ∀
                                 k
                                 ∈
                                 K
                              
                           
                        
                     
                     
                        
                           (1.11)
                           
                              
                                 
                                    v
                                    i
                                 
                                 ,
                                 
                                    m
                                    
                                       i
                                       j
                                    
                                 
                                 ,
                                 
                                    o
                                    
                                       i
                                       j
                                       k
                                    
                                 
                                 =
                                 0
                                 ,
                                 1
                                 
                                 ∀
                                 i
                                 ∈
                                 I
                                 ,
                                 ∀
                                 j
                                 ∈
                                 J
                                 ,
                                 
                                 ∀
                                 k
                                 ∈
                                 K
                              
                           
                        
                     
                     
                        
                           (1.12)
                           
                              
                                 c
                                 
                                    z
                                    i
                                 
                                 ,
                                 c
                                 
                                    z
                                    j
                                 
                                 ,
                                 c
                                 
                                    z
                                    
                                       j
                                       k
                                    
                                 
                                 ≥
                                 0
                                 
                                 ∀
                                 i
                                 ∈
                                 I
                                 ,
                                 ∀
                                 j
                                 ∈
                                 J
                                 ,
                                 
                                 ∀
                                 k
                                 ∈
                                 K
                              
                           
                        
                     
                  

The objective function is the sum of the customer-perceived utility per cost for each selected variant. Constraint Eq. (1.1) determines total costs of the end-product variant i, which aggregates the development and manufacturing costs of modules and module instances included in the product. The costs of a module and corresponding module instance are represented by constraint Eqs. (1.2) and (1.3), respectively. Constraint Eq. (1.4) denotes the utility of an end-product. In accordance with the part-worth utility theory, the utility of end-product variant i is the weighted sum of the utility of module instances contained in the end-product. πi
                      is a constant associated with the derivation of a composite utility from part-worth utilities with respect to product variant i. ɛ
                        i
                      is an error term for each product. Constraint Eq. (1.5) builds the AND relationships between a sub-assembly and its modules whereas constraint Eq. (1.6) represents the XOR relationships between a module and its module instance. Constraint Eq. (1.7) specifies that only one module instance can be selected from alternatives instances of a specific module. Constraint Eq. (1.8) enforces that the selected product variant should meet the requirements of market segments which are specified on the module instances. Constraint Eqs. (1.9) and (1.10) indicate whether or not a module or module instance should be produced or supplied, respectively. Constraint Eq. (1.11) requires that the integer variables for representing whether or not the product variant, modules and module instances are selected be 0–1 variables. Constraint Eq. (1.12) enforces that the decision variables for representing the costs of module and module instances are positive real number.

As described in Section 3.2, supply chain configuration is to select the nodes in various stages (such as DC, retails and assembly) from alternatives to constitute a supply chain network with the aim of transferring materials into end-product variants. Thus, the decision model for supply chain configuration should involve the decision making in choosing DCs for distributing product variants to retailers, assembly plants for assembling modules into product variants, manufacturing plants for fabricating modules, and suppliers for offering module instances. In the following, we will address how to formulate the decision models containing objective functions and constraints for the stages.

End-product variants are distributed by DCs to retailers. The decision model for DCs and retailers involves the formulation of both costs and constraints. The costs of DCs and retailers include the fixed costs for opening DCs and the transportation costs from DCs to retailers. The inventory costs of retailers (DCs), which are managed by the assembly plant due to VMI inventory policy, are not considered in the total cost for DCs. Therefore, the total costs of DCs are formulated as:

                           
                              (2)
                              
                                 
                                    T
                                    
                                       C
                                       
                                          D
                                          R
                                       
                                    
                                    =
                                    
                                       ∑
                                       
                                          m
                                          ∈
                                          M
                                       
                                    
                                    
                                       F
                                       m
                                    
                                    
                                       x
                                       m
                                    
                                    +
                                    
                                       ∑
                                       
                                          m
                                          ∈
                                          M
                                       
                                    
                                    
                                       ∑
                                       
                                          r
                                          ∈
                                          R
                                       
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    T
                                    C
                                    
                                       P
                                       
                                          m
                                          r
                                          i
                                       
                                    
                                    D
                                    
                                       R
                                       
                                          r
                                          i
                                       
                                    
                                    
                                       β
                                       
                                          m
                                          r
                                          i
                                       
                                    
                                 
                              
                           
                        where, the first term of the total costs represents the fixed costs for opening DCs and the last term is the transportation costs for shipping end-products from DCs to retailers. The constraints connected with DCs and retailers are depicted as follows:

                           
                              (3.1)
                              
                                 
                                    
                                       ∑
                                       
                                          m
                                          ∈
                                          M
                                       
                                    
                                    
                                       β
                                       
                                          m
                                          r
                                          i
                                       
                                    
                                    =
                                    
                                       v
                                       i
                                    
                                    
                                    ∀
                                    r
                                    ∈
                                    R
                                    ,
                                    
                                    ∀
                                    i
                                    ∈
                                    I
                                 
                              
                           
                        
                        
                           
                              (3.2)
                              
                                 
                                    
                                       β
                                       
                                          m
                                          r
                                          i
                                       
                                    
                                    ≤
                                    
                                       x
                                       m
                                    
                                    ,
                                    
                                    
                                    
                                       β
                                       
                                          m
                                          r
                                          i
                                       
                                    
                                    ≤
                                    
                                       v
                                       i
                                    
                                    
                                    ∀
                                    m
                                    ∈
                                    M
                                    ,
                                    
                                       
                                       
                                    
                                    ∀
                                    r
                                    ∈
                                    R
                                    ,
                                    
                                    ∀
                                    i
                                    ∈
                                    I
                                 
                              
                           
                        
                        
                           
                              (3.3)
                              
                                 
                                    d
                                    
                                       v
                                       
                                          m
                                          i
                                       
                                    
                                    =
                                    
                                       ∑
                                       
                                          r
                                          ∈
                                          R
                                       
                                    
                                    D
                                    
                                       R
                                       
                                          r
                                          i
                                       
                                    
                                    
                                       β
                                       
                                          m
                                          r
                                          i
                                       
                                    
                                    
                                    ∀
                                    m
                                    ∈
                                    M
                                    ,
                                    
                                    ∀
                                    i
                                    ∈
                                    I
                                 
                              
                           
                        
                        
                           
                              (3.4)
                              
                                 
                                    d
                                    
                                       v
                                       m
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    d
                                    
                                       v
                                       
                                          m
                                          i
                                       
                                    
                                    
                                    ∀
                                    m
                                    ∈
                                    M
                                 
                              
                           
                        
                        
                           
                              (3.5)
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    D
                                    
                                       R
                                       
                                          r
                                          i
                                       
                                    
                                    
                                       β
                                       
                                          m
                                          r
                                          i
                                       
                                    
                                    ≤
                                    C
                                    A
                                    
                                       P
                                       
                                          m
                                          r
                                       
                                    
                                    
                                    ∀
                                    m
                                    ∈
                                    M
                                    ,
                                    
                                    ∀
                                    r
                                    ∈
                                    R
                                 
                              
                           
                        
                     

We assume that one type of product variant required by a retailer is only offered by one DC, as shown in constraint Eq. (3.1). Constraint Eq. (3.2) is a linking constraint between variables. Constraints Eqs. (3.3) and (3.4) represent annual demand of end-product variant i at DC m, and the total annual demand of end-products at DC m, respectively. Constraint Eq. (3.5) enforces capacity constraint of a DC, namely that the aggregated number of end-product variant i at DC m should be less than or equal to its transportation capacity.

The assembly plant is employed to assemble the modules from manufacturing plants into end-product variants. The decision model for the assembly plants involves the formulation of both costs and constraints, which are described below.

(1) Total cost: A common replenishment cycle (Viswanathan & Piplani, 2001) has been adopted for all retailers (DCs) due to convenient management and effective organization in both delivery and production for end-item products in the assembly plant. This means that the equation holds, namely 
                           
                              
                                 t
                                 0
                              
                              =
                              
                                 
                                    
                                       t
                                       0
                                    
                                 
                                 
                                    D
                                    
                                       C
                                       1
                                    
                                 
                              
                              =
                              
                                 
                                    
                                       t
                                       0
                                    
                                 
                                 
                                    D
                                    
                                       C
                                       2
                                    
                                 
                              
                              =
                              …
                              =
                              
                                 
                                    
                                       t
                                       0
                                    
                                 
                                 
                                    D
                                    
                                       C
                                       m
                                    
                                 
                              
                              ,
                              m
                              ∈
                              M
                           
                        . Further, integer-ratio policy is employed between the retailers (DCs) and the assembly plant. This denotes that the replenishment cycle of the assembly plant is integer multiplier of that of the retailers (DCs). In accordance with VMI policy, the retailers (DCs) do not hold the inventories, which are in turn managed by the assembly plant. Therefore, the inventory cost at the assembly plant consists of the end-product inventory cost at the DCs’ side, the end-product inventory cost at the assembly plant's side, and the module's (raw material) inventory cost at the assembly plant's side.

For the end-product inventory at DC's side, for every common replenishment cycle t
                        0, the VMI system spends Ami
                         on fixed ordering cost, 
                           
                              
                                 1
                                 2
                              
                              
                                 H
                                 
                                    m
                                    i
                                 
                              
                              d
                              
                                 v
                                 
                                    m
                                    i
                                 
                              
                              
                                 
                                    
                                       t
                                       0
                                    
                                 
                                 2
                              
                           
                         on holding cost. Thus, the total inventory cost per unit time for end-product i at DC m's side is:

                           
                              (4.1)
                              
                                 
                                    I
                                    C
                                    
                                       E
                                       
                                          m
                                          i
                                       
                                    
                                    =
                                    
                                       1
                                       
                                          t
                                          0
                                       
                                    
                                    
                                       (
                                       
                                          
                                             A
                                             
                                                m
                                                i
                                             
                                          
                                          +
                                          
                                             1
                                             2
                                          
                                          
                                             H
                                             
                                                m
                                                i
                                             
                                          
                                          d
                                          
                                             v
                                             
                                                m
                                                i
                                             
                                          
                                          
                                             
                                                
                                                   t
                                                   0
                                                
                                             
                                             2
                                          
                                       
                                       )
                                    
                                 
                              
                           
                        
                     

For the end-product inventory at the assembly plant's side, we assume that the production setup time is required for every replenishment cycle. The end-product inventory cost for product variant per unit time at the assembly plant n’s side therefore equals

                           
                              (4.2)
                              
                                 
                                    I
                                    C
                                    
                                       P
                                       n
                                    
                                    =
                                    
                                       1
                                       
                                          t
                                          0
                                       
                                    
                                    
                                       (
                                       
                                          
                                             A
                                             n
                                          
                                          +
                                          
                                             H
                                             n
                                          
                                          
                                             ∑
                                             
                                                m
                                                ∈
                                                M
                                             
                                          
                                          
                                             
                                                d
                                                
                                                   
                                                      
                                                         v
                                                         m
                                                      
                                                   
                                                   2
                                                
                                                
                                                   
                                                      
                                                         t
                                                         0
                                                      
                                                   
                                                   2
                                                
                                             
                                             
                                                2
                                                
                                                   P
                                                   n
                                                
                                             
                                          
                                       
                                       )
                                    
                                 
                              
                           
                        
                     

For the inventory cost of modules (raw material), as shown in Fig. 4
                        , the production cycle (t
                        1) of modules is the integer multiple (k
                        0) of the common replenishment cycle (t
                        0), owing to the fact that the integer-ratio ordering policy is assumed (see also Wang, 2004). The inventory cost of the module j in its replenishment cycle t
                        1 then should be:

                           
                              (4.3)
                              
                                 
                                    I
                                    C
                                    
                                       M
                                       
                                          n
                                          j
                                       
                                    
                                    =
                                    
                                       1
                                       
                                          
                                             k
                                             0
                                          
                                          
                                             t
                                             0
                                          
                                       
                                    
                                    
                                    
                                       [
                                       
                                          
                                             A
                                             
                                                n
                                                j
                                             
                                          
                                          +
                                          
                                             1
                                             2
                                          
                                          
                                             H
                                             
                                                n
                                                j
                                             
                                          
                                          
                                             k
                                             0
                                          
                                          
                                             (
                                             
                                                
                                                   ∑
                                                   
                                                      m
                                                      ∈
                                                      M
                                                   
                                                
                                                
                                                   
                                                      d
                                                      
                                                         v
                                                         m
                                                      
                                                      
                                                         t
                                                         0
                                                      
                                                   
                                                   
                                                      P
                                                      n
                                                   
                                                
                                             
                                             )
                                          
                                          
                                             (
                                             
                                                
                                                   t
                                                   0
                                                
                                                d
                                                
                                                   u
                                                   j
                                                
                                             
                                             )
                                          
                                          +
                                          
                                             H
                                             
                                                n
                                                j
                                             
                                          
                                          
                                             ∑
                                             
                                                k
                                                =
                                                1
                                             
                                             
                                                
                                                   k
                                                   0
                                                
                                                −
                                                1
                                             
                                          
                                          k
                                          
                                             t
                                             0
                                             2
                                          
                                          d
                                          
                                             u
                                             j
                                          
                                       
                                       ]
                                    
                                 
                              
                           
                        
                     

From the above analysis, the total inventory costs at the assembly plants can be expressed by:

                           
                              (4.4)
                              
                                 
                                    T
                                    I
                                    C
                                    =
                                    
                                       ∑
                                       
                                          m
                                          ∈
                                          M
                                       
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    I
                                    C
                                    
                                       E
                                       
                                          m
                                          i
                                       
                                    
                                    +
                                    
                                       ∑
                                       
                                          n
                                          ∈
                                          N
                                       
                                    
                                    I
                                    C
                                    
                                       P
                                       n
                                    
                                    
                                       y
                                       n
                                    
                                    +
                                    
                                       ∑
                                       
                                          n
                                          ∈
                                          N
                                       
                                    
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                    I
                                    C
                                    
                                       M
                                       
                                          n
                                          j
                                       
                                    
                                    
                                       y
                                       n
                                    
                                 
                              
                           
                        
                     

Therefore, the total costs of the assembly plant include the fixed ordering cost for opening an assembly plant, the inventory costs, transportation costs, and the manufacturing costs of end-products. The total costs can be represented as

                           
                              (4.5)
                              
                                 
                                    T
                                    
                                       C
                                       
                                          A
                                          P
                                       
                                    
                                    =
                                    T
                                    I
                                    C
                                    +
                                    
                                       ∑
                                       
                                          n
                                          ∈
                                          ∈
                                          N
                                       
                                    
                                    
                                       F
                                       n
                                    
                                    
                                       y
                                       n
                                    
                                    +
                                    
                                       ∑
                                       
                                          n
                                          ∈
                                          N
                                       
                                    
                                    
                                       ∑
                                       
                                          m
                                          ∈
                                          M
                                       
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    T
                                    C
                                    
                                       P
                                       
                                          n
                                          m
                                          i
                                       
                                    
                                    d
                                    
                                       v
                                       
                                          m
                                          i
                                       
                                    
                                    
                                       y
                                       n
                                    
                                    +
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    d
                                    
                                       u
                                       i
                                    
                                    C
                                    
                                       Z
                                       
                                          n
                                          i
                                       
                                    
                                    
                                       y
                                       n
                                    
                                 
                              
                           
                        
                     

The first term is the total inventory cost of the assembly plants and the second term the fixed cost for opening the assembly plants. The third term denotes the transportation costs for shipping end-product variants from the manufacturing plant to DCs, whereas the manufacturing costs of end-products are denoted by the last term.

(2) Constraints: Constraint Eq. (5.1) enforces that only one assembly plant (main manufacturer) is selected. For the assembly plant, the number of specific product variant to be produced should be equal to that of the product variant transported from the assembly plant to the DCs, as shown in Constraint Eq. (5.2). Constraint Eq. (5.3) shows the material requirements for modules to be used in the assembly processes. Constraint (5.4) enforces the capacity of the assembly plant n, namely that the total number of assembled end-products should be equal or less to its production capacity. Constraint Eq. (5.5) denotes the assembly cost of the product variant i, which equals to the assembly cost of the variant produced by the selected manufacturing plant. Constraint Eqs. (5.6) and (5.7) guarantees the delivery lead-time of product variant i is less than or equal to the delivery lead-time required by customers.

                           
                              (5.1)
                              
                                 
                                    
                                       ∑
                                       
                                          n
                                          ∈
                                          N
                                       
                                    
                                    
                                       y
                                       n
                                    
                                    =
                                    1
                                    
                                    
                                    ∀
                                    n
                                    ∈
                                    N
                                 
                              
                           
                        
                        
                           
                              (5.2)
                              
                                 
                                    d
                                    
                                       u
                                       i
                                    
                                    =
                                    
                                       ∑
                                       
                                          m
                                          ∈
                                          M
                                       
                                    
                                    d
                                    
                                       v
                                       
                                          m
                                          i
                                       
                                    
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    I
                                 
                              
                           
                        
                        
                           
                              (5.3)
                              
                                 
                                    d
                                    
                                       u
                                       j
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    
                                       (
                                       
                                          
                                             ∑
                                             
                                                m
                                                ∈
                                                M
                                             
                                          
                                          d
                                          
                                             v
                                             
                                                m
                                                i
                                             
                                          
                                       
                                       )
                                    
                                    
                                       m
                                       
                                          i
                                          j
                                       
                                    
                                    N
                                    
                                       M
                                       
                                          i
                                          j
                                       
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                 
                              
                           
                        
                        
                           
                              (5.4)
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    d
                                    
                                       u
                                       i
                                    
                                    ≤
                                    C
                                    A
                                    
                                       P
                                       n
                                    
                                    
                                    ∀
                                    n
                                    ∈
                                    N
                                    
                                 
                              
                           
                        
                        
                           
                              (5.5)
                              
                                 
                                    c
                                    
                                       z
                                       i
                                    
                                    =
                                    
                                       ∑
                                       
                                          n
                                          ∈
                                          N
                                       
                                    
                                    C
                                    
                                       Z
                                       
                                          n
                                          i
                                       
                                    
                                    
                                       y
                                       n
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    I
                                 
                              
                           
                        
                        
                           
                              (5.6)
                              
                                 
                                    M
                                    a
                                    
                                       x
                                       j
                                    
                                    
                                       (
                                       
                                          l
                                          
                                             d
                                             
                                                i
                                                j
                                             
                                          
                                          
                                             m
                                             
                                                i
                                                j
                                             
                                          
                                       
                                       )
                                    
                                    +
                                    L
                                    
                                       T
                                       i
                                    
                                    
                                       v
                                       i
                                    
                                    ≤
                                    L
                                    
                                       D
                                       i
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    I
                                 
                              
                           
                        
                     

A manufacturing plant is used to produce a sub-assembly with module instances as its raw materials. The decision model for manufacturing plants encompasses the formulation of both costs and constraints, which are addressed as follows.

(1) Total cost: The inventory at the manufacturing plant includes both the inventory of finished modules (product) and that of module instances (raw materials) at the manufacturing plant. We assume that there exist production setup time for the manufacturing plant. The inventory cost for module j (product) at manufacturing plant u's side encompasses the production setup cost and the holding cost of the module. Consequently, the inventory of finished module j at the manufacturing plant u can be expressed by:

                           
                              (6.1)
                              
                                 
                                    I
                                    C
                                    M
                                    
                                       M
                                       
                                          u
                                          j
                                       
                                    
                                    =
                                    
                                       1
                                       
                                          t
                                          1
                                       
                                    
                                    
                                       (
                                       
                                          
                                             A
                                             u
                                          
                                          +
                                          
                                             1
                                             2
                                          
                                          
                                             H
                                             
                                                u
                                                j
                                             
                                          
                                          
                                             
                                                p
                                                
                                                   
                                                      
                                                         m
                                                         j
                                                      
                                                   
                                                   2
                                                
                                             
                                             
                                                P
                                                
                                                   u
                                                   j
                                                
                                             
                                          
                                       
                                       )
                                    
                                 
                              
                           
                        
                     

According to the integer-ratio policy, the replenishment cycle (t
                        2) of the module instance is the integer multiple (k
                        1) of the replenishment cycle (t
                        1) of the module, as shown in Fig. 4. The holding cost of the module instance k (raw materials) in its replenishment cycle t
                        2 per unit time at manufacturing plant u’s side is:

                           
                              (6.2)
                              
                                 
                                    I
                                    C
                                    
                                       S
                                       
                                          u
                                          j
                                          k
                                       
                                    
                                    =
                                    
                                       1
                                       
                                          t
                                          2
                                       
                                    
                                    
                                       [
                                       
                                          
                                             A
                                             
                                                u
                                                j
                                                k
                                             
                                          
                                          +
                                          
                                             1
                                             2
                                          
                                          
                                             H
                                             
                                                m
                                                j
                                                k
                                             
                                          
                                          
                                             k
                                             1
                                          
                                          
                                             (
                                             
                                                
                                                   p
                                                   
                                                      m
                                                      j
                                                   
                                                
                                                
                                                   P
                                                   
                                                      u
                                                      j
                                                   
                                                
                                             
                                             )
                                          
                                          p
                                          
                                             m
                                             j
                                          
                                          +
                                          
                                             H
                                             
                                                m
                                                j
                                                k
                                             
                                          
                                          
                                             ∑
                                             
                                                k
                                                =
                                                1
                                             
                                             
                                                
                                                   k
                                                   1
                                                
                                                −
                                                1
                                             
                                          
                                          k
                                          
                                             t
                                             1
                                          
                                          p
                                          
                                             m
                                             j
                                          
                                       
                                       ]
                                    
                                 
                              
                           
                        
                     

From the above analysis, the total inventory cost at the manufacturing plant can be represented by:

                           
                              (6.3)
                              
                                 
                                    T
                                    I
                                    
                                       C
                                       
                                          M
                                          P
                                       
                                    
                                    =
                                    
                                       ∑
                                       
                                          u
                                          ∈
                                          U
                                       
                                    
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                    I
                                    C
                                    M
                                    
                                       M
                                       
                                          u
                                          j
                                       
                                    
                                    +
                                    
                                       ∑
                                       
                                          u
                                          ∈
                                          U
                                       
                                    
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                    
                                       ∑
                                       
                                          k
                                          ∈
                                          K
                                       
                                    
                                    I
                                    C
                                    
                                       S
                                       
                                          u
                                          j
                                          k
                                       
                                    
                                 
                              
                           
                        
                     

The total cost at the manufacturing plant contains the fixed setup cost for opening the manufacturing plants, the inventory cost and transportation cost shipping finished modules from the manufacturing plants to the assembly plant. Consequently it can be described as:

                           
                              (6.4)
                              
                                 
                                    
                                       
                                          
                                             T
                                             
                                                C
                                                
                                                   M
                                                   P
                                                
                                             
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             
                                                ∑
                                                
                                                   u
                                                   ∈
                                                   U
                                                
                                             
                                             
                                                F
                                                u
                                             
                                             
                                                z
                                                u
                                             
                                             +
                                             T
                                             I
                                             
                                                C
                                                
                                                   M
                                                   P
                                                
                                             
                                             +
                                             
                                                ∑
                                                
                                                   u
                                                   ∈
                                                   U
                                                
                                             
                                             
                                                ∑
                                                
                                                   n
                                                   ∈
                                                   N
                                                
                                             
                                             
                                                ∑
                                                
                                                   j
                                                   ∈
                                                   J
                                                
                                             
                                             T
                                             C
                                             
                                                P
                                                
                                                   u
                                                   n
                                                   j
                                                
                                             
                                             p
                                             
                                                m
                                                
                                                   u
                                                   j
                                                
                                             
                                             
                                                ∅
                                                
                                                   j
                                                   u
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             +
                                             
                                                1
                                                
                                                   t
                                                   1
                                                
                                             
                                             
                                                ∑
                                                
                                                   u
                                                   ∈
                                                   U
                                                
                                             
                                             
                                                ∑
                                                
                                                   j
                                                   ∈
                                                   J
                                                
                                             
                                             p
                                             
                                                m
                                                
                                                   u
                                                   j
                                                
                                             
                                             C
                                             
                                                Z
                                                
                                                   u
                                                   j
                                                
                                             
                                             
                                                ∅
                                                
                                                   j
                                                   u
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where the first term is the setup cost for opening and operating manufacturing plants and the second term the total inventory costs. The transportation cost is denoted by the third term while the last term is the manufacturing cost of modules.

(2) Constraints: Constraint Eq. (7.1) expresses that a compound (sub-assembly) module can be assigned to more than one manufacturing plan for production. Constraint Eq. (7.2) represents that total production volume of the module should be equal to that required by the manufacturing plant. Constraints Eqs. (7.3) and (7.4) are linking constraints between variables. Constraint Eq. (7.5) denotes that total production volume of module j is equal to the volume of modules that are needed in manufacturing plant n. The capacity restriction is enforced by constraint Eq. (7.6), which says that the total production volume of manufacturing plant u should be equal to or less than its capacity. Constraint Eq. (7.7) represents the manufacturing cost of module j. The demand volume of module instance k at the manufacturing plant u, which is needed to produce the corresponding module, is denoted by constraint Eq. (7.8). Constraint Eq. (7.9) calculates the delivery lead-time of module j. Hence we have:

                           
                              (7.1)
                              
                                 
                                    
                                       θ
                                       j
                                    
                                    ≤
                                    
                                       ∑
                                       
                                          u
                                          ∈
                                          U
                                       
                                    
                                    
                                       ∅
                                       
                                          j
                                          u
                                       
                                    
                                    ≤
                                    
                                       M
                                       2
                                    
                                    
                                       θ
                                       j
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                 
                              
                           
                        
                        
                           
                              (7.2)
                              
                                 
                                    
                                       ∑
                                       
                                          u
                                          ∈
                                          U
                                       
                                    
                                    p
                                    
                                       m
                                       
                                          u
                                          j
                                       
                                    
                                    =
                                    
                                       k
                                       o
                                    
                                    
                                       t
                                       0
                                    
                                    d
                                    
                                       u
                                       j
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                 
                              
                           
                        
                        
                           
                              (7.3)
                              
                                 
                                    p
                                    
                                       m
                                       
                                          u
                                          j
                                       
                                    
                                    ≤
                                    
                                       M
                                       1
                                    
                                    
                                       ∅
                                       
                                          j
                                          u
                                       
                                    
                                    
                                    ∀
                                    u
                                    ∈
                                    U
                                    ,
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                 
                              
                           
                        
                        
                           
                              (7.4)
                              
                                 
                                    
                                    
                                       ∅
                                       
                                          j
                                          u
                                       
                                    
                                    ≤
                                    
                                       z
                                       u
                                    
                                    
                                    ∀
                                    u
                                    ∈
                                    U
                                    ,
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                 
                              
                           
                        
                        
                           
                              (7.5)
                              
                                 
                                    
                                       ∑
                                       
                                          u
                                          ∈
                                          U
                                       
                                    
                                    p
                                    
                                       m
                                       
                                          u
                                          j
                                       
                                    
                                    
                                       ∅
                                       
                                          j
                                          u
                                       
                                    
                                    =
                                    
                                       ∑
                                       
                                          n
                                          ∈
                                          N
                                       
                                    
                                    d
                                    
                                       u
                                       j
                                    
                                    
                                       y
                                       n
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                 
                              
                           
                        
                        
                           
                              (7.6)
                              
                                 
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                    p
                                    
                                       m
                                       
                                          u
                                          j
                                       
                                    
                                    ≤
                                    C
                                    A
                                    
                                       P
                                       u
                                    
                                    
                                    ∀
                                    u
                                    ∈
                                    U
                                 
                              
                           
                        
                        
                           
                              (7.7)
                              
                                 
                                    c
                                    
                                       z
                                       j
                                    
                                    =
                                    
                                       
                                          
                                             ∑
                                             
                                                u
                                                ∈
                                                U
                                             
                                          
                                          p
                                          
                                             m
                                             
                                                u
                                                j
                                             
                                          
                                          C
                                          
                                             Z
                                             
                                                u
                                                j
                                             
                                          
                                       
                                       
                                          
                                             ∑
                                             
                                                u
                                                ∈
                                                U
                                             
                                          
                                          p
                                          
                                             m
                                             
                                                u
                                                j
                                             
                                          
                                       
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                 
                              
                           
                        
                        
                           
                              (7.8)
                              
                                 
                                    d
                                    
                                       s
                                       k
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                    d
                                    
                                       u
                                       j
                                    
                                    
                                       o
                                       
                                          i
                                          j
                                          k
                                       
                                    
                                    
                                    ∀
                                    k
                                    ∈
                                    K
                                 
                              
                           
                        
                        
                           
                              (7.9)
                              
                                 
                                    l
                                    
                                       d
                                       
                                          i
                                          j
                                       
                                    
                                    =
                                    l
                                    
                                       d
                                       
                                          j
                                          k
                                       
                                    
                                    
                                       o
                                       
                                          i
                                          j
                                          k
                                       
                                    
                                    +
                                    L
                                    
                                       T
                                       j
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    ∈
                                    I
                                    ,
                                    ∀
                                    j
                                    ∈
                                    J
                                 
                              
                           
                        
                     

Module instances in a product family are offered by suppliers. The mathematical model for supplier selection contains the formulation of the costs and constraints.

(1) Total cost: The suppliers in the supply chain offer required module instances (components) to downstream manufacturing plants. The total cost for the supplier contains the fixed setup cost for a supplier, the transportation cost for shipping module instances to the manufacturing plants, and the production cost for the module instance. Consequently, the total costs at the supplier's side per unit time are represented as

                           
                              (8)
                              
                                 
                                    
                                       
                                          
                                             T
                                             
                                                C
                                                S
                                             
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             
                                                ∑
                                                
                                                   s
                                                   ∈
                                                   S
                                                
                                             
                                             
                                                F
                                                s
                                             
                                             
                                                w
                                                s
                                             
                                             +
                                             
                                                ∑
                                                
                                                   u
                                                   ∈
                                                   U
                                                
                                             
                                             
                                                ∑
                                                
                                                   s
                                                   ∈
                                                   S
                                                
                                             
                                             
                                                ∑
                                                
                                                   j
                                                   ∈
                                                   J
                                                
                                             
                                             
                                                ∑
                                                
                                                   k
                                                   ∈
                                                   K
                                                
                                             
                                             T
                                             C
                                             
                                                P
                                                
                                                   j
                                                   k
                                                   s
                                                   u
                                                
                                             
                                             
                                                η
                                                
                                                   j
                                                   k
                                                   s
                                                
                                             
                                             d
                                             
                                                s
                                                k
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             +
                                             
                                                ∑
                                                
                                                   j
                                                   ∈
                                                   J
                                                
                                             
                                             
                                                ∑
                                                
                                                   k
                                                   ∈
                                                   K
                                                
                                             
                                             
                                                ∑
                                                
                                                   s
                                                   ∈
                                                   S
                                                
                                             
                                             
                                                η
                                                
                                                   j
                                                   k
                                                   s
                                                
                                             
                                             C
                                             
                                                Z
                                                
                                                   s
                                                   k
                                                
                                             
                                             d
                                             
                                                s
                                                k
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where the first term is the setup cost for suppliers. The transportation cost for shipping module instances to the manufacturing plants is represented by the second term whereas the last term denotes the production costs of the module instances.

(2) Constraint: Constraints exist to restrict the selection of suppliers in the supply chain, as shown from constraints Eqs. (9.1) to (9.5). It is assume that one type of module instance is only offered by one supplier, as shown in constraint Eq. (9.1). Constraint Eq. (9.2) expresses logic linking constraint between variables whereas Constraint (9.3) is capacity restriction of a supplier. Constraint Eq. (9.4) is the production balancing constraint, namely that the number of module instance should be equal to the required number of that used in corresponding compound module. Constraint Eq. (9.5) calculates the production cost of the module instances. Constraint Eq. (9.6) obtains the delivery lead-time of module instance k offered by the selected supplier. That is,

                           
                              (9.1)
                              
                                 
                                    
                                       ∑
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                    
                                       η
                                       
                                          j
                                          k
                                          s
                                       
                                    
                                    =
                                    
                                       γ
                                       k
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                    ,
                                    
                                    ∀
                                    k
                                    ∈
                                    K
                                 
                              
                           
                        
                        
                           
                              (9.2)
                              
                                 
                                    
                                       η
                                       
                                          j
                                          k
                                          s
                                       
                                    
                                    ≤
                                    
                                       w
                                       s
                                    
                                    
                                    ∀
                                    k
                                    ∈
                                    K
                                 
                              
                           
                        
                        
                           
                              (9.3)
                              
                                 
                                    
                                       ∑
                                       
                                          k
                                          ∈
                                          K
                                       
                                    
                                    
                                       d
                                       
                                          s
                                          k
                                       
                                    
                                    ≤
                                    C
                                    A
                                    
                                       P
                                       s
                                    
                                    
                                    ∀
                                    s
                                    ∈
                                    S
                                 
                              
                           
                        
                        
                           
                              (9.4)
                              
                                 
                                    
                                       ∑
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                    
                                       d
                                       
                                          s
                                          k
                                       
                                    
                                    
                                       η
                                       
                                          j
                                          k
                                          s
                                       
                                    
                                    =
                                    
                                       ∑
                                       
                                          u
                                          ∈
                                          U
                                       
                                    
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                    p
                                    
                                       m
                                       
                                          u
                                          j
                                       
                                    
                                    
                                       ∅
                                       
                                          j
                                          u
                                       
                                    
                                    
                                       γ
                                       k
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                    ,
                                    
                                    ∀
                                    k
                                    ∈
                                    K
                                 
                              
                           
                        
                        
                           
                              (9.5)
                              
                                 
                                    c
                                    
                                       z
                                       
                                          j
                                          k
                                       
                                    
                                    =
                                    
                                       ∑
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                    
                                       η
                                       
                                          j
                                          k
                                          s
                                       
                                    
                                    C
                                    
                                       Z
                                       
                                          s
                                          k
                                       
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                    ,
                                    
                                    ∀
                                    k
                                    ∈
                                    K
                                 
                              
                           
                        
                        
                           
                              (9.6)
                              
                                 
                                    l
                                    
                                       d
                                       
                                          j
                                          k
                                       
                                    
                                    =
                                    
                                       ∑
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                    L
                                    
                                       D
                                       
                                          j
                                          k
                                       
                                    
                                    
                                       η
                                       
                                          j
                                          k
                                          s
                                       
                                    
                                    
                                    
                                    ∀
                                    j
                                    ∈
                                    J
                                    ,
                                    ∀
                                    k
                                    ∈
                                    K
                                 
                              
                           
                        
                     

From the above analysis as well as the formulae from Eqs. (2) to (9.6), the optimization model for supply chain configuration, as a follower in the Stackelberg game, can be described as the following non-linear mixed integer programming model:

                           
                              
                                 
                                    min
                                    g
                                    (
                                    
                                       v
                                       i
                                    
                                    ,
                                    
                                       m
                                       
                                          i
                                          j
                                       
                                    
                                    ,
                                    
                                       o
                                       
                                          i
                                          j
                                          k
                                       
                                    
                                    ;
                                    c
                                    
                                       z
                                       i
                                    
                                    ,
                                    c
                                    
                                       z
                                       j
                                    
                                    ,
                                    c
                                    
                                       z
                                       
                                          j
                                          k
                                          ,
                                          
                                       
                                    
                                    
                                       θ
                                       j
                                    
                                    ,
                                    
                                    
                                       γ
                                       k
                                    
                                    ;
                                    
                                    
                                       y
                                       n
                                    
                                    ,
                                    
                                       z
                                       u
                                    
                                    ,
                                    
                                       w
                                       s
                                    
                                    ,
                                    
                                       x
                                       s
                                    
                                    ,
                                    
                                       β
                                       
                                          m
                                          r
                                          i
                                       
                                    
                                    ,
                                    
                                       η
                                       
                                          j
                                          k
                                          s
                                       
                                    
                                    ,
                                    
                                       ϕ
                                       
                                          j
                                          u
                                       
                                    
                                    ,
                                    
                                       t
                                       0
                                    
                                    .
                                 
                              
                           
                        
                        
                           
                              
                                 
                                    
                                    
                                       t
                                       1
                                    
                                    ,
                                    
                                       t
                                       2
                                    
                                    ,
                                    
                                       k
                                       0
                                    
                                    ,
                                    
                                       k
                                       1
                                    
                                    ,
                                    d
                                    
                                       v
                                       m
                                    
                                    ,
                                    d
                                    
                                       v
                                       
                                          m
                                          i
                                       
                                    
                                    ,
                                    d
                                    
                                       s
                                       k
                                    
                                    ,
                                    
                                    d
                                    
                                       u
                                       i
                                    
                                    ,
                                    
                                    d
                                    
                                       u
                                       j
                                    
                                    ,
                                    
                                    p
                                    
                                       m
                                       
                                          u
                                          j
                                       
                                    
                                    
                                       )
                                    
                                 
                              
                           
                        
                        
                           
                              (10.0)
                              
                                 
                                    =
                                    
                                    T
                                    
                                       C
                                       
                                          D
                                          R
                                       
                                    
                                    +
                                    T
                                    
                                       C
                                       
                                          A
                                          P
                                       
                                    
                                    +
                                    T
                                    
                                       C
                                       
                                          M
                                          P
                                       
                                    
                                    +
                                    T
                                    
                                       C
                                       S
                                    
                                 
                              
                           
                        were

                           
                              (10.1)
                              
                                 
                                    Constraints
                                    
                                    
                                       (
                                       
                                          3.1
                                       
                                       )
                                    
                                    −
                                    
                                       (
                                       
                                          3.5
                                       
                                       )
                                    
                                 
                              
                           
                        
                        
                           
                              (10.2)
                              
                                 
                                    Constraints
                                    
                                    
                                       (
                                       
                                          5.1
                                       
                                       )
                                    
                                    −
                                    
                                       (
                                       
                                          5.6
                                       
                                       )
                                    
                                 
                              
                           
                        
                        
                           
                              (10.3)
                              
                                 
                                    Constraints
                                    
                                    
                                       (
                                       
                                          7.1
                                       
                                       )
                                    
                                    −
                                    
                                       (
                                       
                                          7.9
                                       
                                       )
                                    
                                 
                              
                           
                        
                        
                           
                              (10.4)
                              
                                 
                                    Constraints
                                    
                                    
                                       (
                                       
                                          9.1
                                       
                                       )
                                    
                                    −
                                    
                                       (
                                       
                                          9.6
                                       
                                       )
                                    
                                 
                              
                           
                        
                     

The joint optimization for coordinated configuration of product families and supply chains can be modeled as a leader-follower bi-level optimization model, namely Stackelberg game, where product family configuration optimization as a leader is an upper-level optimization model and supply chain configuration as a follower is a lower-level optimization model. Both product family configuration (PFC) and supply chain configuration (SCC) have their own strategies (i.e. decision variables) and payoffs (i.e. objective functions). PFC as a leader can enforce its strategy on SCC while SCC responds to PFC's decision by choosing its strategy to optimize its own objective function. The bi-level optimization model for coordinated configuration of product families and supply chains can be summarized as follows:

                        
                           (11.0)
                           
                              
                                 M
                                 a
                                 x
                                 
                                 f
                                 
                                    (
                                    
                                       
                                          v
                                          i
                                       
                                       ,
                                       
                                          m
                                          
                                             i
                                             j
                                          
                                       
                                       ,
                                       
                                          o
                                          
                                             i
                                             j
                                             k
                                          
                                       
                                       ,
                                       
                                          θ
                                          j
                                       
                                       ,
                                       
                                          γ
                                          k
                                       
                                       ;
                                       c
                                       
                                          z
                                          i
                                       
                                       ,
                                       c
                                       
                                          z
                                          j
                                       
                                       ,
                                       c
                                       
                                          z
                                          
                                             j
                                             k
                                          
                                       
                                       ;
                                       
                                          c
                                          i
                                       
                                       ,
                                       
                                          c
                                          j
                                       
                                       ,
                                       
                                          c
                                          k
                                       
                                    
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (11.1)
                           
                              
                                 s
                                 .
                                 t
                                 .
                                 
                                 Constraints
                                 
                                 Eqs
                                 .
                                 
                                 
                                    (
                                    
                                       1.1
                                    
                                    )
                                 
                                 −
                                 
                                    (
                                    
                                       1.10
                                    
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (11.2)
                           
                              
                                 
                                    v
                                    i
                                 
                                 ,
                                 
                                    m
                                    
                                       i
                                       j
                                    
                                 
                                 ,
                                 
                                    o
                                    
                                       i
                                       j
                                       k
                                    
                                 
                                 ,
                                 
                                    θ
                                    j
                                 
                                 ,
                                 
                                    γ
                                    k
                                 
                                 =
                                 0
                                 ,
                                 1
                              
                           
                        
                     
                     
                        
                           (11.3)
                           
                              
                                 c
                                 
                                    z
                                    i
                                 
                                 ,
                                 c
                                 
                                    z
                                    j
                                 
                                 ,
                                 c
                                 
                                    z
                                    
                                       j
                                       k
                                    
                                 
                                 ≥
                                 0
                              
                           
                        
                     where, for given vi, mij, oijk, θj, γk
                     , the variables (czi, czj, czjk
                     ) solves:

                        
                           
                              
                                 min
                                 g
                                 (
                                 
                                    v
                                    i
                                 
                                 ,
                                 
                                    m
                                    
                                       i
                                       j
                                    
                                 
                                 ,
                                 
                                    o
                                    
                                       i
                                       j
                                       k
                                    
                                 
                                 ;
                                 c
                                 
                                    z
                                    i
                                 
                                 ,
                                 c
                                 
                                    z
                                    j
                                 
                                 ,
                                 c
                                 
                                    z
                                    
                                       j
                                       k
                                       ,
                                       
                                    
                                 
                                 
                                    θ
                                    j
                                 
                                 ,
                                 
                                 
                                    γ
                                    k
                                 
                                 ;
                                 
                                 
                                    y
                                    n
                                 
                                 ,
                                 
                                    z
                                    u
                                 
                                 ,
                                 
                                    w
                                    s
                                 
                                 ,
                                 
                                    x
                                    s
                                 
                                 ,
                                 
                                    β
                                    
                                       m
                                       r
                                       i
                                    
                                 
                                 ,
                                 
                                    η
                                    
                                       j
                                       k
                                       s
                                    
                                 
                                 ,
                                 
                                    ϕ
                                    
                                       j
                                       u
                                    
                                 
                                 ,
                                 
                                    t
                                    0
                                 
                              
                           
                        
                     
                     
                        
                           (12.0)
                           
                              
                                 
                                 
                                    t
                                    1
                                 
                                 ,
                                 
                                    t
                                    2
                                 
                                 ,
                                 
                                    k
                                    0
                                 
                                 ,
                                 
                                    k
                                    1
                                 
                                 ,
                                 d
                                 
                                    v
                                    m
                                 
                                 ,
                                 d
                                 
                                    v
                                    
                                       m
                                       i
                                    
                                 
                                 ,
                                 d
                                 
                                    s
                                    k
                                 
                                 ,
                                 
                                 d
                                 
                                    u
                                    i
                                 
                                 ,
                                 
                                 d
                                 
                                    u
                                    j
                                 
                                 ,
                                 
                                 p
                                 
                                    m
                                    
                                       u
                                       j
                                    
                                 
                                 
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (12.1)
                           
                              
                                 s
                                 .
                                 t
                                 .
                                 
                                 Constraint
                                 
                                 Eqs
                                 .
                                 
                                 
                                    (
                                    
                                       3.1
                                    
                                    )
                                 
                                 −
                                 
                                    (
                                    
                                       3.5
                                    
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (12.2)
                           
                              
                                 Constraint
                                 
                                 Eqs
                                 .
                                 
                                    (
                                    
                                       5.1
                                    
                                    )
                                 
                                 −
                                 
                                    (
                                    
                                       5.6
                                    
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (12.3)
                           
                              
                                 Constraint
                                 
                                 Eqs
                                 .
                                 
                                    (
                                    
                                       7.1
                                    
                                    )
                                 
                                 −
                                 
                                    (
                                    
                                       7.9
                                    
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (12.4)
                           
                              
                                 Constraints
                                 
                                 Eqs
                                 .
                                 
                                    (
                                    
                                       9.1
                                    
                                    )
                                 
                                 −
                                 
                                    (
                                    
                                       9.6
                                    
                                    )
                                 
                              
                           
                        
                     
                     
                        
                           (12.5)
                           
                              
                                 
                                    v
                                    i
                                 
                                 ,
                                 
                                    m
                                    
                                       i
                                       j
                                    
                                 
                                 ,
                                 
                                    o
                                    
                                       i
                                       j
                                       k
                                    
                                 
                                 ,
                                 
                                    θ
                                    j
                                 
                                 ,
                                 
                                    γ
                                    k
                                 
                                 =
                                 0
                                 ,
                                 1
                              
                           
                        
                     
                     
                        
                           (12.6)
                           
                              
                                 
                                    y
                                    n
                                 
                                 ,
                                 
                                    z
                                    u
                                 
                                 ,
                                 
                                    w
                                    s
                                 
                                 ,
                                 
                                    x
                                    m
                                 
                                 =
                                 0
                                 ,
                                 1
                                 
                              
                           
                        
                     
                     
                        
                           (12.7)
                           
                              
                                 
                                    β
                                    
                                       m
                                       r
                                       i
                                    
                                 
                                 ,
                                 
                                    η
                                    
                                       j
                                       k
                                       s
                                    
                                 
                                 ,
                                 
                                    ϕ
                                    
                                       j
                                       u
                                    
                                 
                                 =
                                 0
                                 ,
                                 1
                              
                           
                        
                     
                     
                        
                           (12.8)
                           
                              
                                 
                                    t
                                    0
                                 
                                 ,
                                 
                                    t
                                    1
                                 
                                 ,
                                 
                                    t
                                    2
                                 
                                 ,
                                 c
                                 
                                    z
                                    i
                                 
                                 ,
                                 c
                                 
                                    z
                                    j
                                 
                                 ,
                                 c
                                 
                                    z
                                    
                                       j
                                       k
                                    
                                 
                                 ≥
                                 0
                              
                           
                        
                     
                     
                        
                           (12.9)
                           
                              
                                 d
                                 
                                    v
                                    m
                                 
                                 ,
                                 d
                                 
                                    v
                                    
                                       m
                                       i
                                    
                                 
                                 ,
                                 d
                                 
                                    s
                                    k
                                 
                                 ,
                                 d
                                 
                                    u
                                    i
                                 
                                 ,
                                 d
                                 
                                    u
                                    j
                                 
                                 ,
                                 p
                                 
                                    m
                                    
                                       u
                                       j
                                    
                                 
                                 ≥
                                 0
                              
                           
                        
                     
                     
                        
                           (12.10)
                           
                              
                                 
                                    k
                                    0
                                 
                                 ,
                                 
                                    k
                                    1
                                 
                                 ϵ
                                 
                                    
                                       Z
                                    
                                    +
                                 
                              
                           
                        
                     
                  

From the above formulation, it can be seen that PFC makes decision on product variant selection, module selection and instance selection, namely the variables vi
                     ,  mij
                     , oijk
                     , θj
                     , γk
                     . With the decision results from PFC, SCC selects its supply chain configuration decisions (such as supplier selection, facility locations) for minimizing total supply chain cost. Also, SCC responds to the upper level by providing feedback on decision making with respect to the manufacturing costs of module instances, modules and end-products to PFC, namely variables czi, czj, czjk
                     . If the decisions influence product family configuration, PFC further adjusts its decisions on the product family configuration design to maximize the customer-perceived utility per cost. The process proceeds in an iterative way until a Stackelberg equilibrium reaches, where both players are unwillingly to deviate from their decisions and any deviation will cause losses in their payoffs. In this way, the optimal coordinated configurations for PFC and SCC are derived.

Joint optimization for coordinated configuration of PFC and SCC is enacted as an iterative decision-making process between the upper-level and lower-level models. Solution of bi-level optimization tends to be more complex than single-level optimization problems (Christiansen, Patriksson, & Wynter, 2001). Generally, it is a NP-hard problem even when the bi-level optimization model is linear (Hansen, Jaumard, & Savard, 1992). Traditional solution approaches include extreme-point approaches for the linear case (Candler & Townsley, 1982), branch-and-bound methods based on Karushe–Kuhne–Tucker (KKT) conditions (Bard & Falk, 1982), and so on. Bi-level optimization solutions are generally categorized as direct and indirect methods: to directly solve the original bi-level problem or to convert the bi-level problem to a single-level problem. We adopt a direct method to solve the bi-level optimization for PFC and SCC. The bi-level joint optimization model for PFC and SCC is a nonlinear programming problem, which is proved to be NP-hard problem. We propose a bi-level, nested genetic algorithm (GA) with constraint reasoning to solve the joint optimization model. Comparing with traditional calculus-based or approximation-based optimization techniques, genetic algorithms excel in solving combinatorial optimization problems (Kreng & Lee, 2004). Furthermore, for the upper-level optimization, we utilize constraint reasoning as the pre-processing or the processing steps to reduce computational burdens by analyzing the constraints between modules, the constraints between modules and production facilities. As a result, the problem size can be reduced. Due to the fact that the upper-level optimization and lower-level optimization are of distinctive characteristics in mathematical models, we address the encoding and operations in GA for solving the two optimization problems, respectively.

As shown in Section 3, product configuration constraints and facility constraints exist in both PFC and SCC. Typical facility constraints indicate production compatibility between production facilities (such as assembly plants and manufacturing plants) and products including end-products and sub-assemblies. By using constraint reasoning technology like constraint satisfaction problem (CSP; Tsang, 1993), the search spaces of both PFC and SCC can be reduced by means of domain pruning and constraint propagation in the CSP. A decision propagation structure (DPS) based on the heuristic search algorithm including the choice-rating routing and decision-rating routing (Jiao et al., 2009) are adopted in this study to prune and reduce the search spaces of decision variables in both the product family domain and supply chain domain. Fig. 5 shows DPS for exploring the search spaces of the joint configuration. Constraint reasoning based on DPS can be applied in both the pre-processing step and processing steps of GA. For more details about the constraint heuristic algorithms, i.e. the choice-rating and decision-rating routing, please refer to Jiao et al. (2009).


                        
                           
                              (1)
                              
                                 Encoding: The essential part of GA implementation is the representation of the problem to be solved with a finite-length string called a chromosome. Consistent with the product structures, for the product family optimization, two kinds of chromosomes are identified: the upper-level chromosome (ULC) and the lower-level chromosome (LLC), as shown in Fig. 6
                                 . While one ULC consisting of multiple LLCs represents a solution to PFC, one LLC denotes potential end-product variant. The number of LLCs equals the number of potential end-product variants to offer to customers. The product variant will not be selected if all genes in one LLC are 0. The LLC is composed of genes and the adjacent genes in the LLC form a gene group indicating an assembly module. As far as m
                                 
                                    i2 is concerned, the third and fourth genes in the LLCi
                                  represent the selection associated with the corresponding module (1= selected, 0 otherwise).


                                 Crossover: Crossover in GA operations means that two parent chromosomes are randomly chosen to exchange the part of their genes with a probability. While a number of crossover operators are available for specific encoding schemes, this research adopts a multi-point random crossover operator. The idea behind the multi-point crossover is that the crossover operation should be occurred on the basis of an assembly module as a whole unit, due to the fact that the crossover should protect the hierarchical structure of a product and the structural relationships between sub-assemblies and modules. Consequently, the multi-point crossover in this research consists of a set of single-point crossover which occurs between substrings corresponding to assembly modules.


                                 Mutation: Mutation is applied to each offspring individually after crossover. It randomly picks a gene with a small probability and alters the selection or de-selection of corresponding module instances in a chromosome.


                                 Termination: The processes of crossover and reproduction are iterated until the population converges or a specific number of generations is reached.

The lower-level optimization aims to achieve optimal supply chain configuration according to the decisions by PFC. Most of the GA procedures are similar to that of the upper-level optimization, except the encoding operations. Therefore, we mainly address the encoding operation in the lower-level optimization. Fig. 7
                         illustrates the proposed encoding schema. Due to the fact that the lower level optimization is a nonlinear mixed integer programming with nonnegative solutions, all genes are constrained to binary, or integers, or real numbers according to the characteristics of the types of the decision variables. The crossover and mutation are rather simple, compared with those in the upper level optimization. The normal single-point crossover can be employed in GA evolutions.

Solving joint optimization of PFC and SCC relies on the principles of evolutionary computation, namely the interactive genetic evolutions between the upper level optimization and the low level optimization. The bi-level GA algorithm with the aforementioned encoding schemas and operators is carried out in a nested way, as shown in Fig. 8
                        . A step-by-step procedure for the bi-level nested algorithm is described as follows:

                           
                              
                                 Step 1:
                              
                              Preprocessing. Constraint reasoning technologies like decision propagation structure (DPS), the choice-rating routing and decision-rating routing are employed to reduce the search spaces of both the upper level problem (i.e. PFC) and the lower-level problem (i.e. SCC).

Initialization. A population of size N is randomly generated with the required number of upper level variables. Constraint checking is carried out to ensure that the initial population satisfies all configuration rules specified in the product family model. Afterwards, the lower level optimization procedure is invoked to determine the corresponding optimal values of the low level variables. Fitness values of all chromosomes for the leader are evaluated based on both the values of the upper level and low-level variables.

Selecting upper level parents and making crossover and mutation operations. Choose parents from the previously obtained population with a probability and apply ranking-based selection to determine the set of parents. Utilize the multi-point crossover and mutation to generate required offsprings.

Lower level optimization. For each of the offsprings, the corresponding upper-level variables and values are transferred to the lower level problem. Generate a lower level random population with the given information from the leader. Perform the lower level optimization with the generated population.

Checking constrains. Constraint checking is performed to check the feasibility of the generated offsprings. A penalty strategy is implemented for infeasible chromosomes that violate the constraints specified in both supply chain models and product family models.

Evaluate offsprings. Fitness values of all chromosomes in the upper level problems are computed in accordance with the optimal values of low level variables derived by the lower level optimization and the values of the upper level variables in the step 4.

Checking termination condition. If the number of generations exceeds the specific number or the stop criterion is met, the procedure will terminate and the optimal Stackelberg game solution for PFC and SCC is derived. Otherwise, proceed to next generation (Step 3).

To demonstrate how the proposed method can be as a decision tool for joint optimization for coordinated configuration of product families and supply chains, we present a specific case application from the company XYZ which produces a family of power transformers to satisfy individualized requirements of energy markets. The product structure of the power transformer family consists of a set of compound modules (such as Tank Body), common modules (like Standard Accessories), selective modules (such as Bushing) and module instances (like EW-02 and DW-N6), as shown in Fig. 9
                        . Compatible constraints exist between module instances. For instance, module instances (
                           
                              P
                              
                                 14
                              
                              *
                           
                        , 
                           
                              P
                              
                                 61
                              
                              *
                           
                        ), (
                           
                              P
                              
                                 11
                              
                              *
                           
                        , 
                           
                              P
                              
                                 62
                              
                              *
                           
                        ), (
                           
                              P
                              
                                 13
                              
                              *
                           
                        , 
                           
                              P
                              
                                 62
                              
                              *
                           
                        ), (
                           
                              P
                              
                                 51
                              
                              *
                           
                        , 
                           
                              P
                              
                                 72
                              
                              *
                           
                        ) are compatible. For illustrative simplicity, the functions of key modules and module instances are listed in Table 4
                        .

As shown in Fig. 9, product family configuration design is to select alternative module instances, modules and sub-assemblies to constitute product variants for targeted segmentation markets with the aim of maximization of customer-perceived utilities per cost. Traditionally, product family configuration for power transformers is based on the empirical estimation of module costs using historical data. However, within the context of supply chains, product family configuration can be formulated as a Stackelberg game due to inconsistent, even possibly conflicting objectives of both optimization problems. The cost information of the modules in the leader (upper-level problem) can be obtained from the follower (lower-level problem) by means of the bi-level programming. The Stackelberg equilibrium is achieved by solving the Stackelberg game using the bi-level nested genetic algorithm. We assume that the company will offer at most four variants with each product variant targeted to some specific market segmentation. The market requirements on module instances of each product variants are listed in Table 5. For example, the variant 1 requires the inclusion of module instances P
                        14 and P
                        52 in this product variant according to market analysis. The aim of this study is to obtain the product family and corresponding supply chain configuration using bi-level programming method.

The objective of the upper-level optimization is to maximize the customer-perceived utility per cost. To start with, the utility of module instances Ujk
                         should be determined by using conjoint analysis. Given a total number of J = 320 possible combinations, the Orthogonal Array Selector provided in SPSS software (www.spss.com) is utilized to generate the number of 30 orthogonal product profiles. With the profiles, a fractional factorial experiment is designed to obtain the customer preferences. The results of the conjoint analysis, namely the utilities of module instances, are given in Table 6. For the lower-level optimization, it is assumed that there are three retailers and three DCs with specific transportation costs and opening costs. The main parameters and values for supply chain configuration are shown in Table 7. The options for module supplier, manufacturing plants, assembly plants are listed in Table 8.

@&#IMPLEMENTATION@&#

To determine optimal or near-optimal joint configurations for the product family and its supply chain, the bi-level nested genetic algorithm with constraint reasoning is applied to search optimal configuration. Fig. 10 shows the GA evolution processes of the upper-level and lower-level optimizations. The mutation rate is 0.05 and crossover rate is 0.80. After 300 iterations, the upper-level optimization result is arrived while the lower-level optimization result is achieved after 450 iterations. The optimal results for joint product family and supply chain configuration are listed in Table 9.

To analyze the joint impact of PFC and SCC by the leader-follower Stackelberg (LFS) game, experiments are designed to
                        
                         compare the results of LFS with those of non-joint optimization (NJOP), i.e. independent optimization without considering the supply chain, as well as the integrated method, i.e. “all-in-one” approach (AIO). For NJOP, the estimation of the module costs is based on historical or existing data and it can be roughly approximate to the means of the costs of corresponding modules in the supply chain. From
Fig. 11(a), it indicates that the customer-perceived utility per cost of PFC increases by 27.7% from 667.54 (NJOP) in the independent optimization to 852.67 (LFS) by using the leader-follower Stackelberg joint optimization.

The reason is
                        
                         that the independent optimization of PFC considers module costs by using the estimation of historical data and it cannot well utilize the cost-effective modules of lower costs in the supply chain. Consequently, PFC can enjoy substantial benefit by using leader-follower Stackelberg joint optimization and taking supply chains into account. For the “all-in-one” approach, we redesign the objective function of PFC, namely Formula (1.0), as 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    I
                                 
                              
                              
                                 C
                                 i
                              
                           
                        , which is the sum of the assembled modules, and keep the constraints the same, such that the total costs for PFC and SCC can be aggregated without considering the product utilities. For illustrative simplicity without losing generality, we assume that both problems have equal weight. Thus, the total costs for PFC and SCC by “all-in-one” approach are represented by summing the above formulae and (10.0), namely, 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    I
                                 
                              
                              
                                 C
                                 i
                              
                              
                           
                        + g, while keep all constraints of PFC and SCC unchanged. The experimental result by the “all-in-one” approach is depicted in Fig. 11. It indicates from Fig. 11(a) that the customer-perceived utility per cost of PFC increases by 24.5% from 684.54 (AIO) in the “all-in-one” method to 852.67 (LFS) by using the leader-follower Stackelberg (LFS) game. From Fig. 11(b), the average delivery lead-time for optimal product family and supply chain configuration by LFS is 23.4 weeks whereas the corresponding lead-time by AIO is 25.2 weeks. However, the total cost of SCC by the leader-follower Stackelberge is a little higher than that by the “all-in-one” method, increasing from 1409.8 × 104 in AIO to 1416.1 × 104 in the LFS, as shown in Fig. 11(b).

From all the comparisons, we can figure out some meaningful managerial implications. First, a manufacturing firm, which offers the product family for market segments, can benefit from the leader-follower Stackleberg game due to its dominating position as a leader role in the game by obtaining optimal customer-perceived utilities per cost. As a consequence, the company can configure its product family with better customer satisfactions and relatively lower costs, both of which will tend to substantially increase product sales and profits. Second, the supply chain partners, in turn, enjoy less advantages from the Stackelberg game owing to its dominated role as a follower in the decision game. In fact, there exist a slight increase in the total supply chain cost for the leader-follower Stackelberg game, compared with the “all-in-one” method. The situation can be improved by building a shared profit between the manufacturing company and the supply chain partners, since the substantial profit can be sought by adopting the Stackleberg decision game for the manufacturing company. Third, for the manufacturing firm offering product families for targeted markets, the joint optimization, whatever be the “all-in-one” method and the leader-follower Stackleberg approach, is better than the independent optimization because the cost-effective modules of lower costs in the supply chain can be fully utilized in product family configuration design.

In this study, we formulate the coordinated configuration of product families and supply chains as a Stackelberg game where PFC plays a leader's role and SCC acts as a follower. The Stackelberg equilibrium, i.e. optimal configuration, is obtained by solving a bi-level, nested genetic algorithm. The case study of a power transformer family is employed to demonstrate the effectiveness of the bi-level programming. It indicates that the bi-level programming with the leader-follower structure excels in simultaneously optimizing product family design and supply chain configuration.

The presented approach is especially suited to the situation where the firm with core competitive advantage in mass customization and product family design is of dominating position in its product domain and the selection of supply chain partners. Therefore, the firm with product family planning and design acts as a leader and SCC as a follower. A similar situation is that both the manufacturer and supply chain partners form a strategic alliance and thus the emphasis is placed on global supply chain optimization. As a consequence, the supply chain configuration is of leading position in decision making for joint configuration. Thus, SCC serves as a leader and PFC as a follower when the Stackelberg game is employed to formulate the joint configuration. Further possible is that both PFC and SCC have equal positions in decision making. In this case, joint configuration for coordinated product families and supply chains can be modeled as a Nash decision game. As a result, a Nash equilibrium should be sought for joint configuration solutions. As to which forms of games (i.e. Nash-game or Stackelberg game) and roles (i.e. leader or follower) is suitable for formulating coordinated decisions between PFC and SCC, this mainly depends on competitive advantage of products in markets as well as the organization form of its supply chain (namely loosely coupled, tightly coupled, or strategic alliances).

The paper has several limitations that could be extended in future study although the models and the methods still can be adapted as most of the assumptions in Section 3.4 are relaxed. Firstly, we assume that the prices of products are fixed and thus product pricing is not covered in this paper. When the pricing decisions of product families are considered, the demand of products in PFC should be a function of prices of products and modules. Correspondingly, the optimization objective of SCC may be the profit of the supply chain system whereas the objective of PFC could be modified to incorporate the product pricing decision. Secondly, deterministic inventory model, namely, EOQ model, is assumed in the study since the demands are fixed and known in advance. More complex inventory models such as stochastic inventory models and backordering should be explored in further study. Finally, we assume only one assembly plant and the single-souring strategy for module suppliers. These assumptions to be relaxed in further research may lead to the decision space with a numerous number of decision variables and constraints. As a consequence, more efficient algorithm such as particle swarm optimization (PSO) could be adopted to solve the Stackelberg game for joint configuration.

@&#ACKNOWLEDGMENTS@&#

We are grateful to anonymous reviewers for their thorough reviews and valuable comments. This research is partially supported by National Natural Science Foundation of China under Grants No. 71371045.

@&#REFERENCES@&#

