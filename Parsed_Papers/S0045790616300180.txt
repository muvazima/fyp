@&#MAIN-TITLE@&#Design and implementation of a new quality of service-aware cross-layer medium access protocol for wireless body area networks

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           The proposed MAC protocol guarantees QoS requirements of all subscribers as described in the ISO/IEEE 11073 standards.


                        
                        
                           
                           A slot allocation scheme, priority classification, admission control mechanism, and channel allocation with bit error rate reduction mechanism are described to ensure QoS.


                        
                        
                           
                           The proposed MAC protocol is compared with standard technologies and recent protocols in the literature, and it achieves better results for end-to-end delay, packet loss ratio, and throughput parameters.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Wireless body area networks

Medium access control

Quality of service

Cross-layer

@&#ABSTRACT@&#


               Graphical abstract

               
                  
                     
                        
                           Image, graphical abstract
                           
                        
                     
                  
               
            

@&#INTRODUCTION@&#

Health monitoring services are evolving to remote monitoring systems because of the freedom and mobility advantages. Remote monitoring increases the quality of life, improves usability, and decreases cost. Recently, WBANs are being used extensively for remote health monitoring applications. QoS and standardization are two of the major aspects of healthcare systems. Quality of health services should be considered based on the importance of human life. The term “QoS” has different definitions from various communities, but the International Telecommunication Union (ITU) interprets [1] it as “Totality of characteristics of a telecommunications service that bear on its ability to satisfy stated and implied needs of the user of the service”. In other words, the definition of QoS depends on the application requirements. The MAC layer is the most appropriate layer to provide QoS support for the application requirements in WBANs because the MAC layer regulates medium access and determines the performance of the system [2]. In addition, several problems, such as interoperability and subjectivity, are encountered due to the lack of common standards. Consequently, a communication protocol that provides QoS support and employs a public standard has become necessary.

In order to provide requirements of ISO/IEEE 11073 standards, we present a new QoS-aware MAC protocol based on ISO/IEEE 11073 [3] (also known as X73) standards. We approve the ISO/IEEE 11073 standards for implementation, as the standard is defined by two large standardization associations. The ISO/IEEE 11073 standards describe the required QoS for medical applications that enable interoperability in medical devices and focus on parameters, such as latency and bandwidth, to ensure QoS [4]. Medical application classes are specified explicitly in ISO/IEEE 11073. Table 1
                      shows the medical application classes, required bandwidth, and latency parameters in ISO/IEEE 11073.

The proposed MAC protocol guarantees QoS requirements of all subscribers as described in the ISO/IEEE 11073 standards. The developed slot allocation scheme allocates the number of required time slots for each node with reference to the data type class in the network. Therefore, the tolerable latency fulfilled by means of our scheme according to latency values at Table 1 and make a major contribution to delay performance which is about up to six times lower than other protocols. Also the proposed MAC protocol shows better throughput performance about up to twice as that of the other protocols for high traffic load due to robust scheduling scheme. A new priority classification contributes to improved network performance, such as throughput and latency, and provides heterogeneous traffic loads and different reliabilities. Channel allocation and bit error rate (BER) reduction mechanisms help maintain stability for reliability and that is about 0.0001% of the packet loss ratio. Admission control mechanisms balance the capacity of network. The details of the developed mechanisms are described in the next sections. In addition, the proposed MAC protocol leads to other ISO/IEEE 11073 standards-based MAC protocols.

The remainder of the paper is organized as follows. Section 2 provides an overview of the QoS-based MAC protocols for WBANs. Section 3 details the proposed QoS-aware cross-layer MAC protocol. In Section 4, a performance analysis of the network system using the proposed MAC protocol is clarified, and a conclusion is presented in the final section.

Provisioning QoS is a very important issue in WBANs to improve healthcare facilities. Efficient MAC protocol design overcomes QoS support issue. Therefore, many MAC protocols have been proposed to support QoS. Several methods have been developed to provide QoS support with traffic differentiation mechanisms, priority mechanisms, and scheduling schemes. Time division multiple access (TDMA), carrier sense multiple access with collision avoidance (CSMA/CA), and improvised access mechanisms have been utilized for WBANs in the literature. In addition, latency, reliability, throughput, and energy consumption parameters are considered to support QoS requirements. We summarize the QoS-aware MAC protocols for WBANs in the literature as follows.

Two types of traffic, critical and non-critical, are defined in urgency-based medium access control (U-MAC) protocols. A priority mechanism assigns a priority to critical data that organize the data stream. Re-transmission of the packet after collision is prevented in non-critical traffic modes, which increases the capacity of the critical data stream [5].

Cao et al. present a superframe structure based on IEEE 802.15.4 that provides QoS. Guaranteed time slots (GTSs) are used for periodical traffics, and a contention access period (CAP) is utilized for channel access for critical traffics. Four types of parameters are defined in the protocol, and these parameters, namely priority, latency, arrival time, and burst size parameter, describe the QoS requirements. The proposed protocol is able to maintain a high traffic ratio percentage for time constraint compliance [6].

PNP-MAC (preemptive slot allocation and non-preemptive transmission medium access control) focuses on delay and throughput requirements to support QoS. The superframe structure consists of five phases: advertisement, CAP, beacon, data transmit slot (DTS), emergency data transmit slot (ETS), and an inactive period. Admission control is performed in the advertisement phase. Emergency data and command frames, as slot allocation requests, are transmitted during the CAP, and a short back-off time is allocated for high priority nodes. The nodes send their data during the allocated time slots in the DTS phase. The ETS phase is an extra period for emergency data [7].

Garcia and Falck define eight diverse priority classes and four access categories to send packets that provide QoS. The proposed protocol is based on IEEE 802.15.4 enhanced with a priority mechanism. A distributed access function (DAF) organizes the transmission queues with a priority-based CSMA/CA mechanism. The proposed protocol is implemented on the Philips AquisGrain platform, and the performance evaluation is compared to IEEE 802.15.4. The results show that the protocol is more efficient when compared with Zigbee [8].

Barua et al. designed a secure, privacy-based scheduling scheme for real-time transmission in WBANs. The security is enhanced with a secure key distribution scheme. In addition, two types of priority classes (high and low) are defined. Real-time applications have a high priority, and other types of traffics are assigned as low priority. The proposed protocol has a secure, delay-sensitive scheme for real-time electronic health applications [9].

Multi-channel MAC (McMAC) protocols are based on multiple constraints (delay and reliability) for provisioning QoS in WBANs. The protocol classifies five different traffic classes as emergency, both delay and reliability constrained, only reliability-constrained, only delay-constrained, and no constraint in either delay or reliability traffic. Each traffic class has different periods on a superframe structure. The “transmit-whenever-appropriate” principle utilizes a superframe structure that tempers the QoS demands. CAP and CFP (contention free period) phases are divided into two periods for efficiency that decreases the contention probability in CAP, and the lengths of the CFP parts are set dynamically considering requests. Prioritized CAP (PCAP) is used for priority-based traffic types, including type 3 and type 4 [10].

PLA-MAC (priority-based traffic load adaptive medium access control) performed a priority-based design that enhanced the IEEE 802.15.4 superframe. The structure of the superframe changes according to traffic load. The data packets are divided into four separate classes: ordinary, delay-driven, reliability-driven, and critical. The length of the CFP and the backoff value are calculated for the traffic class. A coordinator allocates the data transfer slots by using priority classes. In addition, the protocol enhanced the IEEE 802.15.4 superframe by adding a notification period [11].

Yan et al. designed a protocol that performed a threshold-based scheme to organize the transmission order of the nodes. The protocol focuses on two parameters, including throughput and energy consumption. The protocol adjusts the number of slots for each node with reference to a required (threshold) value for providing data reliability. The protocol proposes a TDMA-based scheduling approach and formulates an optimization problem with regard to the allocated slots, data rate, and delivery probability [12].

Su and Zhang proposed a protocol, which focuses on reliability, increasing the battery life, and delay-bounds for medical applications. The superframe structure consists of three periods: beacon, active time slots, and an inactive period that is that same as in the protocol with the TDMA scheme. If packets wait for a certain period in the transmission phase, the battery life is prolonged because of the electrochemical properties of the batteries. Hence, data packets must sometimes wait, for instance, if the buffer is not full or it is not an emergency [13].

BodyQoS [14] has three mechanisms, including admission control, QoS scheduler, and virtual MAC (VMAC), based on an asymmetric architecture. The admission control mechanism organizes the channel bandwidth for new allocations, and the QoS scheduler controls resources for efficiency. Three features are defined in VMAC for QoS. First, the requested packet must be sent on time. Second, an acknowledgement of the receipt of the packet should be sent to the QoS scheduler. Third, time and energy consumption must be monitored continuously for sleep scheduling.

A MEB (medical emergency body) MAC [15] is based upon the superframe structure of IEEE 802.15.6, which uses listening windows to reduce access delay for emergency traffic in scheduled access periods and adjusts the superframe length to balance energy efficiency between channel access delays.

A multi-channel quality-based MAC (MQ-MAC) [16] is based on a cross-layer architecture interacting with the MAC module, routing module, and scheduling module. The MQ-MAC protocol focuses on end-to-end delay and reliability requirements to provide QoS. The solution contributes to the interference-aware design with a multi-channel concept that can use 16 different channels.

Additionally, QoS-aware MAC protocols for WBANs are reviewed elsewhere [17], and other existing reviews about MAC protocols for WBANs are surveyed [18–25]. Further, in Table 2
                     , we classify the QoS-aware MAC protocols mentioned above based on parameters, including access mechanism, priority assignment, QoS parameters, admission control, energy awareness, and cross-layer architecture.

Cross-layer architecture interconnects several layers in an Open Systems Interconnection (OSI) communications model, which consists of seven logical layers. Each layer performs specific functions that assist the above layer. This concept has benefits in scalability, compatibility, and flexibility of the protocol architecture. Although cross-layered architecture increases the complexity, the interaction between layers can lead to improvements in QoS, with some compromises, and improvements in efficiency. The protocol design should provide a balance between the QoS requirements and the advantages of the OSI networking model [20].

The proposed protocol, based on a cross-layered architecture. Thus, the proposed MAC protocol merges the MAC layer with the application layer, for user requests, and the physical layer, to control fault tolerance with a BER reduction mechanism. User requests from the application layer are sent to the MAC layer. The received data and statistics (BER, etc.) from the physical layer are sent to the MAC layer. We reduce the data transmission rate to provide QoS when the BER approaches the limits. To this end, transmission of non-essential packets is prevented, and physiological data from the sensor nodes will be sent when the value exceeds the threshold.

The proposed MAC protocol is based on a hybrid mechanism that consists of TDMA, CSMA/CA, and improvised communication (IC). The superframe layout is divided into two equal periods to reduce end-to-end delay, and three types of phases are repeated. The time slots allocated to the sensor nodes depend on the requested data rate in the setup phase, according to the slot allocation scheme, which is the first phase of the system. If there are not enough time slots for the request, the reservation is rejected by the admission control mechanism. The remaining time slots for one period are separated into two parts: the CAP and the improvised communication phase (ICP). The superframe structure of the proposed MAC protocol is shown in Fig. 1.
                     
                  

The superframe begins with a beacon signal and consists of six phases and two equal periods that are adjustable by the base node according to traffic. In the first and third phases, nodes communicate in their allocated time slots (ATS1 and ATS2). A TDMA mechanism is used in these periods. The second and fourth phases are CAPs, where random access is provided. A CSMA/CA mechanism is used in the CAPs. Retransmission, emergency alarm, non-periodic, and other data packets will be sent during these periods. The nodes listen to the channel before transmission, and if the channel is idle, the nodes send a request to send (RTS) packet to the destination. If the channel is busy, the nodes wait for a random backoff time and re-listen to the channel after this random time. If the medium is busy again, the node multiplies the time parameter (CWmax) by two. The receiving node forwards a clear to send (CTS) packet to the sender node, and the sender node sends the data. Additionally, the destination node sends an acknowledge (ACK) packet to the sender node. In the third and final phases (ICP1 and ICP2), user request and control packets are transmitted. The operation of the QoS-aware MAC scheme is summarized in the flow chart in Fig. 2.
                     
                  

We present the state diagram of the QoS-aware cross-layer MAC protocol in Fig. 3
                      to describe the behavior of the designed system. The state diagram provides an easy to understand verification of the system by demonstrating a limited number of situations. The TDMA-based transmission phases, operation of the CSMA/CA cases, and IC phases are described in the state diagram of the proposed protocol. The details of the interframe space waiting times (distributed coordination function interframe space or short interframe space), re-transmission, etc. are not shown to simplify the diagram.

We describe a slot allocation scheme and three mechanisms to support the QoS requirements in the MAC protocol, which are mentioned in detail as follows. The slot allocation scheme reserved required time slots for subscribers. A priority classification mechanism supports the heterogeneous traffic loads and different reliabilities. Channel allocation and BER reduction mechanisms ensure reliability by avoiding collisions and reducing the BER. An admission control mechanism is used to control network scalability.

Necessary time slots for MAC frame payload should be allocated to the nodes to ensure QoS. Thus, we describe two equations to calculate the required number of time slots. We divide the application rate into the number of bits that can be sent in one time slot. This number of bits is assessed by multiplying data rate and slot time. If we multiply the superframe length and this result, it gives us the required number of time slots in the superframe. This number may not always be an integer; therefore, we round up the result. The period frequency formula is shown in Eq. (2). There are two cases. In the first condition, the value of m is fixed at 1 because a transmission should be performed in each period. In the second condition, we divide the latency to superframe to calculate the transmission frequency.

                           
                              (1)
                              
                                 
                                    
                                       Number
                                       
                                       of
                                       
                                       allocated
                                       
                                       time
                                       
                                       slots
                                    
                                    
                                    
                                       (
                                       NoATS
                                       )
                                    
                                    =
                                    
                                       ⌈
                                       
                                          
                                             App
                                             .
                                             
                                                
                                                Rate
                                             
                                             
                                             
                                                T
                                                superframe
                                             
                                          
                                          
                                             
                                                data
                                                
                                                rate
                                             
                                             ×
                                             
                                                T
                                                slot
                                             
                                          
                                       
                                       ×
                                       m
                                       ⌉
                                    
                                 
                              
                           
                        
                        
                           
                              (2)
                              
                                 
                                    m
                                    =
                                    
                                       {
                                       
                                          
                                             
                                                
                                                   
                                                   1
                                                   
                                                   If
                                                   
                                                   
                                                      (
                                                      
                                                         
                                                            
                                                               
                                                                  data
                                                                  
                                                                  rate
                                                               
                                                               
                                                               ×
                                                               
                                                               
                                                                  T
                                                                  slot
                                                               
                                                            
                                                            
                                                               T
                                                               superframe
                                                            
                                                         
                                                         ≥
                                                         1
                                                      
                                                      )
                                                   
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      ⌊
                                                      
                                                         Latency
                                                         
                                                            T
                                                            superframe
                                                         
                                                      
                                                      ⌋
                                                   
                                                   
                                                   If
                                                   
                                                   
                                                      (
                                                      
                                                         
                                                            
                                                               
                                                                  data
                                                                  
                                                                  rate
                                                               
                                                               ×
                                                               
                                                                  T
                                                                  slot
                                                               
                                                            
                                                            
                                                               T
                                                               superframe
                                                            
                                                         
                                                         ≤
                                                         1
                                                      
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

A priority mechanism is required for heterogeneous traffic loads and different reliabilities to ensure QoS. There are two types of priority mechanisms in the proposed system, latency priority and reliability priority. There are four types of traffic in latency priority mechanisms (Table 3), and contention window (CW) values are changed according to the traffic type. Thus, medium access probability is classified by the CW value. When a node sets a backoff timer, it chooses a random number between one and the CW value. The node begins the transmission when the timer reaches zero. If the medium is still busy, the node sets a backoff timer again and multiplies the previous value by two.

Furthermore, priority classifications can change dynamically. A dynamic priority assignment is used in the CAP because of the heterogeneous traffic types. If any sensor exceeds its threshold, it updates the priority value. In normal cases, temperature data has a lower priority value than ECG data. Yet, if the temperature data exceeds its threshold, the temperature data priority level will be higher than the ECG data.

The second type of priority mechanism is reliability. ACK information is required if the node has high reliability. However, if the value range does not exceed its threshold, it has low reliability priority, and ACK information is not required.

Error reduction and channel allocation mechanisms make a significant contribution to the reliability. When the BER increased, we avoided sending low reliability data in the designed protocol or switched to another channel with a lower BER. Unsent packets remain in the queue to be delivered later, thus, reducing the BER. The coexistence of two WBANs is another situation investigated in this study. In this case, WBANs change their communication channels, and sixteen WBANs can communicate simultaneously. Furthermore, the backoff timer operates at tenths of seconds instead of whole integers, increasing by a factor of two. Thus, the probability of collision and the BER are reduced.

Admission control mechanisms contribute to QoS by reserving bandwidth effectively. When an admission request is received by the network, QoS support is verified by the base. If the QoS support is enabled, the QoS requirements are provided by the network, and sufficient time slots are allocated to the node. Otherwise, the request will be refused. If any node from another network requests admission, the status of the network will be verified. If data are emergent and network conditions are suitable, required time slots will be allocated or will be sent at a contention period. Otherwise, the request will be refused.

The performance of the proposed MAC protocol is evaluated and compared with two different example scenarios. In the first scenario, we used medical application parameters and compared with IEEE 802.15.4 and IEEE 802.15.6. In the second scenario, we used similar parameters to those found in the literature for PLA-MAC and PNP-MAC protocols. We compared our proposed design according to end-to-end delay, packet loss ratio, and throughput with these protocols that are common standards and recent protocols for WBANs.

In scenario 1, the network structure is based on star topology, which has one central node attached to several sensor nodes. The allocated time slots are determined according to the requirements (data rate, superframe structure, etc.) in the application scenario. The data rate is set to 250kbps because communication in WBAN is narrow-band. The simulation parameters used for scenario-1 and also scenario-2 are given in Table 4.
                     
                  

The properties of the medical applications are determined by considering the QoS requirements in Table 1 and the simulation parameters in Table 4. Consequently, the required data rate, latency, time slots, and period frequency (m) are calculated and presented in Table 5
                     . The number of required time slots for the MAC frame payload to a node is calculated by Eq. (1). An example for F3 application was performed as;

                        
                           (3)
                           
                              
                                 NoATS
                                 =
                                 
                                    ⌈
                                    
                                       
                                          72.000
                                          
                                          ×
                                          0
                                          ,
                                          .
                                          24576
                                       
                                       
                                          
                                             (
                                             
                                                250.000
                                             
                                             )
                                          
                                          
                                          ×
                                          
                                          0
                                          ,
                                          .
                                          00192
                                       
                                    
                                    ⌉
                                 
                                 ≅
                                 
                                    ⌈
                                    36
                                    ,
                                    864
                                    ⌉
                                 
                                 =
                                 37
                              
                           
                        
                     
                     
                        
                           (4)
                           
                              
                                 
                                    (
                                    
                                       
                                          (
                                          72.000
                                          )
                                          ×
                                          0.00192
                                       
                                       
                                          0.24576
                                       
                                    
                                    )
                                 
                                 ≥
                                 1
                                 ⇒
                                 m
                                 =
                                 1
                              
                           
                        
                     
                  

We choose temperature, SpO2, ECG, accelerometer, and glucose sensors for scenario-1. We aim to organize various application classes in the network design that have different data rates and latency values.

We have used OPNET Modeler [26] to simulate our system. End-to-end delay, packet loss ratio, and throughput performance metrics were used, and the results are described below.

End-to-end delay is the time between generation and reception at the destination. Fig. 4
                      shows that the measured end-to-end delay is roughly 32ms, a better result than both IEEE 802.15.6 and IEEE 802.15.4. Because of the fixed GTSs and superframe structure, the IEEE 802.15.4 protocol result is higher than that of our protocol. In addition, our slot allocation scheme causes a difference with the IEEE 802.15.6 protocol. The slot allocation scheme contributes to the time constraints for varied traffic types that serve adequate time slots. Thus, guaranteed latency is achieved, as shown in Fig. 4.
                  

In Fig. 5
                     , we evaluate the packet loss ratio versus time for the proposed MAC protocol in comparison with others. The packet loss ratio is the amount of packet losses per amount of packet transmission. We observe that the proposed MAC protocol exhibits the lowest loss ratio among all approaches due to the adaptive superframe phases, channel allocation mechanism, and slot allocation scheme. This verifies the reliability enhancement and the impact of the BER reduction mechanism due to the cross-layer architecture. Thus, the required medical data transmission reliability is achieved. If we consider the reverse perspective, the designed protocol achieves approximately 99.9999% of the packet deliver ratio.


                     Fig. 6
                      illustrates the throughput for a constant data rate for the proposed MAC, IEEE 802.15.4, and IEEE 802.15.6 protocols. The throughput is the amount of successfully transmitted data packets. When the traffic load of the network approached 120kbps, we compared the network outputs. The IEEE 802.15.6 protocol has a low throughput due to the lack of a robust scheduling scheme for periodic traffic. The proposed MAC protocol has a throughput about twice as that of the IEEE 802.15.4 protocol due to the fixed GTSs and the priority mechanism.

In scenario 2, the network structure is also based on a star topology with one central node attached to seven sensor nodes. These nodes have the same data rates, and the generated packets per second for each node vary from 1 to 7. The data rate is set to 250kbps, and a 2.4GHz frequency band is used for network communication. The superframe consists of 128 time slots and each time slot is defined as 7.68ms.


                     Fig. 7
                      presents the comparison of the average packet delivery delay versus the traffic load for each of the mentioned protocols, except IEEE 802.15.4. The Zigbee protocol has a very high delay value ranging from approximately 1‒8s. The proposed MAC protocol average delay is 51ms, which is six times lower than the next lowest average delay. The figure shows that the average delay of the proposed MAC protocol is stable with an increase in the number of nodes because of the robust slot allocation scheme and priority classification mechanism.

As shown in Fig. 8
                     , we compare the average delay for delay-driven packets versus the traffic load. The IEEE 802.15.4 protocol was excluded due to the absence of a priority mechanism for delay-driven packets. The proposed MAC protocol average delay for delay-driven packets is 18ms. The PLA-MAC has a 173-ms average delay, which is the next lowest average delay. The difference between the proposed protocol and the others is very apparent, even though the traffic load is low.

In Fig. 9
                     , we compare the throughput versus the traffic load, and the proposed MAC protocol has achieved 100% success. The throughput performances of the top protocols are approximate because of the low data rate. The differences become more evident when the traffic load is increased. The proposed MAC protocol achieves up to 10% better throughput performance than the PLA-MAC protocol. This achievement is caused by the adaptive superframe structure, which is a result of the slot allocation scheme.

@&#CONCLUSION@&#

In this study, we proposed a new QoS-aware cross-layered MAC protocol for WBANs based on the ISO/IEEE 11073 standards. We adopted a cross-layer architecture that cooperates with the application, MAC, and physical layers. As a result, user requests are considered by the application layer, and a reduction in the BER is achieved with the physical layer interaction. A priority mechanism is provided with a dynamic classification mechanism, which consists of latency and reliability sections. The latency and throughput are improved by means of a slot allocation scheme and a hybrid access mechanism, which are QoS provisioning parameters. Additionally, the sustainability of QoS is ensured by an admission control mechanism.

We evaluated the system performance through simulations of the model by using OPNET Modeler. We compared our protocol with standard technologies (IEEE 802.15.4 and IEEE 802.15.6) and recent protocols (PLA-MAC and PNP-MAC). The proposed protocol achieved better simulation results than the other protocols when considering throughput, packet loss ratio, and end-to-end delay, which ensures the QoS requirements. Thus, the tolerable latency accomplished about up to six times lower than other protocols and it has better throughput performance about up to twice as that of the other protocols and we achieve reliability communication that performed approximately 99.9999% of the packet deliver ratio.

@&#ACKNOWLEDGMENTS@&#

This research work was supported by the Ministry of Science, Industry and Technology of Turkey under the contract SANTEZ 0200.STZ.2013-1 and Research Fund of the Sakarya University, project number: 2013-09-10-001.

@&#REFERENCES@&#

