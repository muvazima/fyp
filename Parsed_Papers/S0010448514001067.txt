@&#MAIN-TITLE@&#Voxel-based fabrication through material property mapping: A design method for bitmap printing

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Bitmap printing workflow enables digital fabrication in printer’s native resolution.


                        
                        
                           
                           Voxel-based design and representation of objects for multi-material printing.


                        
                        
                           
                           Using 3D printed light guides, deformation of materials can be sensed.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

3D printing

Voxels

Additive manufacturing

Digital fabrication

Bitmap printing

Prosthetics

@&#ABSTRACT@&#


               
               
                  We present a bitmap printing method and digital workflow using multi-material high resolution Additive Manufacturing (AM). Material composition is defined based on voxel resolution and used to fabricate a design object with locally varying material stiffness, aiming to satisfy the design objective. In this workflow voxel resolution is set by the printer’s native resolution, eliminating the need for slicing and path planning. Controlling geometry and material property variation at the resolution of the printer provides significantly greater control over structure–property–function relationships. To demonstrate the utility of the bitmap printing approach we apply it to the design of a customized prosthetic socket. Pressure-sensing elements are concurrently fabricated with the socket, providing possibilities for evaluation of the socket’s fit. The level of control demonstrated in this study cannot be achieved using traditional CAD tools and volume-based AM workflows, implying that new CAD workflows must be developed in order to enable designers to harvest the capabilities of AM.
               
            

@&#INTRODUCTION@&#

Form, structure, material, and function are intimately intertwined in Nature, complementing and relying upon each other  [1]. The evolution of both form and material occurs in tandem, informed by their environment and enabled by the process of material fabrication. By contrast, conventional design processes today begin with desired forms to which material compositions are assigned on a macro level. These models are then refined to ensure that they will meet the set performance criteria when manufactured  [2].

In this paper we present a design approach towards environment and performance-driven form generation and material mapping in Additive Manufacturing (AM). As a specific case study of voxel-based design and fabrication and the bitmap printing process, a workflow for the design, representation, and digital fabrication of variable impedance lower-extremity prosthetic sockets is demonstrated. Prosthetics provides a relevant class of objects upon which to test the voxel-based approach due to the scale of their functional requirements. Current digital fabrication processes, especially multi-material processes, are able to fabricate objects within the scale of prosthetics and work with accuracy below the millimeter range. Furthermore, prosthetics requires a high level of customization, which is generally considered to be an important asset of AM. Finally, the possibility to locally vary structure and material composition has the potential to provide improvements in the performance of such products.

Despite the dynamic and heterogeneous nature of the human body, orthoses and prostheses designed to be situated along limbs and torsos are typically homogeneous in material composition and fail to mirror the functional gradients of stiffness and flexibility inherent in skin and muscle tissues  [3]. Limb loss is an increasingly relevant condition with approximately 1.6 million people living with limb loss in the United States alone  [4]. The development of advanced, high quality prosthetics is crucial to accommodate the needs of this portion of the population.

In particular, we focus on a transtibial prosthetic socket, which targets the largest population of lower-limb amputees. As the component that interfaces between the residual limb and the prosthesis, a properly fitting socket is essential for patient mobility, comfort, and health.

Conventional prosthetic sockets today are fabricated using a long, iterative, and labor-intensive artisanal process that does not utilize recent material advances and scientific instrumentation. As a result, current sockets often do not fit properly, leading to discomfort, pain, and occasionally skin breakdown in the residual limb  [5].

Aiming to overcome the current issues in prosthetics, we present a method to produce sockets using a multi-material 3D printer, allowing for local variation of material stiffness in order to customize the socket and to increase socket functionality by integrating sensing elements.

Although multi-material 3D printing has been in existence for several years  [6], currently available design workflows are based on volume representations and do not generally enable representations of functionally graded materials or control of material properties on a voxel scale.

At the core of this research is an investigation into novel workflows that enable designers to utilize the capabilities of the rapidly evolving multi-material AM technology. In order to discuss the current limitations and challenges, we draw parallels with workflows in 2D printing. Considering these parallels, we argue that design workflows that take into account the build strategy can provide the designer with greater levels of control over the properties and functionalities of the fabricated object.

To demonstrate this principle, we present a new workflow. Initially the object’s geometry and local material properties are determined and represented. Subsequently, the desired material properties are translated into local material composition at the native resolution of a multi-material AM system using bitmaps. These bitmaps are directly sent to the AM machine. Currently there are no software tools available publicly that support this type of workflow including 3D bitmap printing. We present a case study for a customized prosthetic socket to illustrate the capabilities of our approach. Through this case we demonstrate how new AM processes, in combination with a novel CAD workflow, allow designers to increase product performance and functionality.

@&#BACKGROUND@&#

In this section we discuss the state-of-the-art of Additive Manufacturing and the workflows available to designers using this technology. Next, we introduce our case study, the prosthetic socket, and present the issues and challenges faced by the prosthetics industry.

@&#OVERVIEW@&#

Additive Manufacturing is a collection of digital production technologies also known as three-dimensional (3D) Printing. Although different processes employ a wide variety of principles in adding material and applying energy, all AM technologies share in common the ability to fabricate objects directly from 3D model data by adding material layer upon layer. Given a large number of proprietary technologies, the naming of AM processes has been rather inconsistent. In an attempt to develop a standard terminology for all AM processes, ASTM International Committee F42 on Additive Manufacturing Technologies defined 7 AM categories that describe most existing AM processes  [7].

Compared with conventional part production, such as machining and injection molding, AM offers unprecedented possibilities in shape complexity and custom geometry  [8]. AM has been used by industrial designers in Rapid Prototyping for over a decade. However, the technology has been developing rapidly: prices of machines and materials are dropping, additional and better-engineered materials can be processed, and the build quality has improved greatly over the past few years. These developments result in an increasing application of AM for end-production, accounting for a growing portion of the total revenue of the global AM market  [6]. Custom medical and healthcare products are among the categories of products that clearly benefit from the AM production economies. Custom-fit hearing aids, metal joint implants, and dental crowns are nowadays often fabricated in high volumes using AM  [6].

Multi-material 3D printing technologies enable the fabrication of 3D objects with heterogeneous compositions, i.e. objects that are composed of two or more materials which differ in their physical and/or chemical properties and are fused together to build up the object. The possibility of material property variations provides the designer with the capability of programming the object structure and composition in order to achieve specific functionality. For example, combinations of rigid and soft materials can form complex objects, having anisotropic properties or property gradients that cannot be otherwise generated within a single build.

The mesh-based STL file format has become the de-facto standard in the AM industry in the mid-1980s  [6]. However, as AM technologies have advanced with machines capable of processing higher fidelity parts, multiple materials, and complex hierarchical structures, it has become apparent that the STL file format is insufficient to represent such features. These limitations have triggered the development of a new standardized format, the Additive Manufacturing File Format (AMF)  [6].

@&#OVERVIEW@&#

Transtibial prostheses typically consist of three components–foot, pylon, and socket–as illustrated in Fig. 1
                           . The socket plays a crucial role in interfacing between the residual limb and the prosthesis: a proper socket fit is essential to the physical health and comfort of its wearer. In conventional fabrication, individually customized prosthetic sockets are produced using an artisanal process. This process generally begins with a male plaster mold used to create a series of clear thermoplastic test sockets  [9]. Employing the data gained from these plastic test sockets the final sockets are then created out of a carbon-fiber composite due to its superior strength-to-weight ratio  [9].

The current process of fabricating prosthetic sockets undertaken by a prosthetist is labor intensive, iterative, and can take several weeks to complete  [10]. During this process, the amputee would have made multiple visits to the prosthetist. The time and specialized skillset required to develop a custom socket contributes to the high costs of prosthetics, leading, in turn, to decreased availability of high quality prosthetics worldwide. In addition to their being uncomfortable, poorly fit sockets are highly problematic, potentially threatening both in the short-, and long-term health of an amputee  [5]. Furthermore, a proper socket fit can often change as the tissues in a residual limb undergoes significant atrophy over time, leading to pain and skin pathologies as the residual limb sits lower in the socket  [11].

One of the main causes for poor socket fit is the lack of appropriate application of material properties to correspond with the amputee’s biological tissue. In stark contrast to the complex physiology of a residual limb, a conventional socket is typically composed of a homogeneously rigid material. Investigations into the correlations between residual limb stiffness and ideal socket shape generally suggest that there is an inverse relationship between residual limb stiffness and localized socket pressures  [11–13].

In some cases, attempts are made to achieve the required material property distribution. Such variations are traditionally achieved as discrete delineations in physical behavior by fabricating multiple parts comprised of different materials, and assembling them after the fabrication process has been completed  [14]. However, this practice can only provide rough approximations to the mapping between tissue stiffness and socket interface response.

Recently there has been research interest in automated socket fabrication using AM  [3,15,16]. Sockets produced in this way tend to be composed of hard polymers such as Nylon and ABS, and are homogeneous in material composition  [15]. In an attempt to reduce contact pressures at certain points on the residual limb while using a homogeneous material, some researchers have introduced compliant features on and around pressure points  [16]. Applying Stratasys’ multi-material technology for the first time in prosthetic sockets, Sengeh  [3] has produced sockets that are built up of discrete sections consisting of harder and softer materials. The local Young’s Modulus of the socket is obtained from an inverse linear relationship between bone tissue depths calculated from magnetic resonance imaging (MRI) data. It has been demonstrated that such an inverse relationship can reduce the contact pressure of the socket. The material distribution logic of the socket was implemented not as a gradient, but as discrete half-inch square windows  [3]. The discrete non-graded material distribution logic enabled the use of commercially available modeling software and currently existing 3D printer software, where materials are assigned to separate 3D geometrical volumes. As human tissue is characterized by a graded distribution, our research aim is to model and fabricate a functionally graded material property distribution applied to the prosthetic socket.

Taking into account the issues described above, we identified several challenges in prosthetic socket design and fabrication that we aim to overcome by introducing a reproducible digital process.

The initial step in socket design, namely the collection of biological data, must allow us to accurately measure not only the 3D geometry of the residual limb, but also the local stiffness of the tissue in the physiologically relevant direction. New algorithms must be developed to inform the shape and material composition of the prosthetic socket based on the measurements captured in the previous step. Finally, a monitoring system is required to allow accurate evaluation of the socket fit.

Similar to other healthcare products, the development of prosthetic sockets can potentially benefit the user in terms of cost and quality if produced using AM. First, the affordance of AM to accurately and repetitively build custom geometries from digital data has the potential to address the current need for a labor-intensive and iterative process. In addition, recent developments in AM have allowed the production of components with multiple material properties within a single object. As discussed earlier, to accommodate an appropriate fit of the prosthetic socket, accurate allocation of different material stiffness is essential.

@&#OVERVIEW@&#

Within the scope of this research we focus on the AM process PolyJet, developed by Stratasys and categorized as “Material Jetting” following the ASTM terminology  [7]. PolyJet utilizes inkjet technology to deposit layers of a liquid photopolymer. These layers are cured by an ultraviolet lamp directly after deposition. Similar to traditional color-inkjet processes, PolyJet utilizes arrays of multiple inkjet heads in order to deposit different materials during a single run. This enables the fabrication of objects that are composed of materials with variable and graded properties such as stiffness, transparency, and color. The novel “material dimension” that this technology enables has been explored in previous research. One such example can be identified in a collection of conceptual objects designed for the human body entitled “Imaginary Beings: Mythologies of the Not Yet” created by Neri Oxman in collaboration with Prof. W. Craig Carter (Department of Materials Science and Engineering, MIT) and Joe Hicklin (The Mathworks) and included in the permanent collection of the Centre Pompidou in Paris, France. Fig. 2
                         illustrates a portion of one of the objects of this exhibition, demonstrating graded material transitions. Using the same multi-material process, it has been shown that CT scan data can be directly used for fabricating a reproduction with a functionally graded material, without converting the volumetric scan data into a surface representation  [17].

Current CAD tools and workflows have been developed with the limitations of traditional manufacturing in mind. The CAD software typically enables the design of volumes to which a homogeneous material is then applied. As part of the process, Finite Element simulation software is often utilized to evaluate the design under simulated usage conditions, the results of which inform the designer of any required adjustments in geometry or material. Until now, tools to compute as well as fabricate functionally graded materials were lacking. However, the necessity for a novel set of CAD tools that enable the design, analysis, and fabrication of hierarchical complexity and heterogeneous objects allowed by AM has been identified over a decade ago  [18].

Heterogeneous objects can be divided into graded heterogeneous objects and discrete heterogeneous objects. Given our aim to develop functionally graded material compositions, we focus on the previous work done on graded heterogeneous objects. When considering Computer Aided Design and Additive Manufacturing of such graded heterogeneous objects, we identify the importance of advancements in 3 areas: 
                           
                              1.
                              CAD and representation of heterogeneous objects.

File processing, Halftoning, and process planning.

Graded heterogeneous AM.

A significant amount of research has been done on CAD tools for local composition control  [19]. Yet, most of the previously presented methods are aimed at assigning material distributions to an already existing geometry and do not allow simultaneous design of geometry and material. The method of Chiu and Yu  [20] assigns local material properties based on a Finite Element Analysis computation. Many of these approaches are mesh-based  [18,20]. Meshes, however, have the limitation of being an approximation of the geometry. In addition, meshes have very limited editing capabilities and therefore they do not provide for a suitable representation during the early stages of geometrical modeling. Addressing such issues, feature-based design for heterogeneous objects has been proposed by several authors. Feature-based design allows for concurrent design of geometry and material  [19,21,22]. Samanta and Koc present a feature-based material blending method that includes optimization steps  [21], while the feature-based method developed by Qian and Dutta allows assigning materials based on desired graded mechanical properties  [22]. In addition, an approach based on distance fields has been proposed, which can be applied to represent material features  [23].

Besides the limitations of existing CAD tools, currently employed file formats present limited capabilities for the representation of heterogeneous objects. Several efforts have been made towards the standardized representation of heterogeneous objects to address this issue. Using the information modeling methodology developed for ISO 10303 (STEP), an information model for heterogeneous objects is proposed  [24]. Also based on STEP, a method focused on memory efficiency is presented  [25]. The latter article provides a more complete overview of research on heterogeneous object representation.

Developments in volumetric-based CAD tools are also relevant for heterogeneous modeling and representation, as such methods allow voxel-wise definition of a material. Examples show that novel volumetric representation methods allow common CAD modeling operations to be performed on data derived from volumetric scans without the need to convert the data into surface representations  [26].

A crucial step in digital fabrication is the processing of the CAD files once they are imported in the software of the 3D printer. In this step, the digital geometric representations of the design are translated into machine-specific code that eventually drives the used AM machine. If we consider the parallels between 3D printing and 2D printing, this stage has a strong resemblance to the step in 2D printing where the Raster Image Processor (RIP) and printing strategy are applied. One of the main functions of the RIP is to process the input, which describes how a page looks (usually in the form of a page description language like a PDF file) and produce data that describes where the printer has to deposit ink. The digital input file can contain vector graphics, such as the text, or raster graphics such as photos and gradients, which can consist of millions of colors. Contrary to this high number of colors, inkjet color printers usually work with 4 or 6 colored inks, while black-and-white printers have only a single ink color. In order to be able to print a higher range of colors and produce gradients that appear continuous while still using a limited set of colors, the RIP applies a technique called Halftoning. In a Halftone image printed dots are varied either in size or spacing and thereby produce the illusion of a smooth gradient. Because physical machines are always prone to minor inaccuracies, small variations in ink droplet size, speed, and direction, or defect nozzles can occur. Such inaccuracies create visual artifacts, such as color shifting. To overcome these problems, specific printing strategies are applied that eliminate visible imperfections.

As the digital 2D printing industry has grown into a mature process over the past decades, the process has been optimized and digital printers nowadays produce images and gradients that seem flawless to the human eye by means of adaptive halftone algorithms. In contrast, AM technologies, especially the multi-material processes, are relatively young. Moreover, adding a third dimension makes the process of effective high quality Halftoning challenging. Similar to the process of 2D printing tint gradients, in order to fabricate smooth heterogeneous 3D objects using a limited set of base materials, a 3D Halftoning process is required. In one of the earliest mentions of 3D Halftoning, Lou and Stucki discuss the issue, focusing on the AM process Stereolithography (SLA)  [27]. It is indicated that for AM, the Halftoning algorithms face additional challenges. For example, the physical constraints of the AM process have to be taken into account. Such constraints include the required ability to drain uncured resin from within the structure and the requirement that all voxels must be continuously connected. In more recent work, Cho et al. use Binder Jetting as a prototypical multi-material AM technology while presenting new workflows for the design, processing, and fabrication of heterogeneous objects  [28]. The authors present a process that is based on traditional 2D digital Halftoning and is optimized for the AM machine, taking into account uncertainties in droplet placement. Also, the issue of design tools for heterogeneous AM is addressed  [29]. However, in the presented data flow, which includes a geometry slicer and Halftoner, the geometry design and the material design are two separate steps. A Halftoning technique has been demonstrated to be a useful tool to dimension and distribute cells of a lattice structure based on the analyzed stress given a specific load of the structure  [30].

Work discussed in this section demonstrates that file processing as well as the utilized AM process parameters contribute to a large extent to the final properties of the fabricated object. For example, given a single geometry, it is possible to fabricate objects with different properties by changing the build strategy. This is in line with the experiment done using a Fused Deposition Modeling process where it was shown that, apart from geometry and material composition, the direct influence on the build process parameters provide greater control over the properties of the fabricated object  [31]. However, none of the existing design tools incorporate the ability for the designer to influence the properties of the object through the build process.

Much of the work discussed in the previous section is aimed at making and preparing graded heterogeneous CAD files for AM. However, as of today, the ability to fabricate heterogeneous objects has been very limited in available AM processes. As a result, in the discussed literature, several methods have been presented where binder-jetting technology was applied and local material color was used as a proof-of-concept visualization of the approach. However, none of the discussed approaches have been applied to manufacture fully functional graded heterogeneous objects using multi-material AM.

As mentioned earlier, PolyJet technology, which is used in this research, is able to manufacture objects with varying physical properties with sub-millimeter control over these properties. Using PolyJet, other researchers have demonstrated workflows for modeling and fabricating material compositions with target visual properties  [32] and desired deformation behavior  [33]. Although these approaches utilize the capabilities of multi-material multi-property AM the objects consist of discrete sections of different materials. More recently, Vidimçe et al.  [34] have developed a programmable pipeline for the generation of multi-material 3D printed parts, allowing the specification of material composition in an object. Complimentary to this, Chen et al.  [35] describe a framework that supports the developments of methods based on the definition of desired properties of the end product.

Among other processes that are being developed for heterogeneous AM are multi-material Selective Laser Sintering (ASTM category Powder Bed Fusion)  [36], Laser Engineered Net Shaping (ASTM category Directed Energy Deposition)  [37]. In addition, a novel AM process based on discrete voxels has been conceptualized  [38]. It is shown that such a process allows continuous control over a wide range of material properties by varying parameters of the voxels.

@&#IMPLEMENTATION@&#

@&#OVERVIEW@&#

Conventionally, when designing an object, one begins with a shape and material assignment and then modifies one or both domains in order to satisfy specific design parameters. Though not necessarily suitable for all applications, the following work explores the concept of first identifying a set of relevant parameters and then creating an algorithmic process by which to derive geometry and material distribution. In the example that follows, tissue thickness and stiffness data of a residual limb are used to generate the material distribution, inner geometry, and sensor distribution of a socket. An overview of the process for material and geometry distribution is given in Fig. 3
                        .

The socket design and fabrication process begins with collecting data of the residual limb. The eventual goal is to build a physical measurement system capable of measuring the residual limb’s geometry under load in real time, the pressure response at different tissue displacements and the local impedance of the limb tissue. From these measurements, the local nonlinear first order stiffness at each location of the residual limb may then be used to generate more accurate socket geometries and material mappings.

In this example, data collected from three sources was used to calculate estimated tissue stiffness of the residual limb. These sources include an MRI scan of the residual limb encased within a silicone liner, 3D scan data of the inner surface of an existing, well-fitting carbon fiber composite socket, and the pressure distribution along the socket–limb interface under unloaded conditions measured using the Tekscan 
                           F
                        -socket system  [39].

3D representations of the residual limb were reconstructed from the MRI images using Mimics Innovation Suite by Materialize and the radial tissue thickness at each point on the limb–defined as the horizontal radial distance between the surface of the skin and the underlying bone–was measured. Tissue displacement was then measured as the horizontal radial gap between the inner surface of the existing, well-fitting socket and the surface of the residual limb. Fig. 4
                         shows the measured tissue displacement values as a function of the radial tissue thickness obtained from the MRI data. Pressure data from the Tekscan 
                           F
                        -socket system was then used to derive the normal forces at each point. Several points corresponding to anatomical areas of interest, such as along the femoral condyles and the tibial crest, were selected. The locations of these points on the residual limb are indicated in Fig. 5
                        . Tissue stiffness values (
                           K
                        ) at these points were calculated using the force (
                           F
                        ) and tissue displacement (
                           R
                        ) data using Hooke’s law; these values are also graphed in Fig. 5.

For this initial exploration, tissue stiffness (
                           K
                        ) was mapped to material hardness using a linear inverse relationship. The highest tissue 
                           K
                        -values were mapped to the photopolymer with the lowest shore value currently available for the used AM system, while the lowest 
                           K
                         values were mapped to the photopolymer with the highest shore value. Meaning that stiffer areas of the residual limb are supported with a softer material on the socket, and areas with softer tissue are supported by stiffer socket material. Such an inverse relationship has been shown to reduce the contact pressure of a socket  [3]. The graded distribution of the material properties was obtained by combining these materials on a voxel level, which is discussed in Section  4.3.

Beyond socket materials, it is important to take into account the shape of the inner layer of the socket that interfaces with the residual limb. We aim to find socket geometry that, given a load, results in an equal distribution of forces perpendicular to the surface of the residual limb. In the absence of multiple material sockets, as in conventional composite socket design, prosthetists rely on the shape of the socket to properly distribute compression and loads across different tissues and areas of high sensitivity. In this example the inner socket geometry was derived by considering the pressure balance between the forces from the body and the forces between the residual limb and the socket.

The force from the body was taken to be equal to half the weight 
                           
                              (
                              W
                              )
                           
                         of the user. A cross-sectional area 
                           
                              (
                              
                                 
                                    A
                                 
                                 
                                    
                                       section
                                    
                                 
                              
                              )
                           
                         was estimated as the area of the disk across the residual limb at the top of the socket, and pressure 
                           
                              (
                              p
                              )
                           
                         was calculated using the weight and the sectional area; see Fig. 6
                        . 
                           
                              
                                 p
                                 =
                                 
                                    
                                       
                                          
                                             1
                                          
                                          
                                             2
                                          
                                       
                                       W
                                       ⋅
                                       g
                                    
                                    
                                       
                                          
                                             A
                                          
                                          
                                             
                                                section
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

The force 
                           
                              (
                              
                                 
                                    F
                                 
                                 
                                    
                                       inner
                                    
                                 
                              
                              )
                           
                         at each point of inner socket surface 
                           
                              (
                              d
                              
                                 
                                    A
                                 
                                 
                                    
                                       inner
                                    
                                 
                              
                              )
                           
                         was calculated given the pressure. 
                           
                              
                                 
                                    
                                       F
                                    
                                    
                                       
                                          inner
                                       
                                    
                                 
                                 =
                                 
                                    
                                       d
                                       A
                                    
                                    
                                       
                                          inner
                                       
                                    
                                 
                                 ⋅
                                 p
                                 .
                              
                           
                        
                     

Finally, we calculated the required radial displacement 
                           
                              (
                              
                                 Δ
                              
                              r
                              )
                           
                         at each point of the inner socket wall relative to the residual limb surface using the tissue stiffness values 
                           
                              (
                              K
                              )
                           
                         estimated previously at each point. 
                           
                              
                                 
                                    Δ
                                 
                                 r
                                 =
                                 
                                    
                                       
                                          
                                             F
                                          
                                          
                                             
                                                inner
                                             
                                          
                                       
                                    
                                    
                                       K
                                    
                                 
                                 .
                              
                           
                        
                     

Thus, the overall socket geometry is obtained by applying a local offset from the residual limb, where the offset is calculated to cause tissue deformation resulting in an even force distribution on the surface of the residual limb.

Because a patellar-tendon-bearing socket was desired for this particular test subject, socket geometry from the existing carbon-fiber socket was used to create an indentation in the patellar-tendon region. In addition, the socket cut lines created by a prosthetist in the existing socket were used as guides to determine the cut line geometry in the socket design.

Following the mapping of materials and determination of socket geometry, files were generated for the 3D printer. The AM machine used for the experiments is the Objet500 Connex  [40], a multi-material AM machine categorized as a “Material Jetting” technology. The two photopolymers used for the socket fabrication are the flexible TangoBlackPlus (FLX980) with a Shore A hardness of 26–28 and the rigid VeroClear (RGB810) with a Shore 
                           D
                         hardness of 83–86  [41]. For simplicity VeroClear will be referred to as material 1 while TangoBlackPlus will be referred to as material 2.

Typically, files generated for the Connex–as with those generated for most 3D printers–are loaded into the Objet software in the form of STL files with an individual mesh body for each material. Given the high resolution of our material mapping and the desire to generate smooth transitions between materials of different hardness and avoid sharp edges of transition between hard and soft materials, the socket is fabricated using a method termed “bitmap printing” where files to the printer are written on a local, voxel-scale level.

In bitmap printing, binary bitmap files are written which indicate to the printer where drops of each material should be jetted. The used Material Jetting AM machine builds layers normal to the print bed (the 
                           Z
                         axis) with a resolution of 845 dpi. An object of this socket’s size with a height of approximately 5 in. is hence split into more than 4000 layers. Each layer in the 
                           Z
                         direction requires a separate set of 2 
                           X
                        -by-
                           Y
                         bitmaps. These files–and hence control over the drops of materials jetted–are written at the resolution of the printer 600 by 300 by 845 dpi (
                           X
                         by 
                           Y
                         by 
                           Z
                        ). One of such bitmap slices is illustrated in Fig. 7
                        . The percentage of each material patterned at this scale determines the overall hardness of each larger region. The software of the used Material Jetting AM machine determines the required support structures for voids where there are additional areas of the socket specified above it. For example, when the socket is printed on its side, support material is printed to fill the inside of the socket. The generated stacks of binary bitmap files can be considered analogous to files produced in volumetric scanning technologies, like computed tomography (CT) and MRI, which are common in the medical domain. The main difference is that in a volumetric scan each voxel can represent a range of shades, while the generated socket bitmaps have to be binary, informing the 3D printer whether material has to be placed on the location of the voxel. Therefore shades and gradients can only be achieved through Halftoning principles.

The resulting variable impedance socket is fabricated using the multi-material AM machine. The bitmap fabrication process allows us to combine the two materials in different proportions to create the desired gradients of material stiffness. Fig. 8
                         illustrates the fabricated socket.

Although 3D printing with the photopolymers offers significant advantages in geometries and the number of materials that can be fabricated in one process, they are currently not sufficiently structural to support the weight of an average human, especially under the dynamical load which occurs when walking, unless the socket thickness is made to be extremely large (e.g. in excess of 1 in). To ensure testing safety and avoid the need for a very thick and heavy socket, a composite carbon fiber shell was fabricated separately to fit outside the 3D printed layer. The geometry of the carbon-composite shell is similar to that of the outer layer of the 3D printed socket. Gaps between the outer shell and the 3D printed layer are incorporated in order to allow soft areas of the 3D printed layer (i.e. along the tibial crest) to deflect outwards when loaded. The sizes of the gaps were designed to be proportional to the softness of the neighboring 3D printed layer material with no gap between the outer shell and the hardest printed materials. A standard pyramid adapter is attached to the bottom of the composite shell to allow for attachment to existing prosthetic pylons.

As the human body is dynamic, the created interaction between tissue and fabricated object must be kept informed about its current state. In the case of the prosthetic socket that is expressed in the need of the prosthetist to visualize the fit of the socket and the pressure points on the residual limb.

Similar to our approach to incorporate different mechanical material properties within a single object produced in a single process, our goal is to incorporate pressure-sensing elements into the 3D printed socket without the need for complex assembly. Since automated assembly in custom complex freeform objects, such as prosthetic sockets, is challenging, our approach contributes to the overall vision of a digital workflow and reduction of costs of such high-end custom objects.

Sensing pressure and deformation of the printed material requires a method to transport and modulate signals. Approaches to fabricate electrically conductive paths have been actively explored over the past years  [42]. Combining the fabrication of electrical circuits simultaneously with plastic components is considered an important step towards digital fabrication of complete products without the need for assembly  [43].

Given the materials provided by the used Material Jetting AM machine platform, electrical conductivity is currently unavailable. However, the range of available material properties does include highly transparent materials and materials with different indexes of refraction. The ability to locally vary this transparency and index of refraction has been shown to allow the AM fabrication of structures based on the principle of fiber optics  [44].

Optical fibers transport light signals using the principle of total internal reflection. A single fiber generally consists of a transparent core, which is surrounded by a transparent cladding with a lower index of refraction. The difference in the refractive index results in total internal reflection within the core, which guides the light along the fiber  [45].

In one of the earliest mentions of optical fiber fabrication using AM, Chappell et al.  [46] show that fabrication of light guides using an inkjet process is possible, but challenging. AM fabrication of light guides and optical fibers has been explored in the previous work using Material Extrusion AM  [31]. Although this process has shown to be effective in the fabrication of these optical fibers, Material Extrusion has currently very limited capabilities to build functionally graded material. Embedding of optical fibers for sensing purposes has also been examined  [47]; however this was achieved by manually inserting pre-fabricated optical fibers during the AM process. More recently, various promising applications of light guides produced using Material Jetting have been presented by Willis et al.  [44]. The transparent support material, which is normally intended to be removed after fabrication, has been applied as a cladding material. Although the latter research has demonstrated that Material Jetting can be a suitable AM method for building different kinds of sensors based on the principle of light guides, the presented structures that were built were not composed of flexible materials. Since the structure of the prosthetic socket does partially consist of the rubber-like material, we face the challenge of incorporating such light guides into a flexible material. In addition, a suitable pressure-sensing principle must be established in order to embed working pressure-sensing elements into a flexible structure.

Using traditionally fabricated optical fibers for sensing purposes is widespread in various applications, including in health monitoring systems  [48]. In those systems, the sensing elements are typically created using fiber grating  [48]. As fabricating fiber grating sensors is currently not possible using existing AM due to material and resolution limitations, we focus on sensing deformation based on attenuation.

Attenuation, which is defined as the loss of pulse power in an optical fiber, can be caused by internal or external sources. Intrinsic attenuation, loss caused by internal sources, is primarily produced by the principle of Rayleigh scattering  [45]. Impurities and non-transparencies within the fiber also add to the intrinsic attenuation. Alternatively, light can be attenuated by extrinsic factors, such as misalignment of connected fibers or the bending of the fiber  [45].

Principles of extrinsic attenuation can be deduced from known issues with optical couplers that traditionally lead to unwanted attenuation in fiber optics. For example, attenuation can be achieved by longitudinal misalignment (distance between fiber end-faces), angular misalignment (axes of fibers are non-parallel) and transverse misalignment (axial misalignment of the cores)  [49].

Our implemented sensing principle is mainly based on extrinsic light attenuation, more specifically, transverse misalignment. Each sensing element is a part of a system that consists of a light guide core, cladding, transmitter, receiver and attenuator. Because the used AM machine can work with two base materials, the support material is applied as a third material which is used for the cladding, as proposed by Willis et al.  [44]. At one end of the light guide a Light Emitting Diode (LED) is placed that functions as the transmitter, while at the opposite end a light sensor (photoresistor) is placed as a receiver, to transform the optical signal into electrical form. At a set location along the light guide, a structure is modeled that proportionally modulates the light intensity depending on the local deformation applied on that structure. A simplified section view of this principle is illustrated in Fig. 9
                           . Compression from the top in the center area leads to proportional misalignment of the core and thus to a measurable decrease in light intensity.

Apart from light emitted by the LED light, the light sensors are prone to sense ambient light, emitted from sources outside the socket, which causes noise in the readings. This is mainly caused by the fact that significant regions of the socket consist of highly transparent material 1. Sensing the light of a continuous emitting LED would therefore give incorrect readings. To overcome this issue, the LED emits a pattern of light signals: intermittent high-power light pulses and lower-power light pulses. Calculating the relative difference between measured light intensity at the sensor end allows us to filter out distortions caused by light from other sources than the LED itself. Another source of noise in the measurements is overall bending of the light guide. This leads to intensity modulation on other points along the light guide than the intended attenuator. To compensate for this, an extra light guide, without designed attenuator is modeled directly alongside the light guide with attenuator. Subtracting the readings of the former from the latter gives us the net value for the attenuation at the intended sensing element. These redundant light guides would not be necessary when future AM processes will enable the fabrication of more advanced sensing elements, such as fiber grating sensors, which are currently often applied in traditional optical fiber sensing systems  [49].

When evaluating the fit of the prosthetic socket on the residual limb and the resulting deformation of the socket structure, specific regions are of greater significance to the prosthetists and thus require a higher local density of sensing elements. As discussed earlier, the socket geometry and the material composition are unique to each amputee. In addition, the areas that require higher densities of sensing elements are likewise unique. In order to be able to straightforwardly generate the digital files for each unique socket geometry, we have developed a computational process to distribute and map the light guide structures with the required local densities. The process is implemented using the CAD software Rhinoceros 3D in combination with the Grasshopper plugin.

The process is designed to generate the light guides informed by data that consists of two inputs. First, the inner surface geometry of the custom socket, provided as a NURBS surface, forms the base geometry. Second, a density map, provided as a grayscale bitmap image, informs the local densities of the sensing elements. Fig. 10
                            shows a schematic overview of the algorithm of this process.

As discussed in the previous section, each sensing element consists of a light guide with two additional components: an LED on one end of the light guide and a photoresistor on its opposite end. For the purpose of convenient assembly and access of these components, we have chosen to give the light guides a vertical orientation. Consequently, all the LEDs are located along the upper edge of the socket, while all the photoresistors are located along the bottom of the socket.

Several steps of the geometry generation are illustrated in Fig. 11
                           . The final output of the process is a multi-body NURBS file, which is saved as a mesh, to be imported by the 3D printer software, where the material for each individual body is assigned. Due to limited resources to fabricate these components we utilized the traditional AM workflow where geometries are represented with a mesh-based boundary representation. Several full-scale sections of the socket have been fabricated using the multi-material Material Jetting AM machine, to test the designed sensing elements. One such section is shown in Fig. 12
                           , the areas of the flexible opaque material 2 are clearly visible, in contrast to the transparent material 1 light guide that runs through the center. The initial test model generated for this case consisted of 8 such sensing elements.

@&#CONCLUSION@&#

In this paper we present a new approach for form generation combined with material property allocation, informed by desired properties and fabricated using a multi-material bitmap printing method.

This method stands in contrast to traditional CAD design and manufacturing, where geometry is designed with a homogeneous material distribution in mind.

The design of objects that are in direct contact with the human body, especially under loaded conditions, can greatly benefit from the presented digital process.

To illustrate our approach, we applied it to a case study, a prosthetic socket, for which the variation of several material properties was explored. Aiming at reducing pressure points on the residual limb, we applied local variation of material stiffness, informed by the tissue properties of the residual limb. Local variation in transparency and index of refraction allows us to incorporate pressure-sensing elements, which are fabricated simultaneously with the socket.

Our presented approach consists of two main components: we first propose a process of limb tissue analysis combined with a voxel-based geometry and material design that is derived from the limb tissue data. Second, a tool is presented that generates geometries for the pressure-sensing elements given desired sensor density distribution.

@&#DISCUSSION@&#

The control over geometry and material composition presented in this paper has provided us with opportunities to create advanced graded material property distributions and increase the functionality of the end product, which could not have been achieved using traditional CAD tools and conventional AM workflows. By producing the bitmaps for the Connex 3D printer, we can directly control the material composition on the voxel level, which is considered a significant component of the printing strategy. This implies that, in order to harvest the current and future capabilities of AM, a specific level of control over printing strategies is essential to allow the design of advanced material properties.

Digital design and fabrication is currently undergoing significant developments analogous to the ones undergone over the past decades by the paper printing industry. The digital press is nowadays a mature process able to compete with the analogue offset printing in terms of speed, price and quality, even for larger production volumes. Looking at the current design and fabrication process for the digital press, the designer is not involved in setting the printing parameters or controlling the printing process on the level of printing strategy. Instead, a standardized system of color profiles, processes such as Halftoning, and optimized printing strategies ensure that text, vector images, and bitmap images are printed on paper with visual properties that match the intended properties of the designer as closely as possible.

@&#FUTURE WORK@&#

In order validate the discussed methodology, clinical trials with several amputees have to be set up to test the performance of the fabricated sockets in terms of measured pressure and comfort.

In this paper, MRI scan data was used to inform geometry and material distribution. Instead of MRI data, we intend to use tissue stiffness data derived directly from a contact-based scan process. Currently, the geometry and material distribution is informed only by the current tissue properties and volume of the residual limb. However, given the constantly changing nature of the human body coupled with the gradual atrophy of the muscular tissues in a residual limb, future work may account for this evolution when determining socket form and material generation. A simple example of this may be identifying areas of high pain sensitivity (e.g. over bony protuberances) and introducing pockets of softer graded materials below the area to avoid complications in the future. More ambitious examples may include predicting the tissue deformation and atrophy of the limb and then designing the form of the socket to guide the gradual movement of the limb within the socket without sacrificing fit.

Our future work also includes further development of optical structures that allow the sensing of different dimensions of deformation, such as shear. In addition we intend to integrate the presented logic of light guide geometry generation with the bitmap printing process, which will provide us with a greater control over fabricated structures in and for the future.

@&#ACKNOWLEDGMENTS@&#

We gratefully acknowledge the financial support from the Department of Veterans Affairs (Grant VA118-12-C-0040). We also wish to thank Stratasys, Ltd., for their invaluable support in materializing the bitmap 3D prints.

@&#REFERENCES@&#

