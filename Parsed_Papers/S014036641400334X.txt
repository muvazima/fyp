@&#MAIN-TITLE@&#Probabilistic inference-based service level objective-sensitive virtual network reconfiguration

@&#HIGHLIGHTS@&#


               
                  
                  
                     
                        
                           
                           A probabilistic inference based SLO sensitive VN reconfiguration mechanism is proposed.


                        
                        
                           
                           Cause-effect relationships between service QoS metrics and VN stress states being modelled as Bayesian network.


                        
                        
                           
                           The problem of reconfiguration points localisation is abstracted into finding the most probable explanation.


                        
                        
                           
                           We improve existing VNR’s effectiveness by adding virtual node and virtual link swapping mechanism.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Probabilistic inference

SLO assurance

Virtual network

Virtual network reconfiguration

@&#ABSTRACT@&#


               
               
                  Network virtualization enables multiple service providers to share the same physical infrastructure, and allows physical substrate network (SN) resources to be used in the form of a virtual network (VN). However, there are many obstacles to the application of this technology. One of the more challenging is the reconfiguration of SN-embedded VNs to adapt to varying demands. To address this problem, we propose a service level objective (SLO)-sensitive VN reconfiguration (VNR) method. A Bayesian network learning and probabilistic reasoning-based approach is proposed to automatically localise reconfiguration points and generate VN resource requests. To determine an optimal reconfiguration solution, we design a heuristic VNR algorithm with a virtual node and virtual link swapping strategy. We validate and evaluate this algorithm by conducting experiments in a high-fidelity emulation environment. Our results show that the proposed approach can effectively reconfigure a VN to adapt to a changed SLO. A comparison shows that our reconfiguration algorithm outperforms existing solutions.
               
            

@&#INTRODUCTION@&#

@&#BACKGROUND@&#

Network virtualization [1] is a key technology in the decoupling of network resources from physical infrastructure. The Infrastructure as a Service (IaaS) [2] paradigm has been proposed to enable the self-service provision of resources in a physical substrate network (SN) in the form of a logical virtual network (VN). The efficiency of the physical infrastructure can be significantly improved by the simultaneous sharing of a physical network. Services deployed in a VN environment are also much more dynamic and flexible.

In the business model introduced in [3], network virtualization (NV)-driven IaaS is considered to be the foundation of future internet architectures. Current internet service providers will have two new roles: infrastructure provider (InP) and service provider (SP). The InP will be responsible for providing and operating physical infrastructure devices, with resources in the physical SN provisioned through an IaaS portal, whereas the SP will concentrate on providing business services to its customers by renting resources from the InP. In a virtualized environment, service descriptions and service resource requirements are encapsulated into a service template, which is described using a standardised modelling language such as OASIS TOSCA [4] or DMTF OVF [5]. The quality of service is assured through a service level agreement (SLA) with a customer. The specific measurable characteristics of an SLA are known as service level objectives (SLOs). Service deployment and resource procurement are provided in an on-demand, self-service manner, giving the SP unprecedented flexibility to obtain VN resources for deploying services and increasing the InP’s SN resource utilisation rate. However, new challenges emerge as the management complexity increases.

One challenge posed by the network virtualization-driven service model is the efficient embedding of an SP-requested VN into an SN. Thus, we require an algorithm to minimise physical infrastructure allocation costs while maximising the SN resource utilisation rate. These are categorised as VN-embedding algorithms. There is a considerable body of work on the design of VN-embedding algorithms [6–8].

To provision resources to the SP in a self-service manner, IaaS platforms such as CloudStack [9] and OpenStack [10] are being developed that are capable of provisioning resources to support on-demand service deployment. With the development of Software-Defined Networking (SDN) and its enabling protocol OpenFlow [11], network functions are being decoupled from the substrate network. Furthermore, the emergence of SDN controllers such as OpenDaylight [12] and network virtualization experiment environments such as FITS [13] have paved the way for the provisioning and reconfiguring of VNs through the IaaS platform. However, none of these can offer network quality-of-service (QoS) guarantees. In addition, VN performance requirements change with the service workload, meaning that previously constructed VNs are inadequate for current demands. To ensure the service performance complies with changing SLOs, SPs must reconfigure the VN mapping. The problem of reconfiguring a VN mapped in an SN to adapt to time-varying demands is another challenging problem. The irrational allocation of a VN wastes resources and causes data fragmentation, whereas inaccurate VN resource demands can result in performance degradation.

VN reconfiguration (VNR) process could be sponsored by the InP or SP. InP-sponsored VNR concentrates on decreasing the VNR request (VNRR) rejection rate, reducing resource fragmentation, and maximising revenue, whereas SP-sponsored reconfiguration focuses on releasing or procuring additional resources to adapt to a changed SLO. The pattern of reconfiguration can be classified as reactive or proactive. A reactive reconfiguration is triggered by events, such as a node failure or SLO violation. A proactive reconfiguration is executed periodically in anticipation of possible future failures. The literature primarily focuses on reactive InP-sponsored scenarios [14,15] with known specific reconfiguration resource requirements. To the best of our knowledge, SP-sponsored VNR issues have not been addressed. The accurate definition of VNRR such that the SP-sponsored reconfiguration effectively ensures compliance with a changed SLO definition, without excess provisioning, remains unsolved. In this paper, we propose a proactive SP-sponsored VNR approach to tackle this problem effectively and efficiently.

In our approach, we define the virtual nodes and virtual links that need to be reconfigured in a VN as reconfiguration points (RPs). VNR is designed as a two-step process. First, we find RPs and generate VNRRs for the target VN. An SLO-sensitive RP-localisation VNRR generation mechanism is designed to adapt to dynamically changing SP demands. In the second step, the VN is reconfigured according to the VNRR. We use a Bayesian network (BN) to model the uncertainty in an SLO and monitor performance metrics. Probabilistic inference on the BN determines the RPs and generates VNRRs. After the VNRRs have been generated, the VN is reconfigured. To increase the InP’s revenue and reduce the fragmentation caused by reallocating additional resources to the VN, we propose a heuristic algorithm with virtual node and virtual link migration and swapping strategies. We evaluate the performance of our heuristic by conducting extensive experiments in a high-fidelity emulation environment. The effectiveness and efficiency of the proposed method are confirmed by comparison with existing solutions.

The contributions of this work are as follows:
                           
                              (1)
                              We propose an automatic probabilistic inference technique, that largely reduces the difficulty of RP localisation and VNRR generation for a given SLO and VN.

The proposed SP-sponsored proactive approach can detect under-provisioned virtual nodes and virtual links, thus reducing the SLO violation risks.

We design an RP localisation strategy that switches among performance-priority, cost-priority, and balanced modes. The strategy enables SPs to flexibly elaborate the reconfiguration of objectives.

We improve existing VNR algorithms by adding virtual node and virtual link swapping mechanisms to the virtual node and virtual link migration phase. This hybrid migration and swapping strategy reduces resource fragmentation and increases revenue for the InP.

The remainder of this paper is organised as follows: Section 1.2 reviews related work on VNR. Section 2 formulates the problem as a mathematical model by defining a VN stress state, reconfiguration constraint, and VNRR. In this section, we introduce our proposed BN modelling and probabilistic inference-based RP localisation mechanism, and describe our VNR algorithm and migration and swapping strategies. The results of evaluation experiments are presented in Sections 3 and 4 concludes the paper.

@&#RELATED WORK@&#

Dynamically reconfiguring a VN that is already embedded in an SN is distinct from processes that only handle static VN-embedding. Reference [16] considers VN reconfiguration as a special VN-embedding process which is attempting to reconfigure the mapped VNRs in order to reorganize the resource allocation and optimise the utilisation of SN resources. There are few studies that have addressed this issue.

The existing literature models VN reconfiguration as a mathematical optimisation problem. The authors of [17,18] modelled the reconfiguration of an embedded VN using mixed-integer linear programming (MILP), and relatively optimal solutions were determined by solving the resulting optimisation problem. However, finding the best VN reconfiguration solution is considered to be NP-hard [14]. There are a number of works that address this issue in a more efficient manner.

To avoid the NP-hard problem, most works have focused on heuristic approaches with the objective of minimising the VN reconfiguration cost, reducing resource fragmentation, or increasing the InP’s revenue [7,17–21]. The authors in [7] employ a greedy node mapping algorithm with node remapping capability. The motivation of the algorithm is to map the virtual nodes to the substrate nodes with the maximum substrate resources, thus minimising the use of resources at bottlenecked nodes and links. However, this only considers the reconfiguration of virtual links, and does not consider the migration of virtual nodes. Such a strategy limits the algorithm’s efficiency and flexibility. To overcome this limitation and improve the efficiency of resource reallocation to VNs, [20] proposed a simulated annealing algorithm that reconfigures the VNs via node and link migrations and re-optimises the allocation of resources to VNs such that the load is balanced across the substrate network. Simulation results show that the proposed reconfiguration algorithm achieved a significant improvement in the acceptance ratio of VN requests.

Most of the existing literature on this topic neglects the possible service disruption during reconfiguration. The authors of [18] studied this problem by taking into account the cost incurred by the disrupted services. The service disruption-aware VN reconfiguration problem was formulated in terms of integer linear programming, and a cost-sensitive heuristic algorithm was developed. To further reduce the cost of reconfiguration, an algorithm that prevents the reconfiguration of the entire VN request and reduces the rejection rate has been presented [19]. This employs a high-utilisation virtual node selection algorithm. The algorithm takes the maximum utilisation within a given period of time as the key metric for selecting virtual nodes, but ignores virtual link stress and the virtual node resource release reconfiguration process. A reactive algorithm that reacts to any rejection of new VN requests was proposed in [21]. The algorithm is triggered by the VN-embedding rejection event, and reconfigures currently mapped networks so that new requests can be embedded. However, reconfiguring runtime VNs in a stochastic reactive manner is risky and costly.

To minimise the effects of congestion in an SN, a mechanism for assigning weights to substrate nodes and substrate links based on their residual capacities and importance in the substrate topology has been reported [22]. A two-stage optimisation process achieves better load balancing and ameliorates the acceptance ratio by detecting the virtual nodes and virtual links that caused a VN request to be rejected, and then relocating/reassigning them to less-critical regions of the SN. A scaling factor (SF) metric was defined to leverage the likelihood of locating the substrate node most likely to become a bottleneck. The SF is a combination of two weight factors, the critical index (CI) and popularity index (PI). The mechanism migrates the virtual nodes and virtual links of VN requests that are of lower priority than the rejected request. However, for an InP provisioning SN resources by means of a self-service multi-tenant IaaS pattern, it is difficult to prioritise the VN requests, and the resource fragmentation effect caused by dynamic changes to VN demands was not considered. To tackle the problem of resource fragmentation while improving the rejection rate, [23] developed a reactive VN request rejection algorithm. The algorithm is reactive because it is only triggered when a VN request is rejected. The algorithm sorts mapped virtual nodes according to their suitability for migration, and then migrates the most suitable virtual node and its attached virtual links to another substrate node. The VN request is then mapped again. If the network cannot be mapped, the next iteration of the algorithm migrates the following virtual node, and the process is repeated until the VN request is mapped, up to a predefined number of iterations. The given performance results show a significant increase in mapped VN requests after VNR is applied. To enhance the InP’s revenue and the utilisation of substrate resources, a VN reconfiguration approach capable of accommodating changes to SP demands was proposed in [24]. The proposed approach takes advantage of a virtual node migration technique to reconfigure the resource allocation strategy of a VN already embedded in an SN. To minimise the cost of reconfiguration and improve the InP’s revenue, a genetic meta-heuristic based VNR algorithm, named VNR-GA, has been designed. VNR-GA is capable of calculating the optimal reconfiguration solution for the SP’s demands and minimising the reconfiguration cost using crossover and mutation mechanisms.

Unlike the approaches discussed above, the reconfiguration method proposed in [25] adapts to traffic changes by constructing a VN in which congestion caused by traffic changes can be mitigated by adding a small number of optical paths. It is worth noting that this method refers to a network topology constructed over an optical layer path, and is only applicable to WDM optical networks.

Most recent works propose VN reconfiguration solutions with the objective of optimising metrics such as the cost of reconfiguration, InP revenue, or resource fragmentation ratio according to the specific predefined VNRR. To our knowledge, no previous work has considered the SLO-aware VNRR generating problem and the effectiveness of reconfiguration on a high-level SLO. Furthermore, there is room for improvement in terms of resource fragmentation and revenue by adding a swapping strategy to existing heuristic VN reconfiguration algorithms.

In this paper, we propose a BN-based probabilistic inference approach to tackle the problem of automatically generating VNRR in an SLO-sensitive manner. The proposed approach can detect many under-provisioned virtual nodes and virtual links, thus reducing the SLO violation risks and the difficulty of RP localisation and VNRR generation. Furthermore, to reduce fragmentation and maximise the InP’s revenue when the migration strategy fails, we propose a heuristic algorithm (named VNRRProc) that incorporates virtual node and virtual link migration and swapping strategies. Our method improves existing VNR algorithms by adding virtual node and virtual link swapping mechanisms to the virtual node and virtual link migration phase. This hybrid migration and swapping strategy reduces resource fragmentation and increases the revenue of the InP.

The problem scenario is depicted in Fig. 1
                        . The mapping relations among the SN, VN, and services are illustrated in terms of an overlay structure, in which services are instantiated by deploying a service template through an IaaS platform. In this process, the required VN is created by sending a VN request to the InP. VNRRs are used by an SP to reconfigure already-mapped VNs.

Services deployed to customers by SPs are constrained by predefined SLOs, such as the request response time (RRT) or number of concurrent requests (CR). The InP provisions resources to the SP in the form of a VN. Numbers separated by forward slashes in a physical node and link represent the number of available/total resources. Numbers in virtual nodes and virtual links indicate resource demand. The numerical values adjacent to the substrate nodes and substrate links represent the central processing unit (CPU) and bandwidth constraints of those nodes and links, respectively.

We consider services described in service template i as a set Si
                           
                           ={s
                           1,
                           s
                           2,...,
                           sk
                           }, with the SLO metrics of 
                              
                                 
                                    
                                       s
                                    
                                    
                                       k
                                    
                                 
                                 ∈
                                 
                                    
                                       S
                                    
                                    
                                       i
                                    
                                 
                              
                            denoted as So
                           
                           ={o
                           1,
                           o
                           2,...,
                           op
                           }. Provided all sk
                           
                           ∊
                           Si
                            have the same SLO definition, an instantiation of SLO metrics can be described as the |Si
                           |×|So
                           | matrix 
                              
                                 
                                    
                                       O
                                    
                                    
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                           :
                              
                                 (1)
                                 
                                    
                                       
                                          O
                                       
                                       
                                          
                                             
                                                S
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    =
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            1
                                                            ,
                                                            1
                                                         
                                                      
                                                      ,
                                                      
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            1
                                                            ,
                                                            2
                                                         
                                                      
                                                      ,
                                                      
                                                      .
                                                      .
                                                      .
                                                      ,
                                                      
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            1
                                                            ,
                                                            p
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            2
                                                            ,
                                                            1
                                                         
                                                      
                                                      ,
                                                      
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            2
                                                            ,
                                                            2
                                                         
                                                      
                                                      ,
                                                      
                                                      .
                                                      .
                                                      .
                                                      ,
                                                      
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            2
                                                            ,
                                                            p
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      .
                                                      .
                                                      .
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            k
                                                            ,
                                                            1
                                                         
                                                      
                                                      ,
                                                      
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            k
                                                            ,
                                                            2
                                                         
                                                      
                                                      ,
                                                      
                                                      .
                                                      .
                                                      .
                                                      ,
                                                      
                                                      
                                                         
                                                            o
                                                         
                                                         
                                                            k
                                                            ,
                                                            p
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

Considering the example presented in Fig. 1, the services in Service Template 1 can be formulated as S
                           1
                           ={svc1,
                           svc2,
                           svc3,
                           svc4}, with the SLO metrics set of svci in S
                           1 being So
                           
                           ={RRT,
                           CR}. The instantiation of these SLOs is
                              
                                 
                                    
                                       
                                          O
                                       
                                       
                                          
                                             
                                                S
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                    =
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      90
                                                      ,
                                                      
                                                      100
                                                   
                                                
                                                
                                                   
                                                      120
                                                      ,
                                                      
                                                      500
                                                   
                                                
                                                
                                                   
                                                      200
                                                      ,
                                                      
                                                      750
                                                   
                                                
                                                
                                                   
                                                      200
                                                      ,
                                                      
                                                      300
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

A VN can be considered as a weighted undirected graph Gv
                           
                           =(Nv
                           ,
                           Ev
                           ,
                           Rv
                           
                           ,
                           
                              N
                           ,
                           Rv
                           
                           ,
                           
                              E
                           ), where Nv
                            and Ev
                            are the sets of virtual nodes and virtual links, respectively. Rv
                           
                           ,
                           
                              N
                            and Rv
                           
                           ,
                           
                              E
                            are the resource requirement sets of Nv
                            and Ev
                           , respectively.

An SN can also be modelled as a weighted undirected graph Gs
                           
                           =(Ns
                           ,
                           Es
                           ,
                           Rs
                           
                           ,
                           
                              N
                           ,
                           Rs
                           
                           ,
                           
                              E
                           ), where Ns
                            and Es
                            are the sets of substrate nodes and substrate links, respectively. Rs
                           
                           ,
                           
                              N
                            and Rs
                           
                           ,
                           
                              E
                            are the resource capacity sets of Ns
                            and Es
                           , respectively.

Given an existing VN Gv
                           
                           =(Nv
                           ,
                           Ev
                           ,
                           Rv
                           
                           ,
                           
                              N
                           ,
                           Rv
                           
                           ,
                           
                              E
                           ), the VNRR of Gv
                            that triggers one reconfiguration is 
                              
                                 VNRR
                                 (
                                 
                                    
                                       G
                                    
                                    
                                       v
                                    
                                 
                                 )
                                 =
                                 (
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       
                                          
                                             E
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                    
                                 
                                 ,
                                 
                                 Δ
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                                 ,
                                 
                                 Δ
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                                 )
                              
                           , where 
                              
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                    
                                 
                                 ⊆
                                 
                                    
                                       N
                                    
                                    
                                       v
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             E
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                    
                                 
                                 ⊆
                                 
                                    
                                       E
                                    
                                    
                                       v
                                    
                                 
                              
                           , and 
                              
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                    
                                 
                              
                           , 
                              
                                 
                                    
                                       
                                          
                                             E
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                    
                                 
                              
                            are the sets of virtual nodes and virtual links, respectively, that are recognised as RPs. The reconfiguration constraint sets of 
                              
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             E
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                    
                                 
                              
                            are denoted as 
                              
                                 Δ
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                              
                            and 
                              
                                 Δ
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                              
                           , respectively.

The objective of VNR is to determine the optimal reconfiguration policy for a given instantiation of SLO definition 
                              
                                 
                                    
                                       O
                                    
                                    
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                            for S
                           1. To achieve this objective, we need metrics to indicate the stress state of virtual nodes and virtual links in a VN, and the number of resources that will be reallocated for RPs to be processed in the VNR algorithm.

The resource utilisation rate (percentage of resources utilised) is a relatively precise metric if virtual nodes and virtual links are in a stress state, i.e. are over- or under-provisioned. We give the following definitions.
                              Definition 1
                              Stress state


                              We define the state of virtual nodes and virtual links r in period Δt to be:
                                    
                                       (2)
                                       
                                          ϕ
                                          (
                                          
                                             
                                                x
                                             
                                             
                                                r
                                                ,
                                                Δ
                                                t
                                             
                                          
                                          )
                                          =
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            1
                                                            ,
                                                         
                                                         
                                                            if
                                                            
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  r
                                                                  ,
                                                                  Δ
                                                                  t
                                                               
                                                            
                                                            >
                                                            
                                                               
                                                                  σ
                                                               
                                                               
                                                                  u
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            0
                                                            ,
                                                         
                                                         
                                                            if
                                                            
                                                            
                                                               
                                                                  σ
                                                               
                                                               
                                                                  l
                                                               
                                                            
                                                            <
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  r
                                                                  ,
                                                                  Δ
                                                                  t
                                                               
                                                            
                                                            ⩽
                                                            
                                                               
                                                                  σ
                                                               
                                                               
                                                                  u
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            -
                                                            1
                                                            ,
                                                         
                                                         
                                                            if
                                                            
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  r
                                                                  ,
                                                                  Δ
                                                                  t
                                                               
                                                            
                                                            ⩽
                                                            
                                                               
                                                                  σ
                                                               
                                                               
                                                                  l
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 for 
                                    
                                       0
                                       ⩽
                                       
                                          
                                             σ
                                          
                                          
                                             l
                                          
                                       
                                       ,
                                       
                                          
                                             σ
                                          
                                          
                                             u
                                          
                                       
                                       ,
                                       
                                          
                                             x
                                          
                                          
                                             r
                                             ,
                                             Δ
                                             t
                                          
                                       
                                       ⩽
                                       1
                                    
                                 , where xr
                                 
                                 ,Δ
                                 
                                    t
                                  is r’s average resource utilisation rate in Δt; σu
                                  and σl
                                  are the upper and lower bounds of the virtual resource (VR) utilisation rate, respectively.

The resource difference (RD) metric measures the variable resources that need to be increased or released for a VN’s RPs in the reconfiguration process.

Let r be an RP of an embedded VN using resource R(r) at time t
                                 1, and let xr
                                 
                                 ,Δ
                                 
                                    t
                                  be the sampled average resource utilisation rate of r. The RD metric ΔR(r) is defined as r’s degree of resource reallocation at time t
                                 2:
                                    
                                       (3)
                                       
                                          Δ
                                          R
                                          (
                                          r
                                          )
                                          =
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            (
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  r
                                                                  ,
                                                                  Δ
                                                                  t
                                                               
                                                            
                                                            -
                                                            
                                                               
                                                                  σ
                                                               
                                                               
                                                                  u
                                                               
                                                            
                                                            +
                                                            μ
                                                            )
                                                            R
                                                            (
                                                            r
                                                            )
                                                            ,
                                                         
                                                         
                                                            if
                                                            
                                                            ϕ
                                                            (
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  r
                                                                  ,
                                                                  Δ
                                                                  t
                                                               
                                                            
                                                            )
                                                            =
                                                            1
                                                         
                                                      
                                                      
                                                         
                                                            R
                                                            (
                                                            r
                                                            )
                                                            ,
                                                         
                                                         
                                                            if
                                                            
                                                            ϕ
                                                            (
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  r
                                                                  ,
                                                                  Δ
                                                                  t
                                                               
                                                            
                                                            )
                                                            =
                                                            0
                                                         
                                                      
                                                      
                                                         
                                                            (
                                                            
                                                               
                                                                  σ
                                                               
                                                               
                                                                  l
                                                               
                                                            
                                                            -
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  r
                                                                  ,
                                                                  Δ
                                                                  t
                                                               
                                                            
                                                            -
                                                            μ
                                                            )
                                                            R
                                                            (
                                                            r
                                                            )
                                                            ,
                                                         
                                                         
                                                            if
                                                            
                                                            ϕ
                                                            (
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  r
                                                                  ,
                                                                  Δ
                                                                  t
                                                               
                                                            
                                                            )
                                                            =
                                                            -
                                                            1
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 for 
                                    
                                       0
                                       ⩽
                                       
                                          
                                             σ
                                          
                                          
                                             l
                                          
                                       
                                       ,
                                       
                                          
                                             σ
                                          
                                          
                                             u
                                          
                                       
                                       ,
                                       μ
                                       ,
                                       
                                          
                                             x
                                          
                                          
                                             r
                                             ,
                                             Δ
                                             t
                                          
                                       
                                       ⩽
                                       1
                                       ,
                                       Δ
                                       t
                                       =
                                       
                                          
                                             t
                                          
                                          
                                             2
                                             -
                                          
                                       
                                       
                                          
                                             t
                                          
                                          
                                             1
                                          
                                       
                                    
                                 , where μ is a predefined constant that prevents ineffective reconfiguration caused by insignificant over- or under-provision of virtual nodes and virtual links.

Consider the service template Si
                           , VN Gv
                            being mapped by Si
                           , SN Gs
                           , and the history dataset D that records the stress state ϕ(xr
                           
                           ,Δ
                           
                              t
                           ) of all r
                           ∊
                           Nv
                           
                           ∪
                           Ev
                            and the SLO metrics regarding the value of services. The problem of SLO-sensitive VNR can be formulated as the problem of locating RPs and their relevant ΔR(r) according to D and the target SLO 
                              
                                 
                                    
                                       O
                                    
                                    
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                           , and then generating VNRR(Gv
                           ) to reconfigure Gv
                            accordingly.

The key notation used in this paper is given in Table 1
                           .

The complexity and uncertainty of the network environment makes it difficult to localise RPs in a VN when adapting to SLOs. VN RP localisation techniques are similar to those of fault localisation [26–28], the problem of detecting and isolating the root causes of faults. To simplify the fault localisation problem, most techniques used in complex communication networks consider the availability state of network nodes and links to be Boolean values [26]. To handle the RP localisation problem in a similar manner, we must transform it to the problem of finding the set of virtual node and virtual link stress state values that best explains the set of target SLOs.

In general, finding the optimal fault localisation solution by exact calculation is known to be NP-hard [26], with the calculation complexity growing exponentially with the network scale. Moreover, the root causes of an SLO violation might be located in a different protocol layer or the result of an unexpected network device malfunction, which is frequently not visible to higher service layers and changes dynamically. Thus, we focus on the most probable explanation (MPE) for the given target SLO and runtime dataset using heuristic probabilistic inference. In this section, we first describe the process of learning from a dataset, then present the algorithm for finding the MPE using inference and the given evidence. This enables the VN RPs to be located, and VNRRs to be generated.

The first step in finding the RPs is to model the cause-effect relation between service QoS metrics and VN stress states using a BN [29]. BNs are an effective and widely used tool for modelling cause-effect relationships that are difficult to formalise as definitive mathematical expressions. Before we discuss training a BN from a dataset, we state some essential definitions.
                              Definition 3
                              BN


                              A BN organises variables into a directed acyclic graph (DAG), a tuple β
                                 =(X,
                                 L,
                                 P), where X is a set of variables, the nodes of the BN, L is the BN edge set, and P is an associated conditional probability table (CPT). 
                                    
                                       P
                                       =
                                       {
                                       Pr
                                       (
                                       
                                          
                                             x
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             
                                                pa
                                                (
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      1
                                                   
                                                
                                                )
                                             
                                          
                                       
                                       )
                                       ,Pr
                                       (
                                       
                                          
                                             x
                                          
                                          
                                             2
                                          
                                       
                                       
                                          
                                             
                                                pa
                                                (
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      2
                                                   
                                                
                                                )
                                             
                                          
                                       
                                       )
                                       ,
                                       …
                                       ,Pr
                                       (
                                       
                                          
                                             x
                                          
                                          
                                             n
                                          
                                       
                                       
                                          
                                             
                                                pa
                                                (
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      n
                                                   
                                                
                                                )
                                             
                                          
                                       
                                       )
                                       }
                                    
                                 , n
                                 =|X|, in which 
                                    
                                       Pr
                                       (
                                       
                                          
                                             x
                                          
                                          
                                             i
                                          
                                       
                                       
                                          
                                             
                                                pa
                                                (
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      i
                                                   
                                                
                                                )
                                             
                                          
                                       
                                       )
                                    
                                 , xi
                                 
                                 ∊
                                 X, is the CPT of xi
                                  and pa(xi
                                 ) is the parent node set of xi
                                  .

We build a BN through unsupervised learning from the runtime dataset sampled in a time interval Δt. Evidence is defined as a given instantiation of an SLO definition 
                              
                                 
                                    
                                       O
                                    
                                    
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                           . The runtime dataset is a sampled set of the SLO and VN stress state ϕ in the time interval. A sampled dataset of SLO metrics and their stress states is shown in Table 2
                           , in which stress state values of virtual nodes and virtual links ϕ(xr
                           
                           ,Δ
                           
                              t
                           ) are transformed according to the given upper and lower bounds σu
                            and σl
                           , respectively, of the VR utilisation rate. The sampling frequency can range from several seconds to minutes.

The learning goal of the BN is to find β
                           =(X,
                           L,
                           P) in the context of the given dataset, whose columns are X
                           =(S
                           ×
                           so
                           )∪
                           Nv
                           
                           ∪
                           Ev
                           . To prevent the algorithm from taking too long to process a large-scale dataset, we first apply k-means clustering to discretise the continuous SLO metric values oi
                           
                           ,
                           
                              j
                           , as shown in Table 2, into four intervals, thus ensuring that all of the variables in the BN are discrete. Second, the BN β is constrained into a maximum spanning tree (MST)-structured network constrained by 
                              
                                 |
                                 pa
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       i
                                    
                                 
                                 )
                                 |
                                 ⩽
                                 1
                              
                           , which implies that each node in β has at most one parent, determined by the number of parent states times the number of child states. Choosing four intervals for the discretisation process reduces the maximum size of the CPT 
                              
                                 Pr
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       
                                          pa
                                          (
                                          
                                             
                                                x
                                             
                                             
                                                i
                                             
                                          
                                          )
                                       
                                    
                                 
                                 )
                              
                            for a given xi
                            in β to 16. A sample BN structure with a single-parent restriction learned from a VN is shown in Fig. 2
                           . Table 3
                            shows the CPT of node svc4.RRT.

The problem of learning the structure of a BN has been studied extensively [30–32]. Considering the complexity of implementation, we choose a score-based approach. The algorithm addresses learning as a model selection problem involving a scoring function that evaluates how well a structure matches the data, and a search through possible network structures for the highest-scoring BN. This process has proved effective, but poses an NP-hard search problem. A hill-climbing heuristic search is most commonly applied to this problem, such as in the K2, Tabu, genetic search, LAGD HillClimbing, and TAN [33] methods. In this case, we use a local score metric based on the parent K2 structure learning, with an initial naive Bayes option to learn the BN structure. We must then learn the CPT for every BN node. In this paper, we estimate the CPT using the SimpleEstimator algorithm [33], which produces direct estimates of the conditional probabilities using the following equation:
                              
                                 (4)
                                 
                                    Pr
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    k
                                    
                                       
                                          
                                             pa
                                             (
                                             
                                                
                                                   x
                                                
                                                
                                                   i
                                                
                                             
                                             )
                                             =
                                             j
                                          
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          
                                             
                                                N
                                             
                                             
                                                ijk
                                             
                                          
                                          +
                                          
                                             
                                                N
                                             
                                             
                                                ijk
                                             
                                             
                                                ′
                                             
                                          
                                       
                                       
                                          
                                             
                                                N
                                             
                                             
                                                ij
                                             
                                          
                                          +
                                          
                                             
                                                N
                                             
                                             
                                                ij
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                           where Nij
                            denotes the number of records in the given dataset for which pa(xi
                           )=
                           j, Nijk
                            is the number of records in the given dataset for which pa(xi
                           )=
                           j and for which xi
                              
                           =
                           k, and 
                              
                                 
                                    
                                       N
                                    
                                    
                                       ij
                                    
                                    
                                       ′
                                    
                                 
                              
                           , 
                              
                                 
                                    
                                       N
                                    
                                    
                                       ijk
                                    
                                    
                                       ′
                                    
                                 
                              
                            denote count priors that can be set to a default value of 0.5. The sample CPT in Table 3 was calculated using SimpleEstimator, where the continuous value of the SLO metric CR and RRT is transformed into four discrete states, and ‘inf’ denotes infinity. The values in the table cells are 
                              
                                 Pr
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 k
                                 
                                    
                                       
                                          pa
                                          (
                                          
                                             
                                                x
                                             
                                             
                                                i
                                             
                                          
                                          )
                                          =
                                          j
                                       
                                    
                                 
                                 )
                              
                            .

The main task of generating VNRR(Gv
                           ) for VN Gv
                            concerns finding a set of RPs and identifying a reconfiguration constraint ϕ(xr
                           
                           ,Δ
                           
                              t
                           ) for every node and link in this set. Fig. 3
                            shows a sample VNRR generated from a given BN. Probabilistic inference algorithms are commonly used to compute beliefs from a BN in the context of observed evidence. After modelling the cause-effect relation between the SLOs and virtual nodes and virtual links in a VN into β, the problem of RP localisation is abstracted into finding the MPE from β in the context of a given instantiation of the SLO matrix 
                              
                                 
                                    
                                       O
                                    
                                    
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                           . The MPE in a BN [34] is an instantiation of all non-evidence nodes such that no other instantiation has greater probability.
                              Definition 4
                              Evidence and explanation of BN


                              Given x
                                 ={χ
                                 1,
                                 χ
                                 2,...,
                                 χm
                                 } as an evidence variable instantiation set of a BN β
                                 =(X,
                                 E,
                                 P), we define x
                                 ∗
                                 ={χm
                                 
                                 +1,
                                 χm
                                 
                                 +2,...,
                                 χn
                                 } as an explanation for β, where χi
                                  is an instance of Xi
                                 
                                 ⊂
                                 X .

Computing MPE in β is the problem of finding a set of k most probable explanations 
                                    
                                       
                                          
                                             X
                                          
                                          
                                             ∗
                                          
                                       
                                       =
                                       {
                                       
                                          
                                             x
                                          
                                          
                                             1
                                          
                                          
                                             ∗
                                          
                                       
                                       ,
                                       
                                          
                                             x
                                          
                                          
                                             2
                                          
                                          
                                             ∗
                                          
                                       
                                       ,
                                       …
                                       ,
                                       
                                          
                                             x
                                          
                                          
                                             k
                                          
                                          
                                             ∗
                                          
                                       
                                       }
                                    
                                  over all possible explanations x
                                 ∗ on a given instantiation of evidence set x, where 
                                    
                                       Pr
                                       (
                                       
                                          
                                             x
                                          
                                          
                                             j
                                          
                                          
                                             ∗
                                          
                                       
                                       )
                                       =
                                       
                                          
                                             ∏
                                          
                                          
                                             χ
                                             ∈
                                             
                                                
                                                   x
                                                
                                                
                                                   j
                                                
                                                
                                                   ∗
                                                
                                             
                                          
                                       
                                       Pr
                                       (
                                       χ
                                       )
                                    
                                  is equal 
                                    
                                       ∀
                                       
                                          
                                             x
                                          
                                          
                                             j
                                          
                                          
                                             ∗
                                          
                                       
                                       ∈
                                       
                                          
                                             X
                                          
                                          
                                             ∗
                                          
                                       
                                    
                                  and greater than any other explanation in β.

Algorithms for finding MPE include exact methods, such as variable elimination and junction trees, and heuristic techniques, such as the simple stochastic greedy search (SimpleSGS) [35]. The exact calculation of MPE for a BN requires a number of steps that are exponentially complex with respect to the number of BN nodes. The stochastic local search (SLS)[36] approach is highly competitive for solving the MPE problem. In this work, to ensure that the optimum solution can be computed in polynomial time, we design an RP localisation algorithm, RPLoc, using the SimpleSGS MPE algorithm. This heuristic algorithm obtains a good solution to the optimisation problem in minimal time. However, heuristic methods cannot guarantee optimal results. We propose the RPLoc algorithm to determine effective and efficient VNRs for the services bundled in a specific service template.


                           Table 4
                            shows the RPLoc pseudo-code, in which RPs are found in two main phases, an initialisation phase and a local search phase. The first phase initialises x
                           ∗ randomly from (β,
                           x). The algorithm terminates if a high-probability explanation is found, or if the number of iterations exceeds MAX-TRIES. The consequences of SLO violation are serious for performance-sensitive pivotal services; hence, it is necessary to reduce the possibility of SLO violation by lessening the overprovision constraint. However, this is wasteful for other services. Hence, we use the input variable c to indicate a performance-priority, cost-priority, or balanced reconfiguration criterion. We can improve the accuracy of the algorithm by manoeuvring the SLS noise probability pno
                           . Empirically, pno
                            will impact on the runtime of an SLS-based algorithm. This optimisation problem was studied thoroughly in [37], and so we do not discuss it here.

After the VNRRs have been generated by the given SLO target and its VN, we must reconfigure the VN according to the VNRRs at minimum cost. The main problem in this phase is to reconfigure the virtual nodes and virtual links for which there are insufficient local resources to meet the increased demand. Existing approaches handle this problem by migrating virtual nodes and virtual links to other substrate nodes and substrate links when there are insufficient local resources [17]. This is feasible, but the migration strategy only works when there is a substrate node and substrate link with sufficient free resources to support the virtual node and virtual link scale-up. In this study, we tackle this problem by swapping virtual nodes and virtual links with others when the migration strategy fails. Furthermore, an effective VNR algorithm, VNRRProc, is implemented.

Unlike a VN-embedding algorithm, which accepts VN requests only if all the demanded resources must be satisfied, a VNRR can be partially accepted if failed virtual nodes and virtual links must be reconfigured. To measure the effectiveness of the reconfiguration algorithm, we use the VNRR reconfiguration ratio to leverage the demand being met in the VNRRs.
                           Definition 6
                           VNRR reconfiguration ratio


                           Given an SN Gs
                               and an embedded VN Gv
                              
                              =(Nv
                              ,
                              Ev
                              ,
                              Rv
                              
                              ,
                              
                                 N
                              ,
                              Rv
                              
                              ,
                              
                                 E
                              ), where 
                                 
                                    VNRR
                                    (
                                    
                                       
                                          G
                                       
                                       
                                          v
                                       
                                    
                                    )
                                    =
                                    (
                                    
                                       
                                          
                                             
                                                N
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                E
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                    
                                    ,
                                    Δ
                                    
                                       
                                          
                                             
                                                R
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                          ,
                                          N
                                       
                                    
                                    ,
                                    Δ
                                    
                                       
                                          
                                             
                                                R
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                          ,
                                          E
                                       
                                    
                                    )
                                 
                               is Gv
                               ’s VNRR, let 
                                 
                                    
                                       
                                          
                                             
                                                N
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                       
                                          acc
                                       
                                    
                                 
                               and 
                                 
                                    
                                       
                                          
                                             
                                                E
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                       
                                          acc
                                       
                                    
                                 
                               be the requested virtual node and virtual link sets, respectively. The VNRR reconfiguration ratio of VNRR(Gv
                              ) is
                                 
                                    (5)
                                    
                                       δ
                                       (
                                       VNRR
                                       (
                                       
                                          
                                             G
                                          
                                          
                                             v
                                          
                                       
                                       )
                                       )
                                       =
                                       (
                                       |
                                       
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   ^
                                                
                                             
                                          
                                          
                                             v
                                          
                                          
                                             acc
                                          
                                       
                                       |
                                       +
                                       |
                                       
                                          
                                             
                                                
                                                   E
                                                
                                                
                                                   ^
                                                
                                             
                                          
                                          
                                             v
                                          
                                          
                                             acc
                                          
                                       
                                       |
                                       )
                                       /
                                       (
                                       |
                                       
                                          
                                             
                                                
                                                   N
                                                
                                                
                                                   ^
                                                
                                             
                                          
                                          
                                             v
                                          
                                       
                                       |
                                       +
                                       |
                                       
                                          
                                             
                                                
                                                   E
                                                
                                                
                                                   ^
                                                
                                             
                                          
                                          
                                             v
                                          
                                       
                                       |
                                       )
                                    
                                 
                              
                           

To implement the reconfiguration algorithm with the migration and swapping strategies, the following constraints must be satisfied.

When the local resources are insufficient, migrating a VN node 
                           
                              
                                 
                                    n
                                 
                                 
                                    v
                                    ,
                                    m
                                 
                              
                              ,
                              
                                 
                                    n
                                 
                                 
                                    v
                                    ,
                                    m
                                 
                              
                              ∈
                              
                                 
                                    
                                       
                                          N
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    v
                                 
                              
                           
                        , to a substrate node ns
                        
                        ,
                        
                           t
                         with more free resources with cost 
                           
                              
                                 
                                    cst
                                 
                                 
                                    mig
                                 
                                 
                                    N
                                 
                              
                              (
                              
                                 
                                    n
                                 
                                 
                                    v
                                    ,
                                    l
                                 
                              
                              )
                           
                        , the constraint is
                           
                              (6)
                              
                                 
                                    
                                       R
                                    
                                    
                                       s
                                       ,
                                       N
                                    
                                    
                                       free
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       s
                                       ,
                                       t
                                    
                                 
                                 )
                                 ⩾
                                 (
                                 Δ
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       v
                                       ,
                                       m
                                    
                                 
                                 )
                                 +
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       v
                                       ,
                                       m
                                    
                                 
                                 )
                                 )
                              
                           
                        
                     

To migrate a VN link ev
                        
                        ,
                        
                           j
                         to 
                           
                              
                                 
                                    e
                                 
                                 
                                    v
                                    ,
                                    j
                                 
                                 
                                    ′
                                 
                              
                           
                        , located at a new substrate path with more free resources, with cost 
                           
                              
                                 
                                    cst
                                 
                                 
                                    mig
                                 
                                 
                                    E
                                 
                              
                              (
                              
                                 
                                    e
                                 
                                 
                                    v
                                    ,
                                    j
                                 
                              
                              )
                           
                        , the constraint is
                           
                              (7)
                              
                                 
                                    
                                       R
                                    
                                    
                                       s
                                       ,
                                       E
                                    
                                    
                                       free
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       s
                                       ,
                                       t
                                    
                                 
                                 )
                                 ⩾
                                 (
                                 Δ
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       v
                                       ,
                                       m
                                    
                                 
                                 )
                                 +
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       v
                                       ,
                                       m
                                    
                                 
                                 )
                                 )
                              
                           
                        
                     

If 
                           
                              
                                 
                                    R
                                 
                                 
                                    s
                                    ,
                                    N
                                 
                                 
                                    free
                                 
                              
                              (
                              
                                 
                                    n
                                 
                                 
                                    s
                                    ,
                                    l
                                 
                              
                              )
                           
                         and 
                           
                              
                                 
                                    R
                                 
                                 
                                    s
                                    ,
                                    N
                                 
                                 
                                    free
                                 
                              
                              (
                              
                                 
                                    n
                                 
                                 
                                    s
                                    ,
                                    t
                                 
                              
                              )
                           
                         are the free resources of nv
                        
                        ,
                        
                           l
                         ’s local substrate node ns
                        
                        ,
                        
                           l
                         and nv
                        
                        ,
                        
                           t
                         ’s local substrate node ns
                        
                        ,
                        
                           t
                        , respectively, then, with the cost of swapping nv
                        
                        ,
                        
                           l
                         with other VN nodes nv
                        
                        ,
                        
                           t
                         being 
                           
                              
                                 
                                    cst
                                 
                                 
                                    swap
                                 
                                 
                                    N
                                 
                              
                              (
                              
                                 
                                    n
                                 
                                 
                                    v
                                    ,
                                    l
                                 
                              
                              )
                           
                        , the constraint is
                           
                              (8)
                              
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       v
                                       ,
                                       t
                                    
                                 
                                 )
                                 +
                                 
                                    
                                       R
                                    
                                    
                                       s
                                       ,
                                       N
                                    
                                    
                                       free
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       s
                                       ,
                                       t
                                    
                                 
                                 )
                                 ⩾
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       v
                                       ,
                                       l
                                    
                                 
                                 )
                                 +
                                 Δ
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       v
                                       ,
                                       l
                                    
                                 
                                 )
                              
                           
                        
                        
                           
                              (9)
                              
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       v
                                       ,
                                       l
                                    
                                 
                                 )
                                 +
                                 
                                    
                                       R
                                    
                                    
                                       s
                                       ,
                                       N
                                    
                                    
                                       free
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       s
                                       ,
                                       l
                                    
                                 
                                 )
                                 ⩾
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       N
                                    
                                 
                                 (
                                 
                                    
                                       n
                                    
                                    
                                       v
                                       ,
                                       t
                                    
                                 
                                 )
                              
                           
                        
                     

If 
                           
                              
                                 
                                    R
                                 
                                 
                                    s
                                    ,
                                    E
                                 
                                 
                                    free
                                 
                              
                              (
                              
                                 
                                    e
                                 
                                 
                                    s
                                    ,
                                    l
                                 
                              
                              )
                           
                         and 
                           
                              
                                 
                                    R
                                 
                                 
                                    s
                                    ,
                                    E
                                 
                                 
                                    free
                                 
                              
                              (
                              
                                 
                                    e
                                 
                                 
                                    s
                                    ,
                                    t
                                 
                              
                              )
                           
                         are the free resources of ev
                        
                        ,
                        
                           l
                         ’s local substrate node es
                        
                        ,
                        
                           l
                         and ev
                        
                        ,
                        
                           t
                         ’s local substrate node es
                        
                        ,
                        
                           t
                        , respectively, then, with the cost of swapping ev
                        
                        ,
                        
                           l
                         with other VN nodes ev
                        
                        ,
                        
                           t
                         being 
                           
                              
                                 
                                    cst
                                 
                                 
                                    swap
                                 
                                 
                                    E
                                 
                              
                              (
                              
                                 
                                    e
                                 
                                 
                                    v
                                    ,
                                    l
                                 
                              
                              )
                           
                        , the constraint is
                           
                              (10)
                              
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       v
                                       ,
                                       t
                                    
                                 
                                 )
                                 +
                                 
                                    
                                       R
                                    
                                    
                                       s
                                       ,
                                       E
                                    
                                    
                                       free
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       s
                                       ,
                                       t
                                    
                                 
                                 )
                                 ⩾
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       v
                                       ,
                                       l
                                    
                                 
                                 )
                                 +
                                 Δ
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       v
                                       ,
                                       l
                                    
                                 
                                 )
                              
                           
                        
                        
                           
                              (11)
                              
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       v
                                       ,
                                       l
                                    
                                 
                                 )
                                 +
                                 
                                    
                                       R
                                    
                                    
                                       s
                                       ,
                                       E
                                    
                                    
                                       free
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       s
                                       ,
                                       l
                                    
                                 
                                 )
                                 ⩾
                                 
                                    
                                       R
                                    
                                    
                                       v
                                       ,
                                       E
                                    
                                 
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       v
                                       ,
                                       t
                                    
                                 
                                 )
                              
                           
                        
                        
                           Definition 7
                           VNRR reconfiguration cost


                           For VNRR(Gv
                              ), letting 
                                 
                                    
                                       
                                          
                                             
                                                N
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                       
                                          mig
                                       
                                    
                                 
                               and 
                                 
                                    
                                       
                                          
                                             
                                                N
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                       
                                          swap
                                       
                                    
                                 
                               be the VN node set to be migrated and swapped, and letting 
                                 
                                    
                                       
                                          
                                             
                                                E
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                       
                                          mig
                                       
                                    
                                 
                               and 
                                 
                                    
                                       
                                          
                                             
                                                E
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                       
                                          swap
                                       
                                    
                                 
                               be the VN link set to be migrated and swapped, the reconfiguration cost of 
                                 
                                    VNRR
                                    (
                                    
                                       
                                          G
                                       
                                       
                                          v
                                       
                                    
                                    )
                                    =
                                    (
                                    
                                       
                                          
                                             
                                                N
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                E
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                       
                                    
                                    ,
                                    Δ
                                    
                                       
                                          
                                             
                                                R
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                          ,
                                          N
                                       
                                    
                                    ,
                                    Δ
                                    
                                       
                                          
                                             
                                                R
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          v
                                          ,
                                          E
                                       
                                    
                                    )
                                 
                               is defined as
                                 
                                    (12)
                                    
                                       cst
                                       (
                                       VNRR
                                       (
                                       
                                          
                                             G
                                          
                                          
                                             v
                                          
                                       
                                       )
                                       )
                                       =
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                
                                                   
                                                      n
                                                   
                                                   
                                                      v
                                                      ,
                                                      j
                                                   
                                                
                                                ∈
                                                
                                                   
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      v
                                                   
                                                   
                                                      mig
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             cst
                                          
                                          
                                             mig
                                          
                                          
                                             N
                                          
                                       
                                       (
                                       
                                          
                                             n
                                          
                                          
                                             v
                                             ,
                                             j
                                          
                                       
                                       )
                                       +
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                
                                                   
                                                      e
                                                   
                                                   
                                                      v
                                                      ,
                                                      j
                                                   
                                                
                                                ∈
                                                
                                                   
                                                      
                                                         
                                                            E
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      v
                                                   
                                                   
                                                      mig
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             cst
                                          
                                          
                                             mig
                                          
                                          
                                             E
                                          
                                       
                                       (
                                       
                                          
                                             e
                                          
                                          
                                             v
                                             ,
                                             j
                                          
                                       
                                       )
                                       +
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                
                                                   
                                                      n
                                                   
                                                   
                                                      v
                                                      ,
                                                      l
                                                   
                                                
                                                ∈
                                                
                                                   
                                                      
                                                         
                                                            N
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      v
                                                   
                                                   
                                                      swap
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             cst
                                          
                                          
                                             swap
                                          
                                          
                                             N
                                          
                                       
                                       (
                                       
                                          
                                             n
                                          
                                          
                                             v
                                             ,
                                             l
                                          
                                       
                                       )
                                       +
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                
                                                   
                                                      e
                                                   
                                                   
                                                      v
                                                      ,
                                                      l
                                                   
                                                
                                                ∈
                                                
                                                   
                                                      
                                                         
                                                            E
                                                         
                                                         
                                                            ^
                                                         
                                                      
                                                   
                                                   
                                                      v
                                                   
                                                   
                                                      swap
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             cst
                                          
                                          
                                             swap
                                          
                                          
                                             E
                                          
                                       
                                       (
                                       
                                          
                                             e
                                          
                                          
                                             v
                                             ,
                                             l
                                          
                                       
                                       )
                                    
                                 
                              
                           

According to this definition, the objective of the VNRRProc algorithm is to maximise δ(VNRR(Gv
                              )) and minimise cst(VNRR(Gv
                              )) while complying with constraints (6)–(12). Fig. 4
                               describes VNRRProc’s reconfiguration process on an example VN according to a given VNRR. The red and green arrows adjacent to virtual nodes and virtual links indicate the direction of resource scaling. Actions executed on virtual nodes and virtual links are also marked.


                        Table 5
                         describes the VNRRProc algorithm in detail. Because the problem of finding an optimal reconfiguration solution is NP-hard, it is impossible to solve large-scale reconfiguration tasks using exact algorithms in a reasonable time. Hence, we find a locally optimal migration and swapping solution using a heuristic approach. Initially, we use the VN resource release algorithm proposed in [17] to release redundant resources. Similar to VN-embedding, VNR deals with the reconfiguration of VRs in both nodes and links, and the reconfiguration process includes scaling resources up/down locally, migrating virtual nodes and virtual links to other locations, and swapping virtual nodes and virtual links with others located on different substrate nodes and substrate links if migration fails. Considering that VNR can cause service disruption, we restrict the swapping target to virtual nodes and virtual links within the VN that is being reconfigured.

@&#RESULTS AND DISCUSSION@&#

In this section, we first validate and evaluate the effectiveness of the proposed mechanism on a real service system deployed in a high-fidelity VN runtime emulation environment. The comparative efficiency of VNRRProc and an existing reconfiguration algorithm is examined using a simulation.

We consider a network performance-sensitive application called the vehicle assistance service platform, which is deployed by an SP. This service system is composed of twelve distributed service nodes interconnected by multiple networks. The high-fidelity VN runtime emulation tool Mininet [37] is used as the target VN environment provided by the InP. Mininet is a container-based emulation tool for creating realistic and reproducible networking experiments. Each emulated virtual node is a user-level process, and each VN created with Open vSwitch [38] is attached by a virtual interface of the virtual nodes. The score-based BN structure learning and MPE algorithms are realised using the WEKA [33] machine learning algorithm library; network embedding and reconfiguration algorithms are implemented in the ALEVIN [39] VN-embedding evaluation framework. In this evaluation, the BN structure learning algorithm is set to use K2 [33] with local score metrics, a single parent, and the ADTree option off.

In this experiment, services are deployed and started in the Mininet environment, and the service nodes and networks of the system being mapped into virtual nodes and virtual links of a VN are already embedded in an SN of Mininet. We choose RRT and CR as the target SLO metrics. The CPU and bandwidth utilisation rates are monitored as virtual node and virtual link workload metrics, respectively. The workload generation tool Jmeter [40] is used to generate service workloads according to a predefined test script. In this process, the runtime metrics are recorded every 5s. In this test case, the VNR process is triggered every hour, considering the service disruption caused by reconfiguring the VN. In a real scenario, the effects of disruption can be minimised by defining reconfiguration as a scheduled task for service idle time, e.g. at midnight. Data recorded in a one-hour period are discretised according to predefined thresholds and transformed into the RPLoc input dataset. In this scenario, the effectiveness of VNR is reflected in the RRT service metric.

RPLoc was varied to employ the performance-priority (PP), cost-priority (CP), and balanced strategies to test the RRT performance as CR varies from 50 to 800. Our reconfiguration target is to ensure that the RRT SLO is below 140ms at CR=500. From Fig. 5
                           , we can see that the reconfiguration process effectively improved the service performance and reduced the average RRT to below 150ms at CR=500. A comparison of the different settings shows that PP VNR minimises RRT performance with the highest cost. Fig. 6
                            shows the reconfiguration cost comparison of the three settings for three different VNs. As shown in the figure, the reconfiguration cost is reduced significantly by setting c
                           =CP, and the scale of reduction increases with the size of the VN.

The environment for evaluating the reconfiguration algorithms was developed on the ALEVIN VN simulation framework. The SN and VN are generated automatically using the Waxman [41] network topology generation algorithm. The number of SN nodes is set to 50, and the number of virtual nodes in the VN varies at random in the range [4,12]. The per unit node and per unit edge resources must be equal, and the SN resource capacity and VNR demands are generated randomly. Because research on the VNR problem considers only the reconfiguration process on VNs already embedded in an SN, we use the VN-embedding algorithms implemented in ALEVIN to achieve the initial mapping solution for the original VN requests. We implement the proposed algorithm in the ALEVIN framework using Java.

This simulation focuses primarily on quantifying the benefits of reconfiguration with the strategies in the VNR problem. In our evaluation, we compare the VNRRProc algorithm introduced in this work with the DVNMA reconfiguration algorithm [17]. The main objective of DVNMA is to reduce the total reconfiguration cost; hence, three resource-sharing strategies are proposed. For the purpose of comparison, we implement DVNMA with a share-nothing strategy to optimise evaluation metrics such as reconfiguration ratio and node utilisation rate. To examine the effect of the swapping strategy, we evaluate VNRRProc-Migration, which uses only the migration strategy, and VNRRProc-Migration & Swap, which uses both migration and swapping strategies. Table 6
                            describes the evaluated algorithms. After determining the VNRR reconfiguration strategy, we use the evaluation metrics defined in Table 7
                            to measure and compare the effectiveness of each algorithm.


                           Fig. 7
                            shows the average node reconfiguration ratio for various VNRRs. We observe that the swapping strategy does not take effect while there are sufficient resources in the SN, but the average node reconfiguration ratio increases significantly as the number of VNRRs increases. Compared with DVNMA and VNRRProc-Migration, VNRRProc-Migration & Swap increases the node reconfiguration ratio by an average of 24% and 14.8%, respectively. Despite the significant increase in node reconfiguration ratio, one side effect of the node swapping strategy is the need to reallocate an increasing number of virtual links. We can observe from Fig. 8
                            that the link reconfiguration ratio increases by about 11.7% and 6.2%, lower than for the nodes. As for the total reconfiguration ratio of this set of experiments, VNRRProc-Migration & Swap achieved an average increase of about 18.5% and 9.1%, as shown in Fig. 9
                           .

For InPs, the key metrics for evaluating the effectiveness of VN-embedding and reconfiguration algorithms are the substrate node and substrate link resource utilisation rate and revenue. Figs. 10 and 11
                           
                            show the SN node and link utilisation rate curves as the number of VNRRs increases. We can see that the swapping strategy has a positive effect on substrate node and link utilisation rate, as the increase in VNRR SN’s substrate node and link utilisation rate is greatest for VNRRProc-Migration & Swap. We consider the InP revenue gain to be the total resources provided in the reconfiguration process. We can see from Fig. 12
                            that VNRRProc-Migration achieves an average revenue increase of about 11.6% over DVNMA. Using VNRRProc-Migration & Swap, the average revenue increases a further 7.1%. We can conclude from this figure that VNRRProc-Migration & Swap is an effective means of reducing resource fragmentation and increasing revenue for InPs.

@&#CONCLUSIONS@&#

In this work, we proposed an SLO-sensitive VNR mechanism, and implemented a heuristic VNR algorithm using virtual node migration and swapping strategies. In particular, we designed an effective BN model and probabilistic inference-based RP localisation technique for the automatic generation of VNRRs.

To demonstrate the effectiveness of this concept, we designed and implemented the proposed algorithms by extending the VN management component of cloudstack [9]. These results were obtained in a high-fidelity emulation environment that was built by deploying the network performance-sensitive vehicle assistance service platform on Mininet [37] through cloudstack. Some usage configurations and experimental results were presented in Section 3. To evaluate the efficiency of our approach, we tested the mechanism on services deployed in a high-fidelity VN emulation environment, and compared our VNR algorithm with existing approaches.

The experimental results show that our approach is effective and beneficial for both SPs and InPs. However, there is still room for improvement in terms of the accuracy of SLO-sensitive RP localisation. In future work, we will research this problem by implementing multiple probabilistic inference algorithms and compare the accuracy of RP generation in VNs.

@&#ACKNOWLEDGMENTS@&#

This work was supported by the China National Key Technology R&D Program (Grant No. 2011BAK02B02-01) and the High-Tech 863 Program (No. 2012AA111902). We wish to thank the editors and reviewers for having helped us to improve our work with their precious comments and advices.

@&#REFERENCES@&#

