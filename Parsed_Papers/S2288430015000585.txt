@&#MAIN-TITLE@&#Adaptive location of repaired blade for multi-axis milling

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A mathematical model is established to describe the localization problem.


                        
                        
                           
                           Detailed solution steps are given to solve the problem.


                        
                        
                           
                           Global location method and cross section location method are introduced.


                        
                        
                           
                           Repaired blade model is built for allowance extraction and tool path generation.


                        
                        
                           
                           Material and cost savings can be achieved by repairing of locally damaged blades.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

NC Machining

Repaired Blade

Adaptive Localization

Model Reconstruction

@&#ABSTRACT@&#


               
               
                  Free-form blades are widely used in different industries, such as aero-engine and steam turbine. Blades that are damaged during service or have production deficiencies are usually replaced with new ones. This leads to the waste of expensive material and is not sustainable. However, material and costs can be saved by repairing of locally damaged blades or blades with localized production deficiencies. The blade needs to be further machined after welding process to reach the aerodynamic performance requirements. This paper outlines an adaptive location approach of repaired blade for model reconstruction and NC machining. Firstly, a mathematical model is established to describe the localization problem under constraints. Secondly, by solving the mathematical model, localization of repaired blade for NC machining can be obtained. Furthermore, a more flexible method based on the proposed mathematical model and the continuity of the deformation process is developed to realize a better localization. Thirdly, by rebuilding the model of the repaired blade and extracting repair error, optimized tool paths for NC machining is generated adaptively for each individual part. Finally, three examples are given to validate the proposed method.
               
            

@&#INTRODUCTION@&#

Free-form surface blades are widely used in different industries, such as aero-engine and steam turbine. Blades used in aero-engine are usually made of costly material such as titanium alloy or superalloy. During the service process, blades may be damaged either by foreign matters or due to overload, in which case the damaged blades should be replaced by new ones. Thanks to the new laser cladding technology, nowadays damaged blades can be immediately repaired for reuse instead of being abandoned. Material and cost savings can thus be achieved by repairing the damaged blades and it leads to the sustainable development.

In order to reuse a damaged blade, the damaged portions are removed away first. Then, laser cladding technology is used to repair the blade. After that, the repaired blade should be further machined to satisfy the aerodynamic performance requirements. During the above manufacturing process, one critical task is to machine the cladded blade. After the service, the blade profile is no longer the same as the theoretical one; there also usually exist small bending deformation and distortion. Therefore, one key issue before the machining is to locate the damaged blade with respect to its design model.

Lots of research work has been done in workpiece localization in recent years [1,2]. Li [3] presented a unified geometric theory for localization of three types of workpieces and it can be used for symmetric workpieces and partially machined workpieces. Xiong [4] introduced a CAD model based computer aided setup system based on certain workpiece localization algorithms. Shen [5] proposed an algorithm for the optimal localization of large-scale blanks with free-form surfaces by means of rotation, translational motion of a free-form surface and a projection method, the pre-location and adjustment and the final spatial posture control are realized to assure that the blanks coincide with their theoretical counterparts. While locating the workpiece, the basic issue is to match the measured points with the CAD model and the model-matching algorithm is the key to adaptive location of the workpiece. Besl [6] described a general-purpose, representation-independent method for the accurate and computationally efficient registration of 3-D shapes including free-form curves and surfaces, namely the iterative closest point (ICP) method and it is now widely used in practice. Sharp [7] and Liu [8] improved the computational efficiency and convergence of the ICP method. However, iterative matching accuracy largely depends on the initial iteration transform on the initial estimate and the iterative process improvement. Under the condition of no pre-knowledge about the relationship between the measured data and the model surface, surface-based matching methods aforementioned show some distinct advantages. Recently, Ko [9,10] proposed a novel method for matching 3-D free-form objects, which covers both global and partial matching, and can be applied to automated inspection, copyright protection of NURBS (Non-uniform rational basis spline) models, and object recognition.

After service, the repaired region of the blade is no longer the same as its theoretical CAD model; they cannot be easily matched. A sub-par workpiece location method may result in too large allowance or multiple processes and hence reduction of process efficiency. Furthermore, overcut of the blade may cause the entire blade to be scrapped. Therefore, adaptive location of a repaired blade not only can fulfill the requirements of machining process, but also achieve the purpose of evenly distributing the margin of raw material.

This paper presents a description of the problem in the repairing process and establishes a mathematical location model in Section 2. In Section 3 the location problem is solved with different constraints and the cross-sectional location method is proposed to obtain a more accurate localization. The repaired blade model is then reconstructed for the tool path planning which is adaptive for each individual part. In Section 4, three examples are given to validate the proposed method. Conclusions are given in Section 5.

As shown in 
                     Fig. 1, when a blade is damaged during the service time, it can be repaired with the aid of laser cladding technology. This technology is especially used for blade tip damage owing to its high welding quality in weld joint and small welding deformation. After serving for a certain number of hours the repaired blade is different from undamaged blade, the critical point is to locate the undamaged model to the welding portion.

The goal of pre-location is to locate the measured data to the design model as close as possible. As shown in 
                        Fig. 2, P
                        1, P
                        2 and P
                        3 are three measured points, Q
                        1, Q
                        2 and Q
                        3 are three reference points on the model, and the pre-location problem is to find the location transformation matrix. Two sets of unit vectors are configured based on the six points:
                           
                              (1)
                              
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             P
                                          
                                          
                                             2
                                          
                                       
                                       −
                                       
                                          
                                             P
                                          
                                          
                                             1
                                          
                                       
                                    
                                    
                                       |
                                       
                                          
                                             
                                                P
                                             
                                             
                                                2
                                             
                                          
                                          −
                                          
                                             
                                                P
                                             
                                             
                                                1
                                             
                                          
                                       
                                       |
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       e
                                    
                                    
                                       3
                                    
                                 
                                 =
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                 
                                 ×
                                 
                                    
                                       
                                          
                                             P
                                          
                                          
                                             3
                                          
                                       
                                       −
                                       
                                          
                                             P
                                          
                                          
                                             1
                                          
                                       
                                    
                                    
                                       |
                                       
                                          
                                             
                                                P
                                             
                                             
                                                3
                                             
                                          
                                          −
                                          
                                             
                                                P
                                             
                                             
                                                1
                                             
                                          
                                       
                                       |
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       e
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 
                                    
                                       e
                                    
                                    
                                       3
                                    
                                 
                                 ×
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                 
                              
                           
                        
                        
                           
                              (2)
                              
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             Q
                                          
                                          
                                             2
                                          
                                       
                                       −
                                       
                                          
                                             Q
                                          
                                          
                                             1
                                          
                                       
                                    
                                    
                                       |
                                       
                                          
                                             
                                                Q
                                             
                                             
                                                2
                                             
                                          
                                          −
                                          
                                             
                                                Q
                                             
                                             
                                                1
                                             
                                          
                                       
                                       |
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       e
                                    
                                    
                                       3
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ×
                                 
                                    
                                       
                                          
                                             Q
                                          
                                          
                                             3
                                          
                                       
                                       −
                                       
                                          
                                             Q
                                          
                                          
                                             1
                                          
                                       
                                    
                                    
                                       |
                                       
                                          
                                             
                                                Q
                                             
                                             
                                                3
                                             
                                          
                                          −
                                          
                                             
                                                Q
                                             
                                             
                                                1
                                             
                                          
                                       
                                       |
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       e
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       e
                                    
                                    
                                       3
                                    
                                    
                                       ′
                                    
                                 
                                 ×
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                        
                     

Take P
                        1 and Q
                        1 as the origin, two local coordinate systems can be configured based on unit vectors 
                           {
                           
                              
                                 
                                    e
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    e
                                 
                                 
                                    2
                                 
                              
                              ,
                              
                                 
                                    e
                                 
                                 
                                    3
                                 
                              
                           
                           }
                         and 
                           {
                           
                              
                                 
                                    
                                       e
                                       ′
                                    
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    
                                       e
                                       ′
                                    
                                 
                                 
                                    2
                                 
                              
                              ,
                              
                                 
                                    
                                       e
                                       ′
                                    
                                 
                                 
                                    3
                                 
                              
                           
                           }
                         according to the right-hand rule. Assume that there is a positioning transformation that makes the two local coordinate system coincide; so
                           
                              (3)
                              
                                 R
                                 ⋅
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       e
                                    
                                    
                                       2
                                    
                                 
                                 ,
                                 
                                    
                                       e
                                    
                                    
                                       3
                                    
                                 
                                 )
                                 =
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       e
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       e
                                    
                                    
                                       3
                                    
                                    
                                       ′
                                    
                                 
                                 )
                              
                           
                        
                     

Then the transformation matrix can be expressed as:
                           
                              (4)
                              
                                 R
                                 =
                                 (
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       e
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       e
                                    
                                    
                                       3
                                    
                                    
                                       ′
                                    
                                 
                                 )
                                 ⋅
                                 
                                    
                                       (
                                       
                                          
                                             e
                                          
                                          
                                             1
                                          
                                       
                                       ,
                                       
                                          
                                             e
                                          
                                          
                                             2
                                          
                                       
                                       ,
                                       
                                          
                                             e
                                          
                                          
                                             3
                                          
                                       
                                       )
                                    
                                    
                                       −
                                       1
                                    
                                 
                              
                           
                        
                     

Thus, the location from the measured points to the reference points can be expressed as
                           
                              (5)
                              
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 R
                                 ⋅
                                 
                                    
                                       P
                                    
                                    
                                       i
                                    
                                 
                                 +
                                 t
                                 
                                 i
                                 =
                                 1
                                 ,
                                 2
                                 ,
                                 3
                                 )
                              
                           
                        
                     

Substituting P
                        1 and Q
                        1 into the above formula, the translation vector can be expressed as
                           
                              (6)
                              
                                 t
                                 =
                                 
                                    
                                       Q
                                    
                                    
                                       1
                                    
                                 
                                 −
                                 R
                                 ⋅
                                 
                                    
                                       P
                                    
                                    
                                       1
                                    
                                 
                              
                           
                        
                     

With this pre-location process, the impact of profile difference due to service can be reduced.

As for the repaired blade, the profile is not the same as the original designed model. Then the location objective function is
                           
                              (7)
                              
                                 
                                    
                                       
                                          f
                                          (
                                          x
                                          )
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             N
                                          
                                          
                                             
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      i
                                                   
                                                
                                                2
                                             
                                             (
                                             x
                                             )
                                          
                                       
                                    
                                    
                                       
                                          
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             N
                                          
                                          
                                             
                                                
                                                   (
                                                   (
                                                   (
                                                   R
                                                   (
                                                   x
                                                   )
                                                   ⋅
                                                   p
                                                   r
                                                   e
                                                   T
                                                   r
                                                   a
                                                   n
                                                   (
                                                   
                                                      
                                                         P
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                   +
                                                   t
                                                   (
                                                   x
                                                   )
                                                   )
                                                   −
                                                   
                                                      
                                                         Q
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                   
                                                      
                                                   
                                                   
                                                      
                                                         n
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   −
                                                   δ
                                                   )
                                                
                                                2
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where x stands for the transformation matrix parameters, d
                        
                           i
                        (x) is the distance function, preTran(P
                        
                           i
                        ) is the pre-location procedure, δ is the machining allowance, and n
                        
                           i
                         represents the unit normal vector of Q
                        
                           i
                        . Define the constraints as follows:
                           
                              (8)
                              
                                 x
                                 ∈
                                 D
                                 =
                                 {
                                 x
                                 |
                                 −
                                 μ
                                 ≤
                                 g
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 x
                                 )
                                 )
                                 ≤
                                 ε
                                 ,
                                 
                                 i
                                 =
                                 1
                                 ,
                                 2
                                 ,
                                 ⋯
                                 ,
                                 N
                                 }
                              
                           
                        where ε and μ are the upper deviation and lower deviation respectively. Then the mathematic model for the location problem is:
                           
                              (9)
                              
                                 {
                                 
                                    
                                       
                                          
                                             
                                                min
                                                
                                                f
                                                (
                                                x
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                s
                                                .
                                                
                                                
                                                t
                                                .
                                                
                                                
                                                
                                                
                                                
                                                
                                                x
                                                ∈
                                                D
                                                =
                                                {
                                                x
                                                |
                                                −
                                                μ
                                                ≤
                                                g
                                                (
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                x
                                                )
                                                )
                                                ≤
                                                ε
                                                ,
                                                
                                                i
                                                =
                                                1
                                                ,
                                                2
                                                ,
                                                ⋯
                                                ,
                                                N
                                                }
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

Let z
                        
                           w
                         be the height of direction of the blade, we divide the blade into three parts: blade platform S0, clean region S1 and repaired region S2, as shown in 
                        Fig. 3. Measured points in three different regions are
                           
                              
                                 P
                              
                              
                                 S
                                 0
                              
                           
                           =
                           {
                           
                              
                                 p
                              
                              
                                 1
                              
                              
                                 0
                              
                           
                           ,
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 0
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 p
                              
                              
                                 N
                                 0
                              
                              
                                 0
                              
                           
                           }
                        , 
                           
                              
                                 P
                              
                              
                                 S
                                 1
                              
                           
                           =
                           {
                           
                              
                                 p
                              
                              
                                 1
                              
                              
                                 1
                              
                           
                           ,
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 1
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 p
                              
                              
                                 N
                                 1
                              
                              
                                 1
                              
                           
                           }
                         and 
                           
                              
                                 P
                              
                              
                                 S
                                 2
                              
                           
                           =
                           {
                           
                              
                                 p
                              
                              
                                 1
                              
                              
                                 2
                              
                           
                           ,
                           
                              
                                 p
                              
                              
                                 2
                              
                              
                                 2
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 p
                              
                              
                                 N
                                 2
                              
                              
                                 2
                              
                           
                           }
                         respectively, where N
                        0, N
                        1 and N
                        2 are the numbers of the measured points in the three sets.

Four different location models are defined in this paper based on the basic objective function:

Model 1:
                           
                              (10)
                              
                                 min
                                 
                                 
                                    
                                       f
                                    
                                    
                                       0
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 x
                                 )
                                 =
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    
                                       
                                          
                                             N
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             d
                                          
                                          
                                             i
                                          
                                       
                                       2
                                    
                                    (
                                    x
                                    )
                                 
                                 =
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    
                                       
                                          
                                             N
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ‖
                                          
                                             (
                                             R
                                             (
                                             x
                                             )
                                             ⋅
                                             
                                                
                                                   p
                                                
                                                
                                                   i
                                                
                                             
                                             +
                                             t
                                             (
                                             x
                                             )
                                             )
                                             −
                                             
                                                
                                                   q
                                                
                                                
                                                   i
                                                
                                             
                                          
                                          ‖
                                       
                                       2
                                    
                                 
                              
                           
                        
                     

Model 1 is a rough location process to define the pre-location transform matrix preTran=(Rp, tp) to locate the repaired model to the CAD model as close as possible.

Model 2:
                           
                              (11)
                              
                                 {
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         min
                                                         
                                                         
                                                            
                                                               f
                                                            
                                                            
                                                               2
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         (
                                                         x
                                                         )
                                                         =
                                                         
                                                            ∑
                                                            
                                                               i
                                                               =
                                                               1
                                                            
                                                            
                                                               
                                                                  
                                                                     N
                                                                  
                                                                  
                                                                     1
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  
                                                                     d
                                                                  
                                                                  
                                                                     i
                                                                  
                                                               
                                                               2
                                                            
                                                            (
                                                            x
                                                            )
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                         
                                                         =
                                                         
                                                            ∑
                                                            
                                                               i
                                                               =
                                                               1
                                                            
                                                            
                                                               
                                                                  
                                                                     N
                                                                  
                                                                  
                                                                     1
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  (
                                                                  (
                                                                  (
                                                                  R
                                                                  (
                                                                  x
                                                                  )
                                                                  ⋅
                                                                  p
                                                                  r
                                                                  e
                                                                  T
                                                                  r
                                                                  a
                                                                  n
                                                                  (
                                                                  
                                                                     
                                                                        p
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                     
                                                                        1
                                                                     
                                                                  
                                                                  )
                                                                  +
                                                                  t
                                                                  (
                                                                  x
                                                                  )
                                                                  )
                                                                  −
                                                                  
                                                                     
                                                                        q
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                                  )
                                                                  
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        n
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                                  )
                                                               
                                                               2
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                s
                                                .
                                                
                                                
                                                t
                                                .
                                                
                                                
                                                
                                                
                                                
                                                
                                                x
                                                ∈
                                                
                                                   
                                                      D
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      1
                                                   
                                                
                                                =
                                                {
                                                x
                                                |
                                                −
                                                μ
                                                ≤
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                x
                                                )
                                                ≤
                                                ε
                                                ,
                                                
                                                i
                                                =
                                                1
                                                ,
                                                2
                                                ,
                                                ⋯
                                                ,
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      1
                                                   
                                                
                                                }
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where
                           
                              
                                 
                                    
                                       
                                          [
                                          −
                                          μ
                                          ,
                                          ε
                                          ]
                                          =
                                       
                                    
                                    
                                       
                                          
                                             {
                                             
                                                [
                                                −
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      p
                                                   
                                                
                                                ,
                                                
                                                   
                                                      ε
                                                   
                                                   
                                                      p
                                                   
                                                
                                                ]
                                                ,
                                                [
                                                −
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      s
                                                   
                                                
                                                ,
                                                
                                                   
                                                      ε
                                                   
                                                   
                                                      s
                                                   
                                                
                                                ]
                                                ,
                                                [
                                                −
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      l
                                                   
                                                
                                                ,
                                                
                                                   
                                                      ε
                                                   
                                                   
                                                      l
                                                   
                                                
                                                ]
                                                ,
                                                [
                                                −
                                                
                                                   
                                                      μ
                                                   
                                                   
                                                      t
                                                   
                                                
                                                ,
                                                
                                                   
                                                      ε
                                                   
                                                   
                                                      t
                                                   
                                                
                                                ]
                                             
                                             }
                                          
                                          ,
                                          
                                          i
                                          =
                                          1
                                          ,
                                          2
                                          ,
                                          ⋯
                                          ,
                                          
                                             
                                                N
                                             
                                             
                                                1
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

Divide S1 into four regions: pressure surface S1p, suction surface S1s, leading edge S1l and trailing edge S1t, and define the tolerance: [−μ
                        p, ε
                        p], [−μ
                        s, ε
                        s], [−μ
                        l, ε
                        l], [−μ
                        t, ε
                        t]. Model 2 considers the upper and lower deviation of the four regions. If the location results are out of the tolerance then the repair process cannot proceed.

Model 3:
                           
                              (12)
                              
                                 {
                                 
                                    
                                       
                                          
                                             
                                                min
                                                
                                                f
                                                (
                                                x
                                                )
                                                =
                                                
                                                   
                                                      
                                                         f
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   1
                                                
                                                (
                                                x
                                                )
                                                +
                                                
                                                   
                                                      
                                                         f
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   2
                                                
                                                (
                                                x
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                s
                                                .
                                                
                                                
                                                t
                                                .
                                                
                                                
                                                
                                                
                                                
                                                
                                                x
                                                ∈
                                                
                                                   
                                                      D
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      1
                                                   
                                                
                                                ∩
                                                
                                                   
                                                      D
                                                   
                                                   
                                                      2
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                f
                                             
                                             
                                                2
                                             
                                             
                                                2
                                             
                                          
                                          (
                                          x
                                          )
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      i
                                                   
                                                
                                                2
                                             
                                             (
                                             x
                                             )
                                          
                                          =
                                       
                                    
                                    
                                       
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   (
                                                   (
                                                   (
                                                   R
                                                   (
                                                   x
                                                   )
                                                   ⋅
                                                   p
                                                   r
                                                   e
                                                   T
                                                   r
                                                   a
                                                   n
                                                   (
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   )
                                                   +
                                                   t
                                                   (
                                                   x
                                                   )
                                                   )
                                                   −
                                                   
                                                      
                                                         q
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   )
                                                   
                                                      
                                                   
                                                   
                                                      
                                                         n
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   −
                                                   
                                                      
                                                         δ
                                                      
                                                      
                                                         min
                                                      
                                                   
                                                   )
                                                
                                                2
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                          
                                          
                                          
                                             
                                                D
                                             
                                             
                                                2
                                             
                                             
                                                2
                                             
                                          
                                          =
                                          {
                                          x
                                          |
                                          
                                             
                                                d
                                             
                                             
                                                i
                                             
                                          
                                          (
                                          x
                                          )
                                          ≥
                                          0
                                          ,
                                          
                                          i
                                          =
                                          1
                                          ,
                                          2
                                          ,
                                          ⋯
                                          ,
                                          
                                             
                                                N
                                             
                                             
                                                2
                                             
                                          
                                          }
                                       
                                    
                                 
                              
                           
                        and δ
                        min is the minimum machining allowance. Model 3 takes machining allowance into consideration to decide whether the blade can be repaired or not.

Model 4:
                           
                              (13)
                              
                                 {
                                 
                                    
                                       
                                          
                                             
                                                min
                                                
                                                f
                                                (
                                                x
                                                )
                                                =
                                                
                                                   
                                                      
                                                         f
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   1
                                                
                                                (
                                                x
                                                )
                                                +
                                                
                                                   
                                                      
                                                         f
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   2
                                                
                                                (
                                                x
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                s
                                                .
                                                
                                                
                                                t
                                                .
                                                
                                                
                                                
                                                
                                                
                                                
                                                x
                                                ∈
                                                
                                                   
                                                      D
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      1
                                                   
                                                
                                                ∩
                                                
                                                   
                                                      D
                                                   
                                                   
                                                      4
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where
                           
                              
                                 
                                    
                                       D
                                    
                                    
                                       4
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 {
                                 x
                                 |
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 x
                                 )
                                 ≥
                                 0
                                 
                                 
                                 
                                 a
                                 n
                                 d
                                 −
                                 μ
                                 ≤
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 x
                                 )
                                 −
                                 
                                    1
                                    
                                       
                                          
                                             N
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    
                                       
                                          
                                             N
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          d
                                       
                                       
                                          i
                                       
                                    
                                    (
                                    x
                                    )
                                 
                                 ≤
                                 ε
                                 }
                                 
                                 i
                                 =
                                 1
                                 ,
                                 2
                                 ,
                                 ⋯
                                 ,
                                 
                                    
                                       N
                                    
                                    
                                       2
                                    
                                 
                              
                           
                        Model 4 uses the uniform boundary constraints to get repaired model with uniform machining allowance.

In order to locate the repaired blade for machining, the following steps are proposed:
                           
                              1.
                              Select three points in S1 and do the pre-location process.

Based on the measured points in PS0, solving the location transformation parameters x′.

Take S1 as the location region only, solving the location transformation parameters x′ with Model 1 and define the pre-location transform matrix preTran=(Rp, tp).

Take the tolerance constraints into consideration and solve the location transformation parameters x′ with Model 2. Determine whether x′ is the optimal solution or not. If not, deviation is too large and the location process cannot be completed.

Take the local tolerance and allowance constraints into consideration and solve the location transformation parameters x′ with Model 3. Determine whether x′ is the optimal solution or not with the maximum deviation. If it is, let x⁎=x′ and go to the next step; if not, there is not enough raw material and it cannot be machined.

Take the local tolerance and allowance constraints into consideration and solve the location transformation parameters x′ with Model 4. Determine whether x′ is the optimal solution or not with the maximum deviation. If it is, let x⁎=x′ and return x⁎; if not, return x⁎.

When serving in aero-engines, blades are usually under enormous distorting and bending stress, resulting in gradually deteriorating deformation in their life circles. It is difficult to locate the CAD model completely to the target measurement points only by rigid transformation. To realize a better fit of the CAD model to the repaired blade, a cross-sectional location method based on the mathematical model mentioned above is introduced to transform sectional curves on the CAD model to the repaired region S2.

The main advantage of this method is that the changed position of the blade tip can now be predicted from the clean region deformation due to the continuity of the deformation process. After the same measurement in one fixture for both the undamaged blade and the repaired, a series of key cross-sectional points are extracted in UG under the same coordinates. The measurement points are already very close but still have small deviations due to the deformation on the repaired blade.

Measured points in different cross sections on the CAD model are 
                           
                              
                                 C
                              
                              
                                 0
                              
                           
                           =
                           {
                           
                              
                                 c
                              
                              
                                 1
                              
                              
                                 0
                              
                           
                           ,
                           
                              
                                 c
                              
                              
                                 2
                              
                              
                                 0
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 c
                              
                              
                                 N
                                 0
                              
                              
                                 0
                              
                           
                           }
                        , 
                           
                              
                                 C
                              
                              
                                 1
                              
                           
                           =
                           {
                           
                              
                                 c
                              
                              
                                 1
                              
                              
                                 1
                              
                           
                           ,
                           
                              
                                 c
                              
                              
                                 2
                              
                              
                                 1
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 c
                              
                              
                                 N
                                 1
                              
                              
                                 1
                              
                           
                           }
                        , …
                           
                              
                                 C
                              
                              
                                 k
                              
                           
                           =
                           {
                           
                              
                                 c
                              
                              
                                 1
                              
                              
                                 k
                              
                           
                           ,
                           
                              
                                 c
                              
                              
                                 2
                              
                              
                                 k
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 c
                              
                              
                                 N
                                 k
                              
                              
                                 k
                              
                           
                           }
                        , where N
                        0, N
                        1 … N
                        
                           k
                         are the measured points׳ numbers in each cross section, and k is the cross section number. Respectively, cross sections on the repaired blade are 
                           
                              
                                 U
                              
                              
                                 0
                              
                           
                           =
                           {
                           
                              
                                 u
                              
                              
                                 1
                              
                              
                                 0
                              
                           
                           ,
                           
                              
                                 u
                              
                              
                                 2
                              
                              
                                 0
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 u
                              
                              
                                 H
                                 0
                              
                              
                                 0
                              
                           
                           }
                        , 
                           
                              
                                 U
                              
                              
                                 1
                              
                           
                           =
                           {
                           
                              
                                 u
                              
                              
                                 1
                              
                              
                                 1
                              
                           
                           ,
                           
                              
                                 u
                              
                              
                                 2
                              
                              
                                 1
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 u
                              
                              
                                 H
                                 1
                              
                              
                                 1
                              
                           
                           }
                        , … 
                           
                              
                                 U
                              
                              
                                 m
                              
                           
                           =
                           {
                           
                              
                                 u
                              
                              
                                 1
                              
                              
                                 m
                              
                           
                           ,
                           
                              
                                 u
                              
                              
                                 2
                              
                              
                                 m
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 u
                              
                              
                                 H
                                 m
                              
                              
                                 m
                              
                           
                           }
                        , 
                           
                              
                                 U
                              
                              
                                 m
                                 +
                                 1
                              
                           
                           =
                           {
                           
                              
                                 u
                              
                              
                                 1
                              
                              
                                 m
                                 +
                                 1
                              
                           
                           ,
                           
                              
                                 u
                              
                              
                                 2
                              
                              
                                 m
                                 +
                                 1
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 u
                              
                              
                                 H
                                 m
                                 +
                                 1
                              
                              
                                 m
                                 +
                                 1
                              
                           
                           }
                        , … 
                           
                              
                                 U
                              
                              
                                 k
                              
                           
                           =
                           {
                           
                              
                                 u
                              
                              
                                 1
                              
                              
                                 k
                              
                           
                           ,
                           
                              
                                 u
                              
                              
                                 2
                              
                              
                                 k
                              
                           
                           ,
                           ⋯
                           ,
                           
                              
                                 u
                              
                              
                                 H
                                 k
                              
                              
                                 k
                              
                           
                           }
                        , where m is the cross section number in the clean region S1, and k−m is the cross section number in the repaired region S2. Let z
                        
                           k
                         be the height of the corresponding cross section on the blade.

In order to locate the cross section curve on the CAD model to the cross-sectional points on the repaired blade, the following steps are proposed:
                           
                              1.
                              Choose cross-sectional points set 
                                    
                                       
                                          C
                                       
                                       
                                          0
                                       
                                    
                                  and 
                                    
                                       
                                          U
                                       
                                       
                                          0
                                       
                                    
                                  to solve the location transformation parameters x
                                 0 with Model 1; repeat the process from section 
                                    
                                       
                                          C
                                       
                                       
                                          0
                                       
                                    
                                  to 
                                    
                                       
                                          C
                                       
                                       
                                          m
                                       
                                    
                                 to obtain x
                                 10, x
                                 11, and x
                                 12… x
                                 1m.

Divide S1 into four regions: the pressure surface S1p, the suction surface S1s, the leading edge S1l and the trailing edge S1t; define the tolerance: [−μ
                                 p, ε
                                 p], [−μ
                                 s, ε
                                 s], [−μ
                                 l, ε
                                 l], [−μ
                                 t, ε
                                 t]. Take these tolerance constraints into consideration, choose cross-sectional points 
                                    
                                       
                                          C
                                       
                                       
                                          0
                                       
                                    
                                  and 
                                    
                                       
                                          U
                                       
                                       
                                          0
                                       
                                    
                                  to solve the location transformation parameters x
                                 20 with Model 2; determine whether x
                                 20 is the optimal solution or not. If not, the deviation is too large and the location process cannot be completed. If it is, repeat the process and get x
                                 20, x
                                 21, x
                                 22, …x
                                 2m
                                 .

Take the fitting function 
                                    f
                                    (
                                    
                                       
                                          z
                                       
                                       
                                          k
                                       
                                    
                                    )
                                    =
                                    x
                                  to fit the relation between the height z
                                 
                                    k
                                  and the transformation parameters x. Generally fitting of polynomial is used to fit z
                                 
                                    k
                                  with the transformation matrix parameters included in x. Apply the function for the rest cross-sections׳ height to calculate parameters x and get x
                                 
                                    m+1 to x
                                 k; transform 
                                    
                                       
                                          C
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                    =
                                    {
                                    
                                       
                                          c
                                       
                                       
                                          1
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                    ,
                                    
                                       
                                          c
                                       
                                       
                                          2
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                    ,
                                    ⋯
                                    ,
                                    
                                       
                                          c
                                       
                                       
                                          N
                                          m
                                          +
                                          1
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                    }
                                  … 
                                    
                                       
                                          C
                                       
                                       
                                          k
                                       
                                    
                                    =
                                    {
                                    
                                       
                                          c
                                       
                                       
                                          1
                                       
                                       
                                          k
                                       
                                    
                                    ,
                                    
                                       
                                          c
                                       
                                       
                                          2
                                       
                                       
                                          k
                                       
                                    
                                    ,
                                    ⋯
                                    ,
                                    
                                       
                                          c
                                       
                                       
                                          N
                                          k
                                       
                                       
                                          k
                                       
                                    
                                    }
                                  to the repaired blade tip with their corresponding parameter x. Form new cross sections
                                    
                                       
                                          L
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                    =
                                    {
                                    
                                       
                                          l
                                       
                                       
                                          1
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                    ,
                                    
                                       
                                          l
                                       
                                       
                                          2
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                    ,
                                    ⋯
                                    ,
                                    
                                       
                                          l
                                       
                                       
                                          N
                                          m
                                          +
                                          1
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                    }
                                 , 
                                    
                                       
                                          L
                                       
                                       
                                          m
                                          +
                                          2
                                       
                                    
                                    =
                                    {
                                    
                                       
                                          l
                                       
                                       
                                          1
                                       
                                       
                                          m
                                          +
                                          2
                                       
                                    
                                    ,
                                    
                                       
                                          l
                                       
                                       
                                          2
                                       
                                       
                                          m
                                          +
                                          2
                                       
                                    
                                    ,
                                    ⋯
                                    ,
                                    
                                       
                                          l
                                       
                                       
                                          N
                                          m
                                          +
                                          2
                                       
                                       
                                          m
                                          +
                                          2
                                       
                                    
                                    }
                                 , …
                                    
                                       
                                          L
                                       
                                       
                                          k
                                       
                                    
                                    =
                                    {
                                    
                                       
                                          l
                                       
                                       
                                          1
                                       
                                       
                                          k
                                       
                                    
                                    ,
                                    
                                       
                                          l
                                       
                                       
                                          2
                                       
                                       
                                          k
                                       
                                    
                                    ,
                                    ⋯
                                    ,
                                    
                                       
                                          l
                                       
                                       
                                          N
                                          k
                                       
                                       
                                          k
                                       
                                    
                                    }
                                 .

Take the machining allowance constraints into consideration and compare
                                    
                                       
                                          L
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                 , 
                                    
                                       
                                          L
                                       
                                       
                                          m
                                          +
                                          2
                                       
                                    
                                 , …
                                    
                                       
                                          L
                                       
                                       
                                          k
                                       
                                    
                                  with the corresponding measurement points 
                                    
                                       
                                          U
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                 , 
                                    
                                       
                                          U
                                       
                                       
                                          m
                                          +
                                          2
                                       
                                    
                                 ,…
                                    
                                       
                                          U
                                       
                                       
                                          k
                                       
                                    
                                 . Determine whether the newly formed cross sections are within the raw material. If not, the blade cannot be machined for there are not enough raw materials. If it is, 
                                    
                                       
                                          L
                                       
                                       
                                          m
                                          +
                                          1
                                       
                                    
                                 , 
                                    
                                       
                                          L
                                       
                                       
                                          m
                                          +
                                          2
                                       
                                    
                                 , …
                                    
                                       
                                          L
                                       
                                       
                                          k
                                       
                                    
                                  are the appropriate cross sections.

After the location process, it is necessary to rebuild the repaired blade CAD model for tool path generation which is required in NC machining. Use the measurement data to rebuild 3D model is a typical problem of reverse engineering. The key point of the repaired blade model reconstruction is to ensure the continuity of the surface and keep in-check the deviation with the measurement data. Without a smooth and continuous surface, the tool path planning process cannot be successful and there will be large machining error on the blade. It is necessary to define and extract machining allowance for adaptive tool path planning to improve the machining efficiency and precision.

For the global location method the critical point is how to ensure the smooth of transitional region surface as 
                        Fig. 4 shows.

Directly replace the repaired model with the located model will introduce small deviation and hence a processing step in the transitional region after NC machining. To solve this problem, firstly, we combine the located blade tip with the repaired blade clean region S1 to form a new blade point cloud. Secondly, we use a B spline curve to build up a smooth cross section curve through the points. Next, we use curvature comb to examine the curvature of the cross section curves and determine whether the curves are smooth or not – if not, we apply a fairing algorithm to make the curves as smooth as possible, as shown in 
                        Fig. 5. Finally, we construct a surface through the set of cross section curves to form the blade surface for tool path generation. Distances between the measurement points and the surface are calculated in order to ensure that the model error is within the given threshold.

In some cases the blade four parts are measured separately and, as a result, the four parts measurement points are not in the same section, as illustrated in 
                        Fig. 6.

For this case, the cross section location method cannot be used directly; but it is possible to translate this problem into the proposed case. Firstly, divide the four part points clearly, and use B spline curves to build up smooth cross sectional curves through points separately. Secondly, construct each surface through the set of cross section curves. Thirdly, slice the sheets with the planes, which are fitted by the four section points, and extract the intersection curves. Since the intersection curves are piecewise and not continuous, it is necessary to bridge and also fair them. Finally, construct the whole blade surface through the set of cross section curves acquired above. Then the whole cross section points can be extracted for the cross-sectional location method, as illustrated in 
                        Fig. 7.

To validate the proposed method, a virtual location example is given in this section. As shown in 
                        Fig. 8, simulated measured points are extracted from three different regions: 20 points for S0, 400 points for S1, and 200 points for S2. Fig. 8(c) shows the pre-location results with the proposed method.


                        
                        Fig. 9 shows the simulated location result of a repaired blade with the proposed method. The region tolerance is set as: ε=0.05, μ=0.05. The location results show that the repaired blade and the CAD model can match well with each other and the blade tip is within the repaired raw material.

The location results vary with the actual situation. Based on CMM measuring, point clouds of an undamaged blade and the repaired blade can be imported in UG, as 
                        Fig. 10(a) shows. Appropriate numbers of points are extracted from the three different regions: 10 points for S0, 400 points for S1, 200 points for S2. Fig. 10(c) shows the location results with the proposed global location method. The repaired blade and the undamaged blade match well with each other in S1 but not S2, the blade tip is outside of the raw material.

After the CMM measurement, the proposed cross-sectional location method could be used to solve the transformation parameters and using fitting functions we can calculate the rest sections transformation parameters. After that, we can transform the cross sectional points on the CAD model to the repaired blade tip, as shown in 
                        Fig. 11.

@&#CONCLUSIONS@&#

This paper outlines an adaptive location method for blade repairmen. A mathematical model is established to describe the localization problem under certain constraints and then the solution steps are given in the paper. To obtain a more accurate localization, a cross section location method is introduced based on the established mathematical model and detailed steps are then given. With the adaptive location method, the repaired blade and the CAD model can match well with each other and the blade tip is within the repaired raw material except for some cases. After the location process, the repaired blade model is reconstructed for machining allowance extraction and tool path generation. With the proposed method, material and cost savings can be achieved by repairing of locally damaged blades or blades with localized production deficiencies.

@&#ACKNOWLEDGMENTS@&#

This work was co-supported by the National Natural Science Foundation of China (Grant no. 51305353), Aeronautical Science Foundation of China (Grant no. 20141653024) and the Fundamental Research Funds for the Central Universities (Grant no. 3102014JCS05011).

@&#REFERENCES@&#

