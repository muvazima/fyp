@&#MAIN-TITLE@&#Online retailers’ promotional pricing, free-shipping threshold, and inventory decisions: A simulation-based analysis

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Online retailer’s optimal profit margin, free-shipping threshold and inventory decisions are analyzed.


                        
                        
                           
                           Publicly-available statistics are used to perform the analysis.


                        
                        
                           
                           We use Arena to simulate the online retailing system and OptQuest to optimize the decisions.


                        
                        
                           
                           We perform sensitivity analysis to draw managerial insights.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Profit margin

Contingent free-shipping

Inventory

Simulation with Arena

Optimization with OptQuest

Sensitivity analysis

@&#ABSTRACT@&#


               
               
                  We consider a two-stage decision problem, in which an online retailer first makes optimal decisions on his profit margin and free-shipping threshold, and then determines his inventory level. We start by developing the retailer’s expected profit function. Then, we use publicly-available statistics to find the best-fitting distribution for consumers’ purchase amounts and the best-fitting function for conversion rate (i.e., probability that an arriving visitor places an online order with the retailer). We show that: (i) a reduction of the profit margin does not significantly affect the standard deviation of consumers’ order sizes (purchase amounts) but increases the average order size; whereas, (ii) variations in a positive finite free-shipping threshold affect both the average value and the standard deviation of the order sizes. We then use Arena to simulate the online retailing system and OptQuest to find the retailer’s optimal decisions and maximum profit. Next, we perform a sensitivity analysis to examine the impact of the ratio of the unit holding and salvage cost to the unit shipping cost on the retailer’s optimal decisions. We also draw some important managerial insights.
               
            

@&#INTRODUCTION@&#

Online retailing is an important distribution channel and it is continuing to expand quickly. As information technology (IT) advances rapidly, consumers can access the Internet more conveniently, safely and cheaply, and they are thus more interested in online shopping. To successfully compete, online retailers frequently implement promotions. Promotions are of special importance to business-to-consumer (B2C) firms because search costs are lower in online markets than in traditional ones, and the competition in online markets is thus very stiff. Moreover, Advertising.com’s survey [1] indicated that around 56% of consumers consider price discounts as the most enticing promotion offered by online retailers. Price promotions are thus a critical marketing strategy for online retailers.

For online retailing operations, shipping costs are also an important determinant of a consumer’s purchase decision. As Dinlersoz and Li [12] discussed, shipping costs are of capital importance to online markets, even though they are irrelevant to consumers’ purchase decisions in offline distribution channels for most product categories. To reduce the negative impact of the shipping fees, online retailers have been implementing a variety of shipping-related promotions, which can be divided into the following three categories: (i) unconditional free shipping (UFS) policy, under which an online retailer absorbs the shipping costs for all orders; (ii) contingent free shipping (CFS) policy, under which a retailer pays for the shipping costs but only for those orders equal to or larger than a predefined cutoff level; and (iii) consumers absorb the shipping costs by paying the fees that are increasing in their order sizes. In [26] Lewis reported that the CFS policy is the most effective promotion in increasing the revenues of online retailers. However, a critical question for the CFS policy remains: What CFS cutoff level should be set by the online retailer?

As the above discussion illustrates, pricing and CFS strategies are two most effective tactics that influence consumers’ online purchases. In order to satisfy consumers’ demand during the promotion period, the retailer also needs to make a decision on how many products should be stocked for the sales. We learn from Anderson et al. [3] and Breugelmans et al. [10] that the inventory decision for a promotion period is also of great significance to the success of an online retailer.

We conclude from our above discussion that decisions on (i) pricing, (ii) CFS threshold and, (iii) inventory play important roles in the quickly-growing online retailing industry. We note from Advertising.com’s survey [1] and Yao [31] that, in practice, many online retailers have been implementing a two-stage decision process. In the first stage of this process, they first determine their pricing and CFS thresholds and announce their decisions to the market before a promotion takes place. Then, at the second stage, they make the stocking decision to satisfy consumers’ online orders during the promotion period. For example, Amazon.com announced its 2007 Christmas pricing decisions for most toy gifts and its free-shipping promotions for all orders over $25 several months before the Christmas promotion period.

In this paper we develop a two-stage sequential decision model for an online retailer who first makes optimal decisions on the retail price and the CFS cutoff level, and then makes the inventory decision. We assume that the online retailer sells multiple products in a single category; this is a common case in practice. For example, Barnesandnoble.com mainly sells books and CDs online, and Ashford.com mainly sells watches, sunglasses and fragrances. From Anderson et al. [4] and Blattberg and Neslin [8] who have shown that in practice the profit margins of different products in the same category are identical, we learn that making the pricing decision is equivalent to determining a single profit margin for all products in a single category. Our goal is to find the optimal profit margin, CFS threshold and inventory that maximize the retailer’s expected profit during a promotion period.

We note that the online retailer’s expected profit function for the two-stage decision problem is too complicated to be optimized analytically. The complexity of the problem stems from the fact that it involves optimizing three decisions that jointly determine profits both at the individual and aggregate level. Therefore, we use simulation to find the optimal pricing, CFS and inventory decisions for the retailer. In order to obtain realistic results based on real data, we simulate the online retailing system using the empirical statistics reported by Lewis et al. [27]. These include percentages of small, medium and large orders and conversion rates (i.e., probability that an arriving visitor places an online order and thus becomes a customer of the retailer) for different free-shipping and pricing policies. For our simulation, we first find the decision-dependent distributions that best fit the purchase distributions given in [27]. We then determine the best-fitting random purchase amount distribution and conversion rate function, and use these specifications to simulate the operations of the online retailer and to compute optimal two-stage decisions.

We use Arena, a primary simulation software, to efficiently simulate the retailing system, and then use OptQuest, an optimization add-on for Arena, to search for the optimal decisions that maximize the retailer’s profit. Arena and OptQuest have been widely used in practice to simulate a variety of real systems; but, very few academic publications in the business and economics fields used this simulation technique. Academic publications concerning simulation with Arena and optimization with OptQuest include Aras et al. [5] and Askin and Chen [6].

Additionally, we perform several sensitivity analyses to investigate the impact of the ratio of the inventory cost parameter to the unit shipping cost on the retailer’s optimal decisions and maximum profit. The sensitivity analyses are conducted because: (i) these parameters were estimated for the particular firm in the empirical study [27], so they may not be general and (ii) from the sensitivity analysis we are able to draw some important managerial insights.

The remainder of this paper is organized as follows. In Section 2 we review major relevant publications to show the originality of our paper. In Section 3 we develop our two-stage decision model for an online retailer. In Section 4 we find the best-fitting distribution function for the purchase amount and the best-fitting conversion rate function, and use these best-fitting functions to simulate the retailing system. In Section 5 we find the optimal decisions and conduct a sensitivity analysis. This paper ends with a summary of our contributions in Section 6.

@&#LITERATURE REVIEW@&#

We classify the relevant literature into five categories: Category 1 includes papers concerning the effects of shipping costs and promotions on purchasing behavior of consumers in eBusiness; Category 2 includes papers on the joint pricing and CFS decisions; Category 3 focuses on the joint pricing and inventory/purchasing decisions; Category 4 is concerned with the inventory decisions of online retailers; and Category 5 is about the optimal inventory policies in the presence of order quantity requirements.

We start with Category 1 in which, as a representative publication, Lewis et al. [27] performed an empirical study of the impact of nonlinear shipping and handling fees on consumers’ purchasing behaviors. Using a database from an online retailer, the authors showed that consumers are more sensitive to shipping charges than to prices. In Category 2, representative publications include Leng and Becerril-Arreola [24] and Gümüş et al. [15]. In [24] Leng and Becerril-Arreola examined the impact of an online retailer’s joint pricing and CFS free-shipping decisions on the purchase behavior of consumers, and computed the optimal price and CFS cutoff level for the retailer. Gümüş et al. [15] discussed two price partitioning formats—i.e., (i) a price is partitioned into a product price and a separate shipping and handling surcharge and (ii) free shipping service is offered to customers with a non-partitioned price which includes, in part or in whole, the shipping cost. The above two papers did not consider the inventory decision but only the pricing and CFS threshold decisions.

There are several publications in Category 3. For example, van der Heijden [30] investigated a two-echelon network consisting of a central depot and multiple local warehouses, and developed a periodic-review inventory model to make the optimal decisions on the initial inventory allocation to the local warehouses, the maximum stock in the central depot, and the shipping frequency. Jang and Kim [20] analyzed a single-period inventory problem to find a supplier’s joint optimal decisions on the production quantity, the inventory allocation (among multiple customers), and the shipping sequence of his products for the customers. Jang et al. [21] investigated the joint inventory allocation and shipping frequency decisions for a manufacturer with a limited capacity, who serves multiple types of retailers with a single product. Hua et al. [17] obtained the price and lead time decisions for a dual-channel supply chain where a manufacturer sells its products through both a physical retail channel and an online direct channel. In [18,19], Hua et al. determined an online retailer’s optimal order lot size and retail price under a given CFS policy in the long-run and the newsvendor settings, respectively. Although Category 3 contains some relevant publications, we still find that very few papers in this category considered the CFS decisions for online retailers. Leng and Parlar [25] investigated a free-shipping decision problem in B2B transactions, where an online seller announces his cutoff level decision and a buyer chooses her purchase amount. The authors developed a leader-follower game and find the Stackelberg equilibrium for the game.

The recently published and relevant publications in Category 4 are reviewed as follows. Ayanso et al. [7] developed a Monte Carlo simulation model to examine a continuous-review inventory problem for an online retailer selling multiple non-perishable and made-to-stock items. Jing and Lewis [22], who used empirical data from an online grocery store to discuss the impact of stockouts and fulfillment rates on the purchase behaviors of consumers in different segments. This paper did not consider pricing and CFS decisions for online retailers. For a comprehensive review of other relevant publications in Category 4, see Agatz et al. [2].

As a representative publication in Category 5, Zhao and Katehakis [32] characterized inventory policies that minimize ordering, holding, and backorder costs when the order size is either zero or at least a minimum number. For an inventory system similar to that in [32], Bradford and Katehakis [9] addressed an inventory allocation problem, and Zhou et al. [34] proposed and evaluated a simple heuristic ordering policy. Zhou et al. [33] examined a retailer’s CFS policy, under which the shipping cost is a positive constant if the order quantity is smaller than a threshold and is zero otherwise. The authors derived optimal inventory control policies for both a single-period problem and a multi-period problem. The above publications considered order size constraints and optimal inventory policies; but, they did not involve pricing or CFS decisions.

The above brief review of representative literature reveals that our paper differs from extant publications in that we simultaneously consider the optimal pricing, CFS threshold, and inventory decisions for an online retailer, rather than analyzing only one or two of these three decisions as in the publications reviewed above. Since the discussion in Section 1 indicated that the joint decisions on pricing, CFS threshold, and inventory are important to online retailers, our research problem is worth investigating, and our results should contribute to the literature in the operations management area and help practitioners make their optimal decisions.

We now consider a two-stage decision model for an online retailer, who maximizes his expected profit during a promotion period by first determining its profit margins (prices) and CFS thresholds and then making his stocking decision. Note that in practice, the products promoted by the retailer in a promotional period such as Christmas and Valentines’ day are usually seasonal or perishable products, e.g., Christmas trees and roses. Accordingly, we assume seasonable or perishable products in this paper, and consider a single-period decision problem for the retailer. The retailer serves consumers with multiple products of a single seasonal or perishable category. Since the profit margins of different products in the same category are often identical (see Anderson et al. [4] and Blattberg and Neslin [8]), we use the concept of profit margin to make the pricing decision for the online retailer.
                        Assumption 1
                        The retailer sets the price of each product as p
                           =(1+
                           m)c, where m and c denote the profit margin and the unit purchase cost of the product, respectively.

For recent applications of the above assumption to marketing-operations problems, see Cachon and Kok [11], Dong et al. [13], etc. The retailer offers a contingent free-shipping (CFS) policy to his customers by setting the CFS cutoff level as u dollars; for example, Amazon.com’s CFS cutoff level is currently u
                     =$25. We let Y denote a consumer’s random purchase amount (in dollars). If a consumer’s purchase amount Y
                     =
                     y is equal to or greater than u, then the consumer qualifies for free shipping and the retailer pays for the shipping cost. Otherwise, if y
                     <
                     u, then the consumer absorbs the shipping cost, even when the sum of the purchase amount $y and the shipping cost exceeds the threshold u. This occurs because, in practice, whether or not a consumer qualifies for free shipping only depends on the comparison between his or her purchase amount y and the cutoff level u. The shipping cost is only an additional cost to the consumer when y
                     <
                     u.

We learn from Lewis et al. [27] that the profit margin (pricing) and free-shipping decisions greatly impact consumers’ order amounts (i.e., dollar purchase amounts) and the conversion rate, which is defined as the ratio of the number of consumers who place online orders to the number of visitors. Note that the number of visitors includes the consumers who place online orders and the persons who visit the retailer’s website but do not buy any product online. Thus, given a number of visitors, we can calculate the number of online purchases as the conversion rate times the number of visitors.
                           Assumption 2
                           The number of online purchases is expressed as N(m, u)=
                              R(m, u)B, where R(m, u) and B denote the conversion rate and the number of visitors.

Next, we consider a consumer’s purchase amount Y, which also depends on the profit margin m and the CFS cutoff level u. Since in practice consumers are likely to spend different purchase amounts, we make the following assumption.
                           Assumption 3
                           A consumer’s purchase amount Y is a random variable with the probability density function (p.d.f.) f
                              
                                 m,u
                              (y)≡
                              f(y∣m, u), the cumulative distribution function (c.d.f.) F
                              
                                 m,u
                              (y)≡
                              F(y∣m, u), and the expected value μ
                              
                                 m,u
                              
                              ≡
                              E(Y∣m, u). We can then calculate the cumulative (aggregate) dollar sales for the promotion period as 
                                 
                                    Z
                                    =
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          N
                                          (
                                          m
                                          ,
                                          u
                                          )
                                       
                                    
                                    
                                       
                                          Y
                                       
                                       
                                          i
                                       
                                    
                                 
                              , which is a random variable with a distribution defined by the p.d.f. g
                              
                                 m,u
                              (z)≡
                              g(z∣ m, u), the c.d.f. G
                              
                                 m,u
                              (z)≡
                              G(z∣m, u), and the expected value 
                                 
                                    
                                       
                                          μ
                                       
                                       
                                          m
                                          ,
                                          u
                                       
                                       
                                          Z
                                       
                                    
                                    ≡
                                    E
                                    (
                                    Z
                                    |
                                    m
                                    ,
                                    u
                                    )
                                    =
                                    N
                                    (
                                    m
                                    ,
                                    u
                                    )
                                    
                                       
                                          μ
                                       
                                       
                                          m
                                          ,
                                          u
                                       
                                    
                                 
                              .

Note that in the above assumption, Y
                        
                           i
                        , i
                        =1,…,
                        N(m, u), are i.i.d. random variables that denote the stochastic purchase amounts of consumers i
                        =1,…,
                        N(m, u). Note that Y
                        
                           i
                        , i
                        =1,…,
                        N(m, u), are i.i.d. and N(m, u) is a stopping time for the sequence of the purchase amounts of all consumers arriving during the single period (i.e., promotion period). We can thus apply Wald’s Equation (see, e.g., Ross [28, p. 105]) to compute the retailer’s expected total profit as given in Assumption 3.

In addition to determining the optimal values of the profit margin m and the CFS cutoff level u, we should compute the retailer’s optimal stocking decision. We determine the optimal dollar value of inventory (denoted by v) rather than product quantity in stock; for extant applications of the dollar value of inventory, see, e.g., Ettl et al. [14] and Thompson [29]. Hence, a natural question arises: how does one determine the stocking level (in quantity) for each product from the optimal dollar value of inventory? One possibility is to allocate proportionally the optimal dollar value among all products, and then determine the stocking level of each product for the promotion period. Thus, we assume, without loss of generality, that the online retailer sells n products each with purchase cost c
                        
                           i
                        , i
                        =1,2,…,
                        n. Given the stocking level q
                        
                           i
                         for product i
                        =1,2,…,
                        n, the dollar value of product i is c
                        
                           i
                        
                        q
                        
                           i
                         and the total dollar value of inventory is 
                           
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    n
                                 
                              
                              
                                 
                                    c
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                              
                           
                        . When the optimal dollar value of all products in stock is found as v
                        ∗, we need to determine the optimal stocking levels 
                           
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                                 
                                    ∗
                                 
                              
                           
                         such that 
                           
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    n
                                 
                              
                              
                                 
                                    c
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                                 
                                    ∗
                                 
                              
                              =
                              
                                 
                                    v
                                 
                                 
                                    ∗
                                 
                              
                           
                        . Here, v
                        ∗ may be regarded as the optimal budget for the online retailer, who needs to decide how to allocate v
                        ∗ among n products. As an easy-to-implement and practical approach, the retailer can use past promotions’ sale data to compute the ratio of dollar value of each product’s sales to total dollar value of all sold products. Accordingly, we make the following assumption regarding the inventory allocation.
                           Assumption 4
                           Denote the allocation ratio for product i by w
                              
                                 i
                              , i
                              =1,2,…,
                              n such that 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          n
                                       
                                    
                                    
                                       
                                          w
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    1
                                 
                              . Since the optimal dollar value (budget) is 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          ∗
                                       
                                    
                                    =
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          n
                                       
                                    
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          q
                                       
                                       
                                          i
                                       
                                       
                                          ∗
                                       
                                    
                                 
                              , we can compute the allocation of v
                              ∗ to product i
                              =1,2,…,
                              n as w
                              
                                 i
                              
                              v
                              ∗, and then find the “optimal” stocking level of product i as 
                                 
                                    
                                       
                                          q
                                       
                                       
                                          i
                                       
                                       
                                          ∗
                                       
                                    
                                    =
                                    
                                       
                                          w
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          v
                                       
                                       
                                          ∗
                                       
                                    
                                    /
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                 
                              .

In addition to the method suggested by the above assumption, we may consider the optimal allocation solution that solves the following bounded knapsack problem: 
                           
                              
                                 
                                    max
                                 
                                 
                                    
                                       
                                          q
                                       
                                       
                                          i
                                       
                                    
                                    ,
                                    i
                                    =
                                    1
                                    ,
                                    2
                                    ,
                                    …
                                    ,
                                    n
                                 
                              
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    n
                                 
                              
                              
                                 
                                    mc
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                              
                           
                        , subject to 
                           
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    n
                                 
                              
                              
                                 
                                    c
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                              
                              =
                              
                                 
                                    v
                                 
                                 
                                    ∗
                                 
                              
                           
                         and 
                           
                              
                                 
                                    q
                                 
                                 
                                    i
                                 
                              
                              ∈
                              {
                              0
                              ,
                              1
                              ,
                              2
                              ,
                              …
                              ,
                              (
                              1
                              +
                              
                                 
                                    η
                                 
                                 
                                    i
                                 
                              
                              )
                              
                                 
                                    
                                       
                                          q
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                              }
                           
                        , for i
                        =1,2,…,
                        n. Note that 
                           
                              
                                 
                                    
                                       
                                          q
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                           
                         denotes the average sales of product i—which can be estimated from historical data—and η
                        
                           i
                         represents a percentage increment—which can be obtained by using historical data to estimate the mean value 
                           
                              
                                 
                                    
                                       
                                          q
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                           
                         and the standard deviation 
                           
                              
                                 
                                    σ
                                 
                                 
                                    
                                       
                                          q
                                       
                                       
                                          i
                                       
                                    
                                 
                              
                           
                         and then calculating the safety stock 
                           
                              
                                 
                                    η
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    
                                       
                                          q
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                           
                         according to the retailer’s service level. Note that our subsequent analysis is independent of the allocation solution, and therefore we do not need to provide the optimal solution for the above knapsack problem (which can be actually solved by using dynamic programing).

Next, we describe the two-stage decision problem of an online retailer who sequentially makes optimal decisions to maximize his expected profit for a promotion period. In particular, at the first stage, the retailer does not consider the inventory-related costs, and only determines the optimal profit margin m
                        ∗ and CFS cutoff level u
                        ∗ that maximize his expected profit π
                        1(m, u), which is computed as expected sales revenue minus the sum of expected purchase cost and expected shipping cost. At the second stage, given the optimal profit margin m
                        ∗ and CFS cutoff level u
                        ∗, the retailer determines the optimal stocking decision v
                        ∗ that minimizes his expected inventory-related cost (sum of the expected holding and salvage cost and the expected shortage cost), which is denoted by π
                        2(v∣m
                        ∗, u
                        ∗). Hence, the retailer’s maximum system-wide expected profit is found as
                           
                              
                                 π
                                 (
                                 
                                    
                                       m
                                    
                                    
                                       ∗
                                    
                                 
                                 ,
                                 
                                    
                                       u
                                    
                                    
                                       ∗
                                    
                                 
                                 ,
                                 
                                    
                                       v
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 
                                    
                                       m
                                    
                                    
                                       ∗
                                    
                                 
                                 ,
                                 
                                    
                                       u
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 -
                                 
                                    
                                       π
                                    
                                    
                                       2
                                    
                                 
                                 (
                                 
                                    
                                       v
                                    
                                    
                                       ∗
                                    
                                 
                                 |
                                 
                                    
                                       m
                                    
                                    
                                       ∗
                                    
                                 
                                 ,
                                 
                                    
                                       u
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 .
                              
                           
                        
                     

To solve the two-stage problem, we use the following approach. We first minimize the second-stage function π
                        2(v∣m, u), for fixed values of m and u, to find the stocking decision v
                        ∗(m, u) (as a function of m and u). We then maximize the expected profit π(m, u, v
                        ∗(m, u))=
                        π
                        1(m, u)−
                        π
                        2(v
                        ∗(m, u)∣m, u) to obtain the retailer’s optimal profit margin m
                        ∗ and CFS cutoff level u
                        ∗. Then, substituting m
                        ∗ and u
                        ∗ into v
                        ∗(m, u) gives the optimal stocking decision v
                        ∗
                        =
                        v
                        ∗(m
                        ∗, u
                        ∗). Next, we develop the functions π
                        1(m, u) and π
                        2(v∣m, u).

When a consumer places an online order with purchase amount Y
                        =
                        y, the retailer’s sale revenue is $y. Under the CFS policy, the retailer incurs acquisition costs and may absorb the shipping costs. We now compute the retailer’s acquisition cost of products that the consumer buys by spending $y. This acquisition cost can be computed as c
                        =
                        y/(1+
                        m), since the profit margin is m and the total sales price is y
                        =(1+
                        m)c. Moreover, the profit that the retailer gains from the purchase amount $y is computed as y
                        −
                        y/(1+
                        m)=
                        my/(1+
                        m).

As Lewis et al. [27] discussed, the shipping-related cost includes the shipping fee and other fees (e.g., insurance fee, taxes) associated with shipping the orders. Thus, the shipping-related cost for a consumer depends on the dollar value of the products that the consumer buys. For example, as estimated by the manager of the firm in the empirical study in [27], the shipping-related cost is $6.5 for a small order (with order size smaller than or equal to $50), $7.5 for a medium order (with order size greater than $50 but smaller than or equal to $75), and $10 for a large order (with order size greater than $75). In our paper, we denote the shipping-related cost by S(y) and assume that it is increasing in y. Note that who pays for the shipping-related cost depends on the comparison of y and u. Specifically, if y
                        ⩾ 
                        u, then the retailer absorbs S(y) ; otherwise, the consumer pays for the shipping-related cost.

As shown in [27], a high free-shipping cutoff level may trigger some customers to increase their purchase amounts to qualify for FS, and it may thus lead to a larger average purchase amount. On the other hand, a low cutoff level allows more customers to qualify for FS and convinces fewer customers to increase their purchase amounts. Each customer’s reaction to a given FS cutoff level u can therefore be modeled as a probabilistic process dependent on u. For our model, we let ρ(y, u) be the probability that, given the FS cutoff level u, a consumer increases her purchase amount from y to u
                        +
                        X, where X is a positive random variable with the mean value E(X)=
                        β. We consider the term X because, given that a consumer increases her purchase amount to qualify for free shipping, the consumer needs to purchase more products and spend $(u
                        −
                        y) or more.

Since a consumer may be more willing to increase the purchase amount when the difference between u and y is smaller, the function ρ(y, u) is assumed to be decreasing in u but increasing in y; that is, ∂ρ(y, u)/∂u
                        <0 and ∂ρ (y, u)/∂y
                        >0. If y
                        >
                        u, a consumer with an (initial) amount y qualifies for free shipping and does not need to increase the order size. Hence, we assume that ρ(y, u)=0 for y
                        >
                        u. In addition, when y
                        =
                        u, the consumer can obtain the free shipping service with the initial purchase amount
                        y (equal to u); thus, for this case, ρ(y, u)=
                        ρ(u, u)=1. Note that, when u is a significantly large number, no consumer would increase the purchase amount to obtain this costly free-shipping service. Accordingly, we can assume that ρ(y, u)=0 when u approaches infinity.

We now construct the retailer’s expected profit (excluding the inventory-related cost) function π
                        1(m, u) for the first stage. If y
                        ⩾
                        u, then the retailer’s profit is calculated as my/(1+
                        m)−
                        S(y). If y
                        <
                        u, then the consumer may keep the original purchase amount $y with the probability 1−
                        ρ(y, u). In this case, the retailer does not need to pay the shipping cost, and his profit is my/(1+
                        m). Alternatively, the consumer increases her purchase to $(u
                        +
                        X)—where X is a r.v. with the mean value E(X)=
                        β—with the probability ρ(y, u) and qualifies for free shipping. As a result, the retailer receives the expected sale revenue m(u
                        +
                        β)/(1+
                        m) and pays the expected shipping cost S(u
                        +
                        β). Thus, in this case, the retailer’s expected profit is m(u
                        +
                        β)/(1+
                        m)−
                        S(u
                        +
                        β). The retailer’s expected profit function π
                        1(m, u) is then
                           
                              
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 m
                                 ,
                                 u
                                 )
                                 =
                                 N
                                 (
                                 m
                                 ,
                                 u
                                 )
                                 
                                    
                                       
                                          
                                             ∫
                                             
                                                u
                                             
                                             
                                                ∞
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         my
                                                      
                                                      
                                                         1
                                                         +
                                                         m
                                                      
                                                   
                                                   -
                                                   S
                                                   (
                                                   y
                                                   )
                                                
                                             
                                          
                                          
                                             
                                                f
                                             
                                             
                                                m
                                                ,
                                                u
                                             
                                          
                                          (
                                          y
                                          )
                                          
                                          dy
                                          +
                                          
                                             ∫
                                             
                                                0
                                             
                                             
                                                u
                                             
                                          
                                          [
                                          1
                                          -
                                          ρ
                                          (
                                          y
                                          ,
                                          u
                                          )
                                          ]
                                          
                                             
                                                my
                                             
                                             
                                                1
                                                +
                                                m
                                             
                                          
                                          
                                             
                                                f
                                             
                                             
                                                m
                                                ,
                                                u
                                             
                                          
                                          (
                                          y
                                          )
                                          
                                          dy
                                          +
                                          
                                             ∫
                                             
                                                0
                                             
                                             
                                                u
                                             
                                          
                                          ρ
                                          (
                                          y
                                          ,
                                          u
                                          )
                                          
                                             
                                                
                                                   
                                                      
                                                         m
                                                         (
                                                         u
                                                         +
                                                         β
                                                         )
                                                      
                                                      
                                                         1
                                                         +
                                                         m
                                                      
                                                   
                                                   -
                                                   S
                                                   (
                                                   u
                                                   +
                                                   β
                                                   )
                                                
                                             
                                          
                                          
                                             
                                                f
                                             
                                             
                                                m
                                                ,
                                                u
                                             
                                          
                                          (
                                          y
                                          )
                                          
                                          dy
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

Next, we compute the inventory-related cost for the second stage at which the retailer determines the value of v (i.e., the dollar value of inventory), given the values of m and u. When the aggregate (cumulative) sales of the promotion period are Z
                        =
                        z, we find that, if z
                        ⩽
                        v, then the products worth $(v
                        −
                        z) remain unsold at the end of the period. Note that after the promotional period, the retailer salvages the unsold seasonal or perishable products (by, for example, largely reducing its retail price) and absorbs a disposal cost in addition to a cost of holding the unsold products for the period. Therefore, for the unsold products worth $(v
                        −
                        z), the retailer incurs the holding and salvage cost I(v
                        −
                        z), where I (% per dollar) denotes the cost of holding and salvaging products worth $1 for a promotion period; that is, such a cost is proportional to the dollar value of inventory. This proportionality method has been widely used in the inventory management. As Hadley and Whitin [16, p. 422] discussed, in practice I ranges from 15% to 35% with the typical value being 20%.

If z
                        >
                        v, then products worth $(z
                        −
                        v) are out of stock during the promotion period, and the retailer incurs a shortage cost. For the single-period problem, we can simply use the lost profit to estimate the shortage cost. We do not consider the goodwill cost for the online retailer, because of the following fact: As the empirical study in Jing and Lewis [22] indicates, the stock-out of a retailer’s products is very likely to result from customers’ strong preference for the retailer, and thus have no significant long-term impact on the sales. That is, the stock-out for the current period (e.g., Christmas season in 2011) does not significantly affect the sales during the next period (e.g., Christmas season in 2012). Moreover, since the products in the single category are likely to be substitutable—which is accordingly assumed in this paper—the stockout of a product may lead consumers to buy another product in the category. Because of the substitutability of the products, the retailer focuses on the aggregate demand for all products. That is, when shortage occurs, all products rather than one or a few products are sold out, which means that we do not need to consider the short-term impact of stock-out. According to the above, the retailer’s shortage cost is calculated as the lost profit $(z
                        −
                        v) if z
                        >
                        v and zero otherwise.

Since the retailer gains the profit $m/(1+
                        m) from selling the products at price $1, the lost profit of the retailer is $m(z
                        −
                        v)/(1+
                        m) when products worth $(z
                        −
                        v) are out of stock. Thus, given m and u, the retailer chooses the optimal dollar value v
                        ∗ that minimizes the following expected inventory-related cost function:
                           
                              (1)
                              
                                 
                                    
                                       π
                                    
                                    
                                       2
                                    
                                 
                                 (
                                 v
                                 |
                                 m
                                 ,
                                 u
                                 )
                                 =
                                 I
                                 
                                    ∫
                                    
                                       0
                                    
                                    
                                       v
                                    
                                 
                                 (
                                 v
                                 -
                                 z
                                 )
                                 
                                    
                                       g
                                    
                                    
                                       m
                                       ,
                                       u
                                    
                                 
                                 (
                                 z
                                 )
                                 
                                 dz
                                 +
                                 
                                    
                                       m
                                    
                                    
                                       1
                                       +
                                       m
                                    
                                 
                                 
                                    ∫
                                    
                                       v
                                    
                                    
                                       ∞
                                    
                                 
                                 (
                                 z
                                 -
                                 v
                                 )
                                 
                                    
                                       g
                                    
                                    
                                       m
                                       ,
                                       u
                                    
                                 
                                 (
                                 z
                                 )
                                 
                                 dz
                                 .
                              
                           
                        
                        
                           Theorem 1
                           
                              Given the values of m and u, for the second stage, the retailer’s optimal dollar value v
                              ∗
                              (m, u) can be uniquely obtained by solving the following equation for v(m, u):
                              
                                 
                                    (2)
                                    
                                       
                                          
                                             G
                                          
                                          
                                             m
                                             ,
                                             u
                                          
                                       
                                       (
                                       v
                                       (
                                       m
                                       ,
                                       u
                                       )
                                       )
                                       =
                                       
                                          
                                             m
                                          
                                          
                                             I
                                             (
                                             1
                                             +
                                             m
                                             )
                                             +
                                             m
                                          
                                       
                                       .
                                    
                                 
                              
                           

The first- and second-order derivatives of π
                              2(v∣m, u) in (1) w.r.t. v are computed as 
                                 
                                    d
                                    
                                       
                                          π
                                       
                                       
                                          2
                                       
                                    
                                    (
                                    v
                                    |
                                    m
                                    ,
                                    u
                                    )
                                    /
                                    dv
                                    =
                                    m
                                    /
                                    (
                                    1
                                    +
                                    m
                                    )
                                    -
                                    [
                                    I
                                    +
                                    m
                                    /
                                    (
                                    1
                                    +
                                    m
                                    )
                                    ]
                                    
                                       ∫
                                       
                                          0
                                       
                                       
                                          v
                                       
                                    
                                    
                                       
                                          g
                                       
                                       
                                          m
                                          ,
                                          u
                                       
                                    
                                    (
                                    z
                                    )
                                    
                                    dz
                                 
                               and d
                              2
                              π
                              2(v∣m, u)/dv
                              2
                              =[I
                              +
                              m/(1+
                              m)]g
                              
                                 m,u
                              (v)>0, which implies that π
                              2(v∣m, u) in (1) is strictly concave in v. Solving dπ
                              2(v∣m, u)/dv
                              =0 for v gives the result as in this theorem. □

Substituting v
                        ∗(m, u) in (2) into (1) gives,
                           
                              
                                 
                                    
                                       π
                                    
                                    
                                       2
                                    
                                 
                                 (
                                 
                                    
                                       v
                                    
                                    
                                       ∗
                                    
                                 
                                 (
                                 m
                                 ,
                                 u
                                 )
                                 |
                                 m
                                 ,
                                 u
                                 )
                                 =
                                 
                                    
                                       m
                                    
                                    
                                       1
                                       +
                                       m
                                    
                                 
                                 
                                    
                                       μ
                                    
                                    
                                       m
                                       ,
                                       u
                                    
                                    
                                       Z
                                    
                                 
                                 -
                                 
                                    
                                       
                                          I
                                          +
                                          
                                             
                                                m
                                             
                                             
                                                1
                                                +
                                                m
                                             
                                          
                                       
                                    
                                 
                                 
                                    ∫
                                    
                                       0
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             ∗
                                          
                                       
                                       (
                                       m
                                       ,
                                       u
                                       )
                                    
                                 
                                 
                                    
                                       zg
                                    
                                    
                                       m
                                       ,
                                       u
                                    
                                 
                                 (
                                 z
                                 )
                                 
                                 dz
                                 .
                              
                           
                        Then, the retailer’s two-stage expected profit function π (m, u, v
                        ∗(m, u))—which is computed as π
                        1(m, u)−
                        π
                        2(v
                        ∗(m, u)∣m, u), as discussed in Section 3.1—is found as,
                           
                              (3)
                              
                                 π
                                 (
                                 m
                                 ,
                                 u
                                 ,
                                 
                                    
                                       v
                                    
                                    
                                       ∗
                                    
                                 
                                 (
                                 m
                                 ,
                                 u
                                 )
                                 )
                                 =
                                 N
                                 (
                                 m
                                 ,
                                 u
                                 )
                                 
                                    
                                       
                                          
                                             ∫
                                             
                                                0
                                             
                                             
                                                u
                                             
                                          
                                          ρ
                                          (
                                          y
                                          ,
                                          u
                                          )
                                          
                                             
                                                
                                                   
                                                      
                                                         m
                                                         (
                                                         u
                                                         +
                                                         β
                                                         -
                                                         y
                                                         )
                                                      
                                                      
                                                         1
                                                         +
                                                         m
                                                      
                                                   
                                                   -
                                                   S
                                                   (
                                                   u
                                                   +
                                                   β
                                                   )
                                                
                                             
                                          
                                          
                                             
                                                f
                                             
                                             
                                                m
                                                ,
                                                u
                                             
                                          
                                          (
                                          y
                                          )
                                          
                                          dy
                                          -
                                          
                                             ∫
                                             
                                                u
                                             
                                             
                                                ∞
                                             
                                          
                                          S
                                          (
                                          y
                                          )
                                          
                                             
                                                f
                                             
                                             
                                                m
                                                ,
                                                u
                                             
                                          
                                          (
                                          y
                                          )
                                          
                                          dy
                                       
                                    
                                 
                                 +
                                 
                                    
                                       
                                          I
                                          +
                                          
                                             
                                                m
                                             
                                             
                                                1
                                                +
                                                m
                                             
                                          
                                       
                                    
                                 
                                 
                                    ∫
                                    
                                       0
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             ∗
                                          
                                       
                                       (
                                       m
                                       ,
                                       u
                                       )
                                    
                                 
                                 
                                    
                                       zg
                                    
                                    
                                       m
                                       ,
                                       u
                                    
                                 
                                 (
                                 z
                                 )
                                 
                                 dz
                                 .
                              
                           
                        
                     

The retailer should maximize π(m, u, v
                        ∗(m, u)) to find the optimal profit margin m
                        ∗ and the optimal CFS cutoff level u
                        ∗. Since π(m, u, v
                        ∗(m, u)) is a very complex function, except in some very special cases, it would be impossible to find m
                        ∗ and u
                        ∗ analytically. In fact, even if the p.d.f. f
                        
                           m,u
                        (y) were given, it would still be intractable to find the p.d.f. g
                        
                           m,u
                        (z) of the random variable 
                           
                              Z
                              =
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    N
                                    (
                                    m
                                    ,
                                    u
                                    )
                                 
                              
                              
                                 
                                    Y
                                 
                                 
                                    i
                                 
                              
                           
                         (except for the special case where Y
                        
                           i
                         are normal, or exponential). These observations lead us to consider a numerical study for our two-stage decision problem combined with simulation to determine the optimal solution. To assure the uniqueness of the optimal solution in our numerical study, we need to show the convergence of the above two-stage procedure. However, because of the intractable complexity of the function in (3), we cannot prove the convergence analytically but will later perform numerical experiments to demonstrate that our two-stage procedure converges to a unique optimal solution.

In [27] Lewis et al. describe a distribution of consumers’ purchase amounts, i.e., the percentage of large orders (each with an order size larger than or equal to $75), the percentage of medium orders (order size between $50 and $75) and the percentage of small orders (order size smaller than $50) along with average purchase amounts and conversion rates. For a fixed profit margin of m
                     =25%, they provide the conversion rates and the order-size distributions corresponding to the following three free-shipping policies, as summarized in Table B in online Appendix B.
                        
                           1.
                           Base policy (m
                              =25%, u
                              =∞): No free shipping service is offered to any order. That is, for this policy, the retailer sets the CFS cutoff level at infinity, i.e., u
                              =∞.

Free shipping to all orders (m
                              =25%, u
                              =0): Free shipping service is offered to all orders; thus, for this policy, u
                              =0.

Free shipping only to large orders (m
                              =25%, u
                              =75): Free shipping service is offered to an order only when the size of the order is greater than or equal to $75, that is, u
                              =75.

When free-shipping service is not offered, i.e., u
                     =∞, Lewis et al. [27] provide the conversion rates and the order-size distributions for the following two pricing (profit margin) policies as summarized in online Table C.
                        
                           1.
                           Base policy (m
                              =25%, u
                              =∞). This is of course the same base policy as above.

10% price discount (m
                              =12.5%, u
                              =∞): Here, the price of each product is reduced by 10% which results in m
                              =12.5%.

In the remainder of this section we use the data in Tables B and C in online Appendix B to estimate the components of the optimization model (3), by adopting the following three-stage procedure.
                        
                           
                              Stage 1: Best-fitting distributions of purchase amount for all policies above. For each policy, we estimate the probability distribution of a consumer’s random purchase amount that best fits the limited empirical data provided in Lewis et al. [27] and summarized in online Tables B and C. Then, observing the best-fitting distributions for all policies, we draw conclusions regarding the impact of m and u on the distribution of the purchase amount.


                              Stage 2: Purchase amount random variable for an arbitrary policy. We use our conclusions in Stage 1 to construct (i) each consumer’s stochastic initial purchase amount function Y and (ii) the probability ρ(y, u) that a consumer with the initial purchase amount 0<
                              y
                              <
                              u increases y to u or u
                              +
                              X in order to qualify for free shipping. Note that X is a random variable [with the p.d.f. ϕ(x)] denoting the amount that the consumer spends in excess of u when she qualifies for free shipping.

Next, we use empirical data in [27]—which is summarized in Tables B and C in online Appendix B—to estimate the parameter values of Y, ρ(y, u), and the p.d.f. ϕ(x). Then, we develop each consumer’s final purchase amount function 
                                 
                                    
                                       
                                          Y
                                       
                                       
                                          ¯
                                       
                                    
                                    (
                                    m
                                    ,
                                    u
                                    )
                                 
                               for any arbitrary policy.


                              Stage 3: Estimated parameter values of R(m, u). We build a logit model of the conversion rate R(m, u), and use empirical data in [27] to estimate the parameters in R(m, u).

For given values of m and u corresponding to each policy in online Tables B and C we can find the estimated p.d.f. 
                           
                              
                                 
                                    
                                       
                                          f
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    m
                                    ,
                                    u
                                 
                              
                              (
                              y
                              )
                           
                         that best fits the order-size data while assuring that the expected value of the purchase amount Y equals the empirical average order size. We do this by using the percentage values in the tables and solving a nonlinear programming problem where the decision variables are the parameters of a tested density function. We proceed as follows:
                           
                              
                                 Step 1:
                              We consider five commonly-used distributions (normal, lognormal, Erlang, gamma, Weibull) and for each distribution solve the following minimization problem:
                                    
                                       (4)
                                       
                                          
                                             min
                                          
                                          
                                          Π
                                          =
                                          
                                             
                                                
                                                   
                                                      
                                                         ∫
                                                         
                                                            0
                                                         
                                                         
                                                            50
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  f
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            m
                                                            ,
                                                            u
                                                         
                                                      
                                                      (
                                                      y
                                                      )
                                                      
                                                      dy
                                                      -
                                                      
                                                         
                                                            P
                                                         
                                                         
                                                            S
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                2
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   
                                                      
                                                         ∫
                                                         
                                                            50
                                                         
                                                         
                                                            75
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  f
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            m
                                                            ,
                                                            u
                                                         
                                                      
                                                      (
                                                      y
                                                      )
                                                      
                                                      dy
                                                      -
                                                      
                                                         
                                                            P
                                                         
                                                         
                                                            M
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                2
                                             
                                          
                                          ,
                                          
                                          s
                                          .
                                          t
                                          .
                                          
                                          
                                             
                                                μ
                                             
                                             
                                                m
                                                ,
                                                u
                                             
                                          
                                          (
                                          y
                                          )
                                          =
                                          A
                                          ,
                                       
                                    
                                 where P
                                 
                                    S
                                 , P
                                 
                                    M
                                 , and A denote % of small orders, % of medium orders, and the average order size, and are all given in online Tables B and C. Here, the decision variables are the parameters of the fitting distribution. Note that we do not consider the squared deviation for the percentage of large orders because this percentage is equal to one minus the sum of percentages of small and medium orders.

We then compare the minimum squared deviations obtained in Step 1 for all distributions, and find the best-fitting distribution as the one with the smallest value of Π.

To illustrate our approach in Step 1, we provide an example in which we consider the Weibull distribution and solve the minimization problem (4) for the base policy (i.e., m
                        =25% and u
                        =∞). For the base policy the purchase amount random variable is denoted by Y
                        0.
                           Example 1
                           For the base policy in online Tables B and C, we consider the Weibull distribution with the probability density function,
                                 
                                    (5)
                                    
                                       
                                          
                                             
                                                
                                                   f
                                                
                                                
                                                   ˆ
                                                
                                             
                                          
                                          
                                             0
                                          
                                       
                                       (
                                       
                                          
                                             y
                                          
                                          
                                             0
                                          
                                       
                                       )
                                       ≡
                                       
                                          
                                             f
                                          
                                          
                                             0.25
                                             ,
                                             ∞
                                          
                                       
                                       (
                                       
                                          
                                             y
                                          
                                          
                                             0
                                          
                                       
                                       )
                                       =
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               κ
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         
                                                            
                                                               κ
                                                            
                                                            
                                                               2
                                                            
                                                            
                                                               -
                                                               
                                                                  
                                                                     κ
                                                                  
                                                                  
                                                                     1
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               y
                                                            
                                                            
                                                               0
                                                            
                                                            
                                                               
                                                                  
                                                                     κ
                                                                  
                                                                  
                                                                     1
                                                                  
                                                               
                                                               -
                                                               1
                                                            
                                                         
                                                         exp
                                                         [
                                                         -
                                                         (
                                                         
                                                            
                                                               y
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         /
                                                         
                                                            
                                                               κ
                                                            
                                                            
                                                               2
                                                            
                                                         
                                                         
                                                            
                                                               )
                                                            
                                                            
                                                               
                                                                  
                                                                     κ
                                                                  
                                                                  
                                                                     1
                                                                  
                                                               
                                                            
                                                         
                                                         ]
                                                         ,
                                                      
                                                      
                                                         for
                                                         
                                                         
                                                            
                                                               y
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         >
                                                         0
                                                         ,
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                         ,
                                                      
                                                      
                                                         otherwise
                                                         ,
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              where κ
                              1
                              >0 and κ
                              2
                              >0. We solve the minimization problem (4) to find the optimal values of the parameters κ
                              1 and κ
                              2 as 
                                 
                                    
                                       
                                          κ
                                       
                                       
                                          1
                                       
                                       
                                          ∗
                                       
                                    
                                    =
                                    1.243
                                 
                               and 
                                 
                                    
                                       
                                          κ
                                       
                                       
                                          2
                                       
                                       
                                          ∗
                                       
                                    
                                    =
                                    62.844
                                 
                              . The minimum squared deviation for the Weibull distribution is thus obtained as Π
                              ∗
                              =0.0000595, which shows that the best Weibull distribution with 
                                 
                                    
                                       
                                          κ
                                       
                                       
                                          1
                                       
                                       
                                          ∗
                                       
                                    
                                 
                               and 
                                 
                                    
                                       
                                          κ
                                       
                                       
                                          2
                                       
                                       
                                          ∗
                                       
                                    
                                 
                               fits the empirical data well.

As in Example 1, we find the optimal values of parameters and the minimum squared deviations for the other common distributions. Table 1
                         shows that Weibull distribution is the one that best fits the empirical data for the base policy because it has the smallest minimum squared deviation.
                           Remark 1
                           Using the above two-step procedure, we also find the best-fitting distributions for other policies, i.e., “free shipping to all orders” (u
                              =0), “free shipping to large orders” (u
                              =75) and “10% discount” (m
                              =12.5%) and observe the following:
                                 
                                    1.
                                    For all policies, the Weibull distribution is always the one that best fits the empirical data.

For all policies, we use the best-fitting Weibull distributions to compute the mean values and standard deviations of the random purchase amount Y. The results are given in Table 2
                                       , where we find that the price discount (or, the reduction of profit margin) can increase the average purchase amount but does not significantly impact the standard deviation.

For the base policy and the policy of free shipping to all orders, the mean value changes but the standard deviation does not significantly change. However, when the free-shipping cutoff level is $75, we find that both mean and standard deviation change significantly. This occurs mainly because, as shown by Lewis et al. [27], when the free shipping threshold is nonzero and finite (e.g., $75), a consumer with an (initial) order size smaller than the cutoff level $75 may increase his or her order size to $75 or more, in order to qualify for free shipping.

It is important to note that the density-estimation procedure we have described above gives results for only the four policies for which Lewis et al. [27] have provided empirical data. Naturally, in order to optimize the objective function π(m, u, v
                        ∗(m, u)) of the two-stage problem in (3), we need a more general procedure to estimate the p.d.f. of the purchase amount random variable for any combination of (m, u).

We learn from Remark 1 that, for the policy of “free shipping to large orders” (m
                        =25%, u
                        =75), each consumer may increase his or her initial purchase amount to quality for free shipping, whereas for the other three policies, the free shipping policy is independent of each consumer’s initial purchase amount, and thus all consumers spend their initial purchase amount. As a result, the mean and the standard deviation for the policy with m
                        =25% and u
                        =75 significantly differ from those for other policies. Next, we first temporarily ignore the policy of “free shipping to large orders,” and construct a stochastic function Y to describe each consumer’s initial purchase amount. Then, building a function ρ(y, u) to model the probability that a consumer increases his or her initial purchase amount y to u or above, we develop the consumer’s random final purchase amount 
                           
                              
                                 
                                    Y
                                 
                                 
                                    ¯
                                 
                              
                              (
                              m
                              ,
                              u
                              )
                           
                        , which can apply to all policies in Table 2.

For now, temporarily ignoring the policy with m
                           =25% and u
                           =75, we note from Remark 1 that the standard deviation of the random variable Y when u
                           =0 is almost the same as that when u
                           =∞, and the reduction of profit margin (from the base value of 25%) does not significantly affect the standard deviation. We thus construct each consumer’s stochastic initial purchase amount function in additive form as,
                              
                                 (6)
                                 
                                    Y
                                    =
                                    K
                                    (
                                    m
                                    ,
                                    u
                                    )
                                    +
                                    
                                       
                                          Y
                                       
                                       
                                          0
                                       
                                    
                                    ,
                                 
                              
                           where K(m, u) is a deterministic function dependent of the decision variables m and u; Y
                           0 represents the random purchase amount for the base policy (m
                           =25%, u
                           =∞). As noted in Example 1, we find that Y
                           0 satisfies the Weibull distribution with the p.d.f. (5) in which the values of parameters are κ
                           1
                           =1.243 and κ
                           2
                           =62.844.
                              Remark 2
                              We now determine the K(m, u) function considering the following three conditions:
                                    
                                       1.
                                       For the base policy, we must have K(25%, ∞)=0, and thus, Y
                                          =
                                          Y
                                          0.

The figures in Table 2 suggest that the policy of “free shipping to all orders” and the base policy have different average order sizes but almost identical standard deviations. Thus, for the policy of “free shipping to all orders”, we will have K(25%, 0)=60.91−58.61=2.3.


                                          Table 2 indicates that the policy of “10% discount” and the base policy have different average order sizes but almost identical standard deviations. Thus, for the “10% discount” policy, we have K(12.5%, ∞)=59.51−58.61=0.9.

To satisfy the above three conditions, we set
                              
                                 (7)
                                 
                                    K
                                    (
                                    m
                                    ,
                                    u
                                    )
                                    ≡
                                    
                                       
                                          α
                                       
                                       
                                          1
                                       
                                    
                                    (
                                    0.25
                                    -
                                    m
                                    )
                                    +
                                    
                                       
                                          α
                                       
                                       
                                          2
                                       
                                    
                                    exp
                                    (
                                    -
                                    γ
                                    u
                                    )
                                    ,
                                 
                              
                           where α
                           1
                           >0 is the weight of the profit margin m, which measures the sensitivity of the purchase amount Y to m; α
                           2
                           >0 and γ
                           >0 are two parameters for the free-shipping cutoff u, which measure the sensitivity of the initial purchase amount Y to u. For details regarding the function K(m, u) in (7), see online Appendix A.1.

As we discussed previously, a consumer with an order size smaller than u may increase her order size to a level equal to or larger than u, in order to qualify for free shipping. In order to reflect this, we consider the following two possibilities:

When u is finite, a consumer with the initial purchase amount of y
                              <
                              u may increase her purchase amount with the probability ρ(y, u). More specifically, if u
                              −
                              y is small, then the consumer would increase y to at least u with a high probability. Otherwise, the consumer increases y to u or more with a small probability. Thus, we write ρ(y, u) as,
                                 
                                    (8)
                                    
                                       ρ
                                       (
                                       y
                                       ,
                                       u
                                       )
                                       =
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               e
                                                            
                                                            
                                                               -
                                                               r
                                                               (
                                                               u
                                                               -
                                                               y
                                                               )
                                                            
                                                         
                                                         ,
                                                      
                                                      
                                                         if
                                                         
                                                         y
                                                         ⩽
                                                         u
                                                         ,
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                         ,
                                                      
                                                      
                                                         otherwise
                                                         ,
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              where r denotes the sensitivity of the probability to the difference between u and y.

The function ρ(y, u) measures the probability that a consumer will increase her initial purchase amount y to u
                              +
                              x, where the p.d.f. ϕ(x) of X is right-skewed because most consumers spends just enough to qualify for free shipping. We thus specify ϕ(x) as follows:
                                 
                                    (9)
                                    
                                       ϕ
                                       (
                                       x
                                       )
                                       =
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               1
                                                            
                                                            
                                                               β
                                                            
                                                         
                                                         
                                                            
                                                               e
                                                            
                                                            
                                                               -
                                                               x
                                                               /
                                                               β
                                                            
                                                         
                                                         ,
                                                      
                                                      
                                                         for
                                                         
                                                         x
                                                         >
                                                         0
                                                         ,
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                         ,
                                                      
                                                      
                                                         otherwise
                                                         ,
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              which has mean E(X)=
                              β and variance σ
                              2
                              =
                              β
                              2.

For finite u, a consumer with y
                           <
                           u will not increase her purchase amount to u or more with probability 1−
                           e
                           −r(u−y), and thus will not qualify for free shipping.

Because of the possibility that a consumer (with an order size y
                           <
                           u) may increase y to u
                           +
                           x, we write the consumer’s random final purchase amount 
                              
                                 
                                    
                                       Y
                                    
                                    
                                       ¯
                                    
                                 
                                 (
                                 m
                                 ,
                                 u
                                 )
                              
                            as,
                              
                                 (10)
                                 
                                    
                                       
                                          Y
                                       
                                       
                                          ¯
                                       
                                    
                                    (
                                    m
                                    ,
                                    u
                                    )
                                    =
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      u
                                                      +
                                                      X
                                                      ,
                                                   
                                                   
                                                      with
                                                      
                                                      probability
                                                      
                                                      ρ
                                                      (
                                                      y
                                                      ,
                                                      u
                                                      )
                                                      ;
                                                   
                                                
                                                
                                                   
                                                      Y
                                                      =
                                                      K
                                                      (
                                                      m
                                                      ,
                                                      u
                                                      )
                                                      +
                                                      
                                                         
                                                            Y
                                                         
                                                         
                                                            0
                                                         
                                                      
                                                      ,
                                                   
                                                   
                                                      with
                                                      
                                                      probability
                                                      
                                                      1
                                                      -
                                                      ρ
                                                      (
                                                      y
                                                      ,
                                                      u
                                                      )
                                                      .
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           where K(m, u) is given in (7). To estimate the parameter values in (10), we perform the following two steps. In the first step, we use Remark 2 to calculate the parameters α
                           1 and α
                           2 in K(m, u) as α
                           1
                           =7.2 and α
                           2
                           =2.3. In the second step, we consider the policy of “free shipping to large orders” (m
                           =25%, u
                           =$75) for the estimation of other parameter values. Specifically, using the policy’s empirical data in online Table B, we solve a minimization problem similar to that in (4), and find that γ
                           =10.55 in K(m, u), r
                           =0.07 in ρ(y, u) [which is given in (8)], and β
                           =26.64 in the p.d.f. ϕ(x) of X [which is given in (9)]. For details regarding this procedure, see online Appendix A.2.
                              Remark 3
                              As indicated in Section 4.2.1, the probability that Y assumes negative values can be shown to be negligibly small. We use (10) to find that E(Y)>7.2(0.25−
                                 m)+
                                 E(Y
                                 0) since 2.3 exp (−10.55u)>0, and the standard deviation of Y is the same as that of Y
                                 0. Recall from Table 2 that E(Y
                                 0)=58.61 and 
                                    
                                       
                                          
                                             Var
                                             (
                                             Y
                                             )
                                          
                                       
                                       =
                                       
                                          
                                             Var
                                             (
                                             
                                                
                                                   Y
                                                
                                                
                                                   0
                                                
                                             
                                             )
                                          
                                       
                                       =
                                       5.82
                                    
                                 . Even if we assume that m
                                 =200%, we find that E(Y)>46.01, which is at least 7.9 (=46.01/5.82) times the standard deviation of 5.82. Hence, with a standard deviation that is significantly smaller than its expected value, Y is unlikely to assume negative values.

Now we can calculate the total sales as 
                              
                                 Z
                                 =
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       =
                                       1
                                    
                                    
                                       N
                                       (
                                       m
                                       ,
                                       u
                                       )
                                    
                                 
                                 
                                    
                                       
                                          
                                             Y
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 m
                                 ,
                                 u
                                 )
                              
                           , and find the expected value of Z as,
                              
                                 (11)
                                 
                                    E
                                    (
                                    Z
                                    )
                                    =
                                    E
                                    [
                                    
                                       
                                          
                                             
                                                Y
                                             
                                             
                                                ¯
                                             
                                          
                                       
                                       
                                          i
                                       
                                    
                                    (
                                    m
                                    ,
                                    u
                                    )
                                    ]
                                    N
                                    (
                                    m
                                    ,
                                    u
                                    )
                                    =
                                    E
                                    [
                                    
                                       
                                          
                                             
                                                Y
                                             
                                             
                                                ¯
                                             
                                          
                                       
                                       
                                          i
                                       
                                    
                                    (
                                    m
                                    ,
                                    u
                                    )
                                    ]
                                    R
                                    (
                                    m
                                    ,
                                    u
                                    )
                                    B
                                    ,
                                 
                              
                           where we compute 
                              
                                 E
                                 [
                                 
                                    
                                       
                                          
                                             Y
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 m
                                 ,
                                 u
                                 )
                                 ]
                              
                            using (18) in online Appendix A.2; R(m, u) is the conversion rate, which is analyzed below; and B is the customer base size (for our numerical study, we set B
                           =10,000, as in the empirical study by Lewis et al. [27]).

We define the conversion rate as the probability that an arriving visitor places an order with the online retailer and thus becomes a customer. The empirical data in Tables B and C (in online Appendix B) suggest the following (which we later use to construct our conversion rate model).
                           
                              1.
                              
                                 Table B shows that, as u increases, the conversion rate decreases.


                                 Table C shows that, as m increases, the conversion rate decreases.


                                 Table B indicates that, when u
                                 →∞, the conversion rate is 18.37%. We also note that, as m
                                 → ∞, no consumer buys any product and the conversion rate should thus be zero.


                                 Table B indicates that, when u
                                 =0, the conversion rate is 21.65%.

Next, we construct a conversion rate function that reflects the above observations. To do this, we divide all arriving visitors into two groups: “buy” (i.e., consumers who place online orders) and “no buy” (i.e., visitors who leave without any purchase). Thus, the conversion rate function can be constructed as a binary choice (response) model. Jing and Lewis [22] used a logistic specification to describe online consumers’ purchase incidence. Similarly, we model the conversion rate as the following logistic function:
                           
                              (12)
                              
                                 R
                                 (
                                 m
                                 ,
                                 u
                                 )
                                 =
                                 
                                    
                                       exp
                                       [
                                       
                                          
                                             θ
                                          
                                          
                                             1
                                          
                                       
                                       m
                                       +
                                       (
                                       ω
                                       +
                                       
                                          
                                             θ
                                          
                                          
                                             2
                                          
                                       
                                       u
                                       
                                          
                                             )
                                          
                                          
                                             -
                                             1
                                          
                                       
                                       +
                                       τ
                                       ]
                                    
                                    
                                       exp
                                       [
                                       
                                          
                                             θ
                                          
                                          
                                             1
                                          
                                       
                                       m
                                       +
                                       (
                                       ω
                                       +
                                       
                                          
                                             θ
                                          
                                          
                                             2
                                          
                                       
                                       u
                                       
                                          
                                             )
                                          
                                          
                                             -
                                             1
                                          
                                       
                                       +
                                       τ
                                       ]
                                       +
                                       1
                                    
                                 
                                 ,
                              
                           
                        where θ
                        1
                        <0 is the parameter of profit margin m and reflects the sensitivity of the conversion rate to the profit margin m. The parameters ω
                        >0 and θ
                        2
                        >0 are related to the CFS cutoff level u and reflect the sensitivity of the conversion rate to the free-shipping cutoff level u. The constant parameter τcan be positive or negative. It is easy to see that our logistic model (12) satisfies the first three conditions above.

We include the parameter ω
                        >0 in (12) because without it the model R(m, u) in (12) reduces to R(m, u)=exp[θ
                        1
                        m
                        +(θ
                        2
                        u)−1
                        +
                        τ]/{exp[θ
                        1
                        m
                        +(θ
                        2
                        u)−1
                        +
                        τ]+1}=1/{1+exp[−θ
                        1
                        m
                        −(θ
                        2
                        u)−1
                        −
                        τ]}. But in this case when u
                        =0, we have R(m, 0)=1, which implies that, if u
                        =0, then all arriving visitors will place online orders. This is obviously contrary to the fourth condition above.

Using the empirical data in Tables B and C in online Appendix B, we obtain the parameter values in the conversion rate model R(m, u) as θ
                        1
                        =−1.17, θ
                        2
                        =0.13, ω
                        =4.85, and τ
                        =1, as shown in online Appendix A.3.

We now use the random purchase amount function 
                        
                           
                              
                                 Y
                              
                              
                                 ¯
                              
                           
                           (
                           m
                           ,
                           u
                           )
                        
                      in Section 4.2.4 and the conversion rate R(m, u) in Section 4.3 to find the optimal values of the profit margin m, the free-shipping threshold u, and the inventory value v for the online retailer. To solve the two-stage model in Section 3.2, we need to first solve (2) for v
                     ∗, given the values of m and u. This calculation requires the p.d.f. g
                     
                        m,u
                     (z) of the random variable 
                        
                           Z
                           =
                           
                              
                                 ∑
                              
                              
                                 i
                                 =
                                 1
                              
                              
                                 N
                                 (
                                 m
                                 ,
                                 u
                                 )
                              
                           
                           
                              
                                 
                                    
                                       Y
                                    
                                    
                                       ¯
                                    
                                 
                              
                              
                                 i
                              
                           
                           (
                           m
                           ,
                           u
                           )
                        
                     , where 
                        
                           
                              
                                 
                                    
                                       Y
                                    
                                    
                                       ¯
                                    
                                 
                              
                              
                                 i
                              
                           
                           (
                           m
                           ,
                           u
                           )
                        
                      is the random final purchase amount as computed in (10). Unfortunately, it is quite difficult to obtain the p.d.f. g
                     
                        m,u
                     (z) analytically. For this reason, we follow an alternate route and use the simulation software Arena and its optimization add-on OptQuest to search for the optimal v
                     ∗. We begin by listing three main issues that we will address in this section.
                        
                           1.
                           We first use (11) to compute the exact values of the expected total purchase amount E(Z) for a number of pairs of m and u. The exact values of E(Z) that are computed without simulation will be later compared with our corresponding simulated results to show the accuracy of our simulation.

We use Arena with OptQuest to search for the optimal solution (m
                              ∗, u
                              ∗, v
                              ∗) that maximizes the retailer’s expected profit π(m, u, v
                              ∗(m, u)) in (3).

We perform sensitivity analysis to investigate the impact of the ratio of the inventory cost parameter I to the unit shipping costs for three order categories (i.e., small, medium, and large orders) on the retailer’s optimal decisions and maximum expected profit.

To test the accuracy of the simulation, we consider the value of E(Z) only. We do so because, for any numerical study without simulation, it would be impossible to evaluate the integrals in (3) that involve the density g
                     
                        m,u
                     (z), even numerically. Thus, we cannot numerically compute the retailer’s two-stage expected profit π(m, u, v
                     ∗(m, u)), given the values of m and u. This is a major reason why we use simulation to search for the optimal solutions.

We now use (11) to compute the expected total purchase amount E(Z), given the values of m and u. For example, we consider the policy of “free shipping to large orders” (m
                        =25%, u
                        =75), and evaluate (11) to find that E(Z)=$122,575. Next, we perform a sensitivity analysis to examine the impacts of m and u on E(Z), as shown by Fig. 1
                        . The computational results are presented in Table A in online Appendix A.4.

From Fig. 1a, we find that, given the value of m, the expected total purchase amount is the highest when the retailer provides the free-shipping service to all online orders, i.e., u
                        =0. When the value of u is increased to a low nonzero level (e.g., a level smaller than $15), we find that the expected total purchase amount decreases. When the retailer raises the CFS threshold to a level greater than $15 but smaller than $40, we find that the expected purchase amount increases. However, if the retailer increases the value of u to a high level (e.g., a level greater than $40), then many visitors may leave without any purchase, and the retailer would thus have fewer sales even though some consumers still increase their purchase amounts.

We find from Fig. 1b that, when the value of u is fixed, the expected total purchase amount E(Z) is decreasing in the profit margin m. Thus, we can draw the conclusion that, if the retailer hopes to increase the total sales (purchase amount), then the retailer should reduce the profit margin to a small but acceptable level, and set the CFS threshold to a proper level. However, if the retailer pursues a high profit margin, then the retailer may need to provide the free-shipping service to all orders.

We now use simulation to compute the optimal solution. We plot a flowchart in Figure A (which is given in online Appendix A.5) to depict the online retailing process in our simulation model. We use Arena—a primary simulation software used in industrial applications—to build our simulation model. Arena provides a variety of modules for simulation. For more information regarding how to use Arena for simulation, see, e.g., Kelton et al. [23].

We simulate the online system—when the values of m and v are given as in Section 5.1—to find the total purchase amounts, and compare the simulation results with those computed by evaluating E(Z) in (11). For our simulation, we perform 100 replications each terminating when 10,000 visitors have arrived. For example, when m
                           =25% and u
                           =75, we find that the average value of the total purchase amount from our simulation is $122,997. In order to examine the accuracy of this simulation result, we use Output Analyzer, an add-on software of Arena, to find that the half width for the 95% confidence level is 651, which is significantly small compared with the simulated purchase amount $122,997. In fact, this simulation result is very close to the result E(Z)=$122,571 that is computed using (11). The difference between our simulation and the computational results is only 0.35%.

In online Table 3
                           , we present the simulation values of E(Z) for each pair of m and u, when m is increased from 0.125 to 1.25 in steps of 0.125 and u is increased from 0 to 135 in steps of 15. Moreover, we compare these results with those computational results in online Table A, and compute the differences in percentage. We find from Table 3 that the maximum difference is only 1.84% (when m
                           =125% and u
                           =0); this demonstrates that the results generated by our simulation model are accurate and thus reliable for our subsequent search for optimal solutions.

We use OptQuest—which is an optimization add-on for Arena—to search for the optimal solution (m
                           ∗, u
                           ∗, v
                           ∗). Note that, given the values of m, u and v, the service level G
                           
                              m,u
                           (v) (generated by our simulation model) is the ratio of the total realized sales to the sum of the total realized sales and the lost sales. We find from (2) that the optimal service level G
                           
                              m,u
                           (v
                           ∗), when m and u are given, is computed as m/[I(1+
                           m)+
                           m]. Thus, we search for the optimal solution (m
                           ∗, u
                           ∗, v
                           ∗) that maximize the profit (which is computed as, sale revenue—the acquisition cost—total shipping cost—inventory cost) subject to the service level (generated by the simulation) equal to the optimal level m/[I(1+
                           m)+
                           m].

In agreement with [16], we set I
                           =0.385%. In addition, we find from [27] that, when a consumer’s final purchase amount is 
                              
                                 
                                    
                                       Y
                                    
                                    
                                       ¯
                                    
                                 
                                 (
                                 m
                                 ,
                                 u
                                 )
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       ¯
                                    
                                 
                              
                           , the shipping cost 
                              
                                 S
                                 (
                                 
                                    
                                       y
                                    
                                    
                                       ¯
                                    
                                 
                                 )
                              
                            is given as
                              
                                 (13)
                                 
                                    S
                                    (
                                    
                                       
                                          y
                                       
                                       
                                          ¯
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      6.5
                                                      ,
                                                   
                                                   
                                                      if
                                                      
                                                      0
                                                      ⩽
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            ¯
                                                         
                                                      
                                                      ⩽
                                                      50
                                                      ;
                                                   
                                                
                                                
                                                   
                                                      7.5
                                                      ,
                                                   
                                                   
                                                      if
                                                      
                                                      50
                                                      <
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            ¯
                                                         
                                                      
                                                      ⩽
                                                      75
                                                      ;
                                                   
                                                
                                                
                                                   
                                                      10
                                                      ,
                                                   
                                                   
                                                      if
                                                      
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            ¯
                                                         
                                                      
                                                      >
                                                      75
                                                      .
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           Note that, as Lewis et al. [27] stated, the shipping cost 
                              
                                 S
                                 (
                                 
                                    
                                       y
                                    
                                    
                                       ¯
                                    
                                 
                                 )
                              
                            in (13) was estimated by the firm in their empirical study.

Setting the initial point (m
                           0, u
                           0, v
                           0)=(25%, 100, 85,000), we use Arena and OptQuest to search for the optimal solution, which is found as (m
                           ∗, u
                           ∗, v
                           ∗)=(52.13%, 156.07, 88783.64). The resulting expected (average) profit is $26876.5, and the expected service level is 98.89%, which equals what we find by computing m/[I(1+
                           m)+
                           m]. The statistical summary generated by Arena’s Output Analyzer is provided as follows:
                              
                                 
                                    
                                    
                                    
                                    
                                    
                                    
                                       
                                          
                                          Average
                                          Minimum
                                          Maximum
                                          Half width for the 95% conf. level
                                       
                                    
                                    
                                       
                                          Profit
                                          $26,876.5
                                          $26,611.5
                                          $27,141.5
                                          265
                                       
                                       
                                          Service level
                                          98.89%
                                          98.33%
                                          99.45%
                                          0.56%
                                       
                                    
                                 
                              
                           
                        

From the above statistical summary, we find that, for both profit and service level, the half width for the 95% confidence level is significantly smaller than the average value. This demonstrates that the number of replications (i.e., 100) is enough to assure the accuracy of our results.

The above results indicate that, given an initial point, we can use Arena and OptQuest to find an optimal solution for our two-stage problem. To show the uniqueness of the above optimal solution [i.e., (m
                           ∗, u
                           ∗, v
                           ∗)=(52.13%, 156.07, 88783.64)], we need to examine whether or not the search process with different initial points can converge to this solution. For the convergence test, we consider 20 different initial points by, ceteris paribus, (i) increasing the value of m
                           0 from 5% to 50% in increments of 5%, and (ii) increasing the value of u
                           0 from 70 to 160 in steps of 10. Note that we do not set different initial points of v for the convergence test, because, as Theorem 1 shows, the retailer’s optimal inventory value v
                           ∗ is uniquely defined by the values of m
                           ∗ and u
                           ∗.

For each initial point, we repeat the above search process to find a corresponding optimal solution, as given in Table 4
                           , where we find that the optimal solutions for all initial points are very close to that found above when the initial point is (m
                           0, u
                           0)=(25%, 100). Such a result demonstrates the convergence of the two-stage decision model that is specified in Section 3.

From our simulation result we find that, if the online retailer adopts the two-stage decision process, then the retailer should set a high CFS cutoff level so that most consumers absorb the shipping costs. However, setting a high free-shipping threshold may deter some consumers from making purchases. To assure profitability, this retailer should also increase the profit margin to a high level.

For our simulation in Section 5.2, we need the values of I (% of inventory value in dollar) and the unit shipping cost 
                           
                              S
                              (
                              
                                 
                                    y
                                 
                                 
                                    ¯
                                 
                              
                              )
                           
                         (for the purchase amount 
                           
                              
                                 
                                    y
                                 
                                 
                                    ¯
                                 
                              
                           
                        ), which, however, may be inaccurate. Hence, we next perform a sensitivity analysis to address the following critical question: How will the online retailer’s optimal decisions and maximum profit change if the values of I and 
                           
                              S
                              (
                              
                                 
                                    y
                                 
                                 
                                    ¯
                                 
                              
                              )
                           
                         are different from the above estimated values?

To simplify our analysis, we consider the impact of the ratio of I to the unit shipping costs for small, medium, and large orders on the optimal decisions (m
                        ∗, u
                        ∗, v
                        ∗) and the maximum expected profit π(m
                        ∗, u
                        ∗, v
                        ∗). Noting from our numerical experiment in Section 5.2 that the ratios of I to the unit shipping costs for small, medium, and large orders are 0.06%, 0.05%, and 0.04%, we increase the ratio of I to the unit shipping cost for small orders from 0.04% to 0.13% in increments of 0.01%. We also increase the ratio of I to the unit shipping cost for medium orders from 0.03% to 0.12% in steps of 0.01%, and the ratio of I to the unit shipping cost for large orders from 0.01% to 0.11% in steps of 0.01%. At each step, we simulate the operation of the online retailer for the corresponding ratios for three categories of orders. Thus, as shown in Table 5
                        , we consider ten cases for the sensitivity analysis.

To observe the impact of the ratio on m
                        ∗ and u
                        ∗, we plot Fig. 2
                        a, which shows that, as the ratio decreases, the retailer should decrease his optimal profit margin but increase his optimal CFS cutoff level at a decreasing rate. Another important finding is drawn as follows: when the ratio is larger than a specific level (e.g., the ratios for the small, medium and large orders are 0.09%, 0.08%, and 0.07%, respectively), the optimal profit margin and CFS threshold change largely; but, when the ratio is smaller than the specific level, the optimal profit margin and free-shipping threshold change at a small rate.

As Fig. 2b indicates, the plot of the optimal inventory value includes four segments, which are specified as follows:
                           
                              1.
                              The first segment corresponds to the situation in which the shipping cost relative to the inventory cost is sufficiently small such that the ratios for the small, medium and large orders are larger than 0.12%, 0.11%, and 0.10%, respectively. In this segment, when the ratio decreases, the optimal inventory value should increase.

The second segment corresponds to the situation in which the ratios for the small, medium and large orders are respectively smaller than 0.12%, 0.11%, and 0.10% but greater than 0.10%, 0.09%, and 0.08%. For this segment, we find that, as the ratio decreases (i.e., the relative shipping cost increases), the optimal inventory value decreases.

The third segment corresponds to the situation in which the ratios for the small, medium and large orders are respectively smaller than 0.10%, 0.09%, and 0.08% but greater than 0.05%, 0.04%, and 0.03%. We find that, in this segment, the retailer should increase his inventory as the ratio decreases.

The fourth segment corresponds to the situation in which the ratio for the small, medium and large orders are respectively smaller than 0.05%, 0.04%, and 0.03%. For this segment, the retailer should decrease his inventory as the ratio is reduced.

We find that the curve for the total purchase amount in Fig. 1a and that for the inventory value in Fig. 2b are very similar. The reason is as follows. From (2) we find that the optimal service level G
                        
                           m,u
                        (v
                        ∗) depends on I and m. Thus, when we increase the shipping cost 
                           
                              S
                              (
                              
                                 
                                    y
                                 
                                 
                                    ¯
                                 
                              
                              )
                              ,
                              m
                           
                         decreases [as shown in Fig. 2a] and thus G
                        
                           m,u
                        (v
                        ∗) also decreases. However, according to our simulation, we find that the service level decreases at a very small rate. Note that the service level in our simulation model can be actually approximated as: min (inventory value, total purchase amount)/total purchase amount. As a result, the optimal inventory should be roughly proportional to the total purchase amount.

We also find from Fig. 2b that, as the ratio decreases (i.e., the shipping cost relative to the inventory cost increases), the retailer’s maximum profit decreases. This reveals the important fact that the shipping cost significantly affects the profitability of the online retailer. Even though the retailer uses the pricing (profit margin) and free-shipping strategies, the retailer still experiences loss of profits if the shipping cost is increased.

@&#CONCLUSION@&#

We consider a two-stage decision process in which the retailer first makes optimal decisions on the profit margin and the contingent free shipping (CFS) threshold, and then determines the optimal inventory value that maximizes the expected profit for a promotion period. Since the two-stage decision model is very complicated, it is impossible to find the optimal solution analytically and numerically without simulation. Hence, with empirical data provided by Lewis et al. [27], we use Arena to simulate the operation of the online retailer, and then use OptQuest to find the optimal solutions. In addition, we conduct sensitivity analyses to examine how the retailer’s optimal decisions and maximum profit change when the ratio of the unit holding and salvage cost to the unit shipping cost is different from that in the empirical study in [27]. The sensitivity analysis also delivers some important managerial insights.

The main contributions of our paper are summarized as follows.
                        
                           1.
                           We simulate an online retailing operation using the statistics of the retailer’s sales (e.g., percentages of small, medium and large orders) provided by Lewis et al. [27]. Even with such limited data, we find the best-fitting purchase amount function and conversion rate. Thus, we provide a framework for numerical studies with limited empirical data.

We find that the reduction of profit margins does not significantly change the standard deviation of consumers’ order sizes (purchase amounts) but increases the average order size. However, if the retailer applies a nonzero, finite CFS threshold, then both average value and standard deviation of consumers’ order sizes are changed.

We use Arena to simulate the online retailing operation and use OptQuest to find the optimal decisions and maximum profit. The simulation with Arena and the optimization with OptQuest are extensively used in industry but, to our knowledge, have not been widely applied in academia, as discussed in Section 1. In our paper, we provide a particular discussion about how to use Arena for simulation and how to use OptQuest for optimization. This is expected to help other scholars use this technique for their research.

We conduct a sensitivity analysis, and draw some important managerial insights. For example, the ratio of inventory to shipping cost significantly affects the retailer’s optimal decision and maximum profit. As the ratio decreases, the retailer should decrease his optimal profit margin but increase his optimal CFS threshold at a decreasing rate. Moreover, the expected profit is increasing in the ratio.

In this paper, we have made four major model assumptions, which may limit the applicability of our model. In the future, it would be useful to develop a new (and feasible) method to address our research problems without these assumptions. For example, we may relax Assumption 1 to consider multiple products with different profit margins. The relaxation of one or more assumptions can generate more interesting results even though it would result in very complicated optimization problems.

@&#ACKNOWLEDGMENTS@&#

The authors thank two anonymous referees for their insightful comments that helped improve the paper.

Supplementary data associated with this article can be found, in the online version, at http://dx.doi.org/10.1016/j.ejor.2013.04.006.


                     
                        
                           Supplementary Material
                           
                              Estimation, Computation Results, and Empirical Statistics.
                           
                           
                        
                     
                  

@&#REFERENCES@&#

