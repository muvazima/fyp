@&#MAIN-TITLE@&#3-D object modeling from 2-D occluding contour correspondences by opti-acoustic stereo imaging

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           3-D object modeling from occluding contours from multi-modal optical/sonar stereo.


                        
                        
                           
                           Imaging same contour by zero-baseline stereo, circumventing dense feature matching.


                        
                        
                           
                           Improve reconstruction accuracy from 3-D contour positions and orientations.


                        
                        
                           
                           Identifying degenerate configurations and simple misalignment rectification.


                        
                        
                           
                           Flexibility to use navigation data or a few feature tracks for 3-D trajectory estimation.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Opti-acoustic imaging

Stereo imaging

3-D object reconstruction and modeling

Occluding contours

@&#ABSTRACT@&#


               
               
                  Utilizing in situ measurements to build 3-D volumetric object models under variety of turbidity conditions is highly desirable for marine sciences. To address the ineffectiveness of feature-based structure from motion and stereo methods under poor visibility, we explore a multi-modal stereo imaging technique that utilizes coincident optical and forward-scan sonar cameras, a so-called opti-acoustic stereo imaging system. The challenges of establishing dense feature correspondences in either opti-acoustic or low-contrast optical stereo images are avoided, by employing 2-D occluding contour correspondences, namely, the images of 3-D object occluding rims. Collecting opti-acoustic stereo pairs while circling an object, matching 2-D apparent contours in optical and sonar views to construct the 3-D occluding rim, and computing the stereo rig trajectory by opti-acoustic bundle adjustment, we generate registered samples of 3-D surface in a reference coordinate system. A surface interpolation gives the 3-D object model.
                  In addition to the key advantage of utilizing range measurements from sonar, the proposed paradigm requires no assumption about local surface curvature as traditionally made in 3-D shape reconstruction from occluding contours. The reconstruction accuracy is improved by computing both the 3-D positions and local surface normals of sampled contours. We also present (1) a simple calibration method to estimate and correct for small discrepancy from the desired relative stereo pose; (2) an analytical analysis of the degenerate configuration that enables special treatment in mapping (tall) elongated objects with dominantly vertical edges. We demonstrate the performance of our method based on the 3-D surface rendering of certain objects, imaged by an underwater opti-acoustic stereo system.
               
            

@&#INTRODUCTION@&#

Building 3-D volumetric models of underwater objects (e.g., natural reef objects, shipwrecks, and other sub-sea structures) under a variety of turbidity conditions by utilizing in situ measurements is a highly desirable capability for marine sciences. Among various “Shape from X” approaches in computer vision, feature-based structure from motion and stereo methods have been explored extensively for underwater mapping [1–7]. Unfortunately, these become less and less effective with rising turbidity level and (or) in the presence of other artifacts, e.g., sun flicker in shallow waters, non-uniformity of artificial lighting in deep waters, as well as weak texture. While the emergence of (X-box) Kinect [8] has addressed absence of texture and surface markings for feature matching in terrestrial domain, the technology is ineffective in underwater, due to the very high degree of IR attenuation.

This motivates the exploration of alternative approaches that circumvent the need to establish dense correspondences. A suitable solution can be derived by exploiting the object boundaries and (or) occluding contours, namely the boundaries between object silhouettes and the background. Fig. 1
                     (a,b) shows two low-resolution images of reef objects (downloaded from internet). These boundaries or contours can be readily determined (e.g., as the results in (c) based on LoG operator, without any adjustment to optimize detection and accuracy). However, dense features are hard to identify and much more difficult to match robustly in low-contrast underwater video and (or) stereo pairs, due to poor visibility and lighting, as well as other adverse conditions.

The classic paper by Koenderink [9] unveils many novel findings and ideas about the relationship between the local shape properties of smooth surfaces and their apparent contours; e.g., convexities, concavities, and inflections of occluding contours for elliptic, hyperbolic, and parabolic surfaces, respectively, and that the sign of the apparent contour curvature follows that of the local intrinsic (Gaussian) curvature of the surface. His contributions paved the road for the development of methods to reconstruct smooth objects in 3-D, from the images of their apparent contours. The primary complexity arises from the fact that occluding contours of smooth surfaces vary with the viewer pose, and thus there is no correspondence among occluding contour points in multiple nearby views, in the sense of stereo vision. Generally, three consecutive images in a differential formulation are employed to characterize a local approximation of the surface up to order two, including the recovery of depth information. The surface is parametrized with respect to the occluding contours and the intersection of the surface with the epipolar plane. Here, an epipolar correspondence is defined between two points on two successive occluding contours, belonging to the epipolar plane defined by the two camera projection centers and one of the points.

Giblin and Weiss [10] demonstrated the 3-D surface reconstruction for planar viewer motion under the assumption of orthographic projection. Some later works based on perspective projection for depth computation utilize the osculating circle, assuming that the camera motion is linear [11,12], or that the surface is locally cylindrical [13]. Here, each rim point is reconstructed by determining the osculating circle from the point and epipolar correspondents on the two neighboring rims. By projecting the viewing lines onto a plane, either an epipolar plane [11,12] or radial plane [13], the circle tangent to these three directions is computed. Szeliski and Weiss [14] tackle the numerical instability of differential formulations utilizing discrete observations and numerical approximation [15] – the main drawback of these earlier methods – with a Kalman filtering and smoothing formulation to compute the epipolar curves over the surface with an estimate of uncertainty. Boyer and Berger [15] utilize the discrete views of occluding contours under general viewer motion, a depth formulation based on the local approximation of surface up to order two, and taking advantage of an osculating quadratic (instead of the osculating circle) for surface interpolation between occluding contours.

In contrast to these local approaches, other methods make use of a global surface reconstruction scheme. For example, Zhao [16] proposed a direct method based on regularized uniform bi-cubic B-spline surface patches. Here a set of overlapping B-spline patches constituting the object surface are reconstructed and fused to obtain a global 3-D shape. The approach requires a complete a priori parametrization of the surface, which is usually not available [15]. Kang et al. [17] employ the duality of points and tangent planes and algebraic surface representation by implicit polynomials of degree 2 or higher.

In underwater, the deployment of a camera on a submersible platform undergoing motion with six degrees of freedom adds additional complexities to the common bottlenecks of these methods: e.g., (1) surface reconstruction requires three images from nearby known relative camera poses around a smooth object, to estimate the osculating circle, the local normal curvature of and the distance to a surface point; (2) numerical instability exists due to the differential analysis and estimation of second order derivatives to compute the depth of the contour generator. Referring to Fig. 1(d,d′), an attractive approach is offered by opti-acoustic stereo imaging, where we deploy optical and forward-scan (FS) sonar video cameras with overlapping views [18–21]. The utilization of different but complementary measurements, including range from sonar, offers key advantages. For example, traditional binocular stereo systems require a certain minimum baseline based on the target distance. With small baselines (e.g., imposed by the physical size and constrains of underwater platforms), the 3-D reconstruction by triangulation with two (nearly) parallel optical rays is highly ill-conditioned. In contrast, “opti-acoustic stereo triangulation” is well-posed by utilizing optical rays and range spheres (and azimuth planes) from sonar measurements [20].

Unfortunately, the opti-acoustic correspondence still remains as an unsolved problem. While a geometric approach by exploiting the stereo and motion epipolar geometries in opti-acoustic video sequences has been proposed [22], building 3-D object models requires establishing dense feature correspondences over the sonar and (or) optical sequences. The dense feature matching problem can be circumvented by utilizing the 2-D apparent contours in the images acquired by the opti-acoustic stereo imaging system in a special configuration, where the projection centers of the two cameras coincide and their “viewing axes” align. That is, the sonar and optical cameras view the target from the same vantage point. While traditional binocular vision offers little/no advantage for 3-D object reconstruction by utilizing occluding contours, the proposed multi-modal approach enables devising a simple practical 3-D object reconstruction solution based on: (1) exploiting redundant and complementary visual cues in 2-D optical and sonar images at each position of the sensor platform, namely, opti-acoustic correspondences in the traditional stereo vision sense; (2) making use of images at each time instant, without the need to estimate second derivatives to compute depth from three (or more) nearby views; (3) overcoming the correspondence problem by making use of opti-acoustic epipolar geometry, with cameras at (roughly) the same position that image the same occluding contour; (4) enabling the recovery of both the 3-D position and the surface normal at each point on the occluding rim; (5) removing any restriction on the camera motion; (6) relaxing the surface smooth assumption that enables application to arbitrary shapes, excluding surfaces with concavities where no viewing ray/plane of the optical/sonar camera can be made tangent to the surface. It should be noted that the current method, as most previous techniques, makes no distinction between occluding contours and standard structural edges, where the surface normal is discontinuous. Most natural objects, as well as manmade structures deployed underwater have smooth surfaces,
                        2
                        Either originally or due to algea, coral and other marine growth.
                     
                     
                        2
                      giving rise to occluding contours. However, to identify the latter, one may estimate the surface normal from the gradient of computed 3-D positions of contour points, and compare with the given solution (that assumes the boundary to be an occluding contour). In practice, applying finite difference approximation to the noisy estimates of 3-D contour points is expected to yield inaccurate surface normal estimates. Further investigation, beyond the scope of this work, is warranted to quantify the impact on the 3-D reconstruction accuracy.

Two other technical contributions of this work include the derivation of the degenerate target configuration and a simple calibration method. The former result is rather important in planing an effective data acquisition strategy based on the target shape, e.g., when mapping a (tall) elongated object with dominantly vertical edges/contours. Here, either the stereo pose can be adjusted or the data can be acquired over two or more paths. The new calibration method provides a simple solution for our special stereo setup, enabling adjustment to rectify discrepancy from the desired relative stereo pose.

Finally, two other practical issues should not be overlooked. First, the visibility constraint from turbidity can be addressed by imaging objects at shorter distances. Next, the zero baseline requirement is a desirable feature for deployment on small submersible platforms, where the stereo rig dimension is no larger than the sonar size.

In the balance, we give the relevant technical background in Section 2. In Section 3, we describe various components of the 3-D reconstruction process. These comprise of the detection of 2-D apparent contours and construction of 3-D occluding contours, local surface normal estimation, optimal trajectory estimation by opti-acoustic bundle adjustment, registration of 3-D occluding contours, and dense 3-D object modeling by surface interpolation. We present the results of experiments with real data in Section 4, and a summary of our contributions in Section 5. Finally, the appendix covers both the degenerate configuration of the opti-acoustic stereo system relative to the target, and a simple method to estimate and rectify the misalignment between the two cameras.

@&#BACKGROUND@&#


                        Fig. 2
                         depicts the coordinate systems of coincident sonar and optical cameras, sharing the same origin. While the rectangular coordinate 
                           
                              
                                 
                                    P
                                 
                                 
                                    o
                                 
                              
                              =
                              
                                 
                                    [
                                    
                                       
                                          X
                                       
                                       
                                          o
                                       
                                    
                                    ,
                                    
                                       
                                          Y
                                       
                                       
                                          o
                                       
                                    
                                    ,
                                    
                                       
                                          Z
                                       
                                       
                                          o
                                       
                                    
                                    ]
                                 
                                 
                                    T
                                 
                              
                           
                         is commonly adopted to represent a scene surface point P in an optical coordinate system, the spherical coordinates 
                           
                              [
                              R
                              ,
                              θ
                              ,
                              φ
                              ]
                           
                         – with range 
                           
                              R
                           
                        , azimuth angle 
                           
                              θ
                           
                        , and elevation angle 
                           
                              φ
                           
                         – is more suitable for the presentation of 3D points in the sonar reference frame. The relationship to the rectangular coordinates in the sonar reference frame is given by
                           
                              (1)
                              
                                 
                                    
                                       P
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 R
                                 
                                    
                                       
                                          
                                             
                                                
                                                   sin
                                                   θ
                                                   cos
                                                   ϕ
                                                
                                             
                                             
                                                
                                                   cos
                                                   θ
                                                   cos
                                                   ϕ
                                                
                                             
                                             
                                                
                                                   sin
                                                   ϕ
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        Conversely, we have
                           
                              (2)
                              
                                 R
                                 =
                                 
                                    
                                       
                                          
                                             X
                                          
                                          
                                             s
                                          
                                          
                                             2
                                          
                                       
                                       +
                                       
                                          
                                             Y
                                          
                                          
                                             s
                                          
                                          
                                             2
                                          
                                       
                                       +
                                       
                                          
                                             Z
                                          
                                          
                                             s
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 ,
                                 
                                 θ
                                 =
                                 
                                    
                                       tan
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 (
                                 
                                    
                                       X
                                    
                                    
                                       s
                                    
                                 
                                 /
                                 
                                    
                                       Y
                                    
                                    
                                       s
                                    
                                 
                                 )
                                 ,
                                 
                                 and
                                 
                                 φ
                                 =
                                 
                                    
                                       sin
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 (
                                 
                                    
                                       Z
                                    
                                    
                                       s
                                    
                                 
                                 /
                                 R
                                 )
                                 .
                              
                           
                        
                     

A 2-D FS sonar image 
                           
                              I
                              (
                              R
                              ,
                              θ
                              )
                           
                         represents the intensity of the scattered acoustic energy from the scene surfaces, at distances (ranges) 
                           
                              R
                           
                         in azimuth directions 
                           
                              θ
                           
                         relative to the sensor. The imaged volume is confined by the cross-range field of view 
                           
                              {
                              -
                              
                                 
                                    θ
                                 
                                 
                                    max
                                 
                              
                              :
                              
                                 
                                    θ
                                 
                                 
                                    max
                                 
                              
                              }
                           
                        , the vertical width 
                           
                              {
                              -
                              
                                 
                                    ϕ
                                 
                                 
                                    max
                                 
                              
                              :
                              
                                 
                                    ϕ
                                 
                                 
                                    max
                                 
                              
                              }
                           
                         of each transmitted beam, and the user-selected down-range window 
                           
                              {
                              
                                 
                                    R
                                 
                                 
                                    min
                                 
                              
                              :
                              
                                 
                                    R
                                 
                                 
                                    max
                                 
                              
                              }
                           
                        . A Dual-frequency IDentification SONar (DIDSON) system, used to acquire the images for this work [23], transmits 96 beams with horizontal beam-width of roughly 0.3 [deg] (
                           
                              
                                 
                                    θ
                                 
                                 
                                    max
                                 
                              
                              ≈
                              14.4
                           
                         [deg]). The unknown elevation angle 
                           
                              ϕ
                           
                         is constrained by the vertical beam width 
                           
                              2
                              
                                 
                                    ϕ
                                 
                                 
                                    max
                                 
                              
                           
                         (
                           
                              
                                 
                                    ϕ
                                 
                                 
                                    max
                                 
                              
                              =
                              7
                           
                         [deg] for DIDSON).

We utilize the so-called beam-bin data 
                           
                              I
                              (
                              R
                              ,
                              θ
                              )
                           
                         to generate the 2-D polar image 
                        
                           
                              I
                              (
                              
                                 
                                    x
                                 
                                 
                                    s
                                 
                              
                              ,
                              
                                 
                                    y
                                 
                                 
                                    s
                                 
                              
                              )
                           
                         by transforming the two measurable polar coordinates of a 3-D point (namely, range and azimuth values 
                           
                              {
                              R
                              ,
                              θ
                              }
                           
                        ) to points 
                           
                              s
                              =
                              [
                              
                                 
                                    x
                                 
                                 
                                    s
                                 
                              
                              ,
                              
                                 
                                    y
                                 
                                 
                                    s
                                 
                              
                              ]
                              =
                              R
                              [
                              sin
                              θ
                              ,
                              cos
                              θ
                              ]
                           
                        , on the zero-elevation plane:
                           
                              (3)
                              
                                 s
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       cos
                                       ϕ
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            Y
                                                         
                                                         
                                                            s
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       φ
                                       =
                                       0
                                    
                                 
                                 .
                              
                           
                        We conclude that the sonar projection is modeled as the mapping of 3-D points P onto the zero-elevation plane, along meridians defined by the range and azimuth angles of the 3-D point; see Fig. 2. Here, the distinction from perspective projection in optical images is also highlighted.

Setting the stereo baseline to zero (
                           
                              d
                              =
                              0
                           
                        ), the optical and sonar coordinate systems are related by the rotation matrix 
                           
                              R
                           
                         (see Fig. 2):
                           
                              (4)
                              
                                 R
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   1
                                                
                                                
                                                   0
                                                
                                                
                                                   0
                                                
                                             
                                             
                                                
                                                   0
                                                
                                                
                                                   0
                                                
                                                
                                                   1
                                                
                                             
                                             
                                                
                                                   0
                                                
                                                
                                                   -
                                                   1
                                                
                                                
                                                   0
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        Referring to Fig. 3
                        (b), the 3-D occluding contours C projects onto corresponding 2-D apparent contours 
                           
                              
                                 
                                    C
                                 
                                 
                                    o
                                 
                              
                           
                         and 
                           
                              
                                 
                                    C
                                 
                                 
                                    s
                                 
                              
                           
                         in an opti-acoustic stereo pair. The opti-acoustic epipolar geometry plays a key role in the fusion of 2-D optical and sonar contours in order to reconstruct the 3-D contour C at each position of the stereo rig. Utilizing the epipolar geometry given in [18], we can map each point on 
                           
                              
                                 
                                    C
                                 
                                 
                                    o
                                 
                              
                           
                         to the corresponding epipolar curve in the sonar view. To elaborate, the projection ray of a point 
                           
                              o
                              =
                              (
                              
                                 
                                    x
                                 
                                 
                                    o
                                 
                              
                              ,
                              
                                 
                                    y
                                 
                                 
                                    o
                                 
                              
                              ,
                              f
                              )
                           
                         on 
                           
                              
                                 
                                    C
                                 
                                 
                                    o
                                 
                              
                           
                         (f is the focal length) can be expressed by 
                           
                              
                                 
                                    P
                                 
                                 
                                    o
                                 
                              
                              =
                              
                                 
                                    Z
                                 
                                 
                                    o
                                 
                              
                              (
                              
                                 
                                    x
                                 
                                 
                                    o
                                 
                              
                              /
                              f
                              ,
                              
                                 
                                    y
                                 
                                 
                                    o
                                 
                              
                              /
                              f
                              ,
                              1
                              )
                           
                        . This is transformed to the sonar coordinate system:
                           
                              (5)
                              
                                 
                                    
                                       P
                                    
                                    
                                       s
                                    
                                 
                                 (
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       RP
                                    
                                    
                                       o
                                    
                                 
                                 (
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                                 )
                                 .
                              
                           
                        We can calculate the range 
                           
                              R
                           
                         and bearing 
                           
                              θ
                           
                         in the sonar view:
                           
                              (6)
                              
                                 R
                                 (
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                                 )
                                 =
                                 ‖
                                 
                                    
                                       P
                                    
                                    
                                       s
                                    
                                 
                                 (
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                                 )
                                 ‖
                                 =
                                 ‖
                                 
                                    
                                       P
                                    
                                    
                                       o
                                    
                                 
                                 ‖
                                 ,
                                 
                                 θ
                                 (
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       tan
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             X
                                          
                                          
                                             s
                                          
                                       
                                    
                                    
                                       
                                          
                                             Y
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       tan
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             X
                                          
                                          
                                             o
                                          
                                       
                                    
                                    
                                       
                                          
                                             Z
                                          
                                          
                                             o
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        One representation of the epipolar curve is given by the sonar range equation:
                           
                              (7)
                              
                                 R
                                 (
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       1
                                       +
                                       
                                          
                                             (
                                             
                                                
                                                   x
                                                
                                                
                                                   o
                                                
                                             
                                             /
                                             f
                                             )
                                          
                                          
                                             2
                                          
                                       
                                       +
                                       
                                          
                                             (
                                             
                                                
                                                   y
                                                
                                                
                                                   o
                                                
                                             
                                             /
                                             f
                                             )
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                              
                           
                        Alternatively, we can express it explicitly in terms of the coordinates of sonar image points on the curve:
                           
                              (8)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 R
                                 (
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                                 )
                                 
                                    
                                       
                                          
                                             
                                                
                                                   sin
                                                   θ
                                                   (
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   cos
                                                   θ
                                                   (
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        In either case, the contour can be confined to the range 
                           
                              
                                 
                                    Z
                                 
                                 
                                    o
                                 
                              
                              =
                              [
                              
                                 
                                    Z
                                 
                                 
                                    o
                                 
                                 
                                    min
                                 
                              
                              ,
                              
                                 
                                    Z
                                 
                                 
                                    o
                                 
                                 
                                    max
                                 
                              
                              ]
                           
                        , if known a priori.

In our opti-acoustic stereo, the two cameras are manually arranged to satisfy the assumed geometry: (1) small (negligible) baseline relative to target distances; (2) aligned sonar and optical coordinate systems. Any (small) adjustment to the camera orientations, if necessary, can be made by the calibration method given in the appendix. For our special geometry, this is based on a closed-form solution, in comparison to earlier iterative optimization method that applies for any arbitrary stereo pose [19].


                     Fig. 3(a) depicts the flowchart of the proposed 3-D reconstruction technique. The key steps comprise of apparent 2-D image contour detection, 3-D occluding contour reconstruction, local surface normal estimation, 3-D trajectory estimation, and representation (alignment) of 3-D occluding contours in the reference frame, as well as dense reconstruction.

The 2-D apparent contours are the projections of 3-D surface points at which the rays passing through the optical or sonar projection center are tangent to the surface; see Fig. 3(c).

In underwater optical images, these contours are detected by edge detection. In a FS sonar image, only a small number of distinct regions exist, comprising typically of dark shadow areas, horizontally elongated highlights due to objects with strong reflectance, and intermediate values due to bottom surface diffuse scattering and other objects with weaker reflectance. In particular, the deployment of FS sonar at grazing incidence is preferred to maximize diffuse backscatter (relative to the specular component), leads to strong shadows of 3-D objects on the sea bottom. These provide a strong cue for 3-D target detection and identifying their occluding contours 
                           
                              
                                 
                                    C
                                 
                                 
                                    s
                                 
                              
                           
                        . However, we can confine the search region in locating a desired target, that is selected/identified in the optical image.
                           3
                           The process can be reversed, starting with a target in the sonar image, to be localized in the optical image.
                        
                        
                           3
                        
                     

At each stereo rig position, we can register the optical and sonar images based on the model of the background plane 
                           
                              d
                              ·
                              
                                 
                                    P
                                 
                                 
                                    o
                                 
                              
                              =
                              -
                              1
                           
                        ; this is fit to bottom surface features from those tracked and utilized for trajectory estimation by bundle adjustment
                           4
                           A RANSAC-based plane fitting model to eliminate outlier points (not lying on the plane) is used.
                        
                        
                           4
                        ; see Section 3.2.2.

The depth of a 3-D planar point, imaged in the optical image at 
                           
                              o
                           
                         is given by
                           
                              (9)
                              
                                 
                                    
                                       Z
                                    
                                    
                                       o
                                    
                                 
                                 =
                                 -
                                 
                                    
                                       f
                                    
                                    
                                       d
                                       ·
                                       o
                                    
                                 
                                 .
                              
                           
                        Next, we employ the transformation
                           
                              (10)
                              
                                 
                                    
                                       P
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       RP
                                    
                                    
                                       o
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   -
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       Zo
                                    
                                    
                                       f
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   f
                                                
                                             
                                             
                                                
                                                   -
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 -
                                 
                                    
                                       1
                                    
                                    
                                       d
                                       ·
                                       o
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   f
                                                
                                             
                                             
                                                
                                                   -
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        Utilizing (3), we can write
                           
                              (11)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       cos
                                       ϕ
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 -
                                 
                                    
                                       1
                                    
                                    
                                       cos
                                       ϕ
                                       
                                       (
                                       d
                                       ·
                                       o
                                       )
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   f
                                                
                                             
                                          
                                       
                                    
                                 
                                 ≈
                                 -
                                 
                                    
                                       1
                                    
                                    
                                       (
                                       d
                                       ·
                                       o
                                       )
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   f
                                                
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        since 
                           
                              cos
                              ϕ
                              ≈
                              1
                           
                         for 
                           
                              ‖
                              ϕ
                              ‖
                              <
                              
                                 
                                    ϕ
                                 
                                 
                                    max
                                 
                              
                           
                         (
                           
                              
                                 
                                    ϕ
                                 
                                 
                                    max
                                 
                              
                              =
                              7
                              -
                              10
                           
                         [deg] in most forward-scan sonar systems). This transformation works well for short (in elevation) 3-D objects resting on the seabed, and overestimates (gives a larger region size) for taller 3-D objects. The K-means is now applied locally for segmentation into object and background regions.


                        Fig. 4
                        (a,e,a′,e′) shows the opti-acoustic images of 2 flat and tall coral objects. Detecting the object boundary in (b,b′) by edge detection, occluding contour in (c,c′) is obtained by removing boundary points within a distance threshold from the background plane and the selection. In (d,d′), sample points are picked over these contours to demonstrate 3-D reconstruction. In (f,f′), the optical target region is transformed to and registered with the sonar image using the background plane model. The K-means is applied to segment background and object regions, giving the detected object boundary in (g,g′). The intersection of epipolar line with the occluding sonar contour yields the match; see (h,h′). When multiple intersections exist, the sought after point at object top generally has a larger range value, as shown in green (based on typical configuration where the sonar is deployed at grazing incidence to maximize diffuse backscatter, relative to the specular component).

One may ask if the intersection can always be found. Conversely, do degenerate scenarios exist where the intersection of the epipolar curve and occluding contour is either not defined or the solution is ill-conditioned (the two curves either coincide or are nearly parallel at the sought after point)? Based on detailed derivation in the Appendix, the degenerate configuration arises where the occluding contour is a planar curve locally, and the tangent line lies in a plane passing through the Y-axis of the optical camera (coinciding with sonar Z-axis).

Next, consider a point on either contour, say 
                           
                              o
                           
                         on 
                           
                              
                                 
                                    C
                                 
                                 
                                    o
                                 
                              
                           
                        . The correspondence 
                           
                              s
                           
                         on 
                           
                              
                                 
                                    C
                                 
                                 
                                    s
                                 
                              
                           
                         lies on the epipolar curve 
                           
                              
                                 
                                    E
                                 
                                 
                                    s
                                 
                              
                           
                        , comprising points 
                           
                              (
                              
                                 
                                    x
                                 
                                 
                                    s
                                 
                              
                              (
                              
                                 
                                    Z
                                 
                                 
                                    o
                                 
                              
                              )
                              ,
                              
                                 
                                    y
                                 
                                 
                                    s
                                 
                              
                              (
                              
                                 
                                    Z
                                 
                                 
                                    o
                                 
                              
                              )
                              )
                           
                         parametrized by the depth 
                           
                              
                                 
                                    Z
                                 
                                 
                                    o
                                 
                              
                           
                         (as described in Section 2.3). Intersection with the occluding contour 
                           
                              
                                 
                                    C
                                 
                                 
                                    s
                                 
                              
                           
                         gives the sonar match 
                           
                              (
                              
                                 
                                    x
                                 
                                 
                                    s
                                 
                              
                              (
                              
                                 
                                    
                                       
                                          Z
                                       
                                       
                                          o
                                       
                                    
                                 
                                 
                                    ^
                                 
                              
                              )
                              ,
                              
                                 
                                    y
                                 
                                 
                                    s
                                 
                              
                              (
                              
                                 
                                    
                                       
                                          Z
                                       
                                       
                                          o
                                       
                                    
                                 
                                 
                                    ^
                                 
                              
                              )
                              )
                           
                        , the depth 
                           
                              
                                 
                                    
                                       
                                          Z
                                       
                                       
                                          o
                                       
                                    
                                 
                                 
                                    ^
                                 
                              
                           
                        , as well as the 3-D contour point 
                           
                              
                                 
                                    
                                       
                                          P
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    o
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          Z
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    o
                                 
                              
                              (
                              
                                 
                                    x
                                 
                                 
                                    o
                                 
                              
                              /
                              f
                              ,
                              
                                 
                                    y
                                 
                                 
                                    o
                                 
                              
                              /
                              f
                              ,
                              1
                              )
                           
                        . Repeating for each point on 
                           
                              
                                 
                                    C
                                 
                                 
                                    o
                                 
                              
                           
                        , we determine the entire 3-D occluding contour C in the optical (or sonar) coordinate system.

Moreover, we can determine the unit surface normal 
                           
                              
                                 
                                    n
                                 
                                 
                                    ^
                                 
                              
                           
                         at each point 
                           
                              P
                           
                         on the 3-D contour generator C. In the optical coordinate system, the normal 
                           
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    o
                                 
                              
                           
                         (being perpendicular to both the visual ray and the apparent contour) can be recovered from the projection ray direction 
                           
                              o
                           
                         and the local tangent 
                           
                              
                                 
                                    t
                                 
                                 
                                    o
                                 
                              
                           
                         of the occluding contour:
                           
                              (12)
                              
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       o
                                    
                                 
                                 =
                                 
                                    
                                       o
                                       ×
                                       
                                          
                                             t
                                          
                                          
                                             o
                                          
                                       
                                    
                                    
                                       ‖
                                       o
                                       ×
                                       
                                          
                                             t
                                          
                                          
                                             o
                                          
                                       
                                       ‖
                                    
                                 
                                 .
                              
                           
                        Projecting onto the sonar image, this is given by 
                           
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    s
                                 
                                 
                                    o
                                 
                              
                              =
                              R
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    o
                                 
                              
                           
                        . Similarly, we can determine an estimate 
                           
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    s
                                 
                                 
                                    s
                                 
                              
                           
                         directly from the sonar view:
                           
                              (13)
                              
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       s
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       s
                                       ×
                                       
                                          
                                             t
                                          
                                          
                                             s
                                          
                                       
                                    
                                    
                                       ‖
                                       s
                                       ×
                                       
                                          
                                             t
                                          
                                          
                                             s
                                          
                                       
                                       ‖
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    t
                                 
                                 
                                    s
                                 
                              
                           
                         is the local tangent of contour 
                           
                              
                                 
                                    C
                                 
                                 
                                    s
                                 
                              
                           
                        .

The accuracy of either estimate is directly related to two key factors: (1) localization accuracy of detected contour points; (2) calibration accuracy. In particular, the medium visibility in underwater imagery plays a critical role in optical image contrast and sharpness, as well as the impact of back-scatter and small-angle forward scattering. Given optical and sonar uncertainty measures 
                           
                              
                                 
                                    σ
                                 
                                 
                                    o
                                 
                              
                           
                         and 
                           
                              
                                 
                                    σ
                                 
                                 
                                    s
                                 
                              
                           
                        , respectively, we may express the solution as a weighted sum of the two estimates:
                           
                              (14)
                              
                                 
                                    
                                       n
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             o
                                          
                                       
                                    
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             o
                                          
                                       
                                       +
                                       
                                          
                                             σ
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       s
                                    
                                    
                                       o
                                    
                                 
                                 +
                                 
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             s
                                          
                                       
                                    
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             o
                                          
                                       
                                       +
                                       
                                          
                                             σ
                                          
                                          
                                             s
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       s
                                    
                                    
                                       s
                                    
                                 
                                 ;
                                 
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ^
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       n
                                    
                                    
                                       |
                                       
                                          
                                             n
                                          
                                          
                                             s
                                          
                                       
                                       |
                                    
                                 
                                 .
                              
                           
                        Thus, we obtain both the 3-D contour point 
                           
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                           
                         and the local normal 
                           
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                           
                         (in either coordinate system) at each stereo rig position along the trajectory.

We can make use of 3-D contours 
                           
                              C
                              (
                              
                                 
                                    m
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         from 
                           
                              i
                              =
                              1
                              ,
                              2
                              ,
                              …
                              ,
                              N
                           
                         images over 360 [deg] views to construct a volumetric object model. Here, 
                           
                              
                                 
                                    m
                                 
                                 
                                    i
                                 
                              
                           
                         is a 6-D parametrization of each stereo rig pose in some reference frame. The transformation of 
                           
                              C
                              (
                              
                                 
                                    m
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         to a common reference frame yields N oriented 3-D contours, forming samples of the 3-D surface with known local orientation. From this, we can construct a dense object model by applying a surface interpolation technique (e.g., [24]).

The estimation of camera pose 
                           
                              
                                 
                                    m
                                 
                                 
                                    i
                                 
                              
                           
                         along its trajectory by tracking image features is the main focus of visual odometry in robotics (e.g., [25–27]). This has received growing interest with the emergence of real-time techniques within the VisualSLAM framework (e.g., [28]). For a monocular vision system, only up-to-scale estimation is feasible due to the well-known inherent scaling ambiguity. In our application, the availability of 2-D opti-acoustic feature tracks enables both resolving this ambiguity, and improving the estimation by utilizing redundant visual motion cues from the two modalities [21]. Additionally, the availability of range measurements from sonar plays a critical role in overcoming the ill-conditioned nature of traditional 3-D reconstruction by stereo triangulation with a small baseline (based on two nearly parallel optical rays). Instead, “opti-acoustic stereo triangulation” involves an optical ray and a range sphere, which is a highly well-posed problem.

We compute the optimal estimate of the sensor platform trajectory by opti-acoustic bundle adjustment (utilizing the projections of scene features in the optical and sonar views) [29]. As we summarize below, the iterative bundle adjustment scheme is initialized with the frame-to-frame 3-D motion estimates [21].

We compute the initial pose and trajectory of the sensor package by integrating the frame-to-frame motions from opti-acoustic stereo data, that are computed as follows:
                              
                                 •
                                 Compute the Euclidean homography 
                                       
                                          
                                             
                                                H
                                             
                                             
                                                i
                                             
                                          
                                       
                                     for consecutive optical views, which can be performed using a minimum of 4 features on a planar sea floor [30] Alternatively, the essential matrix 
                                       
                                          
                                             
                                                Q
                                             
                                             
                                                i
                                             
                                          
                                       
                                     from minimum of 5–8 non-planar points give multiple solutions (e.g. [31]), from which the correct one may be identified by utilizing additional features (without loss of generality, we apply the former method since co-planar points can be readily found in benthic mapping applications).

Calculate the up-to-scale motion 
                                       
                                          {
                                          
                                             
                                                R
                                             
                                             
                                                i
                                             
                                          
                                          ,
                                          k
                                          
                                             
                                                T
                                             
                                             
                                                i
                                             
                                          
                                          ;
                                          
                                             
                                                n
                                             
                                             
                                                i
                                             
                                          
                                          /
                                          k
                                          }
                                       
                                     from the decomposition of homography 
                                       
                                          
                                             
                                                H
                                             
                                             
                                                i
                                             
                                          
                                       
                                     
                                    [32,33] (or essential matrix 
                                       
                                          
                                             
                                                Q
                                             
                                             
                                                i
                                             
                                          
                                       
                                     
                                    [30,34,35]).

Determine the motion scale and the true solution (from two possible ones [36,32]) by employing a minimum of one sonar correspondence.

Improve the (scaled) frame-to-frame motion by iteratively minimizing the reprojection errors in both the optical and sonar views, using solution from earlier steps as initial guess. The final iterative scheme requires the feature matches over the two views within each modality, separately.
                                 

Bundle adjustment is the gold standard for the estimation of camera trajectory [37]. In our application, the method is generalized to incorporate visual constraints from both the optical and sonar image sequences. The Maximum Likelihood Estimation is revised by defining the cost function:
                              
                                 (15)
                                 
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             i
                                             =
                                             1
                                          
                                          
                                             M
                                          
                                       
                                    
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             j
                                             =
                                             1
                                          
                                          
                                             N
                                          
                                       
                                    
                                    
                                       
                                          V
                                       
                                       
                                          i
                                          ,
                                          j
                                       
                                       
                                          o
                                       
                                    
                                    
                                    d
                                    (
                                    
                                       
                                          P
                                       
                                       
                                          o
                                       
                                    
                                    (
                                    
                                       
                                          m
                                       
                                       
                                          j
                                       
                                    
                                    ,
                                    
                                       
                                          P
                                       
                                       
                                          i
                                       
                                    
                                    )
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          i
                                          ,
                                          j
                                       
                                       
                                          o
                                       
                                    
                                    )
                                    +
                                    
                                       
                                          V
                                       
                                       
                                          i
                                          ,
                                          j
                                       
                                       
                                          s
                                       
                                    
                                    
                                    d
                                    (
                                    
                                       
                                          P
                                       
                                       
                                          s
                                       
                                    
                                    (
                                    
                                       
                                          m
                                       
                                       
                                          j
                                       
                                    
                                    ,
                                    
                                       
                                          P
                                       
                                       
                                          i
                                       
                                    
                                    )
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          i
                                          ,
                                          j
                                       
                                       
                                          s
                                       
                                    
                                    )
                                    ,
                                 
                              
                           where
                              
                                 •
                                 
                                    s and o subscripts are associated with the sonar and optical measurements;


                                    P is the projection model;


                                    
                                       
                                          
                                             
                                                m
                                             
                                             
                                                j
                                             
                                          
                                       
                                     represents the j-th pose in N views;


                                    
                                       
                                          
                                             
                                                P
                                             
                                             
                                                i
                                             
                                          
                                       
                                     represents a 3-D point (from total of M), and 
                                       
                                          
                                             
                                                x
                                             
                                             
                                                i
                                                ,
                                                j
                                             
                                          
                                       
                                     is the 2-D projection of i-th point in j-th view;


                                    d is some distant measure (
                                       
                                          L
                                          -
                                          2
                                       
                                     norm in our results);


                                    
                                       
                                          
                                             
                                                V
                                             
                                             
                                                i
                                                ,
                                                j
                                             
                                          
                                       
                                     is the 
                                       
                                          {
                                          0
                                          ,
                                          1
                                          }
                                       
                                     visibility mask (set to one for a point 
                                       
                                          
                                             
                                                P
                                             
                                             
                                                i
                                             
                                          
                                       
                                     visible in j-th view, and zero, otherwise). This can be generalized to a non-binary value that also accounts for the data reliability, e.g., a fixed weight for relative optical-to-sonar data uncertainty in its simplest form. (In our results, no weighting was incorporated.)

It is noted that the sonar and optical camera poses are not independent, but rather constrained by the fixed configuration of the stereo rig.

@&#EXPERIMENTS@&#

The finite size of waterproof housings of underwater sensors prohibit the realization of coinciding optical and sonar cameras. However, the model can be approximated by minimizing the baseline while imaging targets at relatively long distances (achieving a small baseline-to-target-distance ratio). Mounting the optical camera on top of a DIDSON camera in our setup, our data sets comprise of a series of stereo images while rotating around various scene/target(s).

Ideal experimental conditions for thorough testing of our method comprise of unfavorable/poor visibility, with objects of known size and shape to establish ground truth, within large areas that offer freedom to move around these objects in a precise/controlled fashion. These conditions are difficult to achieve simultaneously in underwater. Instead, we have conducted experiments where we assess the impact of poor visibility, while utilizing other data under good visibility to demonstrate key aspects of our technical contributions, and highlight both the advantages and limitations. To elaborate, we have recorded images in our 12′×6′×6′ indoor water tank, where visibility range can be adjusted by varying turbidity. However, the limited size prohibits acquiring 360-degree stereo views to perform 3-D object reconstruction. Thus, the scope in the first experiment is limited to assessing the performance and robustness of contour detection, relative to feature matching. The remaining experiments utilizes 2 other data sets, recorded in indoor and outdoor swimming pools, under good visibility. Here, we assess the performance of our 3-D object modeling technique by constructing a man-made and 4 natural objects, while demonstrating the degenerate configuration with the man-made object.

The column (a) in Fig. 5
                         depicts the optical images of the water tank scene from relatively similar vantage points under 5 different turbidity conditions. Treating the top-left as the clear-water case, the image contrast degradation has been achieved by adding increasing amounts of “coffee creamer”to the tank water, yielding four rising levels of both signal attenuation and scattering. To quantify turbidity, we have conducted experiments to estimate the “relative attenuation coefficient,” namely, 
                           
                              δ
                              
                                 
                                    α
                                 
                                 
                                    i
                                 
                              
                              =
                              
                                 
                                    α
                                 
                                 
                                    i
                                 
                              
                              -
                              
                                 
                                    α
                                 
                                 
                                    o
                                 
                              
                           
                         (
                           
                              i
                              =
                              1
                              ,
                              2
                              ,
                              …
                              ,
                              4
                           
                        ), where 
                           
                              
                                 
                                    α
                                 
                                 
                                    o
                                 
                              
                           
                         is the attenuation coefficient for the baseline clear-water data.

Briefly, we have modeled the image I as the sum of the signal S (spatially-varying attenuated scene reflectance) and scattering B components. Estimating and thus discounting for scattering, and applying the model 
                           
                              
                                 
                                    S
                                 
                                 
                                    ij
                                 
                              
                              =
                              
                                 
                                    S
                                 
                                 
                                    io
                                 
                              
                              
                                 
                                    e
                                 
                                 
                                    -
                                    
                                       
                                          α
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          R
                                       
                                       
                                          j
                                       
                                    
                                 
                              
                           
                        , to the average gray-level of a small region over 10 objects at ranges 
                           
                              
                                 
                                    R
                                 
                                 
                                    j
                                 
                              
                           
                         under varying water conditions (with corresponding attenuation coefficient 
                           
                              
                                 
                                    α
                                 
                                 
                                    i
                                 
                              
                           
                        ), we can calculate both range 
                           
                              
                                 
                                    R
                                 
                                 
                                    j
                                 
                              
                           
                         of these objects, and the relative turbidity 
                           
                              δ
                              
                                 
                                    α
                                 
                                 
                                    i
                                 
                              
                           
                        . For our data, the estimated relative attenuation coefficients 
                           
                              δ
                              
                                 
                                    α
                                 
                                 
                                    i
                                 
                              
                           
                         are 0, 0.7, 1.3, 2.0 and 2.7 [m−1] (zero corresponds to the clear-water case).

Consider the most turbid case, as an example. Since the corresponding attenuation coefficient is significantly higher than for the clear water, we may assume that 
                           
                              
                                 
                                    α
                                 
                                 
                                    4
                                 
                              
                              ≈
                              2.7
                           
                         [m−1]. This yields an attenuation length 
                           
                              
                                 
                                    R
                                 
                                 
                                    a
                                    4
                                 
                              
                              =
                              1
                              /
                              
                                 
                                    α
                                 
                                 
                                    4
                                 
                              
                              =
                              0.37
                           
                         [m]. It follows that the signal attenuates to zero, and thus the image comprises solely of the scattering component, at about 1.5 [m]. (This is consistent with the experimental set up, where the only detectable targets in the image lie at closer ranges.)

For each case, column (b) of Fig. 5 gives the best results by utilizing the SURF and SIFT descriptors for feature matching in two nearby optical views [38,39]. Even under mild turbidity (first 2 cases), the detected features are primarily suitable for 3-D motion and trajectory estimation, and inadequate for generating a dense 3-D scene representation. More importantly, these reduce in number rather quickly with increasing range and turbidity. In contrast, there is consistency in detecting object boundaries, e.g., depicted for the white PVC pipe in column (c) as one example. In particular, examining the data confirms that while the average and standard deviation of gradient magnitudes decrease exponentially with increasing turbidity, they remain roughly constant for the gradient angles. Thus, the contour shape can be retained over a wide range turbidity conditions, by merely adjusting the gradient magnitude threshold in contour (edge) detection.

The sonar images under 4 conditions of mild to high turbidity is given in Fig. 6
                         (top). The detected contours of the PVC pipe, as well as the dark steel cylinder (to the right of PVC pipe) are given in the next two rows. As expected, the sonar images are insensitive to the turbidity condition, however, there are variations in the shape of detected occluding contours, primarily due to changes in sensor pose (although small in these cases) and high-level of sonar speckle noise.

To assess variations in 3-D reconstruction accuracy, we have determined the 3-D occluding rim for each of the 4 cases of mild to high turbidity (see Fig. 7
                        ). To facilitate comparison, each contour has been shifted to start from origin, and rotated to end at some point on the Y-axis. The reconstruction is merely based on the 3-D positions of occluding contour points, without surface normal information (as we show later, surface normal plays a key role in regularizing the reconstruction). Yet variations are less than 8% across various turbidity levels.

We have experimented with two data sets, acquired as the sensor rig translates and rotates around the scene, comprising of objects within ranges of roughly 1.5–3.75 [m], with sonar range window settings of 1.25 [m] (first data set) and 2.5 [m] (second data set).

Although not constant, the frame-to-frame rotation is roughly 12–15 [deg]. Table 1
                         gives the visibility matrix for these data sets, showing the number of features and the images in which these features are viewed; a marker depicts if point i is visible in the j-th optical (black) or sonar (red) view.

We estimate the sensor platform trajectory by (1) utilizing less than 10 optical and 1–3 sonar matches in the opti-acoustic motion estimation method, summarized in Section 3.2.1; (2) using the solution to initialize the iterative opti-acoustic bundle adjustment described in Section 3.2.2. Here, we track optical features by utilizing the SURF descriptor [38]. The performance in detection, matching, and tracking of sonar features is typically poor using the same or other common descriptors (e.g., SIFT [39]). While this step is a component of the entire 3-D reconstruction system, it does not directly relate to primary theoretical contribution, namely, the 3-D reconstruction of oriented occluding contour points from opti-acoustic stereo data. Therefore, we have manually matched these few sonar features over consecutive frames, in the first data set. This bottleneck can be circumvented by positioning robust acoustic features (strong reflectors) strategically, near the scene/object to be imaged and modeled. In the next data set, we have demonstrated this strategy by placing a number of small rocks (large gravel pieces) as robust features for automatic tracking in either modality; see Fig. 8
                        . In practice, these may be found in situ, or placed around the object, as we have done in this example.


                        Fig. 8(a) depicts a sample stereo pair, from a total of 15, with three different objects. These comprise of two natural stones placed on plastic cover of a cylindrical container, among which the vertical contours of the cover are imaged in the degenerate configuration. Referring to the visibility matrix in Table 1 (top), it is noted that only a small number of sonar matches are available for frame-to-frame motion computations (some with only 1–2 features). While sufficient to estimate the scale of the estimated 3-D motion and trajectory, the impact on improving accuracy may be minimal. Using the correspondences (red dots) in Fig. 8, we explain how the scaling ambiguity of monocular optical sequences is resolved.

First, the up-to-scale motion and 3-D scene feature positions are calculated from the optical image correspondences. For demonstration purposes, we select an arbitrary scale to fix the absolute translational motion and 3-D feature positions. We then transform the 3-D motion and feature positions to the sonar coordinate system. Projecting the 3-D points onto all 4 views (yellow circles), errors are small in the 2 optical images (solely due to the estimation inaccuracy), but large in the sonar view due to inaccurate scale. Incorporating the sonar matches in the estimation process, the absolute 3-D motion and feature positions are recalculated. This new reprojected points match well with the features in the opti-acoustic motion sequence (blue circles).

For bundle adjustment, a total of 27 scene features from the flat background surface, as listed in the visibility matrix of Table 1 (top), are tracked over 15 opti-acoustic stereo pairs. Fig. 9
                         depicts visible features in 3 sample stereo pairs (red labeled dots). The blue dots are the reprojected points after bundle adjustment calculations. Fig. 10
                         shows the estimated camera poses for all 15 viewpoints along the trajectory and the positions of the 3-D features, both before (blue) and after (red) opti-acoustic bundle adjustment. In the sonar view, the 2 corresponding epipolar curves are aligned with the occluding contour. This verifies the degenerate configuration of the cameras relative to the target, where vertical occluding contours are parallel to the Y-axis (of optical coordinate system).


                        Fig. 11
                        (a) depicts the right vertical contour of the cylindrical cover. In the sonar image, the epipolar lines of the two distinct end points (as for any point from the 2-D optical contour) are aligned with the occluding contour, verifying the degenerate configuration (where the local contour tangent lies in a plane passing through the vertical axis). The end points can be identified from the object boundaries as described in Section 3.1. For demonstration purposes, we have constructed the 3-D occluding rim (as a straight line through the 2 distinct end points), reprojected it onto correspondences in the two images, and calculated the local normals as described in Section 3.1. For the two stones, three optical contour points and their epipolar lines in the sonar image have been given in (b,c). The bottom row depicts the estimated 3-D contours and surface normals of these objects in a common reference frame.

In Fig. 12
                        , we have given the reconstruction of these objects. While the 3-D surface can be generated using the 3-D points recovered from the 2-D sonar and optical occluding contours, we cannot overlook the key role of local surface normal to improve the reconstruction accuracy. To highlight this fact, we have recomputed the 3-D object shapes, without utilizing the surface normal information. These are depicted in the bottom row. The quantitative 3-D reconstruction accuracy of the cylindrical plastic cover can be readily confirmed based on the dimension measurements. For the two stones, the accuracy is better than the precision based on the visual inspection on the sizes and shapes of these objects.


                        Fig. 8(bottom) depicts a sample stereo pairs, from a total of 28, with various small rocks and several bigger coral reef objects. Here, the small rocks are to demonstrate how foreign objects may be introduced for robust tracking across the sequence, improving the trajectory estimation by bundle adjustment. From a total of 38 features, as given in the visibility matrix in Table 1 (bottom), an average of 5 were detected automatically in each sonar view. Two coral objects roughly in the central part of the scene are used for 3-D reconstruction; also see Fig. 15.


                        Fig. 13
                         depicts visible features in 3 sample stereo pairs (red labeled dots). The yellow circles are the reprojected features using the estimated stereo rig poses and 3-D feature positions from frame-to-frame motions. In contrast, the blue circles are determined from the estimates after bundle adjustment. Fig. 14
                         shows the estimated camera poses for the 28 viewpoints along the trajectory and the positions of the 3-D features, both before (blue) and after (red) opti-acoustic bundle adjustment. Additionally, we have depicted 3 selected examples of the detected 2-D occluding contours of both objects in the sonar and optical views, depicted roughly at the corresponding trajectory positions of the stereo rig.


                        Fig. 15
                         shows the two coral rocks, and the registered 3-D occluding contours of both objects. For the “tall coral reef” object, we have been able to obtain a dense 3-D point cloud reconstruction from an X-Box Kinect [8], shown in blue in Fig. 16
                        (a). Applying ICP [40,41], this has been aligned with our 3-D reconstruction, shown in green. The average and standard deviation of the alignment errors are 4.8 [mm] and 2.6 [mm], respectively. In (b), we have given two views of the 3-D reconstruction of the “flat coral,” in approximately the same orientations as the two optical views.

The above example represents a realistic scenario in 3-D modeling in support of corals reef studies, both in terms of size and types of individual objects. As an example, Fig. 17
                         depicts a small section of a topographical mosaic of a reef site, covering roughly 400 [m2] area in Andros Islands, Bahamas. (This was constructed as part of deliverable products for the DoD SERDP project SI-1333, entitled Application of ROV-based Video Technology to Complement Coral Reef Resource Mapping and Monitoring. Here, several coral objects were marked for quantitative comparison between state-of-the-art diver measurements and 3-D reconstruction by stereo vision. Highlighted are some individual clipped objects appearing in the mosaic, and others from nearby areas. One clipped area placed on the top right of the mosaic is from a different reef restoration site. While it has been shown that underwater stereo vision can provide a 3-D reconstruction solution under good visibility, the proposed technique can offer both resolution and accuracy, matched by no existing technology, under poor visibility.

@&#SUMMARY@&#

This paper presents a solution for the 3-D volumetric modeling of underwater objects from their 2-D apparent contours. Utilizing the opti-acoustic stereo imaging paradigm with coincident camera configuration enables us to exploit some unique advantages in the integration of multi-modal visual cues and data: (1) generating models of natural and man-made objects in situ under much higher turbidity levels that can be achieved with the existing feature-based monocular and (or) stereo vision techniques; (2) building “continuous models” by reconstructing 3-D contours from video, rather than distinct snapshots; (3) improving reconstruction accuracy based on both 3-D position and surface normals at each point. Two theoretical results dealing with degenerate configurations based on target pose relative to the stereo cameras and camera misalignments enable: (1) planning efficient trajectories to enhance data acquisition and reconstruction accuracy based on the target shape characteristics; (2) correcting of deviations from the ideal stereo alignment by a simple calibration technique. Results of experimental with real data support various theoretical contributions. In our experiments, the accuracy has been determined to be better than manual measurements. In one case, mean error of 0.48 [cm] with standard variation of 0.26 [cm] has been determined in comparison with 3-D point cloud reconstruction from a Kinect system as independent measurement (taken as ground truth).

@&#ACKNOWLEDGMENTS@&#

The first author was supported in part by the US-Israel Binational Science Foundation (BSF) Grant 2006384, and in part by the University of Miami during a 6-month appointment as Visiting Scholar. We are sincerely grateful to the anonymous reviewers for numerous invaluable technical and editorial comments that resulted in significant improvements to the original manuscript.

Degeneracy of proposed solution exists if the epipolar curves corresponding to the sonar and optical projections 
                        
                           {
                           s
                           ,
                           o
                           }
                        
                      of a 3-D occluding contour point 
                        
                           
                              
                                 (
                                 
                                    
                                       X
                                    
                                    
                                       r
                                    
                                 
                                 ,
                                 
                                    
                                       Y
                                    
                                    
                                       r
                                    
                                 
                                 ,
                                 
                                    
                                       Z
                                    
                                    
                                       r
                                    
                                 
                                 )
                              
                              
                                 T
                              
                           
                        
                      coincide with the apparent contour. In practice, the solution is ill-conditioned where the two curves are nearly parallel at the sought after point. Equivalently, the angle between the epipolar curve and occluding contour at the intersection point establishes the degree by which the two curves are distinct, consequently impacting the 3-D reconstruction accuracy.

Without loss of generality, we assume that both the occluding contour and the epipolar line are straight lines locally. Alternatively, we can instead consider the local tangents, which is sufficient for the purpose of computing the angle between these two lines/curves. Correspondingly, the local parametrization in the optical coordinate system of the 3-D contour 
                        
                           
                              
                                 L
                              
                              
                                 o
                              
                           
                           (
                           t
                           )
                        
                      is given by
                        
                           (A.1)
                           
                              
                                 
                                    L
                                 
                                 
                                    o
                                 
                              
                              (
                              t
                              )
                              =
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      o
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      Y
                                                   
                                                   
                                                      o
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      Z
                                                   
                                                   
                                                      o
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      r
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      Y
                                                   
                                                   
                                                      r
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      Z
                                                   
                                                   
                                                      r
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                              +
                              γ
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      x
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      y
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      z
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                              ,
                           
                        
                     where 
                        
                           t
                           =
                           
                              
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       x
                                    
                                 
                                 ,
                                 
                                    
                                       t
                                    
                                    
                                       y
                                    
                                 
                                 ,
                                 
                                    
                                       t
                                    
                                    
                                       z
                                    
                                 
                                 )
                              
                              
                                 T
                              
                           
                        
                      defines the local tangent. The projection onto the optical image is given by 
                        
                           o
                           (
                           t
                           )
                           =
                           (
                           x
                           (
                           t
                           )
                           ,
                           y
                           (
                           t
                           )
                           )
                        
                     :
                        
                           (A.2)
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                x
                                                (
                                                t
                                                )
                                                =
                                                f
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     X
                                                                  
                                                                  
                                                                     r
                                                                  
                                                               
                                                               +
                                                               γ
                                                               
                                                               
                                                                  
                                                                     t
                                                                  
                                                                  
                                                                     x
                                                                  
                                                               
                                                            
                                                            
                                                               
                                                                  
                                                                     Z
                                                                  
                                                                  
                                                                     r
                                                                  
                                                               
                                                               +
                                                               γ
                                                               
                                                               
                                                                  
                                                                     t
                                                                  
                                                                  
                                                                     z
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                y
                                                (
                                                t
                                                )
                                                =
                                                f
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     Y
                                                                  
                                                                  
                                                                     r
                                                                  
                                                               
                                                               +
                                                               γ
                                                               
                                                               
                                                                  
                                                                     t
                                                                  
                                                                  
                                                                     y
                                                                  
                                                               
                                                            
                                                            
                                                               
                                                                  
                                                                     Z
                                                                  
                                                                  
                                                                     r
                                                                  
                                                               
                                                               +
                                                               γ
                                                               
                                                               
                                                                  
                                                                     t
                                                                  
                                                                  
                                                                     z
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              
                           
                        
                     
                  

Transforming 
                        
                           
                              
                                 L
                              
                              
                                 o
                              
                           
                           (
                           t
                           )
                        
                      to the sonar coordinate system yields
                        
                           (A.3)
                           
                              
                                 
                                    L
                                 
                                 
                                    s
                                 
                              
                              (
                              t
                              )
                              =
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      s
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      Y
                                                   
                                                   
                                                      s
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      Z
                                                   
                                                   
                                                      s
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      r
                                                   
                                                
                                                +
                                                γ
                                                
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      x
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      Z
                                                   
                                                   
                                                      r
                                                   
                                                
                                                +
                                                γ
                                                
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      z
                                                   
                                                
                                             
                                          
                                          
                                             
                                                -
                                                (
                                                
                                                   
                                                      Y
                                                   
                                                   
                                                      r
                                                   
                                                
                                                +
                                                γ
                                                
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      y
                                                   
                                                
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                              ,
                           
                        
                     with range and azimuth measurements:
                        
                           (A.4)
                           
                              
                                 
                                    
                                    
                                       
                                          R
                                          (
                                          t
                                          )
                                          =
                                          
                                             
                                                
                                                   
                                                      (
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            r
                                                         
                                                      
                                                      +
                                                      γ
                                                      
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            x
                                                         
                                                      
                                                      )
                                                   
                                                   
                                                      2
                                                   
                                                
                                                +
                                                
                                                   
                                                      (
                                                      
                                                         
                                                            Y
                                                         
                                                         
                                                            r
                                                         
                                                      
                                                      +
                                                      γ
                                                      
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            y
                                                         
                                                      
                                                      )
                                                   
                                                   
                                                      2
                                                   
                                                
                                                +
                                                
                                                   
                                                      (
                                                      
                                                         
                                                            Z
                                                         
                                                         
                                                            r
                                                         
                                                      
                                                      +
                                                      γ
                                                      
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            z
                                                         
                                                      
                                                      )
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                          ,
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          θ
                                          (
                                          t
                                          )
                                          =
                                          
                                             
                                                tan
                                             
                                             
                                                -
                                                1
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               X
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                         (
                                                         t
                                                         )
                                                      
                                                      
                                                         
                                                            
                                                               Y
                                                            
                                                            
                                                               s
                                                            
                                                         
                                                         (
                                                         t
                                                         )
                                                      
                                                   
                                                
                                             
                                          
                                          =
                                          
                                             
                                                tan
                                             
                                             
                                                -
                                                1
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               X
                                                            
                                                            
                                                               r
                                                            
                                                         
                                                         +
                                                         γ
                                                         
                                                         
                                                            
                                                               t
                                                            
                                                            
                                                               x
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               Z
                                                            
                                                            
                                                               r
                                                            
                                                         
                                                         +
                                                         γ
                                                         
                                                         
                                                            
                                                               t
                                                            
                                                            
                                                               z
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          .
                                       
                                    
                                 
                              
                           
                        
                     
                  

For a selected optical image point 
                           
                              o
                              (
                              
                                 
                                    t
                                 
                                 
                                    0
                                 
                              
                              )
                              =
                              (
                              x
                              (
                              
                                 
                                    t
                                 
                                 
                                    0
                                 
                              
                              )
                              ,
                              y
                              (
                              
                                 
                                    t
                                 
                                 
                                    0
                                 
                              
                              )
                              )
                           
                        , the parametrized equation of the corresponding projection ray (locus of corresponding scene points in 3-D world) is given by
                           
                              (A.5)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  z
                                                               
                                                               
                                                                  f
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   x
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         0
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  z
                                                               
                                                               
                                                                  f
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   y
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         0
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   z
                                                
                                             
                                          
                                          .
                                       
                                    
                                 
                              
                           
                        
                     

Transferring to the sonar coordinate system yields
                           
                              (A.6)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        X
                                                                     
                                                                     
                                                                        r
                                                                     
                                                                  
                                                                  +
                                                                  
                                                                     
                                                                        γ
                                                                     
                                                                     
                                                                        0
                                                                     
                                                                  
                                                                  
                                                                  
                                                                     
                                                                        t
                                                                     
                                                                     
                                                                        x
                                                                     
                                                                  
                                                               
                                                               
                                                                  
                                                                     
                                                                        Z
                                                                     
                                                                     
                                                                        r
                                                                     
                                                                  
                                                                  +
                                                                  
                                                                     
                                                                        γ
                                                                     
                                                                     
                                                                        0
                                                                     
                                                                  
                                                                  
                                                                  
                                                                     
                                                                        t
                                                                     
                                                                     
                                                                        z
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   z
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   z
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   -
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         o
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   -
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        Y
                                                                     
                                                                     
                                                                        r
                                                                     
                                                                  
                                                                  +
                                                                  
                                                                     
                                                                        γ
                                                                     
                                                                     
                                                                        0
                                                                     
                                                                  
                                                                  
                                                                  
                                                                     
                                                                        t
                                                                     
                                                                     
                                                                        y
                                                                     
                                                                  
                                                               
                                                               
                                                                  
                                                                     
                                                                        Z
                                                                     
                                                                     
                                                                        r
                                                                     
                                                                  
                                                                  +
                                                                  
                                                                     
                                                                        γ
                                                                     
                                                                     
                                                                        0
                                                                     
                                                                  
                                                                  
                                                                  
                                                                     
                                                                        t
                                                                     
                                                                     
                                                                        z
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   z
                                                
                                             
                                          
                                          ,
                                       
                                    
                                 
                              
                           
                        yielding the range and azimuth angles
                           
                              (A.7)
                              
                                 R
                                 (
                                 z
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             X
                                          
                                          
                                             s
                                          
                                       
                                       
                                          
                                             (
                                             z
                                             )
                                          
                                          
                                             2
                                          
                                       
                                       +
                                       
                                          
                                             Y
                                          
                                          
                                             s
                                          
                                       
                                       
                                          
                                             (
                                             z
                                             )
                                          
                                          
                                             2
                                          
                                       
                                       +
                                       
                                          
                                             Z
                                          
                                          
                                             s
                                          
                                       
                                       
                                          
                                             (
                                             z
                                             )
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                z
                                             
                                             
                                                
                                                   
                                                      Z
                                                   
                                                   
                                                      r
                                                   
                                                
                                                +
                                                
                                                   
                                                      γ
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      z
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 R
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       0
                                    
                                 
                                 )
                                 ;
                              
                           
                        
                        
                           
                              (A.8)
                              
                                 θ
                                 (
                                 z
                                 )
                                 =
                                 
                                    
                                       tan
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      s
                                                   
                                                
                                                (
                                                z
                                                )
                                             
                                             
                                                
                                                   
                                                      Y
                                                   
                                                   
                                                      s
                                                   
                                                
                                                (
                                                z
                                                )
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       tan
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      r
                                                   
                                                
                                                +
                                                
                                                   
                                                      γ
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      x
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      Z
                                                   
                                                   
                                                      r
                                                   
                                                
                                                +
                                                
                                                   
                                                      γ
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      z
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

The corresponding sonar image points are given by:
                           
                              (A.9)
                              
                                 s
                                 (
                                 z
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       
                                          
                                             1
                                             -
                                             
                                                
                                                   sin
                                                
                                                
                                                   2
                                                
                                             
                                             ϕ
                                             (
                                             z
                                             )
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       z
                                    
                                    
                                       
                                          
                                             1
                                             -
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     Y
                                                                  
                                                                  
                                                                     r
                                                                  
                                                               
                                                               +
                                                               
                                                                  
                                                                     γ
                                                                  
                                                                  
                                                                     0
                                                                  
                                                               
                                                               
                                                               
                                                                  
                                                                     t
                                                                  
                                                                  
                                                                     y
                                                                  
                                                               
                                                            
                                                            
                                                               R
                                                               (
                                                               
                                                                  
                                                                     t
                                                                  
                                                                  
                                                                     0
                                                                  
                                                               
                                                               )
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   2
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               X
                                                            
                                                            
                                                               r
                                                            
                                                         
                                                         +
                                                         
                                                            
                                                               γ
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         
                                                         
                                                            
                                                               t
                                                            
                                                            
                                                               x
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               Z
                                                            
                                                            
                                                               r
                                                            
                                                         
                                                         +
                                                         
                                                            
                                                               γ
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         
                                                         
                                                            
                                                               t
                                                            
                                                            
                                                               z
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   1
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        Parametrized by z, the epipolar curve in the sonar image, corresponding to optical image point 
                           
                              o
                              (
                              
                                 
                                    t
                                 
                                 
                                    0
                                 
                              
                              )
                           
                        , is given by
                           
                              (A.10)
                              
                                 
                                    
                                       y
                                    
                                    
                                       s
                                    
                                 
                                 (
                                 z
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             Z
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       
                                          
                                             γ
                                          
                                          
                                             0
                                          
                                       
                                       
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                    
                                    
                                       
                                          
                                             X
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       
                                          
                                             γ
                                          
                                          
                                             0
                                          
                                       
                                       
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 (
                                 z
                                 )
                                 ,
                              
                           
                        with the local slope
                           
                              (A.11)
                              
                                 
                                    
                                       m
                                    
                                    
                                       epi
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             dy
                                          
                                          
                                             s
                                          
                                       
                                       (
                                       z
                                       )
                                    
                                    
                                       
                                          
                                             dx
                                          
                                          
                                             s
                                          
                                       
                                       (
                                       z
                                       )
                                    
                                 
                                 =
                                 
                                    
                                       (
                                       
                                          
                                             dy
                                          
                                          
                                             s
                                          
                                       
                                       (
                                       z
                                       )
                                       /
                                       dz
                                       )
                                    
                                    
                                       (
                                       
                                          
                                             dx
                                          
                                          
                                             s
                                          
                                       
                                       (
                                       z
                                       )
                                       /
                                       dz
                                       )
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             1
                                          
                                          
                                             
                                                
                                                   1
                                                   -
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           Y
                                                                        
                                                                        
                                                                           r
                                                                        
                                                                     
                                                                     +
                                                                     
                                                                        
                                                                           γ
                                                                        
                                                                        
                                                                           0
                                                                        
                                                                     
                                                                     
                                                                     
                                                                        
                                                                           t
                                                                        
                                                                        
                                                                           y
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     R
                                                                     (
                                                                     t
                                                                     )
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         r
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         γ
                                                      
                                                      
                                                         0
                                                      
                                                   
                                                   
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         x
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         r
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         γ
                                                      
                                                      
                                                         0
                                                      
                                                   
                                                   
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         z
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   1
                                                   -
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           Y
                                                                        
                                                                        
                                                                           r
                                                                        
                                                                     
                                                                     +
                                                                     
                                                                        
                                                                           γ
                                                                        
                                                                        
                                                                           0
                                                                        
                                                                     
                                                                     
                                                                     
                                                                        
                                                                           t
                                                                        
                                                                        
                                                                           y
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     R
                                                                     (
                                                                     t
                                                                     )
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             Z
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       
                                          
                                             γ
                                          
                                          
                                             0
                                          
                                       
                                       
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                    
                                    
                                       
                                          
                                             X
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       
                                          
                                             γ
                                          
                                          
                                             0
                                          
                                       
                                       
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

The sonar projection of 3-D point 
                           
                              
                                 
                                    P
                                 
                                 
                                    s
                                 
                              
                              (
                              t
                              )
                              =
                              
                                 
                                    
                                       
                                          
                                             
                                                X
                                             
                                             
                                                s
                                             
                                          
                                          (
                                          t
                                          )
                                          ,
                                          
                                             
                                                Y
                                             
                                             
                                                s
                                             
                                          
                                          (
                                          t
                                          )
                                          ,
                                          
                                             
                                                Z
                                             
                                             
                                                s
                                             
                                          
                                          (
                                          t
                                          )
                                       
                                    
                                 
                                 
                                    T
                                 
                              
                           
                         on the object’s occluding rim is expressed by:
                           
                              (A.12)
                              
                                 s
                                 (
                                 t
                                 )
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       
                                          
                                             1
                                             -
                                             
                                                
                                                   sin
                                                
                                                
                                                   2
                                                
                                             
                                             ϕ
                                             (
                                             t
                                             )
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   t
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   t
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       
                                          
                                             1
                                             -
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     Y
                                                                  
                                                                  
                                                                     r
                                                                  
                                                               
                                                               +
                                                               γ
                                                               
                                                               
                                                                  
                                                                     t
                                                                  
                                                                  
                                                                     y
                                                                  
                                                               
                                                            
                                                            
                                                               R
                                                               (
                                                               t
                                                               )
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   2
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         r
                                                      
                                                   
                                                   +
                                                   γ
                                                   
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         x
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         r
                                                      
                                                   
                                                   +
                                                   γ
                                                   
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         z
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        Therefore, the equation of occluding contour is
                           
                              (A.13)
                              
                                 
                                    
                                       y
                                    
                                    
                                       s
                                    
                                 
                                 (
                                 t
                                 )
                                 =
                                 
                                    
                                       
                                          
                                             Z
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       γ
                                       
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                    
                                    
                                       
                                          
                                             X
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       γ
                                       
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 (
                                 t
                                 )
                                 ,
                              
                           
                        and local slope is derived from
                           
                              (A.14)
                              
                                 
                                    
                                       m
                                    
                                    
                                       oc
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             dy
                                          
                                          
                                             s
                                          
                                       
                                       (
                                       t
                                       )
                                    
                                    
                                       
                                          
                                             dx
                                          
                                          
                                             s
                                          
                                       
                                       (
                                       t
                                       )
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      dy
                                                   
                                                   
                                                      s
                                                   
                                                
                                                (
                                                t
                                                )
                                                /
                                                dt
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      dx
                                                   
                                                   
                                                      s
                                                   
                                                
                                                (
                                                t
                                                )
                                                /
                                                dt
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             2
                                          
                                       
                                       (
                                       t
                                       )
                                       [
                                       
                                          
                                             R
                                          
                                          
                                             2
                                          
                                       
                                       (
                                       t
                                       )
                                       -
                                       
                                          
                                             Y
                                          
                                          
                                             r
                                          
                                          
                                             2
                                          
                                       
                                       ]
                                       
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                       -
                                       
                                          
                                             Y
                                          
                                          
                                             r
                                          
                                          
                                             2
                                          
                                       
                                       (
                                       
                                          
                                             Z
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       γ
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                       )
                                       [
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                       (
                                       
                                          
                                             X
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       γ
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                       )
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                       (
                                       
                                          
                                             Z
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       γ
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                       )
                                       ]
                                    
                                    
                                       
                                          
                                             R
                                          
                                          
                                             2
                                          
                                       
                                       (
                                       t
                                       )
                                       [
                                       
                                          
                                             R
                                          
                                          
                                             2
                                          
                                       
                                       (
                                       t
                                       )
                                       -
                                       
                                          
                                             Y
                                          
                                          
                                             r
                                          
                                          
                                             2
                                          
                                       
                                       ]
                                       
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                       -
                                       
                                          
                                             Y
                                          
                                          
                                             r
                                          
                                          
                                             2
                                          
                                       
                                       (
                                       
                                          
                                             X
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       γ
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                       )
                                       [
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                       (
                                       
                                          
                                             X
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       γ
                                       
                                          
                                             t
                                          
                                          
                                             x
                                          
                                       
                                       )
                                       +
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                       (
                                       
                                          
                                             Z
                                          
                                          
                                             r
                                          
                                       
                                       +
                                       γ
                                       
                                          
                                             t
                                          
                                          
                                             z
                                          
                                       
                                       )
                                       ]
                                    
                                 
                                 .
                              
                           
                        
                     

Having found the equations of occluding contour (A.12) and epipolar line (A.9) in sonar image, we can readily find their intersection point. To do this, we determine value of z for which 
                           
                              s
                              (
                              z
                              )
                              =
                              s
                              (
                              
                                 
                                    t
                                 
                                 
                                    0
                                 
                              
                              )
                           
                         holds:
                           
                              (A.15)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         0
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   z
                                                   )
                                                   =
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         s
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         0
                                                      
                                                   
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                                 ⟶
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               X
                                                            
                                                            
                                                               r
                                                            
                                                         
                                                         +
                                                         
                                                            
                                                               γ
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         
                                                         
                                                            
                                                               t
                                                            
                                                            
                                                               x
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               1
                                                               -
                                                               
                                                                  
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    
                                                                                       Y
                                                                                    
                                                                                    
                                                                                       r
                                                                                    
                                                                                 
                                                                                 +
                                                                                 
                                                                                    
                                                                                       γ
                                                                                    
                                                                                    
                                                                                       0
                                                                                    
                                                                                 
                                                                                 
                                                                                 
                                                                                    
                                                                                       t
                                                                                    
                                                                                    
                                                                                       y
                                                                                    
                                                                                 
                                                                              
                                                                              
                                                                                 R
                                                                                 (
                                                                                 
                                                                                    
                                                                                       t
                                                                                    
                                                                                    
                                                                                       0
                                                                                    
                                                                                 
                                                                                 )
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     2
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               Z
                                                            
                                                            
                                                               r
                                                            
                                                         
                                                         +
                                                         
                                                            
                                                               γ
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         
                                                         
                                                            
                                                               t
                                                            
                                                            
                                                               z
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               1
                                                               -
                                                               
                                                                  
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    
                                                                                       Y
                                                                                    
                                                                                    
                                                                                       r
                                                                                    
                                                                                 
                                                                                 +
                                                                                 
                                                                                    
                                                                                       γ
                                                                                    
                                                                                    
                                                                                       0
                                                                                    
                                                                                 
                                                                                 
                                                                                 
                                                                                    
                                                                                       t
                                                                                    
                                                                                    
                                                                                       y
                                                                                    
                                                                                 
                                                                              
                                                                              
                                                                                 R
                                                                                 (
                                                                                 
                                                                                    
                                                                                       t
                                                                                    
                                                                                    
                                                                                       0
                                                                                    
                                                                                 
                                                                                 )
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     2
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          .
                                       
                                    
                                 
                              
                           
                        
                     

Not surprising, this yields 
                           
                              z
                              =
                              
                                 
                                    Z
                                 
                                 
                                    r
                                 
                              
                              +
                              
                                 
                                    γ
                                 
                                 
                                    0
                                 
                              
                              
                              
                                 
                                    t
                                 
                                 
                                    z
                                 
                              
                           
                        .

The angle 
                           
                              β
                           
                         between the epipolar line and occluding contour at the intersection point is determined from the slopes of the two lines (tangent lines at the intersection point):
                           
                              (A.16)
                              
                                 β
                                 =
                                 
                                    
                                       tan
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      m
                                                   
                                                   
                                                      epi
                                                   
                                                
                                                -
                                                
                                                   
                                                      m
                                                   
                                                   
                                                      occ
                                                   
                                                
                                             
                                             
                                                1
                                                +
                                                
                                                   
                                                      m
                                                   
                                                   
                                                      epi
                                                   
                                                
                                                
                                                
                                                   
                                                      m
                                                   
                                                   
                                                      occ
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

To simplify, we define
                           
                              (A.17)
                              
                                 
                                    
                                       
                                       
                                          
                                             A
                                             =
                                             
                                                
                                                   t
                                                
                                                
                                                   x
                                                
                                             
                                             (
                                             
                                                
                                                   X
                                                
                                                
                                                   r
                                                
                                             
                                             +
                                             γ
                                             
                                             
                                                
                                                   t
                                                
                                                
                                                   x
                                                
                                             
                                             )
                                             +
                                             
                                                
                                                   t
                                                
                                                
                                                   z
                                                
                                             
                                             (
                                             
                                                
                                                   Z
                                                
                                                
                                                   r
                                                
                                             
                                             +
                                             γ
                                             
                                             
                                                
                                                   t
                                                
                                                
                                                   z
                                                
                                             
                                             )
                                             ,
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             B
                                             =
                                             
                                                
                                                   R
                                                
                                                
                                                   2
                                                
                                             
                                             (
                                             t
                                             )
                                             -
                                             
                                                
                                                   Y
                                                
                                                
                                                   r
                                                
                                                
                                                   2
                                                
                                             
                                             =
                                             
                                                
                                                   (
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         r
                                                      
                                                   
                                                   +
                                                   γ
                                                   
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         x
                                                      
                                                   
                                                   )
                                                
                                                
                                                   2
                                                
                                             
                                             +
                                             
                                                
                                                   (
                                                   
                                                      
                                                         Z
                                                      
                                                      
                                                         r
                                                      
                                                   
                                                   +
                                                   γ
                                                   
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         z
                                                      
                                                   
                                                   )
                                                
                                                
                                                   2
                                                
                                             
                                             ,
                                          
                                       
                                    
                                 
                              
                           
                        which, upon substitution into (A.16) yields
                           
                              (A.18)
                              
                                 β
                                 =
                                 
                                    
                                       tan
                                    
                                    
                                       -
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      R
                                                   
                                                   
                                                      2
                                                   
                                                
                                                (
                                                t
                                                )
                                                (
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      x
                                                   
                                                
                                                
                                                   
                                                      Z
                                                   
                                                   
                                                      r
                                                   
                                                
                                                -
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      z
                                                   
                                                
                                                
                                                   
                                                      X
                                                   
                                                   
                                                      r
                                                   
                                                
                                                )
                                             
                                             
                                                AB
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

It readily follows that the coincidence of the epipolar curve and the occluding contour corresponds to the condition 
                           
                              
                                 
                                    t
                                 
                                 
                                    x
                                 
                              
                              
                                 
                                    Z
                                 
                                 
                                    r
                                 
                              
                              -
                              
                                 
                                    t
                                 
                                 
                                    z
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    r
                                 
                              
                              =
                              0
                           
                        .

Defining 
                           
                              v
                              =
                              (
                              -
                              
                                 
                                    t
                                 
                                 
                                    z
                                 
                              
                              ,
                              0
                              ,
                              
                                 
                                    t
                                 
                                 
                                    x
                                 
                              
                              )
                           
                         and 
                           
                              
                                 
                                    P
                                 
                                 
                                    v
                                 
                              
                              =
                              (
                              
                                 
                                    X
                                 
                                 
                                    r
                                 
                              
                              ,
                              0
                              ,
                              
                                 
                                    Z
                                 
                                 
                                    r
                                 
                              
                              )
                           
                        , the degeneracy condition is written 
                           
                              (
                              v
                              ·
                              
                                 
                                    P
                                 
                                 
                                    v
                                 
                              
                              )
                              =
                              0
                           
                         . Additionally, 
                           
                              v
                              ·
                              t
                              =
                              0
                           
                         means 
                           
                              v
                           
                         is perpendicular to the 3-D occluding curve. Using these facts and (A.1), we obtain 
                           
                              
                                 
                                    Z
                                 
                                 
                                    o
                                 
                              
                              (
                              t
                              )
                              =
                              
                                 
                                    
                                       
                                          Z
                                       
                                       
                                          r
                                       
                                    
                                 
                                 
                                    
                                       
                                          X
                                       
                                       
                                          r
                                       
                                    
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    o
                                 
                              
                              (
                              t
                              )
                           
                        ; equation of a line in XZ plane passing through origin (see Fig. A.18
                        (a)). Thus, the degeneracy arises if the local tangent of the 3-D occluding contour lies in a plane 
                           
                              π
                           
                         containing the Y-axis.While 
                           
                              (
                              v
                              ·
                              
                                 
                                    P
                                 
                                 
                                    v
                                 
                              
                              )
                              =
                              0
                           
                         establishes the degeneracy condition, ill-conditioned cases arise where the condition holds approximately (i.e., 
                           
                              |
                              v
                              ·
                              
                                 
                                    P
                                 
                                 
                                    v
                                 
                              
                              |
                              ⩽
                              
                                 
                                    T
                                 
                                 
                                    d
                                 
                              
                           
                        , for some threshold 
                           
                              
                                 
                                    T
                                 
                                 
                                    d
                                 
                              
                           
                        ). That is,, an ill-conditioned problem arises when the 3-D line lies within a volume bounded by two planes at some distance 
                           
                              
                                 
                                    T
                                 
                                 
                                    d
                                 
                              
                           
                         on either side of plane 
                           
                              π
                           
                        .

Let us explore the variations in intersection angle 
                           
                              β
                           
                         with the orientation of the occluding contour. The degeneracy condition is independent of 
                           
                              
                                 
                                    Y
                                 
                                 
                                    r
                                 
                              
                           
                         and 
                           
                              
                                 
                                    t
                                 
                                 
                                    y
                                 
                              
                           
                        , so we set 
                           
                              
                                 
                                    Y
                                 
                                 
                                    r
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    y
                                 
                              
                              =
                              0
                           
                        , and fix 
                           
                              
                                 
                                    Z
                                 
                                 
                                    r
                                 
                              
                              =
                              1
                           
                         [m]. Defining 
                           
                              α
                              =
                              
                                 
                                    tan
                                 
                                 
                                    -
                                    1
                                 
                              
                              
                                 
                                    
                                       
                                          t
                                       
                                       
                                          x
                                       
                                    
                                 
                                 
                                    
                                       
                                          t
                                       
                                       
                                          z
                                       
                                    
                                 
                              
                              =
                              
                                 
                                    tan
                                 
                                 
                                    -
                                    1
                                 
                              
                              
                                 
                                    
                                       
                                          t
                                       
                                       
                                          x
                                       
                                    
                                 
                                 
                                    
                                       
                                          1
                                          -
                                          
                                             
                                                t
                                             
                                             
                                                x
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                 
                              
                           
                        , we vary 
                           
                              α
                           
                         between −90 to 90 [deg] (in increments of 15 degrees). We also vary 
                           
                              
                                 
                                    X
                                 
                                 
                                    r
                                 
                              
                           
                         from −1 [m] to 1 [m] (i.e., over 90 [deg] in field of view). Fig. A.18(b) depicts the variations in the intersection angle 
                           
                              β
                           
                         (same exact results are obtained independent of 
                           
                              
                                 
                                    Y
                                 
                                 
                                    r
                                 
                              
                           
                        ). Assume that the minimum intersection angle of 
                           
                              β
                           
                        
                        =30 [deg] is set for the robust estimation of the intersection point (black line). The plot gives the corresponding minimum local slope parameter 
                           
                              α
                           
                        , for any 
                           
                              
                                 
                                    X
                                 
                                 
                                    r
                                 
                              
                           
                        .

While the relative pose of the two cameras can be established by opti-acoustic stereo calibration method in [20], we seek a simple method to readily rectify small-angle misalignment from the desired coincident stereo geometry.The rotation matrix R in (4) describes the ideal pose of the two cameras. Small misalignments are inevitable, and can be represented by 
                        
                           
                              
                                 
                                    
                                       P
                                    
                                    
                                       o
                                    
                                 
                              
                              
                                 ^
                              
                           
                           =
                           
                              
                                 R
                              
                              
                                 mis
                              
                           
                           
                              
                                 R
                              
                              
                                 T
                              
                           
                           
                              
                                 P
                              
                              
                                 s
                              
                           
                           ;
                           
                              
                                 R
                              
                              
                                 mis
                              
                           
                           =
                           R
                           (
                           
                              
                                 α
                              
                              
                                 z
                              
                           
                           )
                           R
                           (
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                           )
                           R
                           (
                           
                              
                                 α
                              
                              
                                 x
                              
                           
                           )
                        
                      incorporates the 3 degrees of freedom 
                        
                           (
                           
                              
                                 α
                              
                              
                                 x
                              
                           
                           ,
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                           ,
                           
                              
                                 α
                              
                              
                                 z
                              
                           
                           )
                        
                     . In practice, 
                        
                           
                              
                                 α
                              
                              
                                 x
                              
                           
                        
                      and 
                        
                           
                              
                                 α
                              
                              
                                 z
                              
                           
                        
                      can be made negligible by installing the two cameras on a suitable (planar) mount. However, the misalignment angle 
                        
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                        
                      between the two viewing axes must be corrected to ensure that both cameras view the same 3-D occluding rim. Thus, we seek a simple method to estimate 
                        
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                        
                     , and subsequently make adjustment to the relative pose of the two cameras. For generality, we derive constraints in terms of all three angles, and then derive solutions for either 
                        
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                        
                      or 
                        
                           
                              
                                 α
                              
                              
                                 z
                              
                           
                        
                     . The optical match 
                        
                           
                              
                                 
                                    
                                       p
                                    
                                    
                                       ^
                                    
                                 
                              
                              
                                 o
                              
                           
                           =
                           [
                           
                              
                                 
                                    
                                       x
                                    
                                    
                                       ^
                                    
                                 
                              
                              
                                 o
                              
                           
                           ,
                           
                              
                                 
                                    
                                       y
                                    
                                    
                                       ^
                                    
                                 
                              
                              
                                 o
                              
                           
                           ,
                           f
                           ]
                        
                      of a sonar image point 
                        
                           (
                           
                              
                                 x
                              
                              
                                 s
                              
                           
                           ,
                           
                              
                                 y
                              
                              
                                 s
                              
                           
                           )
                        
                      (with 
                        
                           
                              
                                 
                                    
                                       P
                                    
                                    
                                       o
                                    
                                 
                              
                              
                                 ^
                              
                           
                           =
                           
                              
                                 R
                              
                              
                                 mis
                              
                           
                           
                              
                                 R
                              
                              
                                 T
                              
                           
                           
                              
                                 P
                              
                              
                                 s
                              
                           
                        
                      and 
                        
                           
                              
                                 P
                              
                              
                                 s
                              
                           
                           =
                           
                              
                                 [
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 cos
                                 ϕ
                                 ,
                                 
                                    
                                       y
                                    
                                    
                                       s
                                    
                                 
                                 cos
                                 ϕ
                                 ,
                                 R
                                 sin
                                 ϕ
                                 ]
                              
                              
                                 T
                              
                           
                        
                     ) is
                        
                           (B.1)
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          o
                                       
                                    
                                 
                                 
                                    f
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          k
                                       
                                       
                                          x
                                       
                                    
                                    
                                       
                                          x
                                       
                                       
                                          s
                                       
                                    
                                    +
                                    
                                       
                                          k
                                       
                                       
                                          y
                                       
                                    
                                    
                                       
                                          y
                                       
                                       
                                          s
                                       
                                    
                                    +
                                    
                                       
                                          k
                                       
                                       
                                          r
                                       
                                    
                                    R
                                 
                                 
                                    
                                       
                                          m
                                       
                                       
                                          x
                                       
                                    
                                    
                                       
                                          x
                                       
                                       
                                          s
                                       
                                    
                                    +
                                    
                                       
                                          m
                                       
                                       
                                          y
                                       
                                    
                                    
                                       
                                          y
                                       
                                       
                                          s
                                       
                                    
                                    +
                                    
                                       
                                          m
                                       
                                       
                                          r
                                       
                                    
                                    R
                                 
                              
                              ;
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                y
                                             
                                             
                                                ^
                                             
                                          
                                       
                                       
                                          o
                                       
                                    
                                 
                                 
                                    f
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          l
                                       
                                       
                                          x
                                       
                                    
                                    
                                       
                                          x
                                       
                                       
                                          s
                                       
                                    
                                    +
                                    
                                       
                                          l
                                       
                                       
                                          y
                                       
                                    
                                    
                                       
                                          y
                                       
                                       
                                          s
                                       
                                    
                                    +
                                    
                                       
                                          l
                                       
                                       
                                          r
                                       
                                    
                                    R
                                 
                                 
                                    
                                       
                                          m
                                       
                                       
                                          x
                                       
                                    
                                    
                                       
                                          x
                                       
                                       
                                          s
                                       
                                    
                                    +
                                    
                                       
                                          m
                                       
                                       
                                          y
                                       
                                    
                                    
                                       
                                          y
                                       
                                       
                                          s
                                       
                                    
                                    +
                                    
                                       
                                          m
                                       
                                       
                                          r
                                       
                                    
                                    R
                                 
                              
                              ;
                           
                        
                     
                     
                        
                           (B.2)
                           
                              
                                 
                                    
                                    
                                       
                                          
                                             
                                                k
                                             
                                             
                                                x
                                             
                                          
                                          =
                                          cos
                                          ϕ
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                             
                                                k
                                             
                                             
                                                y
                                             
                                          
                                          =
                                          cos
                                          ϕ
                                          
                                          (
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          +
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          )
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                             
                                                k
                                             
                                             
                                                r
                                             
                                          
                                          =
                                          sin
                                          ϕ
                                          
                                          (
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          -
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          )
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                             
                                                l
                                             
                                             
                                                x
                                             
                                          
                                          =
                                          cos
                                          ϕ
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                             
                                                l
                                             
                                             
                                                y
                                             
                                          
                                          =
                                          cos
                                          ϕ
                                          
                                          (
                                          -
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          +
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          )
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                             
                                                l
                                             
                                             
                                                r
                                             
                                          
                                          =
                                          -
                                          sin
                                          ϕ
                                          
                                          (
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          +
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          )
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                             
                                                m
                                             
                                             
                                                x
                                             
                                          
                                          =
                                          -
                                          cos
                                          ϕ
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                             
                                                m
                                             
                                             
                                                y
                                             
                                          
                                          =
                                          cos
                                          ϕ
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                             
                                                m
                                             
                                             
                                                r
                                             
                                          
                                          =
                                          -
                                          sin
                                          ϕ
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                x
                                             
                                          
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                y
                                             
                                          
                                          .
                                       
                                    
                                 
                              
                           
                        
                     
                  

These can be rewritten
                        
                           (B.3)
                           
                              
                                 
                                    
                                    
                                       
                                          (
                                          
                                             
                                                k
                                             
                                             
                                                x
                                             
                                          
                                          -
                                          
                                             
                                                m
                                             
                                             
                                                x
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                          
                                             
                                                x
                                             
                                             
                                                s
                                             
                                          
                                          +
                                          (
                                          
                                             
                                                k
                                             
                                             
                                                y
                                             
                                          
                                          -
                                          
                                             
                                                m
                                             
                                             
                                                y
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                          
                                             
                                                y
                                             
                                             
                                                s
                                             
                                          
                                          +
                                          (
                                          
                                             
                                                k
                                             
                                             
                                                r
                                             
                                          
                                          -
                                          
                                             
                                                m
                                             
                                             
                                                r
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                          R
                                          =
                                          0
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          (
                                          
                                             
                                                l
                                             
                                             
                                                x
                                             
                                          
                                          -
                                          
                                             
                                                m
                                             
                                             
                                                x
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                          
                                             
                                                x
                                             
                                             
                                                s
                                             
                                          
                                          +
                                          (
                                          
                                             
                                                l
                                             
                                             
                                                y
                                             
                                          
                                          -
                                          
                                             
                                                m
                                             
                                             
                                                y
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                          
                                             
                                                y
                                             
                                             
                                                s
                                             
                                          
                                          +
                                          (
                                          
                                             
                                                l
                                             
                                             
                                                r
                                             
                                          
                                          -
                                          
                                             
                                                m
                                             
                                             
                                                r
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                          R
                                          =
                                          0
                                          .
                                       
                                    
                                 
                              
                           
                        
                     Setting 
                        
                           
                              
                                 α
                              
                              
                                 x
                              
                           
                           =
                           
                              
                                 α
                              
                              
                                 z
                              
                           
                           =
                           0
                        
                     , the equation for 
                        
                           
                              
                                 
                                    
                                       x
                                    
                                    
                                       ^
                                    
                                 
                              
                              
                                 o
                              
                           
                        
                      gives a simple solution for 
                        
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                        
                     :
                        
                           (B.4)
                           
                              
                                 
                                    α
                                 
                                 
                                    y
                                 
                              
                              =
                              
                                 
                                    tan
                                 
                                 
                                    -
                                    1
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             (
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         ^
                                                      
                                                   
                                                
                                                
                                                   o
                                                
                                             
                                             /
                                             f
                                             )
                                             
                                                
                                                   y
                                                
                                                
                                                   s
                                                
                                             
                                             -
                                             
                                                
                                                   x
                                                
                                                
                                                   s
                                                
                                             
                                          
                                          
                                             (
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         ^
                                                      
                                                   
                                                
                                                
                                                   o
                                                
                                             
                                             /
                                             f
                                             )
                                             
                                                
                                                   x
                                                
                                                
                                                   s
                                                
                                             
                                             +
                                             
                                                
                                                   y
                                                
                                                
                                                   s
                                                
                                             
                                          
                                       
                                    
                                 
                              
                              .
                           
                        
                     Utilizing a planar grid of opti-acoustic reflectors for calibration [20], an estimate is obtained from each corresponding pair 
                        
                           {
                           (
                           
                              
                                 x
                              
                              
                                 s
                              
                           
                           ,
                           
                              
                                 y
                              
                              
                                 s
                              
                           
                           )
                           ,
                           (
                           
                              
                                 
                                    
                                       x
                                    
                                    
                                       ^
                                    
                                 
                              
                              
                                 o
                              
                           
                           ,
                           
                              
                                 
                                    
                                       y
                                    
                                    
                                       ^
                                    
                                 
                              
                              
                                 o
                              
                           
                           )
                           }
                        
                     . In practice, a least-square solution allows exploiting the redundancy from a large number of grid points.We can similarly obtain a solution where the misalignment is dominantly due to 
                        
                           
                              
                                 α
                              
                              
                                 z
                              
                           
                        
                      angle. Setting 
                        
                           
                              
                                 α
                              
                              
                                 x
                              
                           
                           =
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                           =
                           0
                        
                     , we have
                        
                           (B.5)
                           
                              
                                 
                                    
                                    
                                       
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          
                                          
                                             
                                                x
                                             
                                             
                                                s
                                             
                                          
                                          +
                                          tan
                                          ϕ
                                          
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          
                                          R
                                          -
                                          (
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                          
                                             
                                                y
                                             
                                             
                                                s
                                             
                                          
                                          =
                                          0
                                          ;
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          sin
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          
                                          
                                             
                                                x
                                             
                                             
                                                s
                                             
                                          
                                          -
                                          tan
                                          ϕ
                                          
                                          cos
                                          
                                             
                                                α
                                             
                                             
                                                z
                                             
                                          
                                          
                                          R
                                          -
                                          (
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                          
                                             
                                                y
                                             
                                             
                                                s
                                             
                                          
                                          =
                                          0
                                          .
                                       
                                    
                                 
                              
                           
                        
                     For points 
                        
                           
                              
                                 x
                              
                              
                                 s
                              
                           
                           =
                           R
                           sin
                           θ
                           =
                           0
                        
                      along azimuthal scan 
                        
                           θ
                           =
                           0
                        
                     , we can readily write the solution:
                        
                           (B.6)
                           
                              
                                 
                                    α
                                 
                                 
                                    z
                                 
                              
                              =
                              -
                              
                                 
                                    tan
                                 
                                 
                                    -
                                    1
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         ^
                                                      
                                                   
                                                
                                                
                                                   o
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         ^
                                                      
                                                   
                                                
                                                
                                                   o
                                                
                                             
                                          
                                       
                                    
                                 
                              
                              
                              tan
                              ϕ
                              =
                              -
                              sign
                              (
                              
                                 
                                    
                                       
                                          y
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    o
                                 
                              
                              )
                              
                                 
                                    
                                       
                                          (
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                       
                                       
                                          2
                                       
                                    
                                    +
                                    
                                       
                                          (
                                          
                                             
                                                
                                                   
                                                      y
                                                   
                                                   
                                                      ^
                                                   
                                                
                                             
                                             
                                                o
                                             
                                          
                                          /
                                          f
                                          )
                                       
                                       
                                          2
                                       
                                    
                                 
                              
                              .
                           
                        
                     For points with non-zero azimuth angles, eliminating 
                        
                           tan
                           ϕ
                        
                      from the two equations in (B.5) yields
                        
                           (B.7)
                           
                              (
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    o
                                 
                              
                              /
                              f
                              )
                              cos
                              
                                 
                                    α
                                 
                                 
                                    z
                                 
                              
                              +
                              (
                              
                                 
                                    
                                       
                                          y
                                       
                                       
                                          ^
                                       
                                    
                                 
                                 
                                    o
                                 
                              
                              /
                              f
                              )
                              sin
                              
                                 
                                    α
                                 
                                 
                                    z
                                 
                              
                              =
                              (
                              
                                 
                                    x
                                 
                                 
                                    s
                                 
                              
                              /
                              
                                 
                                    y
                                 
                                 
                                    s
                                 
                              
                              )
                              .
                           
                        
                     The solution is now expressed in the form
                        
                           (B.8)
                           
                              
                                 
                                    α
                                 
                                 
                                    z
                                 
                              
                              =
                              
                                 
                                    sin
                                 
                                 
                                    -
                                    1
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             (
                                             
                                                
                                                   x
                                                
                                                
                                                   s
                                                
                                             
                                             /
                                             
                                                
                                                   y
                                                
                                                
                                                   s
                                                
                                             
                                             )
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         (
                                                         
                                                            
                                                               
                                                                  
                                                                     x
                                                                  
                                                                  
                                                                     ^
                                                                  
                                                               
                                                            
                                                            
                                                               o
                                                            
                                                         
                                                         /
                                                         f
                                                         )
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         (
                                                         
                                                            
                                                               
                                                                  
                                                                     y
                                                                  
                                                                  
                                                                     ^
                                                                  
                                                               
                                                            
                                                            
                                                               o
                                                            
                                                         
                                                         /
                                                         f
                                                         )
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                              -
                              β
                              ,
                           
                        
                     where
                        
                           
                              β
                              =
                              
                                 
                                    tan
                                 
                                 
                                    -
                                    1
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   ^
                                                
                                             
                                          
                                          
                                             o
                                          
                                       
                                       /
                                       f
                                       ,
                                       
                                          
                                             
                                                
                                                   y
                                                
                                                
                                                   ^
                                                
                                             
                                          
                                          
                                             o
                                          
                                       
                                       /
                                       f
                                    
                                 
                              
                              .
                           
                        
                     
                  


                     Fig. B.19
                      depicts sample simulations with noisy sonar and optical data, utilizing zero-mean additive sonar and optical noise with 
                        
                           
                              
                                 σ
                              
                              
                                 s
                              
                           
                           =
                           1
                        
                      [cm], 
                        
                           
                              
                                 σ
                              
                              
                                 o
                              
                           
                           =
                           1
                        
                      [pix] (left) and 
                        
                           
                              
                                 σ
                              
                              
                                 s
                              
                           
                           =
                           2
                        
                      [cm], 
                        
                           
                              
                                 σ
                              
                              
                                 o
                              
                           
                           =
                           1
                        
                      [pix] (right). For each sonar view (top) of a grid of distinct opti-acoustic reflectors, the optical images correspond to a misalignment of 
                        
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                           =
                           5
                        
                      [deg]. The histograms show the estimated misalignment angles over all grid points (true value of 5 [deg] shown by vertical bar).


                     Fig. B.20
                      shows the same results for a misalignment of 
                        
                           
                              
                                 α
                              
                              
                                 z
                              
                           
                           =
                           5
                        
                      (b). With noisy data, we may obtain a complex solution from (B.8). In the histograms, this is depicted by setting the solution arbitrarily to 
                        
                           π
                        
                     .

The results presented in Fig. B.21
                      are from the real images of a calibration grid. Grid data points in the sonar (top) and optical (bottom) images for 3 opti-acoustic stereo pairs are shown in different colors. In the right column, we have given the 3 histograms of the misalignment angle 
                        
                           
                              
                                 α
                              
                              
                                 y
                              
                           
                        
                      computed from each pair, which have been compared to the estimate of about 
                        
                           1.53
                        
                      [deg] from the opti-acoustic calibration method in [20]; shown by red bar.

@&#REFERENCES@&#

