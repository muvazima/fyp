@&#MAIN-TITLE@&#Development of a wireless blood pressure measuring device with smart mobile device

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A wireless blood pressure measuring device used together with a smart mobile device was developed.


                        
                        
                           
                           The smart mobile device was used as an indicator and a control device.


                        
                        
                           
                           The cuff communicating with this device through Bluetooth was designed to measure blood pressure on the arm.


                        
                        
                           
                           Digital filter was used on the cuff instead of classical analog signal processing and filtering circuit.


                        
                        
                           
                           The test results showed that higher accuracy could be achieved with the device developed.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Blood pressure

Bluetooth

Mobile programming

Signal processing

Smart mobile device

@&#ABSTRACT@&#


               
               
                  Today, smart mobile devices (telephones and tablets) are very commonly used due to their powerful hardware and useful features. According to an eMarketer report, in 2014 there were 1.76 billion smartphone users (excluding users of tablets) in the world; it is predicted that this number will rise by 15.9% to 2.04 billion in 2015. It is thought that these devices can be used successfully in biomedical applications. A wireless blood pressure measuring device used together with a smart mobile device was developed in this study. By means of an interface developed for smart mobile devices with Android and iOS operating systems, a smart mobile device was used both as an indicator and as a control device. The cuff communicating with this device through Bluetooth was designed to measure blood pressure via the arm. A digital filter was used on the cuff instead of the traditional analog signal processing and filtering circuit. The newly developed blood pressure measuring device was tested on 18 patients and 20 healthy individuals of different ages under a physician's supervision. When the test results were compared with the measurements made using a sphygmomanometer, it was shown that an average 93.52% accuracy in sick individuals and 94.53% accuracy in healthy individuals could be achieved with the new device.
               
            

@&#INTRODUCTION@&#

Today, smart mobile devices (phones and tablets) are equipped with high-speed processors, high-resolution cameras and numerous receptors (accelerometer, light sensor, orientation sensor etc.). For this reason, the use of these devices is becoming increasingly widespread. People take photographs, connect to the internet, get directions and listen to the radio using the devices’ in-built features or sensors or via an additional apparatus attached to the devices.

According to a report released by the market research company eMarketer, 1.76 billion people in the world were using smartphones (excluding tablets) in 2014; this number is predicted to increase 15.9% to 2.04 billion in 2015 [1]. In other words, approximately one-quarter of the world's population will have owned a smartphone by the end of 2015. These data are important since they give an indication of the size of the target audience for the biomedical applications developed on these devices.

Due to its prevalence and the size of the economic burden it causes, hypertension is a social problem, causing permanent disability and death all over the world. Yet hypertension is top of the list of “preventable causes of death” according to data reported by the World Health Organization [2]. The fact that a considerable number of patients are not aware of the existence of the disease makes addressing hypertension even more important. As the effects of high blood pressure emerge suddenly, and these effects have potentially fatal risks, it is vital to measure blood pressure accurately and to encourage patients to take necessary action. The importance of measuring blood pressure at home to predict organ damage due to hypertension is underlined in European and Canadian hypertension guides published in recent years [3,4]. Measurements of blood pressure levels taken in a hospital environment are unreliable because of the psychology of the patient and stress levels associated with that environment. Furthermore, in these studies it was reported that the motivation of the individuals using automatic (digital) measuring devices at home for tension treatment improved and they also had higher treatment continuation rates [4].

Recently, various studies have been carried out to measure blood pressure levels by means of smartphones [5–11]. A wireless blood pressure measuring device running on smartphones with different operating systems (Android, iOS, Blackberry), which makes measurements by means of the oscillometric method, was developed in one of these studies [5]. However, an analog filter was used as the signal processing and improvement method in this device. Also, the device that was developed was tested only on ten healthy individuals. The results obtained were compared with those from a digital commercial tension device and only an average accuracy level of 85% could be reached. Electrocardiogram (ECG) and photoplethysmography (PPG) signals were used to calculate pulse transmission times and blood pressure was estimated using smartphones in the second study [6]. However, a second smartphone was used in this study to obtain the ECG signals. The experiments were conducted only on five people and an average accuracy level of 95% could be obtained. Similarly, ECG and PPG signals were used in the third study [7]. However, another ECG module was required to estimate the blood pressure. In addition to that, this study explored its use as a driver safety monitoring system. A smartphone was used in place of a manometer only in one other study where a traditional sphygmomanometer and smartphone were used together [8]. However, the device that was developed was tested only on five healthy individuals and the results were compared with a digital and commercial tension measurement device. Accuracy levels of only 85.5% and 95% could be obtained for the systolic and the diastolic pressure, respectively. In the study proposed in [9], a wireless blood pressure measuring device was developed for devices with an iOS operating system, again using the oscillometric method. However, an analog filter was again used for the prediction of both blood pressure and heart rate values in this device. The device was checked by using a blood pressure simulator in the laboratory and in a clinical environment with 19 individuals. In the clinical tests, the difference for systolic blood pressure was 2.66±2.71mmHg and 3.42±4.42mmHg for diastolic blood pressure. Visvanathan et al. developed a smartphone-based blood pressure indicator using PPG signals [10]. PPG signals were obtained from a finger placed on a camera lens, using software developed for smartphones with an iOS operating system. These signals could only be processed, allowing blood pressure and heart rate values to be predicted, by means of the software on the computer. Finally, the results obtained were shown to the user via a smartphone. In another study by Lee et al., a Bluetooth blood pressure and heart rate monitor and mobile care system integrated with a smartphone was developed and designed [11]. This system developed for hypertension patients reports the patients’ physiological parameters to their family members at certain intervals via a wireless network. 95% of the health personnel on whom the device was tested agreed that the device can be useful in terms of medical cost, distant health services and obtaining useful reference data.

A wireless blood pressure measuring device used with a smartphone was developed in this study. With the interface developed, the mobile device was used both as the indicator and as the control device; the blood pressure measuring values were recorded to the database within the device itself. Thus, it is possible to make queries related to this data and the results of such queries can be sent to the relevant person by means of email or SMS. The cuff communicating with the smartphone device via Bluetooth was designed to measure blood pressure via the arm. A digital filter was used on the cuff instead of an analog signal processing and filtering circuit.

@&#METHODS@&#

Blood pressure (tension) is defined as the pressure that blood applies on the walls of an artery. There are two types of tension: systolic blood pressure and diastolic blood pressure. The tension measured during the contraction of the heart is called systolic blood pressure while the one measured during the relaxation of the heart is called diastolic blood pressure. 120 and 80mmHg levels are the normal values for systolic and diastolic blood pressures, respectively [12]. Two different methods, invasive and non-invasive, are used to measure blood pressure [13]. Invasive methods are generally used in hospitals and intensive care units by means of placing a catheter inside the appropriate artery. Non-invasive methods, on the other hand, do not require penetration through the skin. Instead, they measure by blocking the blood flow passing through the arm by means of a cuff which is filled with air. The most common methods among these are the auscultatory method and the oscillometric method [14].

This method was first defined by Nicolai Korotkoff in 1905. In this method, the sounds produced by the arm artery as a result of the varying pressure applied by the cuff wrapped around the arm are used for estimating blood pressure. Korotkoff sounds, listened to by means of a stethoscope over the brachial artery right below the cuff, change with the pressure applied on the artery by the tightening cuff. Korotkoff sounds have a bandwidth ranging between 20Hz and 300Hz [15]. The blocking cuff is inflated until it reaches a value over the systolic pressure value and is deflated slowly with a speed of 2–3mmHg/sec. The blood gushes inside the vein under the cuff and causes a perceivable pulse on the wrist when the systolic peaks are higher than the blocking pressure. Korotkoff sounds start to be heard in the meantime and change at a certain level when the pressure on the cuff is reduced. Manometer pressure at the moment when the sounds are heard for the first time will be recorded as the systolic blood pressure. Other sounds changing with the decrease in the cuff pressure continue to exist for a while. The cuff pressure at the moment when the sounds were heard for the last time is recorded as diastolic blood pressure [16].

Automatic tension devices commonly used today generally measure using the oscillometric method [17]. In this method, the cuff placed on the arm of the patient is inflated with air until the blood flow in the arm artery is stopped. After that, the cuff is deflated slowly. The blood in the artery starts to flow again while the pressure of the cuff is reduced. Right at this moment, the small oscillations occurring in the cuff pressure because of the heartbeat are observed. First, the amplitude of the oscillations increases while the cuff is being deflated. Subsequently these oscillations slow down and disappear. Systolic blood pressure can be determined by measuring the cuff pressure at the moment when the oscillations start, while diastolic blood pressure can be determined by measuring the cuff pressure at the moment when the oscillations begin to disappear. The mean arterial pressure (mean blood pressure) is determined by means of the cuff pressure observed at the moment when the oscillations with the highest amplitude occur while the cuff is deflated [18]. After that the systolic and diastolic blood pressures are estimated using mathematical formulae [19]. There is no clear information about this since these formulae are commercial secrets held by the manufacturing companies. Different systolic and diastolic characteristic ratios are used for each device [13]. Oscillation amplitudes formed with the oscillometric method are shown in Fig. 1
                            
                           [20].

The block diagram of the prototype is given in Fig. 2
                        . As shown in the figure, the prototype is comprised of two main components: the cuff placed on the upper arm and a smart mobile device. While the first component is used for the estimation of systolic, mean and diastolic blood pressures, the second component is used as an indicator and a control device. The cuff placed around the upper arm has a microcontroller, a mini compressor, a directional control valve, a pressure sensor and a Bluetooth module and supply elements. An 8-bit ATmega328P microcontroller by Atmel was used as a microcontroller. This microcontroller features such properties as an operation frequency up to 20MHz, 23 programmable I/O ports, 8 10-bit ADC working within the voltage range of 0–V
                        CC and low power consumption [21]. The mini compressor and the directional control valve are used to inflate and deflate the cuff. Signals received from the pressure sensor indicating the pressure value of the cuff are directly applied to the ADC input of the microcontroller and digitally filtered by the software inside the microcontroller. A Freescale Semiconductor MPX5050GP series pressure sensor, working in the range of 0–50kPa and generating an output in the range of 0.2–4.7V, is used as the pressure sensor in this prototype [22]. The communication between the cuff placed on the upper arm and the mobile device is ensured using Bluetooth. The low-energy CC2541 Bluetooth 4.0 series by Texas Instruments was used as the Bluetooth module on the cuff. [23]. Communication with the smart mobile device was ensured via this module with 9600 baud rate, using RS-232 serial protocol. A smart mobile device with Bluetooth was used as the control device and indicator by means of a newly developed interface. This device, using either Android or iOS operating systems, sends commands to the cuff placed around the upper arm. The tension and heart rate values estimated via the software on the cuff were then shown to the user and recorded in the database. Features like making queries on this recorded data and sending the results of these queries to the relevant people via SMS or email were added to the developed interface.

The general flowchart of the developed system is given in Fig. 3
                        . This figure shows how the interface developed for the smart mobile device and the software developed for the microcontroller work in cooperation.

The interface was developed to be compatible with smart mobile devices using both Android and iOS operating systems. Thus, the smart mobile device interface can be easily used in 95.9% of smart mobiles (excluding tablets); according to the report published by Strategy Analytics, the percentage of people using phones with the Android operating system was 83.6% while the percentage of people using iOS was 12.3% in the third quarter of 2014 [24]. Java-based Eclipse ADT and Objective C-based XCode mobile software development platforms were used while developing interfaces for the smart mobile devices using Android and iOS operating systems since both software development platforms are open source.

The main window of the developed interface running on a smart mobile device using the Android operating system is depicted in Fig. 4
                        . As can be seen in the figure, this window contains four basic options: Bluetooth Settings, General Settings, New Measurement and Recorded Measurements. Connection to the cuff can be established using the Bluetooth Settings window, which is the first option. Equally, the measurement mode can be chosen and recorded on the EEPROM inside the microcontroller using the General Settings window. It is necessary to click the New Measurement button to make a new measurement. In this case, blood pressure and heart rate are measured by means of the software inside the microcontroller, sent to the smart mobile device and recorded in the database. Blood pressure and heart rate can be measured in two different modes: the single measurement mode and multiple measurement mode. The measurements will be made and directly sent to the smart mobile device in the first mode. Three different measurements are made consecutively at certain intervals and the average of these measurements is sent to the smart mobile device in the second mode. Measurement range is determined in the General Settings window. Data previously recorded to the database can be viewed with its standard deviation and arithmetic average values in the Recorded Measurements window, which is the last option in the main window. Also, various queries can be made on this data, including the date and time the measurement was taken. The query results are converted into a .csv file and sent to the relevant person (e.g. physician) via an email or a text message (SMS). The Recorded Measurements window on iOS operating system is seen in Fig. 5
                        .

The oscillometric method, which is a method commonly used in automatic blood pressure measuring devices, was used as the blood pressure estimation method in this study. A signal obtained from the pressure sensor specifying the pressure on the cuff is applied to the ADC input of the microcontroller. The resolution of this input is calculated using (1) for the VCC reference voltage: about 4.88mV.
                           
                              (1)
                              
                                 
                                    r
                                    e
                                    s
                                    o
                                    l
                                    u
                                    t
                                    i
                                    o
                                    n
                                    =
                                    
                                       
                                          
                                             V
                                             
                                                c
                                                c
                                             
                                          
                                       
                                       
                                          
                                             2
                                             
                                                10
                                             
                                          
                                       
                                    
                                    =
                                    
                                       5
                                       
                                          1024
                                       
                                    
                                    =
                                    4.88
                                     
                                    mV
                                 
                              
                           
                        
                     

Using Microsoft Visual C# programming language, a signal monitoring program was developed to observe the results of the applied digital filter and to monitor the pressure signals that were obtained from the ADC output of the microcontroller. Fig. 6
                         shows the signals obtained by means of this program. The signal shown in red in the figure indicates the cuff pressure. This signal was obtained by applying a four degree low pass digital average filter with 0.25Hz on the pressure signals from the ADC output, taking the noise levels into consideration. Similarly, the signal shown in blue indicates the pulse peaks; it was obtained by applying a first degree high pass digital filter with a cut off frequency of 4Hz on the red signals. The type and level of the digital filter to be applied was decided using various experiments. For this procedure, Korotkoff sounds were listened to by means of a stethoscope as the cuff deflated while at the same time monitoring the signals using the signal monitoring program that was developed. It was ensured that the first pulse peaks became clear at the moment when Korotkoff sounds started to be heard for the first time.

As shown in Fig. 6, consecutive pulse peaks progress in a fluctuating way without a regular increasing or decreasing pattern. It is necessary to eliminate this fluctuating progress in order to accurately estimate blood pressure and heart rate values. For this reason, peak points of the pulse peaks were recorded and new peak values were determined by averaging these values. Average values were calculated by considering the values at that moment and the two values that were measured previously. As an example, the 7th peak value was determined by averaging it with the 5th and 6th peak values. This is shown in Fig. 7
                        . As can be seen in the figure, the blue graphic shows the peak points of the pulses to which a high pass digital filter has been applied. These points correspond to the peak points of the signal which are shown in blue in Fig. 6. The averaged values are shown in green.

Cuff pressure corresponding to the peak with the highest amplitude (the value represented by M
                        a in Fig. 7) among the pulse peaks that were averaged indicates the mean blood pressure value (M). Three different algorithms were used to determine the systolic and diastolic blood pressure values after this value was determined. In the first algorithm, the cuff pressure corresponding to the first pulse peak that occurred while the cuff was being deflated was taken as the systolic pressure. Secondly, (2), showing the relationship between the mean (M), systolic (S) and diastolic (D) pressure, presented as a result of research and clinical studies, was used to calculate the diastolic pressure [25]. Thus, systolic and diastolic blood pressure values are determined using the first algorithm.
                           
                              (2)
                              
                                 
                                    M
                                    =
                                    
                                       1
                                       3
                                    
                                    S
                                    +
                                    
                                       2
                                       3
                                    
                                    D
                                 
                              
                           
                        
                     

Rules for using fixed ratios and the characteristic relationship between pressure values were applied for the second and third algorithms, respectively [26]. These rules, in which systolic amplitude S
                        a corresponds to S value, diastolic amplitude D
                        a corresponds to D value and maximum amplitude M
                        a corresponds to M value, are specified as follows:
                           
                              (a)
                              The rule for using fixed ratios:

The first pressure value at which S
                                 a/M
                                 a ratio exceeds 0.5573 is S
                              

The first pressure value at which D
                                 a/M
                                 a ratio decreases below 0.7608 is D
                              

The rule for establishing a characteristic relationship between pressures:For S:


                                 S
                                 a/M
                                 a
                                 =0.50 if M
                                 >200mmHg


                                 S
                                 a/M
                                 a
                                 =0.29 if 150<
                                 M
                                 ≤200mmHg


                                 S
                                 a/M
                                 a
                                 =0.45 if 135<
                                 M
                                 ≤150mmHg


                                 S
                                 a/M
                                 a
                                 =0.52 if 120<
                                 M
                                 ≤135mmHg


                                 S
                                 a/M
                                 a
                                 =0.57 if 110<
                                 M
                                 ≤120mmHg


                                 S
                                 a/M
                                 a
                                 =0.58 if 70<
                                 M
                                 ≤110mmHg


                                 S
                                 a/M
                                 a
                                 =0.64 if M
                                 ≤70mmHgFor D:


                                 D
                                 a/M
                                 a
                                 =0.75 if M
                                 >180mmHg


                                 D
                                 a/M
                                 a
                                 =0.82 if 140<
                                 M
                                 ≤180mmHg


                                 D
                                 a/M
                                 a
                                 =0.85 if 120<
                                 M
                                 ≤140mmHg


                                 D
                                 a/M
                                 a
                                 =0.78 if 60<
                                 M
                                 ≤120mmHg


                                 D
                                 a/M
                                 a
                                 =0.60 if 50<
                                 M
                                 ≤60mmHg


                                 D
                                 a/M
                                 a
                                 =0.50 if M
                                 ≤50mmHg

Heart rate values are calculated after determining blood pressure levels for each of the three algorithms separately. A single algorithm was used for this. Firstly, the arithmetic average of the distances between the first four pulse peaks is determined. Secondly, this value is divided by 60 to determine the number of heartbeats in a minute.

@&#RESULTS@&#

A few protocols for validation/evaluation of commercial automatic blood pressure measuring devices are presented [27–29]. These protocols are issued by American National Standards Institute/Association for the Advancement of Medical Instrumentation/International Organization for Standardization (ANSI/AAMI/ISO), British Hypertension Society (BHS) and European Society of Hypertension (ESH). Both ANSI/AAMI/ISO and BHS protocols require measurements to be performed on at least 85 individuals. At least three measurements are to be made on each individual. Two trained observers are to read blood pressure simultaneously using the auscultatory method with double stethoscopes. The individual readings of the observers are averaged to determine reference blood pressure value. The measurements by the automatic blood pressure measuring device and by the trained observers can be performed simultaneously or subsequently. When subsequent measurement is made, there must be at least a one-minute wait between the measurement of the automatic blood pressure measuring device and those of the observers [13]. The accuracy of the automatic blood pressure measuring device can be determined according to ANSI/AAMI/ISO protocol using the mean and standard deviation error obtained from these 255 measurements [27]. BHS protocol classifies automatic blood pressure measuring devices from level A to level D [28]. ESH protocol requires measurement to be made on at least 33 individuals, at least ten of whom are male and ten of whom are female. All of the individuals are to be at least 25. The measurements are made by two trained observers accompanied by a supervisor. The accuracy of the automatic blood pressure measuring device is determined according to ESH protocol using the mean and standard deviation error obtained from the measurements [29].

In this study, the developed prototype was calibrated before being tested on individuals. A FLUKE Biomedical ProSim 8 Vital Signs Simulator device was used for this test. This device was adjusted to six different values and these values were measured by the developed prototype. The results of the measurements showed that the developed prototype made measurements with accuracy rates of 98.43%, 96.34% and 97.78% on average for systolic pressure, diastolic pressure and the heart rate values, respectively (Table 1
                     ).

Two different test sets formed of sick and healthy individuals from different age groups (the youngest was aged 25) were used to test the accuracy of the prototype on individuals. Eighteen sick people being treated in the Cardiology Ward of Meram Faculty of Medicine Hospital were chosen as sick individuals. Twenty people among patients’ visitors and the staff on the ward were chosen as the healthy individuals.

Three different measurements were made on 38 healthy and sick individuals with approximately 5-min intervals between each measurement. The first of these measurements was made by a doctor on the ward using a traditional sphygmomanometer. A wireless blood pressure monitor developed by Withings for tablets and smartphones using Android and iOS operating systems was used for the second measurement [30]. The last measurement was made using the prototype device and the results were recorded with the ages and the names of the individuals in question. Two doctors took measurements using a sphygmomanometer; each took measurements from some, but not all, of the group of 38 individuals taking part. The measurements with the sphygmomanometer, Withings’ wireless blood pressure monitor and with the developed prototype were taken in no particular order. For example, the first measurement of the first individual was done with the traditional sphygmomanometer and the first measurement of the second person was taken with one of the other two devices.

The measurements made on sick individuals using the wireless blood pressure monitor by Withings gave average accuracy rates of 92.71%, 91.60% and 95.17% for systolic pressure, diastolic pressure and heart rate respectively, as compared to the traditional sphygmomanometer. When the measurements made with the developed prototype were compared to the ones made with the sphygmomanometer, average accuracy rates of 92.52% and 89.84% were obtained with the first algorithm for systolic and diastolic pressure values, respectively. Average accuracy rates of 93.48% and 90.66% were obtained with the second algorithm while accuracy rates of 94.57% and 91.62% were obtained with the third algorithm. The accuracy rate obtained for the heart rate values was 97.40%.

The measurements made on healthy individuals using Withings’ wireless blood pressure monitor resulted in average accuracy rates of 93.74%, 92.68% and 93.89% for systolic pressure, diastolic pressure and heart rate values respectively, when compared to the traditional sphygmomanometer. The measurements made with the developed prototype gave average accuracy rates of 93.97% and 90.62% with the first algorithm for systolic and diastolic pressure values, respectively. Average accuracy rates of 94.92% and 91.10% were obtained with the second algorithm while accuracy rates of 94.70% and 94.40% were obtained with the third algorithm. The accuracy rate obtained for the heart rate values was 95.14%.

When the averages of three different algorithms used in the developed prototype are taken for each measurement and compared with the sphygmomanometer, accuracy rates of 93.52%, 90.71% and 97.40% were obtained for systolic pressure, diastolic pressure and heart rate in sick individuals, respectively. The averages were 94.53%, 92.04% and 95.14% for the healthy individuals. These data showed that systolic pressure and heart rate values obtained by the developed prototype were more accurate than those achieved by Withings’ wireless blood pressure monitor. Results obtained from the measurements are summarized in Table 2
                     .

The results of the measurements made with both the wireless blood pressure monitor by Withings and the developed prototype showed that the systolic pressure value was estimated with higher accuracy than the diastolic pressure value as underlined in [31].

@&#CONCLUSION@&#

A wireless blood pressure measuring device used with a smartphone was developed in this study. By means of an interface developed for smart mobile devices with Android and iOS operating systems, the smartphone was used both as an indicator and a control device. The cuff communicating with this device through Bluetooth was designed in such a way to measure blood pressure via the arm. A digital filter was used on the cuff instead of an analog signal processing and filtering circuit. Also, three different algorithms were developed for estimating blood pressure and heart rate values.

The developed wireless blood pressure measuring device was tested on 18 patients and 20 healthy individuals at different ages under a physician's supervision. When the test results were compared with the measurements made using a sphygmomanometer, it was shown that the developed device recorded blood pressure with an average accuracy of 93.52% for sick individuals and 94.53% for healthy individuals.

@&#ACKNOWLEDGMENTS@&#

This study is supported by Necmettin Erbakan University Scientific Research Projects Coordinatorship, Konya, Turkey. The authors would like to thank the editors and anonymous reviewers of this manuscript for their very helpful suggestions.

@&#REFERENCES@&#

