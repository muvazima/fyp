@&#MAIN-TITLE@&#An opportunistic routing based on symmetrical traffic distribution in vehicular networks

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           An opportunistic routing algorithm is proposed for the urban scenarios in VANETs. The algorithm is composed of two phases: intersection and next hop selection phases.


                        
                        
                           
                           The type of vehicular distribution is used to evaluate the routes in the network.


                        
                        
                           
                           Vehicle's driving path is also used to select the next hop.


                        
                        
                           
                           Packet delivery, packet loss & packet e2e delay are used to evaluate the protocols.


                        
                        
                           
                           Our algorithm shows better performance compared to the other well-known protocols.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Vehicular ad-hoc network

Opportunistic routing

Driving path

Data delivery ratio

Vehicular distribution

@&#ABSTRACT@&#


               Graphical abstract
               
                  
                     
                        
                           Image, graphical abstract
                           
                        
                     
                  
               
            

@&#INTRODUCTION@&#

Nowadays vehicles become able to use wireless communication technology. Hence, vehicular ad hoc network (VANET) arises. VANET is a special type of mobile ad-hoc network (MANET) in which vehicles act as nodes. Unlike MANET, vehicles move on predefined roads; their velocity depends on the speed signs and they also have to follow traffic signs and traffic signals [1]. There are numerous applications for VANETs and they can be used for different purposes, such as improving safety (accident avoidance, incident notification), driving enhancement (congestion monitoring, parking space allocation) and commercial services (business, entertainment) [2].

The main challenge of these kinds of applications is how to maintain persistent connection among vehicle nodes to transmit data from source to destination via wireless multi-hop transmission or carry-and-forward techniques. One of the key research topics is to design effective data delivery schemes. Therefore, some research works have been conducted on this topic recently. Among the existing schemes, some works focus on selecting a candidate intersection to forward data according to the density of vehicles on the road in city environment, such as VADD [3]. However, not only the density but also the distribution of vehicles on the road can affect the node's connectivity.

On the other hand, some research works have shown that human trajectories show a high degree of temporal and spatial regularity [4,5].Most of trips made by the drivers are repetitive and formed by traveling between a limited number of sources and destinations. Therefore, vehicular driving paths are predictable [6] and using this predictability in data forwarding can improve connectivity in VANETs.

In this study, driving path predictability, vehicular density and their way of distribution over the road are used to propose an Opportunistic routing, based on Symmetrical Traffic Distribution (OSTD) for data delivery improvement.

The rest of the paper is organized as follows: In Section 2, different routing protocols in vehicular ad hoc networks are briefly introduced. OSTD is presented in Section 3, and is evaluated by a simulation study in Section 4. Finally, Section 5 concludes the paper.

@&#RELATED WORKS@&#

VANETs have some characteristics such as, high mobility, frequent topology changes, frequent network fragmentation, uneven distribution of vehicles, and no power and computation constraints, which differ from MANETs. Therefore, MANET's routing protocols, such as AODV [7] and DSR [8] are not suitable for VANETs and routing is one of the challenges in vehicular networks. Since a Global Positioning System (GPS) device will be a standard component in the future vehicles, position-based routing protocols attract some attentions in VANETs. Position based schemes use the geographical positioning information to select the next forwarding hop. Packet is sent to the next hop neighbor that is closer to the destination, without any map knowledge. This technique is called greedy forwarding toward the destination. They do not keep global network information and their performance mainly depends on the network connectivity. Thus position based routing schemes cannot work well when the vehicular traffic is sparse and of none uniform distribution. GPSR [9] and ASTAR [10] are examples of position based routing. To solve this problem, opportunistic routing has been proposed that can cope with the sparse and partitioned networks. No end-to-end path is assumed between source and destination in opportunistic routing schemes. Moreover, nodes do not require the global knowledge of network topology to forward the message. Routes are built dynamically and each node selects its next hop based on local information or carries the message until a suitable next hop is found. This comes at a price of additional delay in message delivery, due to the lower speed of vehicle's movement compared to the wireless communication's speed. Effective buffering of message also takes role in the delay increase of the network. VADD and MDDV [11] are examples of opportunistic routing.

Some works combine position based routing and opportunistic routing together. This class of protocols uses geographical maps in addition to location information to route the packets. TADS [12] and ACAR [13] are two examples of this category.

Traffic Aware Data delivery Scheme (TADS) is a protocol that chooses intersections dynamically to forward packets through a route toward the destination. Intersections are determined based on the link quality and the remaining Euclidean distance to the destination. Vehicular traffic condition is used to estimate the link quality in this scheme. The next hop through the next selected intersection is the node with minimum distance to the destination.

Adaptive connectivity aware routing (ACAR) protocol selects an optimal route with the best transmission quality. This transmission quality is based on statistical and real-time vehicular density that is gathered through an on-the-fly density collection process. At first, the route is computed based on statistical density information obtained from the pre-loaded map. Route's information is put in the packets’ header and the packets will be transmitted along the selected route. While the packets are forwarded toward the destination, vehicular densities of the road segments will be collected as well. This process is called on-the-fly density collection. When on-the-fly density collection is completed, the destination will be aware of the density information of the road segments. ACAR protocol is suitable for both day time and night time city scenarios. However, when the vehicular density increases, ACAR may choose the highest density road to forward all the packets, which causes Medium Access Control (MAC) layer collisions. Therefore, delivery ratio cannot have much improvement and sometimes may decrease.

Some opportunistic routing protocols use human behavior based trajectories for route selection. Most of vehicular networks exhibit some sort of regularity and periodicity in their mobility patterns. And this can help the routing protocols to select a more suitable path. For example, public transportation networks follow periodic schedules. Even most individuals have fairly repetitive movement patterns, for instance driving to and from the work places at approximately same times of the day. Ahmed and Kanhere [14] proposed a scheme that incorporates the periodic behavior of mobility patterns to choose the best forwarder.

Most of the vehicles are equipped by GPS and navigation systems at the present time. Therefore, vehicle's location is available. Vehicles are installed with a pre-loaded digital map, which not only describes the road topology, but also is accompanied by traffic statistics such as vehicular density and average speed.

Most of the trips made by the drivers are repetitive because they travel between a limited number of sources and destinations. Thus, vehicles can be classified into three groups, based on their driving path predictability [15]. Vehicles with fixed driving trajectory, such as buses and tramways, vehicles with almost regular trajectories, such as private cars that travel between limited numbers of places such as home, workplace, supermarket, and park. Driving paths of these vehicles are almost predictable and some methods have been proposed recently to predict the private car's driving path [16–18]. Lastly, there are vehicles with variable driving paths that do not have certain destinations, such as taxies. However, if their destination is determined in the initial stage of the trip, their trajectories will be predictable. In a research, a driving path prediction method is proposed for taxies with the assumption of destination information gathering [19]. In this study, the predictable vehicular trajectory is used to help finding a suitable route. As was mentioned, this predictability is the consequence of human individual or social behaviors.

Therefore, driving path prediction of the vehicles is feasible and each vehicle can know its driving path beforehand. If vehicles broadcast their driving path in the hello messages, each of them can earn the trajectory of the vehicles that it meets on the road and this helps to choose a more suitable next hop. On the other hand, vehicular distribution can also be considered to select a suitable forwarding route with less carrying probability that results in good data delivery ratio and less end-to-end delay in the network.

Multi-hop vehicle-to-vehicle communication is useful for supporting many vehicular applications that provide drivers safety and convenience. Developing multi-hop communication in VANET is a challenging problem. This is due to the rapidly changing topology and frequent network disconnections, which cause failure or inefficiency in traditional ad hoc routing protocols. An efficient algorithm can be meant as a selection of route that has a high data delivery ratio.

Consider the network situation shown in Fig. 1
                     , source node (S) wants to send a message to the destination (D), near intersection Id
                     .If the routing algorithm (such as ACAR) selects denser route,Ia
                      → Ib
                      → Id
                      will be used for message forwarding. This selection's consequence will be a low data delivery ratio in this scenario, because it does not consider the distribution of vehicles on the road. Ia
                      → Ib
                       is higher in vehicular density, butIa
                      → Ic
                      acts better in message forwarding. Because vehicles are more uniformly distributed on this route and as wireless communication speed is much higher than vehicles’ speed of movement, multi hop paths lead to less transmission delays comparing with carry and forward scheme. Therefore, vehicular distribution is important to be considered in route selection as well as other factors such as vehicular density and Euclidean distance.

Different factors such as vehicular density, vehicular distribution and Euclidean distance should be considered properly so that a suitable route is concluded and considering only one of these factors cannot lead to the best performance. In this study, opportunistic routing based on symmetrical traffic distribution (OSTD) considers all of these factors simultaneously and gives more importance to the vehicular density and distribution in comparison with Euclidean distance, due to the reason described in the previous paragraphs.

Some assumptions are made in this paper, which are given below:
                        
                           •
                           City environmental conditions are considered in this study.

Each vehicle is equipped with a GPS device and preloaded street-level digital map. Therefore, vehicle's current location, road topology, vehicular traffic density along the roads and average vehicles' speed on different times of the day are determined.

Vehicles broadcast beacon messages and each beacon message provides vehicle's information such as its unique ID, location, velocity, and direction. So each vehicle can find its neighbors.

A prediction method is used in each vehicle to obtain the driving path. This driving path is announced in the beacon message by the vehicles. Driving path is defined as a sequence of intersections along which the vehicle will arrive at its destination.

An accuracy factor (Fi
                              ) is defined in this study. This factor shows the accuracy of the vehicle's predicted driving path that is in the range of [0%, 100%]. F
                              
                                 i 
                              takes part in the next hop selection procedure. It is set equal to 100% for the vehicles with fixed driving trajectory (buses) and its value for the private cars is set more than taxies.

The street-level digital map is abstracted as a directed graph G (V, E). For any two intersections Ii
                               and Ij, rij
                               ∈ E will exist if there is a road segment connecting Ii
                               and Ij
                              , and vehicles can travel from Ii
                               towards Ij
                               on this road.

OSTD is an intersection-based multi-hop routing protocol that is capable of finding optimal routes by taking vehicular traffic condition and vehicles' driving path into consideration. To reach this objective, OSTD is designed as a two-phase algorithm.
                           
                              i.
                              Intersection selection phase

Next hop selection phase

Furthermore, a queue management method is also utilized to improve data delivery ratio in OSTD.


                        Intersection selection phase: When a packet carrier is approaching an intersection, it selects the next intersection toward which the packet should be forwarded. Therefore, a utility function is calculated for the neighboring roads according to Eq. (5) and based on vehicular density, vehicular distribution and Euclidean distance.

Regarding the defined parameters in Table 1
                        , utility function is calculated for each candidate intersection as follows.

Vehicular density on road rij
                         can be formulated as Eq. (1).
                           
                              (1)
                              
                                 
                                    
                                       ρ
                                       
                                          i
                                          j
                                       
                                    
                                    =
                                    
                                       
                                          N
                                          
                                             i
                                             j
                                          
                                       
                                       
                                          L
                                          
                                             i
                                             j
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        To take the vehicular distribution in to account, a parameter called relative location is defined. For each node (k) and its position (Pijk
                        ) on the road (rij
                        ), the relative location is defined as Eq. (2).
                           
                              (2)
                              
                                 
                                    
                                       l
                                       
                                          i
                                          j
                                          k
                                       
                                    
                                    =
                                    
                                       
                                          P
                                          
                                             i
                                             j
                                             k
                                          
                                       
                                       
                                          L
                                          
                                             i
                                             j
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        
                     

Considering the relative location of the vehicles on the road (rij
                        ), which is announced in their beacon messages, the vehicular spatial distribution can be calculated. For example, a single road of length 1000 m can be divided into 10 road sections with 100 m in length. Suppose that nm
                         denotes the number of vehicles on the m’th section, standard deviation of the vehicular distribution on roadrij
                         can be expressed as Eq. (3).The number of vehicles in each section can be calculated based on the collected beacons of the vehicles on the road.
                           
                              (3)
                              
                                 
                                    
                                       σ
                                       
                                          i
                                          j
                                       
                                    
                                    =
                                    
                                    
                                       
                                          
                                             ∑
                                             
                                                m
                                                =
                                                1
                                             
                                             N
                                          
                                          
                                             
                                                (
                                                
                                                   n
                                                   
                                                      m
                                                      
                                                   
                                                
                                                −
                                                
                                                   ∑
                                                   
                                                      m
                                                      =
                                                      1
                                                   
                                                   N
                                                
                                                
                                                   (
                                                   
                                                      n
                                                      m
                                                   
                                                   )
                                                
                                                /
                                                N
                                                )
                                             
                                             2
                                          
                                       
                                       N
                                    
                                    .
                                 
                              
                           
                        Furthermore, in probability theory and statistics, skewness is a measure of symmetry and its value can be positive or negative. Skewness is the third standardized moment and can be formulated as Eq. (4).
                           
                              (4)
                              
                                 
                                    
                                       γ
                                       
                                          i
                                          j
                                       
                                    
                                    =
                                    
                                       
                                          
                                             ∑
                                             
                                                m
                                                =
                                                1
                                             
                                             N
                                          
                                          
                                             
                                                (
                                                
                                                   n
                                                   m
                                                
                                                −
                                                
                                                   ∑
                                                   
                                                      m
                                                      =
                                                      1
                                                   
                                                   N
                                                
                                                
                                                   (
                                                   
                                                      n
                                                      m
                                                   
                                                   )
                                                
                                                /
                                                N
                                                )
                                             
                                             3
                                          
                                       
                                       
                                          
                                             
                                                δ
                                                
                                                   i
                                                   j
                                                
                                             
                                          
                                          3
                                       
                                    
                                    .
                                 
                              
                           
                        Smaller value of skewness shows more symmetrical distribution of vehicles on the road.

Accordingly, the utility function is formulated as Eq. (5).
                           
                              (5)
                              
                                 
                                    
                                       Θ
                                       j
                                    
                                    =
                                    
                                    
                                       
                                          
                                             D
                                             k
                                          
                                          
                                             D
                                             
                                                j
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          ρ
                                          
                                             i
                                             j
                                          
                                       
                                       
                                          1
                                          
                                          +
                                          
                                          
                                             σ
                                             
                                                i
                                                j
                                             
                                          
                                          +
                                          
                                             |
                                             
                                                γ
                                                
                                                   i
                                                   j
                                                
                                             
                                             |
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        The utility function depends on four parameters (ρij
                        , σij, Dj
                        , |γij
                        |). Whereas
                           
                              
                                 
                                    D
                                    k
                                 
                                 
                                    D
                                    j
                                 
                              
                           
                         represents the importance of the geographical distance of the intersections to the destination. And
                           
                              
                                 ρ
                                 
                                    i
                                    j
                                 
                              
                              
                                 1
                                 +
                                 
                                 
                                    σ
                                    
                                       i
                                       j
                                    
                                 
                                 +
                                 
                                    |
                                    
                                       γ
                                       
                                          i
                                          j
                                       
                                    
                                    |
                                 
                              
                           
                         determines how dense and uniform the vehicles are distributed along the route.

As it is obvious, the importance of vehicles density is set more than geographical distance in Eq. (5). For the reason that if a nearer sparse road is selected for data forwarding, data packets may need to be carried by the vehicles instead of being forwarded wirelessly to the next hop. As the wireless transmission is much faster than the vehicles’ speed, this event causes more delays and even less data delivery ratio in the network.

On the other hand, utility function will be higher for lower values of skewness (γij
                        ). When the distribution of vehicles on the sections of the road follows more symmetrical distribution; value of skewness will be lower. For example, γij
                         will be zero for normal distribution and as the asymmetry of the distribution increases, γij
                         takes higher values. When a more symmetrically distributed road is selected to forward the packets, the probability of packets’ carrying will become less. Therefore, Eq. (5)is set to be higher for more symmetrically distributed roads with lower values of γij
                         and it has an efficient way of intersection selection that can guarantee the packets to be delivered with lower delays in the network.

It is worth noting that the number of road sections affects the proposed method's efficiency. Very high and very low number of road sections may come with low efficiency of the proposed method. In this paper, the best amount for the length of the road sections is obtained by several simulation tests.


                        Next hop selection phase: The vehicles, along the road to the next selected intersection, use this phase. As a vehicle (ni
                        ) has a packet (M) to send, it selects the optimal next hop vehicle from its neighbor list. To select the next hop, it looks for a neighboring vehicle whose driving path will pass the destination of message. If more than one matching vehicles are found, they will be prioritized by evaluating Ψ
                        
                           i
                        .
                           
                              (6)
                              
                                 
                                    
                                       Ψ
                                       i
                                    
                                    =
                                    
                                       F
                                       i
                                    
                                    ×
                                    
                                       
                                          ɛ
                                       
                                       i
                                    
                                    ×
                                    
                                    
                                       
                                          v
                                          i
                                       
                                    
                                    
                                    .
                                 
                              
                           
                        The packet (M) will be sent to the vehicle with the largest value ofΨ
                        
                           i
                        .

This function depends on two parameters of accuracy factor (Fi
                        ) and average speed (vi
                        ) of the vehicles.ɛ
                           i
                         will be equal to one, if the vehicle's driving path passes the destination. Otherwise, it will be set equal to zero.

If there is no matching vehicle, ni
                         applies geographically greedy forwarding to select the next hop. It generates a copy of M, denoted as 
                           
                              M
                              ′
                           
                         increments the COPY field of the M and sends
                           
                              M
                              ′
                           
                         to the next greedy selected neighbor. After that it buffers M and keeps carrying it until a suitable vehicle, whose driving path passes the destination, is found. If ni
                         is in a sparse area and there isn't any vehicle in its neighbor list, it will carry the message by itself.


                        Queue management. For each mobile vehicle node in VANETs, the size of buffer is limited. Therefore, queue management would greatly influence the data delivery performance. In OSTD, COPY field of the message indicates the number of message copies that have been propagated, and time to live (TTL) filed of themes age shows the time duration along which a certain message will be in the network. TTL is set at the source nodes and will be decreased when it is propagated in the network. Messages with smaller COPY and lower time to live values are transmitted with higher priority in the network. Moreover, dropping strategy of the queue is as follows:
                           
                              a)
                              When a message arrives and the queue is full, it will be compared to the message at the tail of the queue and the one with bigger COPY field will be dropped. If the COPY fields of the two messages are equal, then the one with a shorter TTL is dropped.

When TTL decreases to zero, the message will be dropped to avoid unnecessary resource usage.

@&#PERFORMANCE EVALUATION@&#

To evaluate the performance of OSTD, we compare OSTD with the three existing protocols of TADS, ACAR and GPRS with carry and forward. Packet delivery, packet loss and packet end-to-end delays are used to evaluate the performance of the protocols in this study. Packet delivery ratio is defined as the number of packets received at the destination to the total number of sent packets. Packet loss shows the number of lost packets to the total number of sent packets and packet end-to-end delay reflects the time duration; it will take for a packet to be received at the destination.

We use Simulation of Urban Mobility (SUMO) to simulate vehicles movement. Its output is a timely changing coordinates of vehicles and their mobility parameters such as speed, acceleration etc. We also use NS2 (ns2.35) as a network simulator and MOVE as a connector between mobility and network simulators.

This evaluation is done in a real street area with the range of 1600  m × 1400 m, 14 intersections and 25 bidirectional roads. Average speed of vehicles is in the range of 40–80 km/h.

This simulation is repeated in different vehicular density from 100 to 300 vehicles in the area. Each intersection is assumed to have a traffic light with duration of 60 s.10 vehicles are selected to act as source nodes in this part of simulation. They send Constant Bit Rate (CBR) traffics to the fixed spots in the network with the rate of 20–200 packets per second. Packets are 512 bytes long and other simulation parameters are set according to Table 2.
                     
                  

It is notable that in IEEE 802.11p standard, the transmission range of nodes is determined according to the desired data rate in the network. In this part of simulation, nodes' transmission range is assumed 250 m to achieve data rate of 9 Mbps in the network.


                     Packet delivery ratio: 
                     Fig. 2
                     a shows that GPSR with carry and forward has the lowest packet delivery ratio. It always chooses the shortest path to the destination, without considering the vehicular density. Consequently, some data packets cannot reach their destination due to the low vehicular density on some sections of the road.

In spite of that, OSTD and TADS lead to higher packet delivery ratio for almost all data sending rates. They select the road by considering its vehicular density, Euclidean distance and vehicular distribution. Therefore, packets will arrive at the destination more successfully.

According to Eq. (5) and in the utility calculation of the proposed algorithm, Euclidean distance takes a less important role rather than vehicular density and distribution. Furthermore, vehicles driving paths are used in the proposed algorithm to choose the next hop on the selected road. Simulation results show that the above-mentioned mechanism leads to a better performance in comparison with TADS. This result was predictable due to the fact that the speed of wireless transmission is much more than the vehicles’ speed and less time duration is required to forward the packet vehicle by vehicle rather than carrying the packet over geographical distances.

ACAR has a lower delivery ratio than OSTD, because it considers only vehicular density in the path selection procedure and vehicular density cannot show how uniform the vehicles are distributed on the path. Consequently, some data packets cannot reach their destination due to the problem of sparse vehicular areas.

In Fig. 2b, as the vehicular density increases, GPSR with carry and forward achieves better delivery ratio. When there are more nodes on the route, network connectivity increases and packets will more properly be forwarded toward the destination.

But when the number of the nodes becomes larger than 150, packet delivery ratio slightly increases in ACAR. As the network density becomes larger, ACAR may choose denser roads to forward the packets; which causes MAC layer collisions and data delivery ratio cannot significantly increase and sometimes may decrease [16]. But in TADS, consideration of vehicular distribution leads to the selection of the more suitably distributed roads instead of the denser ones. Therefore, MAC layer collisions are less frequent and the results become better than ACAR. On the other hand, OSTD performs better than TADS because the driving path is used to choose the next hop in OSTD. Packets are greedy forwarded in TADS and the nodes' distances to the destination are considered to select the next hop. If the selected next hop moves in the opposite direction of the destination, the packets may not receive or may receive with long delays at the destination. This will cause packet retransmissions due to the packet time outs in the network. OSTD considers symmetrical vehicular distribution as well and this factor increases network's connectivity comparing with TADS.


                     Packet loss: Week wireless links are the main reason of packet loss in these protocols and when next hop is too far away or even out of the communication range of current packet holder, packet loss will occur. MAC collisions and nodes' buffer overflows are some other reasons of packet loss. Due to the reasons mentioned before, GPSR with carry and forward is expected to have the highest packet loss ratio. As shown in Fig. 3
                     , simulation results confirm this expectation.

Nevertheless, for almost all data sending rates OSTD and TADS lead to lower packet loss. They select the road to forward the packet by considering vehicular density, Euclidean distance, and vehicular spatial distribution. OSTD considers symmetric vehicular distribution as well. Therefore, packets will arrive at the destination more successfully.

ACAR does not consider vehicular spatial distribution in the path selection procedure. Consequently, some data packets cannot reach their destination due to the problem of sparse vehicular area.


                     Packet end-to-end delay: In Fig. 4
                     
                     a, end-to-end packet delay is shown in different data sending rates. GPSR with carry and forward has the highest end-to-end delay because lots of packets are buffered when there is no next hop available. Since the velocity of vehicles is much lower than the speed of wireless transmission, ACAR results relatively lower end-to-end delays compared to GPSR with carry and forward. An interesting result is that when the data-sending rate gets closed to 170 pkt/sec or when the number of vehicles increases to200 nodes (in Fig. 4b); GPSR with carry and forward shows lower delay compared to ACAR. This is because of the forwarding rules in ACAR. When more packets are injected on a single route, there will be more packet collisions and longer queuing delays. In this condition, end-to-end delay will increase in ACAR. An interesting result is the decrease of end to end delay when the data sending rate is increased. This result is logical due to the mentioned reason in the previous papers [13].

As it is shown in Fig. 4b, when the vehicular density increases, OSTD achieves lower end-to-end delay. It selects intersections in an efficient way that guarantees packets to be sent to the destination with a lower delay and in the next hop selection stage, using of the driving path information will effectively increase the chance of finding the proper forwarding node, which reduces the number of hops involved in packet delivery and thus more desirable delay is resulted.

According to the next hop selection phase in OSTD, it seems that duplicate packets are received at the destination more frequently. Simulation result, shown in Fig. 5, does not confirm this claim and packet duplication ratio is low and acceptable in this protocol. Packet duplication ratio is defined as the number of duplicate packets received at the destination to the total number of sent packets. As the vehicular density increases, number of neighbors whose driving path will pass the destination increases. Therefore, packet duplication ratio will become even lower in higher network density.

In the last part of the simulation, the effects of the number of sources and also the nodes' transmission range are investigated on the performance of OSTD.


                     The effect of the number of source nodes: Assuming the simulation parameters in Table 2, the effect of the number of source nodes is checked. In this simulation, network's data transmission rate is set 9 Mbps that its corresponding nodes' transmission range is 250 m, according to IEEE802.11p standard. The simulation results are shown in Figs. 6
                      and 7.
                     
                  


                     Fig. 6 shows packet delivery ratio versus number of source nodes in a network with 100 nodes. The nodes' sending rates are set so that 9 Mbps data rate in the network is achieved. As it is shown, OSTD performs better than the others. But when the number of source nodes increases, the delivery ratio of OSTD decreases. This result is logical, because MAC collisions and also the nodes' buffer overflow may more frequently happen. Fig. 7 confirms the mentioned claim too.

The same simulation is run in a network with 300 nodes and the results are shown in Figs. 8
                      and 9.
                     
                  

As expected, OSTD's performance is higher in the denser network with 300 nodes. When the total number of nodes in the network increases, packets get more forwarding opportunities. More neighboring nodes are found and finding the node with the driving path toward the destination is more probable. Therefore, there will be more chance to distribute the traffic over the network nodes and collisions and nodes' buffer overflows will be diminished.


                     The effect of the nodes' transmission range: The two previous simulations that were run to check the effect of the number of source nodes, are repeated for 450 m as the nodes' transmission range and 3 Mbps as the network's data rate. The simulation results are shown in Figs. 10
                      and 11
                      for a network with 100 nodes and in Figs 12
                      and 13
                      for a 300 node network. As shown in Fig. 10 and 11, OSTD leads to better results compared to the others. OSTD's performance is better, when the number of source nodes is lower. In the condition of higher transmission range and also more source nodes, collisions and buffer overflows may be more probable and the performance decreases more considerably. Comparing of Figs. 6 and 10 shows that OSTD is less efficient in higher transmission ranges. Because more number of distant nodes become neighbors and the vehicular distribution's effectiveness decreases. However, lower transmission range is necessary to achieve higher network data rate in VANETs and OSTD outperforms other protocols significantly in such condition.

Comparing Figs. 12 and 13 with Figs. 10 and 11 confirms that OSTD shows better performance in denser networks, even for high nodes' transmission range. The reason is that the traffic can be better distributed in denser networks, due to the available forwarding opportunities. Thus, less collisions and buffer overflows happen. But a lower performance improvement is achieved in denser networks, when the transmission range is 450 m comparing to the corresponding improvement of 250 m as the transmission range.

@&#CONCLUSION@&#

In this paper, we proposed an opportunistic routing algorithm based on symmetrical traffic distribution (OSTD) in urban scenarios. This protocol is composed of two phases: intersection and next hop selection phases. A new utility function is used in this protocol for the selection of next intersections in the path between the source and the destination. Vehicles’ density, symmetry value of the vehicular distribution, and Euclidean distance of intersections to the destination, are considered to calculate this utility function. Furthermore, a new mechanism is used for the next hop selection phase. This mechanism is based on the vehicles’ driving path predictability, and proper next hop is selected considering the neighboring nodes’ average speed and accuracy factor of their predicted driving paths. The performance of OSTD was evaluated in different network conditions. These different conditions are created by changing the network parameters such as total number of network nodes, number of source nodes, data sending rate and nodes' transmission range. Simulation results showed that OSTD achieves a higher delivery ratio, lower end-to-end delay and less packet loss compared to the other protocols such as GPSR with carry and forward, ACAR and TADS. It is worth noting that OSTD's efficiency becomes less in higher nodes' transmission ranges, which are not desired due to their corresponding lower network data rates.

@&#REFERENCES@&#

