@&#MAIN-TITLE@&#Determining shape and motion from non-overlapping multi-camera rig: A direct approach using normal flows

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We determine camera motion and shape directly from normal flows.


                        
                        
                           
                           We do not use the current arts such as optical flows and feature correspondences.


                        
                        
                           
                           We use a multi-camera rig without overlapping visual fields.


                        
                        
                           
                           Translation and rotation components of motion can be estimated separately.


                        
                        
                           
                           Our performance is similar to the current arts but a faster computation time.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Camera motion

Normal flow

Non-overlapping multiple cameras

Optical flow

Spherical camera

@&#ABSTRACT@&#


               
               
                  In this paper, we explore how a wide field-of-view imaging system that consists of a number of cameras in a network arranged to approximate a spherical eye can reduce the complexity of estimating camera motion. Depth map of the imaged scene can be reconstructed once the camera motion is there. We present a direct method to recover camera motion from video data, which neither requires establishment of feature correspondences nor recovery of optical flow, but from normal flow which is directly observable. With a wide visual field, the inherent ambiguities between translation and rotation disappear. Several subsets of normal flow pairs and triplets can be utilized to constraint the directions of translation and rotation separately. The intersection of solution spaces arising from normal flow pairs or triplets yields the estimate on the direction of motion. In addition, the larger number of normal flow measurements so resulted can be used to combat the local flow extraction error. Rotational magnitude is recovered in a subsequent stage. This article details how motion recovery can be improved with the use of such an approximate spherical imaging system. Experimental results on synthetic and real image data are provided. The results show that the accuracy of motion estimation is comparable to those of the state-of-the-art methods that require to use explicit feature correspondences or full optical flows, and our method has a much faster computational speed.
               
            

@&#INTRODUCTION@&#

A classical and important research area in computer vision is to determine the relative motion in space between an observer and the surrounding environment from video data alone. A good solution to it has many applications including 3D reconstruction, visual control, tracking, augmented reality, and more. In the literature, the existing works on motion determination are largely about establishing explicit correspondences across images. This is partially due to the rich development of various variational methods to recover optical flow (also known as full flow) such as TV-L
                     1 
                     [1], and feature descriptors such as SIFT [2] for matching of feature correspondences. The optical flow methods can be used for monocular camera [3–5], multiple cameras [6–9], and spherical camera [10,11]. The feature-based method which is generally without assuming small camera motion can also be used for various vision systems such as monocular camera [12–14], multiple cameras [15–17], and spherical camera [18]. The successes of all the above schemes assume the availability of abundant computational resource.

Starting from the seminal works from Horn and Schunck [19], and Lucas and Kanade [20], various methods have been developed to recover optical flow. The major challenge lies on the fact that the optical flow, which is induced by the spatial motion at any image position, is only partially observable in general due to the familiar aperture problem. Only the component of the optical flow along or opposite to the direction of the local intensity gradient, termed normal flow, is directly measurable from the spatial–temporal image derivatives. The partial observability of the flow is what makes full flow computation and in turn motion determination a challenge. An assumption such as local flow smoothness is generally required to recover optical flow. On the other hand, the feature-based scheme requires tracking of distinct features across the images, which might not be always present in the video. Ambiguity in establishing correspondences across multiple images exists if the imaged scene contains repetitive patterns. This in turn affects the accuracy in determining camera motion.

A few methods have been proposed to determine camera motion from normal flows directly without prior computation of correspondences. They are collectively known as the direct methods in the literature. Such methods originated from visual displacement of brightness in image data. Unlike optical flow, normal flow can be obtained directly from image data, without involving minimization of certain cost-functional, which is often computationally demanding. A good compromise between the data term and the regularization term in the functional is often essential to recover accurate optical flow field [19,21,1]. A huge amount of computation time is required for the processing if no Graphical Processing Unit (GPU) is available. The optical flow estimation used in the work [22] by Xu et al. is very promising but it required 420s for a 640×480 image pair on a laptop computer with i7 CPU. In contrast, the direct method to be described in this article was implemented in merely Matlab (a high level programming language), and still it only required less than 5.3s for four 640×360 image pairs from a multi-camera rig executing on a rather low-performance computer that has only Pentium D CPU. This computation time has already included the processing to recover normal flow field as well. Furthermore, there are ways (using modern CMOS vision sensor [23]) to measure normal flows directly from an electronic chip. This gives additional support on the use of normal flow to determine camera motion directly.

Even though each normal flow data point represents only partial information, since the total number of image positions where normal flow is observable generally far exceeds the number of motion parameters, one would expect that motion can be recovered directly from normal flow without imposing additional assumptions like local smoothness onto the image flow field. In this work, we make an effort not to use the smoothness assumption which is invalid at image positions where the depth of the imaged scene is discontinuous. This paper addresses the question of whether camera motion determination can be practically achieved using methods other than the conventional ones that are based on either optical flow or feature correspondences. It shows that the direct methods proposed 3 decades ago can still be considered. We fill the research gap by showing that not only can normal flow be used to determine camera motion in similar quality as the state-of-the-art’s, their use can also outperform others in several circumstances.

Standard camera usually has limited field of view (FoV). The video perceived under say a pure translation (of the camera) in the x-direction would be similar to that under a pure left-hand rotation about the y-axis, where the x and y axes are the orthogonal coordinate axes of the image domain. In other words, there would be ambiguity in distinguishing or recovering motion from the video information. If the camera has only limited image resolution and video sampling rate, which is inevitable in practice and which results in error in extracting local flow, the ambiguity becomes inaccuracy in motion recovery. Remedies to the above two issues include using denser sampling rate and wider FoV imaging system. Denser sampling rate could help in determining the flow more precisely at each image position where intensity gradient is present. However, if the scene is not densely textured, which is often the case in practice, the number of feature positions in the image data where flow can be estimated is the same, and there would be a limit of how much of the stated issue is addressed.

Many innovative engineering ideas are inspired by the biological world. There is no exception in computer vision. Flying insects are good pilots even though they have rather simple brains compared with those of the birds. They execute navigational tasks accurately, relying on the visual clue from optical flows [24]. Whether it is a bird or a flying insect, the excellence of their navigation relies upon the use of a wide FoV vision system. Due to the advance of technology, digital camera with high quality lens becomes more affordable and its size is continuously decreasing. Camera system which uses a wide FoV camera [10,11], and spherical imaging system constructed from several narrow FoV cameras [17,7,15,16], draw researchers’ attention in recent years. Although the proposal of using wide FoV camera was introduced as early as in the 1980s such as [25], real-image experiments have become practically feasible only in recent years. We pursue the use of a wide FoV imaging system to determine the self-motion.

We present a new direct method that uses a certain approximation of the spherical eye to recover motion parameters. We provide more details about our recent research work [26], and extend the direction constraint by considering the use of normal flow triplets. The approximate spherical eye comprises a number of cameras that have optical centers placed near one another without necessarily having overlapped FoVs. The advantage of having widened visual view is fivefold. First, it addresses the motion ambiguity issue that troubles a moving imaging system that has narrow FoV. Second, the directions of the translation and rotation components of the motion can be recovered separately in an efficient manner. As a result, no error propagates from the direction of translation to the direction of rotation, and vice versa. Third, tighter constraints on the motion solution (two pairs of specific normal flows are enough to reduce the possible motion solution by 
                        
                           
                              
                                 3
                              
                              
                                 4
                              
                           
                        
                      of a 4D parameter space) are available to improve both the result and the computational speed. Fourth, large visual field could make motion estimation more accurate [25,27,28]. Fifth, more normal flow data points due to the widened visual field would be available to combat flow extraction error.

The contribution of this work is to provide a mechanism which separately estimates the directions of translation and rotation components from general motion through the use of several particular subsets of normal flows available on the approximate spherical imaging system. This approach allows determining the direction of motion not only in general motion, but also in dominant translation or dominant rotation scenarios. We do not fuse the multiple visual inputs from multiple cameras in a loosely coupled manner, but we consider the underlying geometrical constraints in a coherent and effective way. Rotational magnitude is determined in the subsequent stage.

The organization of this paper is as follows. Section 2 reviews related works in the literature. Section 3 presents how optical and normal flows are induced on the image plane and also on the image sphere when the imaging surface is spherical. Section 4 introduces a variant of the brightness change equation [29] for a camera having planar image plane, and then extends it to the case of a multi-camera rig. Section 5 discusses how normal flows can be used to determine the directions of translation and rotation from general motion separately through the use of three subsets of normal flow pairs and four subsets of normal flow triplets. The motion solution can be refined and rotational magnitude is determined using detranslation and derotation together. Section 6 presents the experimental results that were conducted by simulation and images of real scenes with motion ground truth available. We extensively evaluated the performance of the proposed method against the current state-of-the-art methods. Finally, conclusion is given in Section 7.

@&#RELATED WORKS@&#

Direct method recovering camera motion was pioneered by Aloimonos and Brown for the case of pure rotation [30] and was extended to the case of pure translation by Horn and Weldon [31] in the 1980s. Negahdaripour recovered general camera motion for a camera imaging a planar surface [29]. Horn and Weldon recovered camera motion having pure translation, pure rotation, or general motion with known rotation [25]. Aloimonos and Duric proposed a method to recover Focus of Expansion (FoE) for an observer having general motion with bounded rotational magnitude [32,33]. Only normal flows with magnitudes less than a threshold related to the bounded rotation magnitude are utilized. In the analysis, they assumed that the observer always looks forward while it is moving.

Fermüller and Aloimonos proposed to select image points that form some global patterns on the image plane [34–36]. In this way, the parameter estimation problem is transformed to a series of boundary extraction problems. The boundaries, each of which separating two differently labeled zones of the image space, are however generally difficult to extract. It is because not only are the zones generally very sparsely labeled, there is also the presence of the third zone that is composed of both labels. Brodský et al. later provided more analysis about the conditions when apparent flows become ambiguous [37]. Fermüller and Aloimonos further investigated about the global structure through the study of functions of the values of 2D rigid displacement fields [38]. They also presented the stability analysis for shape from motion and provided the relationship between the errors in estimating motion parameters that result in minimal number of negative depth measurements [27]. They later proposed a statistical model to represent the constraints to derive functions representing deviation from epipolar geometry or the amount of negative depth for restricted field of view and panoramic vision [28].

Silva Santos-Victor utilized several line-and-curve searching algorithms to estimate the motion parameters [39]. Yet only a limited number of normal flows participated in recovering egomotion. Brodský et al. proposed using minimization of variation of local depth [40]. The scene in view is assumed to be piecewise smooth. Chung and Yuan recovered the motion direction for either pure translation or pure rotation using the direction component of normal flow field [41]. Recently, we proposed a two-stage iterative method to estimate general camera motion from normal flows [42]. The method requires the use of a high dimensional space.

There are a few direct methods in the literature that use wide FoV camera. Our work is related to Nelson and Aloimonos [43]. They turned the recovery of camera motion into three sub-problems; each of them involves one rotational and two translational parameters. But, the partial separation of motion components is only possible when normal flows are located at the equators of the three principal axes of the camera’s coordinate frame. Stein and Shashua proposed to use three similar views imaged on the same scene to recover depth map and also motion [44]. The three views are required to be placed very close together, and arranged in a special way to avoid degenerate cases. Baker et al. extended their previous work from planar eye [40] to spherical eye [45]. The scene in view is still assumed to be piecewise smooth. Multiple solutions from individual cameras are fused to reduce the ambiguity of the solution. They first estimate rotation and then translation.

There are also research works using optical flows resulted from wide FoV imaging system. Tsao et al. collected all the differential epipolar constraints from a multi-camera platform [8]. They provided two different nonlinear functions to handle the degenerate and the non-degenerate cases. They also showed that different configurations of multi-camera rig can affect the determination of motion in different ways. Baker et al. theoretically showed that motion determination using optical flow from a imaging system that has a full spherical FoV does not suffer from the ambiguities as the one having small FoV [6]. They simplified the motion determination problem by first recover rotation and then translation. In their approach, motion solutions from individual cameras are intersected to form the optimal solution.

Our work is closely related to Lim and Barnes [10]. Both of us separated the directions of translation and rotation components from general motion using merely the directions of flows. They demanded each pair of flows located at exactly opposite image positions on the perfect image sphere. In the later work of Lim and Barnes [11] which is similar to the work from Thomas and Simoncelli [46], they provided tighter constraint on determining direction of translation. Recovery of rotation is achieved in a subsequent stage by using the differential epipolar constraint which removes the dependency of scene depth. The work of Hu and Cheong [7] which was focused on the use of laterally-placed eyes to recover motion also utilized opposite pairs of visual rays as [10,11]. They first recover translation and then rotation. An iterative process is proposed to refine translation estimate when rotation estimate is available. A closely related work to [7] is from Cheong and Gao [9]. Instead of considering multi-camera rig without overlapped FoVs, they considered imaging system that consisted of two nearly parallel frontal cameras.

The proposed method, being a direct one, does not assume depth map of the imaged scene or the flow field to be piecewise smooth as optical flow based methods. It provides an alternative way to recover camera motion without the need of feature correspondences and recovery of optical flow as the prior arts. Unlike the work [43], our method can separately estimate the directions of translation and rotation components from general motion. We utilize normal flows which are not only limited to those at the three equators of the image sphere. Unlike the work [44], our method requires neither infinitesimal motions between different views nor carefully planned motion. The only requirement is that the separation of the optical centers of the cameras in the system is small compared with the scene depth. This is generally a valid condition as camera having spherical field of view or miniature cameras are available. In contrast to the work [45], our method recovers camera motion without assuming piecewise-smooth scene. We first collect normal flows from all cameras in the system and then extract the embedded motion information from them instead of fusing the solutions resulted from each of them. This makes our method more effective in using the available visual clues. Unlike the work [10], we do not demand normal flows (optical flows for their approach) located at opposite image locations on the image sphere. Moreover, our algorithm is developed for spherical approximation using multiple cameras but not a perfectly spherical eye. Beside utilizing visual flow pairs, we also explore the motion constraints from normal flow triplets. In contrast to the works such as [6,45,7,11,9], our strategy of separating the directions of translation and rotation from general motion prevents the problem of error propagation from the direction of translation to the direction of rotation, and vice versa.

@&#BACKGROUND@&#

Consider a camera undergoes a general motion with an instantaneous translational velocity t (a 3-vector representing the translation direction and magnitude) and an instantaneous rotational velocity w (a 3-vector representing the rotation axis and magnitude) in a stationary environment. The camera has a focal length f. All the above spatial quantities are with reference to the camera-centered coordinate system C: (X
                     
                        C
                     
                     -
                     Y
                     
                        C
                     
                     -
                     Z
                     
                        C
                     ). The instantaneous velocity of any 3D object point X
                     =(X,
                     Y,
                     Z)
                        T
                      of the scene relative to frame C is
                        
                           (1)
                           
                              
                                 
                                    X
                                 
                                 
                                    ̇
                                 
                              
                              =
                              -
                              t
                              -
                              w
                              ×
                              X
                              .
                           
                        
                     
                  

Suppose the camera has a spherical imaging surface as depicted in Fig. 1
                        a. The 3D point X projects under perspective projection to the image sphere at the position x
                        
                           s
                        
                        =(x
                        
                           s
                        ,
                        y
                        
                           s
                        ,
                        f)
                           T
                         with respect to frame C. The relationship between the 3D point X and the associated image position x
                        
                           s
                         is governed by:
                           
                              (2)
                              
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 f
                                 
                                    
                                       X
                                    
                                    
                                       ‖
                                       X
                                       ‖
                                    
                                 
                                 .
                              
                           
                        
                     

By differentiating x
                        
                           s
                         with respect to time t, the optical flow 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    s
                                 
                              
                           
                         which is tangential to the image surface at x
                        
                           s
                         is given by:
                           
                              (3)
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       ‖
                                       X
                                       ‖
                                       f
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 ×
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 ×
                                 t
                                 )
                                 +
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 ×
                                 w
                                 .
                              
                           
                        
                     

It can be seen from (3) that the magnitude of translation cannot be decoupled from the scene depth from visual information alone (in the sense that a closer and smaller object observed under a slower translation could appear the same in the video data as a farther and bigger object observed under a faster translation), yet the rotational component of the motion is independent of scene depth.

Next, we consider the projection of 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    s
                                 
                              
                           
                         along a unit vector 
                           
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    s
                                 
                              
                           
                         on the image sphere at x
                        
                           s
                        . The projected flow is given by:
                           
                              (4)
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 ·
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       ‖
                                       X
                                       ‖
                                       f
                                    
                                 
                                 t
                                 ·
                                 (
                                 (
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 ×
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 )
                                 ×
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 )
                                 +
                                 w
                                 ·
                                 (
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 ×
                                 
                                    
                                       x
                                    
                                    
                                       s
                                    
                                 
                                 )
                                 .
                              
                           
                        In the rest of this paper, we use 
                           
                              
                                 
                                    v
                                 
                                 
                                    ˆ
                                 
                              
                           
                         to represent the unit vector of v unless otherwise stated.

Suppose the Z-axis points to the North Pole of the image sphere. The North hemispherical image sphere is warped to the image plane as shown in Fig. 1b. Here, we imagine the image plane is infinitively large. Any image position x
                        =(x,
                        y)
                           T
                         is relative to image origin O: x
                        -
                        y. The object point X (relative to frame C) and the image point x (relative to image origin O) are related by:
                           
                              (5)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                             
                                             
                                                
                                                   f
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       f
                                    
                                    
                                       Z
                                    
                                 
                                 X
                                 .
                              
                           
                        If we consider the projective coordinates 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                              =
                              (
                              x
                              /
                              f
                              ,
                              y
                              /
                              f
                              ,
                              1
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                         (x- and y-components of x are normalized by focal length f) of the image point x which are widely used in the literature for homogeneous representation of point, then we have:
                           
                              (6)
                              
                                 X
                                 ≅
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ,
                              
                           
                        where ≅ denotes equality up to arbitrary non-zero scale.

By differentiating the image position x with respect to time, the optical flow 
                           
                              (
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    T
                                 
                              
                              ,
                              0
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                         (in homogeneous coordinates) is given by:
                           
                              (7)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         ̇
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   0
                                                
                                             
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       f
                                    
                                    
                                       Z
                                    
                                 
                                 k
                                 ×
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 t
                                 )
                                 +
                                 f
                                 k
                                 ×
                                 (
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 w
                                 )
                                 ×
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 )
                                 ,
                              
                           
                        where k
                        =(0,0,1)
                           T
                         is an unit vector in the positive direction of the camera’s optical axis.

Next, we consider the projection of optical flow 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̇
                                 
                              
                           
                         along a unit vector 
                           
                              
                                 
                                    n
                                 
                                 
                                    ˆ
                                 
                              
                           
                         on the image plane. The projected flow is given by:
                           
                              (8)
                              
                                 
                                    
                                       x
                                    
                                    
                                       ̇
                                    
                                 
                                 ·
                                 
                                    
                                       n
                                    
                                    
                                       ˆ
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       Z
                                    
                                 
                                 t
                                 ·
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           n
                                                                        
                                                                        
                                                                           ˆ
                                                                        
                                                                     
                                                                  
                                                               
                                                               
                                                                  
                                                                     0
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   ×
                                                   k
                                                
                                             
                                          
                                          ×
                                          
                                             
                                                x
                                             
                                             
                                                ̃
                                             
                                          
                                       
                                    
                                 
                                 +
                                 w
                                 ·
                                 
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                ̃
                                             
                                          
                                          ×
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    n
                                                                                 
                                                                                 
                                                                                    ˆ
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                        
                                                                           
                                                                              0
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                            ×
                                                            k
                                                         
                                                      
                                                   
                                                   ×
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         ̃
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        If the unit vector 
                           
                              
                                 
                                    n
                                 
                                 
                                    ˆ
                                 
                              
                           
                         represents the direction of normal flow 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                 
                              
                           
                         with orientation θ such that 
                           
                              
                                 
                                    n
                                 
                                 
                                    ˆ
                                 
                              
                              =
                              (
                              cos
                              θ
                              ,
                              sin
                              θ
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                        , then (8) can be written to:
                           
                              (9)
                              
                                 
                                    
                                       x
                                    
                                    
                                       ̇
                                    
                                 
                                 ·
                                 
                                    
                                       n
                                    
                                    
                                       ˆ
                                    
                                 
                                 =
                                 ‖
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       n
                                    
                                 
                                 ‖
                                 =
                                 -
                                 
                                    
                                       1
                                    
                                    
                                       Z
                                    
                                 
                                 t
                                 ·
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 (
                                 sin
                                 θ
                                 ,
                                 -
                                 cos
                                 θ
                                 ,
                                 0
                                 
                                    
                                       )
                                    
                                    
                                       T
                                    
                                 
                                 )
                                 +
                                 w
                                 ·
                                 (
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 (
                                 sin
                                 θ
                                 ,
                                 -
                                 cos
                                 θ
                                 ,
                                 0
                                 
                                    
                                       )
                                    
                                    
                                       T
                                    
                                 
                                 )
                                 ×
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 )
                              
                           
                        
                     

The constraints that are presented in the following sections of this article are for multi-camera rig with planar images. We can develop similar constraints if the vision system is a perfectly spherical eye. This involves projective transformation of vector (full flow or normal flow) from image plane to image sphere as follows:
                           
                              (10)
                              
                                 
                                    
                                       x
                                    
                                    
                                       ̇
                                    
                                 
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       2
                                    
                                 
                                 →
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       3
                                    
                                 
                                 :
                                 
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             Z
                                          
                                          
                                             3
                                          
                                       
                                    
                                    
                                       ‖
                                       X
                                       
                                          
                                             ‖
                                          
                                          
                                             3
                                          
                                       
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  ̇
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            0
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          ×
                                          
                                             
                                                x
                                             
                                             
                                                ̃
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        For the completeness, we also state the inverse transformation:
                           
                              (11)
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       3
                                    
                                 
                                 →
                                 
                                    
                                       x
                                    
                                    
                                       ̇
                                    
                                 
                                 ∈
                                 
                                    
                                       R
                                    
                                    
                                       2
                                    
                                 
                                 :
                                 
                                 
                                    
                                       x
                                    
                                    
                                       ̇
                                    
                                 
                                 =
                                 [
                                 
                                    
                                       I
                                    
                                    
                                       2
                                    
                                 
                                 
                                 0
                                 ]
                                 
                                    
                                       ‖
                                       X
                                       ‖
                                    
                                    
                                       Z
                                    
                                 
                                 (
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 )
                                 ×
                                 k
                                 .
                              
                           
                        
                     

If we transform a full flow 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̇
                                 
                              
                           
                         from the image plane to the image sphere using (10), then the direction of the full flow is governed by:
                           
                              (12)
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 
                                    
                                       ≅
                                    
                                    
                                       +
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  x
                                                               
                                                               
                                                                  ̇
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            0
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          ×
                                          
                                             
                                                x
                                             
                                             
                                                ̃
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where ≅+ denotes equality up to arbitrary positive scale in the rest of the paper. We also transform a unit vector 
                           
                              
                                 
                                    n
                                 
                                 
                                    ˆ
                                 
                              
                           
                         which represents the direction of normal flow 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                 
                              
                           
                         on planar image to image sphere as:
                           
                              (13)
                              
                                 
                                    
                                       n
                                    
                                    
                                       s
                                    
                                 
                                 
                                    
                                       ≅
                                    
                                    
                                       +
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  n
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            0
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                          ×
                                          
                                             
                                                x
                                             
                                             
                                                ̃
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

For planar image, if a normal flow has an orientation θ, then the full flow induced by any motion should be any vector of orientation between θ
                        −
                        π/2 and θ
                        +
                        π/2 on the image plane. This means the dot product between 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̇
                                 
                              
                           
                         and 
                           
                              
                                 
                                    n
                                 
                                 
                                    ˆ
                                 
                              
                           
                         is always greater than or equal to zero. However, the corresponding projection of 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    s
                                 
                              
                           
                         along 
                           
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    s
                                 
                              
                           
                         on the image sphere may not follow the same manner as the projection of 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̇
                                 
                              
                           
                         along 
                           
                              
                                 
                                    n
                                 
                                 
                                    ˆ
                                 
                              
                           
                         on the image plane. This can be explained by considering the following equation:
                           
                              (14)
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   ̇
                                                
                                             
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 ·
                                 
                                    
                                       
                                          
                                             n
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       s
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ˆ
                                          
                                       
                                       ·
                                       
                                          
                                             n
                                          
                                          
                                             ˆ
                                          
                                       
                                       -
                                       cos
                                       
                                          
                                             ϕ
                                          
                                          
                                             1
                                          
                                       
                                       cos
                                       
                                          
                                             ϕ
                                          
                                          
                                             2
                                          
                                       
                                    
                                    
                                       sin
                                       
                                          
                                             ϕ
                                          
                                          
                                             1
                                          
                                       
                                       sin
                                       
                                          
                                             ϕ
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where ϕ
                        1 is the angle subtended by 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                           
                         and 
                           
                              (
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    T
                                 
                              
                              ,
                              0
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                        , and ϕ
                        2 is the angle subtended by 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                           
                         and 
                           
                              (
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    T
                                 
                              
                              ,
                              0
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                        . It is not guaranteed that 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    s
                                 
                              
                              ·
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    s
                                 
                              
                           
                         has the same sign as 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̇
                                 
                              
                              ·
                              
                                 
                                    n
                                 
                                 
                                    ˆ
                                 
                              
                           
                         unless the optical flow 
                           
                              (
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    T
                                 
                              
                              ,
                              0
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                         or the direction of normal flow 
                           
                              (
                              
                                 
                                    
                                       
                                          n
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    T
                                 
                              
                              ,
                              0
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                         is orthogonal to the image position 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                           
                         so that the cosine term in (14) is zero. In the other words, the angle subtended by any two vectors v
                        1 and v
                        2 on the image plane is the same as the angle subtended by the associated vectors 
                           
                              
                                 
                                    v
                                 
                                 
                                    1
                                 
                                 
                                    s
                                 
                              
                           
                         and 
                           
                              
                                 
                                    v
                                 
                                 
                                    2
                                 
                                 
                                    s
                                 
                              
                           
                         on the image sphere only when the projective transformation of the vectors from image plane to image sphere or vice versa occurs exactly at the intersection point between Z-axis and the imaging surface i.e. 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                              
                                 
                                    ≅
                                 
                                 
                                    +
                                 
                              
                              k
                              =
                              (
                              0
                              ,
                              0
                              ,
                              1
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                        .

In general, optical flow at any image position is not directly observable from the image sequence because of the well-known aperture problem. Only the projected component of the flow to the spatial intensity gradient, i.e. normal flow, is directly observable. By using the Brightness Constancy Constraint Equation (BCCE) [19], we can relate optical flow and spatial intensity gradient on planar image as:
                           
                              (15)
                              
                                 ∇
                                 I
                                 ·
                                 
                                    
                                       x
                                    
                                    
                                       ̇
                                    
                                 
                                 +
                                 
                                    
                                       I
                                    
                                    
                                       t
                                    
                                 
                                 =
                                 0
                                 .
                              
                           
                        Normal flow can be expressed as:
                           
                              (16)
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       n
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                ∇
                                                I
                                             
                                             
                                                ‖
                                                ∇
                                                I
                                                ‖
                                             
                                          
                                          ·
                                          
                                             
                                                x
                                             
                                             
                                                ̇
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       ∇
                                       I
                                    
                                    
                                       ‖
                                       ∇
                                       I
                                       ‖
                                    
                                 
                                 =
                                 -
                                 
                                    
                                       I
                                    
                                    
                                       t
                                    
                                 
                                 
                                    
                                       ∇
                                       I
                                    
                                    
                                       ‖
                                       ∇
                                       I
                                       
                                          
                                             ‖
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where ∇I and I
                        
                           t
                         denote the spatial gradient and temporal gradient of the video data I(x,
                        t) at time t respectively. Similar expressions for normal flows on the spherical imaging surface can also be derived.

A few further algebraic manipulations will turn (8) to:
                           
                              (17)
                              
                                 
                                    
                                       ‖
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   ̇
                                                
                                             
                                          
                                          
                                             n
                                          
                                       
                                       ‖
                                    
                                    
                                       f
                                    
                                 
                                 =
                                 -
                                 
                                    
                                       1
                                    
                                    
                                       Z
                                    
                                 
                                 t
                                 ·
                                 
                                    
                                       a
                                    
                                    
                                       t
                                    
                                 
                                 +
                                 w
                                 ·
                                 
                                    
                                       a
                                    
                                    
                                       w
                                    
                                 
                                 ,
                              
                           
                        where
                           
                              (18)
                              
                                 
                                    
                                       a
                                    
                                    
                                       t
                                    
                                 
                                 =
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ×
                                 (
                                 sin
                                 θ
                                 ,
                                 -
                                 cos
                                 θ
                                 ,
                                 0
                                 
                                    
                                       )
                                    
                                    
                                       T
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              (19)
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                    
                                 
                                 =
                                 
                                    
                                       a
                                    
                                    
                                       t
                                    
                                 
                                 ×
                                 
                                    
                                       x
                                    
                                    
                                       ̃
                                    
                                 
                                 ,
                              
                           
                        and Z(x) is generally known as the scene depth at image position x. Eq. (17) is a variant of the brightness change equation [29] for a camera having planar image surface.

The two vector entities a
                        
                           t
                        , a
                        
                           w
                        , and image position vector 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                           
                         are mutually perpendicular to one another. The distribution of a
                        
                           t
                         lies on the surface of a cylinder in 3-space. The cross-section of the cylinder which is parallel to xy-plane is a unit circle. In particular, a
                        
                           t
                         is orthogonal to (sinθ,−cosθ,0)
                           T
                         which is the direction vector of the normal flow 
                           
                              (
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                 
                              
                              ,
                              0
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                         (in projective coordinates) rotated about the camera’s optical axis by 90°. This means that the vector a
                        
                           t
                        , the projective image coordinates 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                           
                        , and the normal flow 
                           
                              (
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                 
                              
                              ,
                              0
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                         lie on the same plane (define it as Π). Since a
                        
                           t
                         is orthogonal to 
                           
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                           
                        , it points in a direction with two possible choices. The exact direction is the one such that 
                           
                              
                                 
                                    a
                                 
                                 
                                    t
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                              >
                              0
                           
                        . This observation is deduced from (18). While a
                        
                           w
                         is orthogonal to the plane Π and points in the direction governed by (19). These important observations are used to derive the proposed direction constraints for the locus of motion’s direction in Section 5.

There is practical difficulty in realizing an ideal spherical eye. One way of constructing a spherical eye is to stitch two omni-directional cameras together in a back-to-back configuration. However, the acquired image has non-uniform resolution. In this work, we explore the use of multiple standard cameras to approximate a spherical eye. We bundle the cameras together with their optical centers close to one another and with their visual fields distinct. If the optical centers of the cameras can be made exactly concurrent, the multi-camera system mimics a spherical eye.

In practice it is not possible to bundle multiple cameras as exactly, and there are bound to be certain nonzero baseline distances between the cameras. Fig. 2
                         shows the construction of an approximate spherical eye made of six standard cameras. There are evidences [7,16] indicating that even with such an imperfect imaging system, the gain (in having a much wider FoV) generally outweighs the loss (from the non-concurrency of the optical centers), and substantial improvement in recovering motion is possible.

With a number of cameras stitched together, we seek to recover the five degrees of freedom of the rigid motion (t,
                        w) of the multi-camera rig directly from the normal flows observed in the various cameras. Below we first outline how normal flows in the multiple cameras are related to the camera rig motion when the baseline distances between the cameras is small compared with the overall scene depth from the camera rig.

Suppose image position x
                        
                           i
                         in the i
                        
                           th
                         camera is projected by a 3D point X
                        
                           i
                         with depth Z
                        
                           i
                         (with respect to the camera coordinate frame C
                        
                           i
                        ), and at the image position x
                        
                           i
                         the camera rig motion (t,
                        w) induces a full flow 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                           
                        . We can then relate rigid motion (t,
                        w) of the camera rig in the global coordinate system C
                        0 (which we take as the center of the camera rig) to the motion of the i
                        
                           th
                         camera in its own local coordinate system C
                        
                           i
                        , as:
                           
                              (20)
                              
                                 
                                    
                                       t
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       R
                                    
                                    
                                       i
                                    
                                    
                                       T
                                    
                                 
                                 (
                                 w
                                 ×
                                 
                                    
                                       b
                                    
                                    
                                       i
                                    
                                 
                                 +
                                 t
                                 )
                                 ,
                              
                           
                        
                        
                           
                              (21)
                              
                                 
                                    
                                       w
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       R
                                    
                                    
                                       i
                                    
                                    
                                       T
                                    
                                 
                                 w
                                 ,
                              
                           
                        where b
                        
                           i
                         and R
                        
                           i
                         are the position (baseline) and rotation matrix of the i
                        
                           th
                         camera with respect to the global frame C
                        0.

By a few algebraic manipulations over (17), (20), and (21), each normal flow in the i
                        
                           th
                         camera can be related to the global motion parameters (t,w) by the following:
                           
                              (22)
                              
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       ‖
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   ̇
                                                
                                             
                                          
                                          
                                             ni
                                          
                                       
                                       ‖
                                    
                                    
                                       
                                          
                                             f
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                                 =
                                 -
                                 
                                    
                                       1
                                    
                                    
                                       
                                          
                                             Z
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                                 t
                                 ·
                                 
                                    
                                       R
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       ti
                                    
                                 
                                 +
                                 w
                                 ·
                                 
                                    
                                       
                                          
                                             
                                                R
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                a
                                             
                                             
                                                wi
                                             
                                          
                                          -
                                          
                                             
                                                1
                                             
                                             
                                                
                                                   
                                                      Z
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                          
                                             
                                                b
                                             
                                             
                                                i
                                             
                                          
                                          ×
                                          
                                             
                                                R
                                             
                                             
                                                i
                                             
                                          
                                          
                                             
                                                a
                                             
                                             
                                                ti
                                             
                                          
                                       
                                    
                                 
                                 >
                                 0
                                 .
                              
                           
                        Eq. (22) extends a variant of the brightness change equation [42] from the case of single camera [29] to the case of multiple cameras.

In practice, the norm of the baseline vector b is small compared with the scene depth Z. Moreover, 
                           
                              ‖
                              
                                 
                                    a
                                 
                                 
                                    w
                                 
                              
                              ‖
                              =
                              ‖
                              
                                 
                                    a
                                 
                                 
                                    t
                                 
                              
                              ‖
                              ‖
                              
                                 
                                    x
                                 
                                 
                                    ̃
                                 
                              
                              ‖
                              ⩾
                              ‖
                              
                                 
                                    a
                                 
                                 
                                    t
                                 
                              
                              ‖
                           
                        . Eq. (22) can thus well be approximated to:
                           
                              (23)
                              
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 ≈
                                 -
                                 
                                    
                                       ρ
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                                 ·
                                 
                                    
                                       R
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       ti
                                    
                                 
                                 +
                                 w
                                 ·
                                 
                                    
                                       R
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       wi
                                    
                                 
                                 >
                                 0
                                 ,
                              
                           
                        where ρ
                        
                           i
                         is the ∥t∥-scaled inverse scene depth. The two terms R
                        
                           i
                        
                        a
                        
                           ti
                         and R
                        
                           i
                        
                        a
                        
                           wi
                         indicate that every normal flow data point from each camera is transformed from its local camera system C
                        
                           i
                         to the global coordinate system C
                        0 through the rotation matrix R
                        
                           i
                        . Eq. (23) reveals how distinct cameras work together as a single imaging system. Dropping the camera index for simplicity of notations, and combining terms, we express (23) as:
                           
                              (24)
                              
                                 d
                                 =
                                 -
                                 ρ
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                                 ·
                                 
                                    
                                       a
                                    
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                                 +
                                 w
                                 ·
                                 
                                    
                                       a
                                    
                                    
                                       w
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    a
                                 
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    Ra
                                 
                                 
                                    t
                                 
                              
                           
                         and 
                           
                              
                                 
                                    a
                                 
                                 
                                    w
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    Ra
                                 
                                 
                                    w
                                 
                              
                           
                        .

In our previous work [42], a 4D search method was proposed to recover both directions of t and w using a direction constraint (AFD). We have experienced that for some scenes, the constraint could only restrict the motion parameters to a rather large set of possible solutions. This work contributes two further improvements. One is to use a wider FoV imaging system to reduce the ambiguity in determining the direction of motion. In addition, with a wider FoV, we can also exploit the more likely presence of specific normal flows to make motion recovery far simpler and faster due to tighter constraints thus available. Such specific normal flows, in the form of pairs or triplets of data points, have to meet certain conditions, and their presence and use are only practical when an imaging system of much wider FoV is available. It can be shown that in the presence of such specific normal flows, it is possible to separate the translational and rotational motion components in the motion recovery process, and treat them independenet of each other.

Different groups of normal flows that are specific in determining direction of translation or direction of rotation are categorized in Table 1
                     . All the direction constraints for rotation determination do not depend of normal flow magnitude, but this only partially happens for determining translation. The primary reason is due to the fact that magnitude of translation cannot be decoupled from the scene depth.

We will present the conditions for normal flows that allow the decomposition of general motion into translation and rotation in the following sections. Consider the spherical imaging surface approximated by the imaging surfaces of several standard cameras (with camera centers possibly mildly non-concurrent). Here, we just use two cameras to illustrate the classification of normal flow pairs in Fig. 3
                      and triplets in Fig. 4
                     .

Suppose we have two observable normal flows 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                    1
                                 
                              
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                    2
                                 
                              
                           
                         at the image positions 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                           
                         (3-vectors expressed in projective coordinates) with respect to their local camera coordinates C
                        1 and C
                        2 respectively. For approximate spherical camera, the two camera centers C
                        1 and C
                        2 coincide to the camera rig’s center C
                        0. All the measured entities are transformed from their local camera coordinates to the camera rig’s coordinate system (i.e. 
                           
                              
                                 
                                    a
                                 
                                 
                                    ti
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    R
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    a
                                 
                                 
                                    ti
                                 
                              
                              ,
                              
                                 
                                    a
                                 
                                 
                                    wi
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    R
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    a
                                 
                                 
                                    wi
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    i
                                 
                                 
                                    ′
                                 
                              
                              =
                              
                                 
                                    R
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    i
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ̇
                                                   
                                                
                                             
                                             
                                                ni
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          0
                                       
                                    
                                 
                                 
                                    T
                                 
                              
                              =
                              
                                 
                                    R
                                 
                                 
                                    i
                                 
                              
                              (
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    ni
                                 
                              
                              ,
                              0
                              
                                 
                                    )
                                 
                                 
                                    T
                                 
                              
                           
                         for all i cameras).

The two image position vectors 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                         span a plane P in 3-space. The image planes of the cameras 1 and 2 intersect the plane P in lines l
                        1 and l
                        2 respectively. We classify a pair of normal flows 
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   ̇
                                                
                                             
                                          
                                          
                                             n
                                             1
                                          
                                          
                                             ′
                                          
                                       
                                       ,
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   ̇
                                                
                                             
                                          
                                          
                                             n
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                              
                           
                         into three groups according to their orientations with respect to the lines of intersection. If 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    ni
                                 
                                 
                                    ′
                                 
                              
                           
                         is parallel to l
                        
                           i
                         and 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              >
                              0
                           
                        , then we classify the two normal flows as an α-vector pair (Fig. 3a). If 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    ni
                                 
                                 
                                    ′
                                 
                              
                           
                         is parallel to l
                        
                           i
                         and 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              <
                              0
                           
                        , then we classify the vector pair as a β-vector pair (Fig. 3b). If 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    ni
                                 
                                 
                                    ′
                                 
                              
                           
                         is orthogonal to l
                        
                           i
                         and 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              <
                              0
                           
                        , then the vector pair is classified as a γ-vector pair (Fig. 3c).

From the observations concluded in Section 4, the vector entity 
                           
                              
                                 
                                    a
                                 
                                 
                                    ti
                                 
                                 
                                    ′
                                 
                              
                           
                        , the projective image coordinates 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    i
                                 
                                 
                                    ′
                                 
                              
                           
                        , and the normal flow 
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ̇
                                                   
                                                
                                             
                                             
                                                ni
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          0
                                       
                                    
                                 
                                 
                                    T
                                 
                              
                           
                         (in projective coordinates) lie on the plane Π
                        
                           i
                        . This means that 
                           
                              
                                 
                                    a
                                 
                                 
                                    ti
                                 
                                 
                                    ′
                                 
                              
                           
                         and 
                           
                              
                                 
                                    a
                                 
                                 
                                    t
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                         lie on P (i.e. Π
                        1, Π
                        2 and P are coplanar) when the normal flows are α- or β-pair. They are orthogonal to P (i.e. Π
                        1, Π
                        2 are orthogonal to P) when the normal flows are γ-pair. The vector entity 
                           
                              
                                 
                                    a
                                 
                                 
                                    wi
                                 
                                 
                                    ′
                                 
                              
                           
                         is orthogonal to Π
                        
                           i
                        .

We can also classify three observable normal flows 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                    1
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                    2
                                 
                              
                           
                        , and 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                    3
                                 
                              
                           
                         at the image positions 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                           
                        , and 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    3
                                 
                              
                           
                         into four different triplet groups. The classification of triplets uses similar principle as the classification of normal flow pairs.

The three vectors 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                        , and 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̃
                                       
                                    
                                 
                                 
                                    3
                                 
                                 
                                    ′
                                 
                              
                           
                         lie on a plane P in 3-space. The image planes of the cameras 1 and 2 intersect the plane P in lines l
                        1 and l
                        2 respectively. Suppose 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                 
                                 
                                    ′
                                 
                              
                           
                         is parallel to l. If 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              >
                              0
                           
                         and 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    3
                                 
                                 
                                    ′
                                 
                              
                              >
                              0
                           
                        , then we classify the normal flow triplet as an α′-vector triplet (Fig. 4a). If 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              <
                              0
                           
                         and 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    3
                                 
                                 
                                    ′
                                 
                              
                              <
                              0
                           
                        , then we classify the triplet as a β′-vector triplet (Fig. 4b). Suppose 
                           
                              
                                 
                                    
                                       
                                          x
                                       
                                       
                                          ̇
                                       
                                    
                                 
                                 
                                    n
                                 
                                 
                                    ′
                                 
                              
                           
                         is orthogonal to l. If 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              <
                              0
                           
                         and 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    3
                                 
                                 
                                    ′
                                 
                              
                              <
                              0
                           
                        , then the vector triplet is classified as a γ′-vector triplet (Fig. 4c). If 
                           
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              >
                              0
                           
                         and 
                           
                              
                                 
                                    x
                                 
                                 
                                    n
                                    2
                                 
                                 
                                    ′
                                 
                              
                              ·
                              
                                 
                                    x
                                 
                                 
                                    n
                                    3
                                 
                                 
                                    ′
                                 
                              
                              >
                              0
                           
                        , then the vector triplet is classified as a δ′-vector triplet (Fig. 4d).

In summary, 
                           
                              
                                 
                                    a
                                 
                                 
                                    t
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ,
                              
                                 
                                    a
                                 
                                 
                                    t
                                    2
                                 
                                 
                                    ′
                                 
                              
                           
                        , and 
                           
                              
                                 
                                    a
                                 
                                 
                                    t
                                    3
                                 
                                 
                                    ′
                                 
                              
                           
                         lie on P (i.e. Π
                        1, Π
                        2, and Π
                        3 are coplanar with P) when the normal flows are α′- or β′-pair. They are orthogonal to P (i.e. Π
                        1, Π
                        2, and Π
                        3 are orthogonal to P) when the normal flows belong to γ′- or δ′-pair.

Suppose we have an α-vector pair at the image positions 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                            of the approximate spherical eye as shown in Fig. 3a. Since planes Π
                           1, Π
                           2, and P are coplanar, 
                              
                                 
                                    
                                       a
                                    
                                    
                                       t
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       t
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                            lie on P, and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                            are orthogonal to P. According to (19), 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                            point in opposite directions. We normalize (24) by 
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                wi
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                            for i
                           =1, 2 and then sum the two equations. We can reduce general motion to the case of pure translation, as:
                              
                                 (25)
                                 
                                    
                                       
                                          
                                             
                                                d
                                             
                                             
                                                1
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         w
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    +
                                    
                                       
                                          
                                             
                                                d
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         w
                                                         2
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    =
                                    -
                                    
                                       
                                          
                                             
                                                ρ
                                             
                                             
                                                1
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         w
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          a
                                       
                                       
                                          t
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    -
                                    
                                       
                                          
                                             
                                                ρ
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         w
                                                         2
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          a
                                       
                                       
                                          t
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    .
                                 
                              
                           Since the left-hand side of (25) and ρ
                           
                              i
                            are positive scalars, we have:
                              
                                 (26)
                                 
                                    
                                       
                                          AFS
                                       
                                       
                                          α
                                       
                                    
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ;
                                    x
                                    ,
                                    θ
                                    )
                                    :
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          t
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    <
                                    0
                                    
                                    or
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          t
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    <
                                    0
                                    ,
                                 
                              
                           The locus is in the form of a compound linear inequality that binds the direction of t.

If we have a β-vector pair, then 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                            are orthogonal to P, and point in the same direction as shown in Fig. 3b. Similar to the derivation for the case of α-vector pair, we normalize (24) by 
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                wi
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                            for i
                           =1, 2 and then subtract the two equations, the rotation component can be eliminated as follows:
                              
                                 (27)
                                 
                                    
                                       
                                          
                                             
                                                d
                                             
                                             
                                                1
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         w
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    -
                                    
                                       
                                          
                                             
                                                d
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         w
                                                         2
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    =
                                    -
                                    
                                       
                                          
                                             
                                                ρ
                                             
                                             
                                                1
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         w
                                                         1
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          a
                                       
                                       
                                          t
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    +
                                    
                                       
                                          
                                             
                                                ρ
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         w
                                                         2
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          a
                                       
                                       
                                          t
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    .
                                 
                              
                           Define 
                              
                                 λ
                                 =
                                 sign
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       1
                                    
                                 
                                 /
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 -
                                 
                                    
                                       d
                                    
                                    
                                       2
                                    
                                 
                                 /
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 )
                              
                           , we have:
                              
                                 (28)
                                 
                                    
                                       
                                          AFS
                                       
                                       
                                          β
                                       
                                    
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ;
                                    x
                                    ,
                                    θ
                                    ,
                                    d
                                    )
                                    :
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    λ
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          t
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    <
                                    0
                                    
                                    or
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    λ
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          t
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    >
                                    0
                                    ,
                                 
                              
                           The locus is again in the form of a compound linear inequality that binds the direction of t.

If we have a γ-vector pair, then the planes Π
                           1 and Π
                           2 are orthogonal to P as shown in Fig. 3c. In addition, 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                            lie on P. According to (19), 
                              
                                 
                                    
                                       a
                                    
                                    
                                       t
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       t
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                            point in opposite directions. Similar to the constraint for translation, their vector sum can be eliminated if each 
                              
                                 
                                    
                                       a
                                    
                                    
                                       ti
                                    
                                    
                                       ′
                                    
                                 
                              
                            is normalized. Summing the two 
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                t
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                           -normalized Eq. (24) at the image positions 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                           , it can be shown that the translation component in (24) can be eliminated. We can reach the following:
                              
                                 (29)
                                 
                                    
                                       
                                          AFS
                                       
                                       
                                          γ
                                       
                                    
                                    (
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    ;
                                    x
                                    ,
                                    θ
                                    )
                                    :
                                    
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          w
                                          1
                                       
                                       
                                          ′
                                       
                                    
                                    >
                                    0
                                    
                                    or
                                    
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          w
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    >
                                    0
                                    .
                                 
                              
                           In essence, each 
                              
                                 
                                    
                                       AFS
                                    
                                    
                                       γ
                                    
                                 
                                 (
                                 
                                    
                                       w
                                    
                                    
                                       ˆ
                                    
                                 
                                 ;
                                 x
                                 ,
                                 θ
                                 )
                              
                            is a compound linear inequality to constraint the direction of w.

There are two constraints for the direction of translation but only one for the direction of rotation. We cannot have a constraint similar to 
                              
                                 
                                    
                                       AFS
                                    
                                    
                                       β
                                    
                                 
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                              
                           ;x,θ,d) to bind the direction of rotation because this involves to determine the sign of a scalar which requires an algebraic manipulation of the two unknown variables - scene depths Z
                           1 and Z
                           2. The primary reason is that magnitude of translation cannot be decoupled from the scene depth.

All the above AFS constraints, with the exception of the 
                              
                                 
                                    
                                       AFS
                                    
                                    
                                       β
                                    
                                 
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                              
                           ;x,θ,d), depend only on the direction of the normal flows. A proper threshold value can be used to determine the sign of the scalar λ. All the AFS constraints are in the form of system of compound linear inequalities, we can collectively write them as:
                              
                                 (30)
                                 
                                    
                                       
                                          AFS
                                       
                                       
                                          t
                                       
                                    
                                    :
                                    
                                    
                                       
                                          A
                                       
                                       
                                          t
                                          1
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    >
                                    0
                                    
                                    or
                                    
                                    
                                       
                                          A
                                       
                                       
                                          t
                                          2
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    >
                                    0
                                    ,
                                 
                              
                           for the locus of direction translation, where 
                              
                                 
                                    
                                       A
                                    
                                    
                                       t
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   (
                                                   -
                                                   
                                                      
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               ˆ
                                                            
                                                         
                                                      
                                                      
                                                         t
                                                         1
                                                      
                                                      
                                                         ′
                                                         T
                                                      
                                                   
                                                   
                                                      
                                                         )
                                                      
                                                      
                                                         α
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   (
                                                   -
                                                   λ
                                                   
                                                      
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               ˆ
                                                            
                                                         
                                                      
                                                      
                                                         t
                                                         1
                                                      
                                                      
                                                         ′
                                                         T
                                                      
                                                   
                                                   
                                                      
                                                         )
                                                      
                                                      
                                                         β
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 ,
                                 
                                    
                                       A
                                    
                                    
                                       t
                                       2
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             
                                                
                                                   (
                                                   -
                                                   
                                                      
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               ˆ
                                                            
                                                         
                                                      
                                                      
                                                         t
                                                         2
                                                      
                                                      
                                                         ′
                                                         T
                                                      
                                                   
                                                   
                                                      
                                                         )
                                                      
                                                      
                                                         α
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   (
                                                   λ
                                                   
                                                      
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               ˆ
                                                            
                                                         
                                                      
                                                      
                                                         t
                                                         2
                                                      
                                                      
                                                         ′
                                                         T
                                                      
                                                   
                                                   
                                                      
                                                         )
                                                      
                                                      
                                                         β
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                            and
                              
                                 (31)
                                 
                                    
                                       
                                          AFS
                                       
                                       
                                          w
                                       
                                    
                                    :
                                    
                                    
                                       
                                          A
                                       
                                       
                                          w
                                          1
                                       
                                    
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    >
                                    0
                                    
                                    or
                                    
                                    
                                       
                                          A
                                       
                                       
                                          w
                                          2
                                       
                                    
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    >
                                    0
                                    ,
                                 
                              
                           for the locus of direction rotation, where 
                              
                                 
                                    
                                       A
                                    
                                    
                                       wi
                                    
                                 
                                 =
                                 [
                                 (
                                 
                                    
                                       
                                          
                                             a
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       wi
                                    
                                    
                                       ′
                                       T
                                    
                                 
                                 
                                    
                                       )
                                    
                                    
                                       γ
                                    
                                 
                                 ]
                              
                            for i
                           =1, 2.

Each pair of normal flows that belong to either the α-, β-, or γ-group can trim away the associated motion space (α- and β-vectors for 
                              
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                              
                           -space, γ-vector for 
                              
                                 
                                    
                                       w
                                    
                                    
                                       ˆ
                                    
                                 
                              
                           -space) up to half of the solution space, i.e. three-quarter of the 4-D parameter space 
                              
                                 (
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                                 ,
                                 
                                    
                                       w
                                    
                                    
                                       ˆ
                                    
                                 
                                 )
                              
                            when combined together. The amount of solution trimming depends upon the angle subtended by the two constraint vectors (i.e. 
                              
                                 (
                                 -
                                 
                                    
                                       
                                          
                                             a
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       t
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 -
                                 
                                    
                                       
                                          
                                             a
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       t
                                       2
                                    
                                    
                                       ′
                                    
                                 
                                 )
                              
                            in 
                              
                                 
                                    
                                       AFS
                                    
                                    
                                       α
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          -
                                          λ
                                          
                                             
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                t
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          λ
                                          
                                             
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                            in AFS
                              β
                            and 
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                w
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                            in AFS
                              γ
                           ). Indeed, this angle depends on the angle θ
                           
                              x
                            which is subtended by the two associated image position vectors 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                           . If we define the two constraint vectors as v
                           1, v
                           2, and their angular separation as θ
                           
                              v
                           , it is possible to show that:
                              
                                 (32)
                                 
                                    
                                       
                                          v
                                       
                                       
                                          1
                                       
                                    
                                    ·
                                    
                                       
                                          v
                                       
                                       
                                          2
                                       
                                    
                                    =
                                    cos
                                    
                                       
                                          θ
                                       
                                       
                                          v
                                       
                                    
                                    =
                                    -
                                    cos
                                    
                                       
                                          θ
                                       
                                       
                                          x
                                       
                                    
                                    ,
                                 
                              
                           i.e. θ
                           
                              v
                           
                           =
                           π
                           −
                           θ
                           
                              x
                           . This means the wider is the angular separation between the two image positions 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                           , the larger would be the trimming. Indeed, the percentage reduction magnitude is simply governed by θ
                           
                              x
                           /2π. This indicates that the proposed constraint is more beneficial in determining direction of motion when a wide FoV camera is used. We call the above constraints as the Apparent Flow Separation (AFS) constraints because translation and rotation components in a general motion can be treated separately.

The amount of solution trimming for each AFS constraint depends upon the angle θ
                        
                           x
                         subtended by the two image position vectors. The larger the angle θ
                        
                           x
                        , the more the portion of the motion space could be removed by a normal flow pair. Since each constraint is in the form of a compound linear inequality, the maximum trimming of each constraint is up to half of the motion subspace (i.e. a hemispherical space). This exists when θ
                        
                           x
                        
                        =
                        π i.e. the pair of normal flows are located at the image positions which are exactly opposite to each other. Practically, we use a subset of normal flow measurements such that θ
                        
                           x
                         is greater than certain value because there are generally a limited number of antipodal image points that have observable normal flows available.

In this section, we will address what constraints on determining motion’s direction can further be explored when three normal flows are considered together. We will show that each triplet of normal flows can trim away half of the motion subspace (for direction of translation or direction of rotation) even no antipodal image points is available. This can reduce the ambiguity in determining the directions of translation and rotation further. We call this constraint as the Extended Apparent Flow Separation (EAFS) constraint.

Suppose we have an α′-vector triplet at the image positions 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                           , and 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̃
                                          
                                       
                                    
                                    
                                       3
                                    
                                    
                                       ′
                                    
                                 
                              
                            of the approximate spherical eye as shown in Fig. 4a. This resembles two α-vector pairs sharing one normal flow 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       n
                                       2
                                    
                                 
                              
                           . The planes Π
                           1, Π
                           2, Π
                           3, and P are coplanar. This implies that 
                              
                                 
                                    
                                       a
                                    
                                    
                                       t
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       a
                                    
                                    
                                       t
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                           , and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       t
                                       3
                                    
                                    
                                       ′
                                    
                                 
                              
                            lie on P while 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                           , and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       3
                                    
                                    
                                       ′
                                    
                                 
                              
                            are orthogonal to P. In particular, 
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                            are pairs of antipodal points. Using the AFS
                              α
                            constraint, we can two compound inequalities as follows:
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            t
                                                            1
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      <
                                                      0
                                                   
                                                   
                                                      or
                                                      
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            t
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      <
                                                      0
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            t
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      <
                                                      0
                                                   
                                                   
                                                      or
                                                      
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            t
                                                            3
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      <
                                                      0
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           If 
                              
                                 
                                    
                                       a
                                    
                                    
                                       ti
                                    
                                    
                                       ′
                                    
                                 
                              
                           s further satisfy the condition that 
                              
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 +
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 ⩽
                                 π
                              
                            (this is equivalent to image positions fulfilling the condition: 
                              
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ̃
                                                   
                                                
                                             
                                             
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ̃
                                                   
                                                
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 +
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ̃
                                                   
                                                
                                             
                                             
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ̃
                                                   
                                                
                                             
                                             
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 ⩾
                                 π
                                 )
                              
                           , then we have:
                              
                                 (33)
                                 
                                    
                                       
                                          EAFS
                                       
                                       
                                          α
                                       
                                       
                                          ′
                                       
                                    
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ;
                                    x
                                    ,
                                    θ
                                    )
                                    :
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          t
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    <
                                    0
                                    .
                                 
                              
                           The locus is in the form of a linear inequality that reduces the ambiguity in determining the direction of t to a hemispherical space.

Suppose we have a β′-vector triplet as illustrated in Fig. 4b. This resembles two β-vector pairs sharing one normal flow 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       n
                                       2
                                    
                                 
                              
                           . Similar to the case of α′-vector triplet, 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                           , and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       3
                                    
                                    
                                       ′
                                    
                                 
                              
                            are orthogonal to P, but they point in the same direction. By defining 
                              
                                 
                                    
                                       λ
                                    
                                    
                                       1
                                    
                                 
                                 =
                                 sign
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       2
                                    
                                 
                                 /
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 -
                                 
                                    
                                       d
                                    
                                    
                                       1
                                    
                                 
                                 /
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 )
                              
                            and 
                              
                                 
                                    
                                       λ
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 sign
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       2
                                    
                                 
                                 /
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 -
                                 
                                    
                                       d
                                    
                                    
                                       3
                                    
                                 
                                 /
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 )
                              
                           , we have two compound linear inequalities after applying AFS
                              β
                            constraint as:
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            t
                                                            2
                                                         
                                                      
                                                      <
                                                      0
                                                   
                                                   
                                                      or
                                                      
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            t
                                                            1
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      >
                                                      0
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            t
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      <
                                                      0
                                                   
                                                   
                                                      or
                                                      
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            t
                                                            3
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      >
                                                      0
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           If λ
                           1
                           =
                           λ
                           2
                           =
                           λ and 
                              
                                 ∠
                                 
                                    
                                       
                                          λ
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          λ
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 +
                                 ∠
                                 
                                    
                                       
                                          λ
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          λ
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 ⩾
                                 π
                              
                           , then we reduce the above system to:
                              
                                 (34)
                                 
                                    
                                       
                                          EAFS
                                       
                                       
                                          β
                                       
                                       
                                          ′
                                       
                                    
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ;
                                    x
                                    ,
                                    θ
                                    ,
                                    d
                                    )
                                    :
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    λ
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          t
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    <
                                    0
                                    .
                                 
                              
                           The locus is again in the form of a linear inequality that binds the direction of t to half of the motion space.

Suppose we have a γ′-vector triplet as illustrated in Fig. 4c. We can have three normal flow equations in the form of (24). If there exits three scalars c
                           
                              i
                            such that one of them, say c
                           2 has different sign than the other and 
                              
                                 ∑
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       wi
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 0
                              
                           , then rotation component can be removed by summation of the three normal flow equations as:
                              
                                 (35)
                                 
                                    
                                       ∑
                                    
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          d
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    -
                                    t
                                    ·
                                    
                                       ∑
                                    
                                    
                                       
                                          1
                                       
                                       
                                          
                                             
                                                Z
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          a
                                       
                                       
                                          ti
                                       
                                       
                                          ′
                                       
                                    
                                    .
                                 
                              
                           The scalars c
                           
                              i
                            can be obtained without difficulty by solving the following system of linear equations:
                              
                                 (36)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            w
                                                            1
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            w
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            w
                                                            3
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            c
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            c
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            c
                                                         
                                                         
                                                            3
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    =
                                    0
                                    .
                                 
                              
                           Since all 
                              
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       ti
                                    
                                    
                                       ′
                                    
                                 
                              
                           s point in the same direction and scene depth Z
                           
                              i
                           
                           >0, we can eliminate the dependency of Z
                           
                              i
                            from (35) as:
                              
                                 (37)
                                 
                                    
                                       
                                          EAFS
                                       
                                       
                                          
                                             
                                                γ
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ;
                                    x
                                    ,
                                    θ
                                    ,
                                    d
                                    )
                                    :
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    λ
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    <
                                    0
                                    ,
                                 
                              
                           where 
                              
                                 λ
                                 =
                                 sign
                                 (
                                 ∑
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 )
                              
                           . The γ′-vector triplet shares similar geometrical properties as the γ-group. Since 
                              
                                 
                                    
                                       a
                                    
                                    
                                       wi
                                    
                                    
                                       ′
                                    
                                 
                              
                           s lie on P, c
                           2 has opposite sign as the other when 
                              
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 +
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 ⩽
                                 π
                              
                           .

Suppose we have a δ′-vector triplet. Similar to the γ′-vector triplet, we can have three normal flow equations in the form of (24). If we can find three scalars c
                           
                              i
                            that have same sign and 
                              
                                 ∑
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       wi
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 0
                              
                           , then we can achieve an equation which is independent of rotation by summation of the three normal equations like (35). Since 
                              
                                 
                                    
                                       a
                                    
                                    
                                       ti
                                    
                                    
                                       ′
                                    
                                 
                              
                           s point in the same direction, 
                              
                                 ∑
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 >
                                 0
                              
                            and Z
                           
                              i
                           
                           >0, we can have the following:
                              
                                 (38)
                                 
                                    
                                       
                                          EAFS
                                       
                                       
                                          
                                             
                                                δ
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    (
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ,
                                    x
                                    ,
                                    θ
                                    )
                                    :
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    <
                                    0
                                    .
                                 
                              
                           The locus is again in the form of a linear inequality that binds the direction of t. Unlike 
                              
                                 
                                    
                                       EAFS
                                    
                                    
                                       
                                          
                                             γ
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                              
                            constraint, no magnitude of normal flow is utilized and no c
                           
                              i
                           s are used explicitly. Since 
                              
                                 
                                    
                                       a
                                    
                                    
                                       wi
                                    
                                    
                                       ′
                                    
                                 
                              
                           s are coplanar with P, all c
                           
                              i
                           s have same sign when 
                              
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 +
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 ⩾
                                 π
                              
                           .

Combining all the above four EAFS constraints for the direction of translation, we might collectively write the constraints as follows:
                              
                                 (39)
                                 
                                    
                                       
                                          EAFS
                                       
                                       
                                          t
                                       
                                    
                                    :
                                    
                                    
                                       
                                          A
                                       
                                       
                                          t
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       
                                          t
                                       
                                       
                                          ˆ
                                       
                                    
                                    >
                                    0
                                    ,
                                 
                              
                           where each row of the constraint matrix 
                              
                                 
                                    
                                       A
                                    
                                    
                                       t
                                    
                                    
                                       ′
                                    
                                 
                              
                            contains a constraint vector 
                              
                                 
                                    
                                       
                                          
                                             a
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       t
                                    
                                    
                                       ′
                                       T
                                    
                                 
                              
                            from the above four groups of normal flow triplets.

Suppose we have a β′-vector triplet as illustrated in Fig. 4b. Three normal flow equations in the form of (24) are available. If 
                              
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 +
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 ⩾
                                 π
                              
                           , then we can find three scalars c
                           
                              i
                            which have same sign and satisfy 
                              
                                 ∑
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       a
                                    
                                    
                                       ti
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 0
                              
                           . We can remove the dependency of translation by summing the three normal equations as:
                              
                                 (40)
                                 
                                    
                                       ∑
                                    
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          d
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          Z
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    w
                                    ·
                                    
                                       ∑
                                    
                                    
                                       
                                          c
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          Z
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          a
                                       
                                       
                                          wi
                                       
                                       
                                          ′
                                       
                                    
                                    .
                                 
                              
                           Since all 
                              
                                 
                                    
                                       a
                                    
                                    
                                       wi
                                    
                                    
                                       ′
                                    
                                 
                              
                           s point in the same direction, 
                              
                                 ∑
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       Z
                                    
                                    
                                       i
                                    
                                 
                                 >
                                 0
                              
                            and Z
                           
                              i
                           
                           >0, we can have the following constraint by removing Z
                           
                              i
                            from (40):
                              
                                 (41)
                                 
                                    
                                       
                                          EAFS
                                       
                                       
                                          
                                             
                                                β
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    (
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    ;
                                    x
                                    ,
                                    θ
                                    )
                                    :
                                    
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          w
                                       
                                       
                                          ′
                                       
                                    
                                    >
                                    0
                                    .
                                 
                              
                           The locus is in the form of a linear inequality that constraints the direction of w. In particular, c
                           
                              i
                           s are not explicitly used.

Consider we have a γ′-vector pair as shown in Fig. 4c. This resembles two γ-vector pairs sharing one normal flows 
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             ̇
                                          
                                       
                                    
                                    
                                       n
                                       2
                                    
                                 
                              
                           . The planes Π
                           1, Π
                           2, and Π
                           3 are orthogonal to P. In addition, 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       1
                                    
                                    
                                       ′
                                    
                                 
                                 ,
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       2
                                    
                                    
                                       ′
                                    
                                 
                              
                           , and 
                              
                                 
                                    
                                       a
                                    
                                    
                                       w
                                       3
                                    
                                    
                                       ′
                                    
                                 
                              
                            lie on P. The vector pairs 
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                t
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                            are antipodes. Using the AFS
                              γ
                            constraint, we have the following system of compound inequalities:
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            w
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            w
                                                            1
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      >
                                                      0
                                                   
                                                   
                                                      or
                                                      
                                                      
                                                         
                                                            w
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            w
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      >
                                                      0
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            w
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            w
                                                            2
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      >
                                                      0
                                                   
                                                   
                                                      or
                                                      
                                                      
                                                         
                                                            w
                                                         
                                                         
                                                            ˆ
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  a
                                                               
                                                               
                                                                  ˆ
                                                               
                                                            
                                                         
                                                         
                                                            w
                                                            3
                                                         
                                                         
                                                            ′
                                                         
                                                      
                                                      >
                                                      0
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           If 
                              
                                 
                                    
                                       a
                                    
                                    
                                       wi
                                    
                                    
                                       ′
                                    
                                 
                              
                           s further satisfy the condition that 
                              
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                1
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 +
                                 ∠
                                 
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                2
                                             
                                             
                                                ′
                                             
                                          
                                          ,
                                          
                                             
                                                a
                                             
                                             
                                                w
                                                3
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                 
                                 ⩽
                                 π
                              
                           , then we have:
                              
                                 (42)
                                 
                                    
                                       
                                          EAFS
                                       
                                       
                                          
                                             
                                                γ
                                             
                                             
                                                ′
                                             
                                          
                                       
                                    
                                    (
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    ;
                                    x
                                    ,
                                    θ
                                    )
                                    :
                                    
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                a
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                       
                                          w
                                          2
                                       
                                       
                                          ′
                                       
                                    
                                    >
                                    0
                                    .
                                 
                              
                           In essence, 
                              
                                 
                                    
                                       EAFS
                                    
                                    
                                       
                                          
                                             γ
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                              
                            is a linear inequality on the direction of w.

Combing the above two EAFS constraints for the direction of rotation, we collectively write the constraints as follows:
                              
                                 (43)
                                 
                                    
                                       
                                          EAFS
                                       
                                       
                                          w
                                       
                                    
                                    :
                                    
                                    
                                       
                                          A
                                       
                                       
                                          w
                                       
                                       
                                          ′
                                       
                                    
                                    
                                       
                                          w
                                       
                                       
                                          ˆ
                                       
                                    
                                    >
                                    0
                                    ,
                                 
                              
                           where each row of the matrix 
                              
                                 
                                    
                                       A
                                    
                                    
                                       w
                                    
                                    
                                       ′
                                    
                                 
                              
                            contains a constraint vector 
                              
                                 
                                    
                                       
                                          
                                             a
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       w
                                    
                                    
                                       ′
                                       T
                                    
                                 
                              
                            from the above two groups of normal flow triplets.

The above AFS and EAFS constraints are expressed as a system of strictly homogeneous linear inequalities L. More specifically, the solution space which is constrained by each inequality in the homogeneous system for AFS is an union of two half-spaces on the unit sphere S
                        2
                        ={X:∥X∥=1, X
                        ∈
                        R
                        3}. On the other hand, each locus of the motion solution for EAFS is a half-space (i.e. a hemisphere, H
                        ={X: X
                        ·
                        n
                        ⩾0,
                        X,
                        n
                        ∈
                        S
                        2}, where n is the pole of H) in S
                        2. The intersection of all the half-spaces, which is a bounded convex polyhedral, gives the locus of the direction of motion.

Assume the homogeneous system L is consistent (i.e. no outliers exist), it has two dual forms. From the point of view of the original space, L is a system of half-spaces Hs. From the view point of the conjugate space, L is a collection of points (poles of Hs) on S
                        2. One convenient way to find the solution is to use the duality between intersection of hemispheres (∩H
                        
                           i
                        ,
                        H
                        
                           i
                        
                        ∈
                        H) and spherical convex hull of hemispherical poles n
                        
                           i
                         
                        [47]. Each vertex of the spherical convex hull corresponds to an edge of the intersection ∩H
                        
                           i
                        . This is also related to the visibility map (V-map) used in [48], where V-map of a surface S is a set of points which differ from every surface normal n on S by at most 90° i.e. V-map={P: P
                        ·
                        n
                        ⩾0,
                        P,
                        n
                        ∈
                        S
                        2}. A hemisphere in 3-space is a point on V-map.

We have developed a method which utilizes some geometrical properties of V-map to give clue to solve a system of homogeneous linear inequalities even when the system is inconsistent [49]. But this method may not be very effective in reducing the solution’s ambiguity if the intersection of the two polygons which are formed by the gnomonic projections for the sets of points P
                        +
                        ={P:P
                        ·
                        n
                        >0,
                        P
                        ∈
                        S
                        2} and P
                        −
                        ={P:P
                        ·
                        n
                        <0,
                        P
                        ∈
                        S
                        2} is very large.

One of the possible methods to solve a system of linear inequalities is to use Fourier-Motzkin elimination. By eliminating an existential over n constraints we may introduce n
                        2/4 constraints. If there are k quantifiers to eliminate, we may end with 
                           
                              
                                 
                                    n
                                 
                                 
                                    
                                       
                                          2
                                       
                                       
                                          k
                                       
                                    
                                 
                              
                              /
                              
                                 
                                    4
                                 
                                 
                                    k
                                 
                              
                           
                         constraints. Since the constraints are linear, we can determine the solution using Linear Programming (LP). However, a global solution cannot be resulted if the linear system is inconsistent (i.e. there exists outliers). There are some LP-based methods in the literature to solve for inconsistent system of linear inequalities in least square sense [50,51], and also L
                        1-sense [52] as the system of linear equations, but not for homogeneous system. In this paper, we provide an alternative solution based on the insight that intersection of lines is commonly solved robustly using Hough voting in the literature. Intersection of hemispheres shares similar geometrical properties (increase the dimension by one) as the intersection of lines, and voting is also used in many other motion estimation methods such as [53,54]. We propose the use of Hough-like voting to solve the inequality-based problem. We iterate the voting process in a coarse-to-fine framework to reduce computational complexity. Moreover, we will propose an efficient method to remove redundant inliers and reject outliers simultaneously during the process of coarse-to-fine voting.

Suppose we are considering a system of homogeneous linear inequalities: 
                           
                              
                                 
                                    A
                                 
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                              >
                              0
                           
                        , to determine direction of translation using EAFS constraint. For the simplicity of discussion, let’s call 
                           
                              
                                 
                                    A
                                 
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                           
                         as the constraint matrix for the direction of translation. Fig. 5
                         illustrates a 2-D analogy. After first iteration using a coarse sampling resolution on the motion space, the solution region is represented by the convex polyhedral cone C which is bounded by two vectors 
                           
                              
                                 
                                    
                                       
                                          c
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          c
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                           
                        . Define the associated hemispherical spaces with poles 
                           
                              
                                 
                                    
                                       
                                          c
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    1
                                 
                              
                           
                         and 
                           
                              
                                 
                                    
                                       
                                          c
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                           
                         as H
                        1 and H
                        2 respectively. 
                           
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                           
                        s which lie on the region formed by ∪H
                        
                           i
                         (i.e. darkish green and pale green regions in Fig. 5) are inliers. Those 
                           
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                           
                        s which are located within the region formed by ∩−
                        H
                        
                           i
                         (i.e. white region in Fig. 5) are outliers. In the next iteration of voting, a finer sampling resolution will be used to search for solution only within the polyhedral cone C which is resulted from the previous iteration. From Fig. 5, it can be shown that the inliers belong to ∩
                        H
                        
                           i
                         (i.e. darkish green region) are remained as inliers in the next iteration. The only ambiguous region is the one represented by S
                        2
                        −(∩−
                        H
                        
                           i
                        )−(∩H
                        
                           i
                        ) (i.e. pale green region in Fig. 5). This means that we only need to consider a sub-matrix of 
                           
                              
                                 
                                    A
                                 
                                 
                                    t
                                 
                                 
                                    ′
                                 
                              
                           
                         such that each row of it is a vector 
                           
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    ti
                                 
                                 
                                    ′
                                    T
                                 
                              
                           
                         from the uncertainty band. Using this strategy, we not only reject outliers but also reduce the computational complexity on voting as the size of the constraint matrix continuously decreases when the iteration goes on.

If the system of homogeneous linear inequalities is in compound form i.e. 
                           
                              (
                              
                                 
                                    A
                                 
                                 
                                    t
                                    1
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                              >
                              0
                              
                              or
                              
                              
                                 
                                    A
                                 
                                 
                                    t
                                    2
                                 
                              
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                              >
                              0
                              )
                           
                         as AFS constraint, then inliers are recognized when 
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   a
                                                
                                                
                                                   ˆ
                                                
                                             
                                          
                                          
                                             t
                                             1
                                             i
                                          
                                          
                                             ′
                                          
                                       
                                       ,
                                       
                                          
                                             
                                                
                                                   a
                                                
                                                
                                                   ˆ
                                                
                                             
                                          
                                          
                                             t
                                             2
                                             i
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                              
                           
                         are located in ∪H
                        
                           i
                        . Outliers are recognized when 
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   a
                                                
                                                
                                                   ˆ
                                                
                                             
                                          
                                          
                                             t
                                             1
                                             i
                                          
                                          
                                             ′
                                          
                                       
                                       ,
                                       
                                          
                                             
                                                
                                                   a
                                                
                                                
                                                   ˆ
                                                
                                             
                                          
                                          
                                             t
                                             2
                                             i
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                              
                           
                         are located in ∩−
                        H
                        
                           i
                        . Due to the coupled nature of constraint vectors in AFS, we expect the voting process will be slower than EAFS.

The AFS and EAFS constraints return two probability maps that indicate the direction of translation and the direction of rotation separately. The solution set can be further refined by going through a second stage which involves normal flow’s magnitude by the use of partial detranslation and complete derotation similar to that described in [35]. Here, we combine the two techniques together. This is more advantageous than using each of them one by one as [35]. The magnitude component of normal flows which could be more erroneous than its direction component because the temporal resolution of a video is generally lower than its spatial resolution. The approach that uses AFS (or EAFS) and AFM in a two-stage manner not only can make the solution more robust to noise, but also reduce the input space of AFM significantly, and in turn reduce the computation complexity.

In partial detranslation, we need to search for the vector set 
                           
                              V
                              =
                              {
                              
                                 
                                    a
                                 
                                 
                                    t
                                 
                              
                              :
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                              ·
                              
                                 
                                    a
                                 
                                 
                                    t
                                 
                              
                              =
                              0
                              }
                           
                         for each 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                        . A reduced set of hypothesized 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                         can be generated from the AFS or EAFS constraints beforehand. An optimal full w is returned as the least-square-error (LSE) solution of the over-determined system of linear equations as follows:
                           
                              (44)
                              
                                 [
                                 
                                    
                                       a
                                    
                                    
                                       w
                                    
                                    
                                       T
                                    
                                 
                                 ]
                                 w
                                 =
                                 [
                                 d
                                 ]
                                 ,
                              
                           
                        for each 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                        . A score s
                        
                           DeT
                         which can be assigned to each 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                         depends on the median of square residues. The smaller is the median value, the higher would be the score. A solution 
                           
                              
                                 
                                    w
                                 
                                 
                                    ˆ
                                 
                              
                           
                         from (44) is outside the spherical convex hull cone of 
                           
                              {
                              
                                 
                                    w
                                 
                                 
                                    ˆ
                                 
                              
                              }
                           
                         resulted from the direction constraints is considered to be a degenerate solution. Such a 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                         and the associated solution 
                           
                              
                                 
                                    w
                                 
                                 
                                    ˆ
                                 
                              
                           
                         are removed from the solution set.

In complete derotation, we need to remove rotational component in normal flows by using the set of w obtained from partial detranslation. The w which fulfils better the system of linear inequality:
                           
                              (45)
                              
                                 [
                                 σ
                                 
                                    
                                       
                                          
                                             a
                                          
                                          
                                             ˆ
                                          
                                       
                                    
                                    
                                       t
                                    
                                    
                                       T
                                    
                                 
                                 ]
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                                 <
                                 0
                                 ,
                              
                           
                        where σ
                        =sign(d
                        −
                        w
                        ·
                        a
                        
                           w
                        ), will have a higher score s
                        
                           DeW
                         which equals the number of satisfied inequalities. In particular, only those data points that have non-zero 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                              ·
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                           
                         are used. Our complete derotation differs from [35] in the way that we make the constraint as a system of linear inequalities which is more computationally efficient. We do not require to generate a set of derotated normal flows, and to consider whether they lie in half-planes that are related to the hypothesized focus of expansion (or focus of contraction).

The requirements of 
                           
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                           
                         for the partial detranslation and the complete derotation are actually complementary to each other. One requires 
                           
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                           
                         orthogonal to 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                         and the other one requires 
                           
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                           
                         not orthogonal to 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                        . Therefore, we use a scoring scheme that considers the contributions from detranslation and derotation together. The score of a candidate of 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                         is defined as the weighted sum of s
                        
                           DeT
                         and s
                        
                           DeW
                        . The weights are the number of 
                           
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                           
                         satisfying 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                              ·
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              =
                              0
                           
                         and 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                              ·
                              
                                 
                                    
                                       
                                          a
                                       
                                       
                                          ˆ
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              
                              ≠
                              
                              0
                           
                         respectively. The solution for 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                         will be the one that has the highest score. The optimal full w will be the associated w for that 
                           
                              
                                 
                                    t
                                 
                                 
                                    ˆ
                                 
                              
                           
                         from the partial detranslation.

@&#EXPERIMENTS AND RESULTS@&#

We evaluated the performance of determining camera motion using the AFS and EAFS constraints together with AFM constraint (AFS
                        
                        +
                        
                        AFM, EAFS
                        
                        +
                        
                        AFM) and a 5-point method [16] in a RANSAC framework for an approximate spherical camera (spher-5-pt RANSAC) against different levels of noise. The simulation environment was conducted as close to the real situation as possible. The spherical imaging system consisted of 4 cameras having similar geometrical configuration as Fig. 2 (cameras with indices from 1 to 4 are used). Each camera had a resolution 640×480, and focal length was set to 350pixels. A virtual scene having depth randomly varied from 75cm to 125cm was used. We compared three different configurations, namely ideal approximation of spherical camera with coinciding focal points (Ideal-Sphere-Cam), approximated spherical camera with non-coinciding focal points (Approx-Sphere-Cam), and Approx-Sphere-Cam having extrinsic calibration errors (Approx-Sphere-Cam-wCalErr). Each camera in the rig was placed 2cm away from the global coordinate frame C
                        0 i.e. b
                        
                           i
                        
                        =(0,0,0.02)
                           T
                        . All the cameras lay on the same plane nominally.

In order to simulate errors introduced from cameras placement discrepancy in the configuration Approx-Sphere-Cam-wCalErr, a position vector with random orientation and 1mm magnitude was added to each baseline vector b
                        
                           i
                        . A random rotation matrix which was equivalent to a rotation of 1.5° about a random axial direction was also multiplied to each rotation matrix R
                        
                           i
                        . To simulate a sparse normal flow field, we randomly chose only 5% of data points from the flow field for the methods AFS
                        
                        +
                        
                        AFM and EAFS
                        
                        +
                        
                        AFM. We randomly chose only 1% of data points from optical flow field for spher-5-pt RANSAC because there are generally very small amount of reliable distinct features in an image sequence. To simulate flow extraction error, optical flows were corrupted by zero-mean, isotropic Gaussian noise before projecting randomly to form normal flows. The standard deviation of Gaussian noise equals to the noise-to-signal ratio (NSR) times the median of optical flows’ magnitudes (not simplify values that do not have direct relation to synthesized full flows as [10,11]). The camera rig underwent general motion that included both translation and rotation motions randomly generated over all possible directions. We evaluated three different motion scenarios which are classified by the average ratio (ε) between the translational optical flows’ magnitudes and the rotational optical flows’ magnitudes, namely ε
                        =0.2273, 0.9597, 6.105. These values of ε are calculated as the mean ratio for 100 trials at the noiseless situation using the camera configuration Ideal-Sphere-Cam. Table 2
                         states the corresponding magnitudes of translation and rotation used for different values of ε. Motion recovery results were averaged over 100 trials for each level of noise. Due to large amount of trials, the Matlab simulation was performed on a different computer (containing i7 CPU and 8GB RAM) as the real-image experiment. We skipped three frames for every estimate when using spher-5-pt RANSAC because we found that the result was not stable if the baseline was too short.

For AFS constraint, we randomly picked up 2000 pairs of normal flows for each of the α- and β-groups, and another 4000 pairs of normal flows for the γ-group. The angular separation θ
                        
                           x
                         between the two image positions for each pair of the flows was required to be greater than 150°. For EAFS constraint, we randomly picked up 1000 pairs of normal flows for each of the α′-, β′-, γ′-, and δ′-groups, and another 2000 pairs of normal flows for the β′- and γ′-group. This means that same number of normal flow pairs are used for the recovery of the directions of translation and rotation. Voting was conducted on a unit sphere which was uniformly sampled by the icosahedral best packing [55]. We used 5 iterations. The initial and final sampling resolutions were 19.32° and 1.181° respectively. The final single solution was defined as the vote-weighted average of this set of candidates.


                        Fig. 6
                         shows the simulation results for AFS
                        
                        +
                        
                        AFM, EAFS
                        
                        +
                        
                        AFM, and spher-5-pt RANSAC for the camera configuration Approx-Sphere-Cam-wCalErr using the balanced motion (ε
                        = 0.9597). The proposed methods outperform the correspondence-based method, spher-5-pt RANSAC. Our estimation errors are still within acceptable level when the standard deviation of Gaussian noise equals to 1.4 times of the median of optical flows’ magnitudes. When AFS and AFM constraints are used together, the errors are 5.183° for translation and 1.764° for rotation with 4.917% magnitude error. When EAFS and AFM constraints are used together, the errors are reduced to 3.602° for translation and 1.535° for rotation with 4.602% magnitude error. The overall result shows that the proposed method has good accuracy in determining motion and is robust against noise even the system is not a perfect spherical eye and extrinsic calibration errors are present.

As we discussed in Sections 5.3 and 5.4, the ability of ambiguity reduction of EAFS is stronger than that of AFS, the plots in Fig. 6 match with the expectation. EAFS results in lower angular error in determining direction of motion (Fig. 6a and b), a less standard derivation of angular error (Fig. 6c, d, i, and j), a greater reduction of the size of the constraint matrix (Fig. 6k and l), and a faster computation time (Fig. 6h). We have not included computation time for spher-5-pt RANSAC because feature matching is not required in the simulation. Comparison under missing such a component does not reflect the true performance well. We leave this comparison to the real-image experiment in the next section.


                        Fig. 6f and g illustrate an interesting observation. The percentage of the mis-classification of vector triplets for rotation in EAFS is lower than that of vector triplets for translation. This is because the two EAFS constraints (β′ and γ′) which are used to constraint the direction of rotation are independent of normal flow magnitude as presented in Section 5.4. We have experienced that magnitude part of normal flows is more easily corrupted by noise and other imperfections than its direction part. Same reasoning applies to AFS constraints as well.


                        Fig. 7
                         shows the results of recovering camera motion for two different camera configurations: Ideal-Spher-Cam and Approx-Spher, using three different average motion magnitude ratios, ε
                        = 0.2273, 0.9597, 6.105. Using the direction constraints (AFS, EAFS) alone, the error in estimating direction of translation (rotation) with dominant rotation (translation) is larger than the case for balanced motion. Overall speaking, the error in motion determination after using the AFM constraint is much lower and in well acceptable range even in high level of noise no matter in dominant translation, dominant rotation, or balanced motion.

We also performed an experiment to study the accuracy of motion estimation when various baseline distances b
                        
                           i
                         between the local camera coordinate C
                        
                           i
                         and the global camera coordinate C
                        0 were used. The distance ranged from 0cm (ideal case) to 30cm (40% of minimum scene depth). We considered two motion magnitudes, namely balanced motion magnitude (ε
                        =0.9597) and dominant rotation (ε
                        =0.2273). Same experimental setup and simulation environment were used as before. The input flows were corrupted by Gaussian noise with NSR fixed to 30%. Fig. 8
                         reveals that the accuracy in determining camera motion decreases when camera distance increases. More specifically, the translation error is more sensitive to the motion magnitude. The increase of translational angular error is larger when the motion is dominated by rotation. The angular error of rotation is slightly higher when the camera motion is balanced. The rotational magnitude error is very similar for the two compared motion magnitudes.

Two real image sequences (15 frames each) with resolution 640×360 were captured using a custom-made imaging system (Fig. 9
                        a) that consists of four miniature Microsoft HD-5000 CMOS cameras positioned geometrically in the same way (illustrated in Fig. 9b) as used in the synthetic experiments. The cameras were intrinsically calibrated using the calibration toolbox [56]. They were extrinsically calibrated using the grid calibration method [45]. Fig. 9c shows a set of images which was captured by the imaging system during the experiment. The baseline vector b
                        
                           i
                         for each camera was about 3cm from the rig center C
                        0. The camera system was placed on a computer-controlled linear translation table with a manually tunable rotation stage (Newport 481-A) and a manually tunable linear stage (Newport 460A) in y-axis. This means the camera system can be translated in x
                        0
                        y
                        0
                        z
                        0-plane and rotated along y
                        0-axis (perpendicular to the ground). The method is not limited to planar rotation motion, but for practical reasons, the rotation was carried on the ground plane. In the first experiment, camera motion (motion 1) was defined as: t
                        =(−0.1736,0,0.9848)
                           T
                         × 1.5mm/frame and w
                        =(0,−1,0)
                           T
                         × 0.15°/frame. In the second experiment, camera motion (motion 2) was defined as: t
                        =(0.9623,0.2,−0.1846)
                           T
                         × 1.5mm/frame and w
                        =(0,1,0)
                           T
                         × 0.15°/frame. Normal flows were calculated by (16). To ease the differentiation process, each image frame was smoothed by discrete 2D Gaussian filter beforehand. The spatial and temporal derivatives were calculated using second order approximation (stencil [1−8 0 8−1]/12).

We extensively compared the performance of the proposed methods (AFS 
                        
                        +
                        
                        AFM, EAFS
                        
                        +
                        
                        AFM) against the methods using the state-of-the-art algorithms:
                           
                              1.
                              
                                 8-pt RANSAC: An 8-point algorithm uses feature correspondences in a RANSAC framework [57] to determine camera motion [58] (code from [59]).


                                 spher-5-pt RANSAC: A 5-point algorithm [14] uses feature correspondences in a RANSAC framework to estimate motion from an approximate spherical camera [16] (code partially from [59]).


                                 AFD
                                 
                                 +
                                 
                                 AFM: A two-stage direct method uses normal flows to estimate motion of monocular camera [42]. Instead of non-uniform sampling using Spherical coordinates, we changed it to uniform sampling by using icosahedral best packing [55]. We also performed regular sampling by a factor of 2 on the extracted normal flow field in order to reduce data size.


                                 TVL
                                 
                                    1
                                 -NL
                                 +
                                 LM: A linear method estimates monocular camera motion from optical flows [5]. Optical flow was recovered using a TV-L
                                 1 energy minimization with weighted median filtering [60]. In particular, we used the method, Classic-NL-Fast (a fast version for Classic-NL-Full).


                                 LK
                                 
                                 +
                                 
                                 LM: Similar to TVL
                                 
                                    1
                                 
                                 -NL
                                 +
                                 LM, but optical flow field was recovered using a faster algorithm, Lucas-Kanade method [20].


                                 TVL
                                 
                                    1
                                 -NL
                                 +
                                 LQP: A linear quasi-parallax method to estimate camera motion. It uses optical flows from pairs of visual rays that are anti-parallel to each other from a pair of laterally-placed cameras [7]. Optical flow field was recovered using a TV-L
                                 1 energy minimization with weighted median filtering [60].


                                 LK
                                 
                                 +
                                 
                                 LQP: Similar to TVL
                                 
                                    1
                                 
                                 -NL
                                 +
                                 LQP, but optical flow field was recovered using a faster algorithm, Lucas-Kanade method.

We used the Scale Invariant Feature Transform (SIFT) [2] for features matching in 8-pt RANSAC and spher-5-pt RANSAC due to its outstanding performance and availability of the code. For those methods using monocular camera, we used the camera to image a flower scene (top-left image in Fig. 9d). In the evaluation, all programs were written in MatLab and they ran on a WinXP PC having 3GHz Pentium D CPU and 2GB RAM to resemble computing resource on general electronic device. It should be noticed that the SIFT detector was written in C++ and then complied to form a MEX-function for Matlab. The comparison in computation speed is indeed biased to the methods using feature correspondences. Our proposed methods (AFS
                        
                        +
                        
                        AFM, EAFS
                        
                        +
                        
                        AFM) should be even faster if our program is written in a more speed-favorable programming language.


                        Figs. 10 and 11
                        
                         show the results of the experiments using motion 1 and motion 2 respectively. Both of the experiments imaged the same scene but using different camera motions. It should be noticed that only results from frame 3 to frame 13 are shown because our method used 5-frame image derivatives. 2-frame image derivatives are also fine for our method but it is less accurate than 5-frame one. For feature-based methods, we skipped three frames for every estimate (so comparison ends at frame 12) because we found that the result was not stable if the baseline was too short. In the experiment using motion 1, spher-5-pt RANSAC, TVL
                        
                           1
                        -NL
                        
                        +
                        
                        LQP, AFS
                        
                        +
                        
                        AFM, and EAFS
                        
                        +
                        
                        AFM performed similarly well in motion estimation. Although 8-pt RANSAC has a lower error in estimating magnitude of rotation, the larger error in determining direction of translation indicates that the estimation in overall motion may not be very trustable. For the experiment using camera motion 2, spher-5-pt RANSAC has the lowest angular error in translation. But our proposed method (EAFS
                        
                        +
                        
                        AFM) not only has the lowest estimation error in the direction of rotation, but also requires the lowest computation time. On average, it needs 5.253s/frame to determine camera motion. Tables 3 and 4
                        
                         summarize the average estimation errors in motion recovery and the average computation times among all the compared methods for motion 1 and motion 2 respectively. Value in brackets represents the standard deviation. Bolded value represents the lowest error or computation time among all the compared methods.

The accuracy and stability of determining motion using 8-pt RANSAC are not as good as spher-5-pt RANSAC. The former one has the average errors in estimating the directions of translation and rotation as 7.120° and 6.437° respectively. The latter one has the average errors in estimating the directions of translation and rotation as 2.958° and 4.397° respectively. This is because spher-5-pt RANSAC utilizes visual clues from an approximate spherical camera having wide FoV. The outstanding performance of it is also partially due to the reason that the essential matrix is refined using modern non-linear least squares algorithm (Levenberg–Marquardt algorithm) after rejecting outliers in a RANSAC framework. It should be noticed that the computation time of spher-5-pt RANSAC is higher than that of 8-pt RANSAC, but still lower than those methods using optical flow.

Generally speaking, accurate motion estimation using optical flows relies heavily on accurate recovery of the flow field. It is not surprising that TVL
                           
                              1
                           -NL-based methods perform better than LK-based methods because the former method has sophisticatedly compromised data and regularization terms in the functional, the flow field is even further regularized using median filter. But the computation time of TVL
                           
                              1
                           -NL is about 4.047 times more than the method uses LK.

In Fig. 11a, the angular error in the estimation of translation using TVL
                           
                              1
                           -LM is unexpectedly larger than that using LK
                           
                           +
                           
                           LM. Indeed, the motion estimation error using LK
                           
                           +
                           
                           LM is not small when comparing to other methods. These two methods utilize narrow-FoV camera which suffer from motion ambiguities problem. Fig. 12
                           a shows the recovered optical flow field using TVL
                           
                              1
                           -NL in Middlebury color coding. Fig. 12b shows the residue error between two successive images pair (frames 3 and 4 for the experiment using motion 2) after performing image warping. Although the high residual errors are only localized to image edges, the motion determination is not accurate. More specifically, the estimated direction of translation and full rotation are (−0.9349,0.1415,0.3256)
                              T
                            and (0.01991,0.2294,−0.006359)
                              T
                            respectively. The corresponding ground truths are (0.9725,0.1775,−0.1508)
                              T
                            and (0.001567,0.150,−0.002257)
                              T
                            respectively. The LM method incorrectly recognized that the recovered optical flow field was dominated by rotation.

On the other hand, the two methods which use laterally-placed cameras (LQP) perform better than the corresponding counterparts using single camera due to the absence of ambiguity confusion between translation and rotation. The average errors in estimating the directions of translation and rotation for LK
                           
                           +
                           
                           LQP are 15.85° and 12.08° respectively. For TVL
                           
                              1
                           -NL
                           
                           +
                           
                           LQP, they are reduced to 3.706° and 2.039° respectively. The performance of LQP is largely affected by the accuracy of recovered optical flows.

In the experiment, the average amounts of observable normal flows available for the four cameras are 12.02%, 20.17%, 26.50%, and 20.78%/frame. Among the observable normal flow measurements, the average amounts of normal flows that fulfil different group criteria are given in Tables 5 and 6
                           
                           . We randomly selected the same amount of normal flows for each group as the simulation for the voting process.

Our proposed methods (AFS
                           
                           +
                           
                           AFM, EAFS
                           
                           +
                           
                           AFM) outperform our earlier work (AFD
                           
                           +
                           
                           AFM). AFD
                           
                           +
                           
                           AFM has the average errors in estimating the directions of translation and rotation as 7.510° and 5.892° respectively. For AFS
                           
                           +
                           
                           AFM, the average errors for 
                              
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       w
                                    
                                    
                                       ˆ
                                    
                                 
                              
                            are 3.380° and 1.555° respectively. EAFS
                           
                           +
                           
                           AFM has the lowest average errors among the three methods, the errors for 
                              
                                 
                                    
                                       t
                                    
                                    
                                       ˆ
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       w
                                    
                                    
                                       ˆ
                                    
                                 
                              
                            are 3.451° and 1.514° respectively. A less ambiguous and smaller input space to the AFM-stage makes the motion estimation more accurate and a faster computation time.

In Fig. 13
                           a, the well-defined maximum (in deep red) indicates the location of low error translation. In particular, the translation direction obtained is not ambiguous. Fig. 13b reveals similar result in determining direction of rotation. Each spherical voting map indicates the probability of the direction of motion. The true solution lies within the patch having the highest probability. Unlike other motion estimation methods having closed-form solutions, voting does not return an invalid solution when it fails.

For the average computation time, EAFS
                           
                           +
                           
                           AFM and AFS
                           
                           +
                           
                           AFM require 5.254s/frame and 6.367s/frame respectively. The computation time of EAFS
                           
                           +
                           
                           AFM outperforms the compared methods having similar motion estimation accuracy. On average, EAFS
                           
                           +
                           
                           AFM is 5.303 times faster than spher-5-pt RANSAC and 71.85 times faster than TVL
                           
                              1
                           -NL
                           
                           +
                           
                           LQP.

Overall speaking for the two real-image videos, AFS
                           +
                           AFM and EAFS
                           +
                           AFM have comparable performance in motion determination as the methods using the state-of-the-art algorithms such as spher-5-pt RANSAC and TVL
                           
                              1
                           -NL
                           
                           +
                           
                           LQP. Moreover, we have a more stable motion estimation results and a lower computational complexity.


                           Fig. 14
                            shows the recovered depth maps for the flower scene (top left in Fig. 9d) and box scene (bottom left in Fig. 9d) using (17). Due to the unresolved magnitude of translation, the depth maps are scaled by assuming translation with unit magnitude. Notice that the homogeneous regions are removed due to the absence of observable normal flows. The depth maps were filtered by a 9 ×9 median filter. Hot color represents that parts are far away from the camera while cool color indicates those parts are relatively closer to the camera. The reconstruction of depth map only consumed 3.999s/frame and 3.876s/frame for the flower and box scenes respectively.

@&#CONCLUSION@&#

In this paper, we have presented a mechanism to separate the directions of translation and rotation components from general motion with the availability of wide field-of-view imaging system. The Apparent Flow Separation (AFS) constraint allows each normal flow pair in the three subsets to reduce the motion ambiguity up to half of the motion space. The Extended Apparent Flow Separation (EAFS) constraint allows each normal flow triplet in the six subsets to reduce the motion ambiguity to half of the motion space. It has been shown that the intersection of all solution spaces arising from normal flow pairs or triplets yields two spherical probability maps, namely determining the directions of translation and rotation from general motion. We also provided a magnitude constraint which refines the solution set further and recovers the magnitude of rotation. Once the camera motion is estimated, depth map of imaged scene can be recovered without difficulty.

The proposed direct method has the advantages that it has tight constraint on the motion parameters than our previous work. It requires neither distinctly trackable features in the video, piecewise smooth scene, nor establishment of optical flow field. Synthetic experiments show that the proposed method is robust against noise. Real image experiment shows that our computation time is the fastest among the compared state-of-the-art methods while we have similar motion determination accuracy as them.

@&#REFERENCES@&#

