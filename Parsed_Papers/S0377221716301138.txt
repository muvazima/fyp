@&#MAIN-TITLE@&#Designing repetitive screening procedures with imperfect inspections: An empirical Bayes approach

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A batch of complex items is inspected more than once to discover conforming items in repetitive screening.


                        
                        
                           
                           The number of conforming items still remaining in the batch is often estimated by the maximum likelihood method.


                        
                        
                           
                           We propose an empirical Bayes estimation method which considers the heterogeneity in batch quality.


                        
                        
                           
                           We also deal with the problem of when to stop the screening process and salvage the remaining items.


                        
                        
                           
                           In numerical study, we show that the empirical Bayes method is superior to the traditional estimation method.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Inspection

Product quality

Reliability

Empirical Bayes estimation

@&#ABSTRACT@&#


               
               
                  A batch of expensive items, such as IC chips, is often inspected multiple times in a sequential manner to further discover more conforming items. After several rounds of screening, we need to estimate the number of conforming items that still remain in the batch. We propose in this paper an empirical Bayes estimation method and compare its performance with that of the traditional maximum likelihood method. In the repetitive screening procedure, another important decision problem is when to stop the screening process and salvage the remaining items. We propose various types of stopping rules and illustrate their procedures with a simulated inspection data. Finally, we explore various extensions to our empirical Bayes estimation method in multiple inspection plans.
               
            

@&#INTRODUCTION@&#

In statistical quality control, “acceptance sampling” is an effective tool that improves and assures the quality of the items in a batch (Schilling and Neubauer 2012). A sample of items is picked at random from the batch and, on the basis of information that is yielded by the sample, we make a decision regarding the disposition of the remaining items in the batch.

In some situations, however, all the items in the batch are subjected to a series of rigorous tests, and only the items that pass the test successfully are taken out of the batch. Some authors call it “100% inspection” (Duffuaa, Al-Turki, & Kolus, 2009) or “100% attribute sampling” (Dhavale, 1987). Because no real sampling takes place in such a case, we use the term “screening” throughout the paper (Tang & Tang, 1994).

During a round of screening, not every conforming item is identified due to inevitable inspection errors. That is why some expensive items are screened more than once in a sequential manner. This “repetitive screening” is also known as a sequential defect removal sampling (Bonnett & Woodward, 1994), a repetitive testing (Greenberg & Stokes, 1995), a repeat inspection (Duffuaa & Khan, 2005; Elshafei, Khan, & Duffuaa, 2006), or a sequential review (Rallis & Lansdowne, 2001).

Consider, for example, the semiconductor industry (Greenberg & Stokes, 1995). The fabrication of an integrated circuit (IC) or “chip” is accomplished by depositing a series of film layers upon a silicon wafer, which forms the foundation of the chip. A single wafer may hold hundreds of chips, each of which will go on to power such electronic devices as MP3 players, cell phones, personal computers, and more. At the final stage, packaged chips are subjected to a functionality test, where hundreds of different input patterns are used to ensure that each chip works in accordance with manufacturing specifications.

It is possible for a non-defective chip to fail the screening procedure. (e.g., the electrical leads on the packaged device may be contaminated with a small amount of dust or not lined up perfectly with the test head.) Due to the stringency of the test design, however, it is not likely for any defective chips to pass the functionality test successfully. Because the market value of a chip is much higher than the cost of its functionality test, it is cost-effective to re-test any chips that have failed the functionality test.

In such a situation, an important managerial decision is how to estimate the number of non-defective chips still remaining in the batch after a given number of screening cycles (Chun, 2006). Conversely, we also want to determine the number of screening cycles that produce the maximum profit or the minimum cost (Chun, 2009). In this paper, we first propose a Bayesian method for estimating the total number of confirming items in a batch, and then we deal with the problem of when to stop the screening procedure.

One of the difficulties in Bayesian analysis is how to determine the “prior distribution” of the total number of conforming items in a batch and estimate its parameter values. In the paper, we use the so-called “empirical Bayes” estimation, where the parameter of a binomial prior distribution is estimated from the inspection data. Based on the empirical Bayesian estimate of the number of conforming items still remaining in a batch, we can decide whether to stop the screening procedure or to conduct another round of screening. The optimal stopping rule is the one that satisfies a pre-specified condition or maximizes the expected profit (Jaraiedi, Kochhar, & Jaisingh, 1987).

The remainder of the paper is organized as follows. In the next section, we contrast two types of inspection problems, formally introduce the notation that will be used throughout the paper, and briefly introduce the basic concept of the Bayesian approach. We consider the method of maximum likelihood in Section 3, and we propose the empirical Bayes method in Section 4. We then consider various types of stopping rules in the repetitive screening procedure in Section 5. In Section 6, we compare the performance of the empirical Bayes estimate with that of the maximum likelihood estimate, and illustrate the stopping rules with simulated inspection data. The concluding remarks on possible extensions to our empirical Bayes estimation method are given in Section 7.

A complex product is composed of a number of elements or items that jointly describe what the consumer or user thinks of as quality (Montgomery, 2012, p. 8). These parameters are often called quality characteristics. Quality characteristics are often evaluated relative to specifications. A products or component is called nonconforming if it fails to meet one or more of its specifications. A specific type of failure is called a nonconformity. A nonconforming product is considered defective if it has one or more defects which are nonconformities that are serious enough to significantly affect the safe or effective use of the product.

Consider a complex product, such as an automobile or a software document. The complex product may contain more than one defects, and we need to estimate the number of defects still undiscovered after multiple inspections. Consider another case in which an expensive item, such as an IC chip, is being manufactured in batches. The item under consideration may have one or more “quality characteristics” (e.g., device speed, device delay time, and bond pull strength) that are tested simultaneously. If any of the characteristics do not conform to engineering standards, the item is classified as “non-conforming”.

Thus, various screening or inspection procedures could be classified into two groups – (1) one that estimates the number of “conformities” or “non-conformities” in a complex product, and (2) another that deals with the number of “conforming” or “non-conforming” items in a batch of items. As stated by Grant and Leavenworth (1996, p. 17), the technical meanings of the words “defective” items and “defects” in a product as used in manufacturing industries are not the same as the common meanings of these words as used in everyday speech. In the following literature review, we still use the words “defective” and “defect” in their technical sense.

@&#LITERATURE REVIEW@&#

Many statistical methods have been proposed to estimate the number of “defects” still remaining in a complex product after a series of multiple inspections. For example, Bonnett and Woodward (1994) proposed a non-linear regression method, while Chun (2005) used the maximum likelihood and maximum entropy methods. Later, Chun (2008) pointed out a non-convergence problem of the non-linear regression method, and proposed a Gibbs sampling method to estimate the number of defects via a Monte Carlo simulation.

For the Bayesian analysis of the number of defects in a software system, Dhavale (1987) proposed a 100% attribute sampling plan in which the number of undetected defectives is described as a Poisson distribution. Later, Rallis and Lansdowne (2001) used the same Poisson distribution as the prior distribution. In such a case, the number of defects still remaining in the product does not depend on the number of defects that have been discovered so far. In many practical situations, however, it is reasonable to assume that the more defects we have discovered up to now, the more defects we will detect during a future inspection cycle.

As an alternative to the Poisson prior, Chun and Sumichrast (2007) recommended the negative-binomial distribution as the most desirable prior distribution of the number of defects. With the negative binomial distribution, Chun (2009) developed prior and posterior planning models of a multiple inspection procedure. Ou and Wein (1996) described the number of defective chips on each wafer in a given lot as a gamma random variable with shape and scale parameters.

Another type of estimation problem deals with the number of “defective items” still remaining in a batch after a series of multiple inspections. Greenberg and Stokes (1995) considered the problem of estimating the number of conforming items in a batch of expensive items after several rounds of screening procedures. They only considered a type I error in their repetitive screening model, but Ding, Greenberg, and Matsuo (1998) later proposed a similar cost-minimization model with type I and II errors. Quinino and Ho (2004) also considered both types of inspection errors and derived the optimal plan that minimizes the total cost. Ding and Gong (2008) considered a multiple inspection plan for the case in which the testing equipment is either in a normal or in an abnormal state. Recently, Gong (2012) dealt with a similar problem in which type I and II errors are dependent on the state of the testing equipment.

In the Bayesian estimation of the number of defective items in a batch, Gasparini, Nusser, and Eisele (2004) used the discrete uniform distribution as the prior distribution, while the detection probability of a defective item is described as a beta distribution. Type I and II errors in a multiple sampling and inspection plan are modeled as beta distributions by
Quinino, Ho, and Trindade (2005), but they assume that the parameter values of the beta distribution are known a priori.

In the paper, we restrict our attention to the problem of estimating the number of conforming items still remaining in a batch after a series of repetitive screenings. Our prior knowledge on the number of conforming items is modeled as a binomial distribution. We believe that the problem of estimating the number of non-conformities in a complex product can be handled in a similar manner with a negative binomial prior distribution. We first consider the maximum likelihood method and then propose a Bayesian method. The parameter value for the binomial distribution is estimated via an empirical Bayes method. In a numerical study, we show that the empirical Bayesian method outperforms the traditional maximum likelihood method in estimating the number of conforming items and in determining when to stop the repetitive screening procedure.

Let us define several terms and formally introduce the notation that will be used throughout the paper. Suppose that a batch of N items contains n conforming items and (N-n) non-conforming items. During a round of screening, each conforming item is discovered with probability p and not detected with probability q (=1–p). In search theory, q is known as the “overlook” or “wink” probability (Berry & Mensch, 1986). As in most imperfect inspection models, we assume that the overlook probability q is a known constant (Duffuaa & Khan, 2005; Lee & Unnikrishanan, 1998; Shiau, 2002).
                     

All the items in the batch will be screened k times by the same testing equipment. These screenings are “sequential” in the sense that a conforming item discovered during one round of screening is removed from the batch prior to the next round of screening so that the same conforming item cannot be discovered more than once (Rallis & Lansdowne, 2001). The sequential screenings are also statistically independent with each other so that the detection probability p remains unchanged throughout the screening process. We are said to be at “stage” k when we finish the kth round of screening process.

After the first round of screening, x
                        1 conforming items have been identified and removed from the batch. The remaining N- x
                        1 items are subjected to another round of screening. After k rounds of screening, we have a record x
                         = {x
                        1, x
                        2, …, xk
                        } of the number of conforming items discovered at each stage. In most practical situations, the histogram of xk
                         over the stage k is skewed to the right, showing a longer tail dwindling over the stage k. Fig. 1 displays the flow chart of a repetitive screening procedure with k = 3.

For notational convenience, let sk
                         =x
                        1+ x
                        2+…+xk
                         be the “cumulative” number of conforming items discovered during the k rounds of screening. Furthermore, let rk
                         (=n–sk
                        ) be the number of conforming items still remaining in the batch at stage k. Based on the inspection results x
                         = {x
                        1, x
                        2, …, xk
                        }, we now need to estimate the total number of conforming items n in the batch or, equivalently, the number of conforming items rk
                         (=n–sk
                        ) still undiscovered and remaining in the batch.

Let us briefly review various statistical methods of estimating an unknown parameter θ. Suppose that we have a distributional model f(x|θ) for a sample observation x, conditional upon the unobservable parameter θ, where θ ∈ Θ. Viewed as a function of the unknown parameter θ, the distribution f(x|θ) is sometimes called the “likelihood” function L(θ). In the inference about the parameter θ, all relevant experimental information, after x is observed, is contained in the likelihood function L(θ) for the observed data x.

Although the classical statistician would assume that θ is an unknown, but fixed parameter to be estimated from x, the Bayesian statistician would treat the model parameter θ as a random variable and place a probability distribution g
                        0(θ) on it. The “prior” distribution g
                        0(θ) represents the relative likelihood, before the values of sample data x have been observed, that the true value of θ lies in each of the various regions of the parameter space Θ. If the prior distribution for θ is specified up to a parameter π, the parameter π in g
                        0(θ|π) is called a “hyper-parameter”.

Assuming that the hyper-parameter π is known, the Bayesian uses Bayes’ rule to compute the “posterior” distribution gx
                        (θ|x, π) as follows:

                           
                              (1)
                              
                                 
                                    
                                       g
                                       x
                                    
                                    
                                       (
                                       θ
                                       |
                                       x
                                       ,
                                       
                                       π
                                       )
                                    
                                    =
                                    
                                       
                                          f
                                          
                                             (
                                             x
                                             |
                                             θ
                                             )
                                          
                                          
                                          
                                             g
                                             0
                                          
                                          
                                             (
                                             θ
                                             |
                                             π
                                             )
                                          
                                       
                                       
                                          
                                             ∫
                                             Θ
                                          
                                          
                                             f
                                             
                                                (
                                                x
                                                |
                                                θ
                                                )
                                             
                                             
                                             
                                                g
                                                0
                                             
                                             
                                                (
                                                θ
                                                |
                                                π
                                                )
                                             
                                             d
                                             θ
                                          
                                       
                                    
                                    =
                                    
                                       
                                          f
                                          
                                             (
                                             x
                                             |
                                             θ
                                             )
                                          
                                          
                                          
                                             g
                                             0
                                          
                                          
                                             (
                                             θ
                                             |
                                             π
                                             )
                                          
                                       
                                       
                                          h
                                          (
                                          x
                                          |
                                          π
                                          )
                                       
                                    
                                    ,
                                 
                              
                           
                        where h(x|π) denotes the marginal distribution of x. The posterior distribution in (1) reflects both the prior beliefs on θ and the sample information x. It represents the relative likelihood, after the values of sample data x have been observed, that the true value of θ lies in each of various regions of the parameter space Θ.

If the hyper-parameter π is unknown, then the information about π is captured by the marginal distribution h(x|π), which does not depend on the model parameter θ. If f(x|θ) and g
                        0(θ|π) together form a “conjugate” pair of distributions, then the marginal distribution h(x|π) will be available in a closed form. An “empirical” Bayes analysis uses this marginal distribution to estimate π by 
                           
                              
                                 π
                                 ^
                              
                              
                                 (
                                 x
                                 )
                              
                           
                        , and then derives the posterior distribution gx
                        (θ|x, 
                           
                              π
                              ^
                           
                        ) in (1). (The “empirical” in empirical Bayes analysis arises from the fact that we are using the sample data x to help determine the prior distribution of θ though estimation of the hyper-parameter π.)

Empirical Bayes methods have been around for quite a long time, having been applied to a wide variety of decision problems in marketing, finance, and production management. For example, Casella (1985) illustrated the empirical Bayes method with an example that accessed consumer purchase behavior. Hui, Kwan, and Lee (1993) proved the superiority of an empirical Bayes estimator in selecting the optimal portfolio of securities in finance. Ou and Wein (1996) used the empirical Bayes method to estimate the number of defective chips on a silicon wafer in the semiconductor industry. By
Chun (2010), the failure rate of a production process was estimated by the empirical Bayes method.

Readers who are more interested in empirical Bayesian analysis are referred to many excellent review papers, including Carlin and Louis (2000). In the next section, we first consider the traditional maximum likelihood method that estimates n and rk
                         based solely on the test results x = {x
                        1, x
                        2
                        
                           
                              ,
                              …
                              ,
                           
                         
                        xk
                        }.

There are originally n conforming items in a batch of size N. After (j–1) rounds of repetitive screening procedures, there are (n–sj
                     
                     –
                     1) conforming items that are still undiscovered and remain in the batch. Thus, the probability that exactly xj
                      conforming items will be detected during the next round of screening is a binomial distribution as shown below:

                        
                           (2)
                           
                              
                                 P
                                 
                                    [
                                    
                                       x
                                       j
                                    
                                    |
                                    n
                                    ]
                                 
                                 =
                                 
                                    
                                       (
                                       n
                                       −
                                       
                                          s
                                          
                                             j
                                             −
                                             1
                                          
                                       
                                       )
                                       !
                                    
                                    
                                       
                                          (
                                          n
                                          −
                                          
                                             s
                                             j
                                          
                                          )
                                       
                                       !
                                       
                                          x
                                          j
                                       
                                       !
                                    
                                 
                                 
                                    q
                                    
                                       n
                                       −
                                       
                                          s
                                          j
                                       
                                    
                                 
                                 
                                    
                                       (
                                       1
                                       −
                                       q
                                       )
                                    
                                    
                                       x
                                       j
                                    
                                 
                                 ,
                              
                           
                        
                     where q is the overlook probability of a conforming item during a screening process.

If we conduct k rounds of screening, the test results x = {x
                     1, x
                     2,…, xk
                     } will be available along with sk
                     . Note that the total number of conforming items sk
                      that will be detected during the k rounds of screening is obviously a random variable, and its expected value can be shown to be

                        
                           (3)
                           
                              
                                 E
                                 
                                    [
                                    
                                       s
                                       k
                                    
                                    |
                                    n
                                    ]
                                 
                                 =
                                 E
                                 
                                    [
                                    n
                                    ]
                                 
                                 
                                    (
                                    1
                                    −
                                    
                                       q
                                       k
                                    
                                    )
                                 
                                 .
                              
                           
                        
                     It follows from (2) that the joint probability of x = {x
                     1, x
                     2,…, xk
                     } is

                        
                           (4)
                           
                              
                                 
                                    
                                       
                                          f
                                          (
                                          x
                                          |
                                          n
                                          )
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             ∏
                                             
                                                j
                                                =
                                                1
                                             
                                             k
                                          
                                          
                                             P
                                             [
                                             
                                                x
                                                j
                                             
                                             |
                                             n
                                             ]
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             
                                                n
                                                !
                                             
                                             
                                                
                                                   (
                                                   n
                                                   −
                                                   
                                                      s
                                                      k
                                                   
                                                   )
                                                
                                                !
                                                
                                                   ∏
                                                   
                                                      j
                                                      =
                                                      1
                                                   
                                                   k
                                                
                                                
                                                   
                                                      x
                                                      j
                                                   
                                                   !
                                                
                                             
                                          
                                          
                                             q
                                             
                                                k
                                                (
                                                n
                                                −
                                                
                                                   s
                                                   k
                                                
                                                )
                                             
                                          
                                          
                                             ∏
                                             
                                                j
                                                =
                                                1
                                             
                                             k
                                          
                                          
                                             
                                                [
                                                
                                                   q
                                                   
                                                      j
                                                      −
                                                      1
                                                   
                                                
                                                
                                                   (
                                                   1
                                                   −
                                                   q
                                                   )
                                                
                                                ]
                                             
                                             
                                                x
                                                j
                                             
                                          
                                          ,
                                       
                                    
                                 
                              
                           
                        
                     which is a multinomial distribution with (k+1) classes. The joint probability in (4) can be expressed alternatively as follows:

                        
                           (5)
                           
                              
                                 
                                    
                                       
                                          f
                                          (
                                          x
                                          |
                                          n
                                          )
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             
                                                n
                                                !
                                             
                                             
                                                
                                                   (
                                                   n
                                                   −
                                                   
                                                      s
                                                      k
                                                   
                                                   )
                                                
                                                !
                                                
                                                   s
                                                   k
                                                
                                                !
                                             
                                          
                                          
                                             
                                                (
                                                
                                                   q
                                                   k
                                                
                                                )
                                             
                                             
                                                n
                                                −
                                                
                                                   s
                                                   k
                                                
                                             
                                          
                                          
                                             
                                                (
                                                1
                                                −
                                                
                                                   q
                                                   k
                                                
                                                )
                                             
                                             
                                                s
                                                k
                                             
                                          
                                          ·
                                       
                                    
                                 
                                 
                                    
                                    
                                    
                                       
                                          ×
                                          
                                          
                                             
                                                
                                                   s
                                                   k
                                                
                                                !
                                             
                                             
                                                
                                                   
                                                      (
                                                      1
                                                      −
                                                      
                                                         q
                                                         k
                                                      
                                                      )
                                                   
                                                   
                                                      s
                                                      k
                                                   
                                                
                                                
                                                   ∏
                                                   
                                                      j
                                                      =
                                                      1
                                                   
                                                   k
                                                
                                                
                                                   
                                                      x
                                                      j
                                                   
                                                   !
                                                
                                             
                                          
                                          
                                             ∏
                                             
                                                j
                                                =
                                                1
                                             
                                             k
                                          
                                          
                                             
                                                [
                                                
                                                   q
                                                   
                                                      j
                                                      −
                                                      1
                                                   
                                                
                                                
                                                   (
                                                   1
                                                   −
                                                   q
                                                   )
                                                
                                                ]
                                             
                                             
                                                x
                                                j
                                             
                                          
                                          .
                                       
                                    
                                 
                              
                           
                        
                     Thus, the “likelihood function” of the unknown number of conforming items n when the test results are x = {x
                     1, x
                     2,…, xk
                     } is given by a binomial distribution:

                        
                           (6)
                           
                              
                                 L
                                 
                                    (
                                    n
                                    ;
                                    x
                                    )
                                 
                                 =
                                 
                                    
                                       n
                                       !
                                    
                                    
                                       
                                          (
                                          n
                                          −
                                          
                                             s
                                             k
                                          
                                          )
                                       
                                       !
                                       
                                          s
                                          k
                                       
                                       !
                                    
                                 
                                 
                                    
                                       (
                                       
                                          q
                                          k
                                       
                                       )
                                    
                                    
                                       n
                                       −
                                       
                                          s
                                          k
                                       
                                    
                                 
                                 
                                    
                                       (
                                       1
                                       −
                                       
                                          q
                                          k
                                       
                                       )
                                    
                                    
                                       s
                                       k
                                    
                                 
                                 .
                              
                           
                        
                     The maximum likelihood estimator of n can be found from the ratio of two successive likelihood functions:

                        
                           (7)
                           
                              
                                 
                                    
                                       L
                                       (
                                       n
                                       ;
                                       x
                                       )
                                    
                                    
                                       L
                                       (
                                       n
                                       −
                                       1
                                       ;
                                       x
                                       )
                                    
                                 
                                 =
                                 
                                    n
                                    
                                       n
                                       −
                                       
                                          s
                                          k
                                       
                                    
                                 
                                 
                                    q
                                    k
                                 
                                 .
                              
                           
                        
                     Setting it equal to 1, we can derive the maximum likelihood estimator of n as follows:

                        
                           (8)
                           
                              
                                 
                                    n
                                    ^
                                 
                                 =
                                 
                                    
                                       s
                                       k
                                    
                                    
                                       1
                                       −
                                       
                                          q
                                          k
                                       
                                    
                                 
                                 .
                              
                           
                        
                     Note that the same estimator of n can also be derived by the method of moments.

From (8), the number of conforming items still remaining in the batch after k rounds of screening is estimated by

                        
                           (9)
                           
                              
                                 
                                    
                                       r
                                       ^
                                    
                                    k
                                 
                                 =
                                 
                                    n
                                    ^
                                 
                                 −
                                 
                                    s
                                    k
                                 
                                 =
                                 
                                    
                                       q
                                       k
                                    
                                    
                                       1
                                       −
                                       
                                          q
                                          k
                                       
                                    
                                 
                                 
                                    s
                                    k
                                 
                                 .
                              
                           
                        
                     Note that, as shown in (8) and (9), the maximum likelihood estimators of n and rk
                      can be obtained by sk
                     , rather than each individual test results x = {x
                     1, x
                     2,…, xk
                     }. In the next section, we propose a Bayesian estimation method with a binomial prior distribution of the unknown parameter n.

Let us consider a certain batch of N items, among of which only n items are conforming to manufacturer's specifications. To consider the batch-to-batch variability, we assume that the total number of conforming items n is a random variable which differs from batch to batch. As the prior distribution of n, we suggest using a binomial distribution which belongs to the same distributional family as the likelihood function f(x|n) in (5):

                           
                              (10)
                              
                                 
                                    
                                       g
                                       0
                                    
                                    
                                       (
                                       n
                                       |
                                       π
                                       )
                                    
                                    =
                                    
                                       (
                                       
                                          
                                             
                                                N
                                             
                                          
                                          
                                             
                                                n
                                             
                                          
                                       
                                       )
                                    
                                    
                                    
                                       π
                                       n
                                    
                                    
                                    
                                       
                                          (
                                          1
                                          −
                                          π
                                          )
                                       
                                       
                                          N
                                          −
                                          n
                                       
                                    
                                    .
                                 
                              
                           
                        Notice that the “prior mean” of the total number of conforming items n in a batch of size N is simply

                           
                              (11)
                              
                                 
                                    E
                                    [
                                    n
                                    |
                                    π
                                    ]
                                    =
                                    N
                                    π
                                    .
                                 
                              
                           
                        Thus, it follows from (3) and (11) that the total number of conforming items sk
                         that will be discovered during the k rounds of repetitive screening is

                           
                              (12)
                              
                                 
                                    E
                                    
                                       [
                                       
                                          s
                                          k
                                       
                                       |
                                       π
                                       ]
                                    
                                    =
                                    N
                                    π
                                    
                                       (
                                       1
                                       −
                                       
                                          q
                                          k
                                       
                                       )
                                    
                                    ,
                                 
                              
                           
                        which is a monotonically increasing growth curve over the stage k.

It follows from the likelihood function in (5) and the “conjugate” prior distribution in (10) that the marginal distribution of x is

                           
                              (13)
                              
                                 
                                    
                                       
                                          
                                             h
                                             (
                                             x
                                             |
                                             π
                                             )
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             
                                                
                                                   N
                                                   !
                                                
                                                
                                                   
                                                      (
                                                      N
                                                      −
                                                      
                                                         s
                                                         k
                                                      
                                                      )
                                                   
                                                   !
                                                   
                                                   
                                                      ∏
                                                      
                                                         j
                                                         =
                                                         1
                                                      
                                                      k
                                                   
                                                   
                                                      
                                                         x
                                                         j
                                                      
                                                      !
                                                   
                                                
                                             
                                             
                                             
                                                
                                                   [
                                                   1
                                                   −
                                                   π
                                                   
                                                      (
                                                      1
                                                      −
                                                      
                                                         q
                                                         k
                                                      
                                                      )
                                                   
                                                   ]
                                                
                                                
                                                   N
                                                   −
                                                   
                                                      s
                                                      k
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ×
                                             
                                             
                                                ∏
                                                
                                                   j
                                                   =
                                                   1
                                                
                                                k
                                             
                                             
                                                
                                                   [
                                                   π
                                                   
                                                      q
                                                      
                                                         j
                                                         −
                                                         1
                                                      
                                                   
                                                   
                                                      (
                                                      1
                                                      −
                                                      q
                                                      )
                                                   
                                                   ]
                                                
                                                
                                                   x
                                                   j
                                                
                                             
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        From (5), (10), and (13), the posterior distribution of n is given by

                           
                              (14)
                              
                                 
                                    
                                       
                                          
                                             
                                                g
                                                x
                                             
                                             
                                                (
                                                n
                                                |
                                                π
                                                )
                                             
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             
                                                
                                                   (
                                                   N
                                                   −
                                                   
                                                      s
                                                      k
                                                   
                                                   )
                                                   !
                                                
                                                
                                                   
                                                      (
                                                      n
                                                      −
                                                      
                                                         s
                                                         k
                                                      
                                                      )
                                                   
                                                   !
                                                   
                                                      (
                                                      N
                                                      −
                                                      n
                                                      )
                                                   
                                                   !
                                                
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         
                                                            q
                                                            k
                                                         
                                                         π
                                                      
                                                      
                                                         1
                                                         −
                                                         π
                                                         (
                                                         1
                                                         −
                                                         
                                                            q
                                                            k
                                                         
                                                         )
                                                      
                                                   
                                                   )
                                                
                                                
                                                   n
                                                   −
                                                   
                                                      s
                                                      k
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ×
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         1
                                                         −
                                                         π
                                                      
                                                      
                                                         1
                                                         −
                                                         π
                                                         (
                                                         1
                                                         −
                                                         
                                                            q
                                                            k
                                                         
                                                         )
                                                      
                                                   
                                                   )
                                                
                                                
                                                   N
                                                   −
                                                   n
                                                
                                             
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        Thus, the number of confirming items rk
                         (=n–sk
                        ) still remaining in the batch is distributed as

                           
                              (15)
                              
                                 
                                    
                                       
                                          
                                             
                                                g
                                                x
                                             
                                             
                                                (
                                                
                                                   r
                                                   k
                                                
                                                |
                                                π
                                                )
                                             
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             
                                                
                                                   (
                                                   N
                                                   −
                                                   
                                                      s
                                                      k
                                                   
                                                   )
                                                   !
                                                
                                                
                                                   
                                                      r
                                                      k
                                                   
                                                   !
                                                   
                                                      (
                                                      N
                                                      −
                                                      
                                                         s
                                                         k
                                                      
                                                      −
                                                      
                                                         r
                                                         k
                                                      
                                                      )
                                                   
                                                   !
                                                
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         
                                                            q
                                                            k
                                                         
                                                         π
                                                      
                                                      
                                                         1
                                                         −
                                                         π
                                                         (
                                                         1
                                                         −
                                                         
                                                            q
                                                            k
                                                         
                                                         )
                                                      
                                                   
                                                   )
                                                
                                                
                                                   r
                                                   k
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ×
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         1
                                                         −
                                                         π
                                                      
                                                      
                                                         1
                                                         −
                                                         π
                                                         (
                                                         1
                                                         −
                                                         
                                                            q
                                                            k
                                                         
                                                         )
                                                      
                                                   
                                                   )
                                                
                                                
                                                   N
                                                   −
                                                   
                                                      s
                                                      k
                                                   
                                                   −
                                                   
                                                      r
                                                      k
                                                   
                                                
                                             
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        The posterior distribution g
                        
                           x
                        (rk
                        |π) in (15) is called the ultimate experimental summary in Bayesian analysis. For example, it follows from (15) that the posterior mean of the number of conforming items rk
                         still remaining in the batch after k rounds of screening is

                           
                              (16)
                              
                                 
                                    E
                                    
                                       [
                                       
                                          r
                                          k
                                       
                                       |
                                       π
                                       ]
                                    
                                    =
                                    
                                       
                                          
                                             q
                                             k
                                          
                                          π
                                       
                                       
                                          1
                                          −
                                          π
                                          (
                                          1
                                          −
                                          
                                             q
                                             k
                                          
                                          )
                                       
                                    
                                    
                                       (
                                       N
                                       −
                                       
                                          s
                                          k
                                       
                                       )
                                    
                                    .
                                 
                              
                           
                        Likewise, the posterior mean of the total number of conforming item n in a batch is

                           
                              (17)
                              
                                 
                                    E
                                    
                                       [
                                       n
                                       |
                                       π
                                       ]
                                    
                                    =
                                    E
                                    
                                       [
                                       
                                          r
                                          k
                                       
                                       |
                                       π
                                       ]
                                    
                                    +
                                    
                                       s
                                       k
                                    
                                    =
                                    
                                       
                                          N
                                          π
                                          
                                             q
                                             k
                                          
                                          +
                                          
                                             s
                                             k
                                          
                                          
                                             (
                                             1
                                             −
                                             π
                                             )
                                          
                                       
                                       
                                          1
                                          −
                                          π
                                          (
                                          1
                                          −
                                          
                                             q
                                             k
                                          
                                          )
                                       
                                    
                                    ,
                                 
                              
                           
                        which is a weighted average of sk
                         and N as follows:

                           
                              (18)
                              
                                 
                                    E
                                    
                                       [
                                       n
                                       |
                                       π
                                       ]
                                    
                                    =
                                    N
                                    
                                       
                                          π
                                          
                                             q
                                             k
                                          
                                       
                                       
                                          1
                                          −
                                          π
                                          (
                                          1
                                          −
                                          
                                             q
                                             k
                                          
                                          )
                                       
                                    
                                    +
                                    
                                       s
                                       k
                                    
                                    
                                       
                                          1
                                          −
                                          π
                                       
                                       
                                          1
                                          −
                                          π
                                          (
                                          1
                                          −
                                          
                                             q
                                             k
                                          
                                          )
                                       
                                    
                                    .
                                 
                              
                           
                        It is interesting to show that the posterior mean of n is also a weighted average of the prior mean in (11) and the maximum likelihood estimator in (8).

                           
                              (19)
                              
                                 
                                    E
                                    
                                       [
                                       n
                                       |
                                       π
                                       ]
                                    
                                    =
                                    N
                                    π
                                    
                                       
                                          q
                                          k
                                       
                                       
                                          1
                                          −
                                          π
                                          (
                                          1
                                          −
                                          
                                             q
                                             k
                                          
                                          )
                                       
                                    
                                    +
                                    
                                       
                                          s
                                          k
                                       
                                       
                                          1
                                          −
                                          
                                             q
                                             k
                                          
                                       
                                    
                                    
                                       (
                                       
                                          1
                                          −
                                          
                                             
                                                q
                                                k
                                             
                                             
                                                1
                                                −
                                                π
                                                (
                                                1
                                                −
                                                
                                                   q
                                                   k
                                                
                                                )
                                             
                                          
                                       
                                       )
                                    
                                    .
                                 
                              
                           
                        Note that the hyper-parameter π in the prior distribution in (10) should be given to find the Bayesian estimates of n in (17) and rk
                         in (16). An “empirical” Bayes analysis uses the sample data x = {x
                        1, x
                        2,…, xk
                        } to estimate π by 
                           
                              
                                 π
                                 ^
                              
                              
                                 (
                                 x
                                 )
                              
                           
                        , and then derives the posterior distribution g
                        
                           x
                        (rk
                        | 
                           
                              π
                              ^
                           
                        ) in (15).

Consider m batches of items which are subject to repetitive screening. The ith batch has Ni
                         items, among which only ni
                         are conforming items, where i = 1, 2, …, m. Each of the batches has been screened ki
                         times, and its test results are summarized as a vector x
                        
                           i
                         ={xi
                        
                        1, xi
                        
                        2,…, xki
                        }.

From (13), the joint marginal distribution is

                           
                              (20)
                              
                                 
                                    
                                       
                                          
                                             h
                                             (
                                             x
                                             |
                                             π
                                             )
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             
                                                ∏
                                                
                                                   i
                                                   =
                                                   1
                                                
                                                m
                                             
                                             
                                                h
                                                (
                                                
                                                   x
                                                   i
                                                
                                                |
                                                π
                                                )
                                             
                                             =
                                             
                                                ∏
                                                
                                                   i
                                                   =
                                                   1
                                                
                                                m
                                             
                                             
                                                
                                                   
                                                      
                                                         N
                                                         i
                                                      
                                                      !
                                                   
                                                   
                                                      
                                                         (
                                                         
                                                            N
                                                            i
                                                         
                                                         −
                                                         
                                                            s
                                                            
                                                               k
                                                               i
                                                            
                                                         
                                                         )
                                                      
                                                      !
                                                      
                                                      
                                                         ∏
                                                         
                                                            j
                                                            =
                                                            1
                                                         
                                                         
                                                            k
                                                            i
                                                         
                                                      
                                                      
                                                         
                                                            x
                                                            
                                                               i
                                                               ,
                                                               j
                                                            
                                                         
                                                         !
                                                      
                                                   
                                                
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ×
                                             
                                             
                                                
                                                   [
                                                   1
                                                   −
                                                   π
                                                   
                                                      (
                                                      1
                                                      −
                                                      
                                                         q
                                                         
                                                            k
                                                            i
                                                         
                                                      
                                                      )
                                                   
                                                   ]
                                                
                                                
                                                   
                                                      N
                                                      i
                                                   
                                                   −
                                                   
                                                      s
                                                      
                                                         k
                                                         i
                                                      
                                                   
                                                
                                             
                                             
                                             
                                                ∏
                                                
                                                   j
                                                   =
                                                   1
                                                
                                                
                                                   k
                                                   i
                                                
                                             
                                             
                                                
                                                   [
                                                   π
                                                   
                                                      q
                                                      
                                                         j
                                                         −
                                                         1
                                                      
                                                   
                                                   
                                                      (
                                                      1
                                                      −
                                                      q
                                                      )
                                                   
                                                   ]
                                                
                                                
                                                   x
                                                   
                                                      i
                                                      ,
                                                      j
                                                   
                                                
                                             
                                             ,
                                          
                                       
                                    
                                 
                              
                           
                        from which the hyper-parameter π can be estimated via the method of moments or the method of maximum likelihood. For example, the likelihood function of x is given by

                           
                              (21)
                              
                                 
                                    L
                                    
                                       (
                                       π
                                       ;
                                       x
                                       )
                                    
                                    =
                                    
                                       ∏
                                       
                                          i
                                          =
                                          1
                                       
                                       m
                                    
                                    
                                       
                                       
                                          π
                                          
                                             s
                                             
                                                k
                                                i
                                             
                                          
                                       
                                    
                                    
                                    
                                       
                                          [
                                          1
                                          −
                                          π
                                          
                                             (
                                             1
                                             −
                                             
                                                q
                                                
                                                   k
                                                   i
                                                
                                             
                                             )
                                          
                                          ]
                                       
                                       
                                          
                                             N
                                             i
                                          
                                          −
                                          
                                             s
                                             
                                                k
                                                i
                                             
                                          
                                       
                                    
                                    
                                    ,
                                 
                              
                           
                        and its log-likelihood function is shown to be

                           
                              (22)
                              
                                 
                                    ln
                                    L
                                    
                                       (
                                       π
                                       ;
                                       x
                                       )
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          =
                                          1
                                       
                                       m
                                    
                                    
                                       [
                                       
                                          
                                             (
                                             
                                                N
                                                i
                                             
                                             −
                                             
                                                s
                                                
                                                   k
                                                   i
                                                
                                             
                                             )
                                          
                                          ln
                                          
                                             [
                                             1
                                             −
                                             π
                                             
                                                (
                                                1
                                                −
                                                
                                                   q
                                                   
                                                      k
                                                      i
                                                   
                                                
                                                )
                                             
                                             ]
                                          
                                          +
                                          
                                             s
                                             
                                                k
                                                i
                                             
                                          
                                          ln
                                          π
                                       
                                       ]
                                    
                                    .
                                 
                              
                           
                        The first-order derivative of the log-likelihood function in (22) with respect to π is

                           
                              (23)
                              
                                 
                                    
                                       d
                                       
                                          d
                                          π
                                       
                                    
                                    ln
                                    L
                                    
                                       (
                                       π
                                       ;
                                       x
                                       )
                                    
                                    =
                                    
                                    −
                                    
                                       ∑
                                       
                                          i
                                          =
                                          1
                                       
                                       m
                                    
                                    
                                       [
                                       
                                          
                                             
                                                
                                                   (
                                                   
                                                      N
                                                      i
                                                   
                                                   −
                                                   
                                                      s
                                                      
                                                         k
                                                         i
                                                      
                                                   
                                                   )
                                                
                                                
                                                   (
                                                   1
                                                   −
                                                   
                                                      q
                                                      
                                                         k
                                                         i
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                1
                                                −
                                                π
                                                (
                                                1
                                                −
                                                
                                                   q
                                                   
                                                      k
                                                      i
                                                   
                                                
                                                )
                                             
                                          
                                          +
                                          
                                          
                                             
                                                s
                                                
                                                   k
                                                   i
                                                
                                             
                                             π
                                          
                                       
                                       ]
                                    
                                    .
                                 
                              
                           
                        Setting it equal to zero, we can derive the maximum likelihood estimator of π, which is the root of the following equation:

                           
                              (24)
                              
                                 
                                    
                                    
                                       ∑
                                       
                                          i
                                          =
                                          1
                                       
                                       m
                                    
                                    
                                       (
                                       
                                          
                                             
                                                N
                                                i
                                             
                                             
                                                π
                                                ^
                                             
                                             
                                                (
                                                1
                                                −
                                                
                                                   q
                                                   
                                                      k
                                                      i
                                                   
                                                
                                                )
                                             
                                             −
                                             
                                                s
                                                
                                                   k
                                                   i
                                                
                                             
                                          
                                          
                                             1
                                             −
                                             
                                                π
                                                ^
                                             
                                             
                                                (
                                                1
                                                −
                                                
                                                   q
                                                   
                                                      k
                                                      i
                                                   
                                                
                                                )
                                             
                                          
                                       
                                       )
                                    
                                    =
                                    0
                                    .
                                 
                              
                           
                        Any optimization software, such as Microsoft Excel—Solver, can be used to find the root 
                           
                              π
                              ^
                           
                         of the equation in (24).

With the empirical Bayes estimate 
                           
                              π
                              ^
                           
                         of the hyper-parameter from (24), the posterior distribution in (15) for the ith batch is given by

                           
                              (25)
                              
                                 
                                    
                                       
                                          
                                             
                                                g
                                                x
                                             
                                             
                                                (
                                                
                                                   r
                                                   
                                                      k
                                                      i
                                                   
                                                
                                                |
                                                
                                                   π
                                                   ^
                                                
                                                )
                                             
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             
                                                
                                                   (
                                                   
                                                      N
                                                      i
                                                   
                                                   −
                                                   
                                                      s
                                                      
                                                         k
                                                         i
                                                      
                                                   
                                                   )
                                                   !
                                                
                                                
                                                   
                                                      r
                                                      
                                                         k
                                                         i
                                                      
                                                   
                                                   !
                                                   
                                                      (
                                                      
                                                         N
                                                         i
                                                      
                                                      −
                                                      
                                                         s
                                                         
                                                            k
                                                            i
                                                         
                                                      
                                                      −
                                                      
                                                         r
                                                         
                                                            k
                                                            i
                                                         
                                                      
                                                      )
                                                   
                                                   !
                                                
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         
                                                            q
                                                            
                                                               k
                                                               i
                                                            
                                                         
                                                         
                                                            π
                                                            ^
                                                         
                                                      
                                                      
                                                         1
                                                         −
                                                         
                                                            π
                                                            ^
                                                         
                                                         
                                                            (
                                                            1
                                                            −
                                                            
                                                               q
                                                               
                                                                  k
                                                                  i
                                                               
                                                            
                                                            )
                                                         
                                                      
                                                   
                                                   )
                                                
                                                
                                                   r
                                                   
                                                      k
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ×
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         1
                                                         −
                                                         
                                                            π
                                                            ^
                                                         
                                                      
                                                      
                                                         1
                                                         −
                                                         
                                                            π
                                                            ^
                                                         
                                                         
                                                            (
                                                            1
                                                            −
                                                            
                                                               q
                                                               
                                                                  k
                                                                  i
                                                               
                                                            
                                                            )
                                                         
                                                      
                                                   
                                                   )
                                                
                                                
                                                   N
                                                   −
                                                   
                                                      s
                                                      
                                                         k
                                                         i
                                                      
                                                   
                                                   −
                                                   
                                                      r
                                                      
                                                         k
                                                         i
                                                      
                                                   
                                                
                                             
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        Thus, the posterior mean of the number of conforming items rki
                         still remaining in the ith batch after ki
                         rounds of repetitive screening is

                           
                              (26)
                              
                                 
                                    E
                                    
                                       [
                                       
                                          r
                                          
                                             k
                                             i
                                          
                                       
                                       |
                                       
                                          π
                                          ^
                                       
                                       ]
                                    
                                    =
                                    
                                       
                                          
                                             q
                                             
                                                k
                                                i
                                             
                                          
                                          
                                             π
                                             ^
                                          
                                       
                                       
                                          1
                                          −
                                          
                                             π
                                             ^
                                          
                                          
                                             (
                                             1
                                             −
                                             
                                                q
                                                
                                                   k
                                                   i
                                                
                                             
                                             )
                                          
                                       
                                    
                                    
                                       (
                                       
                                          N
                                          i
                                       
                                       −
                                       
                                          s
                                          
                                             k
                                             i
                                          
                                       
                                       )
                                    
                                    
                                    f
                                    o
                                    r
                                    i
                                    =
                                    1
                                    ,
                                    
                                    2
                                    ,
                                    
                                    …
                                    ,
                                    m
                                    .
                                 
                              
                           
                        It follows from (17) that the posterior mean of the total number of conforming item n in the ith batch is

                           
                              (27)
                              
                                 
                                    E
                                    
                                       [
                                       
                                          n
                                          i
                                       
                                       |
                                       
                                          π
                                          ^
                                       
                                       ]
                                    
                                    =
                                    
                                       
                                          
                                             N
                                             i
                                          
                                          
                                             π
                                             ^
                                          
                                          
                                             q
                                             
                                                k
                                                i
                                             
                                          
                                          +
                                          
                                             s
                                             
                                                k
                                                i
                                             
                                          
                                          
                                             (
                                             1
                                             −
                                             
                                                π
                                                ^
                                             
                                             )
                                          
                                       
                                       
                                          1
                                          −
                                          
                                             π
                                             ^
                                          
                                          
                                             (
                                             1
                                             −
                                             
                                                q
                                                
                                                   k
                                                   i
                                                
                                             
                                             )
                                          
                                       
                                    
                                    ,
                                    
                                    f
                                    o
                                    r
                                    i
                                    =
                                    1
                                    ,
                                    
                                    2
                                    ,
                                    
                                    …
                                    ,
                                    m
                                    .
                                    ,
                                 
                              
                           
                        
                     

Based on the empirical Bayes estimates of rki
                         and ni
                        , we propose various stopping rules for the repetitive screening process in the next section.

Upon completing the kth round of screening, we need to decide if the batch of remaining items should be screened further to discover more conforming items still remaining in the batch. We can imagine various types of stopping rules for the repetitive screening procedure. Among them, some stopping rules depend on the inspection results at each stage, and other stopping rules have a fixed stopping point regardless of the batch size or inspection results.

The stopping rules with variable stopping points depend on the batch size N and the inspection results sk
                         at each stage. First, it follows from (15) that the probability of having no more conforming items in the batch of size (N–sk
                        ) is

                           
                              (28)
                              
                                 
                                    P
                                    
                                       [
                                       
                                          r
                                          k
                                       
                                       =
                                       0
                                       ]
                                    
                                    =
                                    
                                       
                                          (
                                          
                                             
                                                1
                                                −
                                                
                                                   π
                                                   ^
                                                
                                             
                                             
                                                1
                                                −
                                                
                                                   π
                                                   ^
                                                
                                                
                                                   (
                                                   1
                                                   −
                                                   
                                                      q
                                                      k
                                                   
                                                   )
                                                
                                             
                                          
                                          )
                                       
                                       
                                          N
                                          −
                                          
                                             s
                                             k
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        We may stop the screening process if this probability is greater than a certain level w
                        *:

                           
                              (29)
                              
                                 
                                    
                                       
                                          (
                                          
                                             
                                                1
                                                −
                                                
                                                   π
                                                   ^
                                                
                                             
                                             
                                                1
                                                −
                                                
                                                   π
                                                   ^
                                                
                                                
                                                   (
                                                   1
                                                   −
                                                   
                                                      q
                                                      k
                                                   
                                                   )
                                                
                                             
                                          
                                          )
                                       
                                       
                                          N
                                          −
                                          
                                             s
                                             k
                                          
                                       
                                    
                                    ≥
                                    
                                       w
                                       *
                                    
                                    ,
                                 
                              
                           
                        which is equivalent to

                           
                              (30)
                              
                                 
                                    
                                       s
                                       k
                                    
                                    ≥
                                    N
                                    −
                                    
                                       
                                          ln
                                          
                                             w
                                             *
                                          
                                       
                                       
                                          ln
                                          
                                             (
                                             
                                                
                                                   1
                                                   −
                                                   
                                                      π
                                                      ^
                                                   
                                                
                                                
                                                   1
                                                   −
                                                   
                                                      π
                                                      ^
                                                   
                                                   
                                                      (
                                                      1
                                                      −
                                                      
                                                         q
                                                         k
                                                      
                                                      )
                                                   
                                                
                                             
                                             )
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        The optimal stopping point k
                        * is the smallest k that satisfies the inequality.Second, we may stop the screening process at stage k if the expected number of conforming item E[rk
                        ] in (16) is less than a pre-specified number r
                        *:

                           
                              (31)
                              
                                 
                                    E
                                    
                                       [
                                       
                                          r
                                          
                                             k
                                             i
                                          
                                       
                                       |
                                       
                                          π
                                          ^
                                       
                                       ]
                                    
                                    =
                                    
                                       
                                          
                                             q
                                             
                                                k
                                                i
                                             
                                          
                                          
                                             π
                                             ^
                                          
                                       
                                       
                                          1
                                          −
                                          
                                             π
                                             ^
                                          
                                          
                                             (
                                             1
                                             −
                                             
                                                q
                                                
                                                   k
                                                   i
                                                
                                             
                                             )
                                          
                                       
                                    
                                    
                                       (
                                       
                                          N
                                          i
                                       
                                       −
                                       
                                          s
                                          
                                             k
                                             i
                                          
                                       
                                       )
                                    
                                    ≤
                                    
                                       r
                                       *
                                    
                                    .
                                 
                              
                           
                        Then, the stopping rule is equivalent to

                           
                              (32)
                              
                                 
                                    
                                       s
                                       k
                                    
                                    ≥
                                    
                                       (
                                       N
                                       −
                                       
                                          r
                                          *
                                       
                                       )
                                    
                                    −
                                    
                                       
                                          1
                                          −
                                          
                                             π
                                             ^
                                          
                                       
                                       
                                          π
                                          ^
                                       
                                    
                                    
                                       
                                          r
                                          *
                                       
                                       
                                          q
                                          k
                                       
                                    
                                    .
                                 
                              
                           
                        The right-hand-side of the inequality in (32) is a decreasing function of k, while the cumulative number of conforming items sk
                         is usually increasing in k. Thus, the screening process will eventually stop at a certain stopping point k.

We now consider the stopping rules with fixed stopping points that could be determined before we start the screening process. First, it follows from (16) that the proportion of the expected number of conforming items E[rk
                        ] still remaining in the batch of size (N–sk
                        ) is

                           
                              (33)
                              
                                 
                                    
                                       
                                          E
                                          [
                                          
                                             r
                                             k
                                          
                                          ]
                                       
                                       
                                          N
                                          −
                                          
                                             s
                                             k
                                          
                                       
                                    
                                    =
                                    
                                       
                                          
                                             q
                                             k
                                          
                                          
                                             π
                                             ^
                                          
                                       
                                       
                                          1
                                          −
                                          
                                             π
                                             ^
                                          
                                          
                                             (
                                             1
                                             −
                                             
                                                q
                                                k
                                             
                                             )
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        We may stop the screening process if the proportion is smaller than a pre-specified level u
                        *;

                           
                              (34)
                              
                                 
                                    
                                       
                                          
                                             q
                                             k
                                          
                                          
                                             π
                                             ^
                                          
                                       
                                       
                                          1
                                          −
                                          
                                             π
                                             ^
                                          
                                          
                                             (
                                             1
                                             −
                                             
                                                q
                                                k
                                             
                                             )
                                          
                                       
                                    
                                    ≤
                                    
                                       u
                                       *
                                    
                                    ,
                                 
                              
                           
                        which is equivalent to

                           
                              (35)
                              
                                 
                                    k
                                    ≥
                                    
                                       
                                          ln
                                          
                                             
                                                u
                                                *
                                             
                                             
                                                1
                                                −
                                                
                                                   u
                                                   *
                                                
                                             
                                          
                                          +
                                          ln
                                          
                                             
                                                1
                                                −
                                                
                                                   π
                                                   ^
                                                
                                             
                                             
                                                π
                                                ^
                                             
                                          
                                       
                                       
                                          ln
                                          q
                                       
                                    
                                    .
                                 
                              
                           
                        Since ln q in the denominator has a negative value, the numerator should also have a negative value in order to have a non-negative stopping point k. Thus, the proportion u
                        * should be no greater than π to start the screening process. Note that the optimal stopping point in (35) is independent of the batch size Ni
                        .

Second, we may stop the screening process if it is no longer cost-effective. For the economic design of the stopping rule, let v be the monetary value of a conforming item and c denote the cost of testing an item one additional time. At stage k, the expected number of conforming items that would be discovered during the next round of screening is E[rk
                        ](1–q). Thus, the expected revenue ERk
                         obtained if we screen the batch of remaining items one more time is

                           
                              (36)
                              
                                 
                                    E
                                    
                                       R
                                       k
                                    
                                    =
                                    E
                                    
                                       [
                                       
                                          r
                                          k
                                       
                                       ]
                                    
                                    
                                       (
                                       1
                                       −
                                       q
                                       )
                                    
                                    v
                                    =
                                    
                                       
                                          
                                             q
                                             
                                                k
                                                i
                                             
                                          
                                          
                                             π
                                             ^
                                          
                                       
                                       
                                          1
                                          −
                                          
                                             π
                                             ^
                                          
                                          
                                             (
                                             1
                                             −
                                             
                                                q
                                                
                                                   k
                                                   i
                                                
                                             
                                             )
                                          
                                       
                                    
                                    
                                       (
                                       
                                          N
                                          i
                                       
                                       −
                                       
                                          s
                                          
                                             k
                                             i
                                          
                                       
                                       )
                                    
                                    
                                       (
                                       1
                                       −
                                       q
                                       )
                                    
                                    v
                                    .
                                 
                              
                           
                        On the other hand, the expected cost ECk
                         of testing the remaining items is

                           
                              (37)
                              
                                 
                                    E
                                    
                                       C
                                       k
                                    
                                    =
                                    
                                       (
                                       N
                                       −
                                       
                                          s
                                          k
                                       
                                       )
                                    
                                    c
                                    .
                                 
                              
                           
                        At stage k, we need to stop the screening process if ERk
                         ≤ ECk
                         or

                           
                              (38)
                              
                                 
                                    k
                                    >
                                    
                                       
                                          ln
                                          
                                             c
                                             
                                                (
                                                1
                                                −
                                                q
                                                )
                                                v
                                                −
                                                c
                                             
                                          
                                          +
                                          ln
                                          
                                             
                                                1
                                                −
                                                
                                                   π
                                                   ^
                                                
                                             
                                             
                                                π
                                                ^
                                             
                                          
                                       
                                       
                                          ln
                                          q
                                       
                                    
                                    .
                                 
                              
                           
                        Note that this stopping rule is equivalent to the previous stopping rule in (35) with

                           
                              (39)
                              
                                 
                                    
                                       u
                                       *
                                    
                                    =
                                    
                                       c
                                       
                                          (
                                          1
                                          −
                                          q
                                          )
                                          v
                                       
                                    
                                    ,
                                 
                              
                           
                        which is the ratio of the expected cost to the expected revenue. Thus, the revenue v should be at least greater than c/[(1–q)π] in order to initiate the screening process.

To illustrate the empirical Bayes estimation method and demonstrate various stopping rules, we simulated the inspection data for various batch sizes Ni
                         as shown in Table 1
                        . The batch size Ni
                         for i = 1, 2, …, 9 was systematically changed from 800 to 1,200 by 200. The total number of conforming items ni
                         in each batch was simulated using a binomial random number with the batch size Ni
                         and the average conforming rate 0.9. For the Monte Carlo simulation, we used the Microsoft Excel functions, =rand() and =binom.inv(). As shown in Table 1, there are 8,111 conforming items in the 9 batches of 9,000 items. Thus, the average conforming rate of the simulated data is π=0.90122.

The number of conforming items xij
                         detected at stage j of the screening process was simulated with an overlook probability q = 0.2. For each conforming item, we used the Microsoft Excel function, =rand(), to simulate the number of screenings needed to detect it. As shown in each row of Table 1, the number of conforming items xij
                         that were detected at each stage is geometrically decreasing as the number of screenings j is increased. Based on the inspection data, we need to estimate the average conforming rate π (=0.90122) and the total number of conforming items ni
                         in the ith batch.

Assuming that each batch of Ni
                         items had been screening j times, we first found the maximum likelihood estimate of nij
                         at each stage j, where j = 1, 2, …, 8. The maximum likelihood estimates of nij
                         are given in Table 2
                         along with the actual values ni
                         in the last column. The prediction errors (i.e., 
                           
                              
                                 
                                    n
                                    ^
                                 
                                 
                                    i
                                    j
                                 
                              
                              −
                              
                                 n
                                 
                                    i
                                    j
                                 
                              
                           
                        ) of the estimates at each stage j are displayed in Fig. 2
                        , which shows fast convergences to the actual values ni
                        .

Using the same inspection data in Table 1, we found the empirical Bayes estimate of the hyper-parameter π at each stage j, where j = 1, 2, …, 8. We used the optimization software, Microsoft Excel – Solver, to find the root 
                           
                              π
                              ^
                           
                         of the equation in (24). Based on the empirical Bayes estimate of π at each stage j, we then estimate the total number of conforming items ni
                         in (27), where i = 1, 2, …, 9. The estimates of π and ni
                         are given in Table 3
                         along with the actual values in the last column.

As shown in Table 3, the empirical Bayes estimates of π and ni
                         converge rapidly to the actual values rapidly as more inspection results are available at each stage. The prediction errors (i.e., 
                           
                              
                                 
                                    n
                                    ^
                                 
                                 i
                              
                              −
                              
                                 n
                                 i
                              
                           
                        ) of the empirical Bayes estimates at each stage j are displayed in Fig. 3
                        , which shows a quick convergence to the actual values ni
                        .

The overall performance of the empirical Bayes estimates is compared with that of the maximum likelihood estimates in terms of the mean absolute percentage error (MAPE):

                           
                              (38)
                              
                                 
                                    M
                                    A
                                    P
                                    
                                       E
                                       j
                                    
                                    =
                                    
                                       1
                                       9
                                    
                                    
                                       ∑
                                       
                                          i
                                          =
                                          1
                                       
                                       9
                                    
                                    
                                       
                                          
                                             |
                                          
                                          
                                             
                                                n
                                                ^
                                             
                                             
                                                i
                                                j
                                             
                                          
                                          −
                                          
                                             n
                                             
                                                i
                                                j
                                             
                                          
                                          
                                             |
                                          
                                       
                                       
                                          n
                                          
                                             i
                                             j
                                          
                                       
                                    
                                    ×
                                    100
                                    %
                                    .
                                 
                              
                           
                        As shown in Table 4
                        , the empirical Bayes estimates perform much better than the maximum likelihood estimates, particularly at an early stage of the screening process.

Note that, to find the empirical Bayes estimates of π and ni
                        , the number of screenings ki
                         is not necessarily the same for each batch i. We modified the inspection data in Table 1 so that the numbers of repetitive screenings are different from batch to batch. For example, the first, fourth, and seventh batches were screened only 4 times, while other batches were screened 5 or 6 times. For the modified inspection data given in Table 5
                        , the empirical Bayes estimate of π is easily calculated to be 0.901343 from (9). The empirical Bayes estimates 
                           
                              
                                 n
                                 ^
                              
                              i
                           
                         in (17) are also given in the last column of the table, which are very close to the actual values ni
                         shown in the third column.

From the empirical Bayes estimate of ni
                         at each stage, we can also estimate the number of conforming items in (16) still remaining in the ith batch. For example, the first batch of 800 items in Table 5 has been screened 4 times and 717 conforming items were detected and removed from the batch. The number of conforming items still undetected in the batch of 83 remaining items is 1.20 (i.e., 
                           
                              
                                 n
                                 ^
                              
                              −
                              
                                 s
                                 4
                              
                           
                        ), while the actual value is 1.0 (i.e., n–s
                        4).

With batch #1 of N
                        1 = 800 items in Table 1, we illustrate the stopping rules with variable stopping points. The cumulative number of conforming items sk
                         found from batch #1 at each stage is given in Table 1, and displayed as a dotted line in Fig. 4
                        . Based on the inspection result at each stage, we need to decide whether or not to continue the screening process. To calculate the stopping points for various stopping rules, we used the empirical Bayes estimate 
                           
                              π
                              ^
                           
                         = 0.901343 and the default value q = 0.2.

First, suppose that we stop screening the items in batch #1 if the probability of having no more conforming item in the batch is larger than w
                        * = 0.95. The critical values of sk
                         are calculated from (30) and displayed in Fig. 4. The cumulative number of conforming items s
                        6 = 718 at stage 6 is larger than the critical value 712.25 for the first time. Thus, we may stop the screening process after 6 rounds of screening process.

Second, suppose that the screening process is terminated if the expected number of conforming items still remaining in batch #1 is less than r
                        * = 2 items. The critical values in (32) are displayed in Fig. 4. In such a case, we may stop the screening process at stage 4 as shown in Fig. 4.
                     

Note that the stopping rules with fixed stopping points do not depend on the batch size Ni
                        . Thus, the optimal stopping points are the same for all nine batches in Table 1 and can be determined in advance. To find the fixed stopping points, we again used the empirical Bayes estimate 
                           
                              π
                              ^
                           
                         = 0.901343 and the default value q = 0.2.

First, suppose that we want to stop the screening process if the proportion of the conforming items remaining in the batch is less than u
                        * = 0.05. Then, it follows from (35) that the optimal stopping point is 3.2040, and we need to stop at stage 4. It can be shown that the optimal stopping point is increasing in q and π, whereas it is decreasing in u
                        *.

Second, for the economic design of the repetitive screening procedure, let us assume that the value of a conforming item is v = $10 and the cost of testing one item is c = $1. Any remaining items in the batch have no salvage value. Then, the optimal stopping point is shown to be 2.584 from (38). Therefore, we need to screen each batch of items three times and then stop the screening process.

In the paper, we considered the problem of screening a batch of items multiple times in a sequential manner. We proposed an empirical Bayes method to estimate the number of conforming items in a batch. We also proposed various stopping rules that determine the optimal number of screenings. In a modest simulation study, we evaluated the accuracy of the empirical Bayes method and showed its outstanding performance over the traditional maximum likelihood method. Although we may need more extensive simulation studies with various settings of parameter values, we expect that our empirical Bayes method would perform very well in many practical situations.

In the paper, we focus on the problem of estimating the number of conforming items in a batch. The problem of estimating the number of non-conformities in a complex product could be handled in a similar manner (Briand, El Eman, Freimut, & Laitenberger, 2000). In such a case, our prior knowledge on the total number of non-conformities can be modeled as a Poisson or a negative binomial distribution. With this prior distribution, we may use the empirical Bayes method to estimate the number of non-conformities still remaining in the product after a series of screening procedures.

As in most inspection models (e.g., Duffuaa & Khan, 2008), we assume that the detection probability p for a testing equipment is known from past inspection history. A possible extension is the Bayesian estimation of the detection (or overlook) probability, as well as the number of conforming items in a repetitive inspection procedure. In practice, the prior knowledge we have on the detection probability can be easily described as a beta distribution. Since we need to estimate both the detection probability p and the number of conforming items n in a Bayesian manner, we may consider the Gibbs sampling method by Chun (2008) or Young, DeSarbo, and Morwitz (1998).

@&#ACKNOWLEDGMENTS@&#

I'd like to express my gratitude for the financial support from Cherie H. Flores Endowed Chair of MBA Studies at Louisiana State University. I'd also like to express my sincere thanks to two anonymous referees for their thorough and knowledgeable reviews that helped me improve the original manuscript significantly.

@&#REFERENCES@&#

