@&#MAIN-TITLE@&#Automated fixture configuration for rapid manufacturing planning

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Automatic rapid modular fixture configuration.


                        
                        
                           
                           Fast hashing algorithms to generate form/force closure grasps.


                        
                        
                           
                           Automatic selection & assembly of modular elements from user specified library.


                        
                        
                           
                           Includes accessibility & collision constraints for machining/inspection.


                        
                        
                           
                           Results for complex parts in realistic process plans.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Fixture synthesis

Force/form closure

Collision free planning

@&#ABSTRACT@&#


               
               
                  The wide adoption of agile manufacturing systems has necessitated the design and use of fixtures or work holding devices that have in-built flexibility to rapidly respond to part design changes. Despite the availability of reconfigurable fixtures, practical fixture configuration largely remains an experience driven manual activity to enable customization for varying workpiece geometry, and most automated solutions do not scale well to accommodate such variation. In this paper, we address the problem of rapidly synthesizing a realistic fixture that will guarantee stability and immobility of a specified polyhedral work-part. We propose that the problem of automated fixture layout may be approached in two distinct stages. First, we determine the spatial locations of clamping points on the work piece boundary using the principles of force and form closure, to ensure immobility of the fixtured part under external perturbation. In particular, we show that the candidate restraints mapped to the six dimensional vector space of wrenches (force–moment pairs) may be hashed in a straightforward manner to efficiently generate force closure configurations that restrain part movement against large external wrenches. When clamps are allowed to exert arbitrarily high reaction forces on the part, the spatial arrangement of the clamping locations ensures the part is in form closure. On generating force/form closure configurations, the chosen locations are matched against a user-specified library of reconfigurable clamps to synthesize a valid fixture layout comprising clamps that are accessible and collision free with each other and the part. Additionally, in the case of determining machining setups the clamps are chosen to avoid collisions with the moving cutting tool. We demonstrate fast algorithms to perform both location selection and fixture matching, and show several results that underscore the practical application of our solution in automated manufacturing process planning.
               
            

@&#INTRODUCTION@&#

Fixtures are work-holding devices used to locate and clamp a part surface to support manufacturing operations such as machining, inspection, and assembly. Typical part manufacturing requires planning several fixture setups to immobilize the work part while it is operated on in various orientations. Given a library of fixtures that may be used in a manufacturing process, a key challenge in automated manufacturability analysis is the synthesis of a fixture configuration that may be used to effectively clamp a specified work part during a manufacturing operation, and is the problem addressed in this paper.

The design and fabrication of fixtures can take up to 20% of the total manufacturing cost, and using flexible or reconfigurable fixtures can lead to as much as 80% reduction in the fixture cost  [1]. Modular fixtures represent the most widely used class of flexible fixtures and are adaptable to a large class of parts. They are often used for moderate or small lot sizes, especially when the cost of dedicated fixtures and the time required to produce them may be difficult to justify. Complex workpieces are located through fixtures produced quickly from standard components and can then be disassembled when a production run is complete. Modular fixtures are typically supported on tooling plates with grid holes upon which the fixture is constructed  [2] (see Fig. 1
                     ).

Fixture planning and configuration is a largely experience driven activity that focuses on determining precise location and clamping of workpieces according to a part design and process requirements. Process constraints can include collision avoidance with surrounding tooling and expected tool paths, accessibility of clamps to specified locations, part deformation under applied clamp forces, availability of fixture elements, tolerances etc. In this paper, we will focus on fixture planning with accessibility and collision avoidance constraints and choose components from an available catalog of fixture elements to determine the automatic and realistic solutions for modular fixturing of 3D parts.

@&#RELATED WORK@&#

Many approaches for computer assisted fixture planning have been developed over the last two decades to address different types of process constraints; comprehensive reviews can be found in [1,3,4]. Of most relevance to this paper are methods to determine accessible and collision free locations of fixture points that ensure part immobility under the application of external forces and moments, and we do not address problems such as deformation analysis, tolerance analysis, and so on.

Most automated solutions for modular fixture synthesis are restricted to planar shapes where it is assumed that three locators and a clamp are sufficient to immobilize the shape, for example [5–7]. The assumption is valid for two dimensional fixture synthesis because it has been shown that four fixture locations are necessary and sufficient to guarantee complete part immobility for planar degrees of freedom (see Section  3 for detailed explanations). Stability analysis to restrict planar motions relies on reasoning about a three dimensional configuration space of forces and moments. For three dimensional motions (i.e. six degrees of freedom) the problem requires stability analysis in six dimensional space which is substantially more challenging.

Due to the similarity between fixture planning and 3d robotic grasp planning  [3], algorithms for grasp planning are sometimes directly used in fixture planning  [8–10], and often propose criteria to generate optimal stable fixtures that resist three dimensional forces and torques. We argue that such solutions are partial at best even for purely geometric analysis for two reasons: 
                           
                              –
                              the analysis typically stops at generating fixture locations and does not connect to a realistic modular fixture system, which is key to providing practical solutions. A notable exception to this is in  [5] where modular fixtures for two dimensional parts are generated by exhaustively searching the combinatorial space of stable grasps, but it is clear that the approach will be computationally prohibitive upon extension to three dimensions. Furthermore, realistic solutions require post-processing the generated locations to check for collision avoidance and repeating fixture synthesis if necessary;

for the purposes of process planning we argue that providing qualitatively distinct solutions is more critical than providing a single optimized solution, which is more appropriate and necessary for compliant robot grasping. Optimizing a single grasp in the six dimensional configuration space of forces and moments is an iterative process, and furthermore optimal grasps may fail to pass other process constraints such as accessibility and collision avoidance.

The quality of a particular grasp is typically identified with the of the forces and moments or wrenches resisted by the combination of contacts, and is quantified by a grasp metric  [15,16]. Larger convex spans correspond to lower reaction forces required to be applied on the part to resist external wrenches. Usually, an initial configuration of wrenches is iteratively converged to a form closure configuration that locally maximizes the grasp metric  [17,9,18,10], where the iterations in the optimization algorithm tend to push the vertices of the initial configuration towards the convex hull of all candidate wrenches.

Instead of using an iterative procedure that will converge slowly with a large sampled set of wrenches, we will adopt a strategy that generates fixture locations by sampling near the convex hull of all candidate wrenches to construct form closure grasps. At first sight it may appear that such a computation is quite expensive since a 
                           d
                           >
                           3
                         dimensional convex hull of 
                           n
                         locations may have 
                           O
                           
                              (
                              
                                 
                                    n
                                 
                                 
                                    
                                       ⌊
                                       
                                          
                                             d
                                          
                                          
                                             2
                                          
                                       
                                       ⌋
                                    
                                 
                              
                              )
                           
                         time complexity, and even if the six dimensional hull with 
                           m
                           <
                           n
                         vertices is computed, there is still the problem of choosing a form closure configuration from the 
                           
                              
                                 
                                    m
                                 
                                 
                                    7
                                 
                              
                           
                         wrench combinations. However, we demonstrate a novel approach to dramatically reduce the search space of candidate fixture locations without explicitly computing the convex hull, and rapidly generate form closure configurations that are locally optimal and can be fixtured by physical clamps.

In this paper we first demonstrate a divide and conquer scheme that hashes samples in the six dimensional space of wrenches to rapidly generate fixture locations that resist large forces and moments, are qualitatively distinct, and provide guaranteed stability through form closure. The hashing relies on an indexing scheme that identifies subspaces corresponding to unique force–moment combinations and uses properties of the indexing system to provide form closure configurations while dramatically reducing the search space of candidate solutions.

We then use the generated locations to select available clamps in a catalog of modular fixtures by constructing clearance volumes at each location to fit the collision free clamps that are capable of reaching the given locations. Collision analysis is performed for the chosen clamps until a valid, non-colliding set of clamps that match the generated locations are found. The proposed methods are intended for integration into a larger automated process planning system, and therefore we provide checks to ensure that fixtures are not generated at locations that will interfere with the tool motion during machining or inspection. The output of the system is an automatically configured fixture layout that reflects shop capability and guarantees part stability. If no such configuration is possible the part is classified as non-fixturable.

Automatic fixture configuration through multiple setups for realistic 3D parts and process planning with clamps from a vendor supplied catalog has not been effectively addressed. We have developed novel algorithms that solve several sub-problems required in automatic fixture configuration for process planning.
                           
                              –
                              Determining non-fixturable regions of the part as dictated by process specific constraints such as tool movement and accessibility.

Rapidly determining locating points on the surface of the solid model at fixturable locations by partitioning six dimensional wrench space sampled at Plücker coordinates of candidate fixture locations, and picking optimal form closure configurations.

Identifying physical clamps from a vendor supplied catalog amounts to performing fast collision checks that determine parameters for usable clamps at each location.

We propose that the problem of automated fixture selection and layout may be solved in two stages using a generate and test strategy—we will first generate locating clamping points that guarantee part immobility, and subsequently test these points against a library of fixtures to determine if the points are accessible and locatable without collisions by any configuration of the available clamps. If such a configuration exists, it is identified as a valid fixture.


                        Locating clamping points: in Section  3, we determine the spatial locations of clamping points on the work part that ensure immobility of the clamped part under the application of any external force. The theories of force and form closure used in robotic grasping provide the mathematical foundation for identifying such clamping locations which are inherent to the geometry of the work part and independent of the part’s spatial position and orientation. In particular, we will use the properties that seven points are necessary and sufficient for frictionless grasping, and four points for grasping a polyhedral part with frictional contact  [12,11]. The novel algorithm to determine locating points relies on a partitioning of six dimensional wrench space sampled at Plücker coordinates derived from candidate fixture locations. This partitioning scheme facilitates rapid identification of a form closure configuration. In particular, form closure is guaranteed by the requirement that the convex hull of the chosen Plücker vectors contains the origin of the wrench space  [13].


                        Fixture selection: given a set of form closure clamping locations on a work part, we solve the problem of selecting candidate clamps from a given library of parts. The fixtures are assumed to be modular, which would maximize their reusability to satisfy clamping conditions, with minimal disruption to the existing tooling. The input set of locating points is vetted against the library to generate parameters for clamps that are accessible and pass collision tests with the part and surrounding tooling. The parameters are matched against the catalog to retrieve a set of clamps, if they exist, and assemble a fixture configuration to guarantee stability. If there is no such solution, the algorithm is repeated until all form closure configurations of clamps in the catalog are exhausted.

Typically all locations on the boundary of a part will not be available for fixturing. In machining operations, material in a removal volume is removed from a larger shape which could be raw stock or an intermediate staging model in a manufacturing process plan. One constraint in the fixturing problem is to locate the part without interfering with the tool’s ability to remove the material as planned. Given the staging model and removal volume, we first identify locations on the part boundary that will not be approached by a moving tool while removing material from the staging model. These are the surfaces exposed after the machining process is complete in a process step.

To discard the exposed surfaces, we first construct binary space partitioning trees, or BSP trees  [19], of the staging model and removal volume. BSP trees are optimized for ray intersection calculations and allow fast evaluation of whether a ray shot from a location on the part boundary along the part normal will intersect (a triangle on) the removal volume or another location on the staging model. This computation coarsely approximates whether the location on the part boundary is approachable by a clamp without collision with the volume to be removed by a translating cutting tool, and avoids placing clamps in undesirable locations such as pockets and holes. Locations from which an emanating ray along the part surface normal intersects triangles on the removal volume are discarded before performing form closure configuration.

To discard reachable locations in a form closure grasp where the clamp will interfere with the tool, we perform an intersection test between a clamp model contacting the location and a sweep of the removal volume in the direction of the tool approach, or along the tool path.

When the removal volumes are not available or not necessary, for example in coordinate measuring machine inspection  [20], it is possible to identify contactable portions of the part surface using properties of the configuration space obstacle. In the case of a translating tool 
                           T
                         (such as a tool attached to a three axis vertical milling center) and a stationary part 
                           S
                         to be fixtured, the translational configuration space obstacle is expressible by the Minkowski sum 
                           S
                           ⊕
                           
                              
                                 T
                              
                              
                                 −
                                 1
                              
                           
                        . The location of the Minkowski sum depends on the position of the absolute coordinate system. When the origin of the global coordinate system is placed at the tool/probe tip, the set of all locations on the part boundary where the tool tip can be positioned without collision with the part interior is given by 
                           A
                           =
                           ∂
                           
                              (
                              S
                              ⊕
                              
                                 
                                    T
                                 
                                 
                                    −
                                    1
                                 
                              
                              )
                           
                           ∩
                           ∂
                           
                              (
                              S
                              )
                           
                        , where 
                           ∂
                           X
                         represents the boundary of 
                           X
                        . The set 
                           A
                         is an explicit representation of the accessible set of 
                           S
                         defined implicitly for coordinate measuring machining in  [20]. The expression in terms of Minkowski operations can be conveniently computed using convolutions  [21,22]. Fig. 2
                         shows an example of computing non-fixturable regions on the part. i.e. regions that will be contacted by the translating tool during collision free inspection. Fixturable regions will be those where the clamps do not collide with the sweep of the tool along the contact regions.

Consider a polyhedral solid grasped at 
                        n
                      contact locations. It is generally assumed that all contacts are point contacts and that line or surface contact can be approximated by two or more point contacts  [11]. Contact between the clamps and the surface may be modeled with or without friction. In the frictionless case, the clamp only exerts a force along the inward facet surface normal at the contact location. In the presence of friction, the clamp can exert both normal and tangential forces. This type of contact is sometimes called the ‘hard finger’ model in robotic grasping [7,23,11]. Exerting a force 
                        
                           f
                        
                      at any contact location on the polyhedron also generates a moment 
                        
                           r
                        
                        ×
                        
                           f
                        
                      about a vector 
                        
                           r
                        
                      joining the point of contact and a reference point, typically the center of mass of the object. Each such force–moment combination is called a wrench and is represented by six-dimensional wrench coordinates 
                        
                           w
                        
                        =
                        
                           (
                           
                              f
                           
                           ,
                           
                              r
                           
                           ×
                           
                              f
                           
                           )
                        
                     . The wrench 
                        
                           w
                        
                      can also be seen as a representation of the line of action of 
                        
                           f
                        
                      applied at 
                        
                           r
                        
                      and hence the six coordinates 
                        
                           (
                           
                              
                                 w
                              
                              
                                 1
                              
                           
                           ,
                           …
                           ,
                           
                              
                                 w
                              
                              
                                 6
                              
                           
                           )
                        
                      of 
                        
                           w
                        
                      are the Plücker coordinates of the line. The center of mass serves as the origin of the six-dimensional wrench space, isomorphic to 
                        
                           
                              R
                           
                           
                              6
                           
                        
                     .

The mobility of a rigid body may be partially or completely constrained by a finite set of wrenches derived from locations on its boundary. When the set of locations restrict the body to remain immobile under the application of any external wrench, the body is said to be in form closure. In the event the set of locations can only restrain a bounded set of external wrenches, the body is said to be in force closure. Force and form closure are well known concepts dating back to the nineteenth century, when it was first determined  [24] that planar bodies require at least four frictionless contacts to achieve form closure. Since then, several key properties of bodies in form closure have been determined in the context of robotic grasping, of which we state a few that will be used in this paper: 
                           
                              (i)
                              a solid admits a form closure grasp if and only if a linear combination of wrenches applied at a finite set of locations is capable of resisting arbitrary external wrenches, i.e. there exists a set 
                                    
                                       {
                                       
                                          
                                             
                                                w
                                             
                                          
                                          
                                             i
                                          
                                       
                                       }
                                    
                                  of wrenches such that for positive 
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                 , we have 
                                    Σ
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                    
                                       
                                          
                                             w
                                          
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    −
                                    
                                       
                                          
                                             w
                                          
                                       
                                       
                                          e
                                          x
                                          t
                                       
                                    
                                  for any external wrench 
                                    
                                       
                                          
                                             w
                                          
                                       
                                       
                                          e
                                          x
                                          t
                                       
                                    
                                    [25,26]. In other words, the 
                                    
                                       
                                          
                                             w
                                          
                                       
                                       
                                          i
                                       
                                    
                                  must constitute a positive span of 
                                    
                                       
                                          R
                                       
                                       
                                          6
                                       
                                    
                                 . In practice, increasing or decreasing any 
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                  to balance an external wrench corresponds to tightening or loosening the clamp against the surface at location 
                                    i
                                 .

a positive span of 
                                    
                                       
                                          R
                                       
                                       
                                          n
                                       
                                    
                                  is guaranteed by a set of vectors if and only if the convex hull of the vectors contains the origin  [13]. This immediately establishes a test of fixturability—a solid is fixturable if and only if the convex hull of all candidate wrenches contains the origin.


                                 
                                    n
                                    +
                                    1
                                  vectors are both necessary and sufficient to positively span 
                                    
                                       
                                          R
                                       
                                       
                                          n
                                       
                                    
                                    [12,25]. Therefore seven points are necessary and sufficient to ensure frictionless form closure. Note that this property helps explain why the 
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                  must be strictly positive. A positive span cannot be accomplished if one or more of the seven wrenches vanishes, i.e. if the corresponding 
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    0
                                 , and negative 
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                  are not permissible since they physically correspond to (pulling) forces applied along the outward surface normal.

defining the 6×7wrench matrix 
                                 
                                    W
                                  whose columns are the 
                                    
                                       
                                          
                                             w
                                          
                                       
                                       
                                          i
                                       
                                    
                                  in the grasp, testing form closure via containment of the origin within the convex hull of the wrenches is equivalent to asserting the nullspace of 
                                    W
                                  has purely positive coefficients  [26]. When the nullspace vector 
                                    
                                       v
                                    
                                  has purely positive coefficients, it may be scaled by its 
                                    
                                       
                                          L
                                       
                                       
                                          1
                                       
                                    
                                  norm to yield the vector 
                                    
                                       u
                                    
                                    =
                                    
                                       
                                          
                                             v
                                          
                                       
                                       
                                          ∥
                                          
                                             v
                                          
                                          
                                             
                                                ∥
                                             
                                             
                                                1
                                             
                                          
                                       
                                    
                                  that is also an element of the nullspace of 
                                    W
                                 . The components of 
                                    
                                       u
                                    
                                  are the 
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                  and it is easy to check 
                                    Σ
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    1
                                  implying the origin is expressed as a convex combination of the 
                                    
                                       
                                          
                                             w
                                          
                                       
                                       
                                          i
                                       
                                    
                                  and is therefore contained in the convex hull of the wrenches.

in the case of frictional contact, tangential forces due to gravity or by external application are resisted by virtue of friction. The magnitude of the resistance is directly proportional to the coefficient of friction, and frictional forces map to wrenches. It is then easy to show that four points are sufficient to generate seven wrenches whose convex hull contains the origin. However, since the friction wrenches cannot be physically scaled by arbitrary 
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                       
                                    
                                 , the grasped configuration corresponds to a force closure.

We assume that the set of candidate fixturable locations is obtained by sampling the part boundary. Let 
                           
                              
                                 
                                    p
                                 
                              
                              
                                 i
                              
                           
                         and 
                           
                              
                                 
                                    n
                                 
                              
                              
                                 i
                              
                           
                         be vectors that denote the position and unit inward surface normal at sampled locations indexed by 
                           i
                        . The center of mass serves as the origin for the global coordinate system. Assuming point contact, a clamp at location 
                           i
                         exerts a force 
                           
                              
                                 
                                    f
                                 
                              
                              
                                 i
                              
                           
                         along 
                           
                              
                                 
                                    n
                                 
                              
                              
                                 i
                              
                           
                        . In the presence of friction, assuming a Coulomb model and a coefficient of friction 
                           μ
                        , a non-slipping tangential force 
                           
                              
                                 
                                    f
                                 
                              
                              
                                 i
                                 j
                              
                           
                         along a tangent direction 
                           j
                         at location 
                           i
                         satisfies the expression 
                           
                              (1)
                              
                                 
                                    ‖
                                    
                                       
                                          
                                             f
                                          
                                       
                                       
                                          i
                                          j
                                       
                                    
                                    ‖
                                 
                                 ≤
                                 
                                    ‖
                                    μ
                                    
                                       
                                          
                                             f
                                          
                                       
                                       
                                          i
                                       
                                    
                                    ‖
                                 
                                 .
                              
                           
                         Therefore the net non-slipping force acting at any point contact location is 
                           
                              (2)
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       j
                                    
                                 
                                 
                                    (
                                    
                                       
                                          
                                             f
                                          
                                       
                                       
                                          i
                                          j
                                       
                                    
                                    +
                                    
                                       
                                          
                                             f
                                          
                                       
                                       
                                          i
                                       
                                    
                                    )
                                 
                                 .
                              
                           
                         The limit points of the set of non-slipping tangent forces lie on a circle of radius 
                           
                              ‖
                              μ
                              
                                 
                                    
                                       f
                                    
                                 
                                 
                                    i
                                 
                              
                              ‖
                           
                         and the set 
                           
                              
                                 
                                    f
                                 
                              
                              
                                 i
                                 j
                              
                           
                           +
                           
                              
                                 
                                    f
                                 
                              
                              
                                 i
                              
                           
                         of resultant vectors form a cone called the Coulomb friction cone. For computational purposes, tangent forces are sampled at discrete orientations on the circle in turn representing the friction cone as a polyhedron.

Each applied force 
                           
                              
                                 
                                    
                                       
                                          f
                                       
                                    
                                    
                                       i
                                    
                                 
                              
                              
                                 ˆ
                              
                           
                         is mapped to a wrench defined by the Plücker coordinates 
                           
                              
                                 
                                    w
                                 
                              
                              
                                 i
                              
                           
                           =
                           
                              (
                              
                                 
                                    
                                       
                                          
                                             f
                                          
                                       
                                       
                                          i
                                       
                                    
                                 
                                 
                                    ˆ
                                 
                              
                              ,
                              
                                 
                                    
                                       p
                                    
                                 
                                 
                                    i
                                 
                              
                              ×
                              
                                 
                                    
                                       
                                          
                                             f
                                          
                                       
                                       
                                          i
                                       
                                    
                                 
                                 
                                    ˆ
                                 
                              
                              )
                           
                        . The space of all possible wrenches is isomorphic to 
                           
                              
                                 R
                              
                              
                                 6
                              
                           
                         which allows us to use the canonical basis of Euclidean space to define bins into which sampled Plücker coordinates are hashed. Each bin is the space formed by the intersection of six mutually orthogonal half-spaces yielding a total of 
                           
                              
                                 2
                              
                              
                                 6
                              
                           
                           =
                           64
                         unique bins. Bins are the generalization of quadrants to higher dimensions and are sometimes called orthants.

In 
                           d
                         dimensions, it is possible to hash all elements of a point set 
                           P
                         into one of 
                           
                              
                                 2
                              
                              
                                 d
                              
                           
                         bins. This is done by an examination of signs of each of the Plücker coordinates of points in 
                           P
                         and applying the Heaviside function to the coordinate. The resultant vector can be compressed into a six bit binary string whose decimal representation is a unique index for the bin.
                           1
                        
                        
                           1
                           For example, a force 
                                 
                                    f
                                 
                                 ≡
                                 
                                    (
                                    1
                                    ,
                                    −
                                    1
                                    ,
                                    1
                                    )
                                 
                               applied at 
                                 
                                    r
                                 
                                 ≡
                                 
                                    (
                                    2
                                    ,
                                    3
                                    ,
                                    5
                                    )
                                 
                               produces a wrench  
                                 
                                    (
                                    1
                                    ,
                                    −
                                    1
                                    ,
                                    1
                                    ,
                                    8
                                    ,
                                    3
                                    ,
                                    −
                                    5
                                    )
                                 
                               with Plücker coordinates 
                                 
                                    (
                                    
                                       f
                                    
                                    ,
                                    
                                       r
                                    
                                    ×
                                    
                                       f
                                    
                                    )
                                 
                              . On applying the Heaviside function to coordinates in the wrench, the resulting vector 
                                 
                                    (
                                    1
                                    ,
                                    0
                                    ,
                                    1
                                    ,
                                    1
                                    ,
                                    1
                                    ,
                                    0
                                    )
                                 
                               is mapped to the string 101110 with a decimal representation of (the bin index) 46.
                        
                        Fig. 3
                         shows a representation of points on a part surface labeled by color according to the bin index determined by the corresponding Plücker coordinates. Classification of points into bins creates a partition of the part surface that is used to guide the selection of a form closure configuration.

Once the sampled wrenches are hashed into appropriate bins, wrench vectors in each bin are sorted according to their 
                           
                              
                                 L
                              
                              
                                 2
                              
                           
                         norm. We will term the furthest vectors in each bin as maximal vectors; by construction there are at most sixty four maximal vectors in any sampled set in wrench space. Fig. 4
                         shows a qualitative comparison between two form closure configurations that are generated by choosing maximal and minimal vectors respectively. Maximal vectors are good candidates to construct a positive span of 
                           
                              
                                 R
                              
                              
                                 6
                              
                           
                         for they represent well spaced vectors with unique combination of signs in their Plücker coordinates, and have a non-empty intersection with the vertices of the convex hull 
                           
                              Hull
                           
                           
                              (
                              P
                              )
                           
                         of the set 
                           P
                         of sampled wrenches (see property ii in Section  3.1). They also produce large convex spans that provide better stability and resistance to external wrenches (see Section  3.2.3).

Using the reduced set 
                           M
                           ⊂
                           P
                         of maximal wrenches, form closure is accomplished if and only if there exists a combination of seven vectors in 
                           M
                         that constitute a positive span. To check the existence of a solution, it is sufficient to establish that the origin is contained within 
                           
                              Hull
                           
                           
                              (
                              M
                              )
                           
                        . Containment of the origin within the hull is equivalent to the condition that the nullspace of the matrix whose columns are the hull vertices contains a vector 
                           
                              x
                           
                         that consists of purely positive coefficients. Then, from property iv in Section  3.1, it is clear that 
                           
                              
                                 
                                    x
                                 
                              
                              
                                 ∥
                                 
                                    x
                                 
                                 
                                    
                                       ∥
                                    
                                    
                                       1
                                    
                                 
                              
                           
                         is going to yield coefficients that describe the origin as a convex combination of the maximal wrenches. We know 
                           M
                         has at most sixty four points (typically much fewer in practice) and therefore 
                           
                              x
                           
                         may be determined by computing the singular value decomposition of a 
                           6
                           ×
                           k
                         matrix, where 
                           k
                           ≤
                           64
                         indicates the cardinality of 
                           
                              Hull
                           
                           
                              (
                              M
                              )
                           
                        . If the origin is contained inside 
                           
                              Hull
                           
                           
                              (
                              M
                              )
                           
                         then there exists a simplex whose vertices are maximal wrenches in form closure. For example, Fig. 5
                         illustrates the convex hull of maximal wrenches of samples in a three dimensional wrench space.

Even with the dramatic reduction of points to search form closure there are still up to 
                           
                              
                                 
                                    64
                                 
                                 
                                    7
                                 
                              
                           
                         combinations of candidate form closure configurations. A positive span may be found by identifying seven vectors assembled into columns of a 6×7 wrench matrix whose nullspace consists of purely positive coefficients.

We first find six linearly independent maximal vectors 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    6
                                 
                              
                            by randomly sampling maximal vectors, such that the 6×6 matrix 
                              A
                            whose columns are the 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    i
                                 
                              
                            is non-singular. If 
                              A
                            is not singular, the remaining bins are iteratively searched to find a maximal vector 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    7
                                 
                              
                            such that the solution 
                              
                                 x
                              
                            to the linear system 
                              A
                              
                                 x
                              
                              =
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    7
                                 
                              
                            has purely negative coefficients  [26]. By a simple re-arrangement, it is seen that this condition is equivalent to 
                              
                                 
                                    Σ
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    7
                                 
                              
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    i
                                 
                              
                              =
                              0
                            implying the wrench matrix with columns 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    7
                                 
                              
                            has a nullspace with purely positive coefficients. When such a positive span is found, form closure is established. This algorithm is formalized in Algorithm 1.


                           
                              
                                 
                              
                           
                        

As an alternative to the randomized approach, we have also developed and implemented a systematic enumeration scheme for all possible form or force closures that only use maximal vectors. In addition to being eventually exhaustive and hence guaranteeing that a solution will be found if one exists, the enumeration is based on a search that deploys a heuristic that guides the search to try and find large convex spans (see Section  3.2.3). This search iteratively picks one maximal vector at a time by picking from bins that have not been considered yet, in each step preferring the wrench that has maximized the sum of 
                              
                                 
                                    L
                                 
                                 
                                    2
                                 
                              
                            norms from all previously selected wrenches. This process continues until six wrenches have been selected. For the seventh wrench vector, the search compares the possible sets of seven wrenches 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    i
                                 
                              
                            in terms of the minimal coefficient 
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                            among the solutions of 
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    7
                                 
                              
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    i
                                 
                              
                              =
                              0
                           . This coefficient has been shown to be an indicator of the grasp quality  [26]. This algorithm is formalized in Algorithm 2. After a first solution is returned, the search can continue to generate additional, inferior solutions (not shown in the algorithm).


                           
                              
                                 
                              
                           
                        

The convex span 
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    7
                                 
                              
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    i
                                 
                              
                            of the wrenches 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    i
                                 
                              
                            is a subset of the positive span where the 
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                            satisfy the constraint 
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                              =
                              1
                            and is indicative of the space of reaction forces that are resisted without tightening the clamps or fingers at contact locations. A larger convex span will therefore produce better fixtures, and the globally optimal convex span will consist of vertices on 
                              
                                 Hull
                              
                              
                                 (
                                 P
                                 )
                              
                           . In fact, grasp quality  [26,16] is often expressed as the radius of the maximally inscribed ball within the convex hull of the wrenches in form closure. Optimization algorithms to compute form closure [9,10,8] typically start with an initial configuration of wrenches that are pushed towards the vertices of 
                              
                                 Hull
                              
                              
                                 (
                                 P
                                 )
                              
                            in each iteration until a form closure configuration is found. Such algorithms define optimality in terms of convergence to a form closure configuration but often stop short of increasing the convex span. For any non-singular wrench matrix with columns 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    6
                                 
                              
                           , there are typically multiple choices of 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    7
                                 
                              
                            (among at most fifty eight maximal vectors) that construct a positive span. As an alternative heuristic to guide the selection of the seventh wrench in either algorithm, we may choose the simplex with maximum volume that contains the origin as the optimum grasp. The volume of a simplex in 
                              d
                            dimensions with vertices 
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 
                                    
                                       w
                                    
                                 
                                 
                                    d
                                    +
                                    1
                                 
                              
                            can be expressed as  [27]
                           
                              
                                 (3)
                                 
                                    V
                                    =
                                    ±
                                    
                                       
                                          1
                                       
                                       
                                          d
                                          !
                                       
                                    
                                    
                                       det
                                    
                                    
                                       [
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         w
                                                      
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                             
                                                …
                                             
                                             
                                                
                                                   
                                                      
                                                         w
                                                      
                                                   
                                                   
                                                      d
                                                      +
                                                      1
                                                   
                                                
                                             
                                          
                                          
                                             
                                                1
                                             
                                             
                                                …
                                             
                                             
                                                1
                                             
                                          
                                       
                                       ]
                                    
                                    .
                                 
                              
                            Maximizing the convex span of wrenches in a grasp is particularly important if the grasp is a force closure, i.e. only capable of resisting a bounded set of external wrenches. In practice, force closure is manifested either when the grasp relies on friction for stability to reduce the number of assembled clamps, or when the clamps cannot be arbitrarily tightened (to avoid part deformation). Force closure grasps may be computed in the same manner as form closure, with the understanding that the span of the wrenches is bounded. When frictional contact is assumed, the tangent forces exerted by a clamp are considered as candidate wrenches and at most four contacts required to solve form closure with friction. However, as contact wrenches or frictional forces cannot be scaled by arbitrary 
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                           , the positive span of the wrenches is limited and the grasp is in force closure. Thus maximizing the convex span of the wrenches increases the space of reaction forces and moments that may be used to balance external wrenches.

We now describe the selection of fixture components that are collision free both mutually and with respect to the part. Grasp locations computed as described in Section  3 are translated into a set of locators/clamps and assembled on a modular base plate. Solid models of the locators/clamps and base plate, typically in STL representation, are extracted from online fixture catalogs. Fixture assembly requires transforming the grasp locations into a filter that can be applied to the fixture catalog to extract properly sized clamps. The filter identifies dimensions of a feasible clamp, and ensures the clamp/locator can be positioned and oriented at the specified point while avoiding intersections with the part or with other clamps and support elements.

Fixture catalogs available on the web, for example in  [28], provide a standard ontology that enables efficient query driven search through multiple levels of detail of modular fixture elements. Therefore information in standard fixture catalogs may be tuned towards specific applications and stored in a data structure called a catalog representation. For example, a fixture catalog representation was created in  [29] for applying case based reasoning methods to fixture planning, where the intended function of case based reasoning influenced the proposed data structure. Therefore, for our purposes catalog representation is designed to be compatible with geometric reasoning algorithms for fixture selection and shop specific reasoning. At the very least, algorithms to determine accessible and collision free clamping requires the representation to provide information on the reachable workspace of the clamps, availability of components, compatibility with base fixtures, and the maximum clamping forces. This information is usually available, or may be derived, from standard catalogs.

This section provides a brief description of the most common fixture elements used in assembling a modular fixture, for the purposes of this paper. A base plate is designed to be mounted on a machine and provides the standard interface (using M-threads) for other modular fixture elements. Locators are cylindrical or spherical elements that are attached to the base plate to provide repeatable point contact for locating the part. An edge clamp or side clamp applies work holding forces on the side of a workpiece, i.e. such clamps are mounted to locate regions of the part with surface normal perpendicular to the setup and machining direction. A strap clamp applies a downward force parallel to the set up direction. The strap clamp can also be rotated on its side to apply forces similar to edge clamp, but with a different access direction. Finally, a riser block is used when the clamps cannot be directly attached to the base plate. A subset of these elements will be assigned to form closure points computed in the previous section to create the modular fixture configuration for the part. It is possible to constrain form closure locations to lie on pre-determined locatable regions on the part such as on the base, or on three perpendicular faces (in the 3–2–1 style of fixturing).

The local neighborhood of a point 
                           x
                         in a grasp is characterized to describe the dimensions of collision free clamps that locate 
                           x
                        , by describing a coordinate system positioned at 
                           x
                        . This local coordinate system for an edge clamp or a strap clamp rotated on its side is defined by the basis vectors representing the part surface normal, the setup direction, and the orthogonal vector to the surface normal and setup direction that defines a right handed coordinate system. Such a coordinate system is feasible because modular edge clamps typically locate parts perpendicular to the setup direction, and therefore in such cases the surface normal is necessarily orthogonal to the setup direction. The local coordinate system fixes the orientation of the clamping face since the chosen clamps do not have a rotational degree of freedom about the part surface normal. Note that in such cases, contact locations where the part surface normal is not perpendicular to the setup direction may be discarded in the preprocessing stage of fixture planning.

For strap clamps, the first basis vector is chosen from the orthogonal vectors that define the hole configuration in the base plate. The vector that minimizes the distance from the form closure point along that direction to the translational sweep of the part surface is chosen as a basis vector. The surface normal at the form closure point defines the second basis vector. The third vector is chosen appropriately to create a right handed coordinate system.

Ray tracing is used to determine the maximum collision free translations of a point contact using the basis vectors in the local coordinate system, by determining intersections with the part along each direction. Note that the preprocessing of candidate form closure locations as described in Section  2 automatically discards locations at holes and pockets, thus only retaining samples that are visible along the corresponding part surface normal. The collision free translations along vectors perpendicular to the surface normal provide upper bounds for the thickness and width of any feasible clamp, and also define a clearance space for clamps to approach and locate the part. This information is used to filter the set of available clamps in the catalog, to identify one that is applicable at the grasp location.

Parts are typically loaded/unloaded by translating along the set up direction for machining or inspection. To avoid collision during loading and unloading, we define the part envelope as the infinite translational sweep of the part along the setup direction. Similarly, to avoid collisions with the tool during machining, we define the restricted envelope as the infinite translational sweep of the removal volume along the setup direction. Clamps are required to be interference free with respect to both the part envelope and restricted envelope (see Fig. 2). For proper setup, a clamp is required to provide clearance along the access direction to avoid interference with the part envelope from the clamped position. For strap clamps, this is typically accomplished by rotating the clamp about the setup vector. For edge and side clamps the translational clearance distance is identified by the distance from the location to the part envelope along the surface normal.

In principle, the problem of locating clamps against the part may be formulated as a motion planning problem. However, this problem must be solved 
                           O
                           
                              (
                              m
                              n
                              )
                           
                         times for 
                           m
                         clamps and 
                           n
                         locations which is expensive, especially when we can use practical heuristics as suggested above to quickly determine parameters that define bounds on clamp dimensions.

The computed clearance distance is used to filter the catalog for usable clamps. The catalog is searched to first identify a feasible base plate based on the size of the part. The clamp filter defines the maximum width, thickness, and part clearance required at each form closure location. This parametric filter is used to identify feasible clamps in the catalog, without having to perform a full shape search. The choice of a specific clamp is not controlled in our current implementation, but additional criteria could be applied based on required functionality, for example, clamp availability, the smallest feasible clamp, etc. The height of the form closure location from the base is used to identify the number of required riser blocks required to position the clamp in space to access each location in a grasp.

Form and force closure computations are based on the assumption of point contact between clamps and the part. With the necessary clearance, a clamp face can translate locally on the plane defined by the contact location (we are assuming polyhedral parts) and surface normal while contacting the form closure point. This allows alignment of holes in the clamp to the holes defined in the modular base plate, such that the assembly can be held in place.

A homogeneous transformation is computed between the part and the base plate to align them for assembly. In a base plate, holes for attaching fixture components are spaced in a lattice such that the centers of the holes are identified with an integer grid. The origin of the hole grid is located at the center of the base plate. Let 
                           
                              x
                           
                         and 
                           
                              y
                           
                         be the basis vectors defining locations on the grid, and let 
                           s
                         be the grid spacing (of the holes) in the modular plate. The clamp needs to be located on a combination of holes such that the clamp assembly properly contacts the part. To auto-align holes on the clamp with the base plate we assume the width of clamps in the catalog is always greater than 
                           s
                         and the clearance along the vector orthogonal to the setup direction and part surface normal is greater than 
                           
                              
                                 s
                              
                              
                                 2
                              
                           
                        . In such a case it is straightforward to find nearest available grid location that the clamp can be positioned to locate the part at the form closure location.

The final interference check avoids clamp position overlaps. This is accomplished by the projection of the clamp outlines onto the base plane and performing interference checks in the plane. The filtering combined with interference tests ensures a collision free fixture layout with a stable form/force closure grasp.

@&#RESULTS@&#

Examples of automatically finding a fixture configuration for parts in various stages of a machining process plan are shown in Figs. 6–9
                     
                     
                     
                     . Each image shows a part in blue with a corresponding volume to be removed/inspected in green and shows an assembly of modular fixture elements that are collision free and provide sufficient clearance for part loading/unloading. Fig. 6 shows two distinct seven point form closure configurations (i.e. assuming frictionless contact) using the randomized algorithm and the heuristic search discussed in Sections  3.2.1 and 3.2.2 respectively.

The fixture locations in Figs. 7–9 were determined automatically using the randomized algorithm assuming form closure with friction, and modular components were chosen from a catalog of thirty fixture elements to implement the form closure. Computations were performed on a 64-bit machine with a dual core 3 GHz CPU and 8 GB RAM. The timing results in the captions demonstrate the speed of evaluation for form closure and selection of fixtures.

In addition, Figs. 6 and 10
                      show comparisons between the randomized and the heuristic search based approach to fixture synthesis. In both cases, we exercised the entire toolchain including modular fixture selection and collision checks. The results indicate that the heuristic used to guide the search is an effective means for finding good solutions quickly. In practice, the search based approach often requires significantly fewer attempts, meaning that the identified form closures were possible to implement using modular fixtures without collisions. Not shown here, but unsurprisingly the form closures produced by the search were also better in terms of the quality of the grasp, as measured by the value of the minimal coefficient in the kernel of the 6×7 matrix defined by the seven selected wrenches  [26]. This is expected, as the randomized approach does not optimize the selection of the first six wrenches, while the search based approach does. Overall we conclude from these results that a search based solution is better suited for the problem at hand in practice.

@&#CONCLUSIONS@&#

Automated fixture planning and configuration for realistic three dimensional parts in a manufacturing process has not been very well addressed to date. Efforts in computing grasps for dextrous manipulators have many similarities with fixture planning but do not take process planning constraints into account. In this paper, we presented a generate and test algorithm that configures a set of locations with guaranteed stability properties that may be fixtured with a user specified library of modular fixtures while obeying accessibility and collision constraints encountered in manufacturing process planning.

Using the principles of form and force closure as applied to robotic grasping, we demonstrated a novel algorithm to rapidly compute a set of clamping locations that ensure part stability under the application of external forces. Importantly, in robotic grasping the problem of finding stable or form closure grasps is often formulated in terms of computations with respect to the convex hull of wrenches in six dimensional space. We observed that the key requirement for stable grasping is determining wrenches with a positive span, which need not necessarily be computed in terms of the convex hull, and instead can be rapidly computed using a hashing scheme based on signs of Plücker coordinates of wrenches derived from sampled contact locations. We also demonstrated two fast algorithms to compute form closure configurations and showed that the convex span of the chosen wrenches may be maximized to provide grasps that resist large external wrenches.

The generated locations are tested for fixturability with a library of modular fixture elements, after which a collection of clamps from the catalog is automatically assembled to produce visual feedback. Qualitatively distinct fixtures are provided easily with the generate and test approach and therefore the presented work can be integrated into a larger manufacturing process planning framework that provides detailed feedback.

There are several opportunities to extend the work presented in this paper. For example, fixture planning can be made interactive by showing the partitions induced by the hashing scheme on the solid model and enabling users to pick wrenches directly from the part surface. The generated assemblies can also be used in conjunction with tool path generation and tolerance analysis to accurately outline process plans for manufacturing planning.

@&#ACKNOWLEDGMENTS@&#

Material within this technical publication is based upon the work supported by the Defense Advanced Research Projects Agency (DARPA) as part of a subcontract under The Applied Research Laboratory (ARL) at Penn State Prime Contract Number HR0011-12-C-0075. Any opinions, findings and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the official policy or position of the Department of Defense or the U.S. Government. Distribution Statement “A” (Approved for Public Release, Distribution Unlimited). The authors would also like to thank the anonymous reviewers for their comments.

@&#REFERENCES@&#

