@&#MAIN-TITLE@&#Robust decomposable Markov decision processes motivated by allocating school budgets

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We introduce and formalize the concept of robust, decomposable MDPs.


                        
                        
                           
                           We propose a tractable method to compute good policies in such MDPs.


                        
                        
                           
                           Funding policies from these MDPs outperform strategies based on a real-world policy.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Markov processes

Dynamic programming-optimal control

School funding

@&#ABSTRACT@&#


               
               
                  Motivated by an application to school funding, we introduce the notion of a robust decomposable Markov decision process (MDP). A robust decomposable MDP model applies to situations where several MDPs, with the transition probabilities in each only known through an uncertainty set, are coupled together by joint resource constraints. Robust decomposable MDPs are different than both decomposable MDPs, and robust MDPs and cannot be solved by a direct application of the solution methods from either of those areas. In fact, to the best of our knowledge, there is no known method to tractably compute optimal policies in robust, decomposable MDPs. We show how to tractably compute good policies for this model, and apply the derived method to a stylized school funding example.
               
            

@&#INTRODUCTION@&#

Allocation of school funding is critical to improving school performance. Unfortunately, there is no consensus on how this limited resource should be allocated. As such, the allocation of school funding is a recurring topic of political discussion (Shutt, 1979; Fensterwald, 2013; Blume, 2013; Garber, 1997). For example, the state of California passed an initiative in 2012 to raise taxes specifically to fund schools. In 2013, a major debate was how to allocate this schools funding: should it be allocated by population or should poorer schools receive more funding?

Motivated by allocating funding to school, in this paper we propose a new method of allocating finite resources, based on control theory. Our method extends previous work on using Markov decision processes (MDPs) for budget allocation. The main contributions of this paper are (1) to introduce the concept of robust, decomposable MDPs, (2) to propose a computationally tractable method of computing good policies in such MDPs and (3) to illustrate, through a stylized example, that funding allocation based on these MDPs outperforms strategies inspired by a current real-world school funding policy, No Child Left Behind.

For a school district composed of multiple schools, we would like to find a funding allocation policy that maximizes the total discounted expected reward over a finite planning horizon. Each school can be in one of a finite number of performance states—bad, good, excellent, etc.—and transitions between those states based on funding allocated by the school district. Given an allocation of funding, each school transitions independently between its performance states. The school district, does not know the exact transition probabilities for each school, but instead knows an uncertainty set within which the transition probabilities reside. Further, the school district has a finite budget to distribute between the schools. The funding allocation problem of the school district can be modeled as a large MDP, where a state is a vector of performance states for the individual schools; and the action set corresponds to a funding allocation. The school district’s funding allocation choice couples the transitions of the individual schools. We model and compute good funding allocation policies by decomposing the large school district MDP into smaller MDPs through a novel Lagrangian relaxation. Because both the transitions are only known through uncertainty sets in both the large and small MDPs, we call the resulting model a robust, decomposable MDP.

Because our model is motivated by school funding, for completeness, in Appendix E we discuss the existing literature on school funding and improving school performance. In Section 2 we motivate the robust, decomposable MDP model in words. Related control theory work is discussed in Section 3. Sections 4 and 5 mathematically present the model and show how it can tractably produce a funding policy. In Section 6 we compare the funding policy generated from our model to a stylized version of an existing policy, namely No Child Left Behind. We conclude the paper with some discussion in Section 7.

In this paper, we use a robust, decomposable, finite horizon MDP to compute funding distribution policies for a school district. While the tools derived are generally applicable to robust, decomposable, finite horizon MDPs, they are motivated by an application to school district funding. In this section, we begin with an English language description of the basic problem and motivation for the model we develop.

Consider a school district composed of a set of schools. While we use this phrasing, school district could be interpreted in a state-level sense, as a group of smaller districts. In either case, we are concerned with a large institution—which we call the school district—composed of smaller institutions—which we call the schools.

Each school has a proficiency level, which, in practice, is determined annually by the school’s students’ performance on a standardized exam. The school district wants to maximize the proficiency of its schools. The main tool the school district has to improve the proficiency of its schools is distributing a limited amount of funding amongst the schools. In this model we assume all schools have a base operating cost that they receive regardless of their performance, and thus we normalize that cost to zero. The funding allocated by our model is any additional funding a school receives to help improve its performance. Of course, not all schools are the same. Schools have varying numbers of students, and varying capabilities to effectively use allocated funding. The school district makes an annual decision on how to allocate its limited funding amongst the individual schools. Realistically, the school district can only make a funding allocation plan for a decade or so in the future.

Each school transitions into a state of higher or lower proficiency randomly, but the transition probabilities are based on the funding the school receives from the district. Unfortunately, it is impossible for the school district to know these transition probabilities—which depend on the school in question, its current proficiency state, and its level of funding. Even historical data on the school’s transitions would not help identify specific transition probabilities, since the situation at an individual school changes quickly, as compared to the annual funding decision cycle. Instead, the school district only has an uncertainty set—a range of possible transition probabilities—for the school.

We formalize the school district’s funding allocation problem into a mathematical model as follows. Each individual school can be modeled as an MDP, where the states describe the school’s proficiency, the actions describe the school’s funding level, and the rewards describe the benefit the school district receives from the school’s proficiency level. The rewards for each school capture the school’s importance to the district, which could, for example, be proportional to the number of students in the school. The exact transition probabilities for each school’s MDP are not known, but instead for each state action pair, we know an uncertainty set describing a set of possible transition probabilities. We term an individual school’s MDP as a little MDP.

The school district’s funding allocation problem is also an MDP. The school district’s MDP has states that are the cross product of the states of the individual schools. The individual schools MDPs are coupled by the joint funding allocation decision. The only actions available to the school district are those that satisfy the district’s common budget. But, given a distribution of the common funding, the transitions at each of the schools are independent. The school district has a finite horizon, about a decade, for which to plan funding allocation decisions. We term the school district’s MDP as the big MDP.

The proposed method answers the basic question: How should the school district distribute its limited funding to maximize the discounted total proficiency of its schools over its planning horizon? We model this decision using a robust, decomposable, finite horizon MDP. The term robust comes from the fact that the transition probabilities for each school are not known, but are only known through uncertainty sets. The term decomposable comes from the fact that the big MDP is made of a cross product of little MDPs, coupled only by the limited funding to take actions across them. The term finite horizon comes from the approximately decade long planning period for the district. We formalize the robust, decomposable, finite horizon MDP with mathematical notation in Section 4. In the next section, we discuss some related control theory work.

@&#RELATED WORK@&#

Markov decision processes have provided a powerful modeling tool in solving problems related to planning and decision-making under uncertainty, see (Puterman, 2005). For example recent applications of MDPs include: credit card profitability (So & Thomas, 2011), transshipment between warehouses (Seidscher & Minner, 2013), infectious disease spread (Yaesoubi & Cohen, 2011), air-cargo revenue management (Han, Tang, & Huang, 2010), etc. However, often in practice an MDP model ends up with very large state and action spaces. The computational difficulties in analyzing MDPs with high dimensionality stimulated research on developing techniques to deal with this problem. Typical approaches to address high dimensionality in MDPs are: function approximation, reachability considerations and aggregation techniques (Meuleau et al., 1998; Powell, 2007).


                     Nilim and Ghaoui (2005) study the sensitivity of the optimal solutions to Markov decision problems with respect to the state transition probabilities. Typically, in practice, the MDP transition probabilities are unknown and the errors in their estimations often impose limitations in using MDPs as a modeling tool. The authors consider a finite-state, finite-action MDP, and model the uncertainty in the transition matrices by using uncertainty sets. They successfully use a modification of the classical dynamic programming algorithm to solve this robust MDP problem.


                     Adelman and Mersereau (2008) focus on stochastic dynamic programming problems that are suitable for relaxation via decomposition. The problems they consider consist of a number of subproblems that are independent of each other except for a set of coupling constraints on the action space. They use Lagrangian relaxation and linear programming to approximate the dynamic programming formulation of the problem and provide comparisons between the two relaxations and the optimal solution. Also, they conclude with a useful discussion on how to select the appropriate relaxation.

The model we develop, while it has pieces from both Adelman and Mersereau and Nilim and El Ghaoui, is novel. Specifically, solution methods for our model do not follow directly from either paper. This is demonstrated by the fact that the big MDP is not solvable by standard MDP methods, even using an exponentially sized state space, as the corresponding big MDP of Adelman and Mersereau. Moreover, it cannot be solved by the methods of Nilim and El Ghaoui, because the uncertainty sets we address have fundamentally different structure than their robust MDPs. We provide additional discussion on this in Appendix B.


                     Sisikoglu, Epelman, and Smith (2011) develop a learning algorithm for solving a discounted homogeneous MDP with unknown transition probabilities. These transition probabilities are learned either through simulation or direct observation of the system in real time. The authors compare the performance of their algorithm with other traditional learning methods.


                     Meuleau et al. (1998) focus on a technique for computing approximately optimal solutions to stochastic resource allocation problems modeled as MDPs with very large state and action spaces. They assume that the problems are composed of multiple tasks whose utilities are independent, and that the actions taken with respect to a task do not influence the status of any other task, i.e., each task can be modeled as an MDP. Overall, the tasks’ MDPs are weakly coupled by resource constraints: actions selected for one MDP restrict the actions available to others. The authors propose heuristic techniques for dealing with several classes of constraints that use the solutions for individual MDPs to construct an approximate global solution.


                     Glazebrook, Hodge, and Kirkbride (2011) consider the allocation of a divisible resource, such as manpower, money, or equipment, to a collection of tasks requiring it. The authors develop a notion of indexability for problems of dynamic resource allocation where the resource concerned may be assigned more flexibility than is allowed, for example, in classical multi-armed bandits. In contrast to the previous work listed in the above paragraphs, our model does not assume that we know the transition probabilities, or have access to a simulator for the MDP. Instead, our model assumes we know a range of possible values, the uncertainty set, for the transition probabilities.

We are not the first to use MDPs in constrained budget allocation. MDPs have been used as a modeling tool for solving budget allocation problems in many different applications areas. We review a few of these applications below.


                     Zhang (2006) considers the budget allocation problem for a building facilities management system. The aim of his optimization model, based on an MDP, is to maximize the overall performance of the building network over the planned time horizon by optimizing the set of annual management actions on all building elements. The optimization is subject to various constraints, such as annual budget and minimum performance requirement for a building or system.


                     Parvin, Goel, and Gautam (2012) develop a model for trading off resources in testing, prevention, and cure of two-stage contagious diseases, such as AIDS and cervical cancer. Under a constrained budget, policy makers are faced with the decision of how to allocate budget for prevention (via vaccinations), subsidized treatment, and examination to detect the presence of initial stages of the contagious disease. Their model, based on an MDP, aims to facilitate this decision-making exercise.


                     Tirenni et al. (2007) develop a decision-support system that offers a scientific framework for optimal planning and budgeting of targeted marketing campaigns to maximize return on marketing investments. MDPs are used to model customer dynamics and to find optimal marketing policies that maximize the value generated by a customer over a given time horizon. Lifetime value optimization is achieved through dynamic programming algorithms that identify which marketing actions (cross-selling, up-selling, and loyalty marketing campaigns), transition customers to better value and loyalty states. They illustrate their approach with a case study, aiming to optimize marketing planning and budgeting for Finnair’s frequent-flyer program. In contrast to the previous work on MDPs in budget allocation, we consider a problem where transition probabilities are known only through an uncertainty set.

In this section we introduce the mathematical formulation of the model described in Section 2. We formally define the notation and specify a formulation for a robust, decomposable, Markov decision process. While our discussion focuses on a finite horizon problem due to the application of funding allocation in a school district, the results and notation can be extended to an infinite horizon discounted case.

For a vector a indexed by elements of a set A, we refer to the coordinate corresponding to 
                           
                              i
                              ∈
                              A
                           
                         with 
                           
                              a
                              [
                              i
                              ]
                           
                        . We use 
                           
                              〈
                              ·
                              
                                 
                                    〉
                                 
                                 
                                    i
                                    ∈
                                    A
                                 
                              
                           
                         to mean a sequence, with one element for each element i in the set A.

The set I indexes all the little MDPs, each corresponding to an individual school. In the remainder of the paragraph we define notation for little MDP i, for 
                           
                              i
                              ∈
                              I
                           
                        . The set of possible states is 
                           
                              
                                 
                                    S
                                 
                                 
                                    i
                                 
                              
                           
                         and the set of actions in state 
                           
                              s
                              ∈
                              
                                 
                                    S
                                 
                                 
                                    i
                                 
                              
                           
                         is 
                           
                              
                                 
                                    A
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              )
                           
                        . The reward for taking action 
                           
                              a
                              ∈
                              
                                 
                                    A
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              )
                           
                         in state 
                           
                              s
                              ∈
                              
                                 
                                    S
                                 
                                 
                                    i
                                 
                              
                           
                         is 
                           
                              
                                 
                                    r
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              ,
                              a
                              )
                           
                        . There is a cost associated with taking action a in state s in period t denoted by 
                           
                              
                                 
                                    C
                                 
                                 
                                    t
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              ,
                              a
                              )
                              ∈
                              
                                 
                                    R
                                 
                                 
                                    m
                                 
                              
                           
                        . The cost is a vector over m resources that may be allocated to the little MDP; in the schools example the resources may be funding, man hours, staff, etc. The transition probability of moving to state u is 
                           
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              (
                              u
                              |
                              s
                              ,
                              a
                              )
                           
                        , given current state and action pair 
                           
                              (
                              s
                              ,
                              a
                              )
                           
                        . The transition probability is unknown, and is defined by the uncertainty set 
                           
                              
                                 
                                    P
                                 
                                 
                                    s
                                    ,
                                    a
                                 
                                 
                                    i
                                 
                              
                              ⊂
                              
                                 
                                    R
                                 
                                 
                                    |
                                    
                                       
                                          S
                                       
                                       
                                          i
                                       
                                    
                                    |
                                 
                              
                           
                        . When we consider a numerical example, we will consider a polyhedral set 
                           
                              
                                 
                                    P
                                 
                                 
                                    s
                                    ,
                                    a
                                 
                                 
                                    i
                                 
                              
                           
                        , however we do not put these restrictions in the proofs and exposition below. The only requirement on the uncertainty sets is that we are able to solve an optimization problem with a linear objective where the feasibility set is 
                           
                              
                                 
                                    P
                                 
                                 
                                    s
                                    ,
                                    a
                                 
                                 
                                    i
                                 
                              
                           
                        . Practically, the uncertainty sets would be delivered through discussions with a subject matter expert.

The big MDP is composed of a set of little MDPs. Intuitively the only link between the little MDPs is the budget allocation decision, and otherwise they are independent. Formally, the state space of the big MDP, denoted by 
                           
                              S
                              =
                              
                                 
                                    ⊗
                                 
                                 
                                    i
                                    ∈
                                    I
                                 
                              
                              
                                 
                                    S
                                 
                                 
                                    i
                                 
                              
                           
                        , is the Cartesian product of the states of the little MDPs. A vector 
                           
                              s
                              ∈
                              S
                           
                         is indexed by the set I, and we denote the state of little MDP i in the vector 
                           
                              s
                           
                         as 
                           
                              s
                              [
                              i
                              ]
                           
                        . There is a finite budget, 
                           
                              
                                 
                                    b
                                 
                                 
                                    t
                                 
                              
                              ∈
                              
                                 
                                    R
                                 
                                 
                                    m
                                 
                              
                           
                        , for planning period t. The budget is a vector over m resources that may be allocated to each little MDP. The set of actions for state 
                           
                              s
                           
                         in period t is:
                           
                              
                                 
                                    
                                       
                                          
                                             A
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       t
                                    
                                 
                                 (
                                 s
                                 )
                                 =
                                 
                                    
                                       
                                          a
                                          ∈
                                          
                                             
                                                
                                                   ⊗
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                A
                                             
                                             
                                                i
                                             
                                          
                                          (
                                          s
                                          [
                                          i
                                          ]
                                          )
                                          |
                                          
                                             
                                                C
                                             
                                             
                                                t
                                             
                                          
                                          (
                                          s
                                          ,
                                          a
                                          )
                                          ⩽
                                          
                                             
                                                b
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    C
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              ,
                              a
                              )
                              =
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    ∈
                                    I
                                 
                              
                              
                                 
                                    C
                                 
                                 
                                    t
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              [
                              i
                              ]
                              ,
                              a
                              [
                              i
                              ]
                              )
                           
                        . Intuitively the only actions available in the big MDP are those within budget. We also define an unrestricted action set as:
                           
                              
                                 A
                                 (
                                 s
                                 )
                                 =
                                 
                                    
                                       
                                          a
                                          ∈
                                          
                                             
                                                
                                                   ⊗
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                A
                                             
                                             
                                                i
                                             
                                          
                                          (
                                          s
                                          [
                                          i
                                          ]
                                          )
                                       
                                    
                                 
                                 .
                              
                           
                        The unrestricted action set may include actions that are budget infeasible in some states. We define a reward for each state action pair, 
                           
                              s
                              ∈
                              S
                              ,
                              a
                              ∈
                              A
                              (
                              s
                              )
                           
                        , as 
                           
                              r
                              (
                              s
                              ,
                              a
                              )
                              =
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    ∈
                                    I
                                 
                              
                              
                                 
                                    r
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              [
                              i
                              ]
                              ,
                              a
                              [
                              i
                              ]
                              )
                           
                        . Intuitively, the reward is additive across little MDPs.

The set of possible transition probabilities for the big MDP in state 
                           
                              s
                              ∈
                              S
                           
                         given action 
                           
                              a
                              ∈
                              A
                              (
                              s
                              )
                           
                         is defined as 
                           
                              
                                 
                                    P
                                 
                                 
                                    s
                                    ,
                                    a
                                 
                              
                           
                        . Formally, we have:
                           
                              
                                 
                                    
                                       P
                                    
                                    
                                       s
                                       ,
                                       a
                                    
                                 
                                 =
                                 
                                    
                                       
                                          p
                                          ∈
                                          
                                             
                                                R
                                             
                                             
                                                |
                                                S
                                                |
                                             
                                          
                                          |
                                          p
                                          =
                                          〈
                                          
                                             
                                                
                                                   ∏
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                          [
                                          u
                                          [
                                          i
                                          ]
                                          ]
                                          
                                             
                                                〉
                                             
                                             
                                                u
                                                ∈
                                                S
                                             
                                          
                                          
                                          where
                                          
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                          ∈
                                          
                                             
                                                P
                                             
                                             
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                             
                                             
                                                i
                                             
                                          
                                          
                                          for
                                          
                                          all
                                          
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 .
                              
                           
                        Intuitively, an element in 
                           
                              
                                 
                                    P
                                 
                                 
                                    s
                                    ,
                                    a
                                 
                              
                           
                         is a vector in 
                           
                              
                                 
                                    R
                                 
                                 
                                    |
                                    S
                                    |
                                 
                              
                           
                         that gives the probabilities of transitioning to each state 
                           
                              u
                              ∈
                              S
                           
                        . If little MDP i’s transition probabilities are 
                           
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                           
                        , then the probability to transition to state 
                           
                              u
                              ∈
                              S
                           
                         is the product of the probabilities that each little MDP transitions to state 
                           
                              u
                              [
                              i
                              ]
                              ,
                              
                                 
                                    ∏
                                 
                                 
                                    i
                                    ∈
                                    I
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              [
                              u
                              [
                              i
                              ]
                              ]
                           
                        . This structure is related to the rectangularity assumption of Nilim and Ghaoui (2005). In other words, given a 
                           
                              s
                           
                         and 
                           
                              a
                           
                         the little MDPs transition independently.

Solving the robust big MDP—computing the value for each big MDP state using some variant of back-propagation—involves solving complex non-linear, non-convex optimization problems to find the worst-case transition probabilities. To our knowledge no tractable algorithm exists to solve such problems exactly. We discuss a direct solution approach further in Appendix B. Therefore, in this section, we take an alternate solution approach based on Lagrangian relaxation.

We build an approximation for the value function of the big MDP, and discuss using that approximation to compute policies. The robust MDP Bellman recursion (Nilim & Ghaoui, 2005) for the big MDP in state 
                           
                              s
                           
                         at time period 
                           
                              t
                              -
                              1
                           
                         is:
                           
                              
                                 
                                    
                                       V
                                    
                                    
                                       t
                                       -
                                       1
                                    
                                 
                                 (
                                 s
                                 )
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          a
                                          ∈
                                          
                                             
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      ‾
                                                   
                                                
                                             
                                             
                                                t
                                             
                                          
                                          (
                                          s
                                          )
                                       
                                    
                                 
                                 
                                    
                                       
                                          r
                                          (
                                          s
                                          ,
                                          a
                                          )
                                          +
                                          β
                                          
                                             
                                                
                                                   min
                                                
                                                
                                                   p
                                                   ∈
                                                   
                                                      
                                                         P
                                                      
                                                      
                                                         s
                                                         ,
                                                         a
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   u
                                                   ∈
                                                   S
                                                
                                             
                                          
                                          p
                                          [
                                          u
                                          ]
                                          
                                             
                                                V
                                             
                                             
                                                t
                                             
                                          
                                          (
                                          u
                                          )
                                       
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    V
                                 
                                 
                                    t
                                    -
                                    1
                                 
                              
                              (
                              s
                              )
                           
                         is the value of state 
                           
                              s
                           
                         in time period 
                           
                              t
                              -
                              1
                           
                        . We also assume that at the end of the planning horizon 
                           
                              t
                              =
                              T
                           
                         the value function is given and decomposes, 
                           
                              
                                 
                                    V
                                 
                                 
                                    T
                                 
                              
                              (
                              u
                              )
                              =
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    ∈
                                    I
                                 
                              
                              
                                 
                                    V
                                 
                                 
                                    T
                                 
                                 
                                    i
                                 
                              
                              (
                              u
                              [
                              i
                              ]
                              )
                           
                        , where 
                           
                              
                                 
                                    V
                                 
                                 
                                    T
                                 
                                 
                                    i
                                 
                              
                              (
                              u
                              [
                              i
                              ]
                              )
                           
                         is the value of the little MDP i in state 
                           
                              u
                              [
                              i
                              ]
                           
                         in period T. The robust Bellman recursion differs from the standard Bellman recursion (Puterman, 2005) because instead of taking the expectation with respect to known transition probabilities, it takes the expectation with respect to worst case transition probabilities within the uncertainty set, 
                           
                              
                                 
                                    P
                                 
                                 
                                    s
                                    ,
                                    a
                                 
                              
                           
                        , defined for each state action pair. The correctness of the robust Bellman recursion is established by Nilim and Ghaoui (2005). The above recursion uses the restricted action set 
                           
                              
                                 
                                    
                                       
                                          A
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                           
                        . If instead the recursion used the unrestricted action set, 
                           
                              A
                              (
                              s
                              )
                           
                        , and the value function 
                           
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                           
                         split into a sum of functions, one for each state of each little MDP, then the recursion would decompose into 
                           
                              |
                              I
                              |
                           
                         separate recursions, one for each little MDP. Such a decomposition is carried out by Adelman and Mersereau (2008) for weakly coupled, but not robust, MDPs. The advantage of the decomposition is an exponential reduction in the number of value function values that require computation. For example, if the big MDP consists of 10 little MDPs, each with five states, then prior to decomposition we require 
                           
                              
                                 
                                    5
                                 
                                 
                                    10
                                 
                              
                           
                         value function computations, while with decomposition we require only 
                           
                              5
                              ×
                              10
                              =
                              50
                           
                         value function computations.

To facilitate decomposition, we perform a Lagrangian relaxation on the coupling budget constraints, 
                           
                              
                                 
                                    C
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              ,
                              a
                              )
                              ⩽
                              
                                 
                                    b
                                 
                                 
                                    t
                                 
                              
                           
                        , of the big MDP. An alternate, approximate dynamic programming (ADP), approach is discussed in Appendix A. We consider the following robust Lagrangian relaxation of the robust Bellman recursion above:
                           
                              (1)
                              
                                 
                                    
                                       V
                                    
                                    
                                       t
                                       -
                                       1
                                    
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                       
                                    
                                 
                                 (
                                 s
                                 )
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          a
                                          ∈
                                          A
                                          (
                                          s
                                          )
                                       
                                    
                                 
                                 
                                    
                                       
                                          r
                                          (
                                          s
                                          ,
                                          a
                                          )
                                          +
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                                -
                                                1
                                             
                                          
                                          ·
                                          (
                                          
                                             
                                                b
                                             
                                             
                                                t
                                                -
                                                1
                                             
                                          
                                          -
                                          
                                             
                                                C
                                             
                                             
                                                t
                                                -
                                                1
                                             
                                          
                                          (
                                          s
                                          ,
                                          a
                                          )
                                          )
                                          +
                                          β
                                          
                                             
                                                
                                                   min
                                                
                                                
                                                   p
                                                   ∈
                                                   
                                                      
                                                         P
                                                      
                                                      
                                                         s
                                                         ,
                                                         a
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   u
                                                   ∈
                                                   S
                                                
                                             
                                          
                                          p
                                          [
                                          u
                                          ]
                                          
                                             
                                                V
                                             
                                             
                                                t
                                             
                                             
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                   
                                                
                                             
                                          
                                          (
                                          u
                                          )
                                       
                                    
                                 
                                 .
                              
                           
                        Intuitively, we now consider unrestricted action set, 
                           
                              A
                              (
                              s
                              )
                           
                        , but penalize actions that violate the budget constraints using the Lagrange multiplier vector, 
                           
                              
                                 
                                    λ
                                 
                                 
                                    t
                                 
                              
                           
                        . We still have to show that the value function, 
                           
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          t
                                       
                                    
                                 
                              
                              (
                              s
                              )
                           
                        , decomposes into a sum of value functions, one for each little MDP, and that the Lagrangian relaxation gives an upper bound on the original value function, 
                           
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                           
                        .


                        Lemma 4.1 shows how to decompose (1) into separate optimization problems over the little MDPs. To facilitate this lemma, the assumption that the big MDP value function is decomposable at 
                           
                              t
                              =
                              T
                           
                         is key. We also set 
                           
                              
                                 
                                    V
                                 
                                 
                                    T
                                 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          T
                                       
                                    
                                 
                              
                              (
                              s
                              )
                              =
                              
                                 
                                    V
                                 
                                 
                                    T
                                 
                              
                              (
                              u
                              )
                           
                         and 
                           
                              
                                 
                                    V
                                 
                                 
                                    T
                                 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          T
                                       
                                    
                                    ,
                                    i
                                 
                              
                              (
                              s
                              )
                              =
                              
                                 
                                    V
                                 
                                 
                                    T
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              )
                              
                              ∀
                              i
                              ∈
                              I
                           
                        , setting the value functions and Lagrangian approximation equal at the final period, T.
                           Lemma 4.1
                           
                              
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             V
                                          
                                          
                                             t
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                
                                             
                                             ,
                                             i
                                          
                                       
                                       (
                                       s
                                       [
                                       i
                                       ]
                                       )
                                    
                                 
                              
                              for t from 1 to T, where
                              
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                             ,
                                             i
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                             ·
                                             
                                                
                                                   b
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                          
                                             |
                                             I
                                             |
                                          
                                       
                                       +
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                -
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                ·
                                                
                                                   
                                                      C
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         u
                                                         ∈
                                                         
                                                            
                                                               S
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      p
                                                   
                                                   
                                                      i
                                                   
                                                
                                                [
                                                u
                                                ]
                                                
                                                   
                                                      V
                                                   
                                                   
                                                      t
                                                   
                                                   
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            t
                                                         
                                                      
                                                      ,
                                                      i
                                                   
                                                
                                                (
                                                u
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           

We proceed by induction on t. The claim is true for 
                                 
                                    t
                                    =
                                    T
                                 
                               by the assumption on the form of 
                                 
                                    
                                       
                                          V
                                       
                                       
                                          T
                                       
                                    
                                    (
                                    u
                                    )
                                 
                              . We assume that the claim is true for t and prove it for 
                                 
                                    t
                                    -
                                    1
                                 
                              . We start with the definition of the robust Lagrangian Bellman recursion:
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                r
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                +
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                ·
                                                (
                                                
                                                   
                                                      b
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                -
                                                
                                                   
                                                      C
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                )
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         u
                                                         ∈
                                                         S
                                                      
                                                   
                                                
                                                p
                                                [
                                                u
                                                ]
                                                
                                                   
                                                      V
                                                   
                                                   
                                                      t
                                                   
                                                   
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            t
                                                         
                                                      
                                                   
                                                
                                                (
                                                u
                                                )
                                             
                                          
                                       
                                       .
                                    
                                 
                              Substituting the definitions of 
                                 
                                    r
                                    (
                                    s
                                    ,
                                    a
                                    )
                                 
                               and 
                                 
                                    
                                       
                                          C
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                    
                                    (
                                    s
                                    ,
                                    a
                                    )
                                 
                              , and distributing and moving summations we have:
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                                )
                                                +
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                               ·
                                                               
                                                                  
                                                                     b
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                            
                                                            
                                                               |
                                                               I
                                                               |
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         u
                                                         ∈
                                                         S
                                                      
                                                   
                                                
                                                p
                                                [
                                                u
                                                ]
                                                
                                                   
                                                      V
                                                   
                                                   
                                                      t
                                                   
                                                   
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            t
                                                         
                                                      
                                                   
                                                
                                                (
                                                u
                                                )
                                             
                                          
                                       
                                       .
                                    
                                 
                              Applying the induction hypothesis and the definition of vectors in 
                                 
                                    
                                       
                                          P
                                       
                                       
                                          s
                                          ,
                                          a
                                       
                                    
                                 
                               gives:
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                                )
                                                +
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                               ·
                                                               
                                                                  
                                                                     b
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                            
                                                            
                                                               |
                                                               I
                                                               |
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         u
                                                         ∈
                                                         S
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∏
                                                               
                                                               
                                                                  i
                                                                  ∈
                                                                  I
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         [
                                                         u
                                                         [
                                                         i
                                                         ]
                                                         ]
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  ∈
                                                                  I
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               V
                                                            
                                                            
                                                               t
                                                            
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                  
                                                               
                                                               ,
                                                               i
                                                            
                                                         
                                                         (
                                                         u
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              By reordering the summation and product within the minimization gives:
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                                )
                                                +
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                               ·
                                                               
                                                                  
                                                                     b
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                            
                                                            
                                                               |
                                                               I
                                                               |
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  ∈
                                                                  I
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  u
                                                                  ∈
                                                                  S
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               V
                                                            
                                                            
                                                               t
                                                            
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                  
                                                               
                                                               ,
                                                               i
                                                            
                                                         
                                                         (
                                                         u
                                                         [
                                                         i
                                                         ]
                                                         )
                                                         
                                                            
                                                               
                                                                  ∏
                                                               
                                                               
                                                                  j
                                                                  ∈
                                                                  I
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               j
                                                            
                                                         
                                                         [
                                                         u
                                                         [
                                                         j
                                                         ]
                                                         ]
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              We define 
                                 
                                    
                                       
                                          S
                                       
                                       
                                          -
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          ⊗
                                       
                                       
                                          j
                                          ∈
                                          I
                                          -
                                          i
                                       
                                    
                                    
                                       
                                          S
                                       
                                       
                                          j
                                       
                                    
                                 
                              , implying that 
                                 
                                    S
                                    =
                                    
                                       
                                          S
                                       
                                       
                                          i
                                       
                                    
                                    ⊗
                                    
                                       
                                          S
                                       
                                       
                                          -
                                          i
                                       
                                    
                                 
                              , and reorder summations further to get
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                                )
                                                +
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                               ·
                                                               
                                                                  
                                                                     b
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                            
                                                            
                                                               |
                                                               I
                                                               |
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  ∈
                                                                  I
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  s
                                                                  ∈
                                                                  
                                                                     
                                                                        S
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               V
                                                            
                                                            
                                                               t
                                                            
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                  
                                                               
                                                               ,
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         )
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         [
                                                         s
                                                         ]
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  w
                                                                  ∈
                                                                  
                                                                     
                                                                        S
                                                                     
                                                                     
                                                                        -
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  ∏
                                                               
                                                               
                                                                  j
                                                                  ∈
                                                                  I
                                                                  -
                                                                  i
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               j
                                                            
                                                         
                                                         [
                                                         w
                                                         [
                                                         j
                                                         ]
                                                         ]
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              We use the fact that 
                                 
                                    1
                                    =
                                    
                                       
                                          ∑
                                       
                                       
                                          w
                                          ∈
                                          
                                             
                                                S
                                             
                                             
                                                -
                                                i
                                             
                                          
                                       
                                    
                                    
                                       
                                          ∏
                                       
                                       
                                          j
                                          ∈
                                          I
                                          -
                                          i
                                       
                                    
                                    
                                       
                                          p
                                       
                                       
                                          j
                                       
                                    
                                    [
                                    w
                                    [
                                    j
                                    ]
                                    ]
                                 
                               to get
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                                )
                                                +
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                               ·
                                                               
                                                                  
                                                                     b
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                            
                                                            
                                                               |
                                                               I
                                                               |
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  ∈
                                                                  I
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  s
                                                                  ∈
                                                                  
                                                                     
                                                                        S
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               V
                                                            
                                                            
                                                               t
                                                            
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                  
                                                               
                                                               ,
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         )
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         [
                                                         s
                                                         ]
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              From the definition of 
                                 
                                    
                                       
                                          P
                                       
                                       
                                          s
                                          ,
                                          a
                                       
                                    
                                 
                               we have
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                                )
                                                +
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                               ·
                                                               
                                                                  
                                                                     b
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                            
                                                            
                                                               |
                                                               I
                                                               |
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               [
                                                               i
                                                               ]
                                                               ,
                                                               a
                                                               [
                                                               i
                                                               ]
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         ,
                                                         ∀
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  i
                                                                  ∈
                                                                  I
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  s
                                                                  ∈
                                                                  
                                                                     
                                                                        S
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               V
                                                            
                                                            
                                                               t
                                                            
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                  
                                                               
                                                               ,
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         )
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         [
                                                         s
                                                         ]
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              The minimization problem inside the recursion has an objective function that separates into one term for each little MDP 
                                 
                                    i
                                    ∈
                                    I
                                 
                              . In addition, the definition of 
                                 
                                    p
                                    ∈
                                    
                                       
                                          P
                                       
                                       
                                          s
                                          ,
                                          a
                                       
                                    
                                 
                               allows for an independent choice for each 
                                 
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                    
                                    ∈
                                    
                                       
                                          P
                                       
                                       
                                          s
                                          [
                                          i
                                          ]
                                          ,
                                          a
                                          [
                                          i
                                          ]
                                       
                                       
                                          i
                                       
                                    
                                 
                              . These facts imply that the inner minimization problem reduces to a sum of minimization problems and we have
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                                )
                                                +
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                               ·
                                                               
                                                                  
                                                                     b
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                            
                                                            
                                                               |
                                                               I
                                                               |
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                +
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               [
                                                               i
                                                               ]
                                                               ,
                                                               a
                                                               [
                                                               i
                                                               ]
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  s
                                                                  ∈
                                                                  
                                                                     
                                                                        S
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               V
                                                            
                                                            
                                                               t
                                                            
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                  
                                                               
                                                               ,
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         )
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         [
                                                         s
                                                         ]
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              Now the outer maximization problem has an objective that is a sum with one term for each little MDP, and it is over an unrestricted action set, giving independent choice of action in each little MDP. Thus the outer maximization problem reduces to a sum of maximization problems and we have
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                ,
                                                a
                                                [
                                                i
                                                ]
                                                )
                                                +
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                               ·
                                                               
                                                                  
                                                                     b
                                                                  
                                                                  
                                                                     t
                                                                     -
                                                                     1
                                                                  
                                                               
                                                            
                                                            
                                                               |
                                                               I
                                                               |
                                                            
                                                         
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               [
                                                               i
                                                               ]
                                                               ,
                                                               a
                                                               [
                                                               i
                                                               ]
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ∑
                                                               
                                                               
                                                                  s
                                                                  ∈
                                                                  
                                                                     
                                                                        S
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               V
                                                            
                                                            
                                                               t
                                                            
                                                            
                                                               
                                                                  
                                                                     λ
                                                                  
                                                                  
                                                                     t
                                                                  
                                                               
                                                               ,
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         )
                                                         
                                                            
                                                               p
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         [
                                                         s
                                                         ]
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              Taking out constant terms from the outer maximization we have
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            t
                                                            -
                                                            1
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            b
                                                         
                                                         
                                                            t
                                                            -
                                                            1
                                                         
                                                      
                                                   
                                                   
                                                      |
                                                      I
                                                      |
                                                   
                                                
                                                +
                                                
                                                   
                                                      
                                                         max
                                                      
                                                      
                                                         a
                                                         ∈
                                                         
                                                            
                                                               A
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         )
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               r
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                         -
                                                         
                                                            
                                                               λ
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                         
                                                         ·
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               t
                                                               -
                                                               1
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         (
                                                         s
                                                         [
                                                         i
                                                         ]
                                                         ,
                                                         a
                                                         [
                                                         i
                                                         ]
                                                         )
                                                         +
                                                         β
                                                         
                                                            
                                                               
                                                                  min
                                                               
                                                               
                                                                  
                                                                     
                                                                        p
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                                  ∈
                                                                  
                                                                     
                                                                        P
                                                                     
                                                                     
                                                                        s
                                                                        [
                                                                        i
                                                                        ]
                                                                        ,
                                                                        a
                                                                        [
                                                                        i
                                                                        ]
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           ∑
                                                                        
                                                                        
                                                                           s
                                                                           ∈
                                                                           
                                                                              
                                                                                 S
                                                                              
                                                                              
                                                                                 i
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        V
                                                                     
                                                                     
                                                                        t
                                                                     
                                                                     
                                                                        
                                                                           
                                                                              λ
                                                                           
                                                                           
                                                                              t
                                                                           
                                                                        
                                                                        ,
                                                                        i
                                                                     
                                                                  
                                                                  (
                                                                  s
                                                                  )
                                                                  
                                                                     
                                                                        p
                                                                     
                                                                     
                                                                        i
                                                                     
                                                                  
                                                                  [
                                                                  s
                                                                  ]
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       .
                                    
                                 
                              Substituting the definition of 
                                 
                                    
                                       
                                          V
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                                -
                                                1
                                             
                                          
                                          ,
                                          i
                                       
                                    
                                    (
                                    s
                                    [
                                    i
                                    ]
                                    )
                                 
                              , we have the statement of the lemma
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       =
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                             ,
                                             i
                                          
                                       
                                       (
                                       s
                                       [
                                       i
                                       ]
                                       )
                                       .
                                       
                                       □
                                    
                                 
                              
                           


                        Lemma 4.2 shows that 
                           
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          t
                                       
                                    
                                 
                              
                              (
                              s
                              )
                              ⩾
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                           
                         for all 
                           
                              s
                              ∈
                              S
                              ,
                              t
                              =
                              1
                              ,
                              …
                              ,
                              T
                           
                        , showing that the Lagrangian relaxation does indeed provide an upper bound on the robust MDP value function.
                           Lemma 4.2
                           
                              For any 
                              
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          t
                                       
                                    
                                    ⩾
                                    0
                                    ,
                                    
                                       
                                          V
                                       
                                       
                                          t
                                       
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                    (
                                    s
                                    )
                                    ⩾
                                    
                                       
                                          V
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    s
                                    )
                                 
                               
                              for all 
                              
                                 
                                    s
                                    ∈
                                    S
                                    ,
                                    t
                                    =
                                    1
                                    ,
                                    …
                                    ,
                                    T
                                 
                              
                              .
                           

We prove the statement by induction on t. The lemma statement is true for 
                                 
                                    t
                                    =
                                    T
                                 
                              , because 
                                 
                                    
                                       
                                          V
                                       
                                       
                                          T
                                       
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                    (
                                    s
                                    )
                                    =
                                    
                                       
                                          V
                                       
                                       
                                          T
                                       
                                    
                                    (
                                    s
                                    )
                                 
                               in the final period.

We assume the statement for t and prove it for 
                                 
                                    t
                                    -
                                    1
                                 
                              . For all 
                                 
                                    a
                                    ∈
                                    
                                       
                                          
                                             
                                                A
                                             
                                             
                                                ‾
                                             
                                          
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                    
                                    (
                                    s
                                    )
                                 
                              , by definition, 
                                 
                                    
                                       
                                          b
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                    
                                    -
                                    
                                       
                                          C
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                    
                                    (
                                    s
                                    ,
                                    a
                                    )
                                    ⩾
                                    0
                                 
                               must hold. Because 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                    
                                    ⩾
                                    0
                                 
                               we have:
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                       
                                       (
                                       s
                                       )
                                       ⩽
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            ‾
                                                         
                                                      
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                r
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                +
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                ·
                                                (
                                                
                                                   
                                                      b
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                -
                                                
                                                   
                                                      C
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                )
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         u
                                                         ∈
                                                         S
                                                      
                                                   
                                                
                                                p
                                                [
                                                u
                                                ]
                                                
                                                   
                                                      V
                                                   
                                                   
                                                      t
                                                   
                                                
                                                (
                                                u
                                                )
                                             
                                          
                                       
                                       .
                                    
                                 
                              Because 
                                 
                                    
                                       
                                          
                                             
                                                A
                                             
                                             
                                                ‾
                                             
                                          
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                    
                                    (
                                    s
                                    )
                                    ⊆
                                    A
                                    (
                                    s
                                    )
                                 
                              ,
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                       
                                       (
                                       s
                                       )
                                       ⩽
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                r
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                +
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                ·
                                                (
                                                
                                                   
                                                      b
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                -
                                                
                                                   
                                                      C
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                )
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         u
                                                         ∈
                                                         S
                                                      
                                                   
                                                
                                                p
                                                [
                                                u
                                                ]
                                                
                                                   
                                                      V
                                                   
                                                   
                                                      t
                                                   
                                                
                                                (
                                                u
                                                )
                                             
                                          
                                       
                                       .
                                    
                                 
                              By the induction hypothesis and the definition of 
                                 
                                    
                                       
                                          V
                                       
                                       
                                          t
                                       
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                    (
                                    u
                                    )
                                 
                              ,
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                       
                                       (
                                       s
                                       )
                                       ⩽
                                       
                                          
                                             
                                                max
                                             
                                             
                                                a
                                                ∈
                                                A
                                                (
                                                s
                                                )
                                             
                                          
                                       
                                       
                                          
                                             
                                                r
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                +
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                ·
                                                (
                                                
                                                   
                                                      b
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                -
                                                
                                                   
                                                      C
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                (
                                                s
                                                ,
                                                a
                                                )
                                                )
                                                +
                                                β
                                                
                                                   
                                                      
                                                         min
                                                      
                                                      
                                                         p
                                                         ∈
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               s
                                                               ,
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         u
                                                         ∈
                                                         S
                                                      
                                                   
                                                
                                                p
                                                [
                                                u
                                                ]
                                                
                                                   
                                                      V
                                                   
                                                   
                                                      t
                                                   
                                                   
                                                      
                                                         
                                                            λ
                                                         
                                                         
                                                            t
                                                         
                                                      
                                                   
                                                
                                                (
                                                u
                                                )
                                             
                                          
                                       
                                       =
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   -
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       s
                                       )
                                       ,
                                    
                                 
                              proving the lemma statement.□

The results of Section 4.2 show that performing Lagrangian relaxation decomposes the problem and gives an upper bound on the value function of the big MDP. Using the recursing in Lemma 4.2 we can solve for that upper bound given any specific value of the Lagrange multiplier, 
                           
                              
                                 
                                    λ
                                 
                                 
                                    t
                                 
                              
                           
                        . In this section we show how to compute the optimal value for the Lagrange multiplier, in other words, the values that give the tightest upper bound.

We begin by writing the optimization problem to compute the Lagrangian relaxed value function in Lemma 4.2. The following optimization problem is similar to the optimization problem used to compute the value function for a standard MDP (Puterman, 2005). It has three main differences: (1) it is for a finite horizon problem, expressed by constraints for each time period (2) it is for a robust problem, expressed by the minimization operator within each constraint (3) it is for a decomposable problem, expressed by the separate variables for each 
                           
                              i
                              ∈
                              I
                           
                        . We let 
                           
                              α
                              ∈
                              
                                 
                                    R
                                 
                                 
                                    |
                                    S
                                    |
                                 
                              
                           
                         to denote a probability distribution on the initial states of the big MDP, however all we require below is that it is a non-negative vector. The following optimization problem computes the expected payoff of the big MDP under the Lagrangian relaxed value function:
                           
                              (2)
                              
                                 
                                    
                                       
                                          min
                                       
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                             
                                          
                                          ,
                                          
                                             
                                                V
                                             
                                             
                                                t
                                             
                                             
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                   
                                                
                                                ,
                                                i
                                             
                                          
                                          (
                                          ·
                                          )
                                          ,
                                          ∀
                                          i
                                          ,
                                          t
                                       
                                    
                                 
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          s
                                          ∈
                                          S
                                       
                                    
                                 
                                 α
                                 [
                                 s
                                 ]
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       V
                                    
                                    
                                       1
                                    
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             1
                                          
                                       
                                       ,
                                       i
                                    
                                 
                                 (
                                 s
                                 [
                                 i
                                 ]
                                 )
                              
                           
                        
                        
                           
                              
                                 
                                    
                                       V
                                    
                                    
                                       t
                                       -
                                       1
                                    
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                       
                                       ,
                                       i
                                    
                                 
                                 (
                                 s
                                 )
                                 ⩾
                                 
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                       
                                       ·
                                       
                                          
                                             b
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                       
                                    
                                    
                                       |
                                       I
                                       |
                                    
                                 
                                 +
                                 
                                    
                                       r
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 s
                                 ,
                                 a
                                 )
                                 -
                                 
                                    
                                       λ
                                    
                                    
                                       t
                                       -
                                       1
                                    
                                 
                                 ·
                                 
                                    
                                       C
                                    
                                    
                                       t
                                       -
                                       1
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 s
                                 ,
                                 a
                                 )
                                 +
                                 β
                                 
                                    
                                       
                                          min
                                       
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                          ∈
                                          
                                             
                                                P
                                             
                                             
                                                s
                                                ,
                                                a
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          u
                                          ∈
                                          
                                             
                                                S
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                                 [
                                 u
                                 ]
                                 
                                    
                                       V
                                    
                                    
                                       t
                                    
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             t
                                          
                                       
                                       ,
                                       i
                                    
                                 
                                 (
                                 u
                                 )
                                 
                                 ∀
                                 s
                                 ∈
                                 
                                    
                                       S
                                    
                                    
                                       i
                                    
                                 
                                 ,
                                 a
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 s
                                 )
                                 ,
                                 t
                                 ∈
                                 {
                                 2
                                 ,
                                 …
                                 ,
                                 T
                                 }
                              
                           
                        Now, lets consider the following lemma which appears as Lemma 1 (Nilim & Ghaoui, 2005), the proof of which we provide here for completeness:
                           Lemma 4.3
                           
                              Consider the problem:
                              
                                 
                                    (3)
                                    
                                       η
                                       =
                                       
                                          
                                             
                                                min
                                             
                                             
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      1
                                                   
                                                
                                                ,
                                                …
                                                ,
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      T
                                                      -
                                                      1
                                                   
                                                
                                             
                                          
                                       
                                       q
                                       ·
                                       
                                          
                                             v
                                          
                                          
                                             1
                                          
                                       
                                       
                                       
                                          
                                             v
                                          
                                          
                                             t
                                          
                                       
                                       ⩾
                                       
                                          
                                             g
                                          
                                          
                                             t
                                          
                                       
                                       (
                                       
                                          
                                             v
                                          
                                          
                                             t
                                             +
                                             1
                                          
                                       
                                       )
                                       ,
                                       
                                       
                                       ∀
                                       t
                                       =
                                       1
                                       ,
                                       …
                                       ,
                                       T
                                       -
                                       1
                                       ,
                                    
                                 
                              
                              where 
                              
                                 
                                    
                                       
                                          v
                                       
                                       
                                          T
                                       
                                    
                                 
                               
                              is a given vector of constants, and the 
                              
                                 
                                    
                                       
                                          v
                                       
                                       
                                          i
                                       
                                    
                                 
                               
                              for 
                              
                                 
                                    i
                                    =
                                    1
                                    ,
                                    …
                                    ,
                                    T
                                    -
                                    1
                                 
                               
                              are vectors of variables all of the same size. If we have that 
                              
                                 
                                    q
                                    ⩾
                                    0
                                 
                               
                              and 
                              
                                 
                                    u
                                    ⩽
                                    w
                                    ⇒
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    u
                                    )
                                    ⩽
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    w
                                    )
                                 
                              
                              , where 
                              
                                 
                                    q
                                    ,
                                    u
                                    ,
                                    w
                                    ,
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    ·
                                    )
                                 
                               
                              are vectors or vector valued functions, then the optimal solution is
                              
                                 
                                    
                                       
                                          
                                             v
                                          
                                          
                                             t
                                          
                                       
                                       =
                                       
                                          
                                             g
                                          
                                          
                                             t
                                          
                                       
                                       (
                                       
                                          
                                             v
                                          
                                          
                                             t
                                             +
                                             1
                                          
                                       
                                       )
                                       
                                       
                                       ∀
                                       t
                                       =
                                       1
                                       ,
                                       …
                                       ,
                                       T
                                       -
                                       1
                                       .
                                    
                                 
                              
                           

The proof here comes from the component-wise monotonicity of the g functions. In particular, let the proposed optimal solution in the lemma statement be 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          t
                                       
                                       
                                          ∗
                                       
                                    
                                 
                              . It is feasible by construction. But, also, for any solution, we have 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                    
                                    ⩾
                                    
                                       
                                          g
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                    
                                    (
                                    
                                       
                                          v
                                       
                                       
                                          T
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          g
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                    
                                    (
                                    
                                       
                                          v
                                       
                                       
                                          T
                                       
                                       
                                          ∗
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                       
                                          ∗
                                       
                                    
                                 
                              , because all solutions have one and the same value at T (no decisions are made and all values are fixed constants). From the monotonicity of 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          T
                                          -
                                          2
                                       
                                    
                                 
                              , we have 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          2
                                       
                                    
                                    ⩾
                                    
                                       
                                          g
                                       
                                       
                                          T
                                          -
                                          2
                                       
                                    
                                    (
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                    
                                    )
                                    ⩾
                                    
                                       
                                          g
                                       
                                       
                                          T
                                          -
                                          2
                                       
                                    
                                    (
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                       
                                          ∗
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          2
                                       
                                       
                                          ∗
                                       
                                    
                                 
                              . Continuing this argument in an inductive way, we have 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          1
                                       
                                    
                                    ⩾
                                    
                                       
                                          v
                                       
                                       
                                          1
                                       
                                       
                                          ∗
                                       
                                    
                                 
                              , which combined with 
                                 
                                    q
                                    ⩾
                                    0
                                 
                               proves the result.□

So, if we can express problem (2) in the form of the problem in Lemma 4.3, and if we can prove that the corresponding g functions are component wise monotone, then we can derive an optimal solution to problem (2).

So, we re-write problem (2) in an appropriate form. Let 
                           
                              
                                 
                                    v
                                 
                                 
                                    t
                                 
                              
                           
                         denote the vector with components 
                           
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          t
                                       
                                    
                                    ,
                                    i
                                 
                              
                              (
                              ·
                              )
                              ,
                              ∀
                              i
                           
                        . Let 
                           
                              
                                 
                                    v
                                 
                                 
                                    t
                                 
                                 
                                    i
                                 
                              
                           
                         denote the coordinates of 
                           
                              
                                 
                                    v
                                 
                                 
                                    t
                                 
                              
                           
                         that correspond to little MDP i. We can then rewrite problem (2) as (3) where 
                           
                              
                                 
                                    g
                                 
                                 
                                    t
                                 
                              
                              (
                              
                                 
                                    v
                                 
                                 
                                    t
                                    +
                                    1
                                 
                              
                              )
                           
                         returns the vector v that minimizes:
                           
                              (4)
                              
                                 
                                    
                                       g
                                    
                                    
                                       t
                                    
                                 
                                 (
                                 
                                    
                                       v
                                    
                                    
                                       t
                                       +
                                       1
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       
                                          argmin
                                       
                                       
                                          v
                                       
                                    
                                 
                                 
                                 
                                    
                                       
                                          min
                                       
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                 
                                 1
                                 ·
                                 
                                    
                                       vv
                                    
                                    
                                       i
                                    
                                 
                                 [
                                 s
                                 ]
                                 ⩾
                                 
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             t
                                          
                                       
                                       ·
                                       
                                          
                                             b
                                          
                                          
                                             t
                                          
                                       
                                    
                                    
                                       |
                                       I
                                       |
                                    
                                 
                                 +
                                 
                                    
                                       r
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 s
                                 ,
                                 a
                                 )
                                 -
                                 
                                    
                                       λ
                                    
                                    
                                       t
                                    
                                 
                                 ·
                                 
                                    
                                       C
                                    
                                    
                                       t
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 s
                                 ,
                                 a
                                 )
                                 +
                                 β
                                 
                                    
                                       
                                          min
                                       
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                          ∈
                                          
                                             
                                                P
                                             
                                             
                                                s
                                                ,
                                                a
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          u
                                          ∈
                                          
                                             
                                                S
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                                 [
                                 u
                                 ]
                                 
                                    
                                       v
                                    
                                    
                                       t
                                       +
                                       1
                                    
                                    
                                       i
                                    
                                 
                                 [
                                 u
                                 ]
                                 
                                 ∀
                                 i
                                 ∈
                                 I
                                 ,
                                 s
                                 ∈
                                 
                                    
                                       S
                                    
                                    
                                       i
                                    
                                 
                                 ,
                                 a
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 s
                                 )
                                 .
                              
                           
                        The vector q in (3) equates to 
                           
                              α
                              [
                              s
                              ]
                           
                         in problem (2). Intuitively, the main step in the transformation is that we moved the optimization over 
                           
                              
                                 
                                    λ
                                 
                                 
                                    t
                                 
                              
                           
                         in problem (2) inside the definition of 
                           
                              
                                 
                                    g
                                 
                                 
                                    t
                                 
                              
                           
                         in (3).
                           Theorem 4.4
                           
                              The optimal objective function values of
                              
                              (2)–(4) 
                              are the same. In addition, any optimal solution to 
                              
                                 (3) and (4)
                               
                              is also optimal in 
                              
                                 (2)
                              
                              .
                           

Any 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    
                                       
                                          v
                                       
                                       
                                          2
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                    
                                 
                               and 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    
                                       
                                          λ
                                       
                                       
                                          2
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          λ
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                    
                                 
                               feasible in (3) and (4) is also feasible in (2) with the same objective function value.

Consider any feasible solution to (2), 
                                 
                                    
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                    
                                    and
                                    
                                    
                                       
                                          
                                             
                                                V
                                             
                                             
                                                t
                                             
                                             
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                   
                                                
                                                ,
                                                i
                                             
                                          
                                          (
                                          ·
                                          )
                                       
                                       
                                          ^
                                       
                                    
                                 
                              . We group the values 
                                 
                                    
                                       
                                          
                                             
                                                V
                                             
                                             
                                                t
                                             
                                             
                                                
                                                   
                                                      λ
                                                   
                                                   
                                                      t
                                                   
                                                
                                                ,
                                                i
                                             
                                          
                                          (
                                          ·
                                          )
                                       
                                       
                                          ^
                                       
                                    
                                 
                               across little MDPs into vectors 
                                 
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                1
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                    ,
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                2
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                T
                                                -
                                                1
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                              . We define 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          t
                                       
                                       
                                          min
                                       
                                    
                                    =
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                                +
                                                1
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                    )
                                 
                              . For 
                                 
                                    t
                                    =
                                    T
                                 
                              , we have that 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                    
                                    (
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                T
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                       
                                          min
                                       
                                    
                                    ⩽
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                T
                                                -
                                                1
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                               The first equality follows by the definition of 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                       
                                          min
                                       
                                    
                                 
                              , the inequality follows from the definition of 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          T
                                          -
                                          1
                                       
                                    
                                    (
                                    ·
                                    )
                                 
                               and the fact that 
                                 
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                T
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                               is feasible in (2). We assume the monotonicity of the 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                 
                               functions momentarily, to be shown in Lemma 4.5, and proceed by induction on t. The induction hypothesis is 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                    
                                    (
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                    )
                                    ⩽
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                                -
                                                1
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                              . By induction: 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                          -
                                          2
                                       
                                    
                                    (
                                    
                                       
                                          v
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                       
                                          min
                                       
                                    
                                    )
                                    ⩽
                                    
                                       
                                          g
                                       
                                       
                                          t
                                          -
                                          2
                                       
                                    
                                    (
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                                -
                                                1
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          v
                                       
                                       
                                          t
                                          -
                                          2
                                       
                                       
                                          min
                                       
                                    
                                    ⩽
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                                -
                                                2
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                              . The first inequality follows from applying the monotonic 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                          -
                                          2
                                       
                                    
                                    (
                                    ·
                                    )
                                 
                               to both sides of the induction hypothesis and substituting the definition of 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          t
                                          -
                                          1
                                       
                                       
                                          min
                                       
                                    
                                 
                              . The second equality is the definition of 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          t
                                          -
                                          2
                                       
                                       
                                          min
                                       
                                    
                                 
                              . The third inequality follows from the fact that 
                                 
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                                -
                                                2
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                               is feasible in (2). By this inductive argument, we have 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          1
                                       
                                       
                                          min
                                       
                                    
                                    ⩽
                                    
                                       
                                          
                                             
                                                v
                                             
                                             
                                                1
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                              , and 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    
                                       
                                          v
                                       
                                       
                                          t
                                          +
                                          1
                                       
                                       
                                          min
                                       
                                    
                                    )
                                    ⩽
                                    
                                       
                                          v
                                       
                                       
                                          t
                                       
                                       
                                          min
                                       
                                    
                                 
                               for 
                                 
                                    t
                                    =
                                    1
                                    ,
                                    …
                                    T
                                    -
                                    1
                                 
                              . Thus we constructed a solution to (3) and (4) with a smaller value as 
                                 
                                    q
                                    ⩾
                                    0
                                 
                              . □

The only thing left to show is the monotonicity of the 
                           
                              
                                 
                                    g
                                 
                                 
                                    t
                                 
                              
                              (
                              ·
                              )
                           
                         function defined in (4). That monotonicity is required in two places. First, we used it in the proof of Theorem 4.4. Second, it is required by Lemma 4.3 to provide a solution method for problem (3) and (4).
                           Lemma 4.5
                           
                              Let 
                              
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    v
                                    )
                                 
                               
                              be as defined in (
                              4
                              ). Then 
                              
                                 
                                    u
                                    ⩽
                                    w
                                    ⇒
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    u
                                    )
                                    ⩽
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    w
                                    )
                                 
                              
                              .
                           

Let 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          t
                                       
                                       
                                          w
                                       
                                    
                                    ,
                                    
                                       
                                          p
                                       
                                       
                                          i
                                          ,
                                          w
                                       
                                    
                                 
                               be values of 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          t
                                       
                                    
                                 
                               and 
                                 
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                    
                                 
                               that produce the argmin for 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    w
                                    )
                                 
                              . Plug the same values into 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    u
                                    )
                                 
                              , and we’ll get a component-wise smaller vector. This is because
                                 
                                    
                                       β
                                       
                                          
                                             
                                                min
                                             
                                             
                                                
                                                   
                                                      p
                                                   
                                                   
                                                      i
                                                   
                                                
                                                ∈
                                                
                                                   
                                                      P
                                                   
                                                   
                                                      s
                                                      ,
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                s
                                                ∈
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             p
                                          
                                          
                                             i
                                          
                                       
                                       [
                                       s
                                       ]
                                       
                                          
                                             u
                                          
                                          
                                             i
                                          
                                       
                                       [
                                       s
                                       ]
                                       ⩽
                                       β
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                s
                                                ∈
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             p
                                          
                                          
                                             i
                                             ,
                                             w
                                          
                                       
                                       [
                                       s
                                       ]
                                       
                                          
                                             u
                                          
                                          
                                             i
                                          
                                       
                                       [
                                       s
                                       ]
                                       ⩽
                                       β
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                s
                                                ∈
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             p
                                          
                                          
                                             i
                                             ,
                                             w
                                          
                                       
                                       [
                                       s
                                       ]
                                       
                                          
                                             w
                                          
                                          
                                             i
                                          
                                       
                                       [
                                       s
                                       ]
                                       =
                                       β
                                       
                                          
                                             
                                                min
                                             
                                             
                                                
                                                   
                                                      p
                                                   
                                                   
                                                      i
                                                   
                                                
                                                ∈
                                                
                                                   
                                                      P
                                                   
                                                   
                                                      s
                                                      ,
                                                      a
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                s
                                                ∈
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             p
                                          
                                          
                                             i
                                          
                                       
                                       [
                                       s
                                       ]
                                       
                                          
                                             w
                                          
                                          
                                             i
                                          
                                       
                                       [
                                       s
                                       ]
                                       ,
                                    
                                 
                              where the first inequality comes from plugging a specific value into the minimization problem; the second inequality follows from the fact that w is component wise greater than u, and the last equality follows from the definition of 
                                 
                                    
                                       
                                          p
                                       
                                       
                                          i
                                          ,
                                          w
                                       
                                    
                                 
                              . Thus we have: 
                                 
                                    β
                                    
                                       
                                          min
                                       
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                          ∈
                                          
                                             
                                                P
                                             
                                             
                                                s
                                                ,
                                                a
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    
                                       
                                          ∑
                                       
                                       
                                          s
                                          ∈
                                          
                                             
                                                S
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                    
                                    [
                                    s
                                    ]
                                    
                                       
                                          u
                                       
                                       
                                          i
                                       
                                    
                                    [
                                    s
                                    ]
                                    ⩽
                                    β
                                    
                                       
                                          min
                                       
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                          ∈
                                          
                                             
                                                P
                                             
                                             
                                                s
                                                ,
                                                a
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    
                                       
                                          ∑
                                       
                                       
                                          s
                                          ∈
                                          
                                             
                                                S
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                    
                                    [
                                    s
                                    ]
                                    
                                       
                                          w
                                       
                                       
                                          i
                                       
                                    
                                    [
                                    s
                                    ]
                                 
                              . Plugging 
                                 
                                    
                                       
                                          λ
                                       
                                       
                                          t
                                       
                                       
                                          w
                                       
                                    
                                 
                               into the definition of 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    u
                                    )
                                 
                              , shows that 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    u
                                    )
                                 
                               is component wise smaller than 
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                    
                                    (
                                    w
                                    )
                                 
                              , thus completing the proof.□

The following steps compute strategies for the robust, decomposable, finite horizon MDP. We begin by sketching the process from the top-down, starting with the goals and getting to specifics. We then conclude with the explicit steps to compute a strategy. At an intuitive level, the process involves a variant of back-propagation, followed by a computation of strategies on an as-needed basis.

Computing a strategy is an optimization problem, if we are given the values of the future states as input. Thus, we would like to compute the values of the future states, 
                        
                           
                              
                                 V
                              
                              
                                 t
                                 +
                                 1
                              
                           
                           (
                           s
                           )
                        
                      if we are in time period t. Computing these values is computationally difficult, for example, a big MDP composed of 10 little MDPs each with five states requires the computation of 
                        
                           
                              
                                 5
                              
                              
                                 10
                              
                           
                        
                      values in each time period. Instead we compute upper bounds on the values, based on the Lagrangian relaxation of the robust, decomposable MDP, 
                        
                           
                              
                                 V
                              
                              
                                 t
                                 +
                                 1
                              
                              
                                 
                                    
                                       λ
                                    
                                    
                                       t
                                       +
                                       1
                                    
                                 
                              
                           
                           (
                           s
                           )
                        
                     . By Lemma 4.1 we only have to compute 
                        
                           5
                           ×
                           10
                           =
                           50
                        
                      values for the Lagrangian relaxation of the big MDP composed of 10 little MDPs with five states each, instead of 
                        
                           
                              
                                 5
                              
                              
                                 10
                              
                           
                        
                     . In fact, we compute the smallest upper bounds, optimizing over the Lagrange multipliers. To do this, we would like to solve problem (2). That problem, however, includes non-linear terms in the constraints. By Lemmas 4.3 and 4.5, we can solve problem (4) instead of problem (2) to get the values 
                        
                           
                              
                                 V
                              
                              
                                 t
                                 +
                                 1
                              
                              
                                 
                                    
                                       λ
                                    
                                    
                                       t
                                       +
                                       1
                                    
                                 
                              
                           
                           (
                           s
                           )
                        
                      and the optimal Lagrange multipliers. Finally, to solve problem (4), we observe that the expression 
                        
                           β
                           
                              
                                 min
                              
                              
                                 
                                    
                                       p
                                    
                                    
                                       i
                                    
                                 
                                 ∈
                                 
                                    
                                       P
                                    
                                    
                                       s
                                       ,
                                       a
                                    
                                    
                                       i
                                    
                                 
                              
                           
                           
                              
                                 ∑
                              
                              
                                 u
                                 ∈
                                 
                                    
                                       S
                                    
                                    
                                       i
                                    
                                 
                              
                           
                           
                              
                                 p
                              
                              
                                 i
                              
                           
                           [
                           u
                           ]
                           
                              
                                 v
                              
                              
                                 t
                                 +
                                 1
                              
                              
                                 i
                              
                           
                           [
                           u
                           ]
                        
                      can be optimized over 
                        
                           
                              
                                 p
                              
                              
                                 i
                              
                           
                           ∈
                           
                              
                                 P
                              
                              
                                 s
                                 ,
                                 a
                              
                              
                                 i
                              
                           
                        
                      to produce a constant, since the values 
                        
                           
                              
                                 v
                              
                              
                                 t
                                 +
                                 1
                              
                              
                                 i
                              
                           
                        
                      are specified as input to 
                        
                           
                              
                                 g
                              
                              
                                 t
                              
                           
                           (
                           
                              
                                 v
                              
                              
                                 t
                                 +
                                 1
                              
                           
                           )
                        
                     . This gives the complete set of steps required to produce a strategy for the robust, decomposable, finite horizon MDP:
                        
                           1.
                           Begin by specifying 
                                 
                                    I
                                    ,
                                    
                                       
                                          S
                                       
                                       
                                          i
                                       
                                    
                                    ,
                                    
                                       
                                          A
                                       
                                       
                                          i
                                       
                                    
                                    (
                                    s
                                    )
                                    ,
                                    
                                       
                                          r
                                       
                                       
                                          i
                                       
                                    
                                    (
                                    s
                                    ,
                                    a
                                    )
                                    ,
                                    
                                       
                                          C
                                       
                                       
                                          t
                                       
                                       
                                          i
                                       
                                    
                                    (
                                    s
                                    ,
                                    a
                                    )
                                    ,
                                    T
                                    ,
                                    
                                       
                                          b
                                       
                                       
                                          t
                                       
                                    
                                 
                               and 
                                 
                                    
                                       
                                          V
                                       
                                       
                                          T
                                       
                                    
                                    (
                                    s
                                    )
                                 
                               for 
                                 
                                    i
                                    ∈
                                    I
                                    ,
                                    s
                                    ∈
                                    
                                       
                                          S
                                       
                                       
                                          i
                                       
                                    
                                    ,
                                    a
                                    ∈
                                    
                                       
                                          A
                                       
                                       
                                          i
                                       
                                    
                                    (
                                    s
                                    )
                                    ,
                                    t
                                    ∈
                                    {
                                    1
                                    ,
                                    …
                                    ,
                                    T
                                    -
                                    1
                                    }
                                 
                              . This defines the robust, decomposable, finite horizon MDP and assigns values to the horizon states.

Back-propagate, repeatedly solving problem (4) to compute values 
                                 
                                    
                                       
                                          V
                                       
                                       
                                          t
                                       
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                    (
                                    s
                                    )
                                 
                              .
                                 
                                    (a)
                                    Start with 
                                          
                                             t
                                             =
                                             T
                                             -
                                             1
                                          
                                        and 
                                          
                                             
                                                
                                                   v
                                                
                                                
                                                   T
                                                
                                             
                                             =
                                             
                                                
                                                   V
                                                
                                                
                                                   T
                                                
                                             
                                             (
                                             s
                                             )
                                          
                                       .

Solve the inner problems 
                                          
                                             
                                                
                                                   min
                                                
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   ∈
                                                   
                                                      
                                                         P
                                                      
                                                      
                                                         s
                                                         ,
                                                         a
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   ∑
                                                
                                                
                                                   u
                                                   ∈
                                                   
                                                      
                                                         S
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   p
                                                
                                                
                                                   i
                                                
                                             
                                             [
                                             u
                                             ]
                                             
                                                
                                                   v
                                                
                                                
                                                   T
                                                
                                                
                                                   i
                                                
                                             
                                             [
                                             u
                                             ]
                                          
                                       . This step assumes we can optimize over the uncertainty sets 
                                          
                                             
                                                
                                                   P
                                                
                                                
                                                   s
                                                   ,
                                                   a
                                                
                                                
                                                   i
                                                
                                             
                                          
                                       . We save the optimal solution 
                                          
                                             
                                                
                                                   p
                                                
                                                
                                                   s
                                                   ,
                                                   a
                                                
                                                
                                                   i
                                                   ∗
                                                
                                             
                                          
                                       .

Solve the outer problem, problem (4) to find 
                                          
                                             
                                                
                                                   g
                                                
                                                
                                                   T
                                                   -
                                                   1
                                                
                                             
                                             (
                                             
                                                
                                                   v
                                                
                                                
                                                   T
                                                
                                             
                                             )
                                          
                                       , by substituting the objective values found in the previous step into the constraints of problem (4).

This gives values for 
                                          
                                             
                                                
                                                   v
                                                
                                                
                                                   T
                                                   -
                                                   1
                                                
                                             
                                          
                                       , which specify 
                                          
                                             
                                                
                                                   V
                                                
                                                
                                                   T
                                                   -
                                                   1
                                                
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         T
                                                         -
                                                         1
                                                      
                                                   
                                                
                                             
                                             (
                                             s
                                             )
                                          
                                       . Repeat these steps to continue the back-propagation until 
                                          
                                             t
                                             =
                                             1
                                          
                                       .

Using the computed values for 
                                 
                                    
                                       
                                          V
                                       
                                       
                                          t
                                       
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                t
                                             
                                          
                                       
                                    
                                    (
                                    s
                                    )
                                 
                              , compute strategies for the robust, decomposable, finite horizon MDP. These strategies can be computed on an as-needed fashion. In other words, given a state 
                                 
                                    s
                                 
                              , which specifies 
                                 
                                    s
                                    [
                                    i
                                    ]
                                 
                              , and time period t, we can solve the MIP:
                                 
                                    (5)
                                    
                                       
                                          
                                             
                                                max
                                             
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      a
                                                      [
                                                      i
                                                      ]
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                a
                                                [
                                                i
                                                ]
                                                ∈
                                                
                                                   
                                                      A
                                                   
                                                   
                                                      i
                                                   
                                                
                                                (
                                                s
                                                [
                                                i
                                                ]
                                                )
                                             
                                          
                                       
                                       
                                       
                                          
                                             x
                                          
                                          
                                             a
                                             [
                                             i
                                             ]
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       
                                          
                                             r
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       s
                                       [
                                       i
                                       ]
                                       ,
                                       a
                                       [
                                       i
                                       ]
                                       )
                                       +
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                u
                                                ∈
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                       
                                          
                                             p
                                          
                                          
                                             s
                                             [
                                             i
                                             ]
                                             ,
                                             a
                                             [
                                             i
                                             ]
                                          
                                          
                                             i
                                             ∗
                                          
                                       
                                       [
                                       u
                                       ]
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             +
                                             1
                                          
                                          
                                             
                                                
                                                   λ
                                                
                                                
                                                   t
                                                   +
                                                   1
                                                
                                             
                                          
                                       
                                       (
                                       u
                                       )
                                       )
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   s
                                                   .
                                                   t
                                                   .
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            a
                                                            [
                                                            i
                                                            ]
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  i
                                                               
                                                            
                                                            (
                                                            s
                                                            [
                                                            i
                                                            ]
                                                            )
                                                         
                                                      
                                                   
                                                   
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         a
                                                         [
                                                         i
                                                         ]
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   =
                                                   1
                                                   ,
                                                   
                                                   
                                                   ∀
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            i
                                                            ∈
                                                            I
                                                         
                                                      
                                                   
                                                   
                                                   
                                                      
                                                         
                                                            ∑
                                                         
                                                         
                                                            a
                                                            [
                                                            i
                                                            ]
                                                            ∈
                                                            
                                                               
                                                                  A
                                                               
                                                               
                                                                  i
                                                               
                                                            
                                                            (
                                                            s
                                                            [
                                                            i
                                                            ]
                                                            )
                                                         
                                                      
                                                   
                                                   
                                                   
                                                      
                                                         C
                                                      
                                                      
                                                         t
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   ,
                                                   a
                                                   [
                                                   i
                                                   ]
                                                   )
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         a
                                                         [
                                                         i
                                                         ]
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   ⩽
                                                   
                                                      
                                                         b
                                                      
                                                      
                                                         t
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         a
                                                         [
                                                         i
                                                         ]
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   ∈
                                                   {
                                                   0
                                                   ,
                                                   1
                                                   }
                                                   ,
                                                   
                                                   
                                                   ∀
                                                   i
                                                   ∈
                                                   I
                                                   ,
                                                   a
                                                   [
                                                   i
                                                   ]
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   (
                                                   s
                                                   [
                                                   i
                                                   ]
                                                   )
                                                   .
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           

In (5), 
                        
                           
                              
                                 x
                              
                              
                                 a
                                 [
                                 i
                                 ]
                              
                              
                                 i
                              
                           
                           =
                           1
                        
                      if action 
                        
                           a
                           [
                           i
                           ]
                        
                      is taken in time period t in little MDP i and zero otherwise. The objective maximizes the total expected reward from taking the selected actions, 
                        
                           a
                           [
                           i
                           ]
                        
                     , across all little MDPs. The first constraint ensures that only one action is taken in each little MDP, the second constraint ensures that all actions across all the little MDPs are within budget, and the last constraint ensures that 
                        
                           
                              
                                 x
                              
                              
                                 a
                                 [
                                 i
                                 ]
                              
                              
                                 i
                              
                           
                        
                      is binary. We observe that solving the above program with the true state values, 
                        
                           
                              
                                 V
                              
                              
                                 t
                                 +
                                 1
                              
                           
                           (
                           s
                           )
                        
                     , as opposed to the upper bounds, 
                        
                           
                              
                                 V
                              
                              
                                 t
                                 +
                                 1
                              
                              
                                 
                                    
                                       λ
                                    
                                    
                                       t
                                       +
                                       1
                                    
                                 
                              
                           
                           (
                           s
                           )
                        
                     , would yield an optimal strategy.

Even for a small example problem, solving the robust big MDP directly, computing the value for each big MDP state, as opposed to the Lagrangian relaxation we propose, involves solving a complex non-linear, non-convex optimization problem to find the worst-case transition probabilities. Because a generic algorithm to optimally solve non-linear, non-convex problems is not known, it is unlikely that the robust big MDP can be solved directly. Intuitively, the big MDP has a transition uncertainty set that is significantly different than that of Nilim and Ghaoui (2005), and the tools employed there are not applicable. We discuss a direct solution further in Appendix B. In contrast, the method described in this section is tractable and requires solving T linear programs in step (2) and T integer programs, on an as-needed fashion, with some additional optimization problems to compute worst-case transition probabilities.

In this section we apply the developed method to determine a funding policy for a stylized school district composed of four schools: a small wealthy (SW), a small impoverished (SI), a large wealthy (LW), and a large impoverished school (LI). The district has a finite budget per planning period, and would like to find a funding policy for a finite planning horizon, in our case 12 periods, that maximizes the school district’s total expected reward over the planning horizon. It helps to think of each period representing a single year, and we are tasked with finding a funding policy for a 12year period. Once a school receives its funding for a year, that school may choose to do with the budget anything it sees fit, such as hire more teachers, acquire more equipment, or fund different programs. The implicit assumption in this model is that each school needs a certain amount of money to keep itself sustained, and additional funding may help it improve. Our results may be extended for any finite number of years, however we think that political and educational policies change so often that even 12years may be too long for a single school district. For completeness we note that even if we halve the planning horizon to 5 or 6years, the results are qualitatively the same.

For our stylized example, a school receives income in two ways: (1) directly from the school district and (2) directly from the community. Some communities are able to collect more funds due to the makeup of the community than others, thus making some schools wealthier than others. These wealthy schools may have enough community funds to operate and fund all of their programs, and that makes them less responsive to any additional funds they may receive from the school district. With this perspective, in the stylized example, we assume wealthy schools’ transition probabilities are independent of the district’s funding actions. On the other hand, impoverished schools do not receive much funding through the local community and must depend on the school district for the majority of their funding.

Further, we assume that schools may be small or large. Small schools have fewer students than larger schools and thus need a lower amount of resources to function. However, if large schools are not performing well, to be defined later on in this section, it means that more students are also not performing well. Thus, the district receives a larger negative reward from large schools not performing well than from small schools.

Each of the four schools may be in one of five states: failing, poor, average, good, excellent. A school’s state is determined by its performance on a yearly exam. Depending on how the students of that school perform, the school is given a performance grade that has the same value as its state. In practice, the distribution of students’ scores is what is used to determine a school’s performance, by seeing if the majority of students are below a threshold. As mentioned previously, the school district would like to maximize its performance over the planning horizon, and the school district receives a reward for each school depending on the school’s state at the end of each year. If a large schools is in the good state, then it means that more students are in the good state than when a small school is in the good state. Therefore, the reward the district receives also depends on the size of the school. In this example, a district receives rewards of 
                        
                           -
                           10
                           ,
                           -
                           5
                           ,
                           0
                           ,
                           5
                           ,
                           10
                        
                      for small schools and rewards of 
                        
                           -
                           20
                           ,
                           -
                           10
                           ,
                           0
                           ,
                           10
                           ,
                           20
                        
                      for large schools being in states failing, poor, average, good, excellent respectively. Further, as large schools have more students than small schools, they also require more funding to keep their programs running. Each year, the school district can only decide if it will give a school small, medium, or large funding level. For the stylized example, large schools cost the district 0, 1, 3 and small schools cost the district 0, 1, 2 to have funding levels of small, medium, or large, respectively.

Each year the school district has to decide what action it should take, i.e., what funding should the district give to each school. However, given the current state of schools and the funding decision taken, it is not clear to the school district what state a schools will be in the following year. Not only does the district not know the exact state, but the district also does not have an exact distribution on the future states given a state, action pair. The district may, at best, have a range, upper and lower bounds, on the likelihood of each future state given a state, action pair. It is with this range that we construct an uncertainty set on the probability of future states. We give a complete parameterization of the stylized example in Appendix D.

One possible comparison for this stylized example, is to compare policies derived from the robust, decomposable, finite horizon MDP to an average case policy, derived by assuming fixed transition probabilities. Although Nilim and Ghaoui (2005) do not consider coupled MDPs, their robust aircraft routing example highlights that average case policies may perform worse than a robust policy. The main purpose of our example is illustrate our method and compare it, at least in a stylized setting, to a school funding policy inspired by the real-world. An example that shows the robust policy performing better than the average policy is possible, though we do not think such an example will add to the understanding of the proposed method, especially since such a demonstration has already been done by Nilim and El Ghaoui. For completeness, we present a comparison of the average case policy to the robust policy for our example in Appendix C.

We compare funding policies resulting from the robust, decomposable, finite horizon MDP to a baseline policy inspired by a funding policy used in practice today, No Child Left Behind. We also compared the policies resulting from our method to two additional policies: (1) a policy that funds schools demonstrating improvement where current performance is less than good and (2) a policy that funds the worst performing school. Qualitatively, these two additional policies performed the same as No Child Left Behind when compared to our method and thus are not presented in detail. No Child Left Behind, as implemented by the state of New Jersey (Jersey Department of Education & Office of Student Achievement & Accountability, 2011), is rather complex, so the baseline that we use is a simplified abstraction of what is used in practice. We model No Child Left Behind by having a school be eligible to receive large funding if that school has reduced its performance this year relative to the previous year and its current performance is less than good. Of all the schools that are eligible to receive large funding, those schools with the lowest current state will receive funding first, and if multiple schools have the same current state, then larger schools are given preference. After large funding is allocated to some schools, the remaining budget is used to fund schools at the medium level, with schools with the lowest state given preference and large schools given preference over small schools.

In the remainder of this section we compare the funding policy determined using our method—referred to RMDP for the remainder of this section—to that of the policy inspired by No Child Left Behind—referred to iNoChild for the remainder of this section—in the four school stylized example described above. We consider two possible situations: (1) State evolution based on the worst case transition probabilities as defined by the uncertainty set and (2) State evolution based on a collection of random draws from the uncertainty set, i.e., a point within the uncertainty set for the possible transition probabilities. The developed method, RMDP, is expected to perform well in the first case as the funding policy itself is designed assuming worst case transition probabilities. This may give this policy an unfair advantage over iNoChild, therefore, we also consider random draws from the feasibility set.

In Fig. 1
                      we plot the cumulative expected reward the school district receives assuming worst case transition probabilities. RMDP, whose policy is targeted to worst case transitions, outperforms iNoChild across all budget values. In this figure, we omitted the plots of budgets of 5 and 4, as they are qualitatively similar to that of budgets of 6 and 3, respectively. Finally, for budgets of 2 and 1, shown in Fig. 1(c) and (d), we note that though both policies provide negative cumulative reward, RMDP still performs at least as well, statistically speaking, as iNoChild, even in the first few years of the planning horizon.

In Fig. 2
                      we plot the cumulative reward the school district receives assuming random draws from the transition probability uncertainty set. It is not surprising that the expected cumulative reward is higher for these types of transitions, relative to the worst case transitions. What may be surprising is that RMDP is still performing better than iNoChild. The only thing to note is that RMDP tends to perform a little worse on average terms, though equivalently, from a statistical perspective, than iNoChild when the budget is low, 2 or 1 in the initial two years. This may be an artifact from the fact that all schools start initially in the average state in our stylized example. Or, it may indicate that RMDP is too conservative initially as it considers performance over the entire planning horizon.

As mentioned earlier, funding to wealthy schools does not influence their transition probabilities. This aspect of our model is motivated by the fact schools, at least in the United States, receive funding through two sources, local taxes and state and federal sources. In our model we are considering the allocation of funding from state and federal sources, not from local taxes as these taxes are destined for each particular school. With this perspective, we would like any funding strategy to allocate funding to impoverished schools, and not spend resources on schools that do not respond to additional funding. In a sense, this part of the stylized example can be viewed as a sanity check. We expect RMDP to perform as well as iNoChild, in terms of school state, for all wealthy schools. Figs. 3–5
                     
                     
                      display the school states over the planning horizon under worst case transition probabilities for both RMDP and iNoChild. In Fig. 3 we show that for both large and small wealthy schools, RMDP performs as well as iNoChild.

In Fig. 4, we notice that RMDP spends resources in maintaining and improving the state of impoverished schools, agreeing with the sanity check. Qualitatively, the RMDP funding policy performs better then iNoChild for all impoverished schools for budget values of 5 and 6, under these budget constraints both the large and small impoverished school may be funded at the same time. However, for budgets of 4 and 3, it is impossible to give large funding or medium funding to both the large and the small school in the same year. As shown in Fig. 4(c), the large impoverished school receives more support, and thus has a better state than the small school. This policy makes sense as more students are affected from funding decisions in the large school than in the small school. We observe the same behavior when we consider an average case probability realization. Indirectly the RMDP policy accounts for the cost per student, and gives schools that have a lower cost per student benefit funding over those that have a higher marginal cost.

Interestingly once the budget level is 2, in Fig. 5, we notice that RMDP supports the small impoverished school more, as it can actually provide large funding to the small school where it cannot for the large school. With a budget of 1, the RMDP policy again diverts more support to the large school and tries to provide medium funding year to year. We observe these trends for the worst case probability realizations in Fig. 5(c), as with the previous figure, similar results hold for the average case of probability realizations.

We explore how our method scales as the number of schools, small MDPs, increases. In the case when there are 40 schools, the district, big MDP, has 
                        
                           
                              
                                 5
                              
                              
                                 40
                              
                           
                        
                      states and as expected the runtime of our method–on the order of two minutes on a modern laptop–scales linearly in the number of small MDPs.

@&#DISCUSSION AND CONCLUSION@&#

In this paper we propose a method to compute an approximate value function for robust, decomposable, finite horizon MDPs and show how to tractably derive a feasible policy from the approximate value function. The method is motivated by an application to school funding allocation and we apply it to a stylized school district. We compare our funding policies to those of a policy inspired by No Child Left Behind, and show that our policies perform well in comparison. At least based on the stylized example, this indicates that if decision makers make funding allocation decisions based on uncertain transition probabilities, it may lead to better results than making those decisions simply on the last observed transition as in the policy inspired by No Child Left Behind.

All school funding decisions are ultimately the result of a political process, and it is unrealistic to expect that the results of an optimization model would be used directly. Instead, the model we propose could be used to gain insight into the types of funding decisions that could lead to good outcomes. One way the model can be parameterized is by the decision maker experts directly, through specifying ranges of possible impacts to funding decisions. Another possible way to parameterize the model is through analyzing large data sets on school funding. New Zealand, for example, maintains a history of school funding and school performance on national exams (New Zealand Ministry of Education, 2013). It may be possible to statistically derive uncertainty sets from such a large data set, based on school characteristics. A real-world application of an optimization model to school funding allocation is an outstanding open problem. Inspired by this problem, the main contribution of this paper is the definition of, and suggested solution approach to robust, decomposable MDPs. These MDPs represent a fundamentally new type of control problem, different from both the decomposable MDPs and robust MDPs studied in the past.

There are a number of additional theoretical problems for future research. Currently, to the best of our knowledge, there is no known tractable method to compute optimal strategies for robust, decomposable MDPs. In addition, for realistic applications, both the rewards and the transition probabilities between little MDPs may be coupled. For example, a school district may be interested in equity—having all the schools at about the same level. Such considerations create difficulties for the decomposition approaches we take. The decomposition approaches ultimately work by decomposing the value function of the big MDP. If equity is a consideration, ultimately the value of a state in the big MDP is very much dependent on the states of all the little MDPs. The development of solution methods for such situations would be an interesting, though we believe difficult, theoretical contribution.

@&#ACKNOWLEDGMENTS@&#

We would like to thank the two anonymous reviewers and the editor of the journal for their insightful comments that significantly improved the manuscript. Stanko Dimitrov would like to acknowledge the funding he received from Natural Sciences and Engineering Research Council of Canada (NSERC) that partially supported his work on this manuscript.

We begin by assuming that the big MDP value function has the form 
                        
                           
                              
                                 V
                              
                              
                                 t
                              
                           
                           (
                           s
                           )
                           =
                           
                              
                                 θ
                              
                              
                                 t
                              
                           
                           +
                           
                              
                                 ∑
                              
                              
                                 i
                                 ∈
                                 I
                              
                           
                           
                              
                                 V
                              
                              
                                 t
                              
                              
                                 i
                              
                           
                           (
                           s
                           [
                           i
                           ]
                           )
                        
                      and writing the standard LP form for finding the values of each state:
                        
                           (A.1)
                           
                              
                                 
                                    H
                                 
                                 
                                    θ
                                 
                              
                              (
                              α
                              )
                              =
                              
                                 
                                    
                                       min
                                    
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       ·
                                       )
                                       ,
                                       ∀
                                       i
                                       ,
                                       t
                                    
                                 
                              
                              
                                 
                                    θ
                                 
                                 
                                    1
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       s
                                       ∈
                                       S
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    α
                                 
                                 
                                    i
                                 
                              
                              [
                              s
                              [
                              i
                              ]
                              ]
                              
                                 
                                    V
                                 
                                 
                                    1
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              [
                              i
                              ]
                              )
                              
                                 
                                    θ
                                 
                                 
                                    t
                                    -
                                    1
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    V
                                 
                                 
                                    t
                                    -
                                    1
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              [
                              i
                              ]
                              )
                              ⩾
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    r
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              ,
                              a
                              )
                              +
                              β
                              
                                 
                                    
                                       min
                                    
                                    
                                       p
                                       ∈
                                       
                                          
                                             P
                                          
                                          
                                             s
                                             ,
                                             a
                                          
                                       
                                    
                                 
                              
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       u
                                       ∈
                                       S
                                    
                                 
                              
                              
                              
                                 
                                    
                                       ∏
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              [
                              u
                              [
                              i
                              ]
                              ]
                              
                              
                                 
                                    
                                       
                                          
                                             θ
                                          
                                          
                                             t
                                          
                                       
                                       +
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             V
                                          
                                          
                                             t
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       u
                                       [
                                       i
                                       ]
                                       )
                                    
                                 
                              
                              
                              ∀
                              s
                              ∈
                              
                                 
                                    S
                                 
                                 
                                    ,
                                 
                              
                              a
                              ∈
                              
                                 
                                    
                                       
                                          A
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                              ,
                              t
                              ∈
                              {
                              2
                              ,
                              …
                              ,
                              T
                              }
                              .
                           
                        
                     Moving the constant 
                        
                           
                              
                                 θ
                              
                              
                                 t
                              
                           
                        
                      out of the optimization objective, and using the same sequence of algebraic manipulations as in Lemma 4.1 we can rewrite the above as
                        
                           (A.2)
                           
                              
                                 
                                    H
                                 
                                 
                                    θ
                                 
                              
                              (
                              α
                              )
                              =
                              
                                 
                                    
                                       min
                                    
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       ·
                                       )
                                       ,
                                       ∀
                                       i
                                       ,
                                       t
                                    
                                 
                              
                              
                                 
                                    θ
                                 
                                 
                                    1
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       s
                                       ∈
                                       S
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    α
                                 
                                 
                                    i
                                 
                              
                              [
                              s
                              [
                              i
                              ]
                              ]
                              
                                 
                                    V
                                 
                                 
                                    1
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              [
                              i
                              ]
                              )
                              
                                 
                                    θ
                                 
                                 
                                    t
                                    -
                                    1
                                 
                              
                              -
                              β
                              
                                 
                                    θ
                                 
                                 
                                    t
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    V
                                 
                                 
                                    t
                                    -
                                    1
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              [
                              i
                              ]
                              )
                              ⩾
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    r
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              ,
                              a
                              )
                              +
                              β
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    
                                       min
                                    
                                    
                                       
                                          
                                             p
                                          
                                          
                                             i
                                          
                                       
                                       ∈
                                       
                                          
                                             P
                                          
                                          
                                             s
                                             [
                                             i
                                             ]
                                             ,
                                             a
                                             [
                                             i
                                             ]
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                u
                                                ∈
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             V
                                          
                                          
                                             t
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       u
                                       )
                                       
                                          
                                             p
                                          
                                          
                                             i
                                          
                                       
                                       [
                                       u
                                       ]
                                    
                                 
                              
                              
                              ∀
                              s
                              ∈
                              
                                 
                                    S
                                 
                                 
                                    ,
                                 
                              
                              a
                              ∈
                              
                                 
                                    
                                       
                                          A
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                              ,
                              t
                              ∈
                              {
                              2
                              ,
                              …
                              ,
                              T
                              }
                              .
                           
                        
                     
                  

Proposition 3 of Adelman and Mersereau (2008) holds, by the same reasoning as in their paper, giving that the parameters 
                        
                           θ
                        
                      does not change the objective function value of the above LP. In other words, 
                        
                           
                              
                                 H
                              
                              
                                 θ
                              
                           
                           (
                           α
                           )
                           =
                           
                              
                                 H
                              
                              
                                 θ
                                 ′
                              
                           
                           (
                           α
                           )
                        
                      for any two values 
                        
                           θ
                        
                      and 
                        
                           
                              
                                 θ
                              
                              
                                 ′
                              
                           
                        
                     .

In addition, the remaining ADP results of Adelman and Mersereau also hold in the robust, decomposable, finite horizon MDP above. For example, their Proposition 4, stating that the ADP value approximation of each state is bigger than the true value of the state can be shown by an inductive argument similar to that in Theorem 4.4. Similarly, the equivalents of their Theorem 1 and Corollary 1 can be shown by taking an optimal solution to model (2), creating the same relationship between 
                        
                           θ
                        
                      and 
                        
                           λ
                        
                      as in their paper, and showing that it is feasible in model (A.2).

Because the same theoretical results hold in the robust, decomposable, finite horizon MDP, the ADP approximation gives more accurate value function approximations than the Lagrangian relaxation. However, the key problem with utilizing the ADP approximation is solving model (A.2). It has an exponential number of constraints, and in addition, unlike in Adelman and Mersereau, it has a non-linear term inside the constraints. Thus, standard column generation or row generation approaches cannot be applied.

We sketch two possible computational approaches to solving model (A.2), however we believe both are complex and practically not scalable. The first is the standard coordinate-wise optimization approach often taken in non-linear programming. In this approach, we alternate between solving for the values of 
                        
                           
                              
                                 V
                              
                              
                                 t
                              
                              
                                 i
                              
                           
                           (
                           ·
                           )
                        
                      given fixed values of the 
                        
                           
                              
                                 p
                              
                              
                                 i
                              
                           
                        
                     , then solving for the 
                        
                           
                              
                                 p
                              
                              
                                 i
                              
                           
                        
                      given fixed values of the 
                        
                           
                              
                                 V
                              
                              
                                 t
                              
                              
                                 i
                              
                           
                           (
                           ·
                           )
                        
                     . While this solution approach is common, we have no theoretical guarantees that it converges or produces optimal solutions. On the other hand, there may be applications where this approach works well.

Our second approach involves both row generation, for the constraints based on 
                        
                           s
                           ∈
                           
                              
                                 S
                              
                              
                                 ,
                              
                           
                           a
                           ∈
                           
                              
                                 
                                    
                                       A
                                    
                                    
                                       ‾
                                    
                                 
                              
                              
                                 t
                              
                           
                           (
                           s
                           )
                        
                      and column generation for decision variables 
                        
                           
                              
                                 p
                              
                              
                                 i
                              
                           
                        
                     . The basic idea behind the approach is re-writing model (A.2) in the form
                        
                           (A.3a)
                           
                              
                                 
                                    H
                                 
                                 
                                    θ
                                 
                              
                              (
                              α
                              )
                              =
                              
                                 
                                    
                                       min
                                    
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       ·
                                       )
                                       ,
                                       z
                                       ,
                                       x
                                    
                                 
                              
                              
                                 
                                    θ
                                 
                                 
                                    1
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       s
                                       ∈
                                       S
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    α
                                 
                                 
                                    i
                                 
                              
                              [
                              s
                              [
                              i
                              ]
                              ]
                              
                                 
                                    V
                                 
                                 
                                    1
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              [
                              i
                              ]
                              )
                              
                                 
                                    θ
                                 
                                 
                                    t
                                    -
                                    1
                                 
                              
                              -
                              β
                              
                                 
                                    θ
                                 
                                 
                                    t
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    V
                                 
                                 
                                    t
                                    -
                                    1
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              [
                              i
                              ]
                              )
                              ⩾
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    r
                                 
                                 
                                    i
                                 
                              
                              (
                              s
                              ,
                              a
                              )
                              +
                              β
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    z
                                 
                                 
                                    t
                                    ,
                                    s
                                    [
                                    i
                                    ]
                                    ,
                                    a
                                    [
                                    i
                                    ]
                                 
                              
                              
                              ∀
                              s
                              ∈
                              
                                 
                                    S
                                 
                                 
                                    ,
                                 
                              
                              a
                              ∈
                              
                                 
                                    
                                       
                                          A
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                              ,
                              t
                              ∈
                              {
                              2
                              ,
                              …
                              ,
                              T
                              }
                           
                        
                     
                     
                        
                           (A.3b)
                           
                              
                                 
                                    z
                                 
                                 
                                    t
                                    ,
                                    s
                                    [
                                    i
                                    ]
                                    ,
                                    a
                                    [
                                    i
                                    ]
                                 
                              
                              ⩾
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       u
                                       ∈
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                                 
                                    i
                                 
                              
                              (
                              u
                              )
                              
                                 
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                    
                                 
                                 
                                    ^
                                 
                              
                              [
                              u
                              ]
                              -
                              M
                              (
                              1
                              -
                              
                                 
                                    x
                                 
                                 
                                    
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                              
                              )
                              
                              ∀
                              s
                              ∈
                              
                                 
                                    S
                                 
                                 
                                    ,
                                 
                              
                              a
                              ∈
                              
                                 
                                    
                                       
                                          A
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                              ,
                              t
                              ∈
                              {
                              2
                              ,
                              …
                              ,
                              T
                              }
                              ,
                              
                                 
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                    
                                 
                                 
                                    ^
                                 
                              
                              ∈
                              Ext
                              (
                              
                                 
                                    P
                                 
                                 
                                    s
                                    [
                                    i
                                    ]
                                    ,
                                    a
                                    [
                                    i
                                    ]
                                 
                                 
                                    i
                                 
                              
                              )
                           
                        
                     
                     
                        
                           (A.3c)
                           
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       
                                          
                                             
                                                
                                                   p
                                                
                                                
                                                   i
                                                
                                             
                                          
                                          
                                             ^
                                          
                                       
                                       ∈
                                       Ext
                                       (
                                       
                                          
                                             P
                                          
                                          
                                             s
                                             [
                                             i
                                             ]
                                             ,
                                             a
                                             [
                                             i
                                             ]
                                          
                                          
                                             i
                                          
                                       
                                       )
                                    
                                 
                              
                              
                                 
                                    x
                                 
                                 
                                    
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                              
                              =
                              1
                              
                              ∀
                              s
                              ∈
                              
                                 
                                    S
                                 
                                 
                                    ,
                                 
                              
                              a
                              ∈
                              
                                 
                                    
                                       
                                          A
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                              ,
                              t
                              ∈
                              {
                              2
                              ,
                              …
                              ,
                              T
                              }
                           
                        
                     
                     
                        
                           (A.3d)
                           
                              
                                 
                                    x
                                 
                                 
                                    
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                              
                              ∈
                              {
                              0
                              ,
                              1
                              }
                              
                              ∀
                              s
                              ∈
                              
                                 
                                    S
                                 
                                 
                                    ,
                                 
                              
                              a
                              ∈
                              
                                 
                                    
                                       
                                          A
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                              ,
                              t
                              ∈
                              {
                              2
                              ,
                              …
                              ,
                              T
                              }
                              ,
                              
                                 
                                    
                                       
                                          p
                                       
                                       
                                          i
                                       
                                    
                                 
                                 
                                    ^
                                 
                              
                              ∈
                              Ext
                              (
                              
                                 
                                    P
                                 
                                 
                                    s
                                    [
                                    i
                                    ]
                                    ,
                                    a
                                    [
                                    i
                                    ]
                                 
                                 
                                    i
                                 
                              
                              )
                              ,
                           
                        
                     where 
                        
                           Ext
                           (
                           
                              
                                 P
                              
                              
                                 s
                                 [
                                 i
                                 ]
                                 ,
                                 a
                                 [
                                 i
                                 ]
                              
                              
                                 i
                              
                           
                           )
                        
                      is the set of extreme points of the uncertainty set 
                        
                           
                              
                                 P
                              
                              
                                 s
                                 [
                                 i
                                 ]
                                 ,
                                 a
                                 [
                                 i
                                 ]
                              
                              
                                 i
                              
                           
                        
                     .

The idea behind reformulation (A.3) is to assume the uncertainty sets are polyhedrons and rewrite the optimization over the uncertainty sets as a selection of a single extreme point. In particular, constraints (A.3b), (A.3c) and (A.3d) select a single extreme point, and the variables 
                        
                           
                              
                                 z
                              
                              
                                 t
                                 ,
                                 s
                                 [
                                 i
                                 ]
                                 ,
                                 a
                                 [
                                 i
                                 ]
                              
                           
                        
                      compute the objective value of inner optimization problems. The reformulation removes the non-linearities in model (A.2), however it also introduces many more constraints. However, we can use a combination of row and column generation to solve model (A.3) to optimality.

Suppose we start with an incomplete version of model (A.3), in the sense that it only includes some subset of the extreme points in constraints (A.3b), (A.3c) and (A.3d) as well as only some of the constraints (A.3a) based on a subset of pairs 
                        
                           (
                           s
                           ,
                           a
                           )
                        
                     . Suppose that the incomplete version of the model is small enough that we can solve the mixed integer program (MIP) to optimality, finding solution values 
                        
                           
                              
                                 
                                    
                                       V
                                    
                                    
                                       t
                                    
                                    
                                       i
                                    
                                 
                                 (
                                 ·
                                 )
                              
                              
                                 ^
                              
                           
                           ,
                           
                              
                                 z
                              
                              
                                 ^
                              
                           
                        
                     . We can check if the solution we received is optimal to the full model with the following two steps:
                        
                           1.
                           Solve the problems
                                 
                                    
                                       
                                          
                                             
                                                min
                                             
                                             
                                                
                                                   
                                                      p
                                                   
                                                   
                                                      i
                                                   
                                                
                                                ∈
                                                
                                                   
                                                      P
                                                   
                                                   
                                                      s
                                                      [
                                                      i
                                                      ]
                                                      ,
                                                      a
                                                      [
                                                      i
                                                      ]
                                                   
                                                   
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         u
                                                         ∈
                                                         
                                                            
                                                               S
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            V
                                                         
                                                         
                                                            t
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      (
                                                      u
                                                      )
                                                   
                                                   
                                                      ^
                                                   
                                                
                                                
                                                   
                                                      p
                                                   
                                                   
                                                      i
                                                   
                                                
                                                [
                                                u
                                                ]
                                             
                                          
                                       
                                       .
                                    
                                 
                              
                           

Let the optimal value, say 
                                 
                                    
                                       
                                          z
                                       
                                       
                                          t
                                          ,
                                          s
                                          [
                                          i
                                          ]
                                          ,
                                          a
                                          [
                                          i
                                          ]
                                       
                                       
                                          ∗
                                       
                                    
                                 
                              , occurs at an extreme point 
                                 
                                    
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                              . The values 
                                 
                                    
                                       
                                          z
                                       
                                       
                                          t
                                          ,
                                          s
                                          [
                                          i
                                          ]
                                          ,
                                          a
                                          [
                                          i
                                          ]
                                       
                                       
                                          ∗
                                       
                                    
                                 
                               give us what the true values of the z variables should have been, had we included all extreme points in the formulation, and the extreme point, 
                                 
                                    
                                       
                                          
                                             
                                                p
                                             
                                             
                                                i
                                             
                                          
                                       
                                       
                                          ^
                                       
                                    
                                 
                               gives us a new extreme point to include in constraints (A.3b), (A.3c) and (A.3d). This is the column generation part of the solution approach.

Solve the problem
                                 
                                    
                                       
                                          
                                             
                                                max
                                             
                                             
                                                ∀
                                                s
                                                ∈
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      ,
                                                   
                                                
                                                a
                                                ∈
                                                A
                                                (
                                                t
                                                )
                                                s
                                                ,
                                                t
                                                ∈
                                                {
                                                2
                                                ,
                                                …
                                                ,
                                                T
                                                }
                                             
                                          
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             r
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       s
                                       ,
                                       a
                                       )
                                       -
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             V
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       s
                                       [
                                       i
                                       ]
                                       )
                                       +
                                       β
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             z
                                          
                                          
                                             t
                                             ,
                                             s
                                             [
                                             i
                                             ]
                                             ,
                                             a
                                             [
                                             i
                                             ]
                                          
                                          
                                             ∗
                                          
                                       
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             C
                                          
                                          
                                             t
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       s
                                       [
                                       i
                                       ]
                                       ,
                                       a
                                       [
                                       i
                                       ]
                                       )
                                       ⩽
                                       
                                          
                                             b
                                          
                                          
                                             t
                                          
                                       
                                       .
                                    
                                 
                              
                           

This problem is the same knapsack problem that Adelman and Mersereau (2008) solve for the computational approach in their paper. If the objective function value of the problem is greater than zero, it generates a new pair 
                                 
                                    (
                                    s
                                    ,
                                    a
                                    )
                                 
                               to add to our incomplete version of constraint (A.3a). If the objective function value is zero or less, then all the constraints in the full formulation (A.3) are satisfied. This is the row generation part of the solution approach.

As we repeat the above two steps, if it is ever the case that we do not generate new extreme points in step one, or new constraints in step two, then we know we have found an optimal solution to the full problem. This approach will terminate in a finite number of iterations, simply because there are only finitely many extreme points and constraints we can generate. However, it could potentially take a long time, as with many row and column generation schemes.

Here, we illustrate that a direct method to solve the big MDP involves solving non-linear, non-convex optimization problems. The direct problem to solve for the values of all states of the big MDP is
                        
                           (B.1)
                           
                              
                                 
                                    
                                       min
                                    
                                    
                                       
                                          
                                             V
                                          
                                          
                                             t
                                          
                                       
                                       (
                                       ·
                                       )
                                       ,
                                       ∀
                                       t
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       s
                                       ∈
                                       S
                                    
                                 
                              
                              α
                              [
                              s
                              ]
                              
                                 
                                    V
                                 
                                 
                                    1
                                 
                              
                              (
                              s
                              )
                              
                                 
                                    V
                                 
                                 
                                    t
                                    -
                                    1
                                 
                              
                              (
                              s
                              )
                              ⩾
                              r
                              (
                              s
                              ,
                              a
                              )
                              +
                              β
                              
                                 
                                    
                                       min
                                    
                                    
                                       p
                                       ∈
                                       
                                          
                                             P
                                          
                                          
                                             s
                                             ,
                                             a
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       u
                                       ∈
                                       S
                                    
                                 
                              
                              p
                              [
                              u
                              ]
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                              
                              (
                              u
                              )
                              
                              ∀
                              t
                              ∈
                              {
                              2
                              ,
                              …
                              ,
                              T
                              }
                              ,
                              s
                              ∈
                              S
                              ,
                              a
                              ∈
                              
                                 
                                    
                                       
                                          A
                                       
                                       
                                          ‾
                                       
                                    
                                 
                                 
                                    t
                                 
                              
                              (
                              s
                              )
                              .
                           
                        
                     In general, there is no guarantee that if the value function in the last time period is decomposable, 
                        
                           
                              
                                 V
                              
                              
                                 T
                              
                           
                           (
                           u
                           )
                           =
                           
                              
                                 ∑
                              
                              
                                 i
                                 ∈
                                 I
                              
                           
                           
                              
                                 V
                              
                              
                                 T
                              
                              
                                 i
                              
                           
                           (
                           u
                           [
                           i
                           ]
                           )
                        
                     , then the value function of the previous time period 
                        
                           
                              
                                 V
                              
                              
                                 T
                                 -
                                 1
                              
                           
                           (
                           u
                           )
                        
                      will be as well. In fact, that is the entire reason for the Lagrangian relaxation and ADP approaches, which work to achieve this decomposability. Given a non-decomposable value function, consider the problem of finding the worst case transition probabilities 
                        
                           
                              
                                 min
                              
                              
                                 p
                                 ∈
                                 
                                    
                                       P
                                    
                                    
                                       s
                                       ,
                                       a
                                    
                                 
                              
                           
                           
                              
                                 ∑
                              
                              
                                 u
                                 ∈
                                 S
                              
                           
                           p
                           [
                           u
                           ]
                           
                              
                                 V
                              
                              
                                 t
                              
                           
                           (
                           u
                           )
                        
                     . Expanding the definition of 
                        
                           
                              
                                 P
                              
                              
                                 s
                                 ,
                                 a
                              
                           
                        
                     , we can re-write this problem as:
                        
                           
                              
                                 
                                    
                                       min
                                    
                                    
                                       
                                          
                                             p
                                          
                                          
                                             i
                                          
                                       
                                       ∀
                                       i
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       u
                                       ∈
                                       S
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             
                                                ∏
                                             
                                             
                                                i
                                                ∈
                                                I
                                             
                                          
                                       
                                       
                                          
                                             p
                                          
                                          
                                             i
                                          
                                       
                                       [
                                       u
                                       [
                                       i
                                       ]
                                       ]
                                    
                                 
                              
                              
                                 
                                    V
                                 
                                 
                                    t
                                 
                              
                              (
                              u
                              )
                              
                              
                                 
                                    p
                                 
                                 
                                    i
                                 
                              
                              ∈
                              
                                 
                                    P
                                 
                                 
                                    s
                                    [
                                    i
                                    ]
                                    ,
                                    a
                                    [
                                    i
                                    ]
                                 
                                 
                                    i
                                 
                              
                              .
                           
                        
                     The product in the objective function makes this problem non-linear, and non-convex even if the individual uncertainty sets for the little MDPs, 
                        
                           
                              
                                 P
                              
                              
                                 s
                                 [
                                 i
                                 ]
                                 ,
                                 a
                                 [
                                 i
                                 ]
                              
                              
                                 i
                              
                           
                        
                      are polyhedrons.

Ultimately, the uncertainty set of the big MDP has a different structure than that used by Nilim and Ghaoui (2005), and so no known method exists to solve the big MDP exactly. To the best of our knowledge, there is no solver currently available that always solves (B.1) to optimality, and thus we are not able to compare our decomposition methods to an optimal solution.

In this section we compare the performance of the robust policy to the average policy, the policy determined by considering the average transition probabilities between states. This policy substitutes the polyhedral uncertainty set with the expected value of a uniform distribution over all points in the polyhedron. The average policy is determined using the decomposition approach introduced by Adelman and Mersereau (2008). In Fig. C.6
                      we show the cumulative awards for both policies, where RobustL, is the robust policy, and AverageL, is the average policy. The cumulative rewards shown in Fig. C.6 are qualitatively the same across all funding levels. As such, it is natural to ask if the robust policy adds any value over the average policy. The observed performance may be an artifact of the example we consider. Intuitively, the transition probability uncertainty is small, i.e., the average transition probability is not much different from the worst case transition probability. One way to address this issue is to have one or more cases with high negative payoff but relatively low probability of occurring. In addition, if our probability uncertainty sets are not convex, then the average transition probability could lie outside the set. Creating an example where robust policies perform differently than average policies is outside the scope of our contribution. As we mention in Section 6, the purpose of our schools example is to convey that our algorithm may be used to solve a plausible practical problem. Nilim and Ghaoui (2005) already demonstrate that average case policies may perform worse than robust policies.

In this section we describe the parameters used in our stylized computational experiment in Section 6. In the example we consider four schools: small wealthy (SW), small impoverished (SI), large wealthy (LW), and large impoverished (LI). Each school can be in one of five states: failing, poor, average, good, or excellent. Large schools provide the school district rewards of 
                        
                           -
                           20
                           ,
                           -
                           10
                           ,
                           0
                           ,
                           10
                           ,
                           20
                        
                      for being in each of the five respective states. Small schools provide the district rewards of 
                        
                           -
                           10
                           ,
                           -
                           5
                           ,
                           0
                           ,
                           5
                           ,
                           10
                        
                      for being in each of the five respective states. At each planning epoch, the district determines the funding level for each school to be either small, medium, or large The cost for each funding level is 0, 1, and 2 for small schools, and 0, 1, and 3 for large schools, respectively.

Wealthy schools’ transitions are independent of the actions taken by the school district, thus the transition uncertainty sets are only a function of a school’s current state. In Table D.1
                      we list the box uncertainty sets for wealthy schools.

Unlike wealthy schools, impoverished schools respond to external funding levels, and thus the box uncertainty sets are a function of both the current state and the action. The uncertainty sets are listed in Table D.2
                     . Tables D.1 and D.2 provide example uncertainty sets. Any uncertainty sets may be used so long as they can be used as the feasibility region for a tractable optimization problem with a linear objective. Unlike the stylized example in this paper, when using the method proposed here in practice, the uncertainty sets can be determined by subject matter experts.

Using the parameters above we solve the stylized example with the method outlined in Section 4 to generate the figures in Section 6.


                     King and Mathers (1997) propose an approach for school improvement using performance-based accountability and financial rewards. The authors consider several performance indicators, including the students achievements—e.g., in English/language or mathematics, students attendance, the dropout and retention rates, etc.—for inclusion in a school performance measure. They provide an extensive review of programs adopted in four US states, in which based on the state identified performance measures, the schools could qualify for reward money.


                     Miles and Roza (2006) discuss student-weighted resource allocation, which uses student need as the building block of school budgeting. The authors develop a student-weighted index for each school that takes into account the type of students in the school. The student-weighted index is the ratio between two dollar amounts: the actual expenditures at a given school and the expected expenditures, which are computed using district-weighted average expenditures for each type of student. Based on several examples, the study concludes that student-weighted resource allocation provides greater resource equity among schools within districts.


                     BenDavid-Hadar and Ziderman (2011) propose a new budget allocation formula, designed to achieve an equitable distribution of educational achievement. In addition to needs-based elements, similar to Miles and Roza (2006), the suggested composite allocation formula includes an improvement component, so that the schools receive budgetary allocations based on a new incentive measure. The effect of the new budget allocation formula is demonstrated on data from the Israeli schooling system. Datasets relating students’ academic achievement to student background variables, teacher profiles, and school characteristics are analyzed aiming to identify appropriate needs-based formula components. The main approach in this study is the Ordinary Least Squares regression analysis, a method widely used in the literature to measure the relationships between student performance and student background characteristics, see (Gould, Lavy, & Paserma, 2004; Carnoy, 2007; Jenkins, Levacic, & Vignoles, 2006).

There are studies, as Epple and Romano (2003, chap. 8), where the focus is on the differences in student ability, household income, and peer groups within the schooling system and the consequences of those differences on educational benefits. Epple and Romano find that significant heterogeneity in schools and outcomes occurs even under policies that equalize finance and small expenditure variation has small effects. The study suggests that greater funding variation amongst schools may help improve school performance.

A study by Hanushek (1996) concludes that school resource variations are not closely related to variations in student outcomes, i.e., that aggressive spending programs are not always good investment programs unless coupled with other fundamental reforms. In other words, how a budget is utilized appears to be much more important than the size of the budget. This result suggests that the distribution choice of a finite budget across schools in a school district, or districts in a state, may be more important than the size of the overall budget.


                     Rubenstein, Schwartz, Stiefel, and Amor (2007) focus on the resource allocation to individual schools within a given school district. They explore resource allocation across schools in large districts based on factors that reflect differential school costs or factors that are related to the distribution of resources. Their empirical work, based on linear regression, shows that schools with higher percentages of poor pupils often receive more money and have more teachers per pupil, but the teachers tend to be less educated and less paid.

In our model, to be presented below, we assume that schools can be assessed either absolutely or relatively to one another. This is not an unreasonable assumption as school children are tested annually, for example in New Jersey (Jersey Department of Education & Office of Student Achievement & Accountability, 2011). However, school assessment need not be through an annual exam and can be through any method that produces a performance measure for schools. Bessent, Bessent, Kennington, and Reagan (1982) propose one such measure and Borhan and Jemain (2012) propose another, this is not an exhaustive list of all school assessment methods.


                     Bessent et al. (1982) view a school as an enterprise in which the professional staff provide the operating conditions for converting quantifiable resources or inputs into pupil learning outputs. The resources are determined by budgets, teacher assignments, and student assignments; learning outputs are determined by pupil performance on standardized tests. A series of mathematical programs are designed to determine the school efficiency in utilizing the available resources.


                     Borhan and Jemain (2012) propose an approach to assess school performance in an hierarchical setting by using standardized test results. The approach is based on a belief structure to represent an assessment as a distribution. This method, allows for the assessment and the ranking of schools.

To the best of our knowledge, there are two basic approaches to allocating school funding. The first are policies that are the result of a political process, such as No Child Left Behind. The second are policies suggested academically that distribute funding based on school characteristics and past performance (King & Mathers, 1997; Miles & Roza, 2006; BenDavid-Hadar & Ziderman, 2011). We suggest the application of optimization methods to school budget allocation. The main challenge with a direct application of optimization methods is parameterization. Specifically, a typical optimization-based funding allocation method requires data on the impact of funding decisions. To alleviate the need for data, we create a robust optimization-based funding allocation model. Specifically, the model does not require exact or probabilistic assessments of the impact of funding decisions. Instead, it simply requires a range of potential impacts. We believe that an expert decision maker would be able to generate these ranges or it may be possible to derive these ranges based on historical funding decisions. For example, New Zealand maintains data on the country-wide school funding and performance on annual exams (New Zealand Ministry of Education, 2013). It may be possible to use this data to statistically derive ranges of impacts resulting from funding decisions. For the purposes of this study, we use a stylized example to compare our funding method to a policy inspired by No Child Left Behind.

@&#REFERENCES@&#

