@&#MAIN-TITLE@&#An economic replica placement mechanism for streaming content distribution in Hybrid CDN-P2P networks

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Economic model of streaming content distribution in HCDNs is introduced.


                        
                        
                           
                           A novel replica placement mechanism is introduced for streaming content in HCDN.


                        
                        
                           
                           Asymptotic resource consumption of the solution is studied.


                        
                        
                           
                           Performance of the solution is analyzed in comparison to other strategies.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Hybrid CDN-P2P network

Replica placement

Economic mechanism design

Content Delivery Network

@&#ABSTRACT@&#


               
               
                  Hybrid CDN-P2P networks blend Content Delivery Networks (CDN) and Peer-to-Peer (P2P) networks to overcome their shortcomings. Replica placement in these networks is still an open problem. Hierarchical structure of these networks makes it inefficient to use available replica placement strategies specialized to CDN or P2P network domains. In this work, we introduce a novel replication strategy which enables traditional CDNs to offer Hybrid CDN-P2P streaming content delivery services. The proposed solution relies on economic model of the Hybrid CDN and employs a dynamic mechanism to optimize the number and places of replicas for P2P service. In particular, processing and communication complexities of the proposed solution are studied and its performance is analyzed in a typical Hybrid CDN-P2P network in comparison to related strategies.
               
            

@&#INTRODUCTION@&#

Hybrid CDN-P2P networks (HCDN) blend Content Delivery Network (CDN) and Peer-to-Peer (P2P) technologies. They benefit from the advantages of both architectures. CDNs benefit from the ease of management and are able to guarantee high Quality of Service (QoS) [1], but compared to P2P networks, they have higher costs and lower scalability [2]. P2P networks have low running costs and are more scalable, but it is not easy to guarantee their QoS and their management is more challenging [3]. Hybrid CDN-P2P networks combine these technologies to offer low priced high quality services [4].

In HCDNs, users can receive the service in either of Clientâ€“Server (CS) or Peer-to-Peer (P2P) approaches. In P2P mode, users need to contribute to content delivery using their upload bandwidth. In order to incentivize the end-users to contribute to P2P content delivery, HCDNs offer P2P service with higher quality compared with CS service [3]. Therefore, for streaming content distribution, an HCDN needs to replicate the stream with different qualities for CS and P2P end-users. In this work, by introducing a novel Replica Placement (RP) mechanism, a traditional CDN has been enabled to offer hybrid streaming content delivery services. It is assumed that the CDN employs its own replica placement strategy for distribution of the content in CS mode. Based on this assumption, a dynamic replica placement mechanism is designed to replicate the streaming content in P2P mode. This RP mechanism requires cooperation of edge servers and relies on communication of a few small messages to determine the best location of replicas for higher quality content distribution in P2P mode.

HCDNs receive the content from content providers and deliver it to end-users either in CS or P2P modes. They charge the content providers based on the delivered traffic and the Service Level Agreement (SLA), similar to traditional CDNs. In HCDNs, higher QoS in P2P mode encourages users to contribute in P2P content delivery using their upload bandwidth. Therefore, in P2P content delivery approach, the HCDN spends less bandwidth to deliver the content to end-users. As a result, in the SLA between the content provider and HCDN provider, price of content delivery in P2P mode must be kept less than traditional CS service. This is necessary to prevent the HCDN from reducing to a pure P2P service provider and to convince the content provider to request for the hybrid content delivery service. HCDN spends different amount of resources for CS and P2P end-users and charges the content provider differently for CS and P2P services. Therefore, in order to select the best number and places of replicas of P2P content, not only the content delivery costs and popularity of the content (like traditional CDNs) but also revenue of the HCDN must be taken into account.

CDNs, P2P networks and consequently HCDNs consist of thousands of servers and peers. This raises concern over the resource consumption of the RP mechanism. Moreover, high expected availability makes it mandatory to implement the RP as a distributed algorithm. The RP problem in this domain has many varying parameters like popularity of the content, prices of bandwidth and storage, and structure of the network. Therefore, the solution must consider many effective parameters but it must not spend much of valuable network bandwidth for transferring these parameters to and from the agents. It is also important to consume the minimum processing resources to solve the problem.

Existing studies of replica placement in HCDNs [6,7], are confined to replication of static content and employ non-cooperative pull-based approach. In this work, we introduce a cooperative push-based replication strategy that extends the use of the HCDN to streaming content distribution, which is called Hybrid Replica Placement (HPR). To answer the resource consumption concerns, the economic model of the system is introduced. Then a hierarchical tree-based cooperative replica placement is proposed based on the Economic Mechanism Design Theory [5]. Experiments show that using HPR, it is possible to find the optimum placement of replicas. The major contribution of this paper is proposing an economic RP mechanism for replication of streaming content on a traditional CDN to offer Hybrid CDN-P2P streaming content delivery service.

The rest of the paper is organized as follows. We explore related works and compare the problem with similar problems in Section 2. In Section 3, the economic model of the HCDN is introduced. Section 4 is devoted to formal definition of the economic replica placement problem. In Section 5 the economic push based cooperative replica placement mechanism is introduced. The solution is studied through simulation and its outcome is compared with some other strategies in Section 6. Practical implications are discussed in Section 7. Finally the paper is concluded in Section 8.

Effectiveness of combining CDNs and P2P networks has been covered in earlier literature [8,9]. In [10] the cost savings in Hybrid CDN-P2P architecture is studied. A survey of different architectures and models of Hybrid CDN-P2P networks is reported in [11]. In some works, e.g. [12,13,8], the architecture of the HCDN is inspired from P2P systems and the CDN part is employed to fill the missing blocks of the playback buffer. Authors in [14] have tried to introduce a resource scheduling mechanism for these networks. In the literature, there is also another class of HCDN architecture that can be deployed as a commercial Hybrid CDN-P2P network. They can extend existing commercial CDNs and are able to tolerate the fact that some end-users might not prefer to install the special hybrid content distribution application on their machines [15]. This architecture is able to serve the end-users directly; therefore it is not mandatory for end-users to install the application software. However, end-users equipped with this special software are able to receive the content with higher quality [9]. Livesky [15] can be referred as one of these architectures and also as the first successful deployment of Hybrid CDN-P2P networks. It extends a traditional CDN to a Hybrid CDN-P2P network and has succeeded to serve 10million concurrent requests for streaming videos. Accordingly, the architecture introduced in this network was adopted in the present study.

CDNs host the third-party content for high performance delivery of any digital content, including static files, dynamic content, streaming media (e.g. audio, real time video), and different content services (e.g. e-commerce service) [1]. Among these categories, HCDNs are most suited for distribution of streaming content, where it is possible to offer the end-users a higher level of quality and benefit from their contribution [12]. It can be observed that most of the works in the field of HCDNs are concentrated on distribution of streaming content [11].

Replica Placement (RP) and Request Routing (RR) are two key mechanisms affecting performance of CDNs [16]. Most commercial CDNs rely on DNS-based request routing mechanism [1]. Consequently, in order to optimize the performance and economics of content distribution, the RP strategy must be designed considering that the RR mechanism has a predefined DNS-based behavior. Despite the fact that there has been a significant body of research on replica placement in traditional CDNs [1] and P2P networks [3], replica placement in Hybrid CDN-P2P networks is studied just in [6,7]. Both of these works are confined to placement of replicas of static content while in this work we employ the HCDN for distribution of streaming content.

In CDNs, content replication is performed using cooperative push-based, non-cooperative pull-based or cooperative pull-based approaches [1]. In the non-cooperative pull-based approach, requests of clients are redirected to their closest edge server and edge servers pull content from the origin server in case of cache misses. Many commercial CDNs use this approach [16]. This approach leads to high traffic on the origin server and seems to be inefficient for replication of high quality streaming content in a hybrid CDN environment. The cooperative pull-based approach differs from the non-cooperative approach in the sense that edge servers cooperate with each other to get the requested content in case of a cache miss. This approach is employed mostly by academic CDNs like Coral [17]. This approach also seems to be inefficient in HCDNs, since churn rate of P2P end-users makes it necessary to run the replication algorithm when a new P2P end-user appears. Cooperative push-based approach relies on the pre-fetching of content to the edge servers. Content is pushed to the edge servers from the origin, and edge servers cooperate to reduce replication and update cost [1]. In the literature, push-based cooperative RP algorithms have been used successfully in many domains from Data-Grids [18], and P2P networks [19] to CDNs [1]. This approach is compatible with our problem and we have introduced our solution based on this approach. Our solution has two key differences with aforementioned works; first, instead of trying to minimize replication costs, it considers both revenue and costs of the system and maximizes the net profit of the HCDN. Second, in order to preserve compatibility with the CDN environment, it cooperates with the existing replica placement of the CDN and considers current CS content delivery service.

Several works can be found in the literature demonstrating the effectiveness of different replication strategies for the content. Under cooperative push-based approach, greedy-global heuristic algorithm is reported to be efficient for making replication decision among cooperating edge servers [20]. Kangasharju et al. [20] have employed four heuristics, namely random, popularity, greedy-single, and greedy-global for replication of the content and in this work we compare outcome of the proposed solutions with this set of strategies.

Thanks to the high potential of Economic Mechanism Design Theory [5], we have employed it to introduce the problem formally and design an efficient mechanism considering resource consumption. Implementation of privacy preserving mechanisms demands minimum of communication resources [5]. Economic mechanisms are classified as direct and indirect. In direct mechanisms, all the decisions are made based on private information of each agent plus information which is transferred to it by other agents. These mechanisms demand less processing resources [5]. In order to guarantee that minimum communication and processing resources are spent in the implementation; our solution is based on a direct and privacy preserving mechanism.


                     Table 1
                      summarizes the notations used in this paper to model economics and performance of streaming content distribution in HCDN. Fig. 1
                      illustrates architecture of a Hybrid CDN-P2P network employed to define the replica placement problem. In these networks, the content provider signs an SLA with the HCDN provider and supplies the content i having two different qualities (BWCS
                     
                     ,
                     
                        i
                      and BWP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                     ) to distribution servers of the HCDN. The revenue in the contracted SLAi
                      for distribution of content i between a commercial HCDN provider and content provider can be quantified as follows:
                        
                           (1)
                           
                              
                                 
                                    R
                                 
                                 
                                    SLAi
                                 
                              
                              =
                              
                                 
                                    P
                                 
                                 
                                    CS
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    BW
                                 
                                 
                                    CS
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    N
                                 
                                 
                                    totalCS
                                    ,
                                    i
                                 
                              
                              +
                              
                                 
                                    P
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    BW
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    N
                                 
                                 
                                    totalP
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              ,
                           
                        
                     where RSLAi
                      determines the revenue of the Hybrid CDN provider according to SLAi
                     . NtotalCS
                     
                     ,
                     
                        i
                      and NtotalP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                      represent total number of users served with content i using CS and P2P approaches, respectively. PCS
                     
                     ,
                     
                        i
                      and PP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                      denote contracted prices of bandwidth in CS and P2P modes. Bandwidth of content i in CS and P2P modes are indicated by BWCS
                     
                     ,
                     
                        i
                      and BWP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                     , respectively. In order to keep P2P content distribution economic and also prevent the HCDN from becoming a pure CDN, it is assumed that PCS
                     
                     ,
                     
                        i
                     
                     >
                     PP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                     
                     >0. Additionally, BWCS
                     
                     ,
                     
                        i
                     
                     â‰ª
                     BWP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                      guarantees that the users have enough incentives to contribute to P2P content delivery. The cost function of content distribution at the edge servers in Hybrid CDN-P2P network for SLAi
                      can be represented as:
                        
                           (2)
                           
                              
                                 
                                    Cost
                                 
                                 
                                    SLAi
                                 
                              
                              =
                              
                                 
                                    DistCost
                                 
                                 
                                    i
                                 
                              
                              +
                              
                                 
                                    RepCost
                                 
                                 
                                    i
                                 
                              
                              =
                              
                                 
                                    
                                       âˆ‘
                                    
                                    
                                       ES
                                       âˆˆ
                                       
                                          
                                             Replicas
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                              (
                              
                                 
                                    DistCost
                                 
                                 
                                    ES
                                    ,
                                    i
                                 
                              
                              +
                              
                                 
                                    RepCost
                                 
                                 
                                    ES
                                    ,
                                    i
                                 
                              
                              )
                              ,
                           
                        
                     where the set Replicasi
                      denotes all the edge servers containing a replica of the content i. DistCosti
                      and RepCosti
                      indicate costs spent by HCDN for distribution and replication of the content i. DistCostES
                     
                     ,
                     
                        i
                      and RepCostES
                     
                     ,
                     
                        i
                      denote content distribution and replication cost on edge server ES for content i.

In this system, the RR mechanism redirects end-users requesting the content i to the suitable edge servers containing replicas of i. End-users have the option to request content i in either of CS or P2P modes. Therefore, each edge server receives ReqES
                     
                     ,
                     
                        CS
                     
                     ,
                     
                        i
                      and ReqES
                     
                     ,
                     
                        P
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                      requests for the stream in CS and P2P modes, respectively. Users interested to receive the higher quality content in P2P mode need to have their machines equipped with the special software and in practice [6] it is not likely to have the software installed on all the receiving machines. Therefore, an edge server even with high number of P2P receivers cannot stop to serve the content in CS mode [15]. When the number of requests on an edge server is small, all the requests are served in CS mode but whenever the number of P2P enabled end-users exceeds the bootstrapping threshold, P2P content delivery begins [14]. Therefore, we have:
                        
                           (3)
                           
                              
                                 
                                    Rep
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              âŠ‚
                              
                                 
                                    Rep
                                 
                                 
                                    CS
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    Replicas
                                 
                                 
                                    i
                                 
                              
                              ,
                           
                        
                     where RepP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                      and RepCS
                     
                     ,
                     
                        i
                      represent the set of edge servers containing replicas of high quality content (P2P mode) and base quality content (CS mode). In HCDNs, P2P content delivery becomes promising when the number of end-users interested to receive the content in P2P mode increases beyond a bootstrapping threshold, TB
                     . In other words, when the number of end-users requesting to receive the content in P2P mode is below the bootstrapping threshold or when the edge server does not contain a replica of the requested content for P2P content delivery, all the end-users will be served with the base quality CS content. Therefore, we have:
                        
                           (4)
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      P
                                                      2
                                                      P
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                =
                                                0
                                                
                                                and
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      CS
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                =
                                                
                                                   
                                                      Req
                                                   
                                                   
                                                      CS
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                +
                                                
                                                   
                                                      Req
                                                   
                                                   
                                                      P
                                                      2
                                                      P
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                if
                                                
                                                (
                                                ES
                                                âˆ‰
                                                
                                                   
                                                      Rep
                                                   
                                                   
                                                      P
                                                      2
                                                      P
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                or
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      P
                                                      2
                                                      P
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                <
                                                
                                                   
                                                      T
                                                   
                                                   
                                                      B
                                                   
                                                
                                                )
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      P
                                                      2
                                                      P
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                =
                                                
                                                   
                                                      Req
                                                   
                                                   
                                                      P
                                                      2
                                                      P
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                and
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      CS
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                =
                                                
                                                   
                                                      Req
                                                   
                                                   
                                                      CS
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                
                                                
                                                if
                                                
                                                (
                                                ES
                                                âˆˆ
                                                
                                                   
                                                      Rep
                                                   
                                                   
                                                      P
                                                      2
                                                      P
                                                      ,
                                                      i
                                                   
                                                
                                                
                                                and
                                                
                                                
                                                   
                                                      N
                                                   
                                                   
                                                      P
                                                      2
                                                      P
                                                      ,
                                                      ES
                                                      ,
                                                      i
                                                   
                                                
                                                >
                                                
                                                   
                                                      T
                                                   
                                                   
                                                      B
                                                   
                                                
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                              ,
                           
                        
                     where ReqP
                     
                     2
                     
                        P
                     
                     ,
                     
                        ES
                     
                     ,
                     
                        i
                      and ReqCS
                     
                     ,
                     
                        ES
                     
                     ,
                     
                        i
                      denote the number of end-users requesting to receive content i from the edge server ES in P2P and CS mode, respectively. NCS
                     
                     ,
                     
                        ES
                     
                     ,
                     
                        i
                      and NP
                     
                     2
                     
                        P
                     
                     ,
                     
                        ES
                     
                     ,
                     
                        i
                      indicate the number of end-users receiving content i in CS and P2P modes from ES, respectively. TB
                      represents the bootstrapping threshold of P2P content distribution.

The bandwidth consumption of an edge server to serve CS and P2P end-users receiving content i is expressed as follows:
                        
                           (5)
                           
                              
                                 
                                    BW
                                 
                                 
                                    ES
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    BW
                                 
                                 
                                    CS
                                    ,
                                    ES
                                    ,
                                    i
                                 
                              
                              +
                              
                                 
                                    BW
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    ES
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    BW
                                 
                                 
                                    CS
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    N
                                 
                                 
                                    CS
                                    ,
                                    ES
                                    ,
                                    i
                                 
                              
                              +
                              (
                              1
                              -
                              
                                 
                                    Î±
                                 
                                 
                                    ES
                                    ,
                                    i
                                 
                              
                              )
                              Â·
                              
                                 
                                    BW
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    N
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    ES
                                    ,
                                    i
                                 
                              
                              ,
                           
                        
                     where BWES
                     
                     ,
                     
                        i
                     , BWCS
                     
                     ,
                     
                        ES
                     
                     ,
                     
                        i
                      and BWP
                     
                     2
                     
                        P
                     
                     ,
                     
                        ES
                     
                     ,
                     
                        i
                      symbolize the total bandwidth consumption, the bandwidth spent for CS end-users (NCS
                     
                     ,
                     
                        ES
                     
                     ,
                     
                        i
                     ) and the bandwidth spent to serve P2P end-users (NP
                     
                     2
                     
                        P
                     
                     ,
                     
                        ES
                     
                     ,
                     
                        i
                     ) at this edge server, respectively. Î±ES
                     
                     ,
                     
                        i
                      represents the effectiveness factor of P2P content delivery for content i at this edge server. The prices of bandwidth at different edge servers are neither equal nor constant in practice and are represented by BWPES
                     . So, content distribution cost is quantified by Eq. (6) and denoted by DistCosti
                     .
                        
                           (6)
                           
                              
                                 
                                    DistCost
                                 
                                 
                                    i
                                 
                              
                              =
                              
                                 
                                    
                                       âˆ‘
                                    
                                    
                                       ES
                                       âˆˆ
                                       
                                          
                                             Replicas
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    DistCost
                                 
                                 
                                    ES
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    
                                       âˆ‘
                                    
                                    
                                       ES
                                       âˆˆ
                                       
                                          
                                             Replicas
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                              (
                              
                                 
                                    BW
                                 
                                 
                                    ES
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    BWPrice
                                 
                                 
                                    ES
                                 
                              
                              )
                              ,
                           
                        
                     
                  

Replication cost consists of two parts: replica transmission cost denoted by TransCostES
                     
                     ,
                     
                        i
                      and buffering (storage cost) symbolized by StrCostES
                     
                     ,
                     
                        i
                     . Therefore, the replication cost for content i can be quantified by:
                        
                           (7)
                           
                              
                                 
                                    RepCost
                                 
                                 
                                    i
                                 
                              
                              =
                              
                                 
                                    
                                       âˆ‘
                                    
                                    
                                       ES
                                       âˆˆ
                                       
                                          
                                             Replicas
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    RepCost
                                 
                                 
                                    ES
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    
                                       âˆ‘
                                    
                                    
                                       ES
                                       âˆˆ
                                       
                                          
                                             Rep
                                          
                                          
                                             CS
                                             ,
                                             i
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    RepCost
                                 
                                 
                                    ES
                                    ,
                                    CS
                                    ,
                                    i
                                 
                              
                              +
                              
                                 
                                    
                                       âˆ‘
                                    
                                    
                                       ES
                                       âˆˆ
                                       
                                          
                                             Rep
                                          
                                          
                                             P
                                             2
                                             P
                                             ,
                                             i
                                          
                                       
                                    
                                 
                              
                              
                                 
                                    RepCost
                                 
                                 
                                    ES
                                    ,
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    
                                       âˆ‘
                                    
                                    
                                       ES
                                       âˆˆ
                                       
                                          
                                             Rep
                                          
                                          
                                             CS
                                             ,
                                             i
                                          
                                       
                                    
                                 
                              
                              (
                              
                                 
                                    TransCost
                                 
                                 
                                    ES
                                    ,
                                    CS
                                    ,
                                    i
                                 
                              
                              +
                              
                                 
                                    StrCost
                                 
                                 
                                    ES
                                    ,
                                    CS
                                    ,
                                    i
                                 
                              
                              )
                              +
                              
                                 
                                    
                                       âˆ‘
                                    
                                    
                                       ES
                                       âˆˆ
                                       
                                          
                                             Rep
                                          
                                          
                                             P
                                             2
                                             P
                                             ,
                                             i
                                          
                                       
                                    
                                 
                              
                              (
                              
                                 
                                    TransCost
                                 
                                 
                                    ES
                                    ,
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              +
                              
                                 
                                    StrCost
                                 
                                 
                                    ES
                                    ,
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              )
                              .
                           
                        
                     
                  

We aim to add an RP mechanism to a traditional CDN and enable it to perform as an HCDN. Therefore, it is assumed that the set RepCS
                     
                     ,
                     
                        i
                      is determined by the existing RP mechanism of the CDN and it is considered as an input variable of our problem. We focus on optimizing economics of the system considering RepP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                      as optimization variable. Consequently, we have:
                        
                           (8)
                           
                              
                                 
                                    RepCost
                                 
                                 
                                    ES
                                    ,
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    TransCost
                                 
                                 
                                    ES
                                    ,
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              +
                              
                                 
                                    StrCost
                                 
                                 
                                    ES
                                    ,
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    BW
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    PBW
                                 
                                 
                                    Source
                                    ,
                                    ES
                                 
                              
                              +
                              
                                 
                                    Size
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              Â·
                              
                                 
                                    PSTR
                                 
                                 
                                    ES
                                 
                              
                              ,
                           
                        
                     where BWP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                      and SizeP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                      denote the bandwidth of content i in P2P mode and its required storage space, respectively. PBWES
                     
                     ,
                     
                        Source
                      represents the price of bandwidth for transferring the stream of content for distribution in P2P mode from the source (cooperating edge server containing the replica of the content i in P2P mode) to ES, and PSTRES
                      symbolizes the price of storage at ES. Therefore, the objective function, net-profit of the HCDN, based on Eqs. (1)â€“(3), (5)â€“(8) can be quantified as:
                        
                           (9)
                           
                              
                                 
                                    NetProfit
                                 
                                 
                                    SLAi
                                 
                              
                              =
                              
                                 
                                    R
                                 
                                 
                                    SLAi
                                 
                              
                              -
                              
                                 
                                    Cost
                                 
                                 
                                    SLAi
                                 
                              
                              .
                           
                        
                     
                  

In order to maximize NetProfitSLAi
                     , the RP mechanism must determine RepP
                     
                     2
                     
                        P
                     
                     ,
                     
                        i
                     . All the other parameters of the problem including the set of replicas for CS content, the population of requests, bootstrapping threshold, storage costs and communication costs are not controllable in this phase; therefore, the decision problem to put replicas of P2P content is defined as follows:
                        
                           (10)
                           
                              
                                 
                                    Rep
                                 
                                 
                                    P
                                    2
                                    P
                                    ,
                                    i
                                 
                              
                              =
                              
                                 
                                    argmax
                                 
                                 
                                    
                                       
                                          rep
                                       
                                       
                                          P
                                          2
                                          P
                                       
                                    
                                    âˆˆ
                                    P
                                    (
                                    
                                       
                                          Rep
                                       
                                       
                                          CS
                                          ,
                                          i
                                       
                                    
                                    )
                                 
                              
                              (
                              
                                 
                                    NetProfit
                                 
                                 
                                    SLAi
                                 
                              
                              (
                              
                                 
                                    rep
                                 
                                 
                                    P
                                    2
                                    P
                                 
                              
                              )
                              )
                              ,
                           
                        
                     where P(RepCS
                     
                     ,
                     
                        i
                     ) denotes the power set of RepCS
                     
                     ,
                     
                        i
                     . Since |P(RepCS
                     
                     ,
                     
                        i
                     )|=2(|
                     
                        RepCS
                     
                     ,
                     
                        i
                     
                     |), finding the optimum replication set for the stream in P2P mode for small replica sets is trivial. However, considering the fact that popular CDNs, e.g. Akamai, benefit from thousands of edge servers [1], it can be concluded that it is not possible to rely on an exhaustive search solution to find the optimum set of replicas for the content in Hybrid mode.

In order to design the RP mechanism of the HCDN (HRP), the Economic Mechanism Design Theory is employed. In this section, economic model of the problem which is called Hybrid Replica Placement Model (HRPM) is formalized mathematically. Subsequently, HRP is introduced formally using the popular notations of the Economic Mechanism Design Theory [5]. The major advantages of HRPM over popular cost models used in the literature of content distribution are twofold. First, it computes the complex net profit function of hybrid content delivery system instead of raw cost function of replica placement considered in traditional CDNs [1]. Second, it embeds all the constraints and goals of the problem in a single dimensional objective function suitable for efficient mechanism design [5].

As seen in Eq. (3), the underlying network for the replication of RepP
                        
                        2
                        
                           P
                        
                        ,
                        
                           i
                         consists of an overlay network composed of edge servers that contain replicas of the content in CS mode. The first responsibility of this overlay network is to disseminate the base quality content from origin servers to replica servers for CS service, RepCS
                        
                        ,
                        
                           i
                        , through multicasting. In order to keep the problem tractable, we make a technical assumption about the overlay network. We assume that the overlay multicast network employed for distribution of replicas for P2P content distribution is equal to the multicasting infrastructure composed of RepCS
                        
                        ,
                        
                           i
                        . This technical assumption confines the source of transferring the P2P content for cooperative replication to ancestor servers in this multicasting infrastructure. Relying on this hierarchical infrastructure, it is possible to quantify the net profit of HCDN for distribution of content i in a sub-tree rooted at ES recursively as:
                           
                              (11)
                              
                                 NetProfit
                                 (
                                 ES
                                 ,
                                 h
                                 ,
                                 i
                                 )
                                 =
                                 Max
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            âˆ‘
                                                         
                                                         
                                                            child
                                                            âˆˆ
                                                            ES
                                                            _
                                                            child
                                                         
                                                      
                                                   
                                                   NetProfit
                                                   (
                                                   child
                                                   ,
                                                   h
                                                   +
                                                   1
                                                   ,
                                                   i
                                                   )
                                                   
                                                   (
                                                   case:a No replica at
                                                   
                                                   ES
                                                   )
                                                
                                             
                                             
                                                
                                                   +
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         PureCDN
                                                         ,
                                                         ES
                                                         ,
                                                         i
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         RepCost
                                                      
                                                      
                                                         CS
                                                         ,
                                                         ES
                                                         ,
                                                         i
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         DistCost
                                                      
                                                      
                                                         PureCDN
                                                         ,
                                                         ES
                                                         ,
                                                         i
                                                      
                                                   
                                                   ,
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            âˆ‘
                                                         
                                                         
                                                            child
                                                            âˆˆ
                                                            ES
                                                            _
                                                            child
                                                         
                                                      
                                                   
                                                   NetProfit
                                                   (
                                                   child
                                                   ,
                                                   1
                                                   ,
                                                   i
                                                   )
                                                   
                                                   (
                                                   case:b 1 replica at
                                                   
                                                   ES
                                                   )
                                                
                                             
                                             
                                                
                                                   +
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         HCDN
                                                         ,
                                                         ES
                                                         ,
                                                         i
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         RepCost
                                                      
                                                      
                                                         CS
                                                         ,
                                                         ES
                                                         ,
                                                         i
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         RepCost
                                                      
                                                      
                                                         P
                                                         2
                                                         P
                                                         ,
                                                         ES
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         DistCost
                                                      
                                                      
                                                         HCDN
                                                         ,
                                                         ES
                                                         ,
                                                         i
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        where NetProfit(ES,h,i) denotes the maximum net profit of content distribution for the sub-tree rooted at ES when the first replica of the high quality content is located at h steps higher than ES. In this equation, when it is not economic to have a replica of high quality content at ES, (case a in Eq. (11) and Fig. 2
                        ), all the child sub-trees of ES denoted by ES_child have to fetch the content from h
                        +1 steps upper. In this case, all the requests redirected to ES are served in the CS mode. Thus, the revenue of ES is denoted with RPureCDN
                        
                        ,
                        
                           ES
                        
                        ,
                        
                           i
                         and is therefore calculated like that of a pure CDN server. In this case, the replication cost is paid only for the CS content. Consequently, the distribution cost is calculated multiplying bandwidth of content i in CS mode by price of the bandwidth at ES, and total number of requests redirected to ES, (DistCostPureCDN
                        
                        ,
                        
                           ES
                        
                        ,
                        
                           i
                        
                        =
                        BWCS
                        
                        ,
                        
                           i
                        
                        â‹…
                        PBWES
                        
                        â‹…(ReqES
                        
                        ,
                        
                           CS
                        
                        ,
                        
                           i
                        
                        +
                        ReqES
                        
                        ,
                        
                           P
                        
                        2
                        
                           P
                        
                        ,
                        
                           i
                        )).

When it is economic and possible to have a replica at ES, (case b in Eq. (11) and Fig. 2), all the child sub-trees receive the high quality P2P content replicated at ES from one step upper; however, in addition to the replication cost for base quality content, ES has to pay for the replication of high quality instance of content i in P2P mode (RepCostP
                        
                        2
                        
                           P
                        
                        ,
                        
                           ES
                        
                        ,
                        
                           i
                        ). In this case, ES acts as a hybrid content distribution server. Therefore, the revenue of edge server, ES, is calculated as an HCDN server using Eq. (1). Based on Eq. (11) and knowing that the maximum depth of the multicasting trees in IP networks is limited, it is possible to find the maximum net profit for every multicasting infrastructure, finding the maximum net profit for the root server (NetProfit(Root,0,i)), recursively.

In order to employ Eq. (11) efficiently and design a resourceful replication mechanism, Economic Mechanism Design Theory is employed. In this approach, notations illustrated in Fig. 3
                         are used to introduce problems and mechanisms formally [5].

Relying on this theory the problem is defined as follows:


                        Given:
                           
                              â€¢
                              a class Î˜ of environments (here all the replica placement problems in this domain with parameters introduced in Table 1),

an outcome space Z (single dimension profit function of the HCDN based on Eq. (1)),

and a goal function F (Eq. (10)).


                        Requested:

An economic mechanism Ï€
                        =(M, Î¼, h) that realizes the problem (in this case maximizes the net profit of HCDN)
                           
                              â€¢
                              where M represents the message space used to solve the problem and yield equilibrium,


                                 Î¼ symbolizes the function used for generating the group equilibrium messages,

and h denotes the function which determines the outcome.

The problem is solved and the best mechanism is chosen if and only if:
                           
                              (12)
                              
                                 âˆ€
                                 Î¸
                                 âˆˆ
                                 Î˜
                                 
                                 F
                                 (
                                 Î¸
                                 )
                                 =
                                 h
                                 (
                                 Î¼
                                 (
                                 Î¸
                                 )
                                 )
                                 .
                              
                           
                        
                     

In this problem, the outcome function, h, equals the total net profit of the HCDN, NetProfit(Root,0,i). Based on Eq. (11), every edge server needs to receive the tabular function NetProfit from its direct child sub-trees. Therefore, M includes messages containing the profit function and Î¼ consists of messages carrying the values of NetProfit function between each node and its parent. Agents employed to implement the mechanism include all the members of RepCS
                        
                        ,
                        
                           i
                        . In order to find the exact value of net profit for the HCDN and evaluate Eq. (11) for all the edge servers, it is needed to traverse the multicasting tree in a Reverse Beneath First Search (RBFS) order and calculate the NetProfit function recursively. After the maximum of NetProfit(Root,0,i) is found, in order to determine the replication set for P2P content, it is needed to traverse the multicasting tree with Beneath First Search (BFS) order. Moreover, the selected value of NetProfit function at each node determines which nodes are to replicate the P2P content. Fig. 4
                         illustrates the flow of messages among the agents in this mechanism.

For the first phase (RBFS), since the parent node by itself requests the successors to calculate and transfer their NetProfit function, it is not necessary for the messages to contain the address of the edge server, ES, and the ID of the content, i. Therefore, the profit function in direct implementation of the solution can be expressed by at least a single dimension data matrix with a maximum length of H (maximum height of the tree). For the second phase (BFS), the parent node needs to declare the selected value of NetProfit vector calculated previously by the child node which maximizes its net profit. Therefore, in this phase, messages contain just one number. Since in Eq. (11) each edge server just relies on its own information and the value of net profit function calculated by its direct child sub trees, it can be concluded that this solution is a direct mechanism.

@&#IMPLEMENTATION@&#

HRP is implemented by using a custom written simulation program. The simulation program is written in C++ programming language, it is compiled with Borland C++ version 5.02, and it is run on a Microsoft Windows 7 platform. The physical machine used to implement the mechanism had four 2.4GHz processing cores and 8GB of RAM.

In order to simulate the HCDN Replica Placement mechanism (HRP), a utility maximizing agent is assumed to be present at every node of the multicasting network (RepCS
                        
                        ,
                        
                           i
                        ). Pseudo code 1 introduces the simplified implementation of HRP mechanism in C++ object oriented environment. Agents (ES objects) are organized in a bidirectional tree and calculate the tabular function NetProfit(h,i), cooperatively. The mechanism consists of two recursive traversals of the multicasting tree implemented using Find_Max_Net_Profit() and Find_Rep_Set() functions.

In Pseudo code 1, the main() function initializes the simulation program by fetching the multicasting infrastructure and all the parameters from source files to the memory. Next, it calls the Find_Max_Net_Profit() recursive function at the root of the multicasting tree to find the overall maximum net profit. After finding the maximum net profit, the main function passes it to the Find_Rep_Set() function at the root node. Calling this recursive function causes all the replicas to be placed on their appropriate edge servers belonging to the multicasting tree. Finally, results are written back to report files for analysis.

The Find_Max_Net_Profit(h,i) function calculates the maximum net profit of the sub-tree rooted at ES when the first replica of the content i is assumed to be at h steps higher. In order to avoid complexities of RBFS, this function employs a pre-order traversal of the sub-tree. Therefore, first, through a for loop, Find_Max_Net_Profit(h
                        +1,i) is called for all the child sub-trees of the current node. After returning from recursive function calls, Find_Max_Net_Profit(â€¦) considers two cases of having 0 or 1 replicas at this node. Then, the maximum of these two cases is stored and returned as the maximum expected net profit of the sub-tree rooted at ES.
                           
                              
                           
                        
                     

The Find_Rep_Set(h,i,Max_net_profit) calculates appropriate replication set when the first replica of the content i exists at h levels upper and it is expected to gain Max_net_profit from the hybrid content delivery at this sub-tree. For the first time, the main() calls this function. As a result, all the other functions on nodes of multicasting tree are called recursively. As it can be seen in Pseudo code 1, in order to avoid complexities of BFS, Find_Rep_Set(h,i,Max_net_profit) relies on a post-order traversal. It starts with deciding whether to place a replica or not based on the expected net profit. Based on this decision, the set of replicas is updated. Then, through the recursive function calls this process continues until leaves of the multicasting tree.

Based on Pseudo code 1, the maximum depth of recursion to calculate the maximum net-profit and the best replication set is H (height of the multicasting tree, approximated by Log(n), where n
                        =|RepCS
                        
                        ,
                        
                           i
                        |). Therefore, at each node, ES, the recursive function demands O((Log(n))2) of processing resources. This process also requires O(Log(n)) of memory and O(Log(n)) of communication at each node to store and transmit the net profit matrix. Where, n represents number of nodes in multicasting tree. Since all the processing, memory and communication demands of the HRP on every node of the HCDN scales below linear, (O(n)), it can be concluded that, the distributed implementation of the HRP, is scalable. Therefore, it is capable of being used in large scale HCDNs composed of thousands of servers and serving millions of end-users.

In centralized implementation, aggregated complexity of HRP is of O(n(Log(n)2), O(n(Log(n)) and O(n(Log(n)) for processing, memory and communication resources, respectively. Centralized implementation of HRP scales sub-quadratic. Therefore even in simulation environment where all the calculations are performed in a single machine, results could be achieved within a reasonably short time.

HRP is evaluated in two ways. Relying on a simulation test-bed, performance of HRP is studied. Additionally, to perform a comparative study on the performance and economics of HRP, five other replica placement strategies are implemented. These replication strategies include Greedy Global (GG), Single Greedy (SG), Hot-Spot (HS), Random (RND) and pure CDN. GG algorithm is conceived to yield near optimal outcome. SG solution differs from GG only in that SG just calculates the sorted list of replication candidates once. In other words, it does not consider the effect of previous replicas on the place of next replicas. HS approach devotes replicas to servers with higher number of requests in P2P mode. Outcomes of RND approach demonstrate the importance of replication strategy. In addition to these strategies, performance and economics of a pure CDN environment is also simulated and reported.

Although the HRP mechanism is capable of solving the problem in any environment, maximum effort has been made by authors to set the parameters of experiments as real as possible. Some parameters of the environment (e.g. price of bandwidth at edge servers, price of storage and trace of requests) are set using real log files of a large-scale traditional CDN operating in Australia during the month of May 2013. Trace of requests are extracted from log files of request routing engine of the CDN, scaled and applied to the HCDN. Price of bandwidth for CS service is extracted from the SLA of the CDN and in order to keep the SLA incentive compatible, the price of bandwidth for P2P service is assumed as 0.8 of CS service bandwidth price. A typical 1000s video with bandwidth of 512Kbps is considered as the CS service. Bandwidth of P2P content is assumed as double of CS service (1Mbps). From our previous study on request routing and resource allocation in HCDNs [21], Î± (effectiveness ratio of P2P content distribution) is assumed to be 0.165. Also based on this study it is assumed that 16% of end-users request to receive the content only in CS mode.

In order to keep the experiments comparable, churn rate of end-users are not considered. In other words, the users enter the system in an accumulative manner to enable us to study the behavior of HRP, increasing the load without worrying about the churning rate. Since we are about to study the performance of the replica placement of HCDN in P2P mode, it is assumed that all the 1000 edge servers and 1 origin server contain replicas of the content in CS mode statically. This assumption excludes effects of replica placement of CS content from our study. In order to obtain a realistic medium size multicasting overlay network, as the replica distribution network, we have generated an internet-like weighted graph with 1001 nodes using IGEN [22]. We have generated the multicasting tree using our multicasting mechanism [23,24] on the top of this graph. Table 2
                         summarizes key parameters of the experiment.

Except HRP, other replication strategies need to have the number of replicas determined prior to their decision making phase. In addition, in order to keep the comparisons fare, it is necessary to compare results with the same number of replicas. Therefore, at the first experiment applying the load of requests, we have determined the optimum number of replicas using HRP for every number of concurrent requests and in the second experiment, each of replica placement strategies are fed with this number of replicas.

In this experiment, HRP is applied as the replication strategy in a typical HCDN business for distribution of a streaming video content. With assumptions described previously, the load on the HCDN is increased until 1million requests. Fig. 5
                         illustrates number of replicas for HRP, increasing the load of requests on HCDN. When total number of requests is small, number of replicas for P2P content is zero. At this point for some edge servers, number of content requests in P2P mode is below the bootstrapping threshold of P2P content delivery. At some other servers with enough number of requests, high replica distribution cost prevents the edge server to replicate the content and start hybrid content delivery. When number of requests increases, some edge servers with low replication costs which receive high number of requests for P2P content, find it economic to replicate the P2P content. After this point, further increase in the load of system results in a sharp increase in the number of replicas. On one hand, more and more edge servers find the number of requests that they receive for P2P content higher than TB
                        . On the other hand, in the multicasting tree, replication of the P2P content on even a handful number of edge servers decreases the replica transmission cost (TransCostP
                        
                        2
                        
                           P
                        
                        ,
                        
                           ES
                        
                        ,
                        
                           i
                        ) for other servers dramatically. After this sharp increase in the number of replicas, just servers with very high price of storage remain outside of RepP
                        
                        2
                        
                           P
                        
                        ,
                        
                           i
                        . With future increase in the number of concurrent end-users, these servers smoothly join to the replication set RepP
                        
                        2
                        
                           P
                        
                        ,
                        
                           i
                        . As it can be obviously seen, when number of requests is increased significantly (1million) RepP
                        
                        2
                        
                           P
                        
                        ,
                        
                           i
                         includes majority of edge servers (90.5%).


                        Fig. 6
                         represents number of requests for CS and P2P content submitted to the HCDN (denoted by ReqCS
                         and ReqP
                        
                        2
                        
                           P
                        ) and number of CS and P2P end-users receiving service from HCDN (denoted by NCS
                         and NP
                        
                        2
                        
                           P
                        ) when HRP approach is applied for different total number of requests. As it can be obviously seen, same as Fig. 5 when number of replicas increases, number of end-users served in P2P mode increases and gets closer to the number of requests for the content in P2P mode.

As illustrated in Fig. 7
                        , when the number of requests increases, total bandwidth contribution of end-users (symbolized by TBCU) increases. As a result, the bandwidth consumption of the HCDN (represented with TBSE), is increased very slowly. Total bandwidth delivered to end-users is summation of bandwidth investment of HCDN and contribution of end-users. Based on Fig. 7, when number of requests is small, total bandwidth delivered to end-users (TBDE) is equal to the bandwidth consumption of HCDN. When the number of concurrent requests at some edge servers increases enough and edge servers begin to replicate the P2P content, TBDE experiences a sharp increase. Further increase of load boosts TBDE near linearly.


                        Figs. 8â€“10
                         represent economics of an HCDN employing HRP with a pure CDN under the same load conditions. Fig. 8 shows that although, in the hybrid mode aggregated bandwidth delivered to the end-users is much higher than a pure CDN, costs spent by HCDN does not grow fast. When the load of HCDN becomes significant, its cost function crosses the cost function of the pure CDN. This observation confirms economic effectiveness of the HRP and hybrid architecture. Fig. 9
                         illustrates revenue of the HCDN in hybrid and pure CDN content delivery modes. Revenue of the HCDN is equal to the cost function of content provider. It is observed that in the hybrid mode, when the number of requests is significant and majority of end-users receive the content with double quality, content provider pays much less than twice of the content delivery cost in pure CDN mode. For instance when 1million concurrent requests is submitted to the system, based on Fig. 6, nearly 80% of end-users receive double quality content and HCDN delivers approximately 80% more traffic. However, based on Fig. 9, content provider pays only 57% more. Fig. 10
                         compares Net Profit of HCDN (NP_HCDN) and pure CDN (NP_CDN) strategies. As it can be obviously seen, the HCDN architecture employing HRP strategy is able to increase the net profit significantly.


                        Figs. 11â€“14
                        
                        
                        
                         compare economics of HCDN employing various replica placement strategies. These graphs illustrate revenue, replication cost, content distribution cost and net profit of the HCDN with different replica placement approaches.


                        Fig. 11 compares replication cost for different strategies. Among the replication strategies HS and RND have most replication cost because these two strategies do not consider replication cost. The pure CDN strategy does not invest on replication of P2P content. Therefore, its replication cost remains constant and equals to the replication cost for CS content. Other strategies, (HRP, GG and SG) have comparable replication costs. Among these strategies, HRP has the least replication cost. The replication cost for this strategy has high similarity with the curve illustrated in Fig. 5, for optimum number of replicas.


                        Fig. 12 illustrates the content distribution cost for the studied strategies. The pure CDN approach serves all the requests in CS mode. Therefore, it has the maximum content distribution cost. The RND approach puts replicas by chance, therefore it has the second worst content distribution cost. HRP, HS, SG and GG approaches have approximately the same content distribution cost. Since the HS approach does not pay attention to the replication costs, it succeeds to serve the maximum number of requests in P2P mode. Therefore, this approach yields the least content distribution cost.

As it is illustrated in Fig. 13, the revenue with application of the RND approach is increased linearly. HS approach produces the most revenue and the HRP approach is pretty close to that of HS approach. Revenue of RND approach is far from other strategies.

In Fig. 14, the net profit of the HCDN with application of various replication strategies is reported. As it is expected, the pure CDN approach has a linearly increasing net profit. Compared to other strategies, RND approach has less net profit. Moreover, for a considerably wide range of total number of requests it has the least outcome. HRP yields the maximum net profit. Comparison of the net profit generated by HS approach with the net profit generated with greedy approaches (GG and SG) shows that in this system the outcome of greedy algorithms are not as close as expected to the optimal outcome (HRP). In other words, a simple heuristic like hot spot (HS) can produce better results.

The performance evaluation of the HCDN architecture with HRP replica placement strategy reveals some features of the system. Experiments verify that in this architecture when a light load of requests is submitted to the system, performance and economics of the content distribution system is similar to a traditional CDN. When the load of the system increases significantly, advantages of hybrid content delivery becomes visible. Edge servers begin to replicate P2P content through HRP strategically. As a result of the contribution of end-users in P2P content delivery and investment of HCDN for replication of P2P content, net profit of the HCDN provider improves significantly. At the same time, the content provider benefits from the hybrid content delivery by spending less for delivered traffic. In this case a big majority of the end-users enjoy high QoS. Therefore, HRP is able to guarantee incentive compatibility among the HCDN provider, content provider and end-users.

The comparison of the cost function in hybrid and pure CDN content delivery modes, illustrated in Fig. 8, shows that the HCDN architecture with HRP strategy has succeeded to exploit resources in a more scalable manner. In other words, considering the same level of available communication resources, HCDN architecture is able to tolerate flash-crowds better. Therefore, the HCDN provider can expect less SLA violations compared to the traditional CDNs.

Comparative study of HRP vs. other strategies shows that since HRP gives the best place and number of replicas on the given Hybrid CDN-P2P network, it is able to yield the maximum net profit. Unlike HRP, greedy algorithm makes decisions for putting k replicas step by step. This mechanism has near optimal results but as it puts replicas one by one, its replication set may differ from the optimum. Results obtained from SG approach represent that in the replica placement process it is necessary to consider the impact of existing replicas on decisions to place next replicas. Despite the simplicity of the HS approach, it has a poor outcome due to ignoring the replication cost, especially when the number of requests is small. When the number of requests is significantly high, the HS approach outperforms greedy approaches. Thus, it can be concluded that in some circumstances, the performance of the greedy approach is worse than a simple heuristic like HS.

In this paper, we have presented an economic replica placement mechanism designed for streaming content distribution in HCDN environment. The proposed mechanism makes it possible to offer Hybrid CDN-P2P streaming content delivery service using a traditional CDN. In order to design the mechanism, economic model of the system (HRPM) has been introduced and a recursive hierarchical push-based cooperative replica placement mechanism is proposed. The mechanism has been formalized based on the Economic Mechanism Design Theory. We studied performance of the solution through simulation and compared its outcome with popular replication strategies.

Experiments are conducted on the traces obtained from a large-scale CDN working in Australia. These studies show that HRP is able to produce applicable results with all the positive features of Hybrid CDN-P2P architecture. Experiments verify that through HRP replication strategy and HCDN architecture it is possible to increase the net profit of a CDN provider, decrease prices of service for content provider and serve majority of end-users with high quality stream at the same time. Through the experiments HRP is compared with some popular replication strategies and it is shown that HRP replication strategy has a great positive impact on the economics of content distribution in HCDNs.

In order to reduce the complexities of implementation, we considered a fixed DNS-based request routing and a fixed contribution level of P2P end-users. Therefore, integration of HRP mechanism with dynamic and differentiated request routing and resource allocation mechanisms of HCDN remains as a future work. Cloud computing infrastructures are increasingly attracting the attention of research community to mediate the high deploying costs of CDNs. Another extension to this work should consider the integration of cloud based CDNs with P2P networks.

@&#ACKNOWLEDGEMENT@&#

This research was supported by Iran Telecommunication Research Center (ITRC), Contract Number, 19251/500.

@&#REFERENCES@&#

