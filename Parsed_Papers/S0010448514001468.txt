@&#MAIN-TITLE@&#An algorithm for CAD tolerancing integration: Generation of assembly configurations according to dimensional and geometrical tolerances

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Tolerance integration in CAD model.


                        
                        
                           
                           The realistic modeling of the parts and assemblies.


                        
                        
                           
                           Prediction of the tolerance impacts.


                        
                        
                           
                           Updating the mating constraints.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

CAD model

Geometrical tolerance

Dimensional tolerance

Realistic assembly

Model configurations

Mating constraints

@&#ABSTRACT@&#


               
               
                  For several years, Digital Mock-Up (DMU) has been improved by the integration of many tools as Finite Element (FE) Analysis, Computer Aided Manufacturing (CAM), and Computer Aided Tolerancing (CAT) in the Computer Aided Design (CAD) model. In the geometrical model, the tolerances, which specify the requirements for the proper functioning of mechanical systems, are formally represented. The nominal modeling of the parts and assemblies does not allow the prediction of the tolerance impacts on the simulation results as the optimization of mechanical system assemblability. So, improving the CAD model to be closer to the realistic model is a necessity to verify and validate the mechanical system assemblability. This paper proposes a new approach to integrate the tolerances in CAD model by the determination of the configurations with defects of a CAD part, used in a mechanical system. The realistic parts are computed according to the dimensional and geometrical tolerances. This approach provides an assembly result closer to the real assembly of the mechanical system. The Replacement of the nominal parts by the realistic ones requires the redefinition of the initially defined assembly mating constraints. The update of the mating constraints is performed by respecting an Objective Function of the Assembly (OFA). Integrating tolerances in CAD allows the visualization and simulation of the mechanical assemblies’ behavior in their real configuration and the detection of possible interference and collision effects between parts which are undetectable in the nominal state.
               
            

@&#INTRODUCTION@&#

In CAD model, the tolerances are represented as annotations. In fact, the numerical model is used in the nominal configuration. The values of the dimensional and geometrical tolerances do not have any impact on CAD model or the results of the numerical simulations. Research works assert that the tolerance stack-up has an impact on the F.E. results  [1] and the assembly process  [2] as the case of the sheet metal assembly  [3]. Thus, a realistic modeling of the assembly, which considers the geometrical and dimensional tolerances on CAD model, is an industrial need. In this paper, a method to model realistic assembly (variational assembly) is presented. This new method allows tolerance analysis with consideration of the assembly process planning, the contact types and the assembly motion.

In our previous work, a method taking into account the tolerances on CAD model was established  [4]. This model is based on the assumption of obtaining the worst case assemblies by using components in the worst case configurations. The worst case configurations of components are computed using the worst case tolerancing. The randomness of obtaining mechanical parts and the assembly complexity cast doubt on this assumption. Thus, in this work, the assumption of obtaining worst case assemblies by random components is adopted. New algorithms to compute the possible configurations of components and redefine the assembly mating constraints are established.

In this paper, the components with dimensional and geometrical tolerances are modeled in CAD model by using two algorithms to respect the principle of independence (ISO 8015): the first one leads to obtain a component with dimensional defects. This algorithm is founded on a numerical perturbation method to determine the relationships between dimensions. The tolerance interval is discretized to define the realistic configuration of components. The second algorithm allows the determination of components with geometrical tolerances. The tolerance zone is discretized according to the parameters specified by the Small Displacement Torsors (SDT)  [5]. The face displacements are performed to obtain components with geometrical defects.

In nominal assembly, the ideal components are linked by mating constraints. The replacement of those components by the realistic ones requires the updating of mating constraints. A tolerance analysis is performed by using the proposed method and showed through the crankshaft system.

This paper is organized as follows. First, a review of literature is presented. Then, the realistic component modeling approach is proposed: The algorithms used to model the components with dimensional defects, as well as components with geometrical defects are detailed. Thereafter, the redefinition of the mating constraints is introduced with an illustration and validation example (rod — crankshaft mechanical system) followed by the tolerance analysis that enables to verify and validate the mechanical system assemblability. The chosen assembly method is a sequential assembly  [6]. The conclusions and perspectives for this work are presented at the end.

This paper can be positioned under the research works belonging to two themes: (1) Tolerance analysis and synthesis; (2) Generation of the realistic configurations and the redefinition of the assembly mating constraints.

Several researches are contributed to developing methodologies of tolerance analysis and synthesis for a good choice of specifications. The tolerance analysis and synthesis require relating geometric deviations to variations in functional conditions. Thus, several mathematical and structural models were established as the vectorial  [7], the Topologically and Technologically Related Surfaces (TTRS)  [8], the torsorial [5], kinematic  [9] and parametric [10] models. Some of those models of defect representations are highlighted.

Wirtz defined the Vectorial Dimensioning and Tolerancing (VD&T) model [7]. Each vector is associated to geometry with two variables: one for the nominal state and one for the deviation from this state. Thus, it is possible to represent the difference between the ideal and real geometry. This model does not take into account the functional aspect of surfaces and is oriented to manufacturing and control. Ballot and Bourdet established a torsorial model  [5]. The deviation and the linkage torsors are defined by using the SDT tool. The first torsor represents the geometry variations and the second one models the small displacements allowed by linkages. Clement et al. developed a structural model, which is founded on TTRS, to describe the geometry (Clement et al.  [8]). In this model, the part is considered as the association of TTRS. The TTRS is a surface pair, a surface and a TTRS or a TTRS pair belonging to the same solid and is associated for functional reasons.

After the mathematical modeling of the geometrical and dimensional defects, the tolerance analysis or/and synthesis is performed by using a worst case or a statistical approach. Socoliuc et al. established an approach to realize a realistic simulation of assemblies  [11]. This approach is based on TTRS model  [8]. Indeed, a complex mechanical system is represented by a simple parametric model. Then, a worst case tolerancing allows modeling of the deviation domains by the polyhedral tool (polytope)  [12]. The use of the Minkowski sum of polytopes  [13] allows the determination of the tolerance effects on functional requirements of the assembly. Pierre et al. developed a method to take into account both the thermo-mechanical effects and the geometrical defects of assembly by using the three dimensional chain tools [14]. The model is based on the substitute surfaces approach. The authors present a solution, in torsorial form, for the problems of coupling between the thermal requests and the geometrical defects. A worst case tolerancing and the Minkowski sum tool leads to model the tolerated limits of the geometric defects of a part by deviation hulls  [15] and the accepted limits of relative displacement between two surfaces in contact by clearance hulls [15]. Mansuy et al. proposed a new calculation method rather than using the Minkowski sum. The relationship between the functional tolerance and the tolerances associated with surfaces of mechanical components are determined in linear form. Thus, an influence coefficient is defined  [16].

In a bottom-up assembly modeling, the components are brought together to define a product representation. In CAD software, the components are located and oriented as required by designer. Indeed, the relative positions of the components are defined by the mating constraints  [17]. These mates must model joints between parts and satisfy functional requirements for proper functioning of the system. The component positioning can be done sequentially or simultaneously. Sodhi and Turner confirm that the technique of mounting components simultaneously is insufficient in some cases  [6]. Indeed, the solution, found by using this technique, can be not optimal as the assembly of the four bars of a picture frame. In CAD software, primitive or high-level relations are used for specifying assembly information. Then, the aggregation of assembly information in assembly models can be made by relational or hierarchical models.

Several methods to analyze and to solve assembly constraint problems had been developed. Kim et al. defined a relationship between the joint alignments, which are defined by the mating constraints, and the assembly Degrees of Freedom (DoFs)  [18,19]. In an assembly model, the mating joints are described by the 4×4 transformation matrix. Using this matrix, Tanaka et al. proposed an algebraic method to solve and reduce three-dimensional geometric constraints  [20]. In DMU, the allocation of the current mating constraints leads to three types of assembly: under-constrained, fully constrained and over-constrained assemblies  [20,21]. The first, under-constrained assembly is a system that has at least one DoF. The second type of assembly does not have any relative movement between components. The last type of assembly is obtained when the mating constraints are conflicting and can be not satisfied. Indeed, the geometric modeler cannot find a solution for positioning components with required mating constraints. The above methods of assembly modeling solve three dimensional geometric constraints, which model the relationships between assembly parts, basing on the hypothesis of ideal-rigid parts  [6,17–21].

A significant amount of research, based on the non-ideal geometry, has been devoted to the development of analysis and synthesis models that take into account, in addition to the manufacturing deviations and gaps, the assembly process planning and the relationships between assembly parts. The Tolerancing in Localization with Influence of the Contacts (CLIC) method allows choosing the adequate dimensional and geometrical specifications for a mechanism  [22]. CLIC is Computer aided tolerancing (CAT) software based on three-dimensional computation. In addition, static and three-dimensional tolerancing models are developed to optimize tolerance values of functional requirements  [23,24]. To determine the assembly specifications, CLIC model takes into account the assembly process planning specified by the designer. Dantan et al. developed a method for conceptual tolerance synthesis  [25]. The variational geometry due to the manufacturing deviations and the gaps are modeled by SDT. The assembly structure is modeled by a graph of elementary contacts. During the assembly process, the contact evolution is determined by the identification of the contact type (floating, slipping or fixed contact) in each assembly sequence. This tolerance synthesis model takes into account the geometrical behavior of the assembly and the quantifier notion (existential quantifier “
                           ∃
                        ” or universal quantifier “
                           ∀
                        ”)  [26]. The quantifier notion allows the determination of the relation between n-hulls (compatibility, interface and specification hulls). Those hulls model the geometrical behavior of the mechanism. The authors defined rules to determine the modifier (Maximum Material Condition and Least Material Condition) according to the quantifier notion and the contact type. The model is used to determine the necessary semantics of the geometrical specification model formalized by gauge with internal mobilities  [27]. The mobilities between different parts of the gauge are considered the function of the other parts of the mechanical system. Franciosa et al. developed a tolerance analysis model  [28]. To simulate variational features of rigid-part assemblies, the authors used the Statistical Variational Analysis for tolerancing (SVA-TOL). A matrix variational model, which is based on TTRS approach, is defined to determine the variational features. Thus, the assembly is modeled by a set of parameterized variational features. The model considers two cases of assembly mating constraints: against (between two planar surfaces) and fit (between two cylindrical surfaces) alignments. The method to determine the assembly constraint solution depends on the assembly type: in the case of fully constrained assembly, a sequential constraint solver is used and a least squares method is employed in the case of over constrained assembly.

This literature review relates to two aspects. The first aspect consists on tolerance analysis and synthesis  [5,7–12,14–16]. The second aspect consists on the variational geometry and the redefinition of the assembly mating constraints  [22,25–28].

In most of the references cited, the tolerance analysis and syntheses are based on the polyhedral or mathematical model. The solutions for the tolerance analysis and syntheses, which are presented in mathematical form (equations), are modeled in a geometrical solution. The polyhedral is a difficult tool to be used in the industry. This model does not predict the impact of dimensional and geometrical deviation, permitted by tolerances, on the assembly deformations. The proposed model in this paper is considered as a tool for visualization and tolerance impact analysis (interference detection) in the assembly simulation case. The second aspect addressed in the literature appears to be closest to this work [22,25–28]. Indeed, we can learn a great deal from the methods used in this second aspect, and apply them to solve some issues of the problem as contemplated: Using the OFA to update the mating constraints, the choice of the assembly (sequential assembly), using the parametric variational features to generate the assembly component configurations.

The approach presented in this paper is an extension of those works. The realistic modeling of the components allows taking into account the tolerances in CAD model. The redefinition of the mating constraints leads to consider the relationships between realistic components and the assembly process planning. The realistic modeling of the assembly in CAD environment allows a direct use of the computation applications which already exist in CAD software as the assembly motion simulation.

In the CAD model, obtaining realistic configurations allowed by dimensional tolerances requires modifications of the component dimensions. CAD software defines two dimension types. The driving dimensions are used to build the CAD model. The driven dimensions are controlled by driving ones. In fact, the driven dimensions values are deduced from driving dimension ones.

The toleranced dimension can correspond to a driving dimension (Fig. 1
                        (a)): the driven dimension is controlled by one driving dimension. Therefore, the modification of the driving dimension value (40 mm) allows changing directly the value of the corresponding driven dimension. In the other case (Fig. 1(b)), obtaining a target value of the driven dimension requires the determination and the modification of the corresponding values of each driving dimensions (25, 35 and 100 mm).

In the general case, the designer defines the component model by using driving dimensions. In the following step, he assigns the tolerances on the driven dimensions. The determination of the components with dimensional defects requires the identification of the relationships between the driving and driven dimensions. Indeed, the 
                           n
                         driving dimensions 
                           
                              
                                 D
                              
                              
                                 i
                              
                           
                        , with 
                           V
                           
                              
                                 D
                              
                              
                                 i
                              
                           
                         values, that control the driven dimension 
                           
                              
                                 R
                              
                              
                                 j
                              
                           
                         (with 
                           V
                           
                              
                                 R
                              
                              
                                 j
                              
                           
                         value) should be determined. The influence coefficient 
                           
                              
                                 λ
                              
                              
                                 i
                                 j
                              
                           
                         is the ratio between the variation of the driving dimension 
                           
                              
                                 δ
                              
                              
                                 V
                                 D
                                 i
                              
                           
                         and the variation of the driven dimension 
                           
                              
                                 δ
                              
                              
                                 V
                                 R
                                 D
                                 j
                              
                           
                         (Eq. (1)). This coefficient can be determined by using a numerical perturbation method. 
                           
                              (1)
                              
                                 
                                    
                                       λ
                                    
                                    
                                       i
                                       j
                                    
                                 
                                 =
                                 
                                    
                                       δ
                                    
                                    
                                       V
                                       D
                                       i
                                    
                                 
                                 /
                                 
                                    
                                       δ
                                    
                                    
                                       V
                                       R
                                       j
                                    
                                 
                                 .
                              
                           
                        
                     

A sub-algorithm to detect the driving dimensions 
                           
                              
                                 D
                              
                              
                                 i
                              
                           
                        , which control the driven dimension 
                           
                              
                                 R
                              
                              
                                 j
                              
                           
                        , is developed (Fig. 2
                        ). The method is based on the identification of the impact of the numerical change of 
                           V
                           
                              
                                 D
                              
                              
                                 i
                              
                           
                         on the CAD model. From numerical viewpoint, this change can be defined as a percentage 
                           
                              (
                              
                                 
                                    δ
                                 
                                 
                                    V
                                    D
                                    i
                                 
                              
                              =
                              0.1
                              %
                              ⋅
                              V
                              
                                 
                                    D
                                 
                                 
                                    i
                                 
                              
                              )
                           
                        . Initially, a perturbation value is added to each driving dimension value 
                           V
                           
                              
                                 D
                              
                              
                                 i
                              
                           
                        . Then, new driving dimension values 
                           
                              
                                 V
                              
                              
                                 ′
                              
                           
                           
                              
                                 D
                              
                              
                                 i
                              
                           
                           
                           
                              (
                              
                                 
                                    V
                                 
                                 
                                    ′
                                 
                              
                              
                                 
                                    D
                                 
                                 
                                    i
                                 
                              
                              =
                              V
                              
                                 
                                    D
                                 
                                 
                                    i
                                 
                              
                              +
                              
                                 
                                    δ
                                 
                                 
                                    V
                                    D
                                    i
                                 
                              
                              )
                           
                         are obtained. For each change of 
                           V
                           
                              
                                 D
                              
                              
                                 i
                              
                           
                        , if the value of driven dimension 
                           V
                           
                              
                                 R
                              
                              
                                 j
                              
                           
                         changes to a new value 
                           V
                           
                              
                                 R
                              
                              
                                 j
                              
                              
                                 ′
                              
                           
                        , then the two dimensions are related. 
                           
                              
                                 δ
                              
                              
                                 V
                                 R
                                 D
                                 i
                              
                           
                         is the deviation between 
                           V
                           
                              
                                 R
                              
                              
                                 j
                              
                              
                                 ′
                              
                           
                         and 
                           V
                           
                              
                                 R
                              
                              
                                 j
                              
                           
                           
                           
                              (
                              
                                 
                                    δ
                                 
                                 
                                    V
                                    R
                                    D
                                    i
                                 
                              
                              =
                              V
                              
                                 
                                    R
                                 
                                 
                                    j
                                 
                                 
                                    ′
                                 
                              
                              −
                              V
                              
                                 
                                    R
                                 
                                 
                                    j
                                 
                              
                              )
                           
                        . 
                           
                              
                                 λ
                              
                              
                                 i
                                 j
                              
                           
                         is determined by using the equation (Eq. (1)).

The tolerance interval 
                           T
                           I
                         specified on driven dimension 
                           R
                           
                              
                                 D
                              
                              
                                 j
                              
                           
                         is discretized by an increment 
                           e
                        ; such as 
                           e
                           =
                           T
                           I
                           /
                           h
                        . 
                           h
                         is the discretization accuracy to be chosen by user. For each 
                           k
                        th deviation value 
                           
                              
                                 t
                              
                              
                                 k
                                 j
                              
                           
                         of the driven dimension 
                           R
                           
                              
                                 D
                              
                              
                                 j
                              
                           
                        , the deviation value 
                           
                              
                                 T
                              
                              
                                 k
                                 i
                              
                           
                         of 
                           D
                           i
                         is deduced by the relation (Eq. (2)). Thus, the new values of 
                           D
                           i
                         are determined according to the sign of 
                           
                              
                                 λ
                              
                              
                                 i
                                 j
                              
                           
                         (Eq. (3)). The model is rebuilt with those new values of driving dimension to obtain components with dimensional defects.
                           
                              (2)
                              
                                 
                                    
                                       T
                                    
                                    
                                       k
                                       i
                                    
                                 
                                 =
                                 
                                    |
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                          j
                                       
                                    
                                    |
                                 
                                 
                                    
                                       t
                                    
                                    
                                       k
                                       j
                                    
                                 
                                 /
                                 n
                              
                           
                        
                        
                           
                              (3)
                              
                                 
                                    If   
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                          j
                                       
                                    
                                    >
                                    0
                                    ,
                                    
                                    then  
                                    
                                       
                                          D
                                       
                                       
                                          k
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          D
                                       
                                       
                                          i
                                       
                                    
                                    +
                                    
                                       
                                          T
                                       
                                       
                                          k
                                          i
                                       
                                    
                                    .
                                 
                              
                              
                                 
                                    Else If  
                                    
                                       
                                          λ
                                       
                                       
                                          i
                                          j
                                       
                                    
                                    <
                                    0
                                    
                                    then  
                                    
                                       
                                          D
                                       
                                       
                                          k
                                          i
                                       
                                    
                                    =
                                    
                                       
                                          D
                                       
                                       
                                          i
                                       
                                    
                                    −
                                    
                                       
                                          T
                                       
                                       
                                          k
                                          i
                                       
                                    
                                    .
                                 
                              
                           
                        
                     

An algorithm to determine all components with geometrical defects is developed. Those realistic configurations are obtained by modeling the geometrical tolerances by the displacements of the corresponding faces. The approach depends on the shape of the tolerance zone, the toleranced feature type and the tolerance type. The overview table (Table 1
                        ) comprise the sub-algorithms used to model component with geometrical defects.

The deviation between the nominal and the realistic feature is determined by the SDT tool. Then, the assumption of neglecting the form defects relative to the position and orientation defects is used. The deviation torsor, which is based on SDT tool, defines the DoFs of toleranced feature. In the proposed model, the deviation parameters between the nominal and realistic features are determined by analogy to the parameters defined by the SDT. In the proposed methodology, the original shape of the feature is conserved as the planar faces remain planar. The algorithm starts by identifying toleranced features, tolerances types and datum reference, which are specified by ISO standards.

a. Case of the positional tolerance
                        

In the case of a positional tolerance 
                              
                                 [
                                 −
                                 
                                    
                                       T
                                    
                                    
                                       l
                                    
                                 
                                 /
                                 2
                                 ;
                                 
                                    
                                       T
                                    
                                    
                                       l
                                    
                                 
                                 /
                                 2
                                 ]
                              
                            assigned to a planar face 
                              P
                            of a component, the tolerance zone 
                              
                                 
                                    T
                                 
                                 
                                    z
                                 
                              
                            is a parallelepiped (Fig. 3
                           (a)). The deviation torsor 
                              E
                              p
                              p
                            of 
                              P
                            is defined on the point 
                              O
                            (the center of 
                              P
                           ) by the relation (Eq. (4)).
                              
                                 (4)
                                 
                                    
                                       
                                          
                                             {
                                             E
                                             p
                                             p
                                             }
                                          
                                       
                                       
                                          O
                                       
                                    
                                    =
                                    
                                       
                                          
                                             {
                                             
                                                
                                                   
                                                      α
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      β
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      0
                                                   
                                                   
                                                      t
                                                      z
                                                   
                                                
                                             
                                             }
                                          
                                       
                                       
                                          
                                             (
                                             O
                                             ,
                                             X
                                             ,
                                             Y
                                             ,
                                             Z
                                             )
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        

The sub-algorithm in Fig. 3(b) comprises the main steps to obtain all Possible Component Configurations according to Positional Tolerance allocated to Planar face (PCCPTP). First, three lateral edges (
                              E
                              1
                              ,
                              E
                              2
                            and 
                              E
                              3
                           ) of 
                              
                                 
                                    T
                                 
                                 
                                    z
                                 
                              
                            are discretized by an increment 
                              i
                            (Fig. 3(c)). The integer 
                              i
                            is defined by the designer according to the desired precision of the results. The subdivisions 
                              h
                            are obtained such as 
                              h
                              =
                              
                                 
                                    T
                                 
                                 
                                    l
                                 
                              
                              /
                              i
                            (Fig. 3(c)). The nominal face 
                              P
                            is defined by three points 
                              N
                              1
                              ,
                              N
                              2
                            and 
                              N
                              3
                           . Therefore, a target position of the realistic face 
                              
                                 
                                    P
                                 
                                 
                                    u
                                    v
                                    w
                                 
                              
                            is defined by three new points (
                              N
                              
                                 
                                    1
                                 
                                 
                                    u
                                 
                              
                              ,
                              N
                              
                                 
                                    2
                                 
                                 
                                    v
                                 
                              
                            and 
                              N
                              
                                 
                                    3
                                 
                                 
                                    w
                                 
                              
                           ; with 
                              u
                              ,
                              v
                            and 
                              w
                            range from 1 to 
                              i
                           ) (Fig. 3(d)).

The geometric deviation between the two faces (nominal face 
                              P
                            and target face 
                              
                                 
                                    P
                                 
                                 
                                    u
                                    v
                                    w
                                 
                              
                           ) is defined by three parameters: two angles 
                              
                                 
                                    α
                                 
                                 
                                    v
                                    w
                                    
                                 
                              
                              
                                 (
                                 
                                    
                                       α
                                    
                                    
                                       v
                                       w
                                    
                                 
                                 =
                                 
                                    (
                                    
                                       
                                          N
                                          2
                                          N
                                          3
                                       
                                       
                                          ⃗
                                       
                                    
                                    ∧
                                    
                                       
                                          N
                                          
                                             
                                                2
                                             
                                             
                                                v
                                             
                                          
                                          N
                                          
                                             
                                                3
                                             
                                             
                                                w
                                             
                                          
                                       
                                       
                                          ⃗
                                       
                                    
                                    )
                                 
                                 )
                              
                            and 
                              
                                 
                                    β
                                 
                                 
                                    v
                                    u
                                 
                              
                              
                                 (
                                 
                                    
                                       β
                                    
                                    
                                       v
                                       u
                                    
                                 
                                 =
                                 
                                    (
                                    
                                       
                                          N
                                          2
                                          N
                                          1
                                       
                                       
                                          ⃗
                                       
                                    
                                    ∧
                                    
                                       
                                          N
                                          
                                             
                                                2
                                             
                                             
                                                v
                                             
                                          
                                          N
                                          
                                             
                                                1
                                             
                                             
                                                u
                                             
                                          
                                       
                                       
                                          ⃗
                                       
                                    
                                    )
                                 
                                 )
                              
                            and a distance 
                              
                                 
                                    d
                                 
                                 
                                    v
                                 
                              
                              
                              
                                 (
                                 
                                    
                                       d
                                    
                                    
                                       v
                                    
                                 
                                 =
                                 
                                    
                                       N
                                    
                                    
                                       2
                                    
                                 
                                 
                                    
                                       N
                                    
                                    
                                       2
                                       v
                                    
                                 
                                 )
                              
                            (Fig. 3(d)). Thus, the obtaining of realistic parts requires the face displacements to the target positions. Those displacements are performed by two rotations and one translation: 
                              
                                 •
                                 A rotation about 
                                       L
                                       1
                                       
                                       
                                          (
                                          L
                                          1
                                          =
                                          
                                             [
                                             N
                                             1
                                             N
                                             2
                                             ]
                                          
                                          )
                                       
                                     by an angle 
                                       
                                          
                                             α
                                          
                                          
                                             v
                                             w
                                          
                                       
                                    .

A rotation about 
                                       L
                                       2
                                       
                                       
                                          (
                                          L
                                          2
                                          =
                                          
                                             [
                                             N
                                             2
                                             N
                                             3
                                             ]
                                          
                                          )
                                       
                                     by an angle 
                                       
                                          
                                             β
                                          
                                          
                                             v
                                             u
                                          
                                       
                                    .

A translation by a distance 
                                       
                                          
                                             d
                                          
                                          
                                             v
                                          
                                       
                                     along the normal vector of 
                                       P
                                    .

b. Case of orientation tolerance
                        

In the case of an orientation tolerance 
                              
                                 
                                    T
                                 
                                 
                                    o
                                 
                              
                            (as the perpendicularity tolerance in Fig. 4
                           (a)) assigned to a planar face 
                              P
                            of a component, the allowed deviations are defined by the SDT 
                              
                                 {
                                 
                                    
                                       E
                                    
                                    
                                       p
                                       o
                                    
                                 
                                 }
                              
                            (Eq. (5)). 
                              
                                 
                                    α
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    β
                                 
                                 
                                    y
                                 
                              
                            are the rotation parameters about the axes 
                              X
                            and 
                              Y
                            respectively. 
                              
                                 (5)
                                 
                                    
                                       
                                          
                                             {
                                             
                                                
                                                   E
                                                
                                                
                                                   p
                                                   o
                                                
                                             
                                             }
                                          
                                       
                                       
                                          G
                                       
                                    
                                    =
                                    
                                       
                                          
                                             {
                                             
                                                
                                                   
                                                      
                                                         
                                                            α
                                                         
                                                         
                                                            x
                                                         
                                                      
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            β
                                                         
                                                         
                                                            y
                                                         
                                                      
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      0
                                                   
                                                   
                                                      0
                                                   
                                                
                                             
                                             }
                                          
                                       
                                       
                                          
                                             (
                                             G
                                             ,
                                             X
                                             ,
                                             Y
                                             ,
                                             Z
                                             )
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        

The point 
                              G
                            is the center of 
                              P
                            (Fig. 4(a)). The tolerance zone 
                              T
                              z
                              o
                            is a parallelepiped. A sub-algorithm to obtain Possible Component Configurations according to Orientation Tolerance allocated to Planar face (PCCOTP) was developed (Fig. 4(c)). Initially, two lateral edges 
                              E
                              1
                            and 
                              E
                              2
                            of the parallelepiped 
                              T
                              z
                              o
                            are subdivided by the increment 
                              i
                              
                              
                                 (
                                 h
                                 =
                                 
                                    
                                       T
                                    
                                    
                                       o
                                    
                                 
                                 /
                                 i
                                 )
                              
                           . 
                              i
                            is an integer to be defined by the designer. Thereafter, for each vertex pair 
                              
                                 
                                    S
                                    1
                                 
                                 
                                    u
                                 
                              
                            and 
                              
                                 
                                    S
                                    2
                                 
                                 
                                    v
                                 
                              
                            (
                              u
                              ,
                              v
                              =
                              1
                            to 
                              h
                           ) on 
                              E
                              1
                            and 
                              E
                              2
                            respectively, a vertex 
                              
                                 
                                    S
                                    3
                                 
                                 
                                    u
                                 
                              
                            on 
                              E
                              3
                            is deduced. 
                              
                                 
                                    S
                                    3
                                 
                                 
                                    u
                                 
                              
                            is obtained by the intersection of the line 
                              
                                 (
                                 
                                    
                                       O
                                       S
                                       1
                                    
                                    
                                       u
                                    
                                 
                                 )
                              
                            and 
                              E
                              3
                            (
                              O
                            is the middle point of the edge 
                              
                                 [
                                 
                                    
                                       S
                                       1
                                    
                                    
                                       u
                                    
                                 
                                 
                                 S
                                 
                                    
                                       3
                                    
                                    
                                       u
                                    
                                 
                                 ]
                              
                           ). Thus, the target face 
                              
                                 
                                    P
                                 
                                 
                                    u
                                    v
                                 
                              
                            is defined by the three vertices 
                              
                                 
                                    S
                                    1
                                 
                                 
                                    u
                                 
                              
                              ,
                              
                                 
                                    S
                                    2
                                 
                                 
                                    v
                                 
                              
                            and 
                              
                                 
                                    S
                                    3
                                 
                                 
                                    u
                                 
                              
                           . The deviation between the two faces 
                              P
                            and 
                              
                                 
                                    P
                                 
                                 
                                    u
                                    v
                                 
                              
                            can be parameterized by two parameters 
                              
                                 
                                    α
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    β
                                 
                                 
                                    y
                                 
                              
                            (Fig. 4(b)). Thus, the configuration with defects of the component is obtained by the displacement of 
                              P
                            to 
                              
                                 
                                    P
                                 
                                 
                                    u
                                    v
                                 
                              
                           . Indeed, two rotations are required to obtain the variational geometry: 
                              
                                 •
                                 A rotation by an angle 
                                       
                                          
                                             α
                                          
                                          
                                             x
                                          
                                       
                                     about 
                                       X
                                     axis.

A rotation by an angle 
                                       
                                          
                                             β
                                          
                                          
                                             y
                                          
                                       
                                     about 
                                       Y
                                     axis.

c. Case of positional and orientation tolerances
                        

The conformity domain of a planar face 
                              P
                           , which is subjected to a positional tolerance 
                              T
                              p
                            and a parallelism tolerance 
                              T
                              o
                           , is located between two parallel planes spaced by a distance 
                              T
                              p
                            while remaining enveloped by two planes spaced from a distance 
                              T
                              o
                            (Fig. 5
                           (a)). A sub-algorithm to determine all the Possible Component Configurations according to Positional and Orientation Tolerances allocated to Planar face (PCCPOTP) was developed (Fig. 5(b)). The main steps of this algorithm are as the following:

Initially, the positional tolerance 
                              T
                              p
                            defines a tolerance zone 
                              
                                 
                                    T
                                 
                                 
                                    z
                                    p
                                 
                              
                           . Then, 
                              
                                 
                                    T
                                 
                                 
                                    z
                                    p
                                 
                              
                            is discretized by the method described previously in the case of positional tolerance assigned to a planar face. However, the increment 
                              i
                            is determined relatively to orientation tolerance zone 
                              
                                 
                                    T
                                 
                                 
                                    z
                                    o
                                 
                              
                           : 
                              h
                              =
                              
                                 
                                    T
                                 
                                 
                                    z
                                    o
                                 
                              
                              /
                              i
                           ; 
                              h
                            is an integer to be defined by the designer. Therefore, three vertex sets are obtained (
                              N
                              
                                 
                                    1
                                 
                                 
                                    u
                                 
                              
                              ,
                              N
                              
                                 
                                    2
                                 
                                 
                                    v
                                 
                              
                            and 
                              N
                              
                                 
                                    3
                                 
                                 
                                    w
                                 
                              
                           ; with 
                              u
                              ,
                              v
                            and 
                              w
                            range from 1 to 
                              i
                           ).

In the second step, for each vertex 
                              
                                 
                                    N
                                    2
                                 
                                 
                                    v
                                 
                              
                            two vertex sets 
                              
                                 
                                    N
                                    1
                                 
                                 
                                    u
                                 
                                 
                                    v
                                 
                              
                            and 
                              
                                 
                                    N
                                    3
                                 
                                 
                                    w
                                 
                                 
                                    v
                                 
                              
                            are deduced: 
                              
                                 
                                    N
                                    1
                                 
                                 
                                    u
                                 
                                 
                                    v
                                 
                              
                            are the vertices 
                              
                                 
                                    N
                                    1
                                 
                                 
                                    u
                                 
                              
                           ; such as the angle 
                              
                                 
                                    β
                                 
                                 
                                    v
                                    u
                                 
                              
                              ∈
                              
                                 [
                                 −
                                 T
                                 o
                                 /
                                 a
                                 ;
                                 T
                                 o
                                 /
                                 a
                                 ]
                              
                              
                              
                                 (
                                 
                                    
                                       β
                                    
                                    
                                       v
                                       u
                                    
                                 
                                 =
                                 
                                    (
                                    
                                       
                                          N
                                          2
                                          N
                                          1
                                       
                                       
                                          ⃗
                                       
                                    
                                    ∧
                                    
                                       
                                          N
                                          
                                             
                                                2
                                             
                                             
                                                v
                                             
                                          
                                          N
                                          
                                             
                                                1
                                             
                                             
                                                u
                                             
                                          
                                       
                                       
                                          ⃗
                                       
                                    
                                    )
                                 
                                 )
                              
                           . 
                              
                                 
                                    N
                                    3
                                 
                                 
                                    w
                                 
                                 
                                    v
                                 
                              
                            are the vertices 
                              
                                 
                                    N
                                    3
                                 
                                 
                                    w
                                 
                              
                           ; such as the angle 
                              
                                 
                                    α
                                 
                                 
                                    v
                                    w
                                 
                              
                              ∈
                              
                                 [
                                 −
                                 T
                                 o
                                 /
                                 b
                                 ;
                                 T
                                 o
                                 /
                                 b
                                 ]
                              
                              
                              
                                 (
                                 
                                    
                                       α
                                    
                                    
                                       v
                                       w
                                    
                                 
                                 =
                                 
                                    (
                                    
                                       
                                          N
                                          2
                                          N
                                          3
                                       
                                       
                                          ⃗
                                       
                                    
                                    ∧
                                    
                                       
                                          N
                                          
                                             
                                                2
                                             
                                             
                                                v
                                             
                                          
                                          N
                                          
                                             
                                                3
                                             
                                             
                                                w
                                             
                                          
                                       
                                       
                                          ⃗
                                       
                                    
                                    )
                                 
                                 )
                              
                            (Fig. 5(c)).

Finally, the face displacement from the nominal position to the realistic position is performed by three operations: 
                              
                                 •
                                 A translation along the 
                                       Z
                                     axis by a distance 
                                       
                                          
                                             d
                                          
                                          
                                             v
                                          
                                       
                                       
                                       
                                          (
                                          
                                             
                                                d
                                             
                                             
                                                v
                                             
                                          
                                          =
                                          N
                                          2
                                          
                                          N
                                          
                                             
                                                2
                                             
                                             
                                                v
                                             
                                          
                                          )
                                       
                                    .

A rotation about the 
                                       X
                                     axis by an angle 
                                       
                                          
                                             α
                                          
                                          
                                             v
                                             w
                                          
                                       
                                    .

A rotation about the 
                                       Y
                                     axis by an angle 
                                       
                                          
                                             β
                                          
                                          
                                             v
                                             u
                                          
                                       
                                    .

a. Case of positional tolerance
                        

In the case of a face axis 
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    I
                                 
                                 
                                    2
                                 
                              
                           , which is allocated to a positional tolerance 
                              
                                 
                                    T
                                 
                                 
                                    p
                                 
                              
                           , the tolerance zone 
                              T
                              z
                            is cylindrical (Fig. 6
                           (a)). A local coordinate system 
                              
                                 (
                                 O
                                 ,
                                 X
                                 ,
                                 Y
                                 ,
                                 Z
                                 )
                              
                            is defined (the 
                              Z
                            axis is along the axis 
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    I
                                 
                                 
                                    2
                                 
                              
                           ). The deviation torsor 
                              
                                 {
                                 
                                    
                                       E
                                    
                                    
                                       c
                                       p
                                    
                                 
                                 }
                              
                           , defined in the middle point 
                              O
                            of the nominal axis, allows four DoFs: Two rotations 
                              
                                 
                                    r
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    r
                                 
                                 
                                    y
                                 
                              
                            about the axes 
                              X
                            and 
                              Y
                            respectively and two translations 
                              
                                 
                                    t
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    t
                                 
                                 
                                    y
                                 
                              
                            respectively along 
                              X
                            and 
                              Y
                            axes respectively (Eq. (6)). 
                              
                                 (6)
                                 
                                    
                                       
                                          
                                             {
                                             
                                                
                                                   E
                                                
                                                
                                                   c
                                                   p
                                                
                                             
                                             }
                                          
                                       
                                       
                                          O
                                       
                                    
                                    =
                                    
                                       
                                          
                                             {
                                             
                                                
                                                   
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            x
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            x
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            y
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            t
                                                         
                                                         
                                                            y
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      0
                                                   
                                                   
                                                      0
                                                   
                                                
                                             
                                             }
                                          
                                       
                                       
                                          
                                             (
                                             O
                                             ,
                                             ,
                                             X
                                             ,
                                             Y
                                             ,
                                             Z
                                             )
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        

A sub-algorithm to obtain Possible Component Configurations according to Positional Tolerance allocated to Cylinder Axis (PCCPTCA) is developed and illustrated in Fig. 6(b). A discretization of 
                              T
                              z
                            is performed to obtain all possible configurations of the axis Fig. 6(c).

The faces 
                              F
                              1
                            and 
                              F
                              2
                            are planar faces with circular loop (
                              
                                 
                                    C
                                 
                                 
                                    0
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    C
                                 
                                 
                                    0
                                 
                                 
                                    2
                                 
                              
                            are the two circular loops of 
                              F
                              1
                            and 
                              F
                              2
                            respectively in Fig. 6(b)). Thus, 
                              F
                              1
                            and 
                              F
                              2
                            are discretized by the two parameters 
                              ψ
                            and 
                              δ
                           . 
                              
                                 •
                                 The angle 
                                       ψ
                                       =
                                       2
                                       u
                                       π
                                       /
                                       N
                                     (
                                       u
                                       =
                                       1
                                     to 
                                       N
                                    )  [12,15] (
                                       N
                                       =
                                       6
                                     in the case of Fig. 6(c)). The choice of the integer 
                                       N
                                     depends on the discretization accuracy intended by the designer.


                                    
                                       δ
                                     is the radial finesse factor of the discretization. 
                                       δ
                                       =
                                       
                                          (
                                          T
                                          p
                                          /
                                          2
                                          )
                                       
                                       /
                                       j
                                     (
                                       j
                                       =
                                       3
                                     in the case of Fig. 6(b)).

In the local coordinate system 
                              
                                 (
                                 O
                                 ,
                                 X
                                 ,
                                 Y
                                 ,
                                 Z
                                 )
                              
                           , the coordinates of the two point sets 
                              
                                 
                                    A
                                 
                                 
                                    g
                                    ,
                                    n
                                 
                                 
                                    1
                                 
                              
                            and 
                              
                                 
                                    A
                                 
                                 
                                    k
                                    ,
                                    m
                                 
                                 
                                    2
                                 
                              
                            are: 
                              
                                 •
                                 
                                    
                                       
                                          
                                             A
                                          
                                          
                                             g
                                             ,
                                             n
                                          
                                          
                                             1
                                          
                                       
                                       
                                          (
                                          
                                             (
                                             T
                                             p
                                             /
                                             2
                                             )
                                          
                                          −
                                          g
                                          δ
                                          )
                                       
                                       cos
                                       
                                          (
                                          2
                                          n
                                          π
                                          /
                                          N
                                          )
                                       
                                       ,
                                       
                                          (
                                          
                                             (
                                             T
                                             p
                                             /
                                             2
                                             )
                                          
                                          −
                                          g
                                          δ
                                          )
                                       
                                       sin
                                       
                                          (
                                          2
                                          n
                                          π
                                          /
                                          N
                                          )
                                       
                                       ,
                                       L
                                       /
                                       2
                                    
                                 


                                    
                                       
                                          
                                             A
                                          
                                          
                                             k
                                             ,
                                             m
                                          
                                          
                                             2
                                          
                                       
                                       
                                          (
                                          
                                             (
                                             T
                                             p
                                             /
                                             2
                                             )
                                          
                                          −
                                          k
                                          δ
                                          )
                                       
                                       cos
                                       
                                          (
                                          2
                                          m
                                          π
                                          /
                                          N
                                          )
                                       
                                       ,
                                       
                                          (
                                          
                                             (
                                             T
                                             p
                                             /
                                             2
                                             )
                                          
                                          −
                                          k
                                          δ
                                          )
                                       
                                       sin
                                       
                                          (
                                          2
                                          m
                                          π
                                          /
                                          N
                                          )
                                       
                                       ,
                                       −
                                       L
                                       /
                                       2
                                    .

By analogy with the DoFs defined by 
                              
                                 {
                                 
                                    
                                       E
                                    
                                    
                                       c
                                       p
                                    
                                 
                                 }
                              
                           , the deviation setting between the two axis (
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    I
                                 
                                 
                                    2
                                 
                              
                            and 
                              
                                 
                                    A
                                 
                                 
                                    g
                                    ,
                                    n
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    A
                                 
                                 
                                    k
                                    ,
                                    m
                                 
                                 
                                    2
                                 
                              
                           ) is defined by four parameters (
                              
                                 
                                    α
                                 
                                 
                                    x
                                 
                              
                              ,
                              
                                 
                                    β
                                 
                                 
                                    y
                                 
                              
                              ,
                              
                                 
                                    d
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    d
                                 
                                 
                                    y
                                 
                              
                           ) (Fig. 6(d)). In fact, the displacements of the toleranced axis from the nominal position to the realistic position are performed by two rotations by angles 
                              
                                 
                                    α
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    β
                                 
                                 
                                    y
                                 
                              
                            about the axes 
                              X
                            and 
                              Y
                            respectively and two translations along the distances 
                              
                                 
                                    d
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    d
                                 
                                 
                                    y
                                 
                              
                            along the axes 
                              X
                            and 
                              Y
                            respectively. The figure (Fig. 6(d)) shows an example of the displacement parameters of nominal axis 
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    I
                                 
                                 
                                    2
                                 
                              
                            to realistic configuration 
                              
                                 
                                    A
                                 
                                 
                                    2
                                    ,
                                    2
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    A
                                 
                                 
                                    0
                                    ,
                                    3
                                 
                                 
                                    2
                                 
                              
                           .

b. Case of orientation tolerance
                        

In the case of a face axis 
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    I
                                 
                                 
                                    2
                                 
                              
                           , that is subjected to an orientation tolerance 
                              
                                 
                                    T
                                 
                                 
                                    o
                                 
                              
                           , the tolerance zone 
                              T
                              z
                            is cylindrical (Fig. 7
                           (a)). The deviation torsor 
                              
                                 {
                                 
                                    
                                       E
                                    
                                    
                                       c
                                       o
                                    
                                 
                                 }
                              
                           , defined in the middle point of the axis 
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    I
                                 
                                 
                                    2
                                 
                              
                           , allows two DoFs: Two rotations 
                              
                                 
                                    r
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    r
                                 
                                 
                                    y
                                 
                              
                            about the axes 
                              X
                            and 
                              Y
                            respectively (Eq. (7)). 
                              
                                 (7)
                                 
                                    
                                       
                                          
                                             {
                                             
                                                
                                                   E
                                                
                                                
                                                   c
                                                   o
                                                
                                             
                                             }
                                          
                                       
                                       
                                          O
                                       
                                    
                                    =
                                    
                                       
                                          
                                             {
                                             
                                                
                                                   
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            x
                                                         
                                                      
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            y
                                                         
                                                      
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      0
                                                   
                                                   
                                                      0
                                                   
                                                
                                             
                                             }
                                          
                                       
                                       
                                          
                                             (
                                             O
                                             ,
                                             X
                                             ,
                                             Y
                                             ,
                                             Z
                                             )
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        

A sub-algorithm to obtain Possible Component Configurations according to Orientation Tolerance allocated to Cylinder Axis (PCCOTCA) is developed (Fig. 7(b)). First, one of the two planar faces (
                              F
                              1
                            or 
                              F
                              2
                           ) of 
                              T
                              z
                            is discretized by using the method described previously in the case of a positional tolerance. In fact, a set 
                              
                                 
                                    Ω
                                 
                                 
                                    1
                                 
                              
                            of vertices 
                              
                                 
                                    A
                                 
                                 
                                    g
                                    ,
                                    n
                                 
                                 
                                    1
                                 
                              
                              
                              
                                 (
                                 
                                    
                                       A
                                    
                                    
                                       g
                                       ,
                                       n
                                    
                                    
                                       1
                                    
                                 
                                 ∈
                                 F
                                 1
                                 )
                              
                            is obtained (Fig. 7(c)). Then, for each vertex 
                              
                                 
                                    A
                                 
                                 
                                    g
                                    ,
                                    n
                                 
                                 
                                    1
                                 
                              
                            a corresponding vertex 
                              
                                 
                                    A
                                 
                                 
                                    g
                                    ,
                                    n
                                 
                                 
                                    2
                                 
                              
                            is deduced by the relation (Eq. (8)). Therefore, a set 
                              
                                 
                                    Ω
                                 
                                 
                                    2
                                 
                              
                            of vertices 
                              
                                 
                                    A
                                 
                                 
                                    g
                                    ,
                                    n
                                 
                                 
                                    2
                                 
                              
                            is deduced. Finally, the realistic axes 
                              
                                 
                                    A
                                 
                                 
                                    g
                                    ,
                                    n
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    A
                                 
                                 
                                    g
                                    ,
                                    n
                                 
                                 
                                    2
                                 
                              
                            are obtained by the displacements of the nominal axis: Two rotations by the angles 
                              
                                 
                                    α
                                 
                                 
                                    x
                                 
                              
                            and 
                              
                                 
                                    β
                                 
                                 
                                    y
                                 
                              
                            about the axes 
                              X
                            and 
                              Y
                            respectively (Fig. 7(c)). 
                              
                                 (8)
                                 
                                    
                                       {
                                       
                                          
                                             A
                                          
                                          
                                             g
                                             ,
                                             n
                                          
                                          
                                             2
                                          
                                       
                                       }
                                    
                                    =
                                    F
                                    2
                                    ∩
                                    
                                       (
                                       O
                                       
                                          
                                             A
                                          
                                          
                                             g
                                             ,
                                             n
                                          
                                          
                                             1
                                          
                                       
                                       )
                                    
                                    .
                                 
                              
                           
                        

c. Case of orientation and positional tolerances
                        

Generally, a face axis 
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              
                                 
                                    I
                                 
                                 
                                    2
                                 
                              
                            is subjected to an orientation tolerance 
                              
                                 
                                    T
                                 
                                 
                                    o
                                 
                              
                              
                              
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       o
                                    
                                 
                                 =
                                 0.2
                                 
                                 
                                    mm
                                 
                                 )
                              
                            and a positional tolerance 
                              
                                 
                                    T
                                 
                                 
                                    p
                                 
                              
                              
                              
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       p
                                    
                                 
                                 =
                                 0.5
                                 
                                 
                                    mm
                                 
                                 )
                              
                            (Fig. 8
                           (a)). The sub-algorithm to obtain Possible Component Configurations according to Positional and Orientation Tolerances allocated to Cylinder Axis (PCCPOTCA) is developed (Fig. 8(c)). The tolerances 
                              
                                 
                                    T
                                 
                                 
                                    p
                                 
                              
                            and 
                              
                                 
                                    T
                                 
                                 
                                    o
                                 
                              
                            define the cylindrical tolerance zones 
                              T
                              z
                              p
                            and 
                              T
                              z
                              o
                            respectively. The possible axes, allowed by 
                              
                                 
                                    T
                                 
                                 
                                    p
                                 
                              
                           , are obtained by using the sub-algorithm PCCPTCA (Fig. 6(b)) (the designations used in Fig. 6 are conserved): 
                              
                                 •
                                 The discretization of the two planar faces of 
                                       T
                                       z
                                       p
                                     by using the two increments 
                                       ψ
                                     and 
                                       δ
                                     allows obtaining the positions of the axis ends 
                                       
                                          
                                             A
                                          
                                          
                                             g
                                             ,
                                             n
                                          
                                          
                                             1
                                          
                                       
                                     and 
                                       
                                          
                                             A
                                          
                                          
                                             k
                                             ,
                                             m
                                          
                                          
                                             2
                                          
                                       
                                    . Thus, the possible axes 
                                       
                                          
                                             A
                                          
                                          
                                             g
                                             ,
                                             n
                                          
                                          
                                             1
                                          
                                       
                                       
                                       
                                          
                                             A
                                          
                                          
                                             k
                                             ,
                                             m
                                          
                                          
                                             2
                                          
                                       
                                     are defined.

The deviation setting between the two axis (
                                       
                                          
                                             I
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             I
                                          
                                          
                                             2
                                          
                                       
                                     and 
                                       
                                          
                                             A
                                          
                                          
                                             g
                                             ,
                                             n
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             A
                                          
                                          
                                             k
                                             ,
                                             m
                                          
                                          
                                             2
                                          
                                       
                                    ) is defined by four parameters (
                                       
                                          
                                             α
                                          
                                          
                                             x
                                          
                                       
                                       ,
                                       
                                          
                                             β
                                          
                                          
                                             y
                                          
                                       
                                       ,
                                       
                                          
                                             d
                                          
                                          
                                             x
                                          
                                       
                                     and 
                                       
                                          
                                             d
                                          
                                          
                                             y
                                          
                                       
                                    ).


                                    
                                       H
                                     is the midpoint of the edge 
                                       
                                          [
                                          
                                             
                                                A
                                             
                                             
                                                g
                                                ,
                                                n
                                             
                                             
                                                1
                                             
                                          
                                          
                                             
                                                A
                                             
                                             
                                                k
                                                ,
                                                m
                                             
                                             
                                                2
                                             
                                          
                                          ]
                                       
                                    . The axis 
                                       E
                                       F
                                     of 
                                       T
                                       z
                                       o
                                     is perpendicular to the datum 
                                       A
                                     and passes through 
                                       H
                                    . Thus, the tolerance zone 
                                       T
                                       z
                                       o
                                     is defined.

If the axis 
                                       
                                          
                                             A
                                          
                                          
                                             g
                                             ,
                                             n
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             A
                                          
                                          
                                             k
                                             ,
                                             m
                                          
                                          
                                             2
                                          
                                       
                                     verifies the relation (Eq. (9)), then the configuration is conserved as a solution. The realistic axis is obtained by the cylindrical face displacements (according to the parameters (
                                       
                                          
                                             α
                                          
                                          
                                             x
                                          
                                       
                                       ,
                                       
                                          
                                             β
                                          
                                          
                                             y
                                          
                                       
                                       ,
                                       
                                          
                                             d
                                          
                                          
                                             x
                                          
                                       
                                     and 
                                       
                                          
                                             d
                                          
                                          
                                             y
                                          
                                       
                                    )).
                                       
                                          (9)
                                          
                                             
                                                ‖
                                                
                                                   
                                                      
                                                         
                                                            A
                                                         
                                                         
                                                            g
                                                            ,
                                                            n
                                                         
                                                         
                                                            1
                                                         
                                                      
                                                      E
                                                   
                                                   
                                                      ⃗
                                                   
                                                
                                                ‖
                                             
                                             ≤
                                             
                                                
                                                   T
                                                   z
                                                   0
                                                
                                                
                                                   2
                                                
                                             
                                             .
                                          
                                       
                                    
                                 

As mentioned before, in this paper, the sequential assembly technique is used. The rebuilding of the assembly with the realistic components may lead to an over-constrained assembly. Thus, the mating constraints, used in the nominal assembly, must be modified to allow the linkage of the realistic components. In the CAD system there are many primitive mating to link the assembly components: collinearity, perpendicularity, tangency, symmetry, coincidency and parallelity. In the context of this article three primitive mating constraints are considered: coincident between two planar faces, coaxiality between two axes and distance between two planar faces: 
                        
                           •
                           Coincident constraint between two planar faces (Co: 
                                 F
                                 &
                                 F
                              ): In this case, the two unit normal vectors of the planar faces are anti-aligned (the angle between the two directions is 
                                 Π
                              ) or aligned (the angle between the two directions is zero). The two planar faces are located in the same plane and are in or without contact.

Coaxiality constraint between two cylinder axes (Co: 
                                 A
                                 &
                                 A
                              ): In this case, the two axes are aligned or anti-aligned and a point from the first axis belongs the second one.

Distance constraint between two planar faces (Dist: 
                                 F
                                 &
                                 F
                              ): In this case, an alignment between the pair faces is performed.

In the realistic assembly, those mating constraints must be redefined. Those realistic mating constraints are obtained by modifications of the relations between MGREs (Minimum Geometrical Reference Elements)  [8]. The method depends on the Objective Function of the Assembly (OFA) specified by the designer. In the CAD software, the OFA is automatically deduced from the nominal model:
                        
                           •
                           The mating constraint order, specified in the feature manager design tree of the software, defines the mounting order of the assembly and the joint order priority. Thus, the planning of the assembly process is identified.

The kinematic state of the nominal assembly defines the DoFs which are to be conserved in the realistic model. The DoFs are identified by a method based on the graphs of primitive kinematic joints: Each assembly or sub-assembly is defined with a graph. In this graph, a node represents a part and an edge represents a primitive joint.

The contact between the features is conserved.

The joint type between each couple of components is respected.

The coincident constraint, which was defined between two planar faces in nominal configuration, is replaced in the realistic model by a coincident constraint between: two planar faces (Co: 
                           F
                           &
                           F
                        ), face and edge (Co: 
                           F
                           &
                           E
                        ) or face and vertex (Co: 
                           F
                           &
                           V
                        ). In the nominal configuration, two planar faces 
                           f
                           1
                         (with normal vector 
                           N
                           1
                        ) and 
                           f
                           2
                         (with normal vector 
                           N
                           2
                        ) of the parts 
                           A
                           1
                         and 
                           A
                           2
                         respectively linked by a coincident constraint. In the realistic model, the redefinition of this constraint depends on the initial contact (with or without contact) between the faces 
                           f
                           1
                         and 
                           f
                           2
                        :

The configurations with defects of the parts 
                              A
                              1
                            and 
                              A
                              2
                            are obtained by the face displacements. Thus, in realistic configuration, before the application of mating constraint between 
                              f
                              1
                            and 
                              f
                              2
                           , a developed sub-algorithm to Verify Relative Position of Two Faces initially in Contact (VRPTFC) is used to ensure that the relative position of 
                              f
                              1
                            and 
                              f
                              2
                            is adequate (Fig. 9
                           (a)).


                           
                              I
                              i
                            (
                              i
                              =
                              1
                            to 
                              a
                           ) and 
                              J
                              j
                            (
                              j
                              =
                              1
                            to 
                              b
                           ) are the vertices delimiting  
                              f
                              1
                            and 
                              f
                              2
                            respectively (the numbers 
                              a
                            and 
                              b
                            depend on the loop type of the face. For example, in the case of a quadratic loop of 
                              f
                              1
                              ,
                              a
                              =
                              4
                           ) and 
                              Q
                            is the plane derived from 
                              f
                              2
                           .

In the realistic configuration, both faces can have three main configurations (Fig. 9(b)): 
                              
                                 •
                                 In the first case, the following condition is satisfied: 
                                       
                                          
                                             N
                                             1
                                          
                                          
                                             ⃗
                                          
                                       
                                       .
                                       
                                          
                                             N
                                             2
                                          
                                          
                                             ⃗
                                          
                                       
                                       ≤
                                       0
                                     and 
                                       
                                          
                                             
                                                
                                                   I
                                                
                                                
                                                   i
                                                
                                             
                                             
                                                
                                                   J
                                                
                                                
                                                   j
                                                
                                             
                                          
                                          
                                             ⃗
                                          
                                       
                                       .
                                       
                                          
                                             N
                                             1
                                          
                                          
                                             ⃗
                                          
                                       
                                       >
                                       0
                                     for 
                                       i
                                       ,
                                       j
                                       =
                                       1
                                     to 4 (an anti-alignment relation). The two faces are in the correct configuration and the both faces do not intersect.

In the second case, the condition 
                                       
                                          (
                                          
                                             
                                                N
                                                1
                                             
                                             
                                                ⃗
                                             
                                          
                                          .
                                          
                                             
                                                N
                                                2
                                             
                                             
                                                ⃗
                                             
                                          
                                          >
                                          0
                                          )
                                       
                                     is satisfied (an alignment relation). The part 
                                       A
                                       1
                                     is rotated about the 
                                       
                                          (
                                          O
                                          ,
                                          
                                             
                                                T
                                             
                                             
                                                ⃗
                                             
                                          
                                          )
                                       
                                     axis by an angle equal to 
                                       Π
                                    . 
                                       O
                                     is the center of 
                                       f
                                       1
                                     and 
                                       
                                          
                                             T
                                          
                                          
                                             ⃗
                                          
                                       
                                     is the tangential axis to 
                                       f
                                       1
                                    . After the part rotation, the configuration of 
                                       f
                                       1
                                     and 
                                       f
                                       2
                                     becomes similar to the configuration in the first case.

In the third case, the condition (
                                       
                                          
                                             N
                                             1
                                          
                                          
                                             ⃗
                                          
                                       
                                       .
                                       
                                          
                                             N
                                             2
                                          
                                          
                                             ⃗
                                          
                                       
                                       ≤
                                       0
                                     and for 
                                       i
                                       ,
                                       j
                                       =
                                       1
                                     to 4 and there exists a pair 
                                       
                                          (
                                          u
                                          ,
                                          w
                                          )
                                       
                                     such that 
                                       
                                          
                                             
                                                
                                                   I
                                                
                                                
                                                   u
                                                
                                             
                                             
                                                
                                                   J
                                                
                                                
                                                   w
                                                
                                             
                                          
                                          
                                             ⃗
                                          
                                       
                                       .
                                       
                                          
                                             N
                                             1
                                          
                                          
                                             ⃗
                                          
                                       
                                       <
                                       0
                                    ) is satisfied. A coincident constraint between 
                                       f
                                       1
                                     and the vertex 
                                       
                                          
                                             J
                                          
                                          
                                             v
                                          
                                       
                                     is applied temporarily (applied to move the face then deleted from the model). The vertex 
                                       
                                          
                                             J
                                          
                                          
                                             v
                                          
                                       
                                     is determined by the relation (Eq. (10)). Then, the model becomes one of the two previous configurations (case1 or case2). 
                                       
                                          (10)
                                          
                                             
                                                {
                                                
                                                   
                                                      
                                                         
                                                            
                                                               d
                                                            
                                                            
                                                               k
                                                               m
                                                            
                                                         
                                                         =
                                                         
                                                            ‖
                                                            
                                                               
                                                                  
                                                                     
                                                                        I
                                                                     
                                                                     
                                                                        k
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        J
                                                                     
                                                                     
                                                                        m
                                                                     
                                                                  
                                                               
                                                               
                                                                  ⃗
                                                               
                                                            
                                                            ⋅
                                                            
                                                               
                                                                  N
                                                                  1
                                                               
                                                               
                                                                  ⃗
                                                               
                                                            
                                                            ‖
                                                         
                                                         ;
                                                         
                                                         such as  
                                                         
                                                            
                                                               
                                                                  
                                                                     I
                                                                  
                                                                  
                                                                     k
                                                                  
                                                               
                                                               
                                                                  
                                                                     J
                                                                  
                                                                  
                                                                     m
                                                                  
                                                               
                                                            
                                                            
                                                               ⃗
                                                            
                                                         
                                                         ⋅
                                                         
                                                            
                                                               N
                                                               1
                                                            
                                                            
                                                               ⃗
                                                            
                                                         
                                                         <
                                                         0
                                                         .
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               d
                                                            
                                                            
                                                               v
                                                            
                                                         
                                                         =
                                                         
                                                            ‖
                                                            
                                                               
                                                                  
                                                                     
                                                                        I
                                                                     
                                                                     
                                                                        k
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        J
                                                                     
                                                                     
                                                                        v
                                                                     
                                                                  
                                                               
                                                               
                                                                  ⃗
                                                               
                                                            
                                                            ⋅
                                                            
                                                               
                                                                  N
                                                                  1
                                                               
                                                               
                                                                  ⃗
                                                               
                                                            
                                                            ‖
                                                         
                                                         ;
                                                      
                                                   
                                                   
                                                      
                                                         such as  
                                                         
                                                            
                                                               d
                                                            
                                                            
                                                               v
                                                            
                                                         
                                                         =
                                                         max
                                                         
                                                            (
                                                            
                                                               
                                                                  d
                                                               
                                                               
                                                                  k
                                                                  m
                                                               
                                                            
                                                            )
                                                         
                                                         ;
                                                         
                                                         k
                                                         ,
                                                         m
                                                         =
                                                         1
                                                           to  
                                                         4
                                                         .
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 


                           Case of Co: 
                              F
                              &
                              V
                           : To apply a coincident constraint between 
                              f
                              1
                            and a vertex 
                              S
                              a
                            of 
                              f
                              2
                           , a vertex 
                              S
                              a
                            is to be identified. Initially, 
                              f
                              2
                            is discretized. The discretization method depends on the type of the face loop. In the case of quadratic loop the discretization is performed by two parameters 
                              m
                            and 
                              n
                            (Fig. 10(a)). The face with circular contour is discretized by two polar parameters 
                              r
                            and 
                              θ
                           . For the face with complex loop, the discretization is performed by a fine tessellation. These discretization parameters are chosen by the designer according to the desired accuracy of the results. The explanation will be limited to the case of face with quadratic loop. 
                              f
                              1
                            is modeled by a grid of 
                              
                                 
                                    I
                                 
                                 
                                    m
                                    n
                                 
                              
                            vertices. Then, all 
                              
                                 
                                    I
                                 
                                 
                                    m
                                    n
                                 
                              
                            vertices are projected on the plane 
                              Q
                            according to the normal vector 
                              N
                              1
                            to obtain the set of 
                              
                                 
                                    J
                                 
                                 
                                    m
                                    n
                                 
                              
                            vertices. Finally, the distance 
                              
                                 
                                    d
                                 
                                 
                                    
                                       min
                                    
                                 
                              
                            is the minimum distance between the pairs 
                              
                                 (
                                 
                                    
                                       I
                                    
                                    
                                       m
                                       n
                                    
                                 
                                 ,
                                 
                                    
                                       J
                                    
                                    
                                       m
                                       n
                                    
                                 
                                 )
                              
                            and the vertex 
                              S
                              a
                            is identified by the relation (Eq. (11)). 
                              
                                 (11)
                                 
                                    
                                       {
                                       
                                          
                                             
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      
                                                         min
                                                      
                                                   
                                                
                                                =
                                                min
                                                
                                                   ‖
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                         
                                                            
                                                               I
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                      
                                                      
                                                         ⃗
                                                      
                                                   
                                                   ‖
                                                
                                                ;
                                                
                                                such as  
                                                
                                                   
                                                      J
                                                   
                                                   
                                                      n
                                                      m
                                                   
                                                
                                                ∈
                                                f
                                                2
                                             
                                          
                                          
                                             
                                                S
                                                a
                                                =
                                                
                                                   
                                                      J
                                                   
                                                   
                                                      n
                                                      m
                                                   
                                                
                                                ;
                                                
                                                such as  
                                                
                                                   ‖
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                         
                                                            
                                                               I
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                      
                                                      
                                                         ⃗
                                                      
                                                   
                                                   ‖
                                                
                                                =
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      
                                                         min
                                                      
                                                   
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                        


                           Case of Co: 
                              F
                              &
                              E
                           : To determine the edge 
                              E
                            it suffices to identify the two vertices 
                              V
                              1
                            and 
                              V
                              2
                           
                           
                              
                                 (
                                 E
                                 =
                                 
                                    [
                                    V
                                    1
                                    V
                                    2
                                    ]
                                 
                                 )
                              
                           . The face 
                              F
                              2
                            is discretized by using the method described previously. The first vertex 
                              V
                              1
                            is determined by the relation (Eq. (11)). The second vertex 
                              V
                              2
                            is identified by the equation (Eq. (12)). 
                              
                                 (12)
                                 
                                    
                                       {
                                       
                                          
                                             
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      
                                                         min
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                =
                                                min
                                                
                                                   ‖
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                      
                                                      
                                                         ⃗
                                                      
                                                   
                                                   ‖
                                                
                                                ;
                                                
                                                such as  
                                                
                                                   
                                                      J
                                                   
                                                   
                                                      n
                                                      m
                                                   
                                                
                                                ∈
                                                f
                                                2
                                                  and  
                                                
                                                   
                                                      J
                                                   
                                                   
                                                      n
                                                      m
                                                   
                                                
                                                ≠
                                                S
                                                a
                                             
                                          
                                          
                                             
                                                V
                                                2
                                                =
                                                
                                                   
                                                      J
                                                   
                                                   
                                                      n
                                                      m
                                                   
                                                
                                                ;
                                                
                                                such as  
                                                
                                                   ‖
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                      
                                                      
                                                         ⃗
                                                      
                                                   
                                                   ‖
                                                
                                                =
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      
                                                         min
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

In the nominal assembly, a coincident constraint between two faces 
                              f
                              1
                            and 
                              f
                              2
                            is applied such as the two faces are not in contact. In the realistic assembly, the relative position of 
                              f
                              1
                            and 
                              f
                              2
                            is verified by using a sub-algorithm to Verify Relative Position of Two Faces initially Without Contact (VRPTFWC) (Fig. 10(c)). In fact, in nominal configuration, both faces can have two main initial configurations NCase1 and NCase2 (Eq. (13)). The relative position of the two faces in the nominal configuration must be respected in the realistic one. 
                              
                                 (13)
                                 
                                    
                                       {
                                       
                                          
                                             
                                                If  
                                                
                                                   
                                                      N
                                                      1
                                                   
                                                   
                                                      ⃗
                                                   
                                                
                                                ⋅
                                                
                                                   
                                                      N
                                                      2
                                                   
                                                   
                                                      ⃗
                                                   
                                                
                                                =
                                                1
                                                ,
                                             
                                             
                                                then NCase1
                                             
                                          
                                          
                                             
                                                If  
                                                
                                                   
                                                      N
                                                      1
                                                   
                                                   
                                                      ⃗
                                                   
                                                
                                                ⋅
                                                
                                                   
                                                      N
                                                      2
                                                   
                                                   
                                                      ⃗
                                                   
                                                
                                                =
                                                −
                                                1
                                                ,
                                             
                                             
                                                then NCase2 .
                                             
                                          
                                       
                                    
                                 
                              
                            In the realistic configuration, the two faces can be in one of the three cases described in Fig. 9(b). In the case NCase2 the method is similar to the one defined previously: the sub-algorithm VRTFC is used. In the case NCase1, the case2 becomes the optimal case (Fig. 10(c)). Then, the sub-algorithm VRTFC is used after replacing the condition and the statement of the case1 by the condition and the statement of the case2.

The mate type is determined by the sub-algorithm to identify mate type between two planar faces initially on coincidence relationship (Fig. 10(b)). Thus, the mates Co: 
                              F
                              &
                              V
                           , Co: 
                              F
                              &
                              E
                            and Co: 
                              F
                              &
                              F
                            are to be applied in realistic model.


                           Case of Co: 
                              F
                              &
                              V
                           : The method is similar to the previous one (Section  3.1   Case of Co: 
                              F
                              &
                              V
                           ); only the relation (Eq. (11)) is replaced by the relation (Eq. (14)). In fact, 
                              S
                              a
                            can be outside the face 
                              F
                              2
                           .
                              
                                 (14)
                                 
                                    
                                       {
                                       
                                          
                                             
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      
                                                         min
                                                      
                                                   
                                                
                                                =
                                                min
                                                
                                                   ‖
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                         
                                                            
                                                               I
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                      
                                                      
                                                         ⃗
                                                      
                                                   
                                                   ‖
                                                
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      S
                                                   
                                                   
                                                      a
                                                   
                                                
                                                =
                                                
                                                   
                                                      J
                                                   
                                                   
                                                      n
                                                      m
                                                   
                                                
                                                ;
                                                
                                                such as  
                                                
                                                   ‖
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                         
                                                            
                                                               I
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                      
                                                      
                                                         ⃗
                                                      
                                                   
                                                   ‖
                                                
                                                =
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      
                                                         min
                                                      
                                                   
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                        


                           Case of Co: 
                              F
                              &
                              E
                           : The method is similar to the previous one (Section  3.1   Case of Co: 
                              F
                              &
                              E
                           ). The first vertex 
                              V
                              1
                            is determined by the relation (Eq. (14)). The second vertex 
                              V
                              2
                            is identified by the equation (Eq. (15)).
                              
                                 (15)
                                 
                                    
                                       {
                                       
                                          
                                             
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      
                                                         min
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                =
                                                min
                                                
                                                   ‖
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                         
                                                            
                                                               I
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                      
                                                      
                                                         ⃗
                                                      
                                                   
                                                   ‖
                                                
                                                ;
                                                
                                                such as  
                                                
                                                   
                                                      J
                                                   
                                                   
                                                      n
                                                      m
                                                   
                                                
                                                ≠
                                                S
                                                a
                                             
                                          
                                          
                                             
                                                V
                                                2
                                                =
                                                
                                                   
                                                      J
                                                   
                                                   
                                                      n
                                                      m
                                                   
                                                
                                                ;
                                                
                                                such as  
                                                
                                                   ‖
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                         
                                                            
                                                               I
                                                            
                                                            
                                                               n
                                                               m
                                                            
                                                         
                                                      
                                                      
                                                         ⃗
                                                      
                                                   
                                                   ‖
                                                
                                                =
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      
                                                         min
                                                      
                                                   
                                                   
                                                      ′
                                                   
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

In the nominal assembly, a distance mate between two faces 
                              f
                              1
                            and 
                              f
                              2
                            of two parts 
                              A
                              1
                            and 
                              A
                              2
                            is applied. In the realistic assembly, the relative position of 
                              f
                              1
                            and 
                              f
                              2
                            is verified by using a sub-algorithm VRPTFC (Fig. 9(a)). The distance condition, which is defined in nominal configuration between two planar faces (Dist: 
                              F
                              &
                              F
                           ), will be conserved or replaced by a distance mate between a planar face and an edge (Dist: 
                              F
                              &
                              E
                           ) or by a distance mate between a planar face and a vertex (Dist: 
                              F
                              &
                              V
                           ) according to the OFA (Fig. 10(b)). The constraint definition of (Dist: 
                              F
                              &
                              E
                           ) and (Dist: 
                              F
                              &
                              V
                           ) is performed by using the method used to define the mates (Co: 
                              F
                              &
                              E
                           ) and (Co: 
                              F
                              &
                              V
                           ) in the case of the coincidence constraints between planar faces initially in contact (Section  4.1.1).

In the case of the cylindrical joint, the coincident constraint between two axes (coaxiality) (Co: 
                           A
                           &
                           A
                        ) is conserved in the realistic configuration. In the case of revolute or attachment joint, the constraint (Co: 
                           A
                           &
                           A
                        ), which is defined in the nominal configuration, can be conserved or modeled by a coincident relation between an axis and a vertex (Co: 
                           A
                           &
                           V
                        ) in the realistic configuration.

The method to redefine the mating constraints in the case of a revolute joint is shown through the case of revolute joint between the two parts 
                              A
                            and 
                              B
                            (Fig. 11
                           (a) and (b)). This joint is defined by: 
                              
                                 •
                                 A coaxiality condition between two axes 
                                       L
                                       1
                                     (Co: 
                                       A
                                       1
                                       &
                                       A
                                       2
                                    ).

A coincident constraint between two planar faces 
                                       L
                                       2
                                     (Co: 
                                       F
                                       a
                                       2
                                       &
                                       F
                                       b
                                       2
                                    ).

After the application of the constraint 
                              
                                 
                                    L
                                 
                                 
                                    ′
                                 
                              
                              1
                           , the vertex 
                              V
                              u
                              v
                            and the plane 
                              Q
                              u
                              v
                            are determined by using the method in Fig. 12
                           :
                           
                              
                                 •
                                 A rotational angle 
                                       
                                          
                                             Ψ
                                          
                                          
                                             e
                                          
                                       
                                     about the axis 
                                       A
                                     (
                                       A
                                       =
                                       
                                          
                                             A
                                          
                                          
                                             ′
                                          
                                       
                                       1
                                       =
                                       
                                          
                                             A
                                          
                                          
                                             ′
                                          
                                       
                                       2
                                    ; the rotation axis) is defined: 
                                       
                                          
                                             Ψ
                                          
                                          
                                             e
                                          
                                       
                                       =
                                       2
                                       e
                                       π
                                       /
                                       N
                                     (
                                       e
                                       =
                                       1
                                     to 
                                       H
                                    ). The choice of the integer 
                                       H
                                     depends on the result accuracy intended by the designer and on the complexity of the face loop.

The face 
                                       F
                                       a
                                       
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                     is modeled by a grid of vertices 
                                       
                                          
                                             P
                                          
                                          
                                             i
                                             j
                                          
                                       
                                     by the two parameters 
                                       m
                                     and 
                                       n
                                     (method detailed previously). After each rotation of the part 
                                       
                                          
                                             A
                                          
                                          
                                             ′
                                          
                                       
                                     by an angle 
                                       
                                          
                                             Ψ
                                          
                                          
                                             e
                                          
                                       
                                     about the 
                                       A
                                     axis, 
                                       P
                                       i
                                       j
                                     are projected on the axis 
                                       A
                                     to obtain the 
                                       
                                          
                                             K
                                          
                                          
                                             i
                                             j
                                          
                                          
                                             e
                                          
                                       
                                     vertices (Fig. 12). The vertex 
                                       O
                                     is the intersection between the axis 
                                       A
                                     and the face 
                                       F
                                       a
                                       
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                    . 
                                       
                                          
                                             N
                                          
                                          
                                             ⃗
                                          
                                       
                                     is the driving vector of the 
                                       A
                                     axis. For each 
                                       
                                          
                                             Ψ
                                          
                                          
                                             e
                                          
                                       
                                     rotation, the distance 
                                       
                                          
                                             D
                                          
                                          
                                             p
                                             q
                                          
                                          
                                             e
                                          
                                       
                                     is determined by the relation (Eq. (16)). Then, the vertex 
                                       
                                          
                                             P
                                          
                                          
                                             u
                                             v
                                          
                                       
                                     corresponds to the distance 
                                       
                                          
                                             D
                                          
                                          
                                             u
                                             v
                                          
                                          
                                             w
                                          
                                       
                                    . 
                                       
                                          (16)
                                          
                                             
                                                {
                                                
                                                   
                                                      
                                                         
                                                            
                                                               D
                                                            
                                                            
                                                               p
                                                               q
                                                            
                                                            
                                                               e
                                                            
                                                         
                                                         =
                                                         max
                                                         
                                                            (
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  i
                                                                  j
                                                               
                                                               
                                                                  e
                                                               
                                                            
                                                            )
                                                         
                                                         ;
                                                         
                                                         
                                                            
                                                               D
                                                            
                                                            
                                                               i
                                                               j
                                                            
                                                            
                                                               e
                                                            
                                                         
                                                         =
                                                         O
                                                         
                                                            
                                                               K
                                                            
                                                            
                                                               i
                                                               j
                                                            
                                                         
                                                         ⋅
                                                         S
                                                         i
                                                         g
                                                         n
                                                         
                                                            (
                                                            
                                                               
                                                                  O
                                                                  
                                                                     
                                                                        K
                                                                     
                                                                     
                                                                        i
                                                                        j
                                                                     
                                                                  
                                                               
                                                               
                                                                  ⃗
                                                               
                                                            
                                                            ⋅
                                                            
                                                               
                                                                  N
                                                               
                                                               
                                                                  ⃗
                                                               
                                                            
                                                            )
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               P
                                                            
                                                            
                                                               u
                                                               v
                                                            
                                                         
                                                           such as  
                                                         
                                                            
                                                               D
                                                            
                                                            
                                                               u
                                                               v
                                                            
                                                            
                                                               w
                                                            
                                                         
                                                         =
                                                         max
                                                         
                                                            (
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  m
                                                                  n
                                                               
                                                               
                                                                  e
                                                               
                                                            
                                                            )
                                                         
                                                         ;
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            (
                                                            e
                                                            =
                                                            1
                                                              to  
                                                            H
                                                              and  
                                                            w
                                                            ∈
                                                            
                                                               [
                                                               1
                                                               ,
                                                               H
                                                               ]
                                                            
                                                            )
                                                         
                                                         .
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 

In the case of an attachment relation, the parts are linked by two coaxiality constraints and a coincident constraint between two planar faces. For example, the three parts 
                              A
                            (Fig. 11(a)), 
                              B
                            (Fig. 11(b)) and 
                              C
                            (Fig. 13(a)) are joined by an attachment relation performed by three constraints:
                              
                                 •
                                 
                                    
                                       L
                                       1
                                     (Co: 
                                       A
                                       1
                                       &
                                       A
                                       2
                                    ),


                                    
                                       L
                                       2
                                     (Co: 
                                       A
                                       1
                                       &
                                       A
                                       3
                                    ),


                                    
                                       L
                                       3
                                     (Co: 
                                       F
                                       5.3
                                       &
                                       F
                                       6.3
                                    ).


                                    
                                       
                                          
                                             L
                                          
                                          
                                             ′
                                          
                                       
                                       1
                                     (Co: 
                                       A
                                       1
                                       &
                                       
                                          
                                             V
                                             B
                                          
                                          
                                             e
                                          
                                       
                                    ),


                                    
                                       
                                          
                                             L
                                          
                                          
                                             ′
                                          
                                       
                                       2
                                     (Co: 
                                       A
                                       1
                                       &
                                       
                                          
                                             V
                                             C
                                          
                                          
                                             f
                                          
                                       
                                    ),


                                    
                                       
                                          
                                             L
                                          
                                          
                                             ′
                                          
                                       
                                       3
                                     (Co: 
                                       
                                          
                                             Q
                                          
                                          
                                             s
                                             t
                                          
                                       
                                       &
                                       
                                          
                                             V
                                          
                                          
                                             s
                                             t
                                          
                                       
                                    ).

The realistic axes 
                                       A
                                       
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                     and 
                                       A
                                       
                                          
                                             3
                                          
                                          
                                             ′
                                          
                                       
                                     are discretized by an increment 
                                       h
                                     to obtain two vertex sets 
                                       
                                          
                                             V
                                             B
                                          
                                          
                                             e
                                          
                                       
                                     and 
                                       
                                          
                                             V
                                             C
                                          
                                          
                                             f
                                          
                                       
                                     (
                                       e
                                       ,
                                       f
                                       =
                                       0
                                     to 
                                       h
                                    ).

The face 
                                       F
                                       a
                                       
                                          
                                             2
                                          
                                          
                                             ′
                                          
                                       
                                     is modeled by a set of vertices 
                                       
                                          
                                             P
                                          
                                          
                                             i
                                             j
                                          
                                       
                                     (
                                       i
                                       =
                                       1
                                     to 
                                       m
                                    ; 
                                       j
                                       =
                                       1
                                     to 
                                       n
                                       ;
                                       m
                                     and 
                                       n
                                     are the two parameters of the face discretization).

After the application of 
                                       
                                          
                                             L
                                          
                                          
                                             ′
                                          
                                       
                                       1
                                     and 
                                       
                                          
                                             L
                                          
                                          
                                             ′
                                          
                                       
                                       2
                                    , the plane 
                                       
                                          
                                             Q
                                          
                                          
                                             s
                                             t
                                          
                                       
                                     and the vertex 
                                       
                                          
                                             V
                                          
                                          
                                             s
                                             t
                                          
                                       
                                     (
                                       s
                                       ∈
                                       
                                          [
                                          1
                                          ;
                                          m
                                          ]
                                       
                                     and 
                                       t
                                       ∈
                                       
                                          [
                                          1
                                          ;
                                          n
                                          ]
                                       
                                    ) are determined using the method shown in Fig. 12. Then, the constraint 
                                       
                                          
                                             L
                                          
                                          
                                             ′
                                          
                                       
                                       3
                                     is applied. The assembly configurations that present interferences are eliminated.

In order to illustrate the proposed method, a rod and crankshaft assembly (Fig. 14
                     ) is selected as a validation. The assembly is realized through the mating constraints 
                        L
                        i
                      (
                        i
                        =
                        1
                      to 15) (Table 2
                     ). Those constraints simulate the assembly process sequences (seven sequences) and the kinematic state of the system. The realistic assembly rebuilding is based on three steps: 
                        
                           •
                           The rebuilding of the realistic configurations of the assembly components (the variational geometries). The realistic configuration of each component is obtained according to the dimensional and geometrical tolerances allocated to them (Fig. 11). This step is realized by using the algorithms presented previously (Sections  3 and 4);

The redefinition of the assembly mating constraints since the use of the constraints 
                                 L
                                 i
                               defined on the nominal assembly leads to obtain an over-constrained assembly;

The rebuilding of the realistic assembly to respect the OFA defined in nominal configuration.


                     Sequence 1:

In the sequence 1 of the assembly process, the parts 0 and 1 (Fig. 14) are linked by a fixed joint. The nominal sub-assembly SA1: {0,1} is defined by three constraints: 
                        
                           •
                           
                              
                                 L
                                 1
                               (Co: 
                                 F
                                 0.1
                                 &
                                 F
                                 1.1
                              );


                              
                                 L
                                 2
                               (Co: 
                                 F
                                 0.2
                                 &
                                 F
                                 1.2
                              );


                              
                                 L
                                 3
                               (Dist: 
                                 F
                                 0.3
                                 &
                                 F
                                 1.3
                              ).

In the realistic assembly, before applying each constraint, the relative position of 
                        F
                        0
                        .
                        i
                      and 
                        F
                        1
                        .
                        i
                      is verified by using a sub-algorithm VRPTFC (Fig. 9(a)). The realistic configurations of the parts 0′ and 1′ are obtained according to the dimensional and geometrical tolerances allocated to the two parts 1 and 2 respectively (the face displacements are multiplied by a scale factor for better illustration in Fig. 15
                     (a)): The faces 
                        
                           
                              F
                           
                           
                              ′
                           
                        
                        0.1
                        ,
                        
                           
                              F
                           
                           
                              ′
                           
                        
                        1.2
                        ,
                        
                           
                              F
                           
                           
                              ′
                           
                        
                        1.5
                      and 
                        
                           
                              F
                           
                           
                              ′
                           
                        
                        1.4
                      are the realistic configurations of 
                        F
                        0.1
                        ,
                        F
                        1.2
                        ,
                        F
                        1.5
                      and 
                        F
                        1.4
                      respectively. When the assembly is rebuilt with those realistic components, the model becomes over-constrained. So, the constraints 
                        L
                        i
                      (
                        i
                        =
                        4
                      to 15) are deactivated temporarily and the sub-assembly SA1: {0,1} must be resolved based on the OFA. The OFA of the sub-assembly 
                        S
                        A
                        1
                      is: 
                        
                           •
                           fixed joint;

No DoF;


                              
                                 
                                    (
                                    F
                                    0.1
                                    ,
                                    F
                                    1.1
                                    )
                                 
                               and 
                                 
                                    (
                                    F
                                    0.2
                                    ,
                                    F
                                    1.2
                                    )
                                 
                               are in contact.


                     Sequence 2:

The fixed joint to link the parts 1 and 2 (Sequence 2 — Table 2) is defined, in the nominal configuration, through three constraints 
                        L
                        i
                        +
                        3
                      (Dist: 
                        F
                        1
                        .
                        i
                        &
                        F
                        2
                        .
                        i
                     ; 
                        i
                        =
                        1
                      to 3). So, the sub-assembly 
                        S
                        A
                        2
                      is obtained. The update of those constraints is performed by the method described previously (Section  4.1.3). According to the OFA, the constraint 
                        L
                        4
                      is conserved. 
                        L
                        5
                      and 
                        L
                        6
                      become 
                        
                           
                              L
                           
                           
                              ′
                           
                        
                        5
                      (Dist: 
                        
                           
                              F
                           
                           
                              ′
                           
                        
                        1.2
                        &
                        E
                        2
                     ) and 
                        
                           
                              L
                           
                           
                              ′
                           
                        
                        6
                      (Dist: 
                        F
                        1.3
                        &
                        V
                        3
                     ) respectively. The edge 
                        E
                        2
                      and the vertex 
                        V
                        3
                      are determined by the method described in Section  4.1.1.


                     Sequence 3:

In the nominal configuration, a revolute joint links the two parts 1 and 3 (Fig. 14) in the assembly sequence 3 (Table 2). Thus, the sub-assembly 
                        S
                        A
                        3
                        =
                        
                           {
                           0
                           ,
                           1
                           ,
                           2
                           ,
                           3
                           }
                        
                      is obtained. This joint is defined by: 
                        
                           •
                           
                              
                                 L
                                 7
                               (Co: 
                                 A
                                 3.1
                                 &
                                 A
                                 1.1
                              ),


                              
                                 L
                                 8
                               (Co: 
                                 F
                                 3.3
                                 &
                                 F
                                 1.5
                              ).


                     Sequence 4:

Also, in sequence 4, the revolute joint between the parts 3 and 4, defined by 
                        L
                        9
                      (Co: 
                        A
                        3.2
                        &
                        A
                        4.1
                     ) and 
                        L
                        10
                      (Co: 
                        F
                        3.4
                        &
                        F
                        4.1
                     ) in nominal configuration to obtain the sub-assembly 
                        S
                        A
                        4
                     . In the realistic configuration, the assembly is performed by 
                        
                           
                              L
                           
                           
                              ′
                           
                        
                        9
                      (Co: 
                        
                           
                              A
                           
                           
                              ′
                           
                        
                        3.2
                        &
                        
                           
                              A
                           
                           
                              ′
                           
                        
                        4.1
                     ) and 
                        L
                        10
                      (Co: 
                        
                           
                              Q
                           
                           
                              ′
                           
                        
                        u
                        v
                        &
                        
                           
                              V
                           
                           
                              ′
                           
                        
                        u
                        v
                     ). 
                        
                           
                              Q
                           
                           
                              ′
                           
                        
                        u
                        v
                      and 
                        
                           
                              V
                           
                           
                              ′
                           
                        
                        u
                        v
                      are deduced by the method shown in Fig. 12.


                     Sequence 5:

The sub-assembly SA5 is performed by an attachment relation, the three parts 4, 5 and 6 (Sequence 5 in Table 2): 
                        
                           •
                           
                              
                                 L
                                 11
                               (Co: 
                                 A
                                 5.1
                                 &
                                 A
                                 6.1
                              ),


                              
                                 L
                                 12
                               (Co: 
                                 A
                                 5.1
                                 &
                                 A
                                 4.2
                              ),


                              
                                 L
                                 13
                               (Co: 
                                 F
                                 5.3
                                 &
                                 F
                                 6.3
                              ).

Using the method shown in Section  4.2.2, the constraints 
                        L
                        11
                        ,
                        L
                        12
                      and 
                        L
                        13
                      become: 
                        
                           •
                           
                              
                                 
                                    
                                       L
                                    
                                    
                                       ′
                                    
                                 
                                 11
                               (Co: 
                                 
                                    
                                       A
                                    
                                    
                                       ′
                                    
                                 
                                 5.1
                                 &
                                 
                                    
                                       V
                                       6
                                    
                                    
                                       e
                                    
                                 
                              ),


                              
                                 
                                    
                                       L
                                    
                                    
                                       ′
                                    
                                 
                                 12
                               (Co: 
                                 
                                    
                                       A
                                    
                                    
                                       ′
                                    
                                 
                                 5.1
                                 &
                                 
                                    
                                       V
                                       4
                                    
                                    
                                       f
                                    
                                 
                              ),


                              
                                 
                                    
                                       L
                                    
                                    
                                       ′
                                    
                                 
                                 13
                               (Co: 
                                 
                                    
                                       Q
                                    
                                    
                                       s
                                       t
                                    
                                 
                                 &
                                 
                                    
                                       V
                                    
                                    
                                       s
                                       t
                                    
                                 
                              ).

The new mating constraints defined in the realistic assembly (rod — crankshaft assembly) are aggregated in Table 2. Mating constraints are updated and applied on the assembly system. Then, the realistic configurations of the assembly are obtained (Fig. 18
                     (a)).

A set of assembly configurations does not present interferences between parts. However, the simulation of the realistic assembly motion shows the interferences between the cylinder and the piston. For example, the realistic assembly configuration Cm is obtained after updating the mating constraints: the minimum clearance Jmin is equal to 0.023 mm and the angle 
                        α
                      is equal to 50° (Fig. 18(a)). When the part 3′ is rotated about the axis 
                        
                           
                              A
                           
                           
                              ′
                           
                        
                        1.1
                      (to simulate the assembly motion), interferences are detected between parts (Fig. 18(b)).

All obtained configurations present interferences between parts (before or after the assembly motion). Thus, the tolerances allocated to the components must be modified. So, the proposed model is considered as a tool for visualization and tolerance impact analysis in the assembly simulation case.

The proposed model for tolerance analysis takes into account not only the part deviations but also the assembly process planning and the contact types between parts. In addition, the impact of the tolerance stack-up on the functional requirement in a dynamic environment can be determined.

@&#CONCLUSION@&#

In this paper, a model for the integration of dimensional and geometrical tolerances in CAD model was presented. The components with defects are automatically obtained according to the dimensional and geometrical tolerances.

The components with dimensional defects are obtained by a numerical perturbation method. In fact, the influence coefficients between driven and driving dimensions are identified. So, the values of the new driving dimensions are computed according to those coefficients and the tolerance values. After the allocation of those new dimensions to CAD model, components with dimensional defects are deduced.

Taking into account the geometrical tolerances, the method of computing the realistic configurations of the component depends on the tolerance zone geometry and the tolerance type. Indeed, according to the DoFs defined by the SDT, the tolerance zone is discretized to determine the realistic configurations of the toleranced element: Sub-algorithms are developed to obtain realistic configurations of a planar face or a cylindrical axis subjected to a positional and/or orientation tolerance. In CAD model, the realistic configurations of the part are obtained by the face displacements (rotation and/or translation) using the parameters deduced from the discretization.

The realistic configurations of the assembly are performed by the updating of the mating constraints. In fact, in the realistic modeling, a new method to redefine constraints according to the OFA is established. The mating constraints considered, in this paper, are the coincident and the distance relations between two planar faces as well as the coaxiality between two cylinder axes. The developed model is a tool of the tolerance analysis while considering the assembly process planning and the contact types between parts. The tolerance integration allows using the DMU in realistic configuration. In addition, the tolerance impacts on the results of F.E. calculation or dynamic computation can be performed.

The form specifications have effects on assembly requirements. Then, the future research works will be interested in the consideration of the form defects on the CAD model through another type of the tolerancing approach [29]. In addition, to take into account the statistics of real part variations, the tolerance can be modeled with statistical normal distribution; as the use of the Monte Carlo approach to generate random variational values of the tolerance  [30]. The discretization of the tolerance zone allows obtaining the face displacement parameters. Thus, for each obtained tolerance value, values of the displacement parameters can be defined. So, realistic assemblies according a statistical tolerancing can be obtained. The presented study is limited to the case of cylindrical or planar faces. However, the proposed method, basing in the discretization of the tolerance zone, can be improved, in the future works, to obtain possible configurations of another face types (conical, spherical…).

@&#REFERENCES@&#

