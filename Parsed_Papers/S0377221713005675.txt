@&#MAIN-TITLE@&#Benefits of a truck appointment system on the service quality of inland transport modes at a multimodal container terminal

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Use truck appointment system to reduce delays of trucks, trains, barges and vessels.


                        
                        
                           
                           Combine sizing of a truck appointment system and the allocation of straddle carriers.


                        
                        
                           
                           Mixed integer programming model to address both problems simultaneously.


                        
                        
                           
                           Experiments conducted on real-life instances.


                        
                        
                           
                           Validation of deterministic results via discrete-event simulation.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Container terminal

Intermodal transportation

Resource allocation

Straddle carrier

Truck appointment system

@&#ABSTRACT@&#


               
               
                  Container terminals pay more and more attention to the service quality of inland transport modes such as tucks, trains and barges. Truck appointment systems are a common approach to reduce truck turnaround times. This paper provides a tool to use the truck appointment system to increase not only the service quality of trucks, but also of trains, barges and vessels. We propose a mixed integer linear programming model to determine the number of appointments to offer with regard to the overall workload and the available handling capacity. The model is based on a network flow representation of the terminal and aims to minimize overall delays at the terminal. It simultaneously determines the number of truck appointments to offer and allocates straddle carriers to different transport modes. Numerical experiments, conducted on actual data, quantify the benefits of this combined solution approach. Discrete-event simulation validates the results obtained by the optimization model in a stochastic environment.
               
            

@&#INTRODUCTION@&#

Container terminals play the role of exchange hubs in intermodal transportation. They offer transfer facilities to move containers from vessels to trucks, trains and barges and vice versa. A terminal is composed of quays, the inland area and the yard. Fig. 1
                      illustrates an exemplary container terminal. Vessels berth at the quay where containers are unloaded and loaded by quay cranes. The inland area is the terminal’s interface with the inland transportation system (rail, road and waterway). It provides truck and train receiving gates where rail cars and trucks are unloaded and loaded with the appropriate equipment. Barges may be served at specific barge gates or at the same quay than vessels. The yard serves as a temporary storage location for full and empty containers.

Container terminals are increasingly competing as links within global supply chains and the connection to the hinterland becomes a key area for competition. Especially, fast service of inland transport modes becomes a strong competitive advantage. Container terminals have to deal with a varying workload and irregular truck arrivals over the day. If the peak of truck arrivals coincides with heavy workload periods for vessels, barges and trains this may decrease the performance and service quality of the entire terminal. Several container terminals have introduced truck appointment systems to balance truck arrivals. Many case studies (Maguire, Ivey, Golias, & Lipinsk, 2010; Giuliano & O’Brien, 2007; Morais et al., 2006; Srour, Kennedy, Jensen, & Mitchell, 2003) confirm that appointment systems have the potential to reduce congestion within the terminal.

This paper originates from considerations at a terminal at the Grand Port Maritime de Marseille (France) about introducing a truck appointment system. Several questions were addressed, such as: How to design (reservation and cancellation policy) and implement (technology) the truck appointment system? How to dimension it, e.g., how many appointments should be offered over the day? What are the impacts on the terminal’s overall service quality? This paper addresses the last two issues. We propose a new model to dimension the truck appointment system that also estimates the impact on the overall service quality. Although the model presented in this paper represents the situation at this container terminal, it can be adapted to other terminals easily.

Scarce literature exists about modeling and dimensioning truck appointment systems. Huynh and Walton (2008) combine mathematical formulation and simulation to determine the maximum number of trucks to be accepted; their model is based on resource constraints and target truck turnaround times. Murty et al. (2005) mention a simulation model minimizing a combined penalty for yard-crane idle time and for the fraction of time during which the queue of trucks waiting at the yard crane is too long. Chen, Zhou, and List (2011) develop a convex nonlinear programming model minimizing the total truck turnaround time and the difference between preferred arrival times and assigned time slots. In a second step, they determine time-varying tolls that lead to the optimized truck arrival pattern. Guan and Liu (2009) use a multi-server queuing model and a nonlinear optimization model to determine the optimal number of gate lanes to open while minimizing a combined cost of truck waiting times and gate operating costs.

All these studies have a very local perspective on the problem: they all assume a given handling capacity allocated to trucks and try to minimize queuing consequences. In our opinion, these studies neglect the fact that internal material handling resources serving trucks, also have to serve trains, barges and vessels. We address the problem at a higher level where truck appointments are sized depending on the activity generated by vessels, trains and barges (which can usually be very well anticipated). Typically, the terminal can serve fewer trucks during time slots with high levels of activity for trains, barges and vessels. The terminal should thus offer fewer truck appointments for busy time slots and more appointments for less busy time slots. Consequently, the allocation of handling capacity to different transport modes over the day and the dimensioning of the appointment system should be deeply entwined.

The given container terminal in Marseilles – and presumably most terminals of equivalent size – uses manned straddle carriers for internal transportation and storage operations. Trucks, trains, barges and vessels compete for the available straddle carriers. Allocation decisions are taken on a daily basis based on the forecasted workload over the day. We deal with the problem at a tactical level and combine the allocation of straddle carriers with the dimensioning of the truck appointment system. Our objective is to evaluate if the truck appointment system may be used to reduce overall delays of trucks, trains, barges and vessels at the terminal.

The content of the paper is as follows. Section 2 introduces the combined problem of allocating straddle carriers and determining the number of truck appointments to offer from a practical point of view. It also states the modeling approach and made assumptions. Section 3 presents the corresponding mixed integer linear programming model. Section 4 presents experiments conducted on actual data to evaluate the impact of a truck appointment system on overall delays. Results show that standard IP solvers are able to solve this problem. Section 5 validates the results obtained by the optimization model in a stochastic environment via discrete-event simulation. Section 6 concludes the paper.

Container terminals use truck appointment systems to limit the number of trucks admitted per time slot in order to even out the demand over the day. Appointment systems may be implemented in different ways. Some terminals make the use of the appointment system mandatory, others serve trucks with and without appointments. Terminals have to decide whether to offer appointments on a container or on a truck basis. In the first case, appointments have to be made to deliver or pick up a specific container; in the second case, appointments are made for trucks without further information on container delivery or pick up. Terminals also differ with regard to the used appointment system provider, the reservation policy (how and when) and the way no-shows are handled. Some terminals prepare container pick-ups based on the made appointments, some make special arrangements at gates for trucks with appointments and others do not differentiate between trucks with and without appointment systems. (Refer to Giuliano & O’Brien (2007) and Morais et al. (2006) for an overview of different appointment systems implemented at container terminals in the US.)

Like Chen et al. (2011), we chose to represent container terminals using obligatory appointment systems. Trucks have to book an appointment for a specific container for a specific time slot to enter the terminal to deliver or pickup this container. Entering the terminal without an appointment is not possible. We suppose that the terminal can estimate the preferred arrival time slots of trucks from historic data. Based on this estimate, it determines the number of appointments to offer per time slot. At an operational level, trucks then book their appointments among available ones. The objective is to offer appointments that match the preferred arrival times. However, serving all trucks at their preferred arrivals may not be the most advantageous situation for the terminal. It may decide to offer fewer appointments than wished for some time slots and more than wished for others. This forces some trucks to enter the terminal during a time slot different from their preferred arrival. To respect preferred truck arrivals, the maximal deviation between preferred and assigned time slots is limited. To compensate trucks for possible deviations and to minimize truck waiting times, each truck is served within a guaranteed service time. Consequently, the terminal has to allocate enough internal handling resources to serve all trucks within their assigned time slots.

Straddle carriers can lift containers on their own and operate independently from the equipment used to (un) load vehicles. We restrict our study to terminals using manned straddle. The terminal operator can assign workers to straddle carriers on a daily basis; some operators (e.g., in Marseilles) can even hire drivers on a daily basis. The number of available straddle carriers depends thus on the number of drivers and varies from day to day. To simplify drivers’ jobs, straddle carriers are allocated to one type of task (e.g., serve trucks or serve a vessel) for a given time interval and only altered at discrete points in time. This divides the working day into discrete time periods. This allocation policy is used at Marseilles and other small – and medium-sized container terminals using manned straddle carriers.

At a tactical level, the terminal operator has to decide how many drivers are needed for the next day, how to allocate the available straddle carriers to the different transport modes and how many truck appointments to offer. The difference to a classical allocation problem is that truck arrivals may be deviated if advantageous. The objective is to determine an allocation that minimizes truck deviations and delays of trains, barges and vessels. Inevitably, the number of truck appointments to offer depends on the handling capacity allocated to trucks. But, the proposed allocation takes deviation costs of trucks into account. Once the tactical straddle carrier allocation has been determined, the terminal operator can tackle operational decisions (which straddle carrier to assign to a specific container and which truck to assign to which time slot) for the given allocation with dedicated approaches.

Trains, barges and vessels differ in cargo volume, operating costs, knowledge and reliability of arrival dates, due dates and required handling equipment. They are served at specific gates, with dedicated equipment and an adapted service strategy. These different service strategies lead to different delay criteria (e.g., serve as fast as possible, serve within a given time window or penalize non-executed tasks at the vehicle’s departure). The model has to be generic enough to be easily adapted to different service strategies and delay criteria.

Studies addressing the resource allocation problem at container terminals do not consider the possibility to deviate truck arrivals. Most of them focus on vessel turnaround times and resources at the quay side; they do not include inland transport modes. Almost all neglect the fact that some resources are shared among different transport modes and may be allocated to different modes within one day. Kang, Medina, and Ouyang (2008) present a cyclic queue model and a Markovian decision model to optimize the number of cranes and trucks for vessel unloading operations. Alessandri, Cervellera, Cuneo, Gaggero (2008) use a system of queues to represent arrivals of vessels, trucks and trains as well as containers within the yard. Their objective is to minimize the lay times of vehicles. Alessandri, Cervellera, Cuneo, Gaggero, Soncin (2008) present a solution approach based on neural networks for the same problem. Vis, de Koster, and Savelsbergh (2005) determine the number of vehicles required to transport containers between the quay and the yard. They transform the problem into a vertex-disjoint path cover problem. Kozan (2000) presents a network model to minimize total throughput time of containers. This model is meant to serve as a decision support system for investment appraisal, but not for improvements at an operational level. Gambardella, Mastrolilli, Rizzoli, and Zaffalon (2001) determine a cost minimal allocation of quay cranes, transport vehicles and yard cranes to vessels. They formulate the problem as a network design problem where containers to be moved are flows in the network and arc capacities are limited by the number of allocated resources. Inspired from them, Zehendner, Feillet, Absi, and Dauzère-Pérès (2011b) present a multicommodity min-cost flow problem with additional constraints to determine an allocation of straddle carriers to trucks, trains, barges and vessels to minimize overall delays at the terminal.

This paper extends the latter one to include the dimensioning of a truck appointment system. The objective is to determine the number of truck appointments to offer and an allocation of straddle carriers minimizing overall delays at the terminal. A straddle carrier is allocated to one type of task for an entire time period, but it can be reallocated to another type of task at the end of the time period. The allocation may thus be altered at discrete periods in time and is shared among different transport modes over the day. The model takes as input the expected workload for the next day and the handling capacity of the terminal. The expected workload is defined by the number of arriving vehicles per transport mode and per time period. Each vehicle is described by its arrival time, its due date and the number of tasks (number of containers to be unloaded and loaded). The handling capacity of the terminal is limited by the number of available straddle carriers (straddle carriers with a driver) and their average handling capacity. We assume that the expected workload can be handled if a driver is hired for each straddle carrier for each shift. Since we plan for the next day, processing times for single tasks cannot be estimated. Instead, we use an average number of tasks a straddle carrier can handle per transport mode per period. This average is the same for import and export containers.

To determine the minimum number of drivers needed to obtain the desired service quality, the optimization model is executed for a few scenarios with different values of available straddle carriers. Solving the model several times is not a problem as solution times are very short (as we will see in Section 4) and few scenarios have to be analyzed since the number of drivers can be roughly estimated from the expected workload and the average handling capacity. The terminal operator can choose the number of drivers, based on delays indicated by the optimization model for the different scenarios.

We use a multicommodity min-cost flow model with additional constraints to represent the situation at the terminal. Section 3.1 introduces a generic core model representing the service of vehicles at the terminal. It relates the number of executed and delayed tasks to the number of available straddle carriers. Section 3.2 extends the core model to represent different service strategies used for trains, barges, vessels and trucks.

The terminal serves multiple vehicles of different transport modes during one working day. The working day is divided into T discrete time periods. 
                           
                              M
                              =
                              {
                              c
                              ,
                              r
                              ,
                              b
                              ,
                              v
                              }
                           
                         describes the set of transport modes where c refers to trucks, r to trains, b to barges and v to vessels. I
                        
                           m
                         indicates the number of vehicles of transport mode 
                           
                              m
                              ∈
                              M
                           
                         arriving at the terminal during the day. We represent all arriving vehicles via commodities. Every commodity is identified by a pair (m,
                        i) where i (1⩽
                        i
                        ⩽
                        I
                        
                           m
                        ) corresponds to the i
                        
                           th
                         vehicle of transport mode m. C denotes the set of commodities. A single commodity k
                        ∈
                        C is defined by:
                           
                              
                                 
                                 
                                 
                                    
                                       
                                          m
                                          
                                             k
                                          
                                       
                                       its transport mode (
                                             
                                                
                                                   
                                                      m
                                                   
                                                   
                                                      k
                                                   
                                                
                                                ∈
                                                M
                                             
                                          ),
                                    
                                    
                                       
                                          p
                                          
                                             k
                                          
                                       
                                       its number of tasks (containers to be unloaded and loaded),
                                    
                                    
                                       
                                          r
                                          
                                             k
                                          
                                       
                                       its arrival time (1⩽
                                          r
                                          
                                             k
                                          
                                          ⩽
                                          T),
                                    
                                    
                                       
                                          d
                                          
                                             k
                                          
                                       
                                       its due date (r
                                          
                                             k
                                          
                                          ⩽
                                          d
                                          
                                             k
                                          
                                          ⩽
                                          T).
                                    
                                 
                              
                           
                        
                     

We define a directed graph G
                        =(V,
                        A) to represent the arrival and service of commodities with vertex set V
                        =
                        V
                        1
                        ∪
                        V
                        2
                        ∪
                        V
                        3 and arc set A
                        =
                        A
                        1
                        ∪
                        A
                        2
                        ∪
                        A
                        3:
                           
                              
                                 V
                                 1
                                 ={o
                                 
                                    k
                                 ∣k
                                 ∈
                                 C} where o
                                 
                                    k
                                  is the source node for commodity k,


                                 V
                                 2
                                 ={v
                                 
                                    t
                                 ∣1⩽
                                 t
                                 ⩽
                                 T} where v
                                 
                                    t
                                  represents a time period t of the working day,


                                 V
                                 3
                                 ={s
                                 
                                    k
                                 ∣k
                                 ∈
                                 C} where s
                                 
                                    k
                                  is the sink node for commodity k,


                                 
                                    
                                       
                                          
                                             A
                                          
                                          
                                             1
                                          
                                       
                                       =
                                       {
                                       (
                                       
                                          
                                             o
                                          
                                          
                                             k
                                          
                                       
                                       ,
                                       
                                          
                                             v
                                          
                                          
                                             
                                                
                                                   r
                                                
                                                
                                                   k
                                                
                                             
                                          
                                       
                                       )
                                       |
                                       k
                                       ∈
                                       C
                                       }
                                    
                                 : A
                                 1 connects the source node of every commodity from V
                                 1 to the node in V
                                 2 representing the time period in which the commodity arrives,


                                 A
                                 2
                                 ={(v
                                 
                                    t
                                 ,
                                 v
                                 
                                    t+1)∣1⩽
                                 t
                                 ⩽
                                 T
                                 −1}: A
                                 2 connects every time period to the next time period by connecting a node in V
                                 2 to its successor in V
                                 2,


                                 A
                                 3
                                 ={(v
                                 
                                    t
                                 ,
                                 s
                                 
                                    k
                                 )∣k
                                 ∈
                                 C,r
                                 
                                    k
                                 
                                 ⩽
                                 t
                                 ⩽
                                 d
                                 
                                    k
                                 }: A
                                 3 connects every node in V
                                 2 for which the commodity may be at the terminal to the sink node of the commodity in V
                                 3.

The straddle carrier allocation problem can be represented as a multicommodity flow problem where for each commodity k, p
                        
                           k
                         units of flow are injected in the network and have to transit between the source node (o
                        
                           k
                        ) and the sink node (s
                        
                           k
                        ). Flows on arcs A
                        1 represent the arrival of a vehicle with its tasks, flows on arcs A
                        2 represent delaying tasks from one period to the next and flows on arcs A3 represent the execution of tasks. Fig. 2
                         illustrates the structure of the graph for an example with T
                        =9 and two commodities k
                        =1,2 with r
                        1
                        =1, d
                        1
                        =6, r
                        2
                        =4 and d
                        2
                        =8.

The delay of a commodity k can be computed from flows on arcs A
                        3. We use arc costs 
                           
                              
                                 
                                    c
                                 
                                 
                                    ij
                                 
                                 
                                    k
                                 
                              
                           
                         on arcs A
                        3 to represent delay costs. The implementation of arc costs depends on the chosen service strategy; some examples are implemented in Section 3.2. An additional capacity constraint is added to limit the number of executed tasks by the number of available straddle carriers. We distinguish two cases: a straddle carrier is allocated to exactly one commodity per period or a straddle carrier is shared among all commodities of the same transport mode per period (this depends on the chosen service strategy). In both cases, excess capacity allocated to one commodity or one set of commodities may not be reallocated to other commodities within one time period. We use the following variables and parameters to represent costs and the handling capacity of the terminal:
                           
                              
                                 
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      ij
                                                   
                                                   
                                                      k
                                                   
                                                
                                             
                                          
                                       
                                       Flow of commodity k
                                          ∈
                                          C on arc (i,j)∈
                                          A,
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      c
                                                   
                                                   
                                                      ij
                                                   
                                                   
                                                      k
                                                   
                                                
                                             
                                          
                                       
                                       Costs of arc (i,j)∈
                                          A
                                          3 for commodity k,
                                    
                                    
                                       
                                          sc
                                          
                                             t
                                          
                                       
                                       Number of available straddle carriers (with a driver) at period t,
                                    
                                    
                                       
                                          h
                                          
                                             m
                                          
                                       
                                       Average number of tasks a straddle carrier serving transport mode m can handle per period,
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      M
                                                   
                                                   
                                                      ded
                                                   
                                                
                                             
                                          
                                       
                                       Set of all transport modes where straddle carriers are allocated to exactly one commodity,
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      M
                                                   
                                                   
                                                      shar
                                                   
                                                
                                             
                                          
                                       
                                       Set of all transport modes m where straddle carriers are shared among all commodities k with m
                                          
                                             k
                                          
                                          =
                                          m.
                                    
                                 
                              
                           
                        
                     

Here, we present the general problem structure which is valid for all service strategies. Section 3.2 extends this model to represent different service strategies.
                           
                              (1)
                              
                                 minimize
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          (
                                          i
                                          ,
                                          j
                                          )
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                3
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          ∈
                                          C
                                       
                                    
                                 
                                 
                                    
                                       c
                                    
                                    
                                       ij
                                    
                                    
                                       k
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       ij
                                    
                                    
                                       k
                                    
                                 
                              
                           
                        subject to
                           
                              (2)
                              
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             o
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             
                                                
                                                   r
                                                
                                                
                                                   k
                                                
                                             
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       p
                                    
                                    
                                       k
                                    
                                 
                                 
                                 (
                                 k
                                 ∈
                                 C
                                 )
                              
                           
                        
                        
                           
                              (3)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          
                                             
                                                δ
                                             
                                             
                                                -
                                             
                                          
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                k
                                             
                                          
                                          )
                                       
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             is
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       p
                                    
                                    
                                       k
                                    
                                 
                                 
                                 (
                                 k
                                 ∈
                                 C
                                 )
                              
                           
                        
                        
                           
                              (4)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          
                                             
                                                δ
                                             
                                             
                                                -
                                             
                                          
                                          (
                                          j
                                          )
                                       
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       ij
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          
                                             
                                                δ
                                             
                                             
                                                +
                                             
                                          
                                          (
                                          j
                                          )
                                       
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       ji
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 0
                                 
                                 (
                                 j
                                 ∈
                                 
                                    
                                       V
                                    
                                    
                                       2
                                    
                                 
                                 ,
                                 k
                                 ∈
                                 C
                                 )
                              
                           
                        
                        
                           
                              (5)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          {
                                          k
                                          ∈
                                          C
                                          |
                                          
                                             
                                                m
                                             
                                             
                                                k
                                             
                                          
                                          ∈
                                          
                                             
                                                M
                                             
                                             
                                                ded
                                             
                                          
                                          }
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            t
                                                         
                                                      
                                                      
                                                         
                                                            s
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                   
                                                      k
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      h
                                                   
                                                   
                                                      
                                                         
                                                            m
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          ∈
                                          
                                             
                                                M
                                             
                                             
                                                shar
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      {
                                                      k
                                                      ∈
                                                      C
                                                      |
                                                      
                                                         
                                                            m
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      =
                                                      m
                                                      }
                                                   
                                                
                                                
                                                   
                                                      x
                                                   
                                                   
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            t
                                                         
                                                      
                                                      
                                                         
                                                            s
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                   
                                                      k
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      h
                                                   
                                                   
                                                      m
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 ⩽
                                 
                                    
                                       sc
                                    
                                    
                                       t
                                    
                                 
                                 
                                 (
                                 t
                                 ∈
                                 T
                                 )
                              
                           
                        The objective function (1) minimizes the total cost. Constraints (2)–(4) make sure that all tasks are executed for every commodity k. δ
                        −(j) describes the predecessor set of node j (the set of nodes i
                        ∈
                        V with (i,
                        j)∈
                        A) and δ
                        +(j) describes the successor set of node j (the set of nodes i
                        ∈
                        V with (j,
                        i)∈
                        A). Constraints (2) and (3) impose that all tasks leave the source node o
                        
                           k
                         and enter the sink node s
                        
                           k
                        . Constraint (4) ensures flow conservation for nodes j
                        ∈
                        V
                        2. Constraint (5) is a capacity constraint and makes sure that the number of allocated straddle carriers does not exceed the number of available straddle carriers. The number of straddle carriers allocated to a given commodity for a given period may be determined from 
                           
                              
                                 
                                    x
                                 
                                 
                                    
                                       
                                          v
                                       
                                       
                                          t
                                       
                                    
                                    
                                       
                                          s
                                       
                                       
                                          k
                                       
                                    
                                 
                                 
                                    k
                                 
                              
                           
                         and 
                           
                              
                                 
                                    h
                                 
                                 
                                    
                                       
                                          m
                                       
                                       
                                          k
                                       
                                    
                                 
                              
                           
                        . The ceil function prevents sharing straddle carriers within one time period among different commodities for 
                           
                              
                                 
                                    m
                                 
                                 
                                    k
                                 
                              
                              ∈
                              
                                 
                                    M
                                 
                                 
                                    ded
                                 
                              
                           
                         and among different set of commodities for 
                           
                              
                                 
                                    m
                                 
                                 
                                    k
                                 
                              
                              ∈
                              
                                 
                                    M
                                 
                                 
                                    shar
                                 
                              
                           
                        . Constraint (5) can easily be linearized with the following variables and constraints:
                           
                              
                                 
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      w
                                                   
                                                   
                                                      t
                                                   
                                                   
                                                      k
                                                   
                                                
                                             
                                          
                                       
                                       Number of straddle carriers allocated to commodity k in period t 
                                          
                                             
                                                (
                                                k
                                                ∈
                                                C
                                                |
                                                
                                                   
                                                      m
                                                   
                                                   
                                                      k
                                                   
                                                
                                                ∈
                                                
                                                   
                                                      M
                                                   
                                                   
                                                      ded
                                                   
                                                
                                                ,
                                                t
                                                ∈
                                                T
                                                )
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      W
                                                   
                                                   
                                                      t
                                                   
                                                   
                                                      m
                                                   
                                                
                                             
                                          
                                       
                                       Number of straddle carriers allocated to the set of all commodities with m
                                          
                                             k
                                          
                                          =
                                          m in period 
                                             
                                                t
                                                (
                                                m
                                                ∈
                                                
                                                   
                                                      M
                                                   
                                                   
                                                      shar
                                                   
                                                
                                                ,
                                                t
                                                ∈
                                                T
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (6)
                              
                                 
                                    
                                       w
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                                 ⩾
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             
                                                
                                                   v
                                                
                                                
                                                   t
                                                
                                             
                                             
                                                
                                                   s
                                                
                                                
                                                   k
                                                
                                             
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       
                                          
                                             h
                                          
                                          
                                             
                                                
                                                   m
                                                
                                                
                                                   k
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                 (
                                 k
                                 ∈
                                 C
                                 |
                                 
                                    
                                       m
                                    
                                    
                                       k
                                    
                                 
                                 ∈
                                 
                                    
                                       M
                                    
                                    
                                       ded
                                    
                                 
                                 ,
                                 t
                                 ∈
                                 T
                                 )
                              
                           
                        
                        
                           
                              (7)
                              
                                 
                                    
                                       W
                                    
                                    
                                       t
                                    
                                    
                                       m
                                    
                                 
                                 ⩾
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          {
                                          k
                                          ∈
                                          C
                                          |
                                          
                                             
                                                m
                                             
                                             
                                                k
                                             
                                          
                                          =
                                          m
                                          }
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             
                                                
                                                   v
                                                
                                                
                                                   t
                                                
                                             
                                             
                                                
                                                   s
                                                
                                                
                                                   k
                                                
                                             
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       
                                          
                                             h
                                          
                                          
                                             m
                                          
                                       
                                    
                                 
                                 
                                 (
                                 m
                                 ∈
                                 
                                    
                                       M
                                    
                                    
                                       shar
                                    
                                 
                                 ,
                                 t
                                 ∈
                                 T
                                 )
                              
                           
                        
                        
                           
                              (8)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          {
                                          k
                                          ∈
                                          C
                                          |
                                          
                                             
                                                m
                                             
                                             
                                                k
                                             
                                          
                                          ∈
                                          
                                             
                                                M
                                             
                                             
                                                ded
                                             
                                          
                                          }
                                       
                                    
                                 
                                 
                                    
                                       w
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          ∈
                                          
                                             
                                                M
                                             
                                             
                                                shar
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       W
                                    
                                    
                                       t
                                    
                                    
                                       m
                                    
                                 
                                 ⩽
                                 
                                    
                                       sc
                                    
                                    
                                       t
                                    
                                 
                                 
                                 (
                                 t
                                 ∈
                                 T
                                 )
                              
                           
                        
                        
                           
                              (9)
                              
                                 
                                    
                                       w
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                                 ∈
                                 N
                                 
                                 (
                                 k
                                 ∈
                                 C
                                 |
                                 
                                    
                                       m
                                    
                                    
                                       k
                                    
                                 
                                 ∈
                                 
                                    
                                       M
                                    
                                    
                                       ded
                                    
                                 
                                 ,
                                 t
                                 ∈
                                 T
                                 )
                              
                           
                        
                        
                           
                              (10)
                              
                                 
                                    
                                       W
                                    
                                    
                                       t
                                    
                                    
                                       m
                                    
                                 
                                 ∈
                                 N
                                 
                                 (
                                 m
                                 ∈
                                 
                                    
                                       M
                                    
                                    
                                       shar
                                    
                                 
                                 ,
                                 t
                                 ∈
                                 T
                                 )
                              
                           
                        
                     

We extend the core multicommodity flow model to represent an obligatory truck appointment system and three different service strategies used at the Grand Port Maritime de Marseille for trains, barges, vessels. The objective is to determine a straddle carrier allocation and the number of truck appointments to offer per period that minimize overall delays at the terminal. We use C
                        
                           m
                         to refer to all commodities of the same transport mode m and 
                           
                              
                                 
                                    A
                                 
                                 
                                    3
                                 
                                 
                                    m
                                 
                              
                           
                         to refer to all arcs (i,j)∈
                        A
                        3 related to transport mode m.


                        Train. Rail cars are brought and picked up by an engine according to a fixed schedule every day. We set arrival dates r
                        
                           k
                         and due dates d
                        
                           k
                         so as to represent the planned schedule. Straddle carriers are shared among different trains and we set 
                           
                              r
                              ∈
                              
                                 
                                    M
                                 
                                 
                                    shar
                                 
                              
                           
                        . A penalty c
                        
                           r
                         has to be paid for every container remaining at the terminal after the departure of its train. We add sets V
                        4 and A
                        4 to model unexecuted tasks.
                           
                              
                                 V
                                 4
                                 ={u
                                 
                                    k
                                 ∣k
                                 ∈
                                 C
                                 
                                    r
                                 } where u
                                 
                                    k
                                  is an additional sink node for commodity k
                              


                                 
                                    
                                       
                                          
                                             A
                                          
                                          
                                             4
                                          
                                       
                                       =
                                       {
                                       (
                                       
                                          
                                             v
                                          
                                          
                                             
                                                
                                                   d
                                                
                                                
                                                   k
                                                
                                             
                                          
                                       
                                       ,
                                       
                                          
                                             u
                                          
                                          
                                             k
                                          
                                       
                                       )
                                       |
                                       k
                                       ∈
                                       
                                          
                                             C
                                          
                                          
                                             r
                                          
                                       
                                       }
                                    
                                  : A
                                 4 connects the node in V
                                 2 corresponding to the due date period of the train to the new sink u
                                 
                                    k
                                 
                              


                                 c
                                 
                                    r
                                  Cost for each unexecuted train task, applies to arcs (i,
                                 j)∈
                                 A
                                 4
                              

Flows on arcs A
                        4 indicate the number of unexecuted tasks and represent delays of trains. No costs occur for tasks that are executed in any period prior to the departure of the train. To penalize only unexecuted tasks, we set 
                           
                              
                                 
                                    c
                                 
                                 
                                    ij
                                 
                                 
                                    k
                                 
                              
                              =
                              0
                              
                                 
                                    
                                       k
                                       ∈
                                       
                                          
                                             C
                                          
                                          
                                             r
                                          
                                       
                                       ,
                                       (
                                       i
                                       ,
                                       j
                                       )
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             3
                                          
                                          
                                             r
                                          
                                       
                                    
                                 
                              
                           
                         and add term Z
                        
                           r
                         (Constraint (11)) to the objective function. We also modify Constraint (3) which becomes Constraint (12) to include unexecuted tasks.
                           
                              (11)
                              
                                 
                                    
                                       Z
                                    
                                    
                                       r
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          ∈
                                          
                                             
                                                C
                                             
                                             
                                                r
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          (
                                          i
                                          ,
                                          j
                                          )
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                4
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       c
                                    
                                    
                                       r
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       ij
                                    
                                    
                                       k
                                    
                                 
                              
                           
                        
                        
                           
                              (12)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          
                                             
                                                δ
                                             
                                             
                                                -
                                             
                                          
                                          (
                                          
                                             
                                                s
                                             
                                             
                                                k
                                             
                                          
                                          )
                                       
                                    
                                 
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             is
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             
                                                
                                                   d
                                                
                                                
                                                   k
                                                
                                             
                                          
                                       
                                       
                                          
                                             u
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       p
                                    
                                    
                                       k
                                    
                                 
                                 
                                 
                                 k
                                 ∈
                                 
                                    
                                       C
                                    
                                    
                                       r
                                    
                                 
                              
                           
                        
                     

Barges arrive at the terminal according to a schedule and leave as soon as they are completely served. They should be served as fast as possible, but at the latest until the end of the working day. We set arrival dates r
                           
                              k
                            to the planned arrival times and due dates d
                           
                              k
                            to the end of the working day. Straddle carriers are allocated to exactly one barge and we set 
                              
                                 b
                                 ∈
                                 
                                    
                                       M
                                    
                                    
                                       ded
                                    
                                 
                              
                           . Barges have to be loaded/unloaded by quay cranes. Straddle carriers may operate independently from quay cranes as they can lift up containers on their own. But, the number of executed tasks cannot exceed the quay crane capacity during unloading and should not exceed the quay crane capacity during loading to avoid congestion at the quay. Each period a barge spends at the terminal is penalized. We add binary variables 
                              
                                 
                                    
                                       y
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                              
                            and fix costs c
                           
                              b
                            to measure delays of barges and a capacity q
                           
                              b
                            on arcs 
                              
                                 
                                    
                                       A
                                    
                                    
                                       3
                                    
                                    
                                       b
                                    
                                 
                              
                            to represent limits on the throughput.
                              
                                 
                                    
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         t
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                
                                             
                                          
                                          Binary variables indicating if commodity k is at the terminal at the end of period t (k
                                             ∈
                                             C
                                             
                                                b
                                             ,r
                                             
                                                k
                                             
                                             ⩽
                                             t
                                             ⩽
                                             d
                                             
                                                k
                                             
                                             − 1)
                                       
                                       
                                          
                                             c
                                             
                                                b
                                             
                                          
                                          Cost for each period a barge spends at the terminal, applies for variables 
                                                
                                                   
                                                      
                                                         y
                                                      
                                                      
                                                         t
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                             q
                                             
                                                b
                                             
                                          
                                          Capacity of arcs 
                                                
                                                   (
                                                   i
                                                   ,
                                                   j
                                                   )
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         3
                                                      
                                                      
                                                         b
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

Delays of barges are only expressed by variables 
                              
                                 
                                    
                                       y
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                              
                           . We set 
                              
                                 
                                    
                                       c
                                    
                                    
                                       ij
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 0
                                 
                                    
                                       
                                          k
                                          ∈
                                          
                                             
                                                C
                                             
                                             
                                                b
                                             
                                          
                                          ,
                                          (
                                          i
                                          ,
                                          j
                                          )
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                3
                                             
                                             
                                                b
                                             
                                          
                                       
                                    
                                 
                              
                            and add term Z
                           
                              b
                            (Constraint (13)) to the objective function to penalize every period a barge spends at the terminal. Constraints (14) and (15) make sure that 
                              
                                 
                                    
                                       y
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 0
                              
                            if and only if the barge is completely served at the end of period t. A barge is completely served if 
                              
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             t
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             t
                                             +
                                             1
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 0
                              
                            which indicates that no tasks are delayed from period t to period t
                           +1. Constraint (16) limits the number of executed tasks to the quay crane throughput.
                              
                                 (13)
                                 
                                    
                                       
                                          Z
                                       
                                       
                                          b
                                       
                                    
                                    =
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             k
                                             ∈
                                             
                                                
                                                   C
                                                
                                                
                                                   b
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             
                                                
                                                   r
                                                
                                                
                                                   k
                                                
                                             
                                             ⩽
                                             t
                                             ⩽
                                             
                                                
                                                   d
                                                
                                                
                                                   k
                                                
                                             
                                             -
                                             1
                                          
                                       
                                    
                                    
                                       
                                          c
                                       
                                       
                                          b
                                       
                                    
                                    
                                       
                                          y
                                       
                                       
                                          t
                                       
                                       
                                          k
                                       
                                    
                                 
                              
                           
                           
                              
                                 (14)
                                 
                                    
                                       
                                          y
                                       
                                       
                                          t
                                       
                                       
                                          k
                                       
                                    
                                    ⩾
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      t
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      t
                                                      +
                                                      1
                                                   
                                                
                                             
                                             
                                                k
                                             
                                          
                                       
                                       
                                          
                                             
                                                p
                                             
                                             
                                                k
                                             
                                          
                                       
                                    
                                    
                                    (
                                    k
                                    ∈
                                    
                                       
                                          C
                                       
                                       
                                          b
                                       
                                    
                                    ,
                                    
                                       
                                          r
                                       
                                       
                                          k
                                       
                                    
                                    ⩽
                                    t
                                    ⩽
                                    
                                       
                                          d
                                       
                                       
                                          k
                                       
                                    
                                    -
                                    1
                                    )
                                 
                              
                           
                           
                              
                                 (15)
                                 
                                    
                                       
                                          y
                                       
                                       
                                          t
                                       
                                       
                                          k
                                       
                                    
                                    ∈
                                    {
                                    0
                                    ,
                                    1
                                    }
                                    
                                    (
                                    k
                                    ∈
                                    
                                       
                                          C
                                       
                                       
                                          b
                                       
                                    
                                    ,
                                    
                                       
                                          r
                                       
                                       
                                          k
                                       
                                    
                                    ⩽
                                    t
                                    ⩽
                                    
                                       
                                          d
                                       
                                       
                                          k
                                       
                                    
                                    -
                                    1
                                    )
                                 
                              
                           
                           
                              
                                 (16)
                                 
                                    
                                       
                                          x
                                       
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                k
                                             
                                          
                                       
                                       
                                          k
                                       
                                    
                                    ⩽
                                    
                                       
                                          q
                                       
                                       
                                          b
                                       
                                    
                                    
                                    (
                                    k
                                    ∈
                                    
                                       
                                          C
                                       
                                       
                                          b
                                       
                                    
                                    ,
                                    
                                       
                                          r
                                       
                                       
                                          k
                                       
                                    
                                    ⩽
                                    t
                                    ⩽
                                    
                                       
                                          d
                                       
                                       
                                          k
                                       
                                    
                                    )
                                 
                              
                           
                        

Vessels have to be served during their previously defined time windows and may not be delayed. Arrival dates r
                           
                              k
                            and due dates d
                           
                              k
                            represent these time windows. Straddle carriers are allocated to exactly one vessel and we set 
                              
                                 v
                                 ∈
                                 
                                    
                                       M
                                    
                                    
                                       ded
                                    
                                 
                              
                           . The service of a vessel requires some preparation and coordination. No additional straddle carriers are allocated to a vessel once its service has started, but retrieving superfluous straddle carriers is possible. The number of executed tasks cannot exceed the quay crane capacity. We add binary variables 
                              
                                 
                                    
                                       g
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                              
                            to model the non-increasing allocation strategy and a capacity q
                           
                              v
                            on arcs 
                              
                                 
                                    
                                       A
                                    
                                    
                                       3
                                    
                                    
                                       v
                                    
                                 
                              
                            to represent limited throughput.
                              
                                 
                                    
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         g
                                                      
                                                      
                                                         t
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                
                                             
                                          
                                          Binary variables indicating if the service of commodity k has been started prior to period t (t excluded) (k
                                             ∈
                                             C
                                             
                                                v
                                             , r
                                             
                                                k
                                             
                                             +1⩽
                                             t
                                             ⩽
                                             d
                                             
                                                k
                                             )
                                       
                                       
                                          
                                             q
                                             
                                                v
                                             
                                          
                                          Capacity of arcs 
                                                
                                                   (
                                                   i
                                                   ,
                                                   j
                                                   )
                                                   ∈
                                                   
                                                      
                                                         A
                                                      
                                                      
                                                         3
                                                      
                                                      
                                                         v
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

Vessels do not appear in the objective function as they may not be delayed; we set 
                              
                                 
                                    
                                       c
                                    
                                    
                                       ij
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 0
                                 
                                    
                                       
                                          k
                                          ∈
                                          
                                             
                                                C
                                             
                                             
                                                v
                                             
                                          
                                          ,
                                          (
                                          i
                                          ,
                                          j
                                          )
                                          ∈
                                          
                                             
                                                A
                                             
                                             
                                                3
                                             
                                             
                                                v
                                             
                                          
                                       
                                    
                                 
                              
                           . Constraints (17) and (18) define if the service of a vessel has been started prior to period t (t excluded). Constraints (19) and (20) impose a non-increasing allocation strategy and limit the throughput. If the service of a vessel starts in period 
                              
                                 t
                                 ,
                                 
                                 
                                    
                                       g
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 0
                              
                            and 
                              
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             t
                                          
                                       
                                       
                                          
                                             s
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 
                                    
                                       q
                                    
                                    
                                       v
                                    
                                 
                              
                           ; otherwise 
                              
                                 
                                    
                                       g
                                    
                                    
                                       t
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 1
                              
                            and 
                              
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             t
                                          
                                       
                                       
                                          
                                             s
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             t
                                             -
                                             1
                                          
                                       
                                       
                                          
                                             s
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                              
                           .
                              
                                 (17)
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                       
                                          k
                                       
                                    
                                    ⩾
                                    
                                       
                                          
                                             
                                                p
                                             
                                             
                                                k
                                             
                                          
                                          -
                                          
                                             
                                                x
                                             
                                             
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      t
                                                      -
                                                      1
                                                   
                                                
                                                
                                                   
                                                      v
                                                   
                                                   
                                                      t
                                                   
                                                
                                             
                                             
                                                k
                                             
                                          
                                       
                                       
                                          
                                             
                                                p
                                             
                                             
                                                k
                                             
                                          
                                       
                                    
                                    
                                    (
                                    k
                                    ∈
                                    
                                       
                                          C
                                       
                                       
                                          v
                                       
                                    
                                    ,
                                    
                                       
                                          r
                                       
                                       
                                          k
                                       
                                    
                                    +
                                    1
                                    ⩽
                                    t
                                    ⩽
                                    
                                       
                                          d
                                       
                                       
                                          k
                                       
                                    
                                    )
                                 
                              
                           
                           
                              
                                 (18)
                                 
                                    
                                       
                                          g
                                       
                                       
                                          t
                                       
                                       
                                          k
                                       
                                    
                                    ∈
                                    {
                                    0
                                    ,
                                    1
                                    }
                                    
                                    (
                                    k
                                    ∈
                                    
                                       
                                          C
                                       
                                       
                                          v
                                       
                                    
                                    ,
                                    
                                       
                                          r
                                       
                                       
                                          k
                                       
                                    
                                    +
                                    1
                                    ⩽
                                    t
                                    ⩽
                                    
                                       
                                          d
                                       
                                       
                                          k
                                       
                                    
                                    )
                                 
                              
                           
                           
                              
                                 (19)
                                 
                                    
                                       
                                          x
                                       
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                k
                                             
                                          
                                       
                                       
                                          k
                                       
                                    
                                    ⩽
                                    
                                       
                                          q
                                       
                                       
                                          v
                                       
                                    
                                    
                                    (
                                    k
                                    ∈
                                    
                                       
                                          C
                                       
                                       
                                          v
                                       
                                    
                                    ,
                                    t
                                    =
                                    
                                       
                                          r
                                       
                                       
                                          k
                                       
                                    
                                    )
                                 
                              
                           
                           
                              
                                 (20)
                                 
                                    
                                       
                                          x
                                       
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                k
                                             
                                          
                                       
                                       
                                          k
                                       
                                    
                                    ⩽
                                    
                                       
                                          x
                                       
                                       
                                          
                                             
                                                v
                                             
                                             
                                                t
                                                -
                                                1
                                             
                                          
                                          
                                             
                                                s
                                             
                                             
                                                k
                                             
                                          
                                       
                                       
                                          k
                                       
                                    
                                    -
                                    
                                       
                                          q
                                       
                                       
                                          v
                                       
                                    
                                    ·
                                    
                                       
                                          
                                             
                                                
                                                   g
                                                
                                                
                                                   t
                                                
                                                
                                                   k
                                                
                                             
                                             -
                                             1
                                          
                                       
                                    
                                    
                                    (
                                    k
                                    ∈
                                    
                                       
                                          C
                                       
                                       
                                          v
                                       
                                    
                                    ,
                                    
                                       
                                          r
                                       
                                       
                                          k
                                       
                                    
                                    +
                                    1
                                    ⩽
                                    t
                                    ⩽
                                    
                                       
                                          d
                                       
                                       
                                          k
                                       
                                    
                                    )
                                 
                              
                           
                        

We model truck tasks in an aggregated way to reduce the problem size. Aggregation is possible since straddle carriers are shared among trucks and delay costs depend on deviated tasks. All truck tasks that wish to arrive during the same time period are represented by one commodity. Each commodity is identified by a pair (c,
                           a): 
                              
                                 c
                                 ∈
                                 M
                              
                            indicates the transport mode ’truck’ and a (a
                           ∈
                           T) the preferred arrival period. For each commodity k
                           ∈
                           C
                           
                              c
                           , a
                           
                              k
                            represents the preferred arrival period of commodity k and p
                           
                              k
                            its workload which equals the sum of all tasks with preferred arrival period a
                           
                              k
                           .

Truck tasks may be deviated from their preferred arrivals but have to be served within the period they are assigned to. We limit deviations to ±Δ periods and adjust release dates r
                           
                              k
                            and due dates d
                           
                              k
                            to represent earliest and latest possible arrivals. Straddle carriers are shared among trucks and we set 
                              
                                 c
                                 ∈
                                 
                                    
                                       M
                                    
                                    
                                       shar
                                    
                                 
                              
                           . The objective is to minimize deviation costs. Flows 
                              
                                 
                                    
                                       x
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             t
                                          
                                       
                                       
                                          
                                             s
                                          
                                          
                                             k
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                              
                            on arcs 
                              
                                 
                                    
                                       A
                                    
                                    
                                       3
                                    
                                    
                                       c
                                    
                                 
                              
                            indicate how many tasks of commodity k are deviated from period a
                           
                              k
                            to period t. This also indicates how many appointments should be offered to commodity k at period t. The difference between preferred and assigned periods for arcs 
                              
                                 (
                                 
                                    
                                       v
                                    
                                    
                                       t
                                    
                                 
                                 ,
                                 
                                    
                                       s
                                    
                                    
                                       k
                                    
                                 
                                 )
                                 ∈
                                 
                                    
                                       A
                                    
                                    
                                       3
                                    
                                    
                                       c
                                    
                                 
                              
                            is given by ∣t
                           −
                           a
                           
                              k
                           ∣. We define cost c
                           
                              c
                            and costs 
                              
                                 
                                    
                                       c
                                    
                                    
                                       ij
                                    
                                    
                                       k
                                    
                                 
                              
                            on arcs 
                              
                                 
                                    
                                       A
                                    
                                    
                                       3
                                    
                                    
                                       c
                                    
                                 
                              
                            so as to penalize deviations proportionally to the difference between assigned and preferred arrival periods.
                              
                                 
                                    
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      k
                                                   
                                                
                                                =
                                                
                                                   max
                                                
                                                {
                                                1
                                                ,
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      k
                                                   
                                                
                                                -
                                                Δ
                                                }
                                             
                                          
                                       
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      d
                                                   
                                                   
                                                      k
                                                   
                                                
                                                =
                                                
                                                   min
                                                
                                                {
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      k
                                                   
                                                
                                                +
                                                Δ
                                                ,
                                                T
                                                }
                                             
                                          
                                       
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      c
                                                   
                                                   
                                                      c
                                                   
                                                
                                                
                                                Cost to deviate one tasks by one period
                                             
                                          
                                       
                                       
                                          
                                          
                                             
                                                
                                                   
                                                      c
                                                   
                                                   
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            t
                                                         
                                                      
                                                      
                                                         
                                                            s
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                   
                                                      k
                                                   
                                                
                                                =
                                                
                                                   
                                                      c
                                                   
                                                   
                                                      c
                                                   
                                                
                                                ·
                                                |
                                                t
                                                -
                                                
                                                   
                                                      a
                                                   
                                                   
                                                      k
                                                   
                                                
                                                |
                                                
                                                
                                                   
                                                      
                                                         k
                                                         ∈
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               c
                                                            
                                                         
                                                         ,
                                                         (
                                                         
                                                            
                                                               v
                                                            
                                                            
                                                               t
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               s
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                         )
                                                         ∈
                                                         
                                                            
                                                               A
                                                            
                                                            
                                                               3
                                                            
                                                            
                                                               c
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

We evaluate the impact of a truck appointment system – using the example of a container terminal at the Grand Port Maritime de Marseille – on the service quality of trucks, trains, barges and vessels. The terminal provided historic data on vehicle arrivals and volumes. Ten instances (each representing one working day) were created from this data. These instances differ with regard to the number of vehicles (1 or 2 vessels, 0 or 1 barges, 0 or 1 trains, 279–769 trucks), their volumes and their arrival and due dates. These instances are representative for the daily workload at small- and medium-sized container terminals where a limited number of trains, barges and vessels are served per day. Table 1
                      indicates the daily workload per transport mode for each instance.

Problem parameters – such as the length of a time period and the average handling capacity of a straddle carrier – result from discussion with the terminal operator and reflect the situation at this terminal. The working day is divided into 14 time periods. We want to compare the impact of the truck appointment system for different straddle carrier utilization rates. Based on the given handling capacities, the average expected workload and the number of straddle carriers at the terminal, we chose to run experiments for 10, 12 and 14 available straddle carriers. The resulting utilization rates range from 40% to 130%.

Delay costs for barges (c
                     
                        b
                     
                     =50 per barge and period), trains (c
                     
                        r
                     
                     =10 per non-executed task) and trucks (c
                     
                        c
                     
                     =1 per container and period) represent priorities among transport modes rather than monetary costs. Delaying a barge means delaying all its loaded containers; high delay costs for barges reflect this fact. Train tasks are the only tasks that may remain unexecuted at the end of the working day. The chosen delay costs and the average handling capacities represent a tradeoff between delaying a barge and neglecting a train task and prefer to delay trucks rather than neglecting a train task.

To evaluate the effect of a truck appointment system on overall delays at the terminal, we compare a terminal with a truck appointment system to a terminal without an appointment system. The service strategies for trains, barges and vessels are identical for both cases. Without an appointment system, trucks arrive at the terminal at their preferred arrival time and wait at the terminal until they are served. Each period they stay at the terminal is penalized. A truck appointment system can postpone the arrival and hence the execution of tasks. In addition, it can forward the arrival and execution of tasks which is not possible without an appointment system. Without an appointment system, delays represent the number of periods spent at the terminal (waiting time); with an appointment system, trucks spend only one period at the terminal and delays represent deviations from preferred arrival periods (deviation). We set costs so as to penalize a waiting time of x periods as much as a deviation of x periods. However, scheduled deviations from the preferred arrival are probably less disturbing for trucks than long waiting times at the terminal. To analyze the impact of the flexibility in deviating trucks, we run experiments with maximum deviations of Δ
                     =1 and Δ
                     =2.


                     Zehendner, Feillet, Absi, and Dauzère-Pérès (2011a) prove that the problem to allocate straddle carriers to vessels for the given service strategy (serve within time windows without preemption) is NP-hard. Consequently, the allocation problem considering vessels and in addition trucks, trains and barges is also NP-hard. However, IBM ILOG Cplex 12 solves feasible instances in less than one second and infeasibility is also discovered in less than one second. Experiments have shown that even bigger instances with up to 10 vessels, 10 barges, 10 trains and 2500 trucks can still be solved in a few seconds.


                     Table 2 shows the delays of trucks, trains and barges for each instance for the terminal without an appointment systems (w/o) and with truck appointment systems with maximum deviations of 1 and 2 periods (Δ
                     =1, Δ
                     =2) for 10, 12 and 14 available straddle carriers. Vessels are not displayed since they have to be served within their assigned time windows and may not be delayed. Without an appointment system truck delays represent waiting times at the terminal; with an appointment system truck delays represent deviations. Delays for trains are indicated by the number of non-executed tasks and delays for barges by the number of periods spent in the terminal.

Since we aim to serve trucks at their preferred arrival times, offered truck appointments are identical to preferred truck arrivals when enough straddle carriers are available to do so. In this case, results with and without appointment systems are identical. Instances with different delays for the different truck service strategies are marked in bold. Infeasible instances indicate that the number of available straddle carriers is not sufficient to serve all tasks within their imposed time windows. Since the model is executed at a tactical level for the next day, the terminal operator knows that he should either assign more drivers to increase the handling capacity or, if using an appointment system, accept bigger deviations by increasing Δ.

With 14 available straddle carriers almost no delays occur at the terminal: very few truck tasks are delayed, all train tasks are executed and all barges are served within the minimum service time (resulting from quay crane capacity). If the number of available straddle carriers is reduced to 12 or 10, more delays occur and some instances become infeasible. Without an appointment system, trucks can be delayed until the end of the working day. With an appointment system, the arrival of trucks can only be forwarded or postponed by maximal Δ periods and trucks have to be served within the period to which they are assigned. This explains why instance 9_10SC is only infeasible for Δ
                     =1.

Less truck delays occur for a terminal with an appointment system than for the terminal without. This shows that the possibility to forward arrivals via the appointment system reduces truck delays. Increasing the maximum deviation from Δ
                     =1 to Δ
                     =2, increases terminals’ room for maneuver and reduces truck delays further. These results suggest that the introduction of a truck appointment system reduces the time trucks have to spend at the terminal, especially if the workload is excessive. For instances 9_12SC and 10_12SC truck delays increase with the introduction of an appointment system or an extension of Δ. In both cases, these additional delays are made up by the reduction of delays of barges or trains. For instances 2_10SC and 9_10SC, trucks and barges benefit from the introduction of the appointment system. For instance 9_10SC however, delays for trains increase with the introduction of the truck appointment system. In this case, trains are delayed as the instance would be infeasible otherwise. These results suggest that trains and barges may also benefit from the truck appointment system: trucks may be shifted to less busy periods and free straddle carriers for barges and trains. They also highlight the importance of choosing the right values for costs c
                     
                        m
                      and the maximum deviation Δ to represent priorities among transport modes.

Our objective is to offer appointments close to the preferred arrival of tasks. Fig. 3
                      compares the average arrival of truck tasks per period with the average number of appointments offered per period for a maximum deviation of one and two periods. Only instances where truck arrivals are changed are included. The number of proposed appointments is close to the preferred arrival pattern. With an appointment system, fewer tasks arrive for periods 4 to 6. In fact, tasks are forwarded and postponed to free resources for barges which arrive at period 4. We also observe that the peak arrival at period 10 is smoothed out.

The optimization model determines a tactical allocation, but does not include operational decisions. The optimization model also assumes deterministic and known data on arrival times, volumes and handling times. This is clearly not the case at real container terminals where arriving vehicles may be delayed and where several kinds of equipment interact. We use discrete-event simulation to validate the findings of the optimization model at an operational level in a stochastic environment.

We compare three scenarios to evaluate the impact of a truck appointment system on truck delays: (1) a container terminal operating without an appointment system, (2) an ideal case where the container terminal uses an appointment system and all appointments are respected and (3) a more realistic case where the container terminal uses an appointment system but some trucks do not show up and some trucks are served without an appointment.

We used Arena 11 to build a simulation model to represent the container terminal at the Grand Port Maritime de Marseille. At each time period, the simulation model allocates straddle carriers to trucks, trains, barges and vessels according to the allocation determined by the optimization model. Straddle carriers are shared among different transport modes over the working day, but not within one period. Consequently, delays per transport mode depend mainly on the number of straddle carriers allocated to the transport mode. Allocation patterns for trains, barges and vessels and hence the resulting delays are almost always identical for experiments with and without an appointment system (see Table 2
                        ). The simulation study focuses on the impacts of a truck appointment system on truck delays and we detail only the part of the simulation model related to straddle carriers and trucks.

Straddle carriers can transport one container at a time. We use uniform distribution around the average handling time to model their stochastic travel and handling times. The average handling times equal the length of a time period t divided by the average handling capacity h
                        
                           m
                         of the optimization model.

Trucks are served with a first come first served policy. The parking space in the loading/unloading area is limited and trucks can only be served if space is available. Every truck entering the terminal delivers an export container and a predefined percentage of trucks pick up an import container. Different straddle carriers may transport the import and the export container. We record the number of served trucks and their service times. The arrival of trucks varies over the working day. We use a non-stationary Poisson process to model these time dependent arrivals. The average is based on preferred arrivals for the terminal without an appointment system and on offered appointments per period for the terminal with a realistic appointment system. For the terminal with an ideal truck appointment system, truck arrivals equal the number of offered appointments and they arrive equally distributed over the period.

We run experiments on the same real-life instances used for the optimization model, but consider only those 8 instances where truck delays differ for terminals with and without an appointment system for a maximum deviation of 2. We analyze three scenarios with different levels of variation of handling and travelling times of straddle carriers: ±10%, ±30% and ±50% variation around the average values. 1000 replications are executed for each instance to obtain stable estimates of performance. Table 3
                         shows the results for cases without, with a realistic and with an ideal appointment system. It indicates the average truck service time in minutes and the standard deviation.

The realistic appointment system reduces the average truck service time by approximately 14min. Results of Student’s t-tests show that differences are statistically significant at a 95% confidence level for all variation levels with p-values of 0.044, 0.048 and 0.046, respectively. The standard deviation is reduced by 50–60%. Truck arrivals follow a stochastic distribution and the benefit comes only from the fact that truck arrivals may be forwarded or postponed to less busier periods.

In the ideal case, average truck service times decrease by 17–22min. Results of Student’s t-tests show that differences are statistically significant at a 95% confidence level for all variation levels with p-values of 0.015, 0.012 and 0.008, respectively. The standard deviation is reduced by 70%. The additional benefit comes from the fact that truck arrivals equal the number of offered appointments and are evenly distributed over a time period; allocated resources are used very efficiently.

This study focuses on container terminals using straddle carriers to serve trucks, trains, barges and vessels. Consequently, the terminal can serve fewer trucks during time slots with high levels of activity for trains, barges and vessels. Optimally, the terminal would offer fewer truck appointments for busy time slots and more appointments for less busy time slots. To the best of our knowledge, this study is the first one to entwine the allocation of straddle carriers and the dimensioning of the truck appointment system. We presented a mixed integer linear programming model based on a min cost multicommodity network flow model with additional constraints. The model simultaneously determines the number of truck appointments to accept and the number of straddle carriers to allocate to trucks, trains, barges and vessels with the objective to reduce overall delays at the terminal.

We run experiments with an optimization model and a discrete-event simulation model to evaluate the benefits of this combined solution approach. Experiments were run on real-life instances of a container terminal at the Grand Port Maritime de Marseille. Results show that a thought-out truck appointment system can reduce delays of trucks, trains, barges and vessels: the terminal can deviate truck arrivals to less busy periods and free straddle carriers for trains, barges and vessels when necessary.

Although our analysis relies on a limited number of numerical experiments, we are convinced that the findings can be generalized. The container terminal can smooth out the workload by forwarding or postponing truck arrivals via the appointment system. It can also offer appointments in a way to represent the service situation at a terminal without an appointment system. Consequently, fewer delays should occur at a terminal with a truck appointment system than at a terminal without.

This work can be continued by adapting the model to terminals using a non-mandatory truck appointment system and serving trucks with and without appointments. One could also analyze the impacts of the possibility to forward or postpone barge arrivals.

@&#ACKNOWLEDGMENTS@&#

We would like to thank Gloria Rodriguez Verjan from Ecole des Mines de Saint-Etienne for sharing her Arena simulation model – that we adapted and used for our experiments – with us. We would also like to thank the reviewers for their thorough reviews and their helpful suggestions that made it possible to improve the paper.

@&#REFERENCES@&#

