@&#MAIN-TITLE@&#Structure and spatial consistency of network-based space layouts for building and product design

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A schema is defined for space layouts that represent spatial relations as networks.


                        
                        
                           
                           Spatial constraints for spatial consistency checking extend the schema.


                        
                        
                           
                           An inconsistency resolution operation resolves inconsistencies in a layout.


                        
                        
                           
                           A layout modeling system prototype has been implemented and validated with examples.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Space model

Building information modeling (BIM)

Product model

Aspect model

Spatial data quality

@&#ABSTRACT@&#


               
               
                  Network-based space layouts are schematic models of whole spaces, subspaces, and related physical elements. They address diverse space modeling needs in building and product design. A schema (data model) for network-based space layouts is defined that is influenced by existing space schemas. Layout elements and selected spatial relations form a geometric network. The network is embedded in 3-space and facilitates analysis with graph and network algorithms. Spatial constraints on layout elements and spatial relations extend the schema to support spatial consistency checking. Spatially consistent layouts are required for reliable network analysis and desirable for layout modification operations. An operation is introduced that evaluates spatial constraints to detect and semi- or fully-automatically resolve spatial inconsistencies in a layout. A layout modeling system prototype that includes proof-of-concept implementations of the layout schema extended by spatial constraints and the inconsistency resolution operation is described. Layouts of a floor of an office building and a rack server cabinet have been modeled with the system prototype.
               
            

@&#INTRODUCTION@&#

Space layouts are used in various design domains to model spaces and related physical elements. In building design, whose diverse space modeling needs have motivated the work presented in this paper, building services designers reuse space layouts created by architects to develop access, lighting, heating, ventilation, and air conditioning systems. The design of electronic systems is an example of a product design domain where designers rely on space layouts to optimize the thermal performance of computers, networking equipment, or printers.

Space data authoring for building design is increasingly supported by commercial building information modeling (BIM) systems  [1]. These systems use elaborate data structures to model buildings. The Industry Foundation Classes (IFC) are an open, STEP based building data sharing standard and an example for such a data structure  [2,3]. Although several graph and network representations of space layouts have been developed (see Section  2 for a review), implementation of these representations and applications in BIM systems is still limited.

Network-based space layouts extend the notion of representing spatial relations in space layouts as graphs or networks  [4]. In a network-based space layout, spatial relations between layout elements, which include whole spaces and partial spaces or subspaces, form a network. Spatial relation edges in such a layout element network are directed and weighted. This characteristic distinguishes network-based space layouts and other network representations from graph representations of space layouts. A layout element network may be accessed by graph and network algorithms for design analysis. Existing network representations of space layouts have been developed for specific design domains. Their networks typically include one type of node (representing e.g. spaces or walls) and one type of edge (representing e.g. space adjacencies or openings). By contrast, multiple node and edge types are modeled in a network-based space layout in order to support space modeling needs of multiple domains. A layout element network is further a geometric network that is embedded in 3-space. Spatial relation edges may thus be viewed as line segments whose end points correspond to positions of related layout elements. As a result, shortest path searches that are based on Euclidean distances and consider line-of-sight are feasible.

The structure and spatial consistency of network-based space layouts are the focus of this paper. Spatially consistent layouts are required for reliable network analysis and desirable for operations that modify the structure of a layout  [5,6]. Although relevant for the usability and interoperability of design support systems, little work exists, at least in building design, on the spatial consistency of space data  [7].

The remaining sections are organized as follows. Existing graph and network representations of space layouts and their applications are reviewed in Section  2. The modeling approach that underlies a schema (data model) for network-based space layouts is outlined in Section  3. The schema is presented in Section  4. In Section  5, the schema is extended by spatial constraints to detect spatial inconsistencies, and an inconsistency resolution operation is described. Section  6 describes the design and implementation of a layout modeling system prototype. Section  7 provides examples of layouts that have been created with the system prototype. Section  8 concludes with a summary and identifies future work.

Graph and network representations of space layouts were developed in the 1970’s and 1980’s to assist space layout planning. Grason  [8] introduced a representation that consists of a rectangular plan graph and a space adjacency graph. The dual relationship between the graphs facilitates layout synthesis from required space adjacencies and dimensions  [9]. Edges in Grason’s space adjacency graph or network are directed and weighted. Edge weights correspond to lengths of wall segments. Steadman  [10,11] developed a similar network representation of layouts. Space adjacency and space access graphs underlie several space layout planning systems that have been developed since. For a comprehensive survey of these systems, the reader is referred to  [12]. More recently, Grabska  [13] has proposed an attributed access hypergraph, which facilitates subgraph matching e.g. to generate layout alternatives with genetic operators  [14].

Network representations of space layouts have been developed for air and pedestrian circulation design. Air circulation in buildings may be simulated with flow networks. In the COMIS air circulation simulation engine  [15], for example, spaces and openings are modeled as, respectively, network nodes and edges. Weights of opening edges correspond to air flow resistances. Similarly, flow networks are used to determine air circulation in electronic systems  [16]. Here edge weights correspond to air flow resistances of fans or CPU heat sinks. The analysis of a pedestrian circulation design requires fine-grained space access networks. In the EGRESS building evacuation simulation engine, for example, spaces are decomposed into hexagonal cells whose size corresponds to the area occupied by a person  [17]. Adjacent cells are connected by edges. Toll et al.  [18] use a navigation network that corresponds to the medial axis (or skeleton) of space enclosures. Lee et al.  [19] derive a pedestrian circulation network from the vertices of buffered space boundary polygons.

Existing graph and network representations of space layouts tend to be specific to particular design domains and limited regarding spatial granularity, relations, or consistency. As outlined in the next section, extended, more general representations are desirable to better address diverse space modeling needs in building and product design.

Spaces may be modeled from two views. The first is a space-centered view where a space is seen as an object that encloses a void and may accommodate user activities, equipment, or furniture  [20]. A space is bounded by space boundaries that may be formed by space enclosure elements such as walls and openings. The second view is enclosure-centered. According to that view, a space may be seen as a shared, emergent property of space enclosures  [20]. Existing space schemas, including the space schema in IFC, support both views  [21,22,20,2]. As support for heterogeneous subspaces and their spatial relations is limited in IFC (as will be discussed in Section  4.7), it was decided to define a space schema that incorporates aspects of IFC and other space schemas, and to introduce new concepts where necessary. The schema adopts a space-centered view with a simplified space enclosure representation. It is general in the sense that it is independent of specific design domains.

Selected spatial relations between layout elements that appear particularly useful across design domains are modeled explicitly in a network-based space layout. These include whole space adjacency and subspace adjacency relations. Automated derivation of spatial relations from layout element geometries is desirable in order to minimize modeling effort. It is also relevant to assess the spatial consistency of a layout. Thus formal definitions of spatial relations are provided in the layout schema.

Several methods exist to derive space enclosure data from space data, or vice versa  [23–27]. A spatial query language is proposed by Borrmann and Rank  [28] to derive topological spatial relations in building information models. The spatial relation between two building elements is determined by applying the 9-intersection model  [29] to their geometries. Spatial relations in network-based space layouts are derived from boundary representations (Brep) of layout element geometries. This is similar to the work of van Treeck and Rank  [25] where space volumes or space adjacency graphs are derived from Brep geometries of space enclosures.

Design analysis may fail or generate inaccurate results if design data are spatially inconsistent. In general, spatial consistency (or data quality) refers to the correctness and accuracy of spatial data. Logical consistency is an important type of spatial consistency  [30]. An example for a potential logical inconsistency in space modeling are two spaces that overlap. Spatial constraints may be defined to detect logical inconsistencies in spatial data.

Existing space schemas include multiplicity (or cardinality) constraints on spatial relations. It is important to note that these multiplicity constraints are necessary but not sufficient to ensure logical consistency of space data. For example, overlapping spaces are not addressed by multiplicity constraints. Data modeling languages such as EXPRESS support the definition of additional constraints by means of ’where’ clauses, functions, and procedures [31,32]. The EDM information model supports constraints that are defined as stored procedures  [33,22]. However, use of constraints is limited in other space schemas  [21,20,2].

The schema for network-based space layouts is extended by spatial constraints that detect logical inconsistencies not addressed by multiplicity constraints. Spatial constraints are defined for layout elements as well as spatial relations. The definitions may be used as specifications for implementations in data modeling or programming languages. However, these constraints do not address spatial inconsistencies such as positional and attribute errors  [30], or defective volumes or faces  [34].

@&#OVERVIEW@&#

The layout schema consists of three subschemas. Layout concepts are defined in the layout kernel schema (Fig. 1
                        ). The layout element geometry schema covers geometry data structures. The layout element type schema provides data structures for recurring layout elements. The schemas are presented as UML class diagrams  [35]. Layout element concepts (Sections  4.2–4.4) are defined first. Definitions of spatial relations (Section  4.5) are based on layout element geometries. The concepts of a layout element network and layout are defined subsequently and illustrated with examples (Section  4.6). Differences between the schema and the IFC space schema are discussed (Section  4.7).

Spaces are the principal elements in a network-based space layout.


                        
                           Definition 4.1
                           Space


                           A space is a volume that may accommodate user activities, furnishings, and equipment.


                        Definition 4.1 incorporates aspects of space definitions in IFC and  [20]. User activities are currently not modeled. The corresponding 
                           S
                           p
                           a
                           c
                           e
                         class is an abstract class in the layout kernel schema (Fig. 1). 
                           W
                           h
                           o
                           l
                           e
                           S
                           p
                           a
                           c
                           e
                         and 
                           S
                           u
                           b
                           S
                           p
                           a
                           c
                           e
                         are concrete subclasses of the 
                           S
                           p
                           a
                           c
                           e
                         class.


                        
                           Definition 4.2
                           Whole Space


                           A whole space 
                                 
                                    (
                                    w
                                    s
                                    )
                                 
                               is a space that may contain subspaces (Definition 4.3). It may be adjacent to other whole spaces. The (finite) set 
                                 
                                    
                                       W
                                       S
                                       =
                                       
                                          {
                                          w
                                          
                                             
                                                s
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          w
                                          
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                          ,
                                          …
                                          ,
                                          w
                                          
                                             
                                                s
                                             
                                             
                                                k
                                             
                                          
                                          }
                                       
                                    
                                 
                               includes all whole spaces in a layout.

The “is adjacent to” relation between whole spaces corresponds to the 
                           A
                           _
                           W
                           S
                         class (Fig. 1). This and other spatial relations, which are defined in Section  4.5, are modeled as association classes because they have attributes. The “contains” relation between whole spaces and subspaces is implicit. Due to its limited relevance for analysis it is not modeled explicitly in a layout element network. The relation may be derived from other explicit relations or directly from layout element geometries.


                        
                           Definition 4.3
                           Subspace


                           A subspace 
                                 
                                    (
                                    s
                                    s
                                    )
                                 
                               is a space that is contained in a whole space. It may be adjacent to other subspaces and near space elements (Definition 4.5). The set 
                                 
                                    
                                       S
                                       S
                                       =
                                       
                                          {
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                          ,
                                          …
                                          ,
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                m
                                             
                                          
                                          }
                                       
                                    
                                 
                               includes all subspaces in a layout.

Subspaces are similar to partial spaces in IFC and subspaces in  [21]. The “is adjacent to” relation between subspaces, and the “is near” relation between subspaces and space elements correspond to, respectively, 
                           A
                           _
                           S
                           S
                         and 
                           N
                           _
                           S
                           S
                           _
                           S
                           E
                         classes. A subspace may contain other subspaces. However, this relation is not modeled explicitly.


                        
                           Definition 4.4
                           Space Boundary Element


                           A space boundary element 
                                 
                                    (
                                    s
                                    b
                                    e
                                    )
                                 
                               is an immaterial surface that partially bounds exactly one whole space. It may partially bound subspaces and touch 
                                 s
                                 b
                                 e
                              ’s that bound other whole spaces (for ease of description, ’
                                 s
                               is used to refer to the plural). The set 
                                 
                                    
                                       S
                                       B
                                       E
                                       =
                                       
                                          {
                                          s
                                          b
                                          
                                             
                                                e
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          s
                                          b
                                          
                                             
                                                e
                                             
                                             
                                                2
                                             
                                          
                                          ,
                                          …
                                          ,
                                          s
                                          b
                                          
                                             
                                                e
                                             
                                             
                                                n
                                             
                                          
                                          }
                                       
                                    
                                 
                               includes all 
                                 s
                                 b
                                 e
                              ’s in a layout.


                        
                           S
                           b
                           e
                        ’s are similar to first level space boundaries in IFC. The boundary of a whole space consists of a set of 
                           s
                           b
                           e
                        ’s. Whereas whole spaces are fully bounded by 
                           s
                           b
                           e
                        ’s, that is, bounded on all sides, this is typically not true for subspaces. The “partially bounds” relation between 
                           s
                           b
                           e
                        ’s and whole spaces, the “partially bounds” relation between 
                           s
                           b
                           e
                        ’s and subspaces, and the “touches” relation between 
                           s
                           b
                           e
                        ’s correspond to, respectively, 
                           P
                           B
                           _
                           S
                           B
                           E
                           _
                           W
                           S
                           ,
                           P
                           B
                           _
                           S
                           B
                           E
                           _
                           S
                           S
                        , and 
                           T
                           _
                           S
                           B
                           E
                         classes.


                        
                           Definition 4.5
                           Space Element


                           A space element 
                                 
                                    (
                                    s
                                    e
                                    )
                                 
                               is a physical element that may be contained in a whole space (Definition 4.6), or it may partially enclose whole spaces (Definition 4.7). It may further partially enclose subspaces, be near 
                                 s
                                 b
                                 e
                              ’s, and be near other 
                                 s
                                 e
                              ’s. The set 
                                 
                                    
                                       S
                                       E
                                       =
                                       
                                          {
                                          s
                                          
                                             
                                                e
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          s
                                          
                                             
                                                e
                                             
                                             
                                                2
                                             
                                          
                                          ,
                                          …
                                          ,
                                          s
                                          
                                             
                                                e
                                             
                                             
                                                r
                                             
                                          
                                          }
                                       
                                    
                                 
                               includes all 
                                 s
                                 e
                              ’s in a layout.

Walls, openings, and furnishings are examples of 
                           s
                           e
                        ’s. Equipment 
                           s
                           e
                        ’s include luminaires, air inlets or outlets, and air temperature sensors. Since spatial relations and constraints for 
                           s
                           e
                        ’s are defined independent of specific properties of walls or equipment, corresponding classes are not included in the layout kernel schema. The “contains” relation between whole spaces and 
                           s
                           e
                        ’s is not modeled in a layout element network. The “partially encloses” relation between 
                           s
                           e
                        ’s and whole spaces, the “partially encloses” relation between 
                           s
                           e
                        ’s and subspaces, the “is near” relation between 
                           s
                           e
                        ’s and 
                           s
                           b
                           e
                        ’s, and the “is near” relation between 
                           s
                           e
                        ’s correspond to, respectively, 
                           P
                           E
                           _
                           S
                           E
                           _
                           W
                           S
                           ,
                           P
                           E
                           _
                           S
                           E
                           _
                           S
                           S
                           ,
                           N
                           _
                           S
                           E
                           _
                           S
                           B
                           E
                        , and 
                           N
                           _
                           S
                           E
                         classes.

An 
                           s
                           e
                         has two attributes, 
                           i
                           s
                           _
                           c
                           o
                           n
                           t
                           a
                           i
                           n
                           e
                           d
                           _
                           i
                           n
                           _
                           w
                           s
                         and 
                           p
                           a
                           r
                           t
                           i
                           a
                           l
                           l
                           y
                           _
                           e
                           n
                           c
                           l
                           o
                           s
                           e
                           s
                           _
                           w
                           s
                        , which specify spatial relations to whole spaces. A specified relation may or may not be supported by layout element geometries (Section  5).


                        
                           Definition 4.6
                           Space Element Contained in a Whole Space


                           A space element contained in a whole space 
                                 
                                    (
                                    s
                                    
                                       
                                          e
                                       
                                       
                                          c
                                          _
                                          w
                                          s
                                       
                                    
                                    )
                                 
                               is an 
                                 s
                                 e
                               that must be contained in a whole space. The set 
                                 
                                    
                                       S
                                       
                                          
                                             E
                                          
                                          
                                             c
                                             _
                                             w
                                             s
                                          
                                       
                                       =
                                       
                                          {
                                          s
                                          e
                                          ∈
                                          S
                                          E
                                          
                                          |
                                          
                                          s
                                          e
                                          .
                                          i
                                          s
                                          _
                                          c
                                          o
                                          n
                                          t
                                          a
                                          i
                                          n
                                          e
                                          d
                                          _
                                          i
                                          n
                                          _
                                          w
                                          s
                                          =
                                            true
                                          }
                                       
                                    
                                 
                               includes all 
                                 s
                                 
                                    
                                       e
                                    
                                    
                                       c
                                       _
                                       w
                                       s
                                    
                                 
                              ’s in a layout.

A desk is an example of an 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                              
                           
                        .


                        
                           Definition 4.7
                           Space Element Partially Enclosing a Whole Space


                           A space element partially enclosing a whole space 
                                 
                                    (
                                    s
                                    
                                       
                                          e
                                       
                                       
                                          p
                                          e
                                          _
                                          w
                                          s
                                       
                                    
                                    )
                                 
                               is an 
                                 s
                                 e
                               that must partially enclose at least one whole space. The set 
                                 
                                    
                                       S
                                       
                                          
                                             E
                                          
                                          
                                             p
                                             e
                                             _
                                             w
                                             s
                                          
                                       
                                       =
                                       
                                          {
                                          s
                                          e
                                          ∈
                                          S
                                          E
                                          
                                          |
                                          
                                          s
                                          e
                                          .
                                          p
                                          a
                                          r
                                          t
                                          i
                                          a
                                          l
                                          l
                                          y
                                          _
                                          e
                                          n
                                          c
                                          l
                                          o
                                          s
                                          e
                                          s
                                          _
                                          w
                                          s
                                          =
                                            true
                                          }
                                       
                                    
                                 
                               includes all 
                                 s
                                 
                                    
                                       e
                                    
                                    
                                       p
                                       e
                                       _
                                       w
                                       s
                                    
                                 
                              ’s in a layout.

A window is an example of an 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        . Whereas whole spaces must be fully bounded by 
                           s
                           b
                           e
                        ’s (see comments for Definition 4.4), they do not need to be fully enclosed by 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s, that is, gaps in whole space enclosures are acceptable.

Specified 
                           s
                           e
                         relations are typically mutually exclusive, that is, an 
                           s
                           e
                         either partially encloses whole spaces but is not contained in a whole space, and vice versa. However, 
                           s
                           e
                        ’s with 
                           i
                           s
                           _
                           c
                           o
                           n
                           t
                           a
                           i
                           n
                           e
                           d
                           _
                           i
                           n
                           _
                           w
                           s
                           =
                             true
                         and 
                           p
                           a
                           r
                           t
                           i
                           a
                           l
                           l
                           y
                           _
                           e
                           n
                           c
                           l
                           o
                           s
                           e
                           s
                           _
                           w
                           s
                           =
                             true
                         (
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                                 ,
                                 
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s) are supported. In the latter case, an 
                           s
                           e
                         must participate in at least one specified relation. For example, a partition wall 
                           s
                           e
                         may partially enclose a whole space as an 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        , or it may be contained in a whole space as an 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                              
                           
                        .

Similarly, a subspace has an attribute, 
                           i
                           s
                           _
                           n
                           e
                           a
                           r
                           _
                           s
                           e
                        , which specifies its spatial relation to 
                           s
                           e
                        ’s.


                        
                           Definition 4.8
                           Subspace Near a Space Element


                           A subspace near a space element 
                                 
                                    (
                                    s
                                    
                                       
                                          s
                                       
                                       
                                          n
                                          _
                                          s
                                          e
                                       
                                    
                                    )
                                 
                               is a subspace that must be near at least one space element. The set 
                                 
                                    
                                       S
                                       
                                          
                                             S
                                          
                                          
                                             n
                                             _
                                             s
                                             e
                                          
                                       
                                       =
                                       
                                          {
                                          s
                                          s
                                          ∈
                                          S
                                          S
                                          
                                          |
                                          
                                          s
                                          s
                                          .
                                          i
                                          s
                                          _
                                          n
                                          e
                                          a
                                          r
                                          _
                                          s
                                          e
                                          =
                                            true
                                          }
                                       
                                    
                                 
                               includes all 
                                 s
                                 
                                    
                                       s
                                    
                                    
                                       n
                                       _
                                       s
                                       e
                                    
                                 
                              ’s in a layout.

The notion of subspaces being near 
                           s
                           e
                        ’s may be useful in several domains. In lighting design, a subspace which can be thought of as a natural lighting zone may be near a window or luminaire 
                           s
                           e
                        . In pedestrian circulation design, subspaces that represent access zones may be near a door 
                           s
                           e
                        .


                        
                           Definition 4.9
                           Layout Element


                           A layout element 
                                 
                                    (
                                    l
                                    e
                                    )
                                 
                               is either a whole space, subspace, 
                                 s
                                 b
                                 e
                              , or 
                                 s
                                 e
                              . The set 
                                 
                                    
                                       L
                                       E
                                       =
                                       
                                          {
                                          l
                                          
                                             
                                                e
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          l
                                          
                                             
                                                e
                                             
                                             
                                                2
                                             
                                          
                                          ,
                                          …
                                          ,
                                          l
                                          
                                             
                                                e
                                             
                                             
                                                s
                                             
                                          
                                          }
                                       
                                       =
                                       W
                                       S
                                       
                                       ∪
                                       
                                       S
                                       S
                                       
                                       ∪
                                       
                                       S
                                       B
                                       E
                                       
                                       ∪
                                       
                                       S
                                       E
                                    
                                 
                               includes all 
                                 l
                                 e
                              ’s in a layout. An 
                                 l
                                 e
                               has a position in 3-space and a numeric (network) weight.

The corresponding 
                           L
                           a
                           y
                           o
                           u
                           t
                           E
                           l
                           e
                           m
                           e
                           n
                           t
                         class is an abstract class. Weights are relevant for network analysis.

The solid Brep schema in the ISO 103030-42 standard  [36] is used to model layout element geometries. The schema covers three-dimensional, manifold solids with voids and planar or curved faces. Relevant classes are shown in Fig. 2
                         together with related 
                           L
                           a
                           y
                           o
                           u
                           t
                           E
                           l
                           e
                           m
                           e
                           n
                           t
                         subclasses. Other solid modeling methods covered by the ISO 103030-42 standard include CSG and sweep representations. Support for these methods is presently beyond the scope of the layout schema. Conversions to Breps are conceivable for these methods. For example, the derivation of a Brep from an extruded area solid is straightforward.

The volume of a space is represented by a 
                           m
                           a
                           n
                           i
                           f
                           o
                           l
                           d
                           _
                           s
                           o
                           l
                           i
                           d
                           _
                           b
                           r
                           e
                           p
                        . In the following, the term volume refers to a 
                           m
                           a
                           n
                           i
                           f
                           o
                           l
                           d
                           _
                           s
                           o
                           l
                           i
                           d
                           _
                           b
                           r
                           e
                           p
                        . A volume is bounded by one or more 
                           c
                           o
                           n
                           n
                           e
                           c
                           t
                           e
                           d
                           _
                           f
                           a
                           c
                           e
                           _
                           s
                           e
                           t
                        ’s or shells. Faces in a shell are closed, that is, they do not include gaps. A 
                           f
                           a
                           c
                           e
                         is single-sided and its normal points away from the interior of a volume. An edge is shared by exactly two adjacent faces. Additional restrictions apply to ensure shell and volume consistency  [34]. For this work, it is assumed that volumes and other objects in the ISO 103030-42 schema are spatially consistent.

An 
                           s
                           b
                           e
                         has a face in a whole space volume shell. As whole spaces are fully bounded by sets of 
                           s
                           b
                           e
                        ’s, each face that is part of the boundary of a whole space volume is referenced by an 
                           s
                           b
                           e
                        . This is illustrated in Fig. 3
                         with an instance diagram featuring, on the one hand, a whole space 
                           w
                           s
                         and 
                           s
                           b
                           e
                        ’s that bound the whole space, and, on the other hand, the volume and faces referenced by 
                           w
                           s
                         and 
                           s
                           b
                           e
                        ’s. This is similar to first level space boundaries in IFC, which form a closed shell around a space.

An 
                           s
                           e
                         has a face and optionally a volume, where the former approximates the latter. The “is near” relation between 
                           s
                           e
                        ’s and 
                           s
                           b
                           e
                        ’s is derived from face data of 
                           s
                           e
                        ’s and 
                           s
                           b
                           e
                        ’s (Definition 4.20).

Positions of 
                           l
                           e
                        ’s correspond to points in 3-space. Positions of whole spaces and 
                           s
                           b
                           e
                        ’s correspond to the centroids of, respectively, their volumes and faces. The nearest point on the boundary is chosen if a centroid lies outside a volume or face.

Flexibility in modeling subspace volumes appears desirable in many design domains. This requirement is illustrated with a lighting design example. Consider a collection of downward oriented spotlights in a whole space. On the one hand, a subspace with a cone shaped volume which approximates its luminous intensity distribution may be placed near each luminaire. Subspace volumes may overlap, that is, direct lighting at a given position may be influenced by more than one luminaire. On the other hand, it should also be feasible to determine for a given position the nearest luminaire(s), which is likely to have the highest impact on lighting conditions. This could be achieved by additional subspaces that are near luminaires and whose volumes encode proximity to subspace positions (and hence proximity to luminaires). In contrast to cone shaped subspace volumes, proximity encoding subspace volumes would be disjoint cells that fill the volume of the containing whole space.

The need to model different types of subspace volumes, as illustrated by the example, is addressed by volume types.


                        
                           Definition 4.10
                           Volume Type


                           A volume type is a template for subspace volumes.


                        
                           P
                           r
                           i
                           m
                           i
                           t
                           i
                           v
                           e
                           ,
                           B
                           r
                           e
                           p
                        , and 
                           C
                           e
                           l
                           l
                         classes are subclasses of the corresponding abstract 
                           V
                           o
                           l
                           u
                           m
                           e
                           T
                           y
                           p
                           e
                         class (Fig. 2).


                        
                           Definition 4.11
                           
                              
                                 P
                                 r
                                 i
                                 m
                                 i
                                 t
                                 i
                                 v
                                 e
                               Subspace


                           A 
                                 P
                                 r
                                 i
                                 m
                                 i
                                 t
                                 i
                                 v
                                 e
                               subspace is a subspace with a 
                                 P
                                 r
                                 i
                                 m
                                 i
                                 t
                                 i
                                 v
                                 e
                               volume type. Its volume is derived from geometry parameters.

For example, radius and height are parameters of 
                           C
                           o
                           n
                           e
                         subspaces. Other 
                           P
                           r
                           i
                           m
                           i
                           t
                           i
                           v
                           e
                         subspaces include Sphere, Cylinder, Prism, and Torus.


                        
                           Definition 4.12
                           
                              
                                 B
                                 r
                                 e
                                 p
                               Subspace


                           A 
                                 B
                                 r
                                 e
                                 p
                               subspace is a subspace with a 
                                 B
                                 r
                                 e
                                 p
                               volume type. Its volume is derived from a Brep shape.

More specifically, the volume 
                           s
                           s
                           v
                         of a 
                           P
                           r
                           i
                           m
                           i
                           t
                           i
                           v
                           e
                         or 
                           B
                           r
                           e
                           p
                         subspace 
                           s
                           s
                         is derived in three steps: 
                           
                              1.
                              
                                 
                                    s
                                    s
                                    v
                                  is derived based on the 
                                    V
                                    o
                                    l
                                    u
                                    m
                                    e
                                    T
                                    y
                                    p
                                    e
                                  of 
                                    s
                                    s
                                 , as well as the position and orientation of 
                                    s
                                    s
                                 , where the latter imply a transformation from the (local) 
                                    V
                                    o
                                    l
                                    u
                                    m
                                    e
                                    T
                                    y
                                    p
                                    e
                                  to the (global) layout coordinate system;


                                 
                                    s
                                    s
                                    v
                                  is intersected with the volume of the whole space which contains the 
                                    s
                                    s
                                  position; and

if 
                                    s
                                    s
                                    v
                                  has multiple parts after step 2, then those parts that do not contain the 
                                    s
                                    s
                                  position are discarded.


                        
                           Definition 4.13
                           
                              
                                 C
                                 e
                                 l
                                 l
                               Subspace


                           A 
                                 C
                                 e
                                 l
                                 l
                               subspace is a subspace with a 
                                 C
                                 e
                                 l
                                 l
                               volume type. A set of 
                                 C
                                 e
                                 l
                                 l
                               subspace volumes in a whole space are derived by decomposing the whole space volume. A whole space volume may be modified before decomposition, e.g. by subtraction of 
                                 s
                                 e
                               volumes.


                        
                           T
                           e
                           t
                           r
                           a
                           h
                           e
                           d
                           r
                           a
                           l
                           i
                           z
                           a
                           t
                           i
                           o
                           n
                           ,
                           G
                           e
                           o
                           d
                           e
                           s
                           i
                           c
                           V
                           o
                           r
                           o
                           n
                           o
                           i
                        , and 
                           S
                           k
                           e
                           l
                           e
                           t
                           o
                           n
                         are examples of concrete subclasses of the abstract 
                           C
                           e
                           l
                           l
                         class. Volumes of 
                           T
                           e
                           t
                           r
                           a
                           h
                           e
                           d
                           r
                           a
                           l
                           i
                           z
                           a
                           t
                           i
                           o
                           n
                         subspaces are derived from tetrahedralizations of whole space volumes. Volumes of 
                           G
                           e
                           o
                           d
                           e
                           s
                           i
                           c
                           V
                           o
                           r
                           o
                           n
                           o
                           i
                         subspaces encode proximity to subspace positions. They are derived from geodesic Voronoi diagrams  [37] that are generated with these data: 
                           
                              1.
                              positions of 
                                    G
                                    e
                                    o
                                    d
                                    e
                                    s
                                    i
                                    c
                                    V
                                    o
                                    r
                                    o
                                    n
                                    o
                                    i
                                  subspaces in a whole space 
                                    w
                                    s
                                  are used as sites; and


                                 
                                    w
                                    s
                                  volume faces are used as obstacles.

Layouts may include recurring 
                           l
                           e
                        ’s such as opening, furnishing, or equipment 
                           s
                           e
                        ’s. The layout element type schema provides a data structure for templates for these 
                           l
                           e
                        ’s (Fig. 4
                        ). The concept of 
                           l
                           e
                         types is similar to type objects in IFC. For space reasons, definitions are limited to 
                           s
                           e
                         and subspace types.


                        
                           Definition 4.14
                           Space Element Type


                           A space element type 
                                 
                                    (
                                    s
                                    e
                                    t
                                    )
                                 
                               is a template for 
                                 s
                                 e
                              ’s.


                        
                           Definition 4.15
                           Subspace Type


                           A subspace type 
                                 
                                    (
                                    s
                                    s
                                    t
                                    )
                                 
                               is a template for subspaces. The set
                                 
                                    
                                       S
                                       S
                                       T
                                       =
                                       
                                          {
                                          s
                                          s
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          s
                                          s
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                          ,
                                          …
                                          ,
                                          s
                                          s
                                          
                                             
                                                t
                                             
                                             
                                                v
                                             
                                          
                                          }
                                       
                                    
                                 
                               includes all 
                                 s
                                 s
                                 t
                              ’s in a layout.

The concept of 
                           s
                           e
                           t
                        ’s and 
                           s
                           s
                           t
                        ’s is illustrated with an example. Consider a door 
                           s
                           e
                         which partially encloses two adjacent whole spaces. The door 
                           s
                           e
                         has two nearby subspaces, one on its front and one on its back. Each subspace represents an access zone. The door 
                           s
                           e
                         and its two nearby subspaces are instantiated in a layout based on a door 
                           s
                           e
                           t
                         which has two 
                           s
                           s
                           t
                        ’s. The two 
                           s
                           s
                           t
                        ’s are also instantiated in the layout and referenced by the 
                           s
                           s
                           _
                           t
                           y
                           p
                           e
                           s
                         attribute of the door 
                           s
                           e
                        . These 
                           s
                           s
                           t
                         instances are used to determine which subspaces are feasible near a given 
                           s
                           e
                         when obstructions are considered (Definition 4.21). Each 
                           s
                           s
                           t
                         in 
                           s
                           s
                           _
                           t
                           y
                           p
                           e
                           s
                         has an attribute which indicates if there is a line of sight to its 
                           s
                           e
                        .

In order to support flexibility in subspace modeling, 
                           s
                           e
                           t
                        ’s and related 
                           s
                           s
                           t
                        ’s are user-defined. For example, a user may define a desk 
                           s
                           e
                           t
                         with single or multiple 
                           s
                           s
                           t
                        ’s, dependent on desired subspace granularity. Desk 
                           s
                           e
                           t
                        ’s with multiple 
                           s
                           s
                           t
                        ’s may be desirable in pedestrian circulation design. Moreover, 
                           s
                           e
                           t
                        ’s that do not have 
                           s
                           s
                           t
                        ’s are also feasible.

Spatial relations between 
                           l
                           e
                        ’s that are modeled in a layout element network are defined. These relations are included because they appear to be useful across design domains, as will be illustrated with examples in Sections  4.6 and 7. Definitions are based on spatial relations between geometric objects. That is, spatial relations may derived automatically from 
                           l
                           e
                         geometry data, which minimizes modeling effort. Spatial relations between geometric objects are defined using the clash classification scheme in the Acis modeler  [40,41]. Acis is a geometric/solid modeling engine (GME) whose solid Brep data structure is similar to the ISO 1030303-42 schema (Fig. 2, [36]).


                        Table 1
                         shows spatial relations between volumes and faces and relevant clash classifications in Acis. An example is the “contains” relation between volumes, 
                           
                              
                                 C
                              
                              
                                 V
                              
                           
                        . 
                           C
                         is read as “contains”; subscript 
                           V
                         indicates that the set 
                           V
                         of volumes (that is, 
                           m
                           a
                           n
                           i
                           f
                           o
                           l
                           d
                           _
                           s
                           o
                           l
                           i
                           d
                           _
                           b
                           r
                           e
                           p
                        ’s) participates in the relation. The subscript is omitted in predicates, that is, 
                           C
                           
                              (
                              
                                 
                                    v
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    v
                                 
                                 
                                    2
                                 
                              
                              )
                           
                         is written instead of 
                           
                              
                                 C
                              
                              
                                 V
                              
                           
                           
                              (
                              
                                 
                                    v
                                 
                                 
                                    1
                                 
                              
                              ,
                              
                                 
                                    v
                                 
                                 
                                    2
                                 
                              
                              )
                           
                         to determine if a volume 
                           
                              
                                 v
                              
                              
                                 1
                              
                           
                         contains a volume 
                           
                              
                                 v
                              
                              
                                 2
                              
                           
                        . According to Table 1, 
                           
                              
                                 v
                              
                              
                                 1
                              
                           
                         contains 
                           
                              
                                 v
                              
                              
                                 2
                              
                           
                         if the volume clash classification returns either “contains”, “contains abuts”, or “coincident”. Clash classifications are mutually exclusive. While face clash classifications do not need to be considered for 
                           
                              
                                 C
                              
                              
                                 V
                              
                           
                        , they are relevant to determine the “touches” relation between volumes, 
                           
                              
                                 T
                              
                              
                                 V
                              
                           
                        . A volume 
                           
                              
                                 v
                              
                              
                                 1
                              
                           
                         touches a volume 
                           
                              
                                 v
                              
                              
                                 2
                              
                           
                         if the volume clash classification returns “abuts”, that is, 
                           
                              
                                 v
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 v
                              
                              
                                 2
                              
                           
                         do not share volume. Moreover, the face clash classification must return “coincident outside” for at least one pair of faces 
                           
                              
                                 f
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 f
                              
                              
                                 2
                              
                           
                         that are part of the boundaries of, respectively, 
                           
                              
                                 v
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 v
                              
                              
                                 2
                              
                           
                        . “Coincident outside” means that 
                           
                              
                                 f
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 f
                              
                              
                                 2
                              
                           
                         have a coincident region (as opposed to meeting at a curve or point), and that their normals, which point away from the interiors of 
                           
                              
                                 v
                              
                              
                                 1
                              
                           
                         and 
                           
                              
                                 v
                              
                              
                                 2
                              
                           
                        , point in opposite directions. The “partially bounds” relation between sets of faces and volumes, 
                           P
                           
                              
                                 B
                              
                              
                                 F
                                 ,
                                 V
                              
                           
                        , is also used in the definitions. It is derived from 
                           c
                           s
                           f
                           _
                           f
                           a
                           c
                           e
                           s
                           ,
                           o
                           u
                           t
                           e
                           r
                        , and 
                           v
                           o
                           i
                           d
                           s
                         relations in the ISO 1030303-42 schema (Fig. 2).

With spatial relations between geometric objects established, spatial relations between 
                           l
                           e
                        ’s that are modeled in a layout element network (Fig. 1) are defined and illustrated next. All examples are from the building design domain and shown in plan. There are six base relations and four relations that are derived from base relations.


                        
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 W
                                 S
                              
                           
                         is the “partially bounds” relation between 
                           s
                           b
                           e
                        ’s and whole spaces (Fig. 5
                        ). Volumes of 
                           w
                           
                              
                                 s
                              
                              
                                 1
                              
                           
                         and 
                           w
                           
                              
                                 s
                              
                              
                                 2
                              
                           
                         touch but are offset in Fig. 5 for improved visualization. That is, whole space volumes do not reflect thicknesses of enclosing walls or openings. Such abstraction is useful in schematic design and facilitates the aggregation of whole spaces by merging touching whole space volumes (Section  7.2). Face normals point away from volume interiors.


                        
                           Definition 4.16
                           Relation 
                                 P
                                 
                                    
                                       B
                                    
                                    
                                       S
                                       B
                                       E
                                       ,
                                       W
                                       S
                                    
                                 
                              
                           


                           A space boundary element 
                                 s
                                 b
                                 e
                               partially bounds a whole space 
                                 w
                                 s
                               if the 
                                 s
                                 b
                                 e
                               face partially bounds the 
                                 w
                                 s
                               volume: 
                                 
                                    
                                       P
                                       
                                          
                                             B
                                          
                                          
                                             S
                                             B
                                             E
                                             ,
                                             W
                                             S
                                          
                                       
                                       =
                                       
                                          {
                                          
                                             (
                                             s
                                             b
                                             e
                                             ,
                                             w
                                             s
                                             )
                                          
                                          ∈
                                          S
                                          B
                                          E
                                          ×
                                          W
                                          S
                                          
                                          |
                                          
                                          P
                                          B
                                          
                                             (
                                             s
                                             b
                                             e
                                             .
                                             f
                                             a
                                             c
                                             e
                                             ,
                                             w
                                             s
                                             .
                                             v
                                             o
                                             l
                                             )
                                          
                                          }
                                       
                                       .
                                    
                                 
                              
                           


                        
                           
                              
                                 T
                              
                              
                                 S
                                 B
                                 E
                              
                           
                         is the “touches” relation between 
                           s
                           b
                           e
                        ’s (Fig. 6
                        ).


                        
                           Definition 4.17
                           Relation 
                                 
                                    
                                       T
                                    
                                    
                                       S
                                       B
                                       E
                                    
                                 
                              
                           


                           A space boundary element 
                                 s
                                 b
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                 
                               touches another space boundary element 
                                 s
                                 b
                                 
                                    
                                       e
                                    
                                    
                                       2
                                    
                                 
                               if the faces of 
                                 s
                                 b
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                 
                               and 
                                 s
                                 b
                                 
                                    
                                       e
                                    
                                    
                                       2
                                    
                                 
                               touch: 
                                 
                                    
                                       
                                          
                                             T
                                          
                                          
                                             S
                                             B
                                             E
                                          
                                       
                                       =
                                       
                                          {
                                          
                                             (
                                             s
                                             b
                                             
                                                
                                                   e
                                                
                                                
                                                   1
                                                
                                             
                                             ,
                                             s
                                             b
                                             
                                                
                                                   e
                                                
                                                
                                                   2
                                                
                                             
                                             )
                                          
                                          ∈
                                          S
                                          B
                                          E
                                          ×
                                          S
                                          B
                                          E
                                          
                                          |
                                          
                                          s
                                          b
                                          
                                             
                                                e
                                             
                                             
                                                1
                                             
                                          
                                          ≠
                                          s
                                          b
                                          
                                             
                                                e
                                             
                                             
                                                2
                                             
                                          
                                          
                                          ∧
                                          
                                          T
                                          
                                             (
                                             s
                                             b
                                             
                                                
                                                   e
                                                
                                                
                                                   1
                                                
                                             
                                             .
                                             f
                                             a
                                             c
                                             e
                                             ,
                                             s
                                             b
                                             
                                                
                                                   e
                                                
                                                
                                                   2
                                                
                                             
                                             .
                                             f
                                             a
                                             c
                                             e
                                             )
                                          
                                          }
                                       
                                       .
                                    
                                 
                              
                           


                        
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 S
                                 S
                              
                           
                         is the “partially bounds” relation between 
                           s
                           b
                           e
                        ’s and subspaces (Fig. 7
                        ). Subspace volumes are offset in Fig. 7 for improved visualization.


                        
                           Definition 4.18
                           Relation 
                                 P
                                 
                                    
                                       B
                                    
                                    
                                       S
                                       B
                                       E
                                       ,
                                       S
                                       S
                                    
                                 
                              
                           


                           A space boundary element 
                                 s
                                 b
                                 e
                               partially bounds a subspace 
                                 s
                                 s
                               if the 
                                 s
                                 b
                                 e
                               face overlaps with an 
                                 s
                                 s
                               volume face 
                                 f
                              : 
                                 
                                    
                                       P
                                       
                                          
                                             B
                                          
                                          
                                             S
                                             B
                                             E
                                             ,
                                             S
                                             S
                                          
                                       
                                       =
                                       
                                          {
                                          
                                             (
                                             s
                                             b
                                             e
                                             ,
                                             s
                                             s
                                             )
                                          
                                          ∈
                                          S
                                          B
                                          E
                                          ×
                                          S
                                          S
                                          
                                          |
                                          ∃
                                          f
                                          ∈
                                          F
                                          
                                          
                                             [
                                             P
                                             B
                                             
                                                (
                                                f
                                                ,
                                                s
                                                s
                                                .
                                                v
                                                o
                                                l
                                                )
                                             
                                             
                                             ∧
                                             
                                             O
                                             
                                                (
                                                s
                                                b
                                                e
                                                .
                                                f
                                                a
                                                c
                                                e
                                                ,
                                                f
                                                )
                                             
                                             ]
                                          
                                          }
                                       
                                       .
                                    
                                 
                              
                           


                        
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         is the “is adjacent to” relation between subspaces (Fig. 8
                        ). The relation is restricted to compatible subspaces. That is, only subspaces with compatible volume types may be adjacent. 
                           P
                           r
                           i
                           m
                           i
                           t
                           i
                           v
                           e
                         and 
                           B
                           r
                           e
                           p
                         subspaces are compatible with each other. In case of 
                           C
                           e
                           l
                           l
                         subspaces, only subspaces with the same concrete volume type are compatible. This eliminates spurious 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         elements.


                        
                           Definition 4.19
                           Relation 
                                 
                                    
                                       A
                                    
                                    
                                       S
                                       S
                                    
                                 
                              
                           


                           A subspace 
                                 s
                                 
                                    
                                       s
                                    
                                    
                                       1
                                    
                                 
                               is adjacent to another subspace 
                                 s
                                 
                                    
                                       s
                                    
                                    
                                       2
                                    
                                 
                              
                              
                                 
                                    1.
                                    if the 
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                1
                                             
                                          
                                        and 
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                        are compatible,

if the volumes of 
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                1
                                             
                                          
                                        and 
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                        touch or partially overlap, and

if 
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                1
                                             
                                          
                                        and 
                                          s
                                          
                                             
                                                s
                                             
                                             
                                                2
                                             
                                          
                                        are contained in the same whole space 
                                          w
                                          s
                                       :

The 
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 S
                                 S
                              
                           
                         relation is defined in Table A.4 in Appendix A together with other relevant spatial relations that are not modeled explicitly in a layout. All subspaces in Fig. 8 are compatible because they are 
                           S
                           p
                           h
                           e
                           r
                           e
                         subspaces. Partially overlapping subspaces 
                           s
                           
                              
                                 s
                              
                              
                                 1
                              
                           
                         and 
                           s
                           
                              
                                 s
                              
                              
                                 2
                              
                           
                         are considered as adjacent. Subspace 
                           s
                           
                              
                                 s
                              
                              
                                 3
                              
                           
                         contains 
                           s
                           
                              
                                 s
                              
                              
                                 4
                              
                           
                        . Subspaces 
                           s
                           
                              
                                 s
                              
                              
                                 5
                              
                           
                         and 
                           s
                           
                              
                                 s
                              
                              
                                 6
                              
                           
                         do not touch as defined in Table 1. According to the third predicate in Definition 4.19, subspaces that are contained in different whole spaces are not considered as adjacent owing to obstructing 
                           s
                           b
                           e
                        ’s.


                        
                           
                              
                                 N
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 B
                                 E
                              
                           
                         is the “is near” relation between 
                           s
                           e
                        ’s and 
                           s
                           b
                           e
                        ’s (Fig. 9
                        ). In contrast to the previous relations, which are topological, the 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 B
                                 E
                              
                           
                         relation is metric. The relation between an 
                           s
                           e
                         and an 
                           s
                           b
                           e
                         is determined based on their faces and a tolerance distance, 
                           
                              
                                 d
                              
                              
                                 t
                                 o
                                 l
                              
                           
                        . The latter is used because 
                           s
                           e
                         and 
                           s
                           b
                           e
                         faces may not be embedded in the same surface. Each 
                           s
                           e
                         has a 
                           
                              
                                 d
                              
                              
                                 t
                                 o
                                 l
                              
                           
                         attribute. For example, 
                           
                              
                                 d
                              
                              
                                 t
                                 o
                                 l
                              
                           
                         afforded to a thin partition wall 
                           s
                           e
                         would be less than 
                           
                              
                                 d
                              
                              
                                 t
                                 o
                                 l
                              
                           
                         afforded to a thick, loadbearing wall 
                           s
                           e
                        .


                        
                           Definition 4.20
                           Relation 
                                 
                                    
                                       N
                                    
                                    
                                       S
                                       E
                                       ,
                                       S
                                       B
                                       E
                                    
                                 
                              
                           


                           A space element 
                                 s
                                 e
                               is near a space boundary element 
                                 s
                                 b
                                 e
                               if the 
                                 s
                                 e
                               face is near the 
                                 s
                                 b
                                 e
                               face by less than 
                                 s
                                 e
                              ’s tolerance distance 
                                 
                                    
                                       d
                                    
                                    
                                       t
                                       o
                                       l
                                    
                                 
                              : 
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             S
                                             E
                                             ,
                                             S
                                             B
                                             E
                                          
                                       
                                       =
                                       
                                          {
                                          
                                             (
                                             s
                                             e
                                             ,
                                             s
                                             b
                                             e
                                             )
                                          
                                          ∈
                                          S
                                          E
                                          ×
                                          S
                                          B
                                          E
                                          
                                          |
                                          
                                          N
                                          
                                             (
                                             s
                                             e
                                             .
                                             f
                                             a
                                             c
                                             e
                                             ,
                                             s
                                             b
                                             e
                                             .
                                             f
                                             a
                                             c
                                             e
                                             ,
                                             s
                                             e
                                             .
                                             
                                                
                                                   d
                                                
                                                
                                                   t
                                                   o
                                                   l
                                                
                                             
                                             )
                                          
                                          }
                                       
                                       ,
                                    
                                 
                               where 
                                 
                                    
                                       N
                                    
                                    
                                       F
                                       ,
                                       
                                          
                                             R
                                          
                                          
                                             +
                                          
                                       
                                    
                                 
                               is the “is near” relation between two faces based on  
                                 
                                    
                                       d
                                    
                                    
                                       t
                                       o
                                       l
                                    
                                 
                              .


                        
                           
                              
                                 N
                              
                              
                                 F
                                 ,
                                 
                                    
                                       R
                                    
                                    
                                       +
                                    
                                 
                              
                           
                         determines if a face 
                           
                              
                                 f
                              
                              
                                 1
                              
                           
                         is near another face 
                           
                              
                                 f
                              
                              
                                 2
                              
                           
                        . Face 
                           
                              
                                 f
                              
                              
                                 1
                              
                           
                         is extruded by 
                           ±
                           
                           
                              
                                 d
                              
                              
                                 t
                                 o
                                 l
                              
                           
                         to create a solid 
                           s
                         (Fig. 9). Faces 
                           
                              
                                 f
                              
                              
                                 1
                                 ,
                                 1
                              
                           
                         and 
                           
                              
                                 f
                              
                              
                                 1
                                 ,
                                 2
                              
                           
                         bound 
                           s
                         and are offset by 
                           
                              
                                 d
                              
                              
                                 t
                                 o
                                 l
                              
                           
                         from 
                           
                              
                                 f
                              
                              
                                 1
                              
                           
                        . Face 
                           
                              
                                 f
                              
                              
                                 1
                              
                           
                         is near face 
                           
                              
                                 f
                              
                              
                                 2
                              
                           
                        
                        
                           
                              1.
                              if 
                                    s
                                  and 
                                    
                                       
                                          f
                                       
                                       
                                          2
                                       
                                    
                                  overlap, and

if 
                                    
                                       
                                          f
                                       
                                       
                                          2
                                       
                                    
                                  and, respectively, 
                                    
                                       
                                          f
                                       
                                       
                                          1
                                          ,
                                          1
                                       
                                    
                                  and 
                                    
                                       
                                          f
                                       
                                       
                                          1
                                          ,
                                          2
                                       
                                    
                                  are disjoint.


                        
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         is the “is near” relation between subspaces and 
                           s
                           e
                        ’s (Fig. 10
                        ). Like 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 B
                                 E
                              
                           
                        , this is also a metric relation. Subspace volumes are not shown in Fig. 10 because they are not required to determine the 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         relation. In order to support flexibility in subspace modeling, the 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         relation is based on user-defined 
                           s
                           e
                           t
                        ’s and 
                           s
                           s
                           t
                        ’s (Definitions 4.14 and 4.15). Fig. 10 thus includes door and desk 
                           s
                           e
                           t
                        ’s, their 
                           s
                           s
                           t
                        ’s, as well as 
                           s
                           s
                           t
                        ’s that are instantiated in the layout and referenced by 
                           s
                           e
                        ’s.


                        
                           Definition 4.21
                           Relation 
                                 
                                    
                                       N
                                    
                                    
                                       S
                                       S
                                       ,
                                       S
                                       E
                                    
                                 
                              
                           


                           A subspace 
                                 s
                                 s
                               is near a space element 
                                 s
                                 e
                               if there is a subspace type 
                                 s
                                 s
                                 t
                               which is referenced in 
                                 s
                                 e
                              ’s 
                                 s
                                 s
                                 _
                                 t
                                 y
                                 p
                                 e
                                 s
                               attribute, has the same position as 
                                 s
                                 s
                              , is compatible with 
                                 s
                                 s
                              , and is near 
                                 s
                                 e
                               while considering obstructions: 
                                 
                                    
                                       
                                          
                                             N
                                          
                                          
                                             S
                                             S
                                             ,
                                             S
                                             E
                                          
                                       
                                       =
                                       
                                          {
                                          
                                             (
                                             s
                                             s
                                             ,
                                             s
                                             e
                                             )
                                          
                                          ∈
                                          S
                                          S
                                          ×
                                          S
                                          E
                                          
                                          |
                                          
                                          ∃
                                          s
                                          s
                                          t
                                          
                                          ∈
                                          
                                          s
                                          e
                                          .
                                          s
                                          s
                                          _
                                          t
                                          y
                                          p
                                          e
                                          s
                                          
                                          
                                             [
                                             s
                                             s
                                             t
                                             .
                                             p
                                             o
                                             s
                                             =
                                             s
                                             s
                                             .
                                             p
                                             o
                                             s
                                             ∧
                                             
                                             
                                             c
                                             o
                                             m
                                             p
                                             a
                                             t
                                             i
                                             b
                                             l
                                             e
                                             
                                                (
                                                s
                                                s
                                                t
                                                ,
                                                s
                                                s
                                                )
                                             
                                             
                                             ∧
                                             
                                             N
                                             
                                                (
                                                s
                                                s
                                                t
                                                ,
                                                s
                                                e
                                                )
                                             
                                             ]
                                          
                                          }
                                       
                                       ,
                                    
                                 
                               where 
                                 
                                    
                                       N
                                    
                                    
                                       S
                                       S
                                       T
                                       ,
                                       S
                                       E
                                    
                                 
                               is the “is near” relation between 
                                 s
                                 s
                                 t
                              ’s and 
                                 s
                                 e
                              ’s.


                        
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 T
                                 ,
                                 S
                                 E
                              
                           
                         determines if an 
                           s
                           s
                           t
                         is near an 
                           s
                           e
                        . It considers the whole space context of 
                           s
                           e
                         and 
                           s
                           s
                           t
                         as well as obstructing space elements and 
                           s
                           b
                           e
                        ’s. Regarding the whole space context, there are two cases: 
                           
                              1.
                              if 
                                    s
                                    e
                                  is an 
                                    s
                                    
                                       
                                          e
                                       
                                       
                                          p
                                          e
                                          _
                                          w
                                          s
                                       
                                    
                                  (
                                    s
                                    
                                       
                                          e
                                       
                                       
                                          1
                                       
                                    
                                  in Fig. 10), then 
                                    s
                                    e
                                  must partially enclose the whole space which contains 
                                    s
                                    s
                                    t
                                 , or

if 
                                    s
                                    e
                                  is an 
                                    s
                                    
                                       
                                          e
                                       
                                       
                                          c
                                          _
                                          w
                                          s
                                       
                                    
                                  (
                                    s
                                    
                                       
                                          e
                                       
                                       
                                          2
                                       
                                    
                                  in Fig. 10), then the whole space which contains 
                                    s
                                    e
                                  must also contain 
                                    s
                                    s
                                    t
                                 .

The six base spatial relations defined above are used to define four derived spatial relations (Fig. 11
                        ). These include the “is adjacent to” relation between whole spaces, 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                        , the “is near” relation between 
                           s
                           e
                        ’s, 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                              
                           
                        , the “partially encloses” relation between 
                           s
                           e
                        ’s and whole spaces, 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 W
                                 S
                              
                           
                        , and the “partially encloses” relation between 
                           s
                           e
                        ’s and subspaces, 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 S
                              
                           
                        . Arrows in Fig. 11 indicate base relations of derived relations. The relations are defined in Table 2
                         and illustrated in Figs. 12 and 13
                        
                        . The definition of the 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 S
                              
                           
                         relation is based on the 
                           
                              
                                 N
                              
                              
                                 F
                                 ,
                                 
                                    
                                       R
                                    
                                    
                                       +
                                    
                                 
                              
                           
                         relation in addition to 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 B
                                 E
                              
                           
                         and 
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 S
                                 S
                              
                           
                         relations. This ensures that an 
                           s
                           e
                         face is near at least one subspace volume face (see comments for Definition 4.20).

Base and derived relations are instances of spatial relations.


                        
                           Definition 4.22
                           Spatial Relation


                           A spatial relation is a relation between two sets of 
                                 l
                                 e
                              ’s that is predicated on 
                                 l
                                 e
                               geometry attributes. Selected spatial relations are modeled in a layout element network (Definition 4.23). The set 
                                 
                                    
                                       S
                                       R
                                       =
                                       
                                       
                                          {
                                          s
                                          
                                             
                                                r
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          s
                                          
                                             
                                                r
                                             
                                             
                                                2
                                             
                                          
                                          ,
                                          …
                                          ,
                                          s
                                          
                                             
                                                r
                                             
                                             
                                                u
                                             
                                          
                                          }
                                       
                                       =
                                       
                                       P
                                       
                                          
                                             B
                                          
                                          
                                             S
                                             B
                                             E
                                             ,
                                             W
                                             S
                                          
                                       
                                       
                                       ∪
                                       
                                       
                                          
                                             T
                                          
                                          
                                             S
                                             B
                                             E
                                          
                                       
                                       
                                       ∪
                                       
                                       P
                                       
                                          
                                             B
                                          
                                          
                                             S
                                             B
                                             E
                                             ,
                                             S
                                             S
                                          
                                       
                                       
                                       ∪
                                       
                                       
                                          
                                             A
                                          
                                          
                                             S
                                             S
                                          
                                       
                                       
                                       ∪
                                       
                                       
                                          
                                             N
                                          
                                          
                                             S
                                             E
                                             ,
                                             S
                                             B
                                             E
                                          
                                       
                                       
                                       ∪
                                       
                                       
                                          
                                             N
                                          
                                          
                                             S
                                             S
                                             ,
                                             S
                                             E
                                          
                                       
                                       ∪
                                       
                                       
                                       
                                          
                                             A
                                          
                                          
                                             W
                                             S
                                          
                                       
                                       
                                       ∪
                                       
                                       
                                          
                                             N
                                          
                                          
                                             S
                                             E
                                          
                                       
                                       
                                       ∪
                                       
                                       P
                                       
                                          
                                             E
                                          
                                          
                                             S
                                             E
                                             ,
                                             W
                                             S
                                          
                                       
                                       
                                       ∪
                                       
                                       P
                                       
                                          
                                             E
                                          
                                          
                                             S
                                             E
                                             ,
                                             S
                                             S
                                          
                                       
                                    
                                 
                               includes all spatial relation elements (
                                 s
                                 r
                              ’s) that are modeled in a layout element network. An 
                                 s
                                 r
                               is directed and has a numeric (network) weight and a 
                                 l
                                 i
                                 n
                                 e
                                 _
                                 o
                                 f
                                 _
                                 s
                                 i
                                 g
                                 h
                                 t
                               attribute.

The corresponding 
                           S
                           p
                           a
                           t
                           i
                           a
                           l
                           R
                           e
                           l
                           a
                           t
                           i
                           o
                           n
                         class is an abstract class. As each 
                           l
                           e
                         in a pair of 
                           l
                           e
                        ’s related by an 
                           s
                           r
                         has a position in 3-space, an 
                           s
                           r
                         may be viewed as a three-dimensional line segment with positions of 
                           l
                           e
                        ’s as start and end points. The 
                           l
                           i
                           n
                           e
                           _
                           o
                           f
                           _
                           s
                           i
                           g
                           h
                           t
                         attribute indicates whether such a line segment intersects with other 
                           s
                           e
                        ’s or 
                           s
                           b
                           e
                        ’s. This information could be useful e.g. in pedestrian circulation design, where obstructed 
                           s
                           r
                        ’s may not be accessible.

The layout element network is the main data structure in a layout.


                        
                           Definition 4.23
                           Layout Element Network


                           A layout element network is a geometric network with 
                                 l
                                 e
                              ’s and 
                                 s
                                 r
                              ’s as, respectively, nodes and edges. The ordered pair 
                                 
                                    
                                       L
                                       E
                                       N
                                       =
                                       
                                          (
                                          L
                                          E
                                          ,
                                          S
                                          R
                                          )
                                       
                                    
                                 
                               includes the set of 
                                 l
                                 e
                              ’s and the set of 
                                 s
                                 r
                              ’s in a layout.

With its constituent elements established, the concept of a layout is defined.


                        
                           Definition 4.24
                           Layout


                           A layout represents a collection of whole spaces, subspaces, 
                                 s
                                 b
                                 e
                              ’s, 
                                 s
                                 e
                              ’s, and selected spatial relations. Layout elements and spatial relations are accessed through its layout element network.

The structure of layouts and analysis of their 
                           l
                           e
                         networks is illustrated with a layout 
                           A
                         that models spaces of a small building. As 
                           A
                         is difficult to visualize in its entirety, four layouts featuring different 
                           l
                           e
                        ’s and 
                           s
                           r
                        ’s (Figs. 14–17
                        
                        
                        
                        ) are selected from 
                           A
                        . The selection operation that is used to select a layout from 
                           A
                         has the signature 
                           
                              
                                 L
                                 a
                                 y
                                 o
                                 u
                                 t
                                 
                                 s
                                 e
                                 l
                                 e
                                 c
                                 
                                    
                                       t
                                    
                                    
                                       
                                          
                                             P
                                          
                                          
                                             L
                                             E
                                          
                                       
                                       ,
                                       
                                       
                                          
                                             P
                                          
                                          
                                             S
                                             R
                                          
                                       
                                    
                                 
                                 
                                 
                                    (
                                    L
                                    a
                                    y
                                    o
                                    u
                                    t
                                    
                                    L
                                    )
                                 
                                 ,
                              
                           
                         where 
                           
                              –
                              
                                 
                                    L
                                  is the argument layout from which 
                                    l
                                    e
                                 ’s and 
                                    s
                                    r
                                 ’s are selected,


                                 
                                    
                                       
                                          P
                                       
                                       
                                          L
                                          E
                                       
                                    
                                  is a filter (that is, a list of predicates) on 
                                    l
                                    e
                                 ’s in 
                                    L
                                 , and


                                 
                                    
                                       
                                          P
                                       
                                       
                                          S
                                          R
                                       
                                    
                                  is a filter on 
                                    s
                                    r
                                 ’s in 
                                    L
                                 .

A wildcard (*) predicate in 
                           
                              
                                 P
                              
                              
                                 L
                                 E
                              
                           
                         or 
                           
                              
                                 P
                              
                              
                                 S
                                 R
                              
                           
                         means that all instances of a class in 
                           L
                         are selected.

Numbers associated with 
                           l
                           e
                         nodes in Figs. 14–17 represent weights that are derived for the purpose of analysis. A node weight corresponds to the length (that is, the number of 
                           s
                           r
                         edges) of the shortest path from that node to the nearest external whole space or subspace node. Spaces are designated in 
                           A
                         as external or internal. Shortest path searches do not consider directions of 
                           s
                           r
                        ’s.

The first layout selected from 
                           A
                         includes whole spaces, 
                           s
                           b
                           e
                        ’s, 
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 W
                                 S
                              
                           
                           ,
                           
                              
                                 T
                              
                              
                                 S
                                 B
                                 E
                              
                           
                         and 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                         relations (Fig. 14). As described in the previous section, the 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                         relation is derived from the latter two base relations. The weight of each whole space is derived based on the 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                         relation and corresponds to the distance to the nearest external whole space. Whole spaces with weight 1 are internal and adjacent to the building enclosure (or building perimeter). The whole space with weight 2 is internal but not adjacent to the building perimeter. The distinction of internal perimeter and non-perimeter spaces is relevant e.g. for thermal design. The weight of each 
                           s
                           b
                           e
                         is derived based on 
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 W
                                 S
                              
                           
                         and 
                           
                              
                                 T
                              
                              
                                 S
                                 B
                                 E
                              
                           
                         relations and corresponds to the distance to the nearest external whole space. 
                           S
                           b
                           e
                        ’s with weight 2 partially bound internal whole spaces and are on the perimeter. The space boundary area of a whole space that is fully or partially exposed to the exterior may be estimated based on 
                           s
                           b
                           e
                         weights, which is relevant e.g. for thermal design.

The second layout includes subspaces, four door 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s, two desk 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                              
                           
                        ’s, and 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         relations (Fig. 15). All subspaces are 
                           G
                           e
                           o
                           d
                           e
                           s
                           i
                           c
                           V
                           o
                           r
                           o
                           n
                           o
                           i
                         subspaces that represent access zones (Section  4.3). That is, each subspace volume encodes proximity to a subspace node in the 
                           l
                           e
                         network. The nearest subspace(s) may be determined for a given position as well as nearest desk or door 
                           s
                           e
                        ’s, since subspaces are near the latter. Selected relations form a pedestrian circulation network which is used to derive subspace weights. A weight corresponds to the distance to the nearest external subspace. The maximum subspace weight is 5, which is relevant for pedestrian circulation design.

The third layout includes whole spaces, 
                           s
                           b
                           e
                        ’s, four door and two window 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s, 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 B
                                 E
                              
                           
                           ,
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 S
                                 S
                              
                           
                        , and 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 S
                              
                           
                         relations (Fig. 16). The 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 S
                              
                           
                         relation is derived from the former two base relations. 
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 S
                                 S
                              
                           
                         and 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 S
                              
                           
                         relations are used to derive subspace weights. A weight corresponds to the distance to the nearest external subspace. Subspaces with weight 2 are partially enclosed by doors or windows that are part of the building enclosure. Assuming that doors and windows are glazed, these subspaces would receive direct natural light from the exterior.

The fourth layout includes whole spaces, four door 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s, 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 W
                                 S
                              
                           
                        , and 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                              
                           
                         relations (Fig. 17). The 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 W
                                 S
                              
                           
                         relation is derived from 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                                 ,
                                 S
                                 B
                                 E
                              
                           
                         (Fig. 16) and 
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 W
                                 S
                              
                           
                         (Fig. 14) relations, and the 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                              
                           
                         relation from 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         relations (Fig. 15). Both selected relations are used to derive weights of 
                           s
                           e
                        ’s and whole spaces. A weight corresponds to the distance to the nearest external whole space. Two doors with weight 1 are part of the building enclosure. Two whole spaces with weight 2 have direct access to the external whole space.

@&#DISCUSSION@&#

Several differences emerge when comparing the layout schema with the space schema in IFC. Some of these are briefly reviewed — a comprehensive comparison is left for future work. In the layout schema, whole spaces and subspaces are modeled as separate classes as they participate in different spatial relations. In IFC, there is a single 
                           I
                           f
                           c
                           S
                           p
                           a
                           c
                           e
                         class and an attribute that indicates if a space is a regular space, a partial space, or a group of spaces. Distinction of partial spaces similar to volume types of subspaces is not supported in IFC. Property sets such as 
                           P
                           s
                           e
                           t
                           _
                           S
                           p
                           a
                           c
                           e
                           C
                           o
                           m
                           m
                           o
                           n
                         may be extended to allow for these distinctions. It is feasible to derive certain spatial relations in network-based space layouts from relations in IFC. The 
                           
                              
                                 T
                              
                              
                                 S
                                 B
                                 E
                              
                           
                         relation, for example, could be derived from relations between 
                           I
                           f
                           c
                           V
                           i
                           r
                           t
                           u
                           a
                           l
                           E
                           l
                           e
                           m
                           e
                           n
                           t
                         or 
                           I
                           f
                           c
                           B
                           u
                           i
                           l
                           d
                           i
                           n
                           g
                           E
                           l
                           e
                           m
                           e
                           n
                           t
                         and 
                           I
                           f
                           c
                           R
                           e
                           l
                           S
                           p
                           a
                           c
                           e
                           B
                           o
                           u
                           n
                           d
                           a
                           r
                           y
                           1
                           s
                           t
                           L
                           e
                           v
                           e
                           l
                         classes. The latter class is similar to the 
                           S
                           p
                           a
                           c
                           e
                           B
                           o
                           u
                           n
                           d
                           a
                           r
                           y
                           E
                           l
                           e
                           m
                           e
                           n
                           t
                         class. 
                           I
                           f
                           c
                           V
                           i
                           r
                           t
                           u
                           a
                           l
                           E
                           l
                           e
                           m
                           e
                           n
                           t
                         instances are used as dummy instances when there are no 
                           I
                           f
                           c
                           B
                           u
                           i
                           l
                           d
                           i
                           n
                           g
                           E
                           l
                           e
                           m
                           e
                           n
                           t
                         instances. This may result in considerable data duplication. On the other hand, it is less clear how the 
                           P
                           
                              
                                 B
                              
                              
                                 S
                                 B
                                 E
                                 ,
                                 S
                                 S
                              
                           
                         relation or the 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         relation between partially overlapping subspaces may be derived. More importantly, also regarding layout consistency, the reliability of 
                           
                              
                                 T
                              
                              
                                 S
                                 B
                                 E
                              
                           
                         and other relations derived from IFC relations is unknown as the latter are typically not formally defined.

@&#OVERVIEW@&#

Layout operations may be inaccurate or fail if a layout is spatially inconsistent. An example of a spatial inconsistency is a furnishing 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                              
                           
                         which is not contained in a whole space. As will be shown, the 
                           s
                           e
                           l
                           e
                           c
                           t
                         operation introduced in Section  4.6 may or may not return a spatially consistent layout. Spatial constraints 
                           
                              (
                              S
                              C
                              )
                           
                         on layout elements and spatial relations are defined in Sections  5.2 and 5.3 that extend the layout schema. These may be used to automatically check the spatial consistency of layouts. Recall from Section  3.3 that they address logical inconsistencies, which are a specific type of spatial inconsistency. An operation is described and illustrated that evaluates spatial constraints to interactively or automatically resolve spatial inconsistencies in a layout (Sections  5.4 and 5.5). The operation is also seen as relevant for the composition (or chaining) of layout operations that result in spatially consistent layouts.

Constraints on 
                           l
                           e
                        ’s are based on predicates on spatial relations. With two exceptions (Definitions 5.6 and 5.8), these spatial relations are not modeled explicitly in a layout. They are defined in Appendix A.


                        
                           Definition 5.1
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       W
                                       S
                                       ,
                                       1
                                    
                                 
                              
                           


                           A whole space 
                                 w
                                 
                                    
                                       s
                                    
                                    
                                       1
                                    
                                 
                               must not overlap any other whole space 
                                 w
                                 
                                    
                                       s
                                    
                                    
                                       2
                                    
                                 
                              : 
                                 
                                    
                                       ∀
                                       w
                                       
                                          
                                             s
                                          
                                          
                                             1
                                          
                                       
                                       ∈
                                       W
                                       S
                                       ,
                                       
                                       ∄
                                       w
                                       
                                          
                                             s
                                          
                                          
                                             2
                                          
                                       
                                       ∈
                                       W
                                       S
                                       
                                       
                                          [
                                          O
                                          
                                             (
                                             w
                                             
                                                
                                                   s
                                                
                                                
                                                   1
                                                
                                             
                                             ,
                                             w
                                             
                                                
                                                   s
                                                
                                                
                                                   2
                                                
                                             
                                             )
                                          
                                          ]
                                       
                                       ,
                                    
                                 
                               where 
                                 
                                    
                                       O
                                    
                                    
                                       W
                                       S
                                    
                                 
                               is the “overlaps” relation between whole spaces (Table A.4).


                        
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 1
                              
                           
                         may be violated when two layouts are merged.


                        
                           Definition 5.2
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       W
                                       S
                                       ,
                                       2
                                    
                                 
                              
                           


                           A whole space 
                                 w
                                 s
                               must be bounded by a set 
                                 S
                                 B
                                 
                                    
                                       E
                                    
                                    
                                       i
                                    
                                 
                               of space boundary elements: 
                                 
                                    
                                       ∀
                                       w
                                       s
                                       ∈
                                       W
                                       S
                                       ,
                                       ∃
                                       S
                                       B
                                       
                                          
                                             E
                                          
                                          
                                             i
                                          
                                       
                                       ∈
                                       P
                                       
                                          (
                                          S
                                          B
                                          E
                                          )
                                       
                                       
                                       
                                          [
                                          B
                                          
                                             (
                                             S
                                             B
                                             
                                                
                                                   E
                                                
                                                
                                                   i
                                                
                                             
                                             ,
                                             w
                                             s
                                             )
                                          
                                          ]
                                       
                                       ,
                                    
                                 
                               where 
                                 
                                    
                                       B
                                    
                                    
                                       P
                                       
                                          (
                                          S
                                          B
                                          E
                                          )
                                       
                                       ,
                                       W
                                       S
                                    
                                 
                               is the “bounds” relation between the 
                                 S
                                 B
                                 E
                               power set, 
                                 P
                                 
                                    (
                                    S
                                    B
                                    E
                                    )
                                 
                              , and whole spaces (Definition A.1).


                        
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 2
                              
                           
                         checks if a whole space is bounded on all sides by a set of 
                           s
                           b
                           e
                        ’s. According to the definition of the 
                           
                              
                                 B
                              
                              
                                 P
                                 
                                    (
                                    S
                                    B
                                    E
                                    )
                                 
                                 ,
                                 W
                                 S
                              
                           
                         relation, each face in a whole space volume shell must be referenced by an 
                           s
                           b
                           e
                         (Fig. 3). All whole spaces in Fig. 17 violate 
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 2
                              
                           
                         because there are whole space volumes but no 
                           s
                           b
                           e
                        ’s that reference their faces.


                        
                           Definition 5.3
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       S
                                       E
                                       ,
                                       1
                                    
                                 
                              
                           


                           A space element 
                                 s
                                 
                                    
                                       e
                                    
                                    
                                       1
                                    
                                 
                               must not overlap any other space element 
                                 s
                                 
                                    
                                       e
                                    
                                    
                                       2
                                    
                                 
                              : 
                                 
                                    
                                       ∀
                                       s
                                       
                                          
                                             e
                                          
                                          
                                             1
                                          
                                       
                                       ∈
                                       S
                                       E
                                       ,
                                       
                                       ∄
                                       s
                                       
                                          
                                             e
                                          
                                          
                                             2
                                          
                                       
                                       ∈
                                       S
                                       E
                                       
                                       
                                          [
                                          O
                                          
                                             (
                                             s
                                             
                                                
                                                   e
                                                
                                                
                                                   1
                                                
                                             
                                             ,
                                             s
                                             
                                                
                                                   e
                                                
                                                
                                                   2
                                                
                                             
                                             )
                                          
                                          ]
                                       
                                       ,
                                    
                                 
                               where 
                                 
                                    
                                       O
                                    
                                    
                                       S
                                       E
                                    
                                 
                               is the “overlaps” relation between 
                                 s
                                 e
                              ’s (Table A.4).


                        
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 E
                                 ,
                                 1
                              
                           
                         may be violated when two layouts are merged.


                        
                           Definition 5.4
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       S
                                       E
                                       ,
                                       2
                                    
                                 
                              
                           


                           A space element 
                                 s
                                 e
                               must have a set 
                                 S
                                 
                                    
                                       S
                                    
                                    
                                       i
                                    
                                 
                               of nearby subspaces: 
                                 
                                    
                                       ∀
                                       s
                                       e
                                       ∈
                                       S
                                       E
                                       ,
                                       ∃
                                       S
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                       ∈
                                       P
                                       
                                          (
                                          S
                                          S
                                          )
                                       
                                       
                                       
                                          [
                                          N
                                          
                                             (
                                             S
                                             
                                                
                                                   S
                                                
                                                
                                                   i
                                                
                                             
                                             ,
                                             s
                                             e
                                             )
                                          
                                          ]
                                       
                                       ,
                                    
                                 
                               where 
                                 
                                    
                                       N
                                    
                                    
                                       P
                                       
                                          (
                                          S
                                          S
                                          )
                                       
                                       ,
                                       S
                                       E
                                    
                                 
                               is the “is near” relation between the 
                                 S
                                 S
                               power set, 
                                 P
                                 
                                    (
                                    S
                                    S
                                    )
                                 
                              , and 
                                 s
                                 e
                              ’s (Definition A.2).


                        
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 E
                                 ,
                                 2
                              
                           
                         checks if an 
                           s
                           e
                         has all nearby subspaces that are feasible based on its 
                           s
                           s
                           t
                        ’s (Definition 4.15) and context. In Fig. 17, suppose that each door 
                           s
                           e
                         has an 
                           s
                           s
                           t
                         on its front and one on its back (
                           s
                           s
                           t
                        ’s are not shown in the figure). Accordingly, all doors violate 
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 E
                                 ,
                                 2
                              
                           
                         because two subspaces are feasible to be near each door but do not exist.


                        
                           Definition 5.5
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       S
                                       
                                          
                                             E
                                          
                                          
                                             c
                                             _
                                             w
                                             s
                                          
                                       
                                    
                                 
                              
                           


                           A space element contained in a whole space 
                                 s
                                 
                                    
                                       e
                                    
                                    
                                       c
                                       _
                                       w
                                       s
                                    
                                 
                               (Definition 4.6) must be contained in a whole space 
                                 w
                                 s
                              : 
                                 
                                    
                                       ∀
                                       s
                                       
                                          
                                             e
                                          
                                          
                                             c
                                             _
                                             w
                                             s
                                          
                                       
                                       ∈
                                       S
                                       
                                          
                                             E
                                          
                                          
                                             c
                                             _
                                             w
                                             s
                                          
                                       
                                       ,
                                       
                                       ∃
                                       w
                                       s
                                       ∈
                                       W
                                       S
                                       
                                       
                                          [
                                          C
                                          
                                             (
                                             w
                                             s
                                             ,
                                             s
                                             
                                                
                                                   e
                                                
                                                
                                                   c
                                                   _
                                                   w
                                                   s
                                                
                                             
                                             )
                                          
                                          ]
                                       
                                       ,
                                    
                                 
                               where 
                                 
                                    
                                       C
                                    
                                    
                                       W
                                       S
                                       ,
                                       S
                                       E
                                    
                                 
                               is the “contains” relation between whole spaces and 
                                 s
                                 e
                              ’s (Table A.4).


                        
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 
                                    
                                       E
                                    
                                    
                                       c
                                       _
                                       w
                                       s
                                    
                                 
                              
                           
                         checks an 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                              
                           
                         property. The two desk 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                              
                           
                        ’s in Fig. 15 violate this constraint as there are no whole spaces.


                        
                           Definition 5.6
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       S
                                       
                                          
                                             E
                                          
                                          
                                             p
                                             e
                                             _
                                             w
                                             s
                                          
                                       
                                    
                                 
                              
                           


                           A space element partially enclosing a whole space 
                                 s
                                 
                                    
                                       e
                                    
                                    
                                       p
                                       e
                                       _
                                       w
                                       s
                                    
                                 
                               (Definition 4.7) must partially enclose at least one whole space 
                                 w
                                 s
                              : 
                                 
                                    
                                       ∀
                                       s
                                       
                                          
                                             e
                                          
                                          
                                             p
                                             e
                                             _
                                             w
                                             s
                                          
                                       
                                       ∈
                                       S
                                       
                                          
                                             E
                                          
                                          
                                             p
                                             e
                                             _
                                             w
                                             s
                                          
                                       
                                       ,
                                       ∃
                                       w
                                       s
                                       ∈
                                       W
                                       S
                                       
                                       
                                          [
                                          P
                                          E
                                          
                                             (
                                             s
                                             
                                                
                                                   e
                                                
                                                
                                                   p
                                                   e
                                                   _
                                                   w
                                                   s
                                                
                                             
                                             ,
                                             w
                                             s
                                             )
                                          
                                          ]
                                       
                                       .
                                    
                                 
                              
                           


                        
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 
                                    
                                       E
                                    
                                    
                                       p
                                       e
                                       _
                                       w
                                       s
                                    
                                 
                              
                           
                         checks an 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                         property. All door 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s in Fig. 15 violate this constraint. For an 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                                 ,
                                 
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                         either 
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 
                                    
                                       E
                                    
                                    
                                       c
                                       _
                                       w
                                       s
                                    
                                 
                              
                           
                         or 
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 
                                    
                                       E
                                    
                                    
                                       p
                                       e
                                       _
                                       w
                                       s
                                    
                                 
                              
                           
                         must be satisfied.


                        
                           Definition 5.7
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       S
                                       S
                                    
                                 
                              
                           


                           A subspace 
                                 s
                                 s
                               must be contained in a whole space 
                                 w
                                 s
                              : 
                                 
                                    
                                       ∀
                                       s
                                       s
                                       ∈
                                       S
                                       S
                                       ,
                                       
                                       ∃
                                       w
                                       s
                                       ∈
                                       W
                                       S
                                       
                                       
                                          [
                                          C
                                          
                                             (
                                             w
                                             s
                                             ,
                                             s
                                             s
                                             )
                                          
                                          ]
                                       
                                       ,
                                    
                                 
                               where 
                                 
                                    
                                       C
                                    
                                    
                                       W
                                       S
                                       ,
                                       S
                                       S
                                    
                                 
                               is the “contains” relation between whole spaces and subspaces (Table A.4).


                        
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 S
                              
                           
                         checks a subspace property (Definition 4.3). All subspaces in Fig. 15 violate this constraint.


                        
                           Definition 5.8
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       S
                                       
                                          
                                             S
                                          
                                          
                                             n
                                             _
                                             s
                                             e
                                          
                                       
                                    
                                 
                              
                           


                           A subspace near a space element 
                                 s
                                 
                                    
                                       s
                                    
                                    
                                       n
                                       _
                                       s
                                       e
                                    
                                 
                               (Definition 4.8) must be near at least one space element 
                                 s
                                 e
                              : 
                                 
                                    
                                       ∀
                                       s
                                       
                                          
                                             s
                                          
                                          
                                             n
                                             _
                                             s
                                             e
                                          
                                       
                                       ∈
                                       S
                                       
                                          
                                             S
                                          
                                          
                                             n
                                             _
                                             s
                                             e
                                          
                                       
                                       ,
                                       
                                       ∃
                                       s
                                       e
                                       ∈
                                       S
                                       E
                                       
                                       
                                          [
                                          N
                                          
                                             (
                                             s
                                             
                                                
                                                   s
                                                
                                                
                                                   n
                                                   _
                                                   s
                                                   e
                                                
                                             
                                             ,
                                             s
                                             e
                                             )
                                          
                                          ]
                                       
                                       .
                                    
                                 
                              
                           


                        
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 
                                    
                                       S
                                    
                                    
                                       n
                                       _
                                       s
                                       e
                                    
                                 
                              
                           
                         checks an 
                           s
                           
                              
                                 s
                              
                              
                                 n
                                 _
                                 s
                                 e
                              
                           
                         property. There are three 
                           s
                           
                              
                                 s
                              
                              
                                 n
                                 _
                                 s
                                 e
                              
                           
                        ’s in Fig. 15 that are near two desk 
                           s
                           e
                        ’s. Since there are no desks in Fig. 16, these 
                           s
                           
                              
                                 s
                              
                              
                                 n
                                 _
                                 s
                                 e
                              
                           
                        ’s violate 
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 
                                    
                                       S
                                    
                                    
                                       n
                                       _
                                       s
                                       e
                                    
                                 
                              
                           
                        .

Additional constraints are required for 
                           C
                           e
                           l
                           l
                         subspaces. For example, a set of compatible 
                           C
                           e
                           l
                           l
                         subspaces in a whole space must be disjoint and fill the volume of that whole space. Moreover, the positions of 
                           C
                           e
                           l
                           l
                         subspaces must be disjoint. These constraints are not defined here.

Constraints on 
                           l
                           e
                        ’s do not fully address the consistency of 
                           s
                           r
                        ’s. In Fig. 17, whole space volumes suggest certain adjacencies between whole spaces which are not explicitly included in the given 
                           l
                           e
                         network (missing adjacencies). Conversely, adjacencies may be explicitly included in a given 
                           l
                           e
                         network that are not supported by whole space volumes (extra adjacencies). The latter inconsistencies may occur when whole space volumes are modified.

Constraints on spatial relations detect inconsistencies due to missing or extra 
                           s
                           r
                        ’s. In order to define these constraints, spatial relations in a given 
                           l
                           e
                         network are distinguished from spatial relations that are derived from 
                           l
                           e
                         geometries (Section  4.5). The prime (′) symbol is used to indicate the latter. For example, 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                         and 
                           
                              
                                 A
                              
                              
                                 
                                 W
                                 S
                              
                              
                                 ′
                              
                           
                         are, respectively, the given and derived adjacency relations between whole spaces in a layout. Similarly, whereas set 
                           S
                           R
                           =
                           
                              {
                              s
                              
                                 
                                    r
                                 
                                 
                                    1
                                 
                              
                              ,
                              s
                              
                                 
                                    r
                                 
                                 
                                    2
                                 
                              
                              ,
                              …
                              ,
                              s
                              
                                 
                                    r
                                 
                                 
                                    v
                                 
                              
                              }
                           
                         includes all given spatial relation elements (
                           s
                           r
                        ’s), set 
                           S
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                           =
                           
                              {
                              s
                              
                                 
                                    r
                                 
                                 
                                    
                                    1
                                 
                                 
                                    ′
                                 
                              
                              ,
                              s
                              
                                 
                                    r
                                 
                                 
                                    
                                    2
                                 
                                 
                                    ′
                                 
                              
                              ,
                              …
                              ,
                              s
                              
                                 
                                    r
                                 
                                 
                                    
                                    u
                                 
                                 
                                    ′
                                 
                              
                              }
                           
                         includes all derived spatial relation elements (
                           s
                           
                              
                                 r
                              
                              
                                 ′
                              
                           
                        ’s). In a consistent layout, 
                           S
                           R
                           =
                           S
                           
                              
                                 R
                              
                              
                                 ′
                              
                           
                        .

Missing 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                         elements in a given 
                           l
                           e
                         network are identified by constraint 
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       A
                                    
                                    
                                       
                                       W
                                       S
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                        .


                        
                           Definition 5.9
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       
                                          
                                             A
                                          
                                          
                                             
                                             W
                                             S
                                          
                                          
                                             ′
                                          
                                       
                                    
                                 
                              
                           


                           An 
                                 
                                    
                                       A
                                    
                                    
                                       
                                       W
                                       S
                                    
                                    
                                       ′
                                    
                                 
                               element 
                                 
                                    
                                       a
                                    
                                    
                                       
                                       W
                                       S
                                    
                                    
                                       ′
                                    
                                 
                               must equal an 
                                 
                                    
                                       A
                                    
                                    
                                       W
                                       S
                                    
                                 
                               element 
                                 
                                    
                                       a
                                    
                                    
                                       W
                                       S
                                    
                                 
                              : 
                                 
                                    
                                       ∀
                                       
                                          
                                             a
                                          
                                          
                                             
                                             W
                                             S
                                          
                                          
                                             ′
                                          
                                       
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             
                                             W
                                             S
                                          
                                          
                                             ′
                                          
                                       
                                       ,
                                       ∃
                                       
                                          
                                             a
                                          
                                          
                                             
                                             W
                                             S
                                          
                                       
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             
                                             W
                                             S
                                          
                                       
                                       
                                       
                                          [
                                          
                                             
                                                a
                                             
                                             
                                                
                                                W
                                                S
                                             
                                             
                                                ′
                                             
                                          
                                          =
                                          
                                             
                                                a
                                             
                                             
                                                W
                                                S
                                             
                                          
                                          ]
                                       
                                       .
                                    
                                 
                              
                           

Other missing 
                           s
                           r
                        ’s are identified by constraints 
                           S
                           
                              
                                 C
                              
                              
                                 P
                                 
                                    
                                       B
                                    
                                    
                                       
                                       S
                                       B
                                       E
                                       ,
                                       W
                                       S
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       T
                                    
                                    
                                       
                                       S
                                       B
                                       E
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 P
                                 
                                    
                                       B
                                    
                                    
                                       
                                       S
                                       B
                                       E
                                       ,
                                       S
                                       S
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       A
                                    
                                    
                                       
                                       S
                                       S
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       N
                                    
                                    
                                       
                                       S
                                       E
                                       ,
                                       S
                                       B
                                       E
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       N
                                    
                                    
                                       
                                       S
                                       S
                                       ,
                                       S
                                       E
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       N
                                    
                                    
                                       
                                       S
                                       E
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 P
                                 
                                    
                                       E
                                    
                                    
                                       
                                       S
                                       E
                                       ,
                                       W
                                       S
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                        , and 
                           S
                           
                              
                                 C
                              
                              
                                 P
                                 
                                    
                                       E
                                    
                                    
                                       
                                       S
                                       E
                                       ,
                                       S
                                       S
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                         whose definitions are analogous to that of 
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       A
                                    
                                    
                                       
                                       W
                                       S
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                        .

Extra 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                         elements in a given 
                           l
                           e
                         network are identified by constraint 
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       A
                                    
                                    
                                       W
                                       S
                                    
                                 
                              
                           
                        .


                        
                           Definition 5.10
                           Constraint 
                                 S
                                 
                                    
                                       C
                                    
                                    
                                       
                                          
                                             A
                                          
                                          
                                             W
                                             S
                                          
                                       
                                    
                                 
                              
                           


                           An 
                                 
                                    
                                       A
                                    
                                    
                                       W
                                       S
                                    
                                 
                               element 
                                 
                                    
                                       a
                                    
                                    
                                       W
                                       S
                                    
                                 
                               must equal an 
                                 
                                    
                                       A
                                    
                                    
                                       
                                       W
                                       S
                                    
                                    
                                       ′
                                    
                                 
                               element 
                                 
                                    
                                       a
                                    
                                    
                                       
                                       W
                                       S
                                    
                                    
                                       ′
                                    
                                 
                              : 
                                 
                                    
                                       ∀
                                       
                                          
                                             a
                                          
                                          
                                             W
                                             S
                                          
                                       
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             W
                                             S
                                          
                                       
                                       ,
                                       ∃
                                       
                                          
                                             a
                                          
                                          
                                             
                                             W
                                             S
                                          
                                          
                                             ′
                                          
                                       
                                       ∈
                                       
                                          
                                             A
                                          
                                          
                                             
                                             W
                                             S
                                          
                                          
                                             ′
                                          
                                       
                                       
                                       
                                          [
                                          
                                             
                                                a
                                             
                                             
                                                W
                                                S
                                             
                                          
                                          =
                                          
                                             
                                                a
                                             
                                             
                                                
                                                W
                                                S
                                             
                                             
                                                ′
                                             
                                          
                                          ]
                                       
                                       .
                                    
                                 
                              
                           

Other extra 
                           s
                           r
                        ’s are identified by constraints 
                           S
                           
                              
                                 C
                              
                              
                                 P
                                 
                                    
                                       B
                                    
                                    
                                       S
                                       B
                                       E
                                       ,
                                       W
                                       S
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       T
                                    
                                    
                                       S
                                       B
                                       E
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 P
                                 
                                    
                                       B
                                    
                                    
                                       S
                                       B
                                       E
                                       ,
                                       S
                                       S
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       A
                                    
                                    
                                       S
                                       S
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       N
                                    
                                    
                                       S
                                       E
                                       ,
                                       S
                                       B
                                       E
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       N
                                    
                                    
                                       S
                                       S
                                       ,
                                       S
                                       E
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       N
                                    
                                    
                                       
                                       S
                                       E
                                    
                                 
                              
                           
                           ,
                           S
                           
                              
                                 C
                              
                              
                                 P
                                 
                                    
                                       E
                                    
                                    
                                       
                                       S
                                       E
                                       ,
                                       W
                                       S
                                    
                                 
                              
                           
                        , and 
                           S
                           
                              
                                 C
                              
                              
                                 P
                                 
                                    
                                       E
                                    
                                    
                                       
                                       S
                                       E
                                       ,
                                       S
                                       S
                                    
                                 
                              
                           
                         whose definitions are analogous to that of 
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       A
                                    
                                    
                                       W
                                       S
                                    
                                 
                              
                           
                        .

Designers may selectively evaluate spatial constraints on 
                           l
                           e
                        ’s and 
                           s
                           r
                        ’s to detect and manually resolve spatial inconsistencies in a layout. As manual inconsistency resolution is a time consuming and possibly error prone task in layouts with many 
                           l
                           e
                        ’s, semi- or fully-automated inconsistency resolution appears desirable. It may be particularly useful in combination with other layout operations. For example, an inconsistency resolution operation could be applied to a spatially inconsistent layout returned by the 
                           s
                           e
                           l
                           e
                           c
                           t
                         operation. Such an operation is described in this section. It has the signature 
                           
                              
                                 L
                                 a
                                 y
                                 o
                                 u
                                 t
                                 
                                 r
                                 e
                                 s
                                 o
                                 l
                                 v
                                 e
                                 _
                                 i
                                 n
                                 c
                                 o
                                 n
                                 s
                                 i
                                 s
                                 t
                                 e
                                 n
                                 c
                                 i
                                 e
                                 s
                                 
                                 
                                    (
                                    L
                                    a
                                    y
                                    o
                                    u
                                    t
                                    
                                    L
                                    )
                                 
                                 ,
                              
                           
                         where 
                           L
                         is the argument layout which may include spatial inconsistencies. A layout that is already consistent is not affected by 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                        . The operation evaluates spatial constraints defined in Sections  5.2 and 5.3 to detect inconsistencies in 
                           L
                        . It makes no assumptions regarding kind and distribution of these inconsistencies. Constraints are evaluated incrementally in the order in which they are listed in Table 3
                        
                        . A user may choose to evaluate all or only a subset of the constraints in this list. She may further decide to resolve inconsistencies in semi- or fully-automated mode. The former may be desirable, for example, in case of inconsistent whole spaces and 
                           s
                           e
                        ’s, as described below. The constraint evaluation order reflects implicit dependencies between 
                           l
                           e
                        ’s. Constraints on whole spaces are evaluated first because all other 
                           l
                           e
                        ’s are dependent on whole spaces. Constraints on 
                           s
                           b
                           e
                        ’s, 
                           s
                           e
                        ’s and subspaces are evaluated subsequently. Constraints on spatial relations are evaluated once respective consistent 
                           l
                           e
                        ’s are known. For simplicity, only constraints on base spatial relations are included in Table 3. Inconsistencies of derived spatial relations (Fig. 11), such as the 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                         relation, may be resolved when consistent base relations are known. Similarly, resolution of inconsistencies due to multiplicity constraints in the 
                           l
                           e
                         geometry schema (Fig. 2) is not included Table 3. Layout elements that are inconsistent due to multiplicity constraints are removed from a layout. For example, an 
                           s
                           b
                           e
                         that does not have a face is removed. As an exception, a subspace that does not have a volume is not removed unless it violates other subspace constraints. Instead, the missing volume is derived by 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                        , as described below.

Inconsistencies detected by spatial constraints are typically resolved by removal or insertion of 
                           l
                           e
                        ’s and 
                           s
                           r
                        ’s. By default, overlapping whole spaces and 
                           s
                           e
                        ’s are removed (
                           1
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 1
                              
                           
                         and 
                           7
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 E
                                 ,
                                 1
                              
                           
                        , Table 3). However, alternative resolution policies are desirable. For example, one whole space or 
                           s
                           e
                         may be removed while the other is preserved. This could be done based on criteria such as area, or users may be prompted to make decisions. Users may choose resolution policies prior to invoking the 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         operation.

If no whole spaces remain after resolution of inconsistencies detected y 
                           1
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 1
                              
                           
                        , Table 3, then 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         returns 
                           L
                         as an empty layout. An empty layout is a layout with an empty 
                           l
                           e
                         network, that is, 
                           L
                           E
                           N
                           =
                           
                              (
                              ∅
                              ,
                              ∅
                              )
                           
                        . It is considered as a consistent layout. If 
                           L
                         is non-empty, then 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         continues (2. 
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 2
                              
                           
                        , Table 3). Subspaces inserted due to 
                           8
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 E
                                 ,
                                 2
                              
                           
                         have initially no volumes. As the consistency of volumes of existing subspaces is unknown, all subspace volumes are derived based on their volume types, as described in Section  4.3. This is done between 
                           11
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 S
                                 
                                    
                                       S
                                    
                                    
                                       n
                                       _
                                       s
                                       e
                                    
                                 
                              
                           
                         and 
                           12
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       N
                                    
                                    
                                       
                                       S
                                       S
                                       ,
                                       S
                                       E
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                        .

The 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         operation is illustrated with an example. Figs. 18–21
                        
                        
                        
                         show four layouts selected from a layout 
                           A
                         at different stages of inconsistency resolution. The inconsistent layout 
                           A
                         (Fig. 18) is passed to 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         and returned as a consistent layout (Fig. 21). Inconsistencies detected by constraints on 
                           l
                           e
                        ’s are labeled in the figures. 
                           L
                           e
                        ’s and 
                           s
                           r
                        ’s are selected from 
                           A
                         as it is modified by 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                        .


                        Fig. 18 shows 
                           A
                         in its original state prior to inconsistency resolution. All subspaces are 
                           G
                           e
                           o
                           d
                           e
                           s
                           i
                           c
                           V
                           o
                           r
                           o
                           n
                           o
                           i
                         subspaces (Section  4.3) and must be near an 
                           s
                           e
                         (
                           s
                           
                              
                                 s
                              
                              
                                 n
                                 _
                                 s
                                 e
                              
                           
                        ’s). Suppose that a whole space 
                           
                              (
                              w
                              
                                 
                                    s
                                 
                                 
                                    1
                                 
                              
                              )
                           
                        , a desk 
                           s
                           e
                           
                           
                              (
                              s
                              
                                 
                                    e
                                 
                                 
                                    1
                                 
                              
                              )
                           
                         and a door 
                           s
                           e
                           
                           
                              (
                              s
                              
                                 
                                    e
                                 
                                 
                                    2
                                 
                              
                              )
                           
                         have been inserted in 
                           A
                        , thereby introducing spatial inconsistencies. Constraints on whole spaces are evaluated first. All whole spaces are disjoint (
                           1
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 1
                              
                           
                        , Table 3), that is, 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         will return a non-empty layout. Four 
                           s
                           b
                           e
                        ’s are inserted in 
                           A
                         because whole space 
                           w
                           
                              
                                 s
                              
                              
                                 1
                              
                           
                         is not bounded by 
                           s
                           b
                           e
                        ’s (
                           2
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 2
                              
                           
                        , Figs. 18 and 19).

Four missing 
                           
                              
                                 T
                              
                              
                                 S
                                 B
                                 E
                              
                           
                         elements are inserted once consistent 
                           s
                           b
                           e
                        ’s are known (
                           4
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 
                                    
                                       T
                                    
                                    
                                       
                                       S
                                       B
                                       E
                                    
                                    
                                       ′
                                    
                                 
                              
                           
                        , Figs. 19 and 20 — inconsistencies detected by spatial relation constraints are not labeled in the figures). All 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s partially enclose at least one whole space 
                           
                              (
                              5
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    S
                                    
                                       
                                          E
                                       
                                       
                                          p
                                          e
                                          _
                                          w
                                          s
                                       
                                    
                                 
                              
                              )
                           
                        , and all 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                              
                           
                        ’s are contained in a whole space 
                           
                              (
                              6
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    S
                                    
                                       
                                          E
                                       
                                       
                                          c
                                          _
                                          w
                                          s
                                       
                                    
                                 
                              
                              )
                           
                        . Similarly, all 
                           s
                           e
                        ’s are disjoint 
                           
                              (
                              7
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    S
                                    
                                       
                                          E
                                       
                                       
                                          1
                                       
                                    
                                 
                              
                              )
                           
                        . Four missing subspaces are inserted because a desk 
                           s
                           e
                           
                           
                              (
                              s
                              
                                 
                                    e
                                 
                                 
                                    1
                                 
                              
                              )
                           
                         and two door 
                           s
                           e
                        ’s (
                           s
                           
                              
                                 e
                              
                              
                                 2
                              
                           
                         and 
                           s
                           
                              
                                 e
                              
                              
                                 3
                              
                           
                        ) do not have all subspaces nearby that are feasible based on their 
                           s
                           s
                           t
                        ’s and contexts 
                           
                              (
                              8
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    S
                                    E
                                    ,
                                    2
                                 
                              
                              )
                           
                        . Two missing 
                           
                              
                                 N
                              
                              
                                 
                                 S
                                 E
                                 ,
                                 S
                                 B
                                 E
                              
                           
                         elements are inserted once consistent space elements 
                           s
                           
                              
                                 e
                              
                              
                                 2
                              
                           
                         and 
                           s
                           
                              
                                 e
                              
                              
                                 3
                              
                           
                         are known 
                           
                              (
                              9
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          
                                          S
                                          E
                                          ,
                                          S
                                          B
                                          E
                                       
                                       
                                          ′
                                       
                                    
                                 
                              
                              )
                           
                        .

Each subspace in 
                           A
                         is contained in a whole space 
                           
                              (
                              10
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    S
                                    S
                                 
                              
                              )
                           
                         and near an 
                           s
                           e
                           
                           
                              (
                              11
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    S
                                    
                                       
                                          S
                                       
                                       
                                          n
                                          _
                                          s
                                          e
                                       
                                    
                                 
                              
                              )
                           
                        . Subspace volumes are derived next (Figs. 20 and 21). Subspace volumes in whole space 
                           w
                           
                              
                                 s
                              
                              
                                 2
                              
                           
                         are unchanged. They are derived because their consistency is initially unknown. Subspace volumes in whole space 
                           w
                           
                              
                                 s
                              
                              
                                 3
                              
                           
                         are created or modified because new subspaces have been inserted. One subspace volume is created in whole space 
                           w
                           
                              
                                 s
                              
                              
                                 1
                              
                           
                        . The volume equals that of 
                           w
                           
                              
                                 s
                              
                              
                                 1
                              
                           
                        . Four missing 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         elements are inserted that relate inserted subspaces to space elements 
                           s
                           
                              
                                 e
                              
                              
                                 1
                              
                           
                           ,
                           s
                           
                              
                                 e
                              
                              
                                 2
                              
                           
                        , and 
                           s
                           
                              
                                 e
                              
                              
                                 3
                              
                           
                           
                           
                              (
                              12
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    
                                       
                                          N
                                       
                                       
                                          
                                          S
                                          S
                                          ,
                                          S
                                          E
                                       
                                       
                                          ′
                                       
                                    
                                 
                              
                              )
                           
                        . Seven missing 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         elements are inserted in whole space 
                           w
                           
                              
                                 s
                              
                              
                                 3
                              
                           
                        , and an extra 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         element is removed 
                           
                              (
                              13
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    
                                       
                                          A
                                       
                                       
                                          
                                          S
                                          S
                                       
                                       
                                          ′
                                       
                                    
                                 
                              
                              ,
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    
                                       
                                          A
                                       
                                       
                                          S
                                          S
                                       
                                    
                                 
                              
                              )
                           
                        .

The definition of the layout schema extended by spatial constraints and the description of the 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         operation have been used as a specification for the design and implementation of a layout modeling system (LMS) prototype. The system architecture is shown in Fig. 22
                        . Users edit layouts consisting of whole spaces and 
                           s
                           e
                        ’s in a BIM architectural design system (BIM-ADS). They may also define 
                           s
                           e
                         and subspace types in BIM-ADS. Layouts created in BIM-ADS are inconsistent because, for example, they do not include 
                           s
                           r
                        ’s. Users may thus invoke the 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         operation in LMS to resolve spatial inconsistencies. Geometry data structures (Fig. 2) and functions (Table 1) in LMS are provided by a GME. Layouts are visualized in BIM-ADS. Additional operations such as a 
                           s
                           e
                           l
                           e
                           c
                           t
                         operation are envisioned to query and update layouts  [5,6]. The 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         operation may be used to process operations that return consistent layouts.

@&#IMPLEMENTATION@&#

The LMS prototype has been implemented in C++  [42]. Acis R22/SP1 and Autodesk Architecture 2012 (AA) have been used as, respectively, GME and BIM-ADS  [40,43]. AA has been chosen because of its comprehensive space modeling capabilities. Moreover, it uses the Acis modeler as GME, which facilitates data exchange with LMS.

Classes in the layout schema are implemented as C++ classes. 
                           G
                           e
                           o
                           d
                           e
                           s
                           i
                           c
                           V
                           o
                           r
                           o
                           n
                           o
                           i
                         subspaces were chosen for implementation because of their relevance for many design domains. As reusable implementations of three-dimensional, geodesic Voronoi diagrams, from which the volumes of 
                           G
                           e
                           o
                           d
                           e
                           s
                           i
                           c
                           V
                           o
                           r
                           o
                           n
                           o
                           i
                         subspaces are derived, are currently not available  [44], volumes are instead derived in the system prototype from three-dimensional, Euclidean Voronoi diagrams that are generated in CGAL  [45]. However, subspaces in concave whole spaces may not be modeled accurately with this method.

Spatial constraints are implemented as functions that detect inconsistent 
                           l
                           e
                        ’s and 
                           s
                           r
                        ’s. Clash detection functions in Acis are used to derive spatial relations (Table 1). The implementation of the 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         operation minimizes redundant geometry processing. That is, certain clash detection results are recorded for reuse later on. For example, when checking for overlapping whole space volumes (
                           1
                           .
                           
                           S
                           
                              
                                 C
                              
                              
                                 W
                                 S
                                 ,
                                 1
                              
                           
                        , Table 3), data about touching volume and face pairs are recorded. These data are used to derive the 
                           
                              
                                 T
                              
                              
                                 S
                                 B
                                 E
                              
                           
                         relation 
                           
                              (
                              5
                              .
                              
                              S
                              
                                 
                                    C
                                 
                                 
                                    
                                       
                                          T
                                       
                                       
                                          
                                          S
                                          B
                                          E
                                       
                                       
                                          ′
                                       
                                    
                                 
                              
                              ,
                              S
                              
                                 
                                    C
                                 
                                 
                                    
                                       
                                          T
                                       
                                       
                                          S
                                          B
                                          E
                                       
                                    
                                 
                              
                              )
                           
                        . Similarly, whole spaces record related subspaces and 
                           s
                           e
                        ’s, and 
                           s
                           e
                        ’s related subspaces.

@&#OVERVIEW@&#

The LMS prototype has been used to create example layouts for building design and product design. In the building design example (Section  7.2), layouts of a floor of an office building are derived for pedestrian circulation, lighting, and other design domains. In the product design example (Section  7.3), a layout is derived for air circulation design of a rack server cabinet. Limitations of the examples and ideas for extensions are discussed (Section  7.4).

A floor of an 19th century apartment building that has been converted into offices has been modeled using the LMS prototype. The building features two semi-circular staircases, two light wells, and a U-shaped courtyard (Fig. 23
                        (a)). A layout 
                           A
                         with 6 external and 47 internal whole spaces and 386 
                           s
                           e
                        ’s was created in AA. Wall and luminaire 
                           s
                           e
                         geometries are shown in Fig. 23(a), top, and geometries of whole spaces and window, door, and desk 
                           s
                           e
                        ’s in Fig. 23(a), bottom. Inconsistencies in 
                           A
                         include missing 
                           s
                           b
                           e
                        ’s and 
                           s
                           r
                        ’s. Moreover, no subspaces are present in 
                           A
                         although door and desk 
                           s
                           e
                        ’s should have nearby subspaces according to their 
                           s
                           e
                           t
                        ’s and 
                           s
                           s
                           t
                        ’s (Fig. 23(a), left). All 
                           s
                           s
                           t
                        ’s have a 
                           G
                           e
                           o
                           d
                           e
                           s
                           i
                           c
                           V
                           o
                           r
                           o
                           n
                           o
                           i
                         volume type. Note that window and wall 
                           s
                           e
                           t
                        ’s do not have 
                           s
                           s
                           t
                        ’s.


                        Fig. 23(b)–(d) includes layouts that are derived from 
                           A
                         with the following layout operation expression, which is composed of 
                           s
                           e
                           l
                           e
                           c
                           t
                         and 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         operations: 
                           
                              (7.1)
                              
                                 s
                                 e
                                 l
                                 e
                                 c
                                 
                                    
                                       t
                                    
                                    
                                       
                                          
                                             P
                                          
                                          
                                             L
                                             
                                                
                                                   E
                                                
                                                
                                                   2
                                                
                                             
                                          
                                       
                                       ,
                                       
                                       
                                          
                                             P
                                          
                                          
                                             S
                                             
                                                
                                                   R
                                                
                                                
                                                   2
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                 
                                    (
                                    r
                                    e
                                    s
                                    o
                                    l
                                    v
                                    e
                                    _
                                    i
                                    n
                                    c
                                    o
                                    n
                                    s
                                    i
                                    s
                                    t
                                    e
                                    n
                                    c
                                    i
                                    e
                                    s
                                    
                                    
                                       (
                                       s
                                       e
                                       l
                                       e
                                       c
                                       
                                          
                                             t
                                          
                                          
                                             
                                                
                                                   P
                                                
                                                
                                                   L
                                                   
                                                      
                                                         E
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                             
                                             ,
                                             
                                             
                                                
                                                   P
                                                
                                                
                                                   S
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                             
                                             =
                                             ∅
                                          
                                       
                                       
                                       
                                          (
                                          A
                                          )
                                       
                                       )
                                    
                                    )
                                 
                                 .
                              
                           
                        
                     

First, whole spaces and 
                           s
                           e
                        ’s that are of interest are selected with filter 
                           
                              
                                 P
                              
                              
                                 L
                                 
                                    
                                       E
                                    
                                    
                                       1
                                    
                                 
                              
                           
                        . Second, 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         inserts missing 
                           s
                           b
                           e
                        ’s and 
                           s
                           r
                        ’s into the layout returned by 
                           s
                           e
                           l
                           e
                           c
                           t
                        . Similarly, missing subspaces are inserted based on 
                           s
                           e
                           t
                        ’s of selected 
                           s
                           e
                        ’s and related 
                           s
                           s
                           t
                        ’s. Third, whole spaces or subspaces, 
                           s
                           e
                        ’s, and 
                           s
                           r
                        ’s that are of interest are selected from the consistent layout returned by 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         with filters 
                           
                              
                                 P
                              
                              
                                 L
                                 
                                    
                                       E
                                    
                                    
                                       2
                                    
                                 
                              
                           
                         and 
                           
                              
                                 P
                              
                              
                                 S
                                 
                                    
                                       R
                                    
                                    
                                       2
                                    
                                 
                              
                           
                        . All layouts have been derived by 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                         in fully-automated mode (Section  5.4). As 
                           s
                           e
                           l
                           e
                           c
                           t
                         is not implemented yet in the LMS prototype, selections were done manually in AA.

The first layout derived from 
                           A
                         with operation expression (7.1) and filters in Fig. 23(b) includes whole spaces and the 
                           
                              
                                 A
                              
                              
                                 W
                                 S
                              
                           
                         relation. Volumes of external whole spaces are not shown for improved visualization. The weight of each whole space corresponds to the distance to the nearest external whole space. Path length (number of 
                           s
                           r
                         edges) is used as distance measure. Eight internal whole spaces have weight 2 and are thus not adjacent to the building perimeter.

The second layout derived from 
                           A
                         with different filters is a pedestrian circulation layout (Fig. 23(c)). It includes subspaces, door and desk 
                           s
                           e
                        ’s, and 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         relations. The weight of an 
                           s
                           r
                         in the 
                           l
                           e
                         network corresponds to the Euclidean distance between related 
                           l
                           e
                        ’s. Path weight (sum of 
                           s
                           r
                         edge weights) is used as distance measure. The distance from the most remote workplace to the nearest stair is 23.3 m.

The third layout derived from 
                           A
                         is a lighting layout that includes whole spaces, window and luminaire 
                           s
                           e
                        ’s, and the 
                           
                              
                                 N
                              
                              
                                 S
                                 E
                              
                           
                         relation (Fig. 23(d)). The weight of each 
                           s
                           e
                         corresponds to the distance to the nearest window 
                           s
                           e
                        . In order to achieve uniform lighting conditions in a whole space, luminaires with weight 2 may have higher output than those with weight 1 because they are more distant from windows.


                        Fig. 24
                         includes further layouts that are derived from 
                           A
                        . The first layout is a natural air circulation layout that includes whole spaces, window and door 
                           s
                           e
                        ’s, and the 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 W
                                 S
                              
                           
                         relation (Fig. 24(a)). Selected doors are less than 0.9 m wide. That is, main office entrance doors are not available for natural ventilation. The weight of each whole space 
                           w
                           s
                         corresponds to the length of the shortest path between two (distinct) external whole spaces that passes through 
                           w
                           s
                        . Internal whole spaces with weight 6 or less may be considered as suitable for cross ventilation.

Layouts in Fig. 24(c) and (e) are thermal and fire zone layouts. Whole spaces in these layouts are aggregations of whole spaces in, respectively, layout 
                           B
                         in Fig. 24(b), and layout 
                           D
                         in Fig. 24(d). The aggregation operation that is used to merge whole spaces in a layout has the signature 
                           
                              
                                 L
                                 a
                                 y
                                 o
                                 u
                                 t
                                 
                                 a
                                 g
                                 g
                                 r
                                 e
                                 g
                                 a
                                 t
                                 
                                    
                                       e
                                    
                                    
                                       
                                          
                                             P
                                          
                                          
                                             S
                                             E
                                          
                                       
                                    
                                 
                                 
                                 
                                    (
                                    L
                                    a
                                    y
                                    o
                                    u
                                    t
                                    
                                    L
                                    )
                                 
                                 ,
                              
                           
                         where 
                           
                              –
                              
                                 
                                    L
                                  is the argument layout whose whole spaces are aggregated,


                                 
                                    
                                       
                                          P
                                       
                                       
                                          S
                                          E
                                       
                                    
                                  is a filter on 
                                    s
                                    e
                                 ’s in 
                                    L
                                 .

Thermal and fire zone layouts are derived from, respectively, layouts 
                           B
                         and 
                           D
                         with the following layout operation expression: 
                           
                              (7.2)
                              
                                 s
                                 e
                                 l
                                 e
                                 c
                                 
                                    
                                       t
                                    
                                    
                                       
                                          
                                             P
                                          
                                          
                                             L
                                             
                                                
                                                   E
                                                
                                                
                                                   3
                                                
                                             
                                          
                                       
                                       ,
                                       
                                       
                                          
                                             P
                                          
                                          
                                             S
                                             
                                                
                                                   R
                                                
                                                
                                                   3
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                 
                                    (
                                    r
                                    e
                                    s
                                    o
                                    l
                                    v
                                    e
                                    _
                                    i
                                    n
                                    c
                                    o
                                    n
                                    s
                                    i
                                    s
                                    t
                                    e
                                    n
                                    c
                                    i
                                    e
                                    s
                                    
                                    
                                       (
                                       a
                                       g
                                       g
                                       r
                                       e
                                       g
                                       a
                                       t
                                       
                                          
                                             e
                                          
                                          
                                             
                                                
                                                   P
                                                
                                                
                                                   S
                                                   E
                                                
                                             
                                          
                                       
                                       
                                       
                                          (
                                          B
                                          
                                          o
                                          r
                                          
                                          D
                                          )
                                       
                                       )
                                    
                                    )
                                 
                                 .
                              
                           
                        
                     

First, whole spaces in 
                           B
                         or 
                           D
                         are aggregated, as described above. Second, inconsistencies in the layout returned by 
                           a
                           g
                           g
                           r
                           e
                           g
                           a
                           t
                           e
                         are resolved. Third, whole spaces and 
                           s
                           e
                        ’s and 
                           s
                           r
                        ’s that are of interest are selected from the consistent layout returned by 
                           r
                           e
                           s
                           o
                           l
                           v
                           e
                           _
                           i
                           n
                           c
                           o
                           n
                           s
                           i
                           s
                           t
                           e
                           n
                           c
                           i
                           e
                           s
                        . The 
                           a
                           g
                           g
                           r
                           e
                           g
                           a
                           t
                           e
                         operation was performed manually in AA as it is not implemented yet in the LMS prototype.

Layout 
                           B
                         includes wall 
                           s
                           e
                        ’s that partially enclose whole spaces (Fig. 24(b)). In contrast to door 
                           s
                           e
                        ’s, which partially enclose one or two whole spaces, certain walls may partially enclose multiple whole spaces. Walls with thickness greater than 0.2 m are targeted by filter 
                           
                              
                                 P
                              
                              
                                 S
                                 E
                              
                           
                         in the 
                           a
                           g
                           g
                           r
                           e
                           g
                           a
                           t
                           e
                         operation. That is, thinner walls, whole spaces, and remaining 
                           P
                           
                              
                                 E
                              
                              
                                 S
                                 E
                                 ,
                                 W
                                 S
                              
                           
                         elements are part of the subnetwork of 
                           B
                        ’s 
                           l
                           e
                         network that is used to determine sets of connected whole spaces to be merged. Thin walls are inconsistent in the layout returned by 
                           a
                           g
                           g
                           r
                           e
                           g
                           a
                           t
                           e
                         because they are 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s but do not partially enclose whole spaces any longer. Instead, they are contained in merged whole spaces. The resulting thermal zone layout thus has large whole spaces that are enclosed by thick walls (Fig. 24(c)). Thin walls may be purposely omitted for thermal calculations e.g. because their thermal resistance may be negligible.

Layout 
                           D
                         includes door 
                           s
                           e
                        ’s that partially enclose internal whole spaces (Fig. 24(d)). Main office entrance doors are targeted by 
                           
                              
                                 P
                              
                              
                                 S
                                 E
                              
                           
                         in the 
                           a
                           g
                           g
                           r
                           e
                           g
                           a
                           t
                           e
                         operation. All other doors are inconsistent in the layout returned by 
                           a
                           g
                           g
                           r
                           e
                           g
                           a
                           t
                           e
                         and thus not included in the fire zone layout (Fig. 24(e)). One fire zone whole space has only one main entrance door.

A significant challenge in the design of electronic systems concerns the removal of heat generated by components. A typical solution is forced circulation of cool air through components or spaces in between. Flow network models (FNMs) may be used in the concept or design phase of an electronic system to model air circulation [46]. Air flow resistances of components such as fans, heat sinks, CPUs, or air flow turns are modeled as edge weights in an FNM. Air flow may diverge or converge at space nodes.

The design of a rack server cabinet is chosen to demonstrate how network-based space layouts could support preliminary air circulation analysis and the creation of FNMs. The cabinet provides an enclosure for rack servers that are stacked on top of each other. In order to cool the servers, air is circulated in the cabinet by fans that are embedded in its rear door as well as server fans (Fig. 25
                        (a),  [47]). Fans extract hot air from the servers and move it downwards in an air duct to the inlet of an air-to-water heat exchanger located at the bottom of the cabinet. Cool air exits the heat exchanger through an outlet where it is redirected upwards into the space between the front door and the servers.

A layout 
                           A
                         of the server cabinet has been created with the LMS prototype (Fig. 25(a)). Server containers, air duct, heat exchanger, and air spaces in front of and behind the servers are modeled as whole spaces. In contrast to previous examples, cabinet and server component 
                           s
                           e
                        ’s have volumes. For reasons of visualization, only components of the top server are shown in Fig. 25(a). The other servers have the same component layout. Spatial inconsistencies in 
                           A
                         include missing 
                           s
                           r
                        ’s and subspaces.

An air circulation layout is derived from layout 
                           A
                         with operation expression (7.1) (Fig. 25(b)). In addition to whole spaces and 
                           s
                           e
                        ’s from 
                           A
                        , the air circulation layout includes subspaces and 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         relations. Subspace volumes are not shown in Fig. 25(b) to improve visualization. Only 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         elements with line-of-sight between related subspaces (Definition 4.22) are selected. In other words, 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         elements that intersect with 
                           s
                           e
                         volumes are not selected. This ensures that only 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         elements pass through 
                           s
                           e
                        ’s. Subspaces that are near the two radial cabinet fan 
                           s
                           
                              
                                 e
                              
                              
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s are arranged in radial fashion. The air outlet is an example for an 
                           s
                           e
                         that is both contained in and encloses a whole space (
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                                 ,
                                 
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        , see comments for Definition 4.7). On the one hand, the outlet is contained in the whole space of the heat exchanger. On the other hand, it can be viewed as partially enclosing that space. The latter property allows the outlet to have a nearby subspace that is contained in the whole space of the air space in front of the servers. All 
                           s
                           e
                        ’s in whole spaces that have nearby subspaces in other whole spaces are modeled as 
                           s
                           
                              
                                 e
                              
                              
                                 c
                                 _
                                 w
                                 s
                                 ,
                                 
                                 p
                                 e
                                 _
                                 w
                                 s
                              
                           
                        ’s.

The air circulation layout is used for a preliminary analysis of the rack server cabinet design. Subspace weights in Fig. 25(b) correspond to the number of incident 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         elements. For example, the maximum weights of subspaces that are near the two radial cabinet fans are, respectively, 8 and 10, suggesting convergence (or divergence, dependent on air flow direction) of several flow paths and thus a risk of air circulation bottlenecks in the air space behind the servers. Compared with the upper fan, the lower fan with weight 10 may have to run at a slightly higher speed in order to process the higher air volume expected from the servers.

The air circulation layout in Fig. 25(b) could be a first step towards deriving an FNM layout whose 
                           l
                           e
                         network could be used for detailed flow network analysis. For example, it could be modified to model air flow direction.

@&#DISCUSSION@&#

The above examples illustrate the applicability of network-based space layouts in building and product design. Domain-specific layouts were derived by selection of 
                           l
                           e
                        ’s and 
                           s
                           r
                        ’s. In case of the rack server cabinet layout, a new “transfers air to” relation seems desirable that may be derived from 
                           
                              
                                 A
                              
                              
                                 S
                                 S
                              
                           
                         and 
                           
                              
                                 N
                              
                              
                                 S
                                 S
                                 ,
                                 S
                                 E
                              
                           
                         relations. Such a relation would facilitate the modeling of flow directions and resistances in an FNM layout. Similarly, a “provides access to” relation may be defined to derive pedestrian circulation networks that support the representation of horizontal as well as vertical circulation spaces and elements such as stairs. In other words, selection of 
                           l
                           e
                        ’s and 
                           s
                           r
                        ’s combined with domain-specific 
                           l
                           e
                        ’s and derived spatial relations could further expand the application potential of network-based space layouts.

In the examples, 
                           l
                           e
                         network analysis is based on shortest path algorithms and simple metrics. Other network algorithms may be useful for design analysis. For example, flow directions of “transfers air to” edges in the server cabinet layout’s 
                           l
                           e
                         network may be derived by maxflow algorithms based on known flow directions e.g. of fans  [48]. Graph and network metrics established in space syntax research may be applied to 
                           l
                           e
                         networks as well  [49,50].

@&#CONCLUSIONS@&#

A schema for network-based space layouts has been defined that extends the notion of modeling spatial relations as graphs or networks in space layout representations. Layout examples suggest that the schema may be sufficiently general to support diverse space modeling needs across building and product design domains. Spatial consistency of layouts, which is a prerequisite for reliable layout element network analysis and useful for layout operations, has been addressed by extending the layout schema with spatial constraints and an inconsistency resolution operation. Proof-of-concept implementations of the schema extended by spatial constraints and the inconsistency resolution operation have been realized in a layout modeling system prototype and demonstrated with realistic examples.

Further work is necessary to ensure the formal correctness and extend the scope of the layout schema. Formal definitions of spatial relations have been proposed, however, the sufficiency of these definitions for all conceivable two- and three-dimensional spatial configurations has not been proven. In order to improve data exchange between BIM-ADS and LMS, the layout kernel schema may be extended by associating layout element classes with corresponding classes in the IFC schema and their property sets. For similar reasons, coverage of CSG and sweep solid representations is desirable in the geometry schema.

In addition to addressing these issues, as well as those raised in Sections  4.7 and 7.4, the definition of layout operations is seen as an important area for future work. Initial ideas for such operations have been outlined in  [5,6]. For example, variants of 
                        s
                        e
                        l
                        e
                        c
                        t
                      and 
                        a
                        g
                        g
                        r
                        e
                        g
                        a
                        t
                        e
                      operations as well as binary operations that combine pairs of layouts into single layouts are conceivable. Other operations may facilitate the definition of spatial relations (such as containment relations) between layout elements in different layouts. Eventually, a comprehensive set of layout operations or layout algebra may enable designers to effectively model multiple spatial abstraction levels and domain-specific spatial views of buildings  [51].

@&#ACKNOWLEDGMENTS@&#

This work was supported by grant Austrian Science Fund (FWF): P22208-N22. The author thanks Ramesh Krishnamurti and the anonymous reviewers for their suggestions which have strengthened the paper significantly. He thanks Milos Sipetic and Filip Petrushevski for interesting discussions and technical support to implement the system prototype.

Spatial relations are defined in this appendix that are used in definitions of spatial relations and constraints in Sections  4.5 and 5.2. These relations are implicit, that is, they are not modeled in an 
                        l
                        e
                      network.


                     Table A.4 provides definitions of containment and overlap relations. Note that 
                        s
                        e
                      and subspace positions are considered as sufficient to determine 
                        
                           
                              C
                           
                           
                              W
                              S
                              ,
                              S
                              E
                           
                        
                      and 
                        
                           
                              C
                           
                           
                              W
                              S
                              ,
                              S
                              S
                           
                        
                      relations.

The following two spatial relations involve 
                        S
                        B
                        E
                      and 
                        S
                        S
                      power sets, 
                        P
                        
                           (
                           S
                           B
                           E
                           )
                        
                      and 
                        P
                        
                           (
                           S
                           S
                           )
                        
                     . 
                        
                           
                              B
                           
                           
                              P
                              
                                 (
                                 S
                                 B
                                 E
                                 )
                              
                              ,
                              W
                              S
                           
                        
                      is the “bounds” relation between sets of 
                        s
                        b
                        e
                     ’s and whole spaces (Fig. A.26
                     ).


                     
                        Definition A.1
                        Relation 
                              
                                 
                                    B
                                 
                                 
                                    P
                                    
                                       (
                                       S
                                       B
                                       E
                                       )
                                    
                                    ,
                                    W
                                    S
                                 
                              
                           
                        


                        A space boundary element set 
                              S
                              B
                              
                                 
                                    E
                                 
                                 
                                    i
                                 
                              
                            in 
                              P
                              
                                 (
                                 S
                                 B
                                 E
                                 )
                              
                            bounds a whole space 
                              w
                              s
                           
                           
                              
                                 1.
                                 if each space boundary element 
                                       s
                                       b
                                       
                                          
                                             e
                                          
                                          
                                             1
                                          
                                       
                                     in 
                                       S
                                       B
                                       
                                          
                                             E
                                          
                                          
                                             i
                                          
                                       
                                     partially bounds 
                                       w
                                       s
                                    , and

if there is no face 
                                       f
                                     which partially bounds the 
                                       w
                                       s
                                     volume but is not referenced by any space boundary element 
                                       s
                                       b
                                       
                                          
                                             e
                                          
                                          
                                             2
                                          
                                       
                                     in 
                                       S
                                       B
                                       
                                          
                                             E
                                          
                                          
                                             i
                                          
                                       
                                    :


                     
                        
                           
                              N
                           
                           
                              P
                              
                                 (
                                 S
                                 S
                                 )
                              
                              ,
                              S
                              E
                           
                        
                      is the “is near” relation between sets of subspaces and 
                        s
                        e
                     ’s (Fig. A.27
                     ).


                     
                        Definition A.2
                        Relation 
                              
                                 
                                    N
                                 
                                 
                                    P
                                    
                                       (
                                       S
                                       S
                                       )
                                    
                                    ,
                                    S
                                    E
                                 
                              
                           
                        


                        A subspace set 
                              S
                              
                                 
                                    S
                                 
                                 
                                    i
                                 
                              
                            in 
                              P
                              
                                 (
                                 S
                                 S
                                 )
                              
                            is near a space element 
                              s
                              e
                           
                           
                              
                                 1.
                                 if 
                                       S
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                     is non-empty and each subspace 
                                       s
                                       
                                          
                                             s
                                          
                                          
                                             1
                                          
                                       
                                     in 
                                       S
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                     is near 
                                       s
                                       e
                                    , and there is no subspace type 
                                       s
                                       s
                                       
                                          
                                             t
                                          
                                          
                                             1
                                          
                                       
                                     referenced by 
                                       s
                                       e
                                     that is near 
                                       s
                                       e
                                     but does not have the same position as any subspace 
                                       s
                                       
                                          
                                             s
                                          
                                          
                                             2
                                          
                                       
                                     in 
                                       S
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                    , or

if 
                                       S
                                       
                                          
                                             S
                                          
                                          
                                             i
                                          
                                       
                                     is empty and 
                                       s
                                       e
                                     either does not have subspace types, or no subspace type 
                                       s
                                       s
                                       
                                          
                                             t
                                          
                                          
                                             2
                                          
                                       
                                     referenced by 
                                       s
                                       e
                                     is near 
                                       s
                                       e
                                    :

The second predicate in Definition A.2 addresses two cases where no subspaces are near an 
                        s
                        e
                        
                        
                           (
                           S
                           
                              
                                 S
                              
                              
                                 i
                              
                           
                           =
                           ∅
                           )
                        
                     . In the first case, an 
                        s
                        e
                      may have no 
                        s
                        s
                        t
                     ’s, as illustrated with a cabinet 
                        s
                        e
                        
                        
                           (
                           s
                           
                              
                                 e
                              
                              
                                 4
                              
                           
                           )
                        
                      in Fig. A.27. In the second case, no 
                        s
                        s
                        t
                      referenced by an 
                        s
                        e
                      is feasible, as illustrated with two desk 
                        s
                        e
                     ’s (
                        s
                        
                           
                              e
                           
                           
                              2
                           
                        
                      and 
                        s
                        
                           
                              e
                           
                           
                              3
                           
                        
                     ) which almost fill their containing whole space in Fig. A.27.


                     
                        
                           
                              A
                           
                        
                        
                           “is adjacent to”

Autodesk Architecture

“bounds”

Building Information Modeling

Building Information Modeling for Architectural Design System

Boundary representation

“contains”

Constructive Solid Geometry

Face

Flow Network Model

Geometric/solid Modeling Engine

Industry Foundation Classes

Layout element

Layout Modeling System

“is near”

“overlaps”

“partially bounds”

“partially encloses”

“partially overlaps”

Space boundary element

Spatial constraint

Space element

Space element contained in a whole space

Space element contained in or partially enclosing a whole space

Space element partially enclosing a whole space

Space element type

Spatial relation element

Subspace

Subspace near a space element

Subspace type

“touches”

Volume

Whole space

@&#REFERENCES@&#

