@&#MAIN-TITLE@&#Computationally efficient evaluation of appointment schedules in health care

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We consider the evaluation and construction of patient appointment schedules.


                        
                        
                           
                           Efficient algorithm based on a discrete-time queueing model and Lindley’s recursion.


                        
                        
                           
                           Exact moments of waiting and idle times using only a finite set of probabilities.


                        
                        
                           
                           Outperforms simulation, ideal for optimisation and real-time scheduling applications.


                        
                        
                           
                           Visualisation of schedule’s performance between already fixed appointments.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Stochastic Programming

Scheduling

Queueing

Complexity theory

@&#ABSTRACT@&#


               
               
                  We consider the problem of evaluating and constructing appointment schedules for patients in a health care facility where a single physician treats patients in a consecutive manner, as is common for general practitioners, clinics and for outpatients in hospitals. Specifically, given a fixed-length session during which a physician sees K patients, each patient has to be given an appointment time during this session in advance. Optimising a schedule with respect to patient waiting times, physician idle times, session overtime, etc. usually requires a heuristic search method involving a huge number of repeated schedule evaluations. Hence, our aim is to obtain accurate predictions at very low computational cost. This is achieved by (1) using Lindley’s recursion to allow for explicit expressions and (2) choosing a discrete-time (slotted) setting to make those expressions easy to compute. We assume general, possibly distinct, distributions for the patients’ consultation times, which allows to account for multiple treatment types, emergencies and patient no-shows. The moments of waiting and idle times are obtained and the computational complexity of the algorithm is discussed. Additionally, we calculate the schedule’s performance in between appointments in order to assist a sequential scheduling strategy.
               
            

@&#INTRODUCTION@&#

Because of its social and economic interest, the problem of scheduling a hospital’s outpatients into the consultation session of a physician has received a lot of attention over the last sixty years. Many studies are motivated from a specific practical situation and aim at improving the organisational procedures in a particular (part of a) hospital (Babes & Sarma, 1991; Reinus et al., 2000; Zonderland, Boer, Boucherie, de Roode, & van Kleef, 2009; Harper & Gamlin, 2003). Clearly, practical settings differ considerably in terms of medical practice, organisation, regulations, administrative demands or limitations, preferences of patients or medical staff, management issues, etc. However, very often the underlying problem is largely the same and can be formulated as follows. Consider the practice of a physician who consults patients during a time interval of a certain length called a session, for example a 4-hour session from 8am to 12am every weekday. The physician is assisted by a nurse or secretary at the administration desk who is responsible for taking the calls of patients who wish to see the physician during the session of a particular day. The administrator must decide whether a calling patient can be admitted to that session and if so, at what time during the session the patient should arrive, i.e. what the appointment time of the patient is. All appointments are fixed before the session starts. The physician arrives at some point during the session, which is not necessarily the beginning. Given the session’s length and the number of patients, a ‘schedule’ consists of both the patients’ appointment times and the physician’s arrival time.

Since patients are consulted one by one in their appointed order, the patients in the waiting room behave as a FIFO (First-In First-Out) queuing system with the physician as service facility. The time required to serve a single patient is the consultation time, comprising all actions by the physician devoted only to that patient such as examination, looking up test results, giving advice, writing prescriptions, updating files, and discussions. Prior to the session, consultation times are known stochastically only but can be assumed to be independent. The arrival process consists of scheduled patient arrivals at deterministic time points. Hence, evaluating a session amounts to the study of a queuing system conditioned on a certain sample path for the arrivals, which is known as an appointment system (Hassin & Mendel, 2008). A patient arriving to the session at its appointed time can encounter two possible situations: either the physician has finished the consultations of previous patients or he has not. In the former case the physician has been without work since the departure of the last patient, whereas in the latter case it is the new patient who has to wait. As such, for each appointment there is either an idle time for the physician or a waiting time for the patient. As long as there is uncertainty on the consultation times when making the schedule, it is impossible to avoid both idle and waiting times although they can be controlled to a large extent by changing the schedule. In short, the aim of this paper is twofold.
                           
                              •
                              First, under rather general conditions, we devise an algorithm for evaluating a given schedule based on the consultation time distributions of the patients. The algorithm is in discrete time and produces the mean and variance of the waiting and idle times as a performance prediction. Its complexity is kept minimal by computing only the change of these moments from one patient to the next.

Second, we visualise the schedule’s ‘virtual’ performance in order to assist sequential scheduling of patients. That is, at any time point we calculate (mean and variance of) the so-called remaining work and running idle time. These virtual values become ‘real’ if an additional patient were to be scheduled at that time.

@&#RELATED WORK@&#

Depending on the specific situation, there are several so-called environmental factors that can make modelling the appointment systems considerably more complex, see Cayirli and Veral (2003) for an elaborate discussion. Patients without appointment may show up during the session (‘walk-ins’) but have to be seen by the physician anyway, either immediately (emergencies), in between regular patients or at the end of the session. Conversely, some patients that have an appointment do not show up for their consultation (‘no-shows’) or cancel the appointment too late. The no-show probability in some cases is up to 30%, depending on the type of health care offered and the patient population (Green & Savin, 2008; Sola-Vera et al., 2008; Lehmann, Aebi, Lehmann, Olivet, & Stalder, 2007). Clearly, walk-ins and no-shows contribute significantly to respectively the waiting and idle times of the schedule and to its overall uncertainty. Additionally, patients are not always punctual, for example arriving to the session later or sooner than they are supposed to. According to Alexopoulos, Goldsman, Fontanesi, Kopald, and Wilson (2008) the difference between appointed and actual arrival time is best modelled by an asymmetric Johnson distribution. Depending on the particularities of the used waiting-room policy, unpunctuality can result in overtaking of patients so that the original order of consultations is no longer maintained. With regard to scheduling, a complicating factor is also the fact that many patients have particular constraints concerning their appointment time. It is reported that as much as 25% of the calling patients ask to be given an appointment in a certain subset of the session (Rohleder & Klassen, 2000). As to which distribution is suitable for modelling patient consultation times, several propositions have been made. Originally, in Bailey (1952, 1955), Gamma distributions were used, as also preferred in e.g. Chakraborty, Muthuraman, and Lawley (2010). Other proposed distributions are Cox-type (Wang, 1997; Griffiths, Williams, & Wood, 2013), lognormal (Cayirli, Veral, & Rosen, 2008), Weibull (Babes & Sarma, 1991), uniform and/or exponential (Hassin & Mendel, 2008; Ho & Lau, 1992; Liu & Liu, 1998; Kaandorp & Koole, 2007) and even deterministic consultations (Green & Savin, 2008). However, patients may also be considered heterogeneous, i.e. have different consultation time distributions. Unlike walk-ins and no-shows, heterogeneity can reduce schedule uncertainty if properly taken into account. For each calling patient, the administration can estimate the required consultation time distribution based on the person’s characteristics (age, medical record) and required type of medical treatment (medical scans, surgical procedures, inoculations, revalidation therapy, in-takes, discussion of test results, etc.).

For a more general overview of OR methods in health care planning and appointment scheduling we can refer to e.g. Brailsford and Vissers (2011), Cardoen, Demeulemeester, and Beliën (2010), Ivatts and Millard (2002), and Gupta and Denton (2008). Specific studies however can be divided into three classes based on the evaluation methodology. The first two rely on analytic methods and results from queuing theory, respectively in steady-state or transient, while the third class uses simulation. First, many of the queuing-theoretic approaches are based on classical results for the behaviour of a queue in steady-state. This is particularly useful for studying patient dynamics in larger health care facilities over long periods of time (weeks, months) and if one is interested in overall waiting time statistics rather than of individual patients. Historically, queueing models are classified using Kendall’s notation 
                           
                              A
                              /
                              B
                              /
                              c
                              /
                              K
                           
                        , where A characterises the interarrival time distribution, B the service time distribution, c is the number of servers and K is the capacity of the queue, i.e. the size of the waiting room. If 
                           
                              K
                              =
                              ∞
                           
                        , it is omitted. Both fields A and B can e.g. assume the values M (exponential distribution), D (fixed value), PH (phase-type distribution) or G (general unspecified distribution).

Bailey (Bailey, 1954; Bailey, 1956) is among the first to advocate the use of statistics and queuing theory for capacity planning in hospitals. Some more recent studies however are the following. The efficacy of the Erlang 
                           
                              M
                              /
                              M
                              /
                              c
                              /
                              c
                           
                         loss formulas to predict the patient rejection rate at an intensive care unit is shown in McManus, Long, Cooper, and Litvak (2004). A tandem queuing model of both the intensive care unit and the operating table is given in Dijk and Kortbeek, 2009 where bounds on the rejection rate are derived. Similarly, in Gorunescu, McClean, and Millard (2002) an 
                           
                              M
                              /
                              PH
                              /
                              c
                              /
                              c
                           
                         model is used to quantify the number of beds necessary to meet a certain demand and in Tucker, Barone, Cecere, Blabey, and Rha (1999) an 
                           
                              M
                              /
                              M
                              /
                              1
                           
                         model suffices to assess operating room staffing needs during night shifts. Poisson tail probabilities in Vasanawala and Desser (2005) predict the required number of reserved slots (on a weekly basis) for emergency radiology given that 
                           
                              95
                              %
                           
                         of the requests are accommodated. A preanesthesia evaluation clinic is reorganised in Zonderland et al. (2009) by applying an approximate decomposition method to an open multi-class queuing network of patients using the 
                           
                              M
                              /
                              G
                              /
                              1
                           
                         Pollaczek-Khintchine formulas. An 
                           
                              M
                              /
                              D
                              /
                              1
                              /
                              K
                           
                         and 
                           
                              M
                              /
                              M
                              /
                              1
                              /
                              K
                           
                         model with state-dependent no-shows is developed in Green and Savin (2008) to study the performance of ‘advanced access’ (Murray & Berwick, 2003), a recent paradigm where patients are offered same-day appointments as much as possible. In Reinus et al. (2000) a non-preemptive priority model is used to assess the average waiting times of emergent and non-emergent patients for computed tomography scans. In Creemers and Lambrecht (2009) matrix-analytic methods are used to analyse waiting times for an assignment system where patients can call in only during arrival sessions and are given an appointment during a service session. Arrival and service sessions are fixed and periodic. Assuming PH-type interarrival distributions, an algorithm is developed based on two hierarchical Markov chains with different time scales. In Creemers, Beliën, and Lambrecht (2012) the same authors use a bulk service queueing model for allocating slots to different patient classes. Finally, in Asaduzzaman and Chaussalet (2014) a network of perinatal care is modelled as a queueing network of 
                           
                              G
                              /
                              G
                              /
                              c
                              /
                              0
                           
                         loss systems.

All of the above studies assume an infinitely long queueing process of patients in equilibrium where all transient effects have subsided. Usually however, sessions are too short for steady-state predictions to be sufficiently accurate. Analysing a finite session is more dynamic and therefore more difficult, to paraphrase Wang (1997), but also yields more applicable results. In Muthuraman and Lawley (2008) and Chakraborty et al. (2010), a session with block appointments is considered where patients have identical exponential and respectively general consultation time distributions. The studied criteria are the average number of served patients and the probability of a patient having to overflow to the next block. Sessions with block appointments and continuous appointment times are studied in Kaandorp and Koole (2007) and Hassin and Mendel (2008) respectively in case of exponential consultation times and a fixed no-show probability. The case of Cox-type consultation times is covered in Wang (1997) where the optimal schedule is considered with regard to the mean waiting time and the effective session duration.

Appointment scheduling has also been studied using simulations. In Rohleder and Klassen (2000) some scheduling rules are evaluated that exploit variance information of the patients’ consultation times. The model takes into account that classification of this information may be inaccurate, as well as patient constraints. In Ho and Lau (1992) several rules for heterogeneous patients are evaluated and compared, assuming no-shows. The best rules are identified as those that lie on a Pareto frontier with respect to mean overall waiting and idle time. This is extended in Liu and Liu (1998) for block appointment rules in case of multiple randomly arriving and leaving physicians. In Cayirli et al. (2008) heterogeneous patients of two types with no-shows and walk-ins are assumed. Several possible appointment rules pertaining to such circumstances are evaluated extensively and compared to rules that do not use patient classification. A detailed simulation model of an ear, nose and throat outpatient department is presented in Harper and Gamlin (2003). The proposed improvements are also based on exploiting heterogeneity by giving appointment blocks of different length to different types of patients.

In general, it is not possible to construct an optimal schedule from some desired objective function directly. Instead, a search method is required such as sequential quadratic programming (Hassin & Mendel, 2008), modified conjugate direction methods (Wang, 1997), stochastic linear programming (Denton & Gupta, 2003) or local search methods (Kaandorp & Koole, 2007). These methods are all iterative, requiring many subsequent evaluations of schedules in the search space. It is therefore important to use an evaluation method that is both accurate and fast. Unfortunately, convexity (meaning that any found local optimum is also global) can be proven only in some specific cases, see e.g. Kaandorp and Koole (2007) and Kong, Lee, Teo, and Zheng (2013). Instead of iterative search however, patient scheduling can also be seen as a policy and can be modelled using Markov Decision Processes (Sauré, Patrick, Tyldesley, & Puterman, 2012; Schütz & Kolisch, 2012).

Most studies impose certain limitations on the way appointments can be made and on how a session is organised, either to assure tractability of the evaluation method, reduce the search space or to make practical implementation easier. For example, often a session is divided into blocks (possibly of different length) such that patients can only arrive at the start of a block, see e.g. Muthuraman and Lawley (2008), Chakraborty et al. (2010), and Rohleder and Klassen (2000). Several scheduling ‘rules’ have been proposed to determine suitable appointment times for the patients, many of which are summarised in Cayirli and Veral (2003). These rules differ e.g. in the prescribed number of patients in subsequent blocks, initial block size, the length of the intervals between the blocks (either fixed or variable), and so on. In Bailey (1952) the recommendation was to make the interval length equal to the expected consultation time and let the physician start when the second patient arrives. This is now known as ‘Bailey’s rule’ and was aimed at an equitable minimisation of both patient waiting and physician idle times. More advanced rules exploit knowledge about patient heterogeneity, i.e. the fact that they have different known consultation time distributions. In Cayirli et al. (2008) for example, a distinction is made between long and short consultations corresponding to ‘new’ and ‘return’ patients respectively. In Ho and Lau (1992) it is shown that it is beneficial to increase the intervals proportionally to the standard deviation of each consultation time. Additionally, it is generally better to schedule consultations with low variance early in the session, see Rohleder and Klassen (2000). Scheduling rules in case of strict performance constraints are discussed in Turkcan, Zeng, Muthuraman, and Lawley (2011).

We propose an analytic schedule evaluation method based on the recursive Lindley relation (Lindley, 1952) in queuing theory. Our primary aim is to obtain expressions for the moments of the schedule’s performance criteria having very low computational complexity. Key to our approach is the discrete-time setting. That is, not only the session but also all time-related quantities in the model, such as waiting and idle times, are discretised into fixed-length intervals (slots) of length 
                        
                           Δ
                        
                     . A suitable choice of 
                        
                           Δ
                        
                      follows from a trade-off: whereas using small slots ensures a maximal accuracy of the performance predictions, choosing large slots results in a lower computational effort. In the envisaged medical context of appointments for outpatients, the lowest practical time granularity is probably in the order of 
                        
                           Δ
                           =
                           1
                        
                     
                     minute, as it does not make sense to give people an appointment time with greater accuracy than this. More importantly however, any quantitative description of the consultation time of a patient or of a certain treatment type will rarely require a time granularity smaller than one minute. That is, in as far as the distribution of the anticipated consultation time S is not already made available as discrete data (a histogram), its distribution can be discretised with granularity 
                        
                           Δ
                        
                      as
                        
                           (1)
                           
                              s
                              (
                              n
                              )
                              =
                              Prob
                              
                                 
                                    
                                       S
                                       <
                                       
                                          
                                             
                                                n
                                                +
                                                
                                                   
                                                      1
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                       
                                       Δ
                                    
                                 
                              
                              -
                              Prob
                              
                                 
                                    
                                       S
                                       <
                                       
                                          
                                             
                                                n
                                                -
                                                
                                                   
                                                      1
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                          
                                       
                                       Δ
                                    
                                 
                              
                              ,
                              
                              n
                              ⩾
                              0
                              ,
                           
                        
                     into the probability mass function (pmf) 
                        
                           s
                           (
                           n
                           )
                        
                      of a discrete random variable. Assuming that time is discrete simplifies the analysis considerably, since the integrals over finite intervals that follow from a continuous-time transient queuing analysis (see e.g. Chakraborty et al., 2010) are replaced by finite sums. On the other hand, the discrete-time setting hardly compromises accuracy if the slot length 
                        
                           Δ
                        
                      is chosen sufficiently small.

In our analysis, no assumptions are made on the consultation times of the patients other than that their pmf (1) is known and that they are independent. The fact that each patient can have a different consultation pmf allows us to evaluate schedules containing heterogeneous patients, which is important when making tight schedules with low cost. We further assume that all patients and the physician are punctual, arriving precisely when scheduled. Although patient lateness is excluded in our model, no-shows and even emergencies or other physician unavailabilities can be incorporated to some extent. Specifically, if a patient with consultation time pmf 
                        
                           s
                           (
                           n
                           )
                        
                      is likely not to show up for his appointment with probability p, his ‘effective’ consultation time has pmf
                        
                           (2)
                           
                              
                                 
                                    s
                                 
                                 
                                    no
                                    -
                                    show
                                 
                              
                              (
                              n
                              )
                              =
                              
                                 
                                    
                                       
                                          
                                             
                                                p
                                                +
                                                (
                                                1
                                                -
                                                p
                                                )
                                                s
                                                (
                                                0
                                                )
                                                ,
                                             
                                             
                                                n
                                                =
                                                0
                                                ,
                                             
                                          
                                          
                                             
                                                (
                                                1
                                                -
                                                p
                                                )
                                                s
                                                (
                                                n
                                                )
                                                ,
                                             
                                             
                                                n
                                                >
                                                0
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     Likewise, if there is a probability q that a consultation with pmf 
                        
                           s
                           (
                           n
                           )
                        
                      will be interrupted by an emergency taking a length of time with pmf 
                        
                           u
                           (
                           n
                           )
                        
                     , then the altered pmf is
                        
                           (3)
                           
                              
                                 
                                    s
                                 
                                 
                                    emergency
                                 
                              
                              (
                              n
                              )
                              =
                              (
                              1
                              -
                              q
                              )
                              s
                              (
                              n
                              )
                              +
                              q
                              (
                              s
                              ∗
                              u
                              )
                              (
                              n
                              )
                              ,
                              
                              n
                              ⩾
                              0
                              ,
                           
                        
                     where 
                        
                           *
                        
                      denotes the discrete convolution. Finally, the physician does not necessarily start seeing patients at the start of the session. To anticipate no-shows or lateness of the first few patients, the physician’s arrival may be scheduled later in the session.

Consider a consultation session of a physician spanning a time period 
                           
                              [
                              0
                              ,
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              ]
                           
                         in which K patients are given an appointment. Let 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                         denote the appointment time of the kth patient (
                           
                              0
                              ⩽
                              
                                 
                                    τ
                                 
                                 
                                    1
                                 
                              
                              ⩽
                              
                                 
                                    τ
                                 
                                 
                                    2
                                 
                              
                              ⩽
                              …
                              ⩽
                              
                                 
                                    τ
                                 
                                 
                                    K
                                 
                              
                              ⩽
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                           
                        ) and let 
                           
                              θ
                           
                         (
                           
                              0
                              ⩽
                              θ
                              ⩽
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                           
                        ) be the arrival time of the physician. All patients are assumed to be punctual and their consultation times constitute a sequence of independent random variables, denoted by 
                           
                              
                                 
                                    S
                                 
                                 
                                    k
                                 
                              
                              ,
                              
                              1
                              ⩽
                              k
                              ⩽
                              K
                           
                        . As already motivated, we assume time to be a discrete dimension where events can only happen at slot boundaries. Therefore, all time related measures are expressed as integer multiples of the slot length 
                           
                              Δ
                           
                        . That is, the session length 
                           
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                           
                        , the physician arrival time 
                           
                              θ
                           
                         and the appointment times 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                         are given as discrete values and the consultation times 
                           
                              
                                 
                                    S
                                 
                                 
                                    k
                                 
                              
                           
                         have a discrete distribution with pmf 
                           
                              
                                 
                                    s
                                 
                                 
                                    k
                                 
                              
                              (
                              n
                              )
                              =
                              Prob
                              [
                              
                                 
                                    S
                                 
                                 
                                    k
                                 
                              
                              =
                              n
                              ]
                           
                         which may be obtained from (1) or is available otherwise. We denote by 
                           
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                              
                           
                         and 
                           
                              
                                 
                                    σ
                                 
                                 
                                    k
                                 
                                 
                                    2
                                 
                              
                           
                         respectively the mean and variance of the kth patient’s consultation time.

A specific appointment schedule thus consists of the session length 
                           
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                           
                        , the physician arrival time 
                           
                              θ
                           
                        , the number of patients K, their appointment times 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                         and the consultation time distributions 
                           
                              
                                 
                                    s
                                 
                                 
                                    k
                                 
                              
                              (
                              n
                              )
                           
                        . Such a schedule can be evaluated in terms various criteria, among which the patient waiting time and the physician idle time are probably the most important. The waiting time 
                           
                              
                                 
                                    W
                                 
                                 
                                    k
                                 
                              
                           
                         of the kth patient in the schedule is the time between its appointed arrival time and the effective start of its consultation. By the idle time 
                           
                              
                                 
                                    I
                                 
                                 
                                    k
                                 
                              
                           
                         we mean the period before the arrival of patient k in which the physician is waiting because the consultation of patient 
                           
                              k
                              -
                              1
                           
                         is already finished. Usually, for decision-making or optimisation it is sufficient to predict the means and the variances of 
                           
                              
                                 
                                    W
                                 
                                 
                                    k
                                 
                              
                           
                         and 
                           
                              
                                 
                                    I
                                 
                                 
                                    k
                                 
                              
                           
                         (
                           
                              1
                              ⩽
                              k
                              ⩽
                              K
                              +
                              1
                           
                        ), which can be calculated very efficiently as we demonstrate.

We denote the interarrival time between consecutive patients by
                           
                              
                                 
                                    
                                       a
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 -
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                    
                                 
                                 ,
                              
                           
                        for 
                           
                              k
                              =
                              1
                              ,
                              2
                              ,
                              …
                              ,
                              K
                           
                        , where it is agreed that 
                           
                              
                                 
                                    τ
                                 
                                 
                                    K
                                    +
                                    1
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                           
                         indicates the end of the session. Hence, 
                           
                              
                                 
                                    a
                                 
                                 
                                    K
                                 
                              
                           
                         is the time between the last appointment and the end of the session. We can also interpret 
                           
                              
                                 
                                    τ
                                 
                                 
                                    K
                                    +
                                    1
                                 
                              
                              =
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                           
                         as the arrival time of an additional virtual patient at the end of the session. This is useful, since the waiting time of this virtual patient equals the session overtime X, i.e. the excess time beyond the scheduled end of the session that the physician requires to see all K patients. Clearly, the overtime 
                           
                              X
                              =
                              
                                 
                                    W
                                 
                                 
                                    K
                                    +
                                    1
                                 
                              
                           
                         is an important criterion for the performance of the schedule as well.

@&#ANALYSIS@&#

If we define the auxiliary variable
                           
                              (4)
                              
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 
                                    
                                       a
                                    
                                    
                                       k
                                    
                                 
                                 ,
                              
                           
                        for 
                           
                              k
                              =
                              1
                              ,
                              …
                              ,
                              K
                           
                        , then the well-known Lindley equation in queuing theory (Lindley, 1952) relates the waiting times of consecutive patients on the one hand and physician idle times on the other hand as follows.
                           
                              (5)
                              
                                 
                                    
                                       W
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       (
                                       
                                          
                                             Q
                                          
                                          
                                             k
                                          
                                       
                                       )
                                    
                                    
                                       +
                                    
                                 
                                 ,
                                 
                                 and
                                 
                                 
                                    
                                       I
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       (
                                       -
                                       
                                          
                                             Q
                                          
                                          
                                             k
                                          
                                       
                                       )
                                    
                                    
                                       +
                                    
                                 
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    (
                                    ·
                                    )
                                 
                                 
                                    +
                                 
                              
                           
                         is a shorthand notation for 
                           
                              max
                              (
                              ·
                              ,
                              0
                              )
                           
                        . Note that 
                           
                              
                                 
                                    W
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                           
                         and 
                           
                              
                                 
                                    I
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                           
                         cannot both be positive at the same time, although 
                           
                              
                                 
                                    W
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              =
                              
                                 
                                    I
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              =
                              
                                 
                                    Q
                                 
                                 
                                    k
                                 
                              
                              =
                              0
                           
                         may occur when the consultation of patient k finishes exactly in the slot before the arrival of patient 
                           
                              k
                              +
                              1
                           
                        . As a consequence of (5), we have
                           
                              (6)
                              
                                 
                                    
                                       W
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 -
                                 
                                    
                                       I
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                    
                                 
                                 ,
                                 
                                 and
                                 
                                 
                                    
                                       W
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                    
                                       2
                                    
                                 
                                 +
                                 
                                    
                                       I
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                    
                                    
                                       2
                                    
                                 
                                 ,
                              
                           
                        For further calculations, we distinguish between the case 
                           
                              
                                 
                                    Q
                                 
                                 
                                    k
                                 
                              
                              =
                              -
                              
                                 
                                    I
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              ⩽
                              0
                           
                         where patient 
                           
                              k
                              +
                              1
                           
                         can be seen immediately and the case 
                           
                              
                                 
                                    Q
                                 
                                 
                                    k
                                 
                              
                              =
                              
                                 
                                    W
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              >
                              0
                           
                         where this patient has to wait, as illustrated in Fig. 1
                        (a and b) respectively. In particular, the probability mass function 
                           
                              
                                 
                                    w
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              (
                              n
                              )
                              =
                              Prob
                              [
                              
                                 
                                    W
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              =
                              n
                              ]
                              ,
                              n
                              ⩾
                              0
                           
                         of the 
                           
                              (
                              k
                              +
                              1
                              )
                           
                        th waiting time can be related to that of the previous patient using (5). We find
                           
                              (7)
                              
                                 
                                    
                                       
                                       
                                          
                                             
                                                
                                                   w
                                                
                                                
                                                   k
                                                   +
                                                   1
                                                
                                             
                                             (
                                             0
                                             )
                                             =
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      m
                                                      =
                                                      0
                                                   
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      n
                                                      =
                                                      0
                                                   
                                                   
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      -
                                                      m
                                                   
                                                
                                             
                                             
                                                
                                                   s
                                                
                                                
                                                   k
                                                
                                             
                                             (
                                             m
                                             )
                                             
                                                
                                                   w
                                                
                                                
                                                   k
                                                
                                             
                                             (
                                             n
                                             )
                                             ,
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                                
                                                   w
                                                
                                                
                                                   k
                                                   +
                                                   1
                                                
                                             
                                             (
                                             n
                                             )
                                             =
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      m
                                                      =
                                                      0
                                                   
                                                   
                                                      n
                                                      +
                                                      
                                                         
                                                            a
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   s
                                                
                                                
                                                   k
                                                
                                             
                                             (
                                             m
                                             )
                                             
                                                
                                                   w
                                                
                                                
                                                   k
                                                
                                             
                                             (
                                             n
                                             -
                                             m
                                             +
                                             
                                                
                                                   a
                                                
                                                
                                                   k
                                                
                                             
                                             )
                                             ,
                                             
                                             n
                                             >
                                             0
                                             ,
                                          
                                       
                                    
                                 
                              
                           
                        where we exploited the fact that the waiting time of a patient and his consultation time are independent. These probabilities are easy to calculate due to the discrete-time modelling. The first patient is scheduled either before or after the physician’s arrival, and has deterministic waiting and idle times respectively given by
                           
                              (8)
                              
                                 
                                    
                                       W
                                    
                                    
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       (
                                       θ
                                       -
                                       
                                          
                                             τ
                                          
                                          
                                             1
                                          
                                       
                                       )
                                    
                                    
                                       +
                                    
                                 
                                 ,
                                 
                                 and
                                 
                                 
                                    
                                       I
                                    
                                    
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       (
                                       
                                          
                                             τ
                                          
                                          
                                             1
                                          
                                       
                                       -
                                       θ
                                       )
                                    
                                    
                                       +
                                    
                                 
                                 .
                              
                           
                        Hence, the pmf 
                           
                              
                                 
                                    w
                                 
                                 
                                    1
                                 
                              
                              (
                              n
                              )
                           
                         is immediately given and the relations (7) allow us to calculate 
                           
                              
                                 
                                    w
                                 
                                 
                                    k
                                 
                              
                              (
                              n
                              )
                           
                         recursively for all n and k, as far as necessary.

In principle, if the consultation times are bounded, it is possible to calculate the complete probability mass function of the waiting times from which moments can be determined. Such an approach however, is computationally demanding and not applicable if consultation times have unbounded support. Nevertheless, calculation of the probabilities (7) can be partially avoided as long as only the moments of waiting and idle times are required. Let us denote by respectively 
                           
                              E
                              [
                              A
                              ]
                              ,
                              
                              Var
                              [
                              A
                              ]
                              =
                              E
                              [
                              
                                 
                                    A
                                 
                                 
                                    2
                                 
                              
                              ]
                              -
                              
                                 
                                    (
                                    E
                                    [
                                    A
                                    ]
                                    )
                                 
                                 
                                    2
                                 
                              
                           
                         and 
                           
                              Dev
                              [
                              A
                              ]
                              =
                              
                                 
                                    (
                                    Var
                                    [
                                    A
                                    ]
                                    )
                                 
                                 
                                    
                                       
                                          1
                                       
                                       
                                          2
                                       
                                    
                                 
                              
                           
                         the expected value, the variance and the standard deviation of a random variable A. Further, let 
                           
                              1
                              {
                              B
                              }
                           
                         be the indicator function of the event B, i.e.
                        
                           
                              1
                              {
                              B
                              }
                           
                         is 1 if B occurs and is 0 otherwise.

First, it is seen from (4) and (5) that
                           
                              (9)
                              
                                 E
                                 [
                                 
                                    
                                       I
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 ]
                                 =
                                 E
                                 [
                                 
                                    
                                       (
                                       -
                                       
                                          
                                             Q
                                          
                                          
                                             k
                                          
                                       
                                       )
                                    
                                    
                                       +
                                    
                                 
                                 ]
                                 =
                                 E
                                 [
                                 -
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                    
                                 
                                 
                                 1
                                 {
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 0
                                 }
                                 ]
                                 =
                                 E
                                 [
                                 (
                                 
                                    
                                       a
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 )
                                 
                                 1
                                 {
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 
                                    
                                       a
                                    
                                    
                                       k
                                    
                                 
                                 }
                                 ]
                                 =
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 ,
                              
                           
                        for 
                           
                              k
                              =
                              1
                              ,
                              …
                              ,
                              K
                           
                         and where 
                           
                              
                                 
                                    
                                       
                                          ℓ
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    k
                                 
                              
                           
                         is the finite sum,
                           
                              (10)
                              
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          =
                                          0
                                       
                                       
                                          
                                             
                                                a
                                             
                                             
                                                k
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          n
                                          =
                                          0
                                       
                                       
                                          
                                             
                                                a
                                             
                                             
                                                k
                                             
                                          
                                          -
                                          m
                                       
                                    
                                 
                                 (
                                 
                                    
                                       a
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 n
                                 -
                                 m
                                 )
                                 
                                    
                                       s
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 m
                                 )
                                 
                                    
                                       w
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 n
                                 )
                                 .
                              
                           
                        By the first relation in (6) and by (4), the mean waiting times of subsequently scheduled patients are related as
                           
                              (11)
                              
                                 E
                                 [
                                 
                                    
                                       W
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 ]
                                 =
                                 E
                                 [
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                    
                                 
                                 ]
                                 +
                                 E
                                 [
                                 
                                    
                                       I
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 ]
                                 =
                                 E
                                 [
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 ]
                                 +
                                 
                                    
                                       μ
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 
                                    
                                       a
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 .
                              
                           
                        In a similar way, we obtain for the idle time variances
                           
                              (12)
                              
                                 Var
                                 [
                                 
                                    
                                       I
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 ]
                                 =
                                 E
                                 [
                                 
                                    
                                       I
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                    
                                       2
                                    
                                 
                                 ]
                                 -
                                 
                                    
                                       (
                                       E
                                       [
                                       
                                          
                                             I
                                          
                                          
                                             k
                                             +
                                             1
                                          
                                       
                                       ]
                                       )
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             =
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                    
                                    
                                       2
                                    
                                 
                                 ,
                              
                           
                        with
                           
                              (13)
                              
                                 
                                    
                                       
                                          
                                             
                                                ℓ
                                             
                                             
                                                =
                                             
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          =
                                          0
                                       
                                       
                                          
                                             
                                                a
                                             
                                             
                                                k
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          n
                                          =
                                          0
                                       
                                       
                                          
                                             
                                                a
                                             
                                             
                                                k
                                             
                                          
                                          -
                                          m
                                       
                                    
                                 
                                 
                                    
                                       (
                                       
                                          
                                             a
                                          
                                          
                                             k
                                          
                                       
                                       -
                                       n
                                       -
                                       m
                                       )
                                    
                                    
                                       2
                                    
                                 
                                 
                                    
                                       s
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 m
                                 )
                                 
                                    
                                       w
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 n
                                 )
                                 .
                              
                           
                        Finally, note that it follows from (4) that 
                           
                              Var
                              [
                              
                                 
                                    Q
                                 
                                 
                                    k
                                 
                              
                              ]
                              =
                              Var
                              [
                              
                                 
                                    W
                                 
                                 
                                    k
                                 
                              
                              ]
                              +
                              
                                 
                                    σ
                                 
                                 
                                    k
                                 
                                 
                                    2
                                 
                              
                           
                        . Then, taking expectations of the second relation in (6) and using the fact that 
                           
                              E
                              [
                              
                                 
                                    I
                                 
                                 
                                    k
                                    +
                                    1
                                 
                                 
                                    2
                                 
                              
                              ]
                              =
                              
                                 
                                    
                                       
                                          ℓ
                                       
                                       
                                          =
                                       
                                    
                                 
                                 
                                    k
                                 
                              
                           
                        , we easily find that 
                           
                              E
                              
                                 
                                    
                                       
                                          
                                             W
                                          
                                          
                                             k
                                             +
                                             1
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                              
                              =
                              Var
                              [
                              
                                 
                                    W
                                 
                                 
                                    k
                                 
                              
                              ]
                              +
                              
                                 
                                    σ
                                 
                                 
                                    k
                                 
                                 
                                    2
                                 
                              
                              +
                              E
                              
                                 
                                    
                                       
                                          
                                             
                                                Q
                                             
                                             
                                                k
                                             
                                          
                                       
                                    
                                 
                                 
                                    2
                                 
                              
                              -
                              
                                 
                                    
                                       
                                          ℓ
                                       
                                       
                                          =
                                       
                                    
                                 
                                 
                                    k
                                 
                              
                           
                        . Subtracting the square of 
                           
                              E
                              [
                              
                                 
                                    W
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              ]
                              =
                              E
                              [
                              
                                 
                                    Q
                                 
                                 
                                    k
                                 
                              
                              ]
                              +
                              
                                 
                                    
                                       
                                          ℓ
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    k
                                 
                              
                           
                         yields
                           
                              (14)
                              
                                 Var
                                 [
                                 
                                    
                                       W
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 ]
                                 =
                                 Var
                                 [
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 ]
                                 +
                                 
                                    
                                       σ
                                    
                                    
                                       k
                                    
                                    
                                       2
                                    
                                 
                                 +
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                    
                                    
                                       2
                                    
                                 
                                 -
                                 2
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 E
                                 [
                                 
                                    
                                       W
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 ]
                                 -
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             =
                                          
                                       
                                    
                                    
                                       k
                                    
                                 
                                 ,
                              
                           
                        which is a relation between the waiting time variances of subsequent patients.

Now, because of (8) we have that 
                           
                              E
                              [
                              
                                 
                                    W
                                 
                                 
                                    1
                                 
                              
                              ]
                              =
                              
                                 
                                    (
                                    θ
                                    -
                                    
                                       
                                          τ
                                       
                                       
                                          1
                                       
                                    
                                    )
                                 
                                 
                                    +
                                 
                              
                              ,
                              E
                              [
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              ]
                              =
                              
                                 
                                    (
                                    
                                       
                                          τ
                                       
                                       
                                          1
                                       
                                    
                                    -
                                    θ
                                    )
                                 
                                 
                                    +
                                 
                              
                           
                         and 
                           
                              Var
                              [
                              
                                 
                                    W
                                 
                                 
                                    1
                                 
                              
                              ]
                              =
                              Var
                              [
                              
                                 
                                    I
                                 
                                 
                                    1
                                 
                              
                              ]
                              =
                              0
                           
                        , such that by (7)–(14) the first two moments of waiting and idle times can be determined recursively for 
                           
                              k
                              =
                              2
                              ,
                              …
                              ,
                              K
                           
                        . It is also clear that only a finite number of waiting time probabilities need to be calculated by means of (7), even though the consultation times 
                           
                              
                                 
                                    S
                                 
                                 
                                    k
                                 
                              
                           
                         may be stochastically unbounded. Specifically, in accordance with (10) and (11), the calculation of the expected session overtime 
                           
                              E
                              [
                              X
                              ]
                              =
                              E
                              [
                              
                                 
                                    W
                                 
                                 
                                    K
                                    +
                                    1
                                 
                              
                              ]
                           
                         requires probabilities 
                           
                              
                                 
                                    w
                                 
                                 
                                    K
                                 
                              
                              (
                              0
                              )
                              →
                              
                                 
                                    w
                                 
                                 
                                    K
                                 
                              
                              (
                              
                                 
                                    a
                                 
                                 
                                    K
                                 
                              
                              )
                           
                        , which in turn requires 
                           
                              
                                 
                                    w
                                 
                                 
                                    K
                                    -
                                    1
                                 
                              
                              (
                              0
                              )
                              →
                              
                                 
                                    w
                                 
                                 
                                    K
                                    -
                                    1
                                 
                              
                              (
                              
                                 
                                    a
                                 
                                 
                                    K
                                 
                              
                              +
                              
                                 
                                    a
                                 
                                 
                                    K
                                    -
                                    1
                                 
                              
                              )
                           
                         and so on, until finally for the first patient we need 
                           
                              
                                 
                                    w
                                 
                                 
                                    1
                                 
                              
                              (
                              0
                              )
                              →
                              
                                 
                                    w
                                 
                                 
                                    1
                                 
                              
                              (
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              -
                              
                                 
                                    τ
                                 
                                 
                                    1
                                 
                              
                              )
                           
                        . Note that because 
                           
                              
                                 
                                    W
                                 
                                 
                                    1
                                 
                              
                           
                         is deterministic, all probabilities in the latter range are zero, except for one. For the variances of waiting and idle times, the same finite set of probabilities
                           
                              (15)
                              
                                 W
                                 =
                                 {
                                 
                                    
                                       w
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 n
                                 )
                                 :
                                 1
                                 ⩽
                                 k
                                 ⩽
                                 K
                                 ,
                                 
                                 0
                                 ⩽
                                 n
                                 ⩽
                                 
                                    
                                       t
                                    
                                    
                                       max
                                    
                                 
                                 -
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                    
                                 
                                 }
                                 .
                              
                           
                        is used.

In the following examples, we evaluate some particular schedules with regard to the incurred mean waiting, idle and overtime. We assume a slot length of 
                           
                              Δ
                              =
                              1
                           
                         minute. If 
                           
                              Γ
                              (
                              μ
                              ,
                              
                                 
                                    σ
                                 
                                 
                                    2
                                 
                              
                              )
                           
                         denotes the (continuous) 
                           
                              Γ
                           
                        -distribution with mean 
                           
                              μ
                           
                         and variance 
                           
                              
                                 
                                    σ
                                 
                                 
                                    2
                                 
                              
                           
                        , then we refer to the corresponding discrete distribution obtained by (1) as 
                           
                              
                                 
                                    Γ
                                 
                                 
                                    ˆ
                                 
                              
                              (
                              μ
                              ,
                              
                                 
                                    σ
                                 
                                 
                                    2
                                 
                              
                              )
                           
                        .

First, we consider a session with 
                           
                              K
                              =
                              10
                           
                         patients all having the same consultation time distribution 
                           
                              
                                 
                                    Γ
                                 
                                 
                                    ˆ
                                 
                              
                              (
                              20
                              ,
                              50
                              )
                           
                         of which the pmf is shown in Fig. 2
                        (a). The patients are given appointment times equidistantly spaced in the session, i.e. 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                              =
                              ⌊
                              (
                              k
                              -
                              1
                              )
                              a
                              ⌋
                           
                         with 
                           
                              a
                              =
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              /
                              K
                           
                        , while the physician arrives 5minutes late in the session. The mean performance of this schedule is shown in Fig. 2 in case the spacing a is 20, 24 and 28minutes respectively. Note that in (b) the time given to each patient is exactly the expected time needed by the patient, i.e. 
                           
                              
                                 
                                    a
                                 
                                 
                                    k
                                 
                              
                              =
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                              
                           
                        . Although one would expect this to be an acceptable strategy, it is clearly not since the waiting times of subsequently scheduled patients increase indefinitely (assuming an infinite session 
                           
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              →
                              ∞
                              ,
                              
                              K
                              →
                              ∞
                           
                         and 
                           
                              
                                 
                                    a
                                 
                                 
                                    k
                                 
                              
                              =
                              μ
                           
                         kept constant), as already observed in Bailey (1955). For long sessions it is therefore necessary to choose a larger spacing, for example as 
                           
                              
                                 
                                    a
                                 
                                 
                                    k
                                 
                              
                              =
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                              
                              +
                              h
                              
                                 
                                    σ
                                 
                                 
                                    k
                                 
                              
                           
                         with some parameter 
                           
                              h
                              >
                              0
                           
                         (Charnetski, 1984). Taking the spacing a too large however, as in (d), results in very high physician idle times.

In Fig. 3
                         we illustrate the influence of consultation time variability in another way. We consider again the schedule of Fig. 2(c) where the patients are placed every 24minutes but now increase the variance 
                           
                              σ
                           
                         of the consultation times from 
                           
                              σ
                              =
                              50
                           
                         to 
                           
                              σ
                              =
                              100
                           
                         and 200 in Fig. 3(a and b) and (c and d) respectively, keeping the mean consultation time at 20minutes. Observe that a high-variance consultation time attributes more uncertainty to the schedule and deteriorates both the mean waiting times and idle times (Cayirli & Veral, 2003; Bailey, 1952; Ho & Lau, 1992; Rohleder & Klassen, 2000). Moreover, the mean waiting times of subsequent patients in Fig. 3(d) increase towards the end of the session, similar as in Fig. 2(b). Here however, if the session were infinite, the waiting times would converge to a limiting value since 
                           
                              
                                 
                                    a
                                 
                                 
                                    k
                                 
                              
                              >
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                              
                           
                        .

In Figs. 4 and 5
                        
                         we illustrate the impact of no-shows on the schedule’s performance, again assuming 
                           
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              =
                              240
                              ,
                              
                              θ
                              =
                              5
                           
                         and 
                           
                              K
                              =
                              10
                           
                         equally spaced patients, i.e. every 
                           
                              
                                 
                                    a
                                 
                                 
                                    k
                                 
                              
                              =
                              24
                           
                        
                        minutes. The consultation times are all 
                           
                              
                                 
                                    Γ
                                 
                                 
                                    ˆ
                                 
                              
                              (
                              20
                              ,
                              150
                              )
                           
                         distributed. In Fig. 4(a), we show the effective pmf 
                           
                              
                                 
                                    s
                                 
                                 
                                    ∗
                                 
                              
                              (
                              n
                              )
                           
                         obtained from rescaling 
                           
                              s
                              (
                              n
                              )
                           
                         as in (2) in order to account for a no-show probability p of 15%. Note that the probability mass 
                           
                              
                                 
                                    s
                                 
                                 
                                    ∗
                                 
                              
                              (
                              n
                              )
                              ≅
                              0.15
                           
                         of a zero-length consultation is not entirely shown. In (b and c) we see the schedule’s performance both in the original case where all patients show up and in case the rescaled pmf 
                           
                              
                                 
                                    s
                                 
                                 
                                    ∗
                                 
                              
                              (
                              n
                              )
                           
                         with no-show is used. The mean waiting and idle times are shown in (b), while their standard deviations (
                           
                              Dev
                              [
                              ]
                           
                        ) are given in (c). As the mean consultation time drops from 
                           
                              E
                              [
                              S
                              ]
                              =
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                              
                              =
                              20
                           
                         to 
                           
                              E
                              [
                              
                                 
                                    S
                                 
                                 
                                    ∗
                                 
                              
                              ]
                              =
                              
                                 
                                    μ
                                 
                                 
                                    k
                                 
                                 
                                    ∗
                                 
                              
                              =
                              17
                           
                         minutes due to the no-shows, the waiting times are lower while the idle times are higher. However, in Fig. 5 we illustrate that the consultation time distribution may have an influence beyond its first two moments. Here, both S and 
                           
                              
                                 
                                    S
                                 
                                 
                                    ★
                                 
                              
                           
                         have their mean and variance equal to 20 and 150 respectively, although only S is 
                           
                              
                                 
                                    Γ
                                 
                                 
                                    ˆ
                                 
                              
                           
                        -distributed. The second distribution is obtained by imposing a no-show probability 
                           
                              
                                 
                                    s
                                 
                                 
                                    ★
                                 
                              
                              (
                              0
                              )
                              =
                              p
                              =
                              15
                           
                        % and choosing a 
                           
                              
                                 
                                    Γ
                                 
                                 
                                    ˆ
                                 
                              
                           
                        -shape for the other mass points 
                           
                              
                                 
                                    s
                                 
                                 
                                    ★
                                 
                              
                              (
                              n
                              )
                              ,
                              
                              n
                              >
                              0
                           
                        . Although the mean patient waiting times are more or less unchanged in this case, their variance has decreased considerably.

In most situations, to have the physician standing idle for 1minute is deemed far less desirable than to keep a patient waiting for the same time period. In general, such differences in appreciation can be represented as a function of the performance criteria we have obtained in Section 3. For example, a suitable cost function C associated with a particular schedule might be
                           
                              (16)
                              
                                 C
                                 =
                                 f
                                 (
                                 
                                    
                                       W
                                    
                                    
                                       ‾
                                    
                                 
                                 ,
                                 
                                    
                                       I
                                    
                                    
                                       ‾
                                    
                                 
                                 ,
                                 E
                                 [
                                 X
                                 ]
                                 ,
                                 …
                                 )
                                 ,
                              
                           
                        where 
                           
                              
                                 
                                    W
                                 
                                 
                                    ‾
                                 
                              
                           
                         and 
                           
                              
                                 
                                    I
                                 
                                 
                                    ‾
                                 
                              
                           
                         respectively are
                           
                              
                                 
                                    
                                       W
                                    
                                    
                                       ‾
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       K
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          =
                                          1
                                       
                                       
                                          K
                                       
                                    
                                 
                                 E
                                 [
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 ]
                                 ,
                                 
                                 
                                    
                                       I
                                    
                                    
                                       ‾
                                    
                                 
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       K
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          k
                                          =
                                          1
                                       
                                       
                                          K
                                       
                                    
                                 
                                 E
                                 [
                                 
                                    
                                       I
                                    
                                    
                                       k
                                    
                                 
                                 ]
                                 .
                              
                           
                        Thus formalised, an optimal schedule is one that minimises the cost C. Other criteria such as the number of patients K, the physician lateness 
                           
                              θ
                           
                         or variances of waiting and idle times can also be taken into account, as well as specific costs related to particular (types of) patients. Clearly, the results obtained by optimisation studies highly depend on what criteria are effectively considered in (16). For example, C depends only on 
                           
                              
                                 
                                    W
                                 
                                 
                                    ‾
                                 
                              
                           
                         and 
                           
                              
                                 
                                    I
                                 
                                 
                                    ‾
                                 
                              
                           
                         in Bailey (1952), Liu and Liu (1998), Rohleder and Klassen (2000), and Ho and Lau (1992), on 
                           
                              
                                 
                                    W
                                 
                                 
                                    ‾
                                 
                              
                           
                         and the mean effective session duration 
                           
                              
                                 
                                    τ
                                 
                                 
                                    K
                                 
                              
                              +
                              E
                              [
                              
                                 
                                    W
                                 
                                 
                                    K
                                 
                              
                              ]
                           
                         in Wang (1997) and Hassin and Mendel (2008), and on 
                           
                              
                                 
                                    W
                                 
                                 
                                    ‾
                                 
                              
                              ,
                              
                                 
                                    I
                                 
                                 
                                    ‾
                                 
                              
                              ,
                              E
                              [
                              X
                              ]
                           
                         in Cayirli et al. (2008) and Kaandorp and Koole (2007).

In appointment scheduling for outpatients, two common practices can be distinguished. The first is to fix the appointment immediately when the patient first calls in. This is called sequential scheduling (Muthuraman & Lawley, 2008; Chakraborty et al., 2010; Turkcan et al., 2011), because the appointments are fixed one after the other. Let 
                           
                              τ
                              (
                              k
                              )
                           
                         and 
                           
                              S
                              (
                              k
                              )
                           
                         be the appointment time and consultation time of the kth calling patient respectively. If the schedule is already fixed for k patients, the decision at which time 
                           
                              τ
                              (
                              k
                              +
                              1
                              )
                           
                         to schedule the next calling patient must then be based on the schedule so far, as well as on the distribution of 
                           
                              S
                              (
                              k
                              +
                              1
                              )
                           
                        . Possibly, some global prospect of the future calling patients can be taken into account as well, in case such information is available or can be estimated. The most straightforward manner of sequential scheduling is to put the first calling patient at the start of the session, the next a short time later, and so on, until the end of the session is reached. This results in
                           
                              (17)
                              
                                 0
                                 ⩽
                                 τ
                                 (
                                 1
                                 )
                                 ⩽
                                 τ
                                 (
                                 2
                                 )
                                 ⩽
                                 …
                                 ⩽
                                 τ
                                 (
                                 K
                                 )
                                 ⩽
                                 
                                    
                                       t
                                    
                                    
                                       max
                                    
                                 
                                 ,
                              
                           
                        and therefore 
                           
                              τ
                              (
                              k
                              )
                              =
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                        . This is called First-come-first-appointment (FCFA) in Rohleder and Klassen (2000). However, one can also decide not to maintain the calling order in the schedule, i.e. 
                           
                              τ
                              (
                              k
                              )
                              
                              ≠
                              
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                        , and put a new patient before a previously scheduled patient. This can be due e.g. to preference of the involved patient or because of other imposed time constraints. In any case, the problem with scheduling sequentially is that once an appointment time is assigned to a patient, it cannot be altered afterwards. If in hindsight it turns out that some minor adjustments would result in lower expected cost C, it is impossible to implement this.

This problem can be overcome by using a two-step procedure referred to as advance scheduling. First the desk administrator takes in the calls from all patients, without yet giving them an exact appointment time 
                           
                              τ
                              (
                              k
                              )
                           
                        . After enough (say K) patients have called for an appointment, an optimal schedule is determined, either by hand or by an automated search algorithm. Once the schedule is decided, each patient is contacted again and notified their respective appointment time 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                         in the session.

Let us focus on the case of sequential scheduling and how this process can be assisted. Suppose a schedule for a particular session already exists when a new patient calls in. This patient must be added to the schedule by the administration in one of the slots. In doing so it would be useful to know, for each slot, the waiting time that the patient will experience if it were to be scheduled in that slot, as well as the incurred idle time for the physician. This information can be obtained from the schedule so far as follows.

Consider again the schedule as defined in the previous section, but disregard future patients. That is, consider only the consultations of the first k patients with appointment times 
                           
                              
                                 
                                    τ
                                 
                                 
                                    1
                                 
                              
                           
                         to 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                        . Let 
                           
                              
                                 
                                    R
                                 
                                 
                                    k
                                    ,
                                    i
                                 
                              
                              ,
                              
                              0
                              ⩽
                              i
                              ⩽
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              -
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                        , denote the remaining work for the physician i slots after 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                        , the last patient’s appointment. Likewise, also in slot 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                              +
                              i
                           
                        , define 
                           
                              
                                 
                                    J
                                 
                                 
                                    k
                                    ,
                                    i
                                 
                              
                           
                         as the time that the physician has been idle since the last patient’s consultation finished. We refer to this quantity as the running idle time. Let us assume for now the physician is already present when the kth patient arrives, i.e.
                           
                              (18)
                              
                                 θ
                                 ⩽
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                    
                                 
                                 .
                              
                           
                        Then, with the auxiliary variable
                           
                              (19)
                              
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 i
                                 ,
                              
                           
                        we have
                           
                              (20)
                              
                                 
                                    
                                       R
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       (
                                       
                                          
                                             Q
                                          
                                          
                                             k
                                             ,
                                             i
                                          
                                       
                                       )
                                    
                                    
                                       +
                                    
                                 
                                 ,
                                 
                                 and
                                 
                                 
                                    
                                       J
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       (
                                       -
                                       
                                          
                                             Q
                                          
                                          
                                             k
                                             ,
                                             i
                                          
                                       
                                       )
                                    
                                    
                                       +
                                    
                                 
                                 ,
                              
                           
                        analogous to (4) and (5). Clearly, 
                           
                              
                                 
                                    R
                                 
                                 
                                    k
                                    ,
                                    i
                                 
                              
                           
                         and 
                           
                              
                                 
                                    J
                                 
                                 
                                    k
                                    ,
                                    i
                                 
                              
                           
                         respectively correspond to the waiting time and physician idle time of an additional patient if it were to be scheduled in slot 
                           
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                              +
                              i
                           
                        , which is precisely the reason why these quantities are useful in sequential scheduling. Their moments can be calculated in exactly the same way as in (9)–(14). We thus find
                           
                              (21)
                              
                                 E
                                 [
                                 
                                    
                                       R
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 ]
                                 =
                                 E
                                 [
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 ]
                                 +
                                 
                                    
                                       μ
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 i
                                 +
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 ,
                              
                           
                        
                        
                           
                              
                                 Var
                                 [
                                 
                                    
                                       R
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 ]
                                 =
                                 Var
                                 [
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 ]
                                 +
                                 
                                    
                                       σ
                                    
                                    
                                       k
                                    
                                    
                                       2
                                    
                                 
                                 +
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                    
                                       2
                                    
                                 
                                 -
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             =
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 -
                                 2
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 E
                                 [
                                 
                                    
                                       R
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 ]
                                 ,
                              
                           
                        and
                           
                              (22)
                              
                                 E
                                 [
                                 
                                    
                                       J
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 ]
                                 =
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 ,
                                 
                                 Var
                                 [
                                 
                                    
                                       J
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 ]
                                 =
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             =
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 -
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                    
                                       2
                                    
                                 
                                 ,
                              
                           
                        with
                           
                              (23)
                              
                                 
                                    
                                       
                                          
                                             ℓ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          =
                                          0
                                       
                                       
                                          i
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          n
                                          =
                                          0
                                       
                                       
                                          i
                                          -
                                          m
                                       
                                    
                                 
                                 (
                                 i
                                 -
                                 n
                                 -
                                 m
                                 )
                                 
                                    
                                       s
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 m
                                 )
                                 
                                    
                                       w
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 n
                                 )
                                 ,
                              
                           
                        
                        
                           
                              (24)
                              
                                 
                                    
                                       
                                          
                                             
                                                ℓ
                                             
                                             
                                                =
                                             
                                          
                                       
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          m
                                          =
                                          0
                                       
                                       
                                          i
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          n
                                          =
                                          0
                                       
                                       
                                          i
                                          -
                                          m
                                       
                                    
                                 
                                 
                                    
                                       (
                                       i
                                       -
                                       n
                                       -
                                       m
                                       )
                                    
                                    
                                       2
                                    
                                 
                                 
                                    
                                       s
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 m
                                 )
                                 
                                    
                                       w
                                    
                                    
                                       k
                                    
                                 
                                 (
                                 n
                                 )
                                 .
                              
                           
                        For example, the expected remaining work and running idle time for a session of length 
                           
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              =
                              120
                           
                         with 6 already scheduled patients is visualised in Fig. 6
                        
                        . In this graph, time is shown on the horizontal axis and the appointment times of the 6 patients are indicated. For each patient 
                           
                              k
                              ,
                              E
                              [
                              
                                 
                                    W
                                 
                                 
                                    k
                                 
                              
                              ]
                           
                         and 
                           
                              E
                              [
                              
                                 
                                    I
                                 
                                 
                                    k
                                 
                              
                              ]
                           
                         are plotted on the positive and negative vertical axis respectively, which shows the same information as in Figs. 2–5. Additionally, the black bar shows the mean consultation time which is the average workload each patient poses on the system. The graph also gives an idea of how the schedule performs between appointments by showing the curves of the mean remaining work and running idle time. That is, for each slot 
                           
                              t
                              ⩾
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                         we show the average amount of time 
                           
                              E
                              [
                              
                                 
                                    R
                                 
                                 
                                    k
                                    ,
                                    t
                                    -
                                    
                                       
                                          τ
                                       
                                       
                                          k
                                       
                                    
                                 
                              
                              ]
                           
                         that the physician still has to spend in slot t on the first k patients. Likewise, the curves on the negative vertical axis show the average amount of time 
                           
                              E
                              [
                              
                                 
                                    J
                                 
                                 
                                    k
                                    ,
                                    t
                                    -
                                    
                                       
                                          τ
                                       
                                       
                                          k
                                       
                                    
                                 
                              
                              ]
                           
                         since the physician completed the consultation of patient k. Clearly, as the session progresses, the remaining work decreases while the running idle time increases.

In case the physician arrives later then the kth patient, i.e. when
                           
                              (25)
                              
                                 θ
                                 >
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                    
                                 
                                 ,
                              
                           
                        contrary to (18), the above formulas need to be adjusted to account for the 
                           
                              θ
                              -
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                           
                         slots in which no work is being done. That is, (19) becomes
                           
                              (26)
                              
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 -
                                 
                                    
                                       (
                                       
                                          
                                             τ
                                          
                                          
                                             k
                                          
                                       
                                       +
                                       i
                                       -
                                       θ
                                       )
                                    
                                    
                                       +
                                    
                                 
                                 ,
                              
                           
                        with straightforward adjustments for the further expressions. A consequence of (25) is that the remaining work and running idle time do not change as long as the physician has not arrived,
                           
                              
                                 
                                    
                                       R
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          n
                                          =
                                          0
                                       
                                       
                                          k
                                       
                                    
                                 
                                 
                                    
                                       S
                                    
                                    
                                       n
                                    
                                 
                                 ,
                                 
                                 and
                                 
                                 
                                    
                                       J
                                    
                                    
                                       k
                                       ,
                                       i
                                    
                                 
                                 =
                                 0
                                 ,
                                 
                                 for
                                 
                                 i
                                 ⩽
                                 θ
                                 -
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                    
                                 
                                 .
                              
                           
                        
                     

Now, regardless of the physician’s arrival time 
                           
                              θ
                           
                        , we make the following observations. The remaining work due to the first k patients at the appointment time of the following patient coincides with that patient’s waiting time and likewise for idle times, i.e.
                           
                              (27)
                              
                                 
                                    
                                       R
                                    
                                    
                                       k
                                       ,
                                       
                                          
                                             a
                                          
                                          
                                             k
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       W
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 ,
                                 
                                 and
                                 
                                 
                                    
                                       J
                                    
                                    
                                       k
                                       ,
                                       
                                          
                                             a
                                          
                                          
                                             k
                                          
                                       
                                    
                                 
                                 =
                                 
                                    
                                       I
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 .
                              
                           
                        This follows directly from the fact that (19) and (20) coincides with (4) and (5) for 
                           
                              i
                              =
                              
                                 
                                    a
                                 
                                 
                                    k
                                 
                              
                           
                        . In the same way, for 
                           
                              i
                              =
                              0
                           
                         in (19) and (20) we have
                           
                              (28)
                              
                                 
                                    
                                       R
                                    
                                    
                                       k
                                       ,
                                       0
                                    
                                 
                                 =
                                 
                                    
                                       W
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 ,
                                 
                                 and
                                 
                                 
                                    
                                       J
                                    
                                    
                                       k
                                       ,
                                       0
                                    
                                 
                                 =
                                 0
                                 ,
                              
                           
                        which, after taking expected values, is also evident from Fig. 6. Although shown for demonstration purposes, it is not really necessary to calculate 
                           
                              E
                              [
                              
                                 
                                    R
                                 
                                 
                                    k
                                    ,
                                    i
                                 
                              
                              ]
                           
                         of the kth patient for 
                           
                              i
                              ⩾
                              
                                 
                                    a
                                 
                                 
                                    k
                                 
                              
                           
                        , that is, beyond the appointment time of the next patient. Let us define the envelope of the mean remaining work curves and running idle time curves respectively as the functions
                           
                              (29)
                              
                                 
                                    
                                       R
                                    
                                    
                                       ‾
                                    
                                 
                                 (
                                 t
                                 )
                                 =
                                 E
                                 [
                                 
                                    
                                       R
                                    
                                    
                                       
                                          
                                             k
                                          
                                          
                                             ∗
                                          
                                       
                                       (
                                       t
                                       )
                                       ,
                                       t
                                       -
                                       
                                          
                                             τ
                                          
                                          
                                             ∗
                                          
                                       
                                       (
                                       t
                                       )
                                    
                                 
                                 ]
                                 ,
                                 
                                 
                                    
                                       J
                                    
                                    
                                       ‾
                                    
                                 
                                 (
                                 t
                                 )
                                 =
                                 E
                                 
                                    
                                       
                                          
                                             
                                                J
                                             
                                             
                                                
                                                   
                                                      k
                                                   
                                                   
                                                      ∗
                                                   
                                                
                                                (
                                                t
                                                )
                                                ,
                                                t
                                                -
                                                
                                                   
                                                      τ
                                                   
                                                   
                                                      ∗
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        with
                           
                              (30)
                              
                                 
                                    
                                       k
                                    
                                    
                                       ∗
                                    
                                 
                                 (
                                 t
                                 )
                                 =
                                 
                                    max
                                 
                                 {
                                 k
                                 :
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 t
                                 }
                                 ,
                                 
                                 
                                    
                                       τ
                                    
                                    
                                       ∗
                                    
                                 
                                 (
                                 t
                                 )
                                 =
                                 
                                    
                                       τ
                                    
                                    
                                       
                                          
                                             k
                                          
                                          
                                             ∗
                                          
                                       
                                       (
                                       t
                                       )
                                    
                                 
                                 ,
                              
                           
                        and for 
                           
                              t
                              ⩾
                              
                                 
                                    τ
                                 
                                 
                                    1
                                 
                              
                           
                        . In some situations it is desirable to base decisions on more than just the average performance of a schedule, for example if the objective is to minimise the probability of extremely high waiting times. The probability of extreme values is related to the variance of the waiting time distribution around its mean, as reflected by for example the Chebyshev inequality. Hence, it may be useful to calculate the variance curves as well, i.e.
                           
                              (31)
                              
                                 
                                    
                                       
                                          
                                             R
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       ‾
                                    
                                 
                                 (
                                 t
                                 )
                                 =
                                 Var
                                 
                                    
                                       
                                          
                                             
                                                R
                                             
                                             
                                                
                                                   
                                                      k
                                                   
                                                   
                                                      ∗
                                                   
                                                
                                                (
                                                t
                                                )
                                                ,
                                                t
                                                -
                                                
                                                   
                                                      τ
                                                   
                                                   
                                                      ∗
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                       
                                    
                                 
                                 ,
                                 
                                 
                                    
                                       
                                          
                                             J
                                          
                                          
                                             ‾
                                          
                                       
                                    
                                    
                                       ‾
                                    
                                 
                                 (
                                 t
                                 )
                                 =
                                 Var
                                 
                                    
                                       
                                          
                                             
                                                J
                                             
                                             
                                                
                                                   
                                                      k
                                                   
                                                   
                                                      ∗
                                                   
                                                
                                                (
                                                t
                                                )
                                                ,
                                                t
                                                -
                                                
                                                   
                                                      τ
                                                   
                                                   
                                                      ∗
                                                   
                                                
                                                (
                                                t
                                                )
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        In the examples of Figs. 8 and 9
                        
                         discussed below, the curves 
                           
                              
                                 
                                    R
                                 
                                 
                                    ‾
                                 
                              
                              (
                              t
                              )
                           
                         and 
                           
                              
                                 
                                    J
                                 
                                 
                                    ‾
                                 
                              
                              (
                              t
                              )
                           
                         on positive and negative vertical axis will be shown with a solid and dotted line respectively. Such a visual representation of the schedule’s average performance can assist the administrator if a new patient needs an appointment. For each slot t, the administrator can immediately see what the mean waiting and physician idle time for the new patient will be if it is appointed to that slot. If the new patient is effectively appointed to some slot t, everything from slot t onwards must be recalculated in order to visualise the new situation.

Let us consider a scenario where the patients are heterogeneous and belong to one of four different types of which the consultation time mass functions are shown in Fig. 7. The distributions respectively are (a) uniform between 5 and 15minutes, (b) Poisson with a mean of 15minutes, (c) 
                           
                              
                                 
                                    Γ
                                 
                                 
                                    ˆ
                                 
                              
                              (
                              20
                              ,
                              200
                              )
                           
                         and (d) geometric with a mean of 25minutes. As is clear from the respective graphs, these distributions have increasing expected value and variance. Let us assume that subsequent scheduled patients have consultation times alternating between these four distributions, i.e. 
                           
                              
                                 
                                    S
                                 
                                 
                                    1
                                 
                              
                           
                         is distributed according to (a), 
                           
                              
                                 
                                    S
                                 
                                 
                                    2
                                 
                              
                           
                         to (b), 
                           
                              
                                 
                                    S
                                 
                                 
                                    3
                                 
                              
                           
                         to (c), 
                           
                              
                                 
                                    S
                                 
                                 
                                    4
                                 
                              
                           
                         to (d), 
                           
                              
                                 
                                    S
                                 
                                 
                                    5
                                 
                              
                           
                         to (a) again and so on. If the consultation type of a patient is unknown, we may assume that each type is equally likely which results in a pmf 
                           
                              s
                              (
                              n
                              )
                              =
                              
                                 
                                    1
                                 
                                 
                                    4
                                 
                              
                              
                                 
                                    ∑
                                 
                                 
                                    k
                                    =
                                    1
                                 
                                 
                                    4
                                 
                              
                              
                                 
                                    s
                                 
                                 
                                    k
                                 
                              
                              (
                              n
                              )
                              ,
                              n
                              ⩾
                              0
                           
                        , with mean 17.5 and variance 250.

In Fig. 8 the visualisation of a 240-min session is shown for 
                           
                              K
                              =
                              12
                           
                         patients. The administrator here does not take into account the heterogeneity of the patients and only uses the overall consultation time distribution as information. Patients are given appointments 18minutes apart, which equals 
                           
                              ⌈
                              E
                              [
                              S
                              ]
                              ⌉
                           
                        . So, even if for example the first patient cannot take more than 15minutes, it is given an interval of 18min. In (b) the same schedule is shown, but now the physician arrives 30min after the start of the session. Although 
                           
                              
                                 
                                    W
                                 
                                 
                                    ‾
                                 
                              
                           
                         increases considerably this way, the mean idle time 
                           
                              
                                 
                                    I
                                 
                                 
                                    ‾
                                 
                              
                           
                         is effectively reduced from 3.06 to 1.04minutes. Note also that even though the physician starts 30minutes later, the expected session overtime increased by only 5.3minutes.

In Fig. 9 on the other hand, the administrator uses knowledge about the patient’s consultation type for scheduling. In (a) Bailey’s rule is applied: two patients are scheduled in the first slot while the rest are given an interval equal to their mean consultation time, 
                           
                              
                                 
                                    a
                                 
                                 
                                    1
                                 
                              
                              =
                              0
                              ,
                              
                              
                                 
                                    a
                                 
                                 
                                    k
                                 
                              
                              =
                              ⌈
                              E
                              [
                              
                                 
                                    S
                                 
                                 
                                    k
                                 
                              
                              ]
                              ⌉
                              ,
                              k
                              =
                              2
                              ,
                              …
                              ,
                              K
                              -
                              1
                           
                        . In (b), we show an appointment rule that is particularly easy to apply if the envelopes 
                           
                              
                                 
                                    R
                                 
                                 
                                    ‾
                                 
                              
                              (
                              t
                              )
                           
                         and/or 
                           
                              
                                 
                                    J
                                 
                                 
                                    ‾
                                 
                              
                              (
                              t
                              )
                           
                         are available. Suppose that our main optimisation goal is fairness among patients, i.e. we want the mean waiting times 
                           
                              E
                              [
                              
                                 
                                    W
                                 
                                 
                                    k
                                 
                              
                              ]
                           
                         to be more or less equal such that no patient is favoured by its position in the session. To achieve this, we can impose a target value 
                           
                              
                                 
                                    W
                                 
                                 
                                    max
                                 
                              
                           
                         for the mean patient waiting times of, say, 12min which is indicated by the horizontal grey line. The point where this line intersects with the remaining work envelope 
                           
                              
                                 
                                    R
                                 
                                 
                                    ‾
                                 
                              
                              (
                              t
                              )
                           
                         is where the next patient will be scheduled. There is no sense in making the first patient wait however, which makes that 
                           
                              
                                 
                                    W
                                 
                                 
                                    ‾
                                 
                              
                              =
                              10.5
                           
                        
                        minutes instead of 12minutes. This way of sequential scheduling could be extended by an additional target 
                           
                              
                                 
                                    I
                                 
                                 
                                    max
                                 
                              
                           
                         for the idle times. If k patients are already scheduled, the appointment time of patient 
                           
                              k
                              +
                              1
                           
                         is decided by
                           
                              
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                       +
                                       1
                                    
                                 
                                 =
                                 
                                    min
                                 
                                 {
                                 
                                    
                                       t
                                    
                                    
                                       W
                                    
                                 
                                 ,
                                 
                                    
                                       t
                                    
                                    
                                       I
                                    
                                 
                                 }
                                 ,
                              
                           
                        with
                           
                              
                                 
                                    
                                       t
                                    
                                    
                                       W
                                    
                                 
                                 =
                                 
                                    min
                                 
                                 {
                                 t
                                 ⩾
                                 
                                    
                                       τ
                                    
                                    
                                       k
                                    
                                 
                                 :
                                 R
                                 (
                                 t
                                 )
                                 <
                                 
                                    
                                       W
                                    
                                    
                                       max
                                    
                                 
                                 }
                                 ,
                                 
                                 and
                                 
                                 
                                    
                                       t
                                    
                                    
                                       I
                                    
                                 
                                 =
                                 
                                    max
                                 
                                 {
                                 t
                                 :
                                 J
                                 (
                                 t
                                 )
                                 <
                                 
                                    
                                       I
                                    
                                    
                                       max
                                    
                                 
                                 }
                                 .
                              
                           
                        
                     


                     
                        Algorithm 1
                        Schedule evaluation in case 
                              
                                 θ
                                 ⩽
                                 
                                    
                                       τ
                                    
                                    
                                       1
                                    
                                 
                              
                            
                           
                              
                                 
                                    
                                    
                                       
                                          1: for 
                                             
                                                
                                                   j
                                                   =
                                                   0
                                                   ,
                                                   …
                                                   ,
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         max
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         τ
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                              
                                             do
                                          
                                       
                                       
                                          2:  
                                             
                                                
                                                   
                                                      
                                                         w
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   j
                                                   )
                                                   ←
                                                   0
                                                
                                             
                                          
                                       
                                       
                                          3: end for
                                          
                                       
                                       
                                          4: 
                                                
                                                   
                                                      
                                                         w
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   (
                                                   0
                                                   )
                                                   ←
                                                   1
                                                   ,
                                                   
                                                   E
                                                   [
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   ]
                                                   ←
                                                   0
                                                   ,
                                                   
                                                   Var
                                                   [
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                   ]
                                                   ←
                                                   0
                                                
                                             
                                          
                                       
                                       
                                          5: for 
                                             
                                                
                                                   k
                                                   =
                                                   1
                                                   ,
                                                   …
                                                   ,
                                                   K
                                                
                                              
                                             do
                                          
                                       
                                       
                                          6:  
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         k
                                                         ,
                                                         -
                                                         1
                                                      
                                                   
                                                   ←
                                                   0
                                                
                                             
                                          
                                       
                                       
                                          7:  
                                             for 
                                             
                                                
                                                   i
                                                   =
                                                   0
                                                   ,
                                                   …
                                                   ,
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         max
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         τ
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                
                                              
                                             do
                                          
                                       
                                       
                                          8:  
                                             
                                                
                                                   
                                                      
                                                         β
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                      
                                                   
                                                   ←
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         m
                                                         =
                                                         0
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   
                                                      
                                                         s
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   (
                                                   m
                                                   )
                                                   
                                                      
                                                         w
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   (
                                                   i
                                                   -
                                                   m
                                                   )
                                                
                                             
                                          
                                       
                                       
                                          9:  
                                             
                                                
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                      
                                                   
                                                   ←
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                         -
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         β
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          10:  
                                             end for
                                          
                                       
                                       
                                          11:  
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                         ,
                                                         0
                                                      
                                                   
                                                   ←
                                                   0
                                                   ,
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ℓ
                                                               
                                                               
                                                                  =
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                         ,
                                                         0
                                                      
                                                   
                                                   ←
                                                   0
                                                
                                             
                                          
                                       
                                       
                                          12:  
                                             for 
                                             
                                                
                                                   i
                                                   =
                                                   1
                                                   ,
                                                   …
                                                   ,
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                
                                              
                                             do
                                          
                                       
                                       
                                          13:  
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                      
                                                   
                                                   ←
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                         -
                                                         1
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                         -
                                                         1
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          14:  
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ℓ
                                                               
                                                               
                                                                  =
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                      
                                                   
                                                   ←
                                                   
                                                      
                                                         ∑
                                                      
                                                      
                                                         j
                                                         =
                                                         1
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   
                                                      
                                                         j
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   
                                                      
                                                         β
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                         -
                                                         j
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          15:  
                                             end for
                                          
                                       
                                       
                                          16:  
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   ←
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                         ,
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                   ,
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ℓ
                                                               
                                                               
                                                                  =
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   ←
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ℓ
                                                               
                                                               
                                                                  =
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                         ,
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          17:  
                                             
                                                
                                                   
                                                      
                                                         w
                                                      
                                                      
                                                         k
                                                         +
                                                         1
                                                      
                                                   
                                                   (
                                                   0
                                                   )
                                                   ←
                                                   
                                                      
                                                         α
                                                      
                                                      
                                                         k
                                                         ,
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          18:  
                                             for 
                                             
                                                
                                                   j
                                                   =
                                                   0
                                                   ,
                                                   …
                                                   ,
                                                   
                                                      
                                                         t
                                                      
                                                      
                                                         max
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         τ
                                                      
                                                      
                                                         k
                                                         +
                                                         1
                                                      
                                                   
                                                
                                              
                                             do
                                          
                                       
                                       
                                          19:  
                                             
                                                
                                                   
                                                      
                                                         w
                                                      
                                                      
                                                         k
                                                         +
                                                         1
                                                      
                                                   
                                                   (
                                                   j
                                                   )
                                                   ←
                                                   
                                                      
                                                         β
                                                      
                                                      
                                                         k
                                                         ,
                                                         
                                                            
                                                               a
                                                            
                                                            
                                                               k
                                                            
                                                         
                                                         +
                                                         j
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          20:  
                                             end for
                                          
                                       
                                       
                                          21:  
                                             
                                                
                                                   E
                                                   [
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         k
                                                         +
                                                         1
                                                      
                                                   
                                                   ]
                                                   ←
                                                   E
                                                   [
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   ]
                                                   +
                                                   
                                                      
                                                         μ
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          22:  
                                             
                                                
                                                   Var
                                                   [
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         k
                                                         +
                                                         1
                                                      
                                                   
                                                   ]
                                                   ←
                                                   Var
                                                   [
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   ]
                                                   +
                                                   
                                                      
                                                         σ
                                                      
                                                      
                                                         k
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   -
                                                   2
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   E
                                                   [
                                                   
                                                      
                                                         W
                                                      
                                                      
                                                         k
                                                         +
                                                         1
                                                      
                                                   
                                                   ]
                                                   -
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ℓ
                                                               
                                                               
                                                                  =
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          23:  
                                             
                                                
                                                   E
                                                   [
                                                   
                                                      
                                                         I
                                                      
                                                      
                                                         k
                                                         +
                                                         1
                                                      
                                                   
                                                   ]
                                                   ←
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          24:  
                                             
                                                
                                                   Var
                                                   [
                                                   
                                                      
                                                         I
                                                      
                                                      
                                                         k
                                                         +
                                                         1
                                                      
                                                   
                                                   ]
                                                   ←
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  ℓ
                                                               
                                                               
                                                                  =
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         
                                                            
                                                               ℓ
                                                            
                                                            
                                                               ¯
                                                            
                                                         
                                                      
                                                      
                                                         k
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          25:  
                                             for 
                                             
                                                
                                                   i
                                                   =
                                                   0
                                                   ,
                                                   …
                                                   ,
                                                   
                                                      
                                                         a
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   -
                                                   1
                                                
                                              
                                             do
                                          
                                       
                                       
                                          26:  
                                             
                                                
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         τ
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   +
                                                   i
                                                   )
                                                   ←
                                                   E
                                                   ]
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   ,
                                                   i
                                                   ]
                                                
                                              by (21)
                                          
                                       
                                       
                                          27:  
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               R
                                                            
                                                            
                                                               ‾
                                                            
                                                         
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         τ
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   +
                                                   i
                                                   )
                                                   ←
                                                   Var
                                                   [
                                                   
                                                      
                                                         R
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                      
                                                   
                                                   ]
                                                
                                              by (21)
                                          
                                       
                                       
                                          28:  
                                             
                                                
                                                   
                                                      
                                                         J
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         τ
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   +
                                                   i
                                                   )
                                                   ←
                                                   E
                                                   [
                                                   
                                                      
                                                         J
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                      
                                                   
                                                   ]
                                                
                                              by (22)
                                          
                                       
                                       
                                          29:  
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               J
                                                            
                                                            
                                                               ‾
                                                            
                                                         
                                                      
                                                      
                                                         ‾
                                                      
                                                   
                                                   (
                                                   
                                                      
                                                         τ
                                                      
                                                      
                                                         k
                                                      
                                                   
                                                   +
                                                   i
                                                   )
                                                   ←
                                                   Var
                                                   [
                                                   
                                                      
                                                         J
                                                      
                                                      
                                                         k
                                                         ,
                                                         i
                                                      
                                                   
                                                   ]
                                                
                                              by (22)
                                          
                                       
                                       
                                          30:  
                                             end for
                                          
                                       
                                       
                                          31: end for
                                          
                                       
                                    
                                 
                              
                           
                        

The method in Section 3.2 for evaluating a schedule in terms of the incurred waiting and idle times is both fast and accurate, using only floating-point additions and multiplications. To give an idea of the expected speed, we briefly focus on the computational complexity of the algorithm in terms of the required number of floating-point multiplications. The most demanding part is the calculation of the probabilities 
                        
                           W
                        
                      in (15) by means of (7), for which the number of required floating-point multiplications (FPM) is
                        
                           (32)
                           
                              FPM
                              (
                              W
                              )
                              =
                              
                                 
                                    1
                                 
                                 
                                    2
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       =
                                       1
                                    
                                    
                                       K
                                    
                                 
                              
                              (
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              -
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                              +
                              2
                              )
                              (
                              
                                 
                                    t
                                 
                                 
                                    max
                                 
                              
                              -
                              
                                 
                                    τ
                                 
                                 
                                    k
                                 
                              
                              +
                              1
                              )
                              ,
                           
                        
                     if the consultation times have infinite support or possibly less if this is not the case.

Besides the per-patient performance criteria of Section 3.2, we also want to calculate the envelopes 
                        
                           
                              
                                 R
                              
                              
                                 ‾
                              
                           
                           (
                           t
                           )
                           ,
                           
                           
                              
                                 
                                    
                                       R
                                    
                                    
                                       ‾
                                    
                                 
                              
                              
                                 ‾
                              
                           
                           (
                           t
                           )
                           ,
                           
                           
                              
                                 J
                              
                              
                                 ‾
                              
                           
                           (
                           t
                           )
                           ,
                           
                           
                              
                                 
                                    
                                       J
                                    
                                    
                                       ‾
                                    
                                 
                              
                              
                                 ‾
                              
                           
                           (
                           t
                           )
                        
                      of remaining work and running idle time as discussed in Section 4.3. Upon close inspection, it turns out that many of the additional required multiplications are identical to those required for the set 
                        
                           W
                        
                     . Therefore, we have devised Algorithm 1 which meticulously avoids doing the same multiplication more than once. For ease of argument, we only consider the case where condition (25) holds, i.e. where the patients do not have to wait for the physician. The set 
                        
                           W
                        
                      is calculated on lines 7–10 where auxiliary variables 
                        
                           
                              
                                 α
                              
                              
                                 k
                                 ,
                                 i
                              
                           
                        
                      and 
                        
                           
                              
                                 β
                              
                              
                                 k
                                 ,
                                 i
                              
                           
                        
                      are introduced for efficient computation. The algorithm spends most of the time here, doing exactly 
                        
                           FPM
                           (
                           W
                           )
                        
                      multiplications in total on line 8. Some additional (floating-point) multiplications are done on further lines as well. On line 14, i multiplications are done every pass, amounting to 
                        
                           
                              
                                 a
                              
                              
                                 k
                              
                           
                           (
                           
                              
                                 a
                              
                              
                                 k
                              
                           
                           +
                           1
                           )
                           /
                           2
                        
                      per patient. Both lines 22 and 27 require 3 multiplications per pass, amounting to 
                        
                           3
                           
                              
                                 a
                              
                              
                                 k
                              
                           
                           +
                           3
                        
                      per patient. We can thus conclude that if the schedule’s performance is computed by means of Algorithm 1, the total complexity is
                        
                           (33)
                           
                              FPM
                              =
                              FPM
                              (
                              W
                              )
                              +
                              
                                 
                                    1
                                 
                                 
                                    2
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       =
                                       1
                                    
                                    
                                       K
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          
                                             a
                                          
                                          
                                             k
                                          
                                          
                                             2
                                          
                                       
                                       +
                                       7
                                       
                                          
                                             a
                                          
                                          
                                             k
                                          
                                       
                                       +
                                       6
                                    
                                 
                              
                              .
                           
                        
                     For a typical schedule with K patients equidistantly spaced a slots apart, we have 
                        
                           
                              
                                 τ
                              
                              
                                 k
                              
                           
                           =
                           (
                           k
                           -
                           1
                           )
                           a
                        
                      and 
                        
                           
                              
                                 t
                              
                              
                                 max
                              
                           
                           =
                           Ka
                        
                     , resulting in a complexity for the waiting time probabilities of 
                        
                           FPM
                           (
                           W
                           )
                           =
                           
                              
                                 K
                              
                              
                                 3
                              
                           
                           
                              
                                 a
                              
                              
                                 2
                              
                           
                           /
                           6
                           +
                           O
                           (
                           
                              
                                 K
                              
                              
                                 2
                              
                           
                           
                              
                                 a
                              
                              
                                 2
                              
                           
                           )
                        
                     , or equivalently, 
                        
                           
                              
                                 Kt
                              
                              
                                 max
                              
                              
                                 2
                              
                           
                           /
                           6
                           +
                           O
                           (
                           
                              
                                 t
                              
                              
                                 max
                              
                              
                                 2
                              
                           
                           )
                        
                     . The second term in (33) however, is only of complexity 
                        
                           
                              
                                 Ka
                              
                              
                                 2
                              
                           
                           /
                           2
                           +
                           O
                           (
                           Ka
                           )
                           =
                           
                              
                                 t
                              
                              
                                 max
                              
                              
                                 2
                              
                           
                           /
                           2
                           K
                           +
                           O
                           (
                           
                              
                                 t
                              
                              
                                 max
                              
                           
                           )
                        
                     . To give an idea, a large schedule of 4hours with a granularity of 
                        
                           Δ
                           =
                           1
                        
                     
                     minute and 
                        
                           K
                           =
                           10
                        
                      equally spaced patients requires exactly 
                        
                           FPM
                           =
                           113
                           ,
                           245
                        
                      multiplications of which 112,870 are for calculating 
                        
                           W
                        
                     . This can be done by a moderate-speed computer in under 0.1milliseconds. The mean remaining work envelope 
                        
                           
                              
                                 R
                              
                              
                                 ‾
                              
                           
                           (
                           t
                           )
                        
                      of this schedule is shown in Fig. 10
                     . In this figure we also demonstrate what the effect is of increasing the granularity 
                        
                           Δ
                        
                      to values of 2, 4, 8 and 12minutes on both the envelope and the algorithm complexity (33). Conveniently, these values of 
                        
                           Δ
                        
                      are all integer factors of the time (24minutes) between appointments, so the appointment times are unaffected. It is seen that choosing a larger 
                        
                           Δ
                        
                      reduces the calculation time considerably, but at the same time severely sacrifices accuracy of the schedule’s performance prediction. Choosing an appropriate value of 
                        
                           Δ
                        
                      is therefore a matter of trade-off, not only between calculation speed and accuracy but also depending on how confident we are in the used a priori consultation time distributions and on what is feasible in a realistic medical administrative setting.

@&#CONCLUSIONS@&#

We have proposed an analytic approach for evaluating appointment schedules on finite sessions that allows to obtain accurate results with very low computational complexity. By imposing a discrete-time setting and using Lindley’s recursion, we show that only a limited set 
                        
                           W
                        
                      of waiting time probabilities needs to be calculated in order to obtain the moments of patient waiting times and physician idle times. Additionally, we propose two new metrics that can assist in scheduling the patients sequentially: the mean remaining work and mean running idle time envelopes, which characterise the average performance of the schedule in each slot of the session. All necessary calculations are arranged in an efficient algorithm that requires 
                        
                           
                              
                                 Kt
                              
                              
                                 max
                              
                              
                                 2
                              
                           
                           /
                           6
                           +
                           O
                           (
                           
                              
                                 t
                              
                              
                                 max
                              
                              
                                 2
                              
                           
                           )
                        
                      floating-point multiplications for a typical schedule of length 
                        
                           
                              
                                 t
                              
                              
                                 max
                              
                           
                        
                      and with K equidistantly spaced patients. The fact that the evaluation can be done very fast, makes our approach an ideal candidate for use in optimisation studies.

Future work will focus on extending this algorithm for the case where patients are unpunctual to some degree, i.e. patient k arrives at 
                        
                           
                              
                                 τ
                              
                              
                                 k
                              
                           
                           +
                           
                              
                                 ν
                              
                              
                                 k
                              
                           
                        
                      where 
                        
                           
                              
                                 ν
                              
                              
                                 k
                              
                           
                        
                      is a random variable that can take both positive and negative values. In the case of advance scheduling we aim at efficient search strategies and heuristics to find either optimal or close-to-optimal schedules, while for sequential scheduling simple but efficient scheduling rules are needed. In both cases we will also look at ways to make the schedule robust against other uncertain events, like e.g. the possibility that the physician is called away for an emergency.

@&#ACKNOWLEDGEMENT@&#

We wish to thank the anonymous reviewers for closely examining this work and for their elaborate and valuable comments.

@&#REFERENCES@&#

