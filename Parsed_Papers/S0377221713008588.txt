@&#MAIN-TITLE@&#Effective location models for sorting recyclables in public management

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           New models to the facility location problem in public management settings.


                        
                        
                           
                           Stochastic model considers costs, demands and capacities uncertainty outcomes.


                        
                        
                           
                           Risk-averse model deals with the variability of the second-stage costs.


                        
                        
                           
                           Models were analyzed from the public management viewpoint under a real data setting.


                        
                        
                           
                           Considerable improvement in the actual selective collection of the city.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Dynamic facility location problem

Selective collection

Recyclable materials

Stochastic programming

Minimax

Conditional value-at-risk

@&#ABSTRACT@&#


               
               
                  The recycling of urban solid wastes is a critical point for the “closing supply chains” of many products, mainly when their value cannot be completely recovered after use. In addition to environmental aspects, the process of recycling involves technical, economic, social and political challenges for public management. For most of the urban solid waste, the management of the end-of-life depends on selective collection to start the recycling process. For this reason, an efficient selective collection has become a mainstream tool in the Brazilian National Solid Waste Policy. In this paper, we study effective models that might support the location planning of sorting centers in a medium-sized Brazilian city that has been discussing waste management policies over the past few years. The main goal of this work is to provide an optimal location planning design for recycling urban solid wastes that fall within the financial budget agreed between the municipal government and the National Bank for Economic and Social Development. Moreover, facility planning involves deciding on the best sites for locating sorting centers along the four-year period as well as finding ways to meet the demand for collecting recyclable materials, given that economic factors, consumer behavior and environmental awareness are inherently uncertain future outcomes. To deal with these issues, we propose a deterministic version of the classical capacity facility location problem, and both a two-stage recourse formulation and risk-averse models to reduce the variability of the second-stage costs. Numerical results suggest that it is possible to improve the current selective collection, as well as hedge against data uncertainty by using stochastic and risk-averse optimization models.
               
            

@&#INTRODUCTION@&#

According to IPEA (IPEA, 2012), Brazil can obtain approximately R$ 8billion per year through the recovery of recyclable materials. In 2011, 177t of urban solid waste were generated daily, of which 31.9%were recyclable materials (ABRELPE, 2012). Although recycling in Brazil has experienced a rapid increase in the last decade, there are still some barriers that account for the low recycling rate when compared to other countries. Among the factors that contribute to this are the high cost of the selective collection and the scarcity of adequate rating systems related to the storage and the processing of waste at the sorting centers (Simonetto & Borenstein, 2006). Because selective collection involves the reverse logistics of many types of products, it is necessary to clearly define the roles that the society, companies and the government play to achieve a successful selective collection. In order to bring materials such as plastic, metal and glass back to the industry, a significant commitment between the society, the government and companies is required. Despite the increase in environmental awareness, it is essential to define legislative, economic and social incentives to support recycling, as the recovery of used materials and products may not be economically attractive (Cruz-Rivera & Ertel, 2009). In turn, the government is responsible for establishing both economic incentives and environmental legislative regulations for companies and citizens. Many economic incentives are based on reducing the consumption of raw materials and reducing costs for waste treatment. These issues are important for Green Supply Chain Management (GSCM) practices in public management.

Since October 2010, The National Solid Waste Policy (PNRS, in the Portuguese abbreviation) regulates recycling activities in the country, and establishes rules for cooperation among the federal, the state and the municipal governments. Although the PNRS is a federal law (Law no. 12.305/10), all states and municipalities can determine regional rules regarding their own residues. Since different regions might face the same challenges, regional cooperation is stimulated so that good practices and solutions can be shared. The PNRS clearly states that the management of solid urban waste is the responsibility of the municipal government, and conditions the transferring of federal funds to the municipalities which are in compliance with the recycling goals. This policy is also crucial to achieve proper urban waste management, as it extends the responsibility of the product’s life cycle and their sustainable reuse in the same cycle or in others. In compliance with the PNRS initiatives, more and more companies have designed eco-friendly products and packages. However, there is no guarantee that recyclable materials will be effectively recycled due to market limitations. As a result, most of these residues are simply disposed of in landfills. The PNRS also attributes the responsibility for the end-of-life of products such as tires and batteries to producers, but the management of the end-of-life of most urban solid wastes depend on their selective collection so the recycling process can start. In this context, an efficient selective collection has become a mainstream tool of the National Solid Waste Policy.

Despite the fact that waste collection in Brazil is undertaken by statutory authorities, the PNRS increases the social role of recycling operations by encouraging cooperative-based initiatives. In turn, these organizations encourage social inclusion and income generation for marginalized members of society, since working in the cooperatives provides better financial benefits and resocialization through intense participation in the cooperative decisions, education, training and information. For these reasons, many enterprises have been supporting selective collection programs by cooperatives, by recognizing not only their social impact, but also the environmental and economic importance of recovering recyclable materials.

One of the major challenges in the recycling process is the coordination of the different members in the green supply chain: consumers, producers, and suppliers. Fig. 1
                      presents the relationship between the main stakeholders involved in the supply chain of recyclable materials. These actors are not all necessarily in the same supply chain, as consumer goods are composed of different materials (plastic, metal, glass, paper/cardboard). Consequently, the GSCM practices adopted are not homogeneous along the chain. An example of non-homogeneous practices along the GSCM is the lack of reverse plans by many of the companies that develop products and packaging and do not worry about retrieving their value after use, or whether there are recycling companies capable of dealing with post-consumption waste. Hence, one of the great challenges faced by public management lies in managing the collection of recyclable materials from the population (consumers), supporting the sorting activities (sorting centers), and regulating the procurement of recyclable materials by recycling companies in the presence of various groups with possible divergent interests.

The collection of recyclable materials in urban settings also poses inherent challenges, such as the vast collection area, the low density of the transported material, and the high transportation costs. The manner in which the products are transported, the number of facilities and their locations have a great impact on global transportation efficiency, as pointed out by Dekker, Bloemhof, and Mallidis (2012). Also, since a large number of journeys is necessary to generate a large enough amount of materials for recycling, decisions concerning the number and/or location of the facilities are crucial for the economic viability of the selective collection.

In this paper, we address the problem of location planning for sorting centers in the city of Sorocaba (23°30′7″S, 47°27′28″W, Sao Paulo State, Brazil; see Fig. 2
                      for an overview of the region), whose population is approximately 580 thousand inhabitants. The location of sorting centers is the corner-stone of the reverse logistics in Sorocaba, since the selective collection and all the reverse supply chain operations are primarily dependent on it. Since 2006, the municipal government has been working with cooperatives in order to recover the value of recyclable waste in an effort to minimize landfill consumption. Also in 2006, public authorities and civil society entities agreed to develop a selective collection program where the cooperatives would perform the recycling activities jointly with the support of the municipal government. To encourage the creation and maintenance of cooperatives in Sorocaba, the municipal government and some private companies have been providing trucks, shed rental, equipments (baler, conveyor, forklift, scale, etc.), informative leaflets to raise awareness about this issue, as well as training and education to the members of the cooperatives (Simões, Ferraz, Mancini, Bonilla, & Bizzo, 2011).

In 2012, the National Bank for Economic and Social Development (BNDES), jointly with the municipal government, signed a contract providing financial resources to expand and improve selective collection in the city over the following years. The commitment of the municipal government and the cooperative representatives consists in presenting a facility planning design for recycling urban solid wastes that fall within the financial budget agreed by the parties. Facility planning involves deciding on the best sites for locating sorting centers as well as finding ways to meet the demand for collecting recyclable materials, given that economic factors, consumer behavior and environmental awareness are inherently uncertain future outcomes. Thus, we propose extensions of the classical deterministic Capacity Facility Location Problem (CFLP) to consider the specificities of our real-case problem: dynamic environment, budgetary constraints, and lost demand. From the stochastic perspective, we present both a two-stage recourse formulation, and risk-averse models to cope with the following stochastic parameters: setup installation costs, shipping costs, amount of recyclables generated and sorting capacity. We also evaluate and compare each model by using real data to provide the potential benefits and some managerial insights that might be useful in practice.

The rest of this paper is organized as follows. Section 2 briefly discusses the literature review regarding green supply chain, reverse logistics and facility location. Section 3 presents the problem statement and the deterministic mathematical problem. Section 4 develops the two-stage stochastic program. Section 5 proposes the risk-averse models. Section 6 analyzes the real-case results and provides the computational performance of simulated instances. Finally, Section 7 describes the concluding remarks and future research directions.

@&#LITERATURE REVIEW@&#

Basically, GSCM comprises a set of environmental concerns into the forward Supply Chain Management (SCM) and reverse logistics, and involves eco-friendly product design, material sourcing and selection, manufacturing processes, the distribution of final products and end-of-life product management (Srivastava, 2007). In the same paper, the author classifies the GSCM literature into three major categories: the importance of the GSCM, green design and green operations. According to Mallidis and Vlachos (2011), green product design involves the following aspects: products made from recycled or remanufactured materials; products that can be reused or remanufactured; products with eco-friendly packaging; products made from organic components, and the identification of the optimum assembly sequence. On the other hand, the main focus of the green operations are the operational aspects regarding reverse logistics and network design, green manufacturing and remanufacturing, and waste management, as pointed out by Srivastava (2007). This current paper concerns green operations and, particularly, with location problems for reverse logistics.

Reverse logistics is the process of planning, implementing and controlling the flow of raw materials, stock in process, and finished goods, as well as the flow of information along the chain in order to recover their value or perform a proper disposal (Fleischmann et al., 1997, Fleischmann, Krikke, Dekker, & Flapper, 2000; Jayaraman, Patterson, & Rolland, 2003). The traditional supply chain is not prepared to the reverse movement, as reverse distribution costs are often higher, and the materials to be reused cannot be handled in the same manner as in the direct channel. Another relevant aspect of reverse logistics networks is their high degree of uncertainty in relation to the supply of used products returned by the consumers (Fleischmann et al., 1997, 2000). According to Srivastava (2008), designing effective and efficient reverse logistic networks is essential to initiate and sustain GSCM initiatives on a large scale. Several studies propose mathematical models for setting up logistic and supply chain networks. In this section, we present a selective overview of relevant papers to relate our work with the existing literature. For a comprehensive review of facility location and supply chain management models, the reader is referred to Melo, Nickel, and Saldanha-da Gama (2009).

In general, strategic reverse logistics network decisions include the choice of a collection method, the location and the capacity of the sorting and re-processing operations (Fleischmann, Beullens, Bloemhof-Ruwaard, & Wassenhove, 2001). Most of the models developed in this field are extensions of the traditional location-allocation models to a reverse logistics context (Sbihi & Eglese, 2010). Fleischmann et al. (1997) provide an early review about mathematical models for reverse logistics network. According to Melo et al. (2009), literature about location models to reverse logistics can be divided into (i) problems where the reverse network is integrated with the forward network (closed-loop) and (ii) problems that fully concentrate on recovery activities.


                        Fleischmann et al. (2001) propose a model for reverse logistics network design problem that considers three levels of facilities (plants, warehouses and test centers), as well as forward and reverse flows. Lu and Bostel (2007) further present a similar model for remanufacturing system. Jayaraman et al. (2003) present models and solution approaches for reverse distribution problems that includes product recall, product recycling and reuse, product disposal, and hazardous product return. Srivastava (2008) develops a hierarchical recovery network model to determine the collection centers to be opened in the first phase, and in the second phase, to decide the disposition, location and capacity for rework sites at different time periods. As pointed out by Alumur, Nickel, Saldanha-da Gama, and Verter (2012), almost all of the detailed reverse network design models in literature neglect the dynamic nature of the problem. These authors propose a mathematical model for multi-period reverse logistics network problems that considers manifold features such as capacity expansion of the facilities, modular capacities, variable operational costs and a profit-oriented objective function.

A number of papers address practical applications of the location models in reverse logistics contexts. Barros, Dekker, and Scholten (1998) propose a two-level location model to decide the location of intermediate facilities for recycling sand from construction waste. Cruz-Rivera and Ertel (2009) use the uncapacitated facility location problem to implement end-of-life vehicles management. Lee and Dong (2009) deal with the logistics network design problem for the recovery of end-of-life computer products.

In addition, some papers introduce optimization models for supply chain network design with environmental issues. Mallidis, Vlachos, and Dekker (2010) propose an extension of a two-level capacitated facility location problem by considering different transportation mode options and an extra objective function to minimize gas emissions. Wang, Lai, and Shi (2011) present a multi-objective model for the supply chain network design that includes the environmental investment decision. Dekker et al. (2012) present a review of other papers that applies facility location models to design sustainable supply chains.

Particularly, few papers address reverse logistics models for urban waste management. Erkut, Karagiannidis, Perkoulidis, and Tjandra (2008) propose a multicriteria model to solve a location-allocation problem of municipal solid waste management facilities in North Greece. The multiple objectives are related with economics and environmental aspects. Tralhão, Coutinho-Rodrigues, and Alçada-Almeida (2010) deal with a location problem of separable waste recycling containers. The authors develop a model to determine the number of facilities to be opened and their respective container capacities, locations, shares of the total waste of each type to be collected, and dwellings assigned to each facility. Ye, Ye, and Chuang (2011) use an integrated location set covering model with a p-median model to solve the problem of locating recycling centers. Ghiani, Laganá, Manni, and Triki (2012) propose a mathematical model to decide about the location of the garbage collection bins and the number and type of bins in each site.

Location-network design is often expensive and involves long-term decisions that are difficult to be reversed in the short or medium-term (Snyder, 2006). During the planning horizon, when design decisions are in effect, many key parameters, such as costs, demands, capacities, distances and delivery times may change substantially (Chen, Daskin, Shen, & Uryasev, 2006). For this reason, numerous papers have studied theoretical and practical aspects of facility location under uncertainty, in an attempt to identify appropriate locations that perform “well” (according to some criteria) for a number of possible configurations of the data, thus improving the system performance and avoiding the reimplementation of costly decisions.

As pointed out by Owen and Daskin (1998), research on stochastic location problems can be divided into probabilistic and scenario planning approaches. Basically, probabilistic models explicitly consider the probability distributions of the variables and parameters within a queueing framework, and/or into standard optimization programs. On the other hand, scenario planning approaches consider a predetermined set of possible realizations for the random variables. The reader is refereed to Snyder (2006) (and the references therein) for an excellent review that exclusively focuses on facility location under uncertainty. Other interesting overviews (Klose & Drexl, 2005; Owen & Daskin, 1998) study diverse models to deal with dynamic constraints and uncertainty data in strategic facility location problems and location models for distribution system design, respectively. Snyder, Scaparra, Daskin, and Church (2006) present a tutorial on facility location for supply chains under disruptions. The authors also discuss the possibility of using scenario-based stochastic programming models to hedge against uncertainty and to design more reliable decisions.

Although presenting a comprehensive review about location models for reverse logistics under uncertainty is beyond the scope of this paper, it is worth mentioning some recent contributions that use scenario-based approaches. Listes and Dekker (2005) extended the location model for product recovery network design proposed by Barros et al. (1998) to consider demand and return uncertainties. Based on the recovery network model presented by Fleischmann et al. (2001); Salema, Barbosa-Povoa, and Novais (2009) developed a model for designing a generic reverse logistics network to incorporate multi-product, capacity constraints, unmet demand and uncertainty on product demands and returns. Amin and Zhang (2013) also devised a facility location model to design a closed-loop network under uncertain demands and returns. Pishvaee, Jolai, and Razmi (2009) consider not only customer demands and returns as the uncertain parameters in their supply chain network models, but also transportation costs.

Some papers consider reverse logistics network over a multi-period planning horizon, e.g. Lee and Dong (2009) formulated a dynamic location and allocation model to reverse logistics network design under uncertainty for both the demand of forward products and the supply of returned products. El-Sayed, Afia, and El-Kharbotly (2010) proposed a model for forward-reverse logistics networks in a multi-period stochastic demand setting. Cardoso, Barbosa-Póvoa, and Relvas (2013) designed a generic supply chain network model for forward and reverse flows with capacity expansion and dynamic transportation links under an uncertain demand.

Despite the fact that Albareda-Sambola, Alonso-Ayuso, Escudero, Fernández, and Pizarro (2013) do not deal with a reverse logistics context, it seems that this recent paper is the pioneer study where multi-stage stochastic programming is used to address a generic multi-period location problem. In this paper, the authors extend the impulse-step formulation previously proposed in Albareda-Sambola et al. (2010) in order to aggregate several uncertainty sources, such as the minimum number of customers to be assigned to a facility at each period, the minimum number of facilities to be opened at each period, and the setup, maintenance and assignment costs. The uncertainties are modeled via a set of scenarios and the deterministic equivalent model is solved by the Fix-and-Relax-Coordination algorithm.

Although traditional scenario-based stochastic programs are often advantageous over deterministic approaches in hedging against uncertainty, the former has some limitations. Firstly, in practice, it may be hard to specify the probability for each scenario. Secondly, the expected value problem can generate an optimal location design with reasonable costs on average, but it ignores the risk of undesirable scenarios, e.g. scenarios with very high costs. Thirdly, very distinct scenarios (may possibly) lead to very different recourse decisions, which can compromise “solution robustness” measures, e.g. optimal solutions not “close” enough to each other (Mulvey, Vanderbei, & Zenios, 1995).

In order to overcome those limitations, several authors have addressed “robust” and/or “risk-averse” models over the past years. Roughly speaking, robust models are based on minimax criteria, which means that they minimize the worst-case scenario, by considering either the maximum cost across all scenarios or the maximum regret, i.e. the maximum difference between the cost of a solution in a given scenario and the corresponding wait-and-see cost (Kouvelis & Yu, 1997). Some variants of the traditional minimax regret models were initially proposed to the facility location problem in an attempt to provide more robust solutions. For instance, Daskin, Hesse, and ReVelle (1997) develop a model to minimize the maximum regret of the total weighted distance over a set of scenarios whose total probability is no more than a user-defined value 
                           
                              (
                              1
                              -
                              α
                              )
                           
                        . Snyder and Daskin (2006) propose a stochastic p-robust problem to limit the relative regret to no more than 
                           
                              100
                              p
                              %
                           
                         in each scenario. Following the same idea, Lim and Sonmez (2013) use the p-robustness measure in a facility relocation model. Chen et al. (2006) present the α-reliable mean-excess regret model for minimizing the expectation of the regrets associated with the scenarios that are not included in the α-reliable set. These approaches also allow the obtention of tradeoff curves between the expected cost and the (maximum) regret by varying 
                           
                              α
                           
                         and p. Even though minimax approaches can be viewed as extremely risk-averse, most literature considers them as risk-neutral stochastic programs due to their objective function expected value (expected regret) alone.

The explicit idea of “risk aversion” was introduced in the mid-60s (Markowitz, 1952, 1959), but only over the last few years risk-averse optimization has gained increased visibility in operational research. In general, risk-averse programs limit the volatility of the objective values by including a risk deviation measure in the objective function or in the constraints. Typical risk deviation measures use dispersion statistics as variance, standard deviation and mean-absolute deviation (Ahmed, 2006). More recently, there is a great effort in developing optimization models based on financial criteria, such as Value-at-Risk (VaR) and Conditional Value-at-Risk (CVaR). VaR measures the loss that is expected to be exceeded with a small probability 
                           
                              (
                              1
                              -
                              α
                              )
                           
                         during a certain time period. CVaR is the expected cost exceeding VaR at the confidence level 
                           
                              α
                           
                         (Rockafellar & Uryasev, 2000, 2002). When the objective function accounts for both expectation and risk, the corresponding problem has a mean-risk structure. The risk term is then weighted by a non-negative scalar that reflects the risk preference of the decision maker. A recent review of the literature on methods for risk-averse modeling is found in Krokhmal, Zabarankin, and Uryasev (2011).

To our knowledge, only a few papers explore risk-averse scenario-based models in location-network design for reverse logistics. Ramezani, Bashiri, and Tavakkoli-Moghaddamb (2013a) propose a multi-objective two-stage stochastic program for a forward/reverse logistic network design, and use a financial risk to account for the profits that do not meet a certain target. Ramezani, Bashiri, and Tavakkoli-Moghaddamb (2013b) formulate a minimax problem to protect the network against worst-case events and unreliable scenario probabilities. Rosa, Gebhard, Hartmann, and Wollenweber (2013) also studied a scenario-based minimax relative regret model in a multi-period reverse logistics network problem with budget allocation to deal with uncertain demands and returns.


                        Table 1
                         summarizes the literature review regarding location models for reverse logistics and shows the main differences between the existing literature and the current paper. Note that only a few papers consider the multi-period location planning with practical constraints (lost demand and budget allocation) within a scenario-based stochastic programming framework and risk-averse objectives. Specifically, our contributions over the related work can be summarized as follows. First, our paper combines concepts from three fields of operational research literature, location planning for reverse logistics, scenario-based stochastic programming and risk modeling, to generate insights about public policy issues related to location planning in the context of selective collection. Our results have important implications in terms of roles of the public management, cooperatives and perhaps non-governmental organizations in managing urban selective collection policies that might work towards the main goals of the Brazilian National Solid Waste Policy, thus strengthening the foundation for green supply chain practices. Second, our model contributes to the stochastic multi-period facility location by considering, for the first time, a scenario-based capacitated multi-period version of the classical facility location problem with budget allocation and lost demand under uncertain setup and shipping costs, demands and capacities. Although some papers have already addressed these sources of uncertainty in similar contexts, we combine them into a scenario-tree structure to better understand their relationship. We also analyze approximated decisions based on the concepts of perfect information and stochastic solution to provide alternative solutions for public managers. Thirdly, we address risk-aversion in location planning for reverse logistics by using different strategies in an attempt to enhance the variability of the recourse cost and the worst-case scenario, without overly sacrificing service levels. To the best of our knowledge, this is the first study on location planning for reverse logistics where conditional value-at-risk approaches are proposed and compared.

The process of selective collection in Sorocaba can be divided into four parts: (i) the door-to-door collection; (ii) the sorting of recyclable materials; (iii) the treatment process for some types of material; and (iv) the commercialization with local scrap dealers or recycling companies. According to Lino, Bizzo, Silva, and Ismail (2010), the separation of recyclable materials in the residences is the first step for success in the recycling process. To achieve this, cooperative members distribute information leaflets to make citizens aware of which materials should be separated from non-recyclable waste. Differently from the other countries that collect recyclable materials by types, in Brazil all of them are collected together. For this reason, this paper considers recyclable materials as a single product.

Although selective collection is needed in all residences, only the ones previously registered by the cooperatives are served. The recyclable materials generated in these houses are collected door-to-door weekly and results in a miscellany of different materials. According to the municipal government data, the recyclable materials collected comprise 30.2% cardboard, 25.5% paper, 4.3% tetra pack, 9% metals, 17.4% plastics and 12.3% glass. The materials are transported to the sorting centers by trucks, in big bags, and only an average of 0.8 t can be collected per trip.

The next step is the sorting process, which is manual and requires a lot of workers. Some sorting centers have a specially projected conveyor belt that improves job conditions and productivity. The municipal government of Sorocaba intends to provide conveyor belts to all sorting centers. After separating the materials into wider categories, they are dealt with according to the availability of the equipments in the sorting facility. The main treatment processes carried out by cooperatives are pressing and baling. Some sorting centers perform the additional process of cutting and cleansing polypropylene and polystyrene. Fig. 3
                      shows an overview of the processes in sorting centers. All the preliminary treatment carried out by the cooperative workers is essential for the recyclable materials to be sold at a fair price. After weighing and wrapping, the materials are stored in the cooperatives until a significant amount is reached for freight consolidation, seeking to reduce costs with transportation. As a higher volume of recyclable materials is necessary for commercialization with recycling companies, most of the recyclable material is commercialized with local scrap dealers.

The selective collection in the city of Sorocaba will be under intensive expansion over the next four years. The municipal government aims to locate new sorting centers that will process the annual recyclable materials generated by the population of Sorocaba. Thus, the decisions on the location of the sorting centers and on the allocation of zones to each sorting center must be made simultaneously in order to minimize installation, operating and shipping costs. The location design is limited by a financial budget previously agreed between the municipal government and BNDES. For this reason, it is not possible to collect all recyclable materials produced per year. Given this context, we propose a dynamic capacitated facility location problem with lost demand and budget allocation. In order to formulate the problem, consider the following notation:
                        
                           
                              Indices
                              
                                 
                                    
                                       
                                          
                                             I
                                             =
                                             {
                                             1
                                             ,
                                             …
                                             ,
                                             I
                                             }
                                          
                                       : set of candidate locations.


                                       
                                          
                                             J
                                             =
                                             {
                                             1
                                             ,
                                             …
                                             ,
                                             J
                                             }
                                          
                                       : set of demand zones.


                                       
                                          
                                             T
                                             =
                                             {
                                             1
                                             ,
                                             …
                                             ,
                                             T
                                             }
                                          
                                       : set of time periods.


                              General Parameters
                              
                                 
                                    
                                       p: maximum number of sorting centers that can be opened along the planning horizon (units).


                                       
                                          
                                             
                                                
                                                   q
                                                
                                                
                                                   jt
                                                
                                             
                                          
                                       : amount of recyclable materials generated in zone j in time period t (t).


                                       
                                          
                                             
                                                
                                                   Q
                                                
                                                
                                                   i
                                                
                                             
                                          
                                       : recycling capacity of the sorting center located at i (t).


                                       
                                          
                                             
                                                
                                                   γ
                                                
                                                
                                                   t
                                                
                                             
                                          
                                       : budget allocated by the municipal government for opening and operating the sorting centers in time period t ($).


                              Costs
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   c
                                                
                                                
                                                   ijt
                                                
                                             
                                          
                                       : cost for collecting all recyclables from zone j to sorting center i in time period t ($).


                                       
                                          
                                             
                                                
                                                   f
                                                
                                                
                                                   it
                                                
                                             
                                          
                                       : setup cost for installation a sorting center at location i in the beginning of time period t ($).


                                       
                                          
                                             
                                                
                                                   g
                                                
                                                
                                                   it
                                                
                                             
                                          
                                       : cost for operating a sorting center at location i in time period t ($).


                                       
                                          
                                             
                                                
                                                   h
                                                
                                                
                                                   j
                                                
                                                
                                                   -
                                                
                                             
                                          
                                       : unit penalty for not collecting recyclable materials from zone j ($).


                              Decision Variables
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   I
                                                
                                                
                                                   jt
                                                
                                                
                                                   -
                                                
                                             
                                          
                                       : amount of recyclable materials of zone j not collected in period t (t).


                                       
                                          
                                             
                                                
                                                   X
                                                
                                                
                                                   ijt
                                                
                                             
                                          
                                       : proportion of recyclable materials of zone j collected by sorting center at location i in period t.


                                       
                                          
                                             
                                                
                                                   Y
                                                
                                                
                                                   it
                                                
                                             
                                          
                                       : takes a value of 1 if sorting center at location i is operating at time period t, and 0 otherwise.


                                       
                                          
                                             
                                                
                                                   Z
                                                
                                                
                                                   it
                                                
                                             
                                          
                                       : takes a value of 1 if sorting center at location i is opened for the first time at the beginning of time period t, and 0 otherwise.


                                       
                                          
                                             
                                                
                                                   Γ
                                                
                                                
                                                   t
                                                
                                             
                                          
                                       : unused financial budget at the end of time period t ($).

The Dynamic Capacitated Facility Location problem with Budget allocation (DCFLB) can be posed as follows:
                        
                           (1)
                           
                              
                                 min
                              
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       j
                                       ∈
                                       J
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       t
                                       ∈
                                       T
                                    
                                 
                              
                              
                                 
                                    c
                                 
                                 
                                    ijt
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       t
                                       ∈
                                       T
                                    
                                 
                              
                              
                                 
                                    f
                                 
                                 
                                    it
                                 
                              
                              
                                 
                                    Z
                                 
                                 
                                    it
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       t
                                       ∈
                                       T
                                    
                                 
                              
                              
                                 
                                    g
                                 
                                 
                                    it
                                 
                              
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              +
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       j
                                       ∈
                                       J
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       t
                                       ∈
                                       T
                                    
                                 
                              
                              
                                 
                                    h
                                 
                                 
                                    j
                                 
                                 
                                    -
                                 
                              
                              
                                 
                                    I
                                 
                                 
                                    jt
                                 
                                 
                                    -
                                 
                              
                           
                        
                     
                     
                        
                           (2)
                           
                              
                                 
                                    
                                       
                                          s
                                          .
                                          t
                                          .
                                          :
                                       
                                    
                                    
                                       
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   j
                                                   ∈
                                                   J
                                                
                                             
                                          
                                          
                                             
                                                c
                                             
                                             
                                                ijt
                                             
                                          
                                          
                                             
                                                X
                                             
                                             
                                                ijt
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                f
                                             
                                             
                                                it
                                             
                                          
                                          
                                             
                                                Z
                                             
                                             
                                                it
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                g
                                             
                                             
                                                it
                                             
                                          
                                          
                                             
                                                Y
                                             
                                             
                                                it
                                             
                                          
                                          =
                                          
                                             
                                                γ
                                             
                                             
                                                t
                                             
                                          
                                          +
                                          
                                             
                                                Γ
                                             
                                             
                                                t
                                                -
                                                1
                                             
                                          
                                          -
                                          
                                             
                                                Γ
                                             
                                             
                                                t
                                             
                                          
                                          ,
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (3)
                           
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    jt
                                 
                              
                              (
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                 
                              
                              -
                              1
                              )
                              +
                              
                                 
                                    I
                                 
                                 
                                    jt
                                 
                                 
                                    -
                                 
                              
                              =
                              0
                              ,
                              
                              j
                              ∈
                              J
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (4)
                           
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       j
                                       ∈
                                       J
                                    
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    jt
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                 
                              
                              ⩽
                              
                                 
                                    Q
                                 
                                 
                                    i
                                 
                              
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (5)
                           
                              
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                 
                              
                              ⩽
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              j
                              ∈
                              J
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (6)
                           
                              
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              ⩾
                              
                                 
                                    Y
                                 
                                 
                                    i
                                    (
                                    t
                                    -
                                    1
                                    )
                                 
                              
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (7)
                           
                              
                              
                                 
                                    Z
                                 
                                 
                                    it
                                 
                              
                              ⩾
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              -
                              
                                 
                                    Y
                                 
                                 
                                    i
                                    (
                                    t
                                    -
                                    1
                                    )
                                 
                              
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (8)
                           
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       t
                                       ∈
                                       T
                                    
                                 
                              
                              
                                 
                                    Z
                                 
                                 
                                    it
                                 
                              
                              ⩽
                              p
                           
                        
                     
                     
                        
                           (9)
                           
                              
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              ∈
                              B
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (10)
                           
                              
                              
                                 
                                    Z
                                 
                                 
                                    it
                                 
                              
                              ⩾
                              0
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (11)
                           
                              
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                 
                              
                              ⩾
                              0
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              j
                              ∈
                              J
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (12)
                           
                              
                              
                                 
                                    I
                                 
                                 
                                    jt
                                 
                                 
                                    -
                                 
                              
                              ⩾
                              0
                              ,
                              
                              j
                              ∈
                              J
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (13)
                           
                              
                              
                                 
                                    Γ
                                 
                                 
                                    t
                                 
                              
                              ⩾
                              0
                              ,
                              
                              t
                              ∈
                              T
                              .
                           
                        
                     The objective function (1) seeks to minimize the total cost of shipping recyclables from zones to centers, installation a new sorting center, operating a previous installed sorting center, and not collecting the recyclable materials from the zones, respectively. Constraints (2) assign the available financial budget 
                        
                           
                              
                                 γ
                              
                              
                                 t
                              
                           
                        
                      for managing the selective collection in each time period t. The unused budget in previous periods 
                        
                           
                              
                                 Γ
                              
                              
                                 t
                                 -
                                 1
                              
                           
                        
                      goes to the next one without any discount or income. The demand flow constraint (3) states that the total amount of recyclable materials not collected by the installed sorting centers in each time period is lost, in the sense that it turns into regular garbage. Constraint (4) represents the maximum capacity of the (installed) sorting centers. Constraint (5) stipulates that recyclable materials from zone j cannot be collected by the sorting center located at i, unless this candidate is opened. Constraints (6) guarantee that once a facility at location i is installed in period t, it remains in operation until the end of the planning horizon. The logical constraints (7) link the opening state indicators 
                        
                           
                              
                                 Z
                              
                              
                                 it
                              
                           
                        
                      with the operating indicators 
                        
                           
                              
                                 Y
                              
                              
                                 it
                              
                           
                        
                     . Notice that together with the minimization of 
                        
                           
                              
                                 Z
                              
                              
                                 it
                              
                           
                        
                      in the objective function (1), 
                        
                           
                              
                                 Z
                              
                              
                                 it
                              
                           
                        
                      is only set to 1 if the sorting center at location i has not been installed in previous periods, i.e. if 
                        
                           
                              
                                 Y
                              
                              
                                 i
                                 (
                                 t
                                 -
                                 1
                                 )
                              
                           
                           =
                           0
                           ∧
                           
                              
                                 Y
                              
                              
                                 i
                                 (
                                 t
                                 -
                                 1
                                 )
                              
                           
                           =
                           1
                        
                     . For this reason, it is sufficient to impose a non-negativity constraint for the 
                        
                           
                              
                                 Z
                              
                              
                                 it
                              
                           
                        
                      variables. Constraints (8) define the maximum number of centers that can be installed along the planning horizon. Finally, constraints Eqs. (9)–(13) are the domain of the decision variables.

Model Eqs. (1)–(13) assumes that all parameters are known in advance or can be reasonably estimated to create an effective location planning for recyclable materials in the four-year horizon. However, predicting setup costs, demands and capacities turn out to be very complex, since they depend on various uncertain factors. In Sorocaba and other urban centers in Brazil, the amount of recyclable materials that arrive at cooperatives for recycling (
                        
                           
                              
                                 q
                              
                              
                                 jt
                              
                           
                        
                     ) depends on the consumption patterns of recyclable products which, in turn, varies depending on the social and economic profile of each region, e.g. richer zones tend to consume more products with high added-value, probably more recyclable, than poorer areas. Also, 
                        
                           
                              
                                 q
                              
                              
                                 jt
                              
                           
                        
                      depends on the public policies of the selective collection adopted by each city and the awareness of the population about the importance of their role in the selective collection. Shipping costs 
                        
                           
                              
                                 c
                              
                              
                                 ijt
                              
                           
                        
                      depend on the number of journeys required to transport the amount of recyclable materials from zones to sorting centers. Setup costs for installation a sorting center 
                        
                           
                              
                                 f
                              
                              
                                 jt
                              
                           
                        
                      depend on the availability of adequate infrastructure for the processes involved in screening. For our case-study, we consider that this infrastructure only involves machines and equipments (baler, conveyor, forklift, etc.), which are generally donated by the private sector in an uncertain way. The capacity of each sorting center 
                        
                           
                              
                                 Q
                              
                              
                                 i
                              
                           
                        
                      is given by the capacity of screening, which is manual and is completely dependent on the number of absentees and on the turnover of workers in cooperatives that are very high. Moreover, any fluctuation in economic growth may result in an increased or decreased availability of manpower for sorting centers.

In order to take such uncertain data into account, we assume that setup and shipping costs, demands and capacities are stochastic parameters with a known joint distribution that can be reasonably approximated by a discrete and finite set 
                        
                           W
                           =
                           {
                           1
                           ,
                           2
                           ,
                           ⋯
                           ,
                           W
                           }
                        
                      of possible realizations or scenarios. The random data vector is given by 
                        
                           ξ
                           =
                           
                              
                                 
                                    
                                       
                                          c
                                       
                                       
                                          ijt
                                       
                                    
                                    ,
                                    
                                       
                                          f
                                       
                                       
                                          it
                                       
                                    
                                    ,
                                    
                                       
                                          q
                                       
                                       
                                          jt
                                       
                                    
                                    ,
                                    
                                       
                                          Q
                                       
                                       
                                          i
                                       
                                    
                                 
                              
                           
                        
                     , whereas 
                        
                           ξ
                           =
                           
                              
                                 
                                    
                                       
                                          c
                                       
                                       
                                          ijt
                                          ω
                                       
                                    
                                    ,
                                    
                                       
                                          f
                                       
                                       
                                          it
                                          ω
                                       
                                    
                                    ,
                                    
                                       
                                          q
                                       
                                       
                                          jt
                                          ω
                                       
                                    
                                    ,
                                    
                                       
                                          Q
                                       
                                       
                                          i
                                          ω
                                       
                                    
                                 
                              
                           
                        
                      represents the random data for scenario 
                        
                           ω
                           ∈
                           W
                        
                     , with a corresponding probability of occurrence 
                        
                           
                              
                                 π
                              
                              
                                 ω
                              
                           
                        
                      that expresses its importance in the overall problem, so that 
                        
                           
                              
                                 π
                              
                              
                                 ω
                              
                           
                           >
                           0
                        
                      and 
                        
                           
                              
                                 ∑
                              
                              
                                 ω
                                 =
                                 1
                              
                              
                                 W
                              
                           
                           
                              
                                 π
                              
                              
                                 ω
                              
                           
                           =
                           1
                        
                     .

According to the two-stage stochastic programming paradigm, the decision variables are partitioned in two categories: scenario-independent or first-stage variables; and scenario-dependent or second-stage variables. As the sorting centers must be located before the occurrence of the random variables, 
                        
                           
                              
                                 Z
                              
                              
                                 it
                              
                           
                        
                      and 
                        
                           
                              
                                 Y
                              
                              
                                 it
                              
                           
                        
                      represent the first-stage decision variables. Given the first-stage decisions and the realizations of the random variables, the second-stage variable 
                        
                           
                              
                                 X
                              
                              
                                 ijt
                                 ω
                              
                           
                        
                      determines the proportion of recyclable materials of zone j collected by the sorting center at location i in scenario 
                        
                           ω
                           ,
                           
                              
                                 I
                              
                              
                                 jt
                                 ω
                              
                              
                                 -
                              
                           
                        
                      takes into account the amount of recyclable materials of zone j not collected per year in scenario 
                        
                           ω
                        
                     , and 
                        
                           
                              
                                 Γ
                              
                              
                                 t
                                 ω
                              
                           
                        
                      provides the unused budget at the end of time period t in scenario 
                        
                           ω
                        
                     . In order to formulate the Stochastic DCFLB (SDCFLB), consider the following notation:
                        
                           
                              Deterministic Data
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   g
                                                
                                                
                                                   it
                                                
                                             
                                          
                                       : cost for operating a sorting center at location i in time period t ($).


                                       
                                          
                                             
                                                
                                                   h
                                                
                                                
                                                   j
                                                
                                                
                                                   -
                                                
                                             
                                          
                                       : unit penalty for not collecting recyclable materials from zone j ($).


                                       p: number of sorting centers that can be opened (units).


                                       
                                          
                                             
                                                
                                                   γ
                                                
                                                
                                                   t
                                                
                                             
                                          
                                       : budget allocated by the municipal government for opening and operating the sorting centers in time period t ($).


                              Stochastic Data
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   c
                                                
                                                
                                                   ijt
                                                   ω
                                                
                                             
                                          
                                       : cost for collecting all recyclables from zone j to sorting center i in time period t in scenario 
                                          
                                             ω
                                          
                                        ($).


                                       
                                          
                                             
                                                
                                                   f
                                                
                                                
                                                   it
                                                   ω
                                                
                                             
                                          
                                       : setup cost for installation a sorting center at location i in the beginning of time period t in scenario 
                                          
                                             ω
                                          
                                        ($).


                                       
                                          
                                             
                                                
                                                   q
                                                
                                                
                                                   jt
                                                   ω
                                                
                                             
                                          
                                       : amount of recyclable materials generated in zone j per year in scenario 
                                          
                                             ω
                                          
                                        (t).


                                       
                                          
                                             
                                                
                                                   Q
                                                
                                                
                                                   i
                                                   ω
                                                
                                             
                                          
                                       : recycling capacity of the center located at i in scenario 
                                          
                                             ω
                                          
                                        (t).


                                       
                                          
                                             
                                                
                                                   π
                                                
                                                
                                                   ω
                                                
                                             
                                          
                                       : probability of scenario 
                                          
                                             ω
                                          
                                       .


                              First-Stage Decision Variables
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   Y
                                                
                                                
                                                   it
                                                
                                             
                                          
                                       : takes a value of 1 if sorting center at location i is operating at time period t, and 0 otherwise.


                                       
                                          
                                             
                                                
                                                   Z
                                                
                                                
                                                   it
                                                
                                             
                                          
                                       : takes a value of 1 if sorting center at location i is opened for the first time at the beginning of time period t, and 0 otherwise.


                              Second-Stage Decision Variables
                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   I
                                                
                                                
                                                   jt
                                                   ω
                                                
                                                
                                                   -
                                                
                                             
                                          
                                       : amount of recyclable materials of zone j not collected in period t in scenario 
                                          
                                             ω
                                          
                                        (t).


                                       
                                          
                                             
                                                
                                                   X
                                                
                                                
                                                   ijt
                                                   ω
                                                
                                             
                                          
                                       : proportion of recyclable materials of zone j collected by sorting center at location i in period t in scenario 
                                          
                                             ω
                                          
                                       .


                                       
                                          
                                             
                                                
                                                   Γ
                                                
                                                
                                                   t
                                                   ω
                                                
                                             
                                          
                                       : unused financial budget at the end of time period t in scenario 
                                          
                                             ω
                                          
                                        ($).

Let 
                        
                           Y
                        
                      be the set of first-stage decision variables and 
                        
                           
                              
                                 X
                              
                              
                                 ξ
                              
                           
                        
                      the set of second-stage decision variables, with corresponding objective function 
                        
                           H
                           (
                           Y
                           ,
                           
                              
                                 X
                              
                              
                                 ξ
                              
                           
                           )
                        
                     . Then, problem SDCFLB is formulated as follows:
                        
                           (14)
                           
                              H
                              (
                              Y
                              ,
                              
                                 
                                    X
                                 
                                 
                                    ξ
                                 
                              
                              )
                              =
                              
                                 
                                    
                                       min
                                    
                                    
                                       Y
                                    
                                 
                              
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       t
                                       ∈
                                       T
                                    
                                 
                              
                              
                                 
                                    g
                                 
                                 
                                    it
                                 
                              
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              +
                              E
                              [
                              Q
                              (
                              Y
                              ,
                              
                                 
                                    X
                                 
                                 
                                    ξ
                                 
                              
                              )
                              ]
                           
                        
                     
                     
                        
                           
                              
                                 
                                    
                                       
                                          s
                                          .
                                          t
                                          .
                                          :
                                       
                                    
                                    
                                       
                                          
                                          
                                             
                                                Y
                                             
                                             
                                                it
                                             
                                          
                                          ⩾
                                          
                                             
                                                Y
                                             
                                             
                                                i
                                                (
                                                t
                                                -
                                                1
                                                )
                                             
                                          
                                          ,
                                          
                                          i
                                          ∈
                                          I
                                          ,
                                          
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                          
                                             
                                                Z
                                             
                                             
                                                it
                                             
                                          
                                          ⩾
                                          
                                             
                                                Y
                                             
                                             
                                                it
                                             
                                          
                                          -
                                          
                                             
                                                Y
                                             
                                             
                                                i
                                                (
                                                t
                                                -
                                                1
                                                )
                                             
                                          
                                          ,
                                          
                                          i
                                          ∈
                                          I
                                          ,
                                          
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   t
                                                   ∈
                                                   T
                                                
                                             
                                          
                                          
                                             
                                                Z
                                             
                                             
                                                it
                                             
                                          
                                          ⩽
                                          p
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                          
                                             
                                                Y
                                             
                                             
                                                it
                                             
                                          
                                          ∈
                                          {
                                          0
                                          ,
                                          1
                                          }
                                          ,
                                          
                                          i
                                          ∈
                                          I
                                          ,
                                          
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                          
                                             
                                                Z
                                             
                                             
                                                it
                                             
                                          
                                          ⩾
                                          0
                                          ,
                                          
                                          i
                                          ∈
                                          I
                                          ,
                                          
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                              
                           
                        
                     where 
                        
                           Q
                           (
                           Y
                           ,
                           
                              
                                 X
                              
                              
                                 ξ
                              
                           
                           )
                        
                      is evaluated for all scenarios 
                        
                           ω
                           ∈
                           W
                        
                      according to the following second-stage subproblem:
                        
                           (15)
                           
                              
                                 
                                    
                                       
                                          Q
                                          (
                                          Y
                                          ,
                                          
                                             
                                                X
                                             
                                             
                                                ξ
                                             
                                          
                                          )
                                          =
                                          
                                             
                                                
                                                   min
                                                
                                                
                                                   
                                                      
                                                         X
                                                      
                                                      
                                                         ξ
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   j
                                                   ∈
                                                   J
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   t
                                                   ∈
                                                   T
                                                
                                             
                                          
                                          
                                             
                                                c
                                             
                                             
                                                ijt
                                                ω
                                             
                                          
                                          
                                             
                                                X
                                             
                                             
                                                ijt
                                                ω
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   t
                                                   ∈
                                                   T
                                                
                                             
                                          
                                          
                                             
                                                f
                                             
                                             
                                                it
                                                ω
                                             
                                          
                                          
                                             
                                                Z
                                             
                                             
                                                it
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                          +
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   j
                                                   ∈
                                                   J
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   t
                                                   ∈
                                                   T
                                                
                                             
                                          
                                          
                                             
                                                h
                                             
                                             
                                                j
                                             
                                             
                                                -
                                             
                                          
                                          
                                             
                                                I
                                             
                                             
                                                jt
                                                ω
                                             
                                             
                                                -
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (16)
                           
                              
                                 
                                    
                                       
                                          s
                                          .
                                          t
                                          .
                                          :
                                       
                                    
                                    
                                       
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   j
                                                   ∈
                                                   J
                                                
                                             
                                          
                                          
                                             
                                                c
                                             
                                             
                                                ijt
                                                ω
                                             
                                          
                                          
                                             
                                                X
                                             
                                             
                                                ijt
                                                ω
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                g
                                             
                                             
                                                it
                                             
                                          
                                          
                                             
                                                Y
                                             
                                             
                                                it
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   ∑
                                                
                                                
                                                   i
                                                   ∈
                                                   I
                                                
                                             
                                          
                                          
                                             
                                                f
                                             
                                             
                                                it
                                                ω
                                             
                                          
                                          
                                             
                                                Z
                                             
                                             
                                                it
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       
                                          
                                          
                                          
                                          
                                          
                                          
                                          +
                                          
                                             
                                                Γ
                                             
                                             
                                                t
                                                ω
                                             
                                          
                                          =
                                          
                                             
                                                γ
                                             
                                             
                                                t
                                             
                                          
                                          +
                                          
                                             
                                                Γ
                                             
                                             
                                                (
                                                t
                                                -
                                                1
                                                )
                                                ω
                                             
                                          
                                          ,
                                          
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (17)
                           
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                       ∈
                                       I
                                    
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    jt
                                    ω
                                 
                              
                              (
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                    ω
                                 
                              
                              -
                              1
                              )
                              +
                              
                                 
                                    I
                                 
                                 
                                    jt
                                    ω
                                 
                                 
                                    -
                                 
                              
                              =
                              0
                              ,
                              
                              j
                              ∈
                              J
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (18)
                           
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       j
                                       ∈
                                       J
                                    
                                 
                              
                              
                                 
                                    q
                                 
                                 
                                    jt
                                    ω
                                 
                              
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                    ω
                                 
                              
                              ⩽
                              
                                 
                                    Q
                                 
                                 
                                    i
                                    ω
                                 
                              
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (19)
                           
                              
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                    ω
                                 
                              
                              ⩽
                              
                                 
                                    Y
                                 
                                 
                                    it
                                 
                              
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              j
                              ∈
                              J
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (20)
                           
                              
                              
                                 
                                    X
                                 
                                 
                                    ijt
                                    ω
                                 
                              
                              ⩾
                              0
                              ,
                              
                              i
                              ∈
                              I
                              ,
                              
                              j
                              ∈
                              J
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (21)
                           
                              
                              
                                 
                                    I
                                 
                                 
                                    jt
                                    ω
                                 
                                 
                                    -
                                 
                              
                              ⩾
                              0
                              ,
                              
                              j
                              ∈
                              J
                              ,
                              
                              t
                              ∈
                              T
                           
                        
                     
                     
                        
                           (22)
                           
                              
                              
                                 
                                    Γ
                                 
                                 
                                    t
                                    ω
                                 
                              
                              ⩾
                              0
                              ,
                              
                              t
                              ∈
                              T
                              .
                           
                        
                     
                  

The objective function (14) refers to the minimization of the first-stage costs of operating the sorting centers, and the second-stage costs of installation the sorting centers, shipping recyclables from zones to centers, and of not collecting recyclable materials from the zones. Constraints (16)–(19) are similar to their corresponding deterministic versions, but should be satisfied for each scenario 
                        
                           ω
                           ∈
                           W
                        
                     . Constraints Eqs. (20)–(22) defines the domain of the second-stage decision variables. We consider instances of SDCFLB under the following assumptions: (A1) The expected value 
                        
                           E
                           [
                           ·
                           ]
                        
                      is well defined and finite valued for any probability distribution of 
                        
                           ξ
                        
                     . (A2) 
                        
                           Y
                        
                      is a closed set that includes all constraints in (14); (A3) the second-stage subproblem is dual feasible for all 
                        
                           ω
                           ∈
                           W
                        
                     ; (A4) 
                        
                           Q
                           (
                           Y
                           ,
                           
                              
                                 X
                              
                              
                                 ξ
                              
                           
                           )
                           <
                           ∞
                        
                     , for all 
                        
                           (
                           Y
                           ,
                           ω
                           )
                           ∈
                           Y
                           ∩
                           B
                           ×
                           W
                        
                     . This assumption is ensured by the penalty 
                        
                           
                              
                                 h
                              
                              
                                 j
                              
                              
                                 -
                              
                           
                        
                      for uncollected recyclable materials. Since (A4) holds, then problem Eqs. (14), (16)–(22) remains feasible for all 
                        
                           (
                           Y
                           ,
                           ω
                           )
                           ∈
                           Y
                           ∩
                           B
                           ×
                           W
                        
                     , i.e. problem SDCFLB has a relatively complete recourse. Notice also that problem SDCFLB has a random recourse.

If problem SDCFLB is independently solved for each scenario 
                        
                           ω
                           ∈
                           W
                        
                     , then we also have the corresponding wait-and-see solution for each scenario 
                        
                           ω
                           ∈
                           W
                        
                     . These solutions can be used to obtain approximated feasible decisions to the original stochastic problem. Wait-and-see objective values are also used to assess how much the manager would spend to obtain perfect information about the random variables before making a decision. For this purpose, define EVPI
                        
                           =
                           H
                           (
                           Y
                           ,
                           
                              
                                 X
                              
                              
                                 ξ
                              
                           
                           )
                           -
                           WS
                        
                      as the expected value of the perfect information, where 
                        
                           WS
                           =
                           
                              
                                 ∑
                              
                              
                                 ω
                              
                           
                           
                              
                                 π
                              
                              
                                 ω
                              
                           
                           
                              
                                 W
                              
                              
                                 ω
                              
                           
                        
                      is the expectation of the wait-and-see objective values. Higher EVPIs usually mean that it is costly to acquire perfect information about the random variables, so that making decisions based on stochastic programs is more appropriate. Another approximated solution for SDCFLB is given by the average scenario problem EV, which is evaluated by solving one particular instance of SDCFLB whose stochastic parameters are replaced by their equivalent expected values. Let 
                        
                           
                              
                                 Y
                              
                              
                                 it
                              
                              
                                 ★
                              
                           
                        
                      and 
                        
                           
                              
                                 Z
                              
                              
                                 it
                              
                              
                                 ★
                              
                           
                        
                      be the first-stage optimal values of problem EV. By fixing 
                        
                           
                              
                                 Y
                              
                              
                                 it
                              
                              
                                 ★
                              
                           
                        
                      and 
                        
                           
                              
                                 Z
                              
                              
                                 it
                              
                              
                                 ★
                              
                           
                        
                      in the SDCFLB problem, we obtain the expected result of the EV solution (EEV). Finally, we can write 
                        
                           VSS
                           =
                           EEV
                           -
                           H
                           (
                           Y
                           ,
                           
                              
                                 X
                              
                              
                                 ξ
                              
                           
                           )
                        
                      as the value of the stochastic solution. VSS evaluates the cost of ignoring randomness and making a decision according to expected values. The more the VSS increases, the more beneficial the stochastic program is, to detriment of the expected approach EV.

In this section, we present some extensions of the stochastic model to incorporate risk preferences via the CVaR risk measure. The motivation in using CVaR-based approaches is to avoid very pessimistic solutions (as in minimax models) and, simultaneously, preserve the tractability of the problem, since the CVaR optimization problem can be modeled by linear constraints and continuous variables. Basically, we explored the following strategies to mitigate the risk: (a) a mean-risk approach (MR-CVaR); (b) a mean-risk approach with regret (MR–CVaR–R); (c) a single objective risk minimization model (CVaR); and (d) a single objective risk minimization model with regret (CVaR–R). We also tested traditional minimax approaches to analyze situations in which the probabilities of the scenarios are hard to estimate or simply unreliable.

The conditional value-at-risk of a random variable 
                           
                              H
                              (
                              Y
                              ,
                              
                                 
                                    X
                                 
                                 
                                    ξ
                                 
                              
                              )
                           
                         at the confidence level 
                           
                              α
                           
                         can be posed as follows:
                           
                              (23)
                              
                                 CVaR
                                 [
                                 H
                                 (
                                 Y
                                 ,
                                 
                                    
                                       X
                                    
                                    
                                       ξ
                                    
                                 
                                 )
                                 ]
                                 =
                                 
                                    
                                       inf
                                    
                                    
                                       η
                                       ∈
                                       R
                                    
                                 
                                 
                                    
                                       
                                          η
                                          +
                                          
                                             
                                                1
                                             
                                             
                                                1
                                                -
                                                α
                                             
                                          
                                          E
                                          [
                                          
                                             max
                                          
                                          {
                                          0
                                          ,
                                          H
                                          (
                                          Y
                                          ,
                                          
                                             
                                                X
                                             
                                             
                                                ξ
                                             
                                          
                                          )
                                          -
                                          η
                                          }
                                          ]
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

The infimum is attained at a α-quantile of the random variable 
                           
                              H
                              (
                              Y
                              ,
                              
                                 
                                    X
                                 
                                 
                                    ξ
                                 
                              
                              )
                           
                        . By introducing auxiliary variables 
                           
                              
                                 
                                    U
                                 
                                 
                                    ω
                                 
                              
                           
                         for each scenario 
                           
                              ω
                              ∈
                              W
                           
                        , the corresponding optimization model MR–CVaR becomes:
                           
                              (24)
                              
                                 
                                    
                                       
                                          
                                             
                                                min
                                             
                                          
                                       
                                       
                                          
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   g
                                                
                                                
                                                   it
                                                
                                             
                                             
                                                
                                                   Y
                                                
                                                
                                                   it
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      ω
                                                      ∈
                                                      W
                                                   
                                                
                                             
                                             
                                                
                                                   π
                                                
                                                
                                                   ω
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               i
                                                               ∈
                                                               I
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               j
                                                               ∈
                                                               J
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            c
                                                         
                                                         
                                                            ijt
                                                            ω
                                                         
                                                      
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            ijt
                                                            ω
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               i
                                                               ∈
                                                               I
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            f
                                                         
                                                         
                                                            it
                                                            ω
                                                         
                                                      
                                                      
                                                         
                                                            Z
                                                         
                                                         
                                                            it
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               j
                                                               ∈
                                                               J
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            j
                                                         
                                                         
                                                            -
                                                         
                                                      
                                                      
                                                         
                                                            I
                                                         
                                                         
                                                            jt
                                                            ω
                                                         
                                                         
                                                            -
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             +
                                             ϕ
                                             
                                                
                                                   
                                                      η
                                                      +
                                                      
                                                         
                                                            1
                                                         
                                                         
                                                            1
                                                            -
                                                            α
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               ω
                                                               ∈
                                                               W
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            π
                                                         
                                                         
                                                            ω
                                                         
                                                      
                                                      
                                                         
                                                            U
                                                         
                                                         
                                                            ω
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             s
                                             .
                                             t
                                             .
                                             :
                                          
                                       
                                       
                                          
                                             
                                             Deterministic
                                             
                                             constraints
                                             
                                             (
                                             6
                                             )
                                             –
                                             (
                                             10
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             Stochastic
                                             
                                             constraints
                                             
                                             (
                                             16
                                             )
                                             –
                                             (
                                             22
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   U
                                                
                                                
                                                   ω
                                                
                                             
                                             ⩾
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   f
                                                
                                                
                                                   it
                                                   ω
                                                
                                             
                                             
                                                
                                                   Z
                                                
                                                
                                                   it
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      j
                                                      ∈
                                                      J
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   c
                                                
                                                
                                                   ijt
                                                   ω
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   ijt
                                                   ω
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      j
                                                      ∈
                                                      J
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   h
                                                
                                                
                                                   j
                                                
                                                
                                                   -
                                                
                                             
                                             
                                                
                                                   I
                                                
                                                
                                                   jt
                                                   ω
                                                
                                                
                                                   -
                                                
                                             
                                             -
                                             η
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   U
                                                
                                                
                                                   ω
                                                
                                             
                                             ⩾
                                             0
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             η
                                             ∈
                                             R
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        Variable 
                           
                              
                                 
                                    U
                                 
                                 
                                    ω
                                 
                              
                           
                         is 0, if scenario 
                           
                              ω
                           
                         has a cost lower than 
                           
                              η
                           
                        . Otherwise, 
                           
                              
                                 
                                    U
                                 
                                 
                                    ω
                                 
                              
                           
                         is equal to the difference between 
                           
                              η
                           
                         and the corresponding cost, for all 
                           
                              ω
                              ∈
                              W
                           
                        . Notice that 
                           
                              η
                           
                         may be interpreted as a first-stage variable and 
                           
                              
                                 
                                    U
                                 
                                 
                                    ω
                                 
                              
                           
                         as second-stage variables. There are two risk-averse parameters that serve to reveal the risk preferences of the manager towards risk. First, 
                           
                              ϕ
                           
                         provides the relative importance between the expectation and variability (or risk) of the second-stage cost. If 
                           
                              ϕ
                              =
                              0
                           
                        , the objective is to minimize the expectation cost. This case is preferable by risk neutral managers. If the manager is risk-averse, he or she would prefer a large value of 
                           
                              ϕ
                           
                         so that the variability term dominates the expectation cost. Second, larger values of 
                           
                              α
                           
                         indicate more risk aversion, as the corresponding value-at-risk increases and CVaR controls more relative deviations. For instance, if 
                           
                              α
                              =
                              0.9
                           
                        , then CVaR constraint can control the largest 10% of relative deviations.

We now define the regret of scenario 
                           
                              ω
                           
                         as the difference between the cost associated with the solution 
                           
                              (
                              Y
                              ,
                              
                              
                                 
                                    X
                                 
                                 
                                    ξ
                                 
                              
                              )
                           
                         and the wait-and-see objective value 
                           
                              
                                 
                                    W
                                 
                                 
                                    ω
                                 
                                 
                                    ★
                                 
                              
                           
                        :
                           
                              (25)
                              
                                 
                                    
                                       R
                                    
                                    
                                       ω
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       f
                                    
                                    
                                       it
                                       ω
                                    
                                 
                                 
                                    
                                       Z
                                    
                                    
                                       it
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       c
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                                 
                                    
                                       X
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       h
                                    
                                    
                                       j
                                    
                                    
                                       -
                                    
                                 
                                 
                                    
                                       I
                                    
                                    
                                       jt
                                       ω
                                    
                                    
                                       -
                                    
                                 
                                 -
                                 
                                    
                                       W
                                    
                                    
                                       ω
                                    
                                    
                                       ★
                                    
                                 
                              
                           
                        The mean-risk CVaR approach with regret (MR–CVaR–R) can be written as follows:
                           
                              (26)
                              
                                 
                                    
                                       
                                          
                                             
                                                min
                                             
                                          
                                       
                                       
                                          
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   g
                                                
                                                
                                                   it
                                                
                                             
                                             
                                                
                                                   Y
                                                
                                                
                                                   it
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      ω
                                                      ∈
                                                      W
                                                   
                                                
                                             
                                             
                                                
                                                   π
                                                
                                                
                                                   ω
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               i
                                                               ∈
                                                               I
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               j
                                                               ∈
                                                               J
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            c
                                                         
                                                         
                                                            ijt
                                                            ω
                                                         
                                                      
                                                      
                                                         
                                                            X
                                                         
                                                         
                                                            ijt
                                                            ω
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               i
                                                               ∈
                                                               I
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            f
                                                         
                                                         
                                                            it
                                                            ω
                                                         
                                                      
                                                      
                                                         
                                                            Z
                                                         
                                                         
                                                            it
                                                         
                                                      
                                                      +
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               j
                                                               ∈
                                                               J
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            h
                                                         
                                                         
                                                            j
                                                         
                                                         
                                                            -
                                                         
                                                      
                                                      
                                                         
                                                            I
                                                         
                                                         
                                                            jt
                                                            ω
                                                         
                                                         
                                                            -
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             +
                                             ϕ
                                             
                                                
                                                   
                                                      η
                                                      +
                                                      
                                                         
                                                            1
                                                         
                                                         
                                                            1
                                                            -
                                                            α
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               ω
                                                               ∈
                                                               W
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            π
                                                         
                                                         
                                                            ω
                                                         
                                                      
                                                      
                                                         
                                                            V
                                                         
                                                         
                                                            ω
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             s
                                             .
                                             t
                                             .
                                             :
                                          
                                       
                                       
                                          
                                             
                                             Deterministic
                                             
                                             constraints
                                             
                                             (
                                             6
                                             )
                                             –
                                             (
                                             10
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             Stochastic
                                             
                                             constraints
                                             
                                             (
                                             16
                                             )
                                             –
                                             (
                                             22
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   V
                                                
                                                
                                                   ω
                                                
                                             
                                             ⩾
                                             
                                                
                                                   R
                                                
                                                
                                                   ω
                                                
                                             
                                             -
                                             η
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   V
                                                
                                                
                                                   ω
                                                
                                             
                                             ⩾
                                             0
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             η
                                             ∈
                                             R
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        Variable 
                           
                              
                                 
                                    V
                                 
                                 
                                    ω
                                 
                              
                           
                         is 0, if scenario 
                           
                              ω
                           
                         has a regret lower than 
                           
                              η
                           
                        . Otherwise, 
                           
                              
                                 
                                    V
                                 
                                 
                                    ω
                                 
                              
                           
                         is equal to the difference between 
                           
                              η
                           
                         and the corresponding regret, for all 
                           
                              ω
                              ∈
                              W
                           
                        .

By dropping the “mean” term in the mean-risk model (24), we have the following single objective CVaR model (CVaR):
                           
                              (27)
                              
                                 
                                    
                                       
                                          
                                             
                                                min
                                             
                                          
                                       
                                       
                                          
                                             
                                             η
                                             +
                                             
                                                
                                                   1
                                                
                                                
                                                   1
                                                   -
                                                   α
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      ω
                                                      ∈
                                                      W
                                                   
                                                
                                             
                                             
                                                
                                                   π
                                                
                                                
                                                   ω
                                                
                                             
                                             
                                                
                                                   U
                                                
                                                
                                                   ω
                                                
                                                
                                                   ′
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             s
                                             .
                                             t
                                             .
                                             :
                                          
                                       
                                       
                                          
                                             
                                             Deterministic
                                             
                                             constraints
                                             
                                             (
                                             6
                                             )
                                             –
                                             (
                                             10
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             Stochastic
                                             
                                             constraints
                                             
                                             (
                                             16
                                             )
                                             –
                                             (
                                             22
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   U
                                                
                                                
                                                   ω
                                                
                                                
                                                   ′
                                                
                                             
                                             ⩾
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   g
                                                
                                                
                                                   it
                                                
                                             
                                             
                                                
                                                   Y
                                                
                                                
                                                   it
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   f
                                                
                                                
                                                   it
                                                   ω
                                                
                                             
                                             
                                                
                                                   Z
                                                
                                                
                                                   it
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      j
                                                      ∈
                                                      J
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   c
                                                
                                                
                                                   ijt
                                                   ω
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   ijt
                                                   ω
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      j
                                                      ∈
                                                      J
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   h
                                                
                                                
                                                   j
                                                
                                                
                                                   -
                                                
                                             
                                             
                                                
                                                   I
                                                
                                                
                                                   jt
                                                   ω
                                                
                                                
                                                   -
                                                
                                             
                                             -
                                             η
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   U
                                                
                                                
                                                   ω
                                                
                                                
                                                   ′
                                                
                                             
                                             ⩾
                                             0
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             η
                                             ∈
                                             R
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        
                     

The objective function consists of minimizing only the risk term, i.e. the CVaR value. For this reason, 
                           
                              
                                 
                                    U
                                 
                                 
                                    ω
                                 
                                 
                                    ′
                                 
                              
                           
                         incorporates the first-stage cost.

The regret function with the term related to the operating costs is now posed as follows:
                           
                              (28)
                              
                                 
                                    
                                       R
                                    
                                    
                                       ω
                                    
                                    
                                       ′
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       g
                                    
                                    
                                       it
                                    
                                 
                                 
                                    
                                       Y
                                    
                                    
                                       it
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       f
                                    
                                    
                                       it
                                       ω
                                    
                                 
                                 
                                    
                                       Z
                                    
                                    
                                       it
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       c
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                                 
                                    
                                       X
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       h
                                    
                                    
                                       j
                                    
                                    
                                       -
                                    
                                 
                                 
                                    
                                       I
                                    
                                    
                                       jt
                                       ω
                                    
                                    
                                       -
                                    
                                 
                                 -
                                 
                                    
                                       W
                                    
                                    
                                       ω
                                    
                                    
                                       ★
                                    
                                 
                                 .
                              
                           
                        
                     

The single objective conditional value-at-risk regret model (CVaR–R) can be posed as follows:
                           
                              (29)
                              
                                 
                                    
                                       
                                          
                                             
                                                min
                                             
                                          
                                       
                                       
                                          
                                             
                                             η
                                             +
                                             
                                                
                                                   1
                                                
                                                
                                                   1
                                                   -
                                                   α
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      ω
                                                      ∈
                                                      W
                                                   
                                                
                                             
                                             
                                                
                                                   π
                                                
                                                
                                                   ω
                                                
                                             
                                             
                                                
                                                   V
                                                
                                                
                                                   ω
                                                
                                                
                                                   ′
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             s
                                             .
                                             t
                                             .
                                             :
                                          
                                       
                                       
                                          
                                             
                                             Deterministic
                                             
                                             constraints
                                             
                                             (
                                             6
                                             )
                                             –
                                             (
                                             10
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             Stochastic
                                             
                                             constraints
                                             
                                             (
                                             16
                                             )
                                             –
                                             (
                                             22
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   V
                                                
                                                
                                                   ω
                                                
                                                
                                                   ′
                                                
                                             
                                             ⩾
                                             
                                                
                                                   R
                                                
                                                
                                                   ω
                                                
                                                
                                                   ′
                                                
                                             
                                             -
                                             η
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   V
                                                
                                                
                                                   ω
                                                
                                                
                                                   ′
                                                
                                             
                                             ⩾
                                             0
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             η
                                             ∈
                                             R
                                             .
                                          
                                       
                                    
                                    
                                       
                                          
                                       
                                    
                                 
                              
                           
                        
                     

It is worth noting that model CVaR–R is similar to the so-called 
                           
                              α
                           
                        -reliable mean-excess regret model, which was proposed in Chen et al. (2006) to overcome the potential intractability of the previous model 
                           
                              α
                           
                        -reliable minimax.

Minimax approaches seek to obtain the best worst-case scenario among the set of feasible decisions over all scenarios, i.e. the best performance in the worst-case. In our case, this concept leads to the following minimax stochastic program:
                           
                              (30)
                              
                                 
                                    
                                       
                                          min
                                       
                                       
                                          Y
                                          ,
                                          
                                          
                                             
                                                X
                                             
                                             
                                                ξ
                                             
                                          
                                       
                                    
                                 
                                 
                                 
                                    
                                       
                                          max
                                       
                                       
                                          ω
                                          ∈
                                          W
                                       
                                    
                                 
                                 
                                 H
                                 (
                                 Y
                                 ,
                                 
                                    
                                       X
                                    
                                    
                                       ξ
                                    
                                 
                                 )
                                 .
                              
                           
                        
                     

By introducing the positive variable 
                           
                              
                                 
                                    R
                                 
                                 
                                    max
                                 
                              
                           
                         to take into account the worst-case scenario, Problem 30 can be written in the equivalent way:
                           
                              
                                 
                                    
                                       
                                          
                                             min
                                          
                                       
                                       
                                          
                                             
                                             
                                                
                                                   R
                                                
                                                
                                                   max
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             s
                                             .
                                             t
                                             .
                                             :
                                          
                                       
                                       
                                          
                                             
                                             Deterministic
                                             
                                             constraints
                                             
                                             (
                                             6
                                             )
                                             –
                                             (
                                             10
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             Stochastic
                                             
                                             constraints
                                             
                                             (
                                             16
                                             )
                                             –
                                             (
                                             22
                                             )
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   R
                                                
                                                
                                                   max
                                                
                                             
                                             ⩾
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   g
                                                
                                                
                                                   it
                                                
                                             
                                             
                                                
                                                   Y
                                                
                                                
                                                   it
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   f
                                                
                                                
                                                   it
                                                   ω
                                                
                                             
                                             
                                                
                                                   Z
                                                
                                                
                                                   it
                                                
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      ∈
                                                      I
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      j
                                                      ∈
                                                      J
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   c
                                                
                                                
                                                   ijt
                                                   ω
                                                
                                             
                                             
                                                
                                                   X
                                                
                                                
                                                   ijt
                                                   ω
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             +
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      j
                                                      ∈
                                                      J
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      t
                                                      ∈
                                                      T
                                                   
                                                
                                             
                                             
                                                
                                                   h
                                                
                                                
                                                   j
                                                
                                                
                                                   -
                                                
                                             
                                             
                                                
                                                   I
                                                
                                                
                                                   jt
                                                   ω
                                                
                                                
                                                   -
                                                
                                             
                                             ,
                                             
                                             ω
                                             ∈
                                             W
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             
                                             
                                                
                                                   R
                                                
                                                
                                                   max
                                                
                                             
                                             ⩾
                                             0
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        
                     

Minimax approaches can be viewed as extremely risk averse, but they are especially useful in the absence of complete information on the underlying distribution. For a less conservative minimax model, it is sufficient to define the regret version of 
                           
                              
                                 
                                    R
                                 
                                 
                                    max
                                 
                              
                           
                        :
                           
                              (31)
                              
                                 
                                    
                                       R
                                    
                                    
                                       max
                                    
                                 
                                 ⩾
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       g
                                    
                                    
                                       it
                                    
                                 
                                 
                                    
                                       Y
                                    
                                    
                                       it
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       f
                                    
                                    
                                       it
                                       ω
                                    
                                 
                                 
                                    
                                       Z
                                    
                                    
                                       it
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       c
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                                 
                                    
                                       X
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          ∈
                                          J
                                       
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          t
                                          ∈
                                          T
                                       
                                    
                                 
                                 
                                    
                                       h
                                    
                                    
                                       j
                                    
                                    
                                       -
                                    
                                 
                                 
                                    
                                       I
                                    
                                    
                                       jt
                                       ω
                                    
                                    
                                       -
                                    
                                 
                                 -
                                 
                                    
                                       W
                                    
                                    
                                       ω
                                    
                                    
                                       ★
                                    
                                 
                                 ,
                                 
                                 ω
                                 ∈
                                 W
                                 .
                              
                           
                        In this case, notice that the objective value represents the maximum regret instead of the cost of the worst-case scenario (“pure” minimax).

In this section, we present and analyze the numerical study performed in order to: (i) evaluate the effectiveness of our location models to support decisions in a public management context; and (ii) develop managerial insights that could help managers to improve the location planning for the real-world setting that motivates this research. The models were coded in the General Algebraic Modeling System GAMS (Brooke, Kendrick, Meeraus, & Raman, 1998) and solved by using the optimization system ILOG-CPLEX 11.0 (ILOG, 2008). The computation was executed by using a PC Core i7 2.8gigahertz, 16.0gigabyte RAM and Windows 7 operating system.

To analyze the performance of the location planning, we define the following service levels:
                        
                           •
                           The percentage of the zones served by the opened centers: 
                                 
                                    
                                       
                                          B
                                       
                                       
                                          1
                                       
                                    
                                    =
                                    
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                ijt
                                             
                                          
                                          
                                             
                                                X
                                             
                                             
                                                ijt
                                             
                                          
                                       
                                       
                                          ∣
                                          J
                                          ∣
                                          ·
                                          ∣
                                          T
                                          ∣
                                       
                                    
                                    ·
                                    100
                                    %
                                 
                              .

The percentage of the total amount of recyclable materials that is collected (or fill rate service level): 
                                 
                                    
                                       
                                          B
                                       
                                       
                                          2
                                       
                                    
                                    =
                                    
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                jt
                                             
                                          
                                          (
                                          
                                             
                                                q
                                             
                                             
                                                jt
                                             
                                          
                                          -
                                          
                                             
                                                I
                                             
                                             
                                                jt
                                             
                                             
                                                -
                                             
                                          
                                          )
                                       
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                jt
                                             
                                          
                                          
                                             
                                                q
                                             
                                             
                                                jt
                                             
                                          
                                       
                                    
                                    ·
                                    100
                                    %
                                 
                              .

The data was collected through interviews with cooperative and the municipal government members and by extracting the relevant information from diverse web sites, mainly IBGE (2012) and ABRELPE (2012). The developed database includes the macrozoning map of the city,
                           1
                           Available in http://www.sorocaba.sp.gov.br/PortalGOV/do/conhecendoCidade?ViewForm&op=&coSeqEstruturacoConteudo=26,146=2223=12&coEstruturaPai>.
                        
                        
                           1
                         the addresses of the existing sorting centers and of the potential candidates, the population density in each macrozone and the costs. The macrozoning map was partitioned into smaller zones and, for each zone, we determine its centroid. We assume that the collection point of each zone is located in its centroid. Such assumption does not produce any significant distortion for smaller zones in urban areas.

The selection of the potential sites was discussed by public managers and representatives of the cooperatives. In the end, the candidate sites were determined by considering the city’s master plan, the actual possible locations for sorting centers, the impact on the neighborhood, workforce availability near the area, and traffic congestion around the location. Since the maximum number of opened centers is not limited by the municipal government, we set 
                           
                              p
                              =
                              12
                           
                         in all tests.

Due to data limitations, some parameters were estimated as follows. The amount of recyclable materials generated in each zone in the first period was evaluated as 
                           
                              
                                 
                                    q
                                 
                                 
                                    j
                                    1
                                 
                              
                              =
                              
                                 
                                    p
                                 
                                 
                                    j
                                 
                              
                              ·
                              w
                              ·
                              r
                           
                        , where 
                           
                              
                                 
                                    p
                                 
                                 
                                    j
                                 
                              
                           
                         is the number of inhabitants in zone j (Table 2
                        ); w is the total quantity of waste produced per person in one year (0.3816 t); and r is the rate of recyclable waste in percentage (11.67%). The next periods consider a cumulative 1% increase in the amount of recyclable materials generated in each zone. The current capacity 
                           
                              
                                 
                                    Q
                                 
                                 
                                    i
                                 
                              
                           
                         of each candidate represents the amount (in t) of recyclable materials that can be screened in one year (see column 9 in Table 3
                        ). The budget in the first period is 4,197,000 BRL (Brazilian Real). We considered a cumulative 10% increase for the other periods.

Shipping costs for the first period were evaluated as 
                           
                              
                                 
                                    c
                                 
                                 
                                    ij
                                    1
                                 
                              
                              =
                              [
                              (
                              
                                 
                                    d
                                 
                                 
                                    ij
                                 
                              
                              /
                              
                                 
                                    v
                                 
                                 
                                    ¯
                                 
                              
                              )
                              +
                              τ
                              ]
                              ·
                              ct
                              ·
                              (
                              
                                 
                                    q
                                 
                                 
                                    j
                                    1
                                 
                              
                              /
                              cap
                              )
                           
                        , where 
                           
                              
                                 
                                    d
                                 
                                 
                                    ij
                                 
                              
                           
                         is the distance (km) between the potential candidate located at i and the centroid of each zone 
                           
                              j
                              ;
                              
                                 
                                    v
                                 
                                 
                                    ¯
                                 
                              
                           
                         is the average speed (27km/h) of the vehicles; 
                           
                              τ
                           
                         is the necessary time to load the vehicles with recyclable materials (3h); ct is the cost of the trip per hour (55.35BRL/h); and cap is the capacity of each vehicle (0.8t). Notice that 
                           
                              (
                              
                                 
                                    q
                                 
                                 
                                    j
                                    1
                                 
                              
                              /
                              cap
                              )
                           
                         gives the number of times zone j must be visited to collect all the recyclable material. The distances between different points were obtained from Google Maps as it determines the shortest distance between two points, considering the direction of the tracks. This is not necessarily true when Euclidean distances are used. The costs associated with deployment and operation of the sorting center in a given area was calculated considering rental costs (
                           
                              
                                 
                                    g
                                 
                                 
                                    it
                                 
                              
                           
                        ) and required investments in basic sets of equipment (
                           
                              
                                 
                                    f
                                 
                                 
                                    it
                                 
                              
                           
                        ); see columns 5 and 7 of Table 3, respectively. These investments vary according to each candidate, and depend onto the existence or not of adequate infrastructure for the processes involved in screening. Non-stationary costs were modeled according to the annual interest rate of IGPM (General Index of Market Prices). By trading off between optimal objective values and uncollected recyclable materials, we set 
                           
                              
                                 
                                    h
                                 
                                 
                                    j
                                 
                                 
                                    -
                                 
                              
                              =
                              500
                              
                              BRL
                           
                        . For larger penalties, optimal values are sacrificed without leading to a significantly improved fill-rate service level.

The scenario tree proposed in this paper comprises a combination of four stochastic parameters: the amount of recyclable materials generated (
                              
                                 
                                    
                                       q
                                    
                                    
                                       it
                                       ω
                                    
                                 
                              
                           ), the setup installation cost (
                              
                                 
                                    
                                       f
                                    
                                    
                                       it
                                       ω
                                    
                                 
                              
                           ), the shipping cost (
                              
                                 
                                    
                                       c
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                              
                           ) and the capacity (
                              
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                       ω
                                    
                                 
                              
                           ). For each stochastic parameter, we designed three scenarios, namely, high, medium and low, as follows:
                              
                                 •
                                 
                                    
                                       
                                          
                                             
                                                q
                                             
                                             
                                                jt
                                                ω
                                             
                                          
                                       
                                    : the scenario for low amount of recyclable materials corresponds to the current recycling rate in the city of Sorocaba, which is 11.67% of the total waste generated per year. This figure was given by the municipal government representatives. The scenario for high amount of recyclable materials refers to all the recyclable solid waste generated annually (31.9%), whereas the medium scenario was determined as the average between high and low scenarios. Based on the growth trend in investments and public policies for selective collection, the probabilities of high, medium and low scenarios are 0.5, 0.3 and 0.2, respectively.


                                    
                                       
                                          
                                             
                                                c
                                             
                                             
                                                ijt
                                                ω
                                             
                                          
                                       
                                    : given the dependency between 
                                       
                                          
                                             
                                                c
                                             
                                             
                                                ijt
                                                ω
                                             
                                          
                                       
                                     and 
                                       
                                          
                                             
                                                q
                                             
                                             
                                                jt
                                                ω
                                             
                                          
                                       
                                    , the scenario for low amount of recyclable materials results in the low scenario for shipping costs, which is also true for high and medium scenarios. Also, the necessary time to load the vehicles with recyclable materials (
                                       
                                          τ
                                       
                                    ) was assumed to be 2.5h in low scenarios, 3.5h in high scenarios, and 3h in medium scenarios.


                                    
                                       
                                          
                                             
                                                f
                                             
                                             
                                                it
                                                ω
                                             
                                          
                                       
                                    : the low scenario assumes that the private sector made a significant contribution by donating equipments (forklifts, conveyor belts, etc.). The high scenario assumes that the private sector did not contribute with donations. Table 3 shows the current cost (medium scenario) of installation the sorting centers and the cost in high and low scenarios. Due to the current context of a modest donation incentive, the probability of the average scenario was fixed at 0.6, and the probability of the remaining scenarios was fixed at 0.2.


                                    
                                       
                                          
                                             
                                                Q
                                             
                                             
                                                i
                                                ω
                                             
                                          
                                       
                                    : the medium scenario corresponds to the estimative of the current installed capacity. The high and low scenarios were determined by positive and negative variations of 15% of the current capacity, respectively, according to the average turnover of the cooperatives’ sorting. All scenarios were considered equiprobable.


                           Fig. 5 shows the resulting 27-scenario tree. Notice that 
                              
                                 [
                                 
                                    
                                       c
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                                 ,
                                 
                                    
                                       q
                                    
                                    
                                       jt
                                       ω
                                    
                                 
                                 ]
                              
                            refers to the realization of demand and cost simultaneously due to statistical dependency between these parameters. The probability of each scenario was determined by the product of the probabilities of each uncertain parameter, by assuming statistical independence among 
                              
                                 [
                                 
                                    
                                       c
                                    
                                    
                                       ijt
                                       ω
                                    
                                 
                                 ,
                                 
                                    
                                       q
                                    
                                    
                                       jt
                                       ω
                                    
                                 
                                 ]
                                 ,
                                 
                                    
                                       f
                                    
                                    
                                       it
                                       ω
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       Q
                                    
                                    
                                       i
                                       ω
                                    
                                 
                              
                           . We also generated scenarios via Monte Carlo simulation to test larger instances (see Section 6.5). For more details in scenario generation, the reader is referred to Dupačová, Consigli, and Wallace (2000); Beraldi, Simone, and Violi (2010) and Kaut and Wallace (2011), among others.


                        Table 4
                         shows the main results for the deterministic model. We define the real cost (RC) as the sum of installation, operating and shipping costs only, i.e. without the penalty for uncollected demand. Although the maximum number of sorting centers to be opened was stipulated at 12, due to the budget constraint (6), the optimization model suggested opening only 6 centers: 1, 2, 5 and 7 in the first period; center 4 in the second period; and center 6 in the third period. This result is similar to the current number of sorting centers in Sorocaba, which is 5. As expected, among those real centers, three of them empirically confirm the location suggested by the model, as they present a smaller installation cost due to the existing infrastructure. Also, the capacity of all opened sorting centers are totally used to service the nearest zones, with the exception of center 1, which presents 31.1%, 14.33% and 2.42% of idle capacity in the periods 2, 3 and 4 respectively. This is probably due to the budget constraint which prevents additional trips from being made to take recyclable materials from any zone to this sorting center. In the first period, the cost incurred in collecting recyclable materials from the zones to the sorting centers corresponds to 68.76% of the real cost, whereas the fixed costs of opening and operating centers represent only 32.24% of the real cost. This result is plausible, as the diverse materials collected in the zones are not compacted to minimize space in the trucks (on average, only 0.8t of recyclables are shipped per trip). As a consequence of this very low density, many trips are required, which increases costs significantly. In periods 2, 3 and 4, as fewer centers were installed, collecting costs represent 80.46%, 83.32% and 87.08% of the real cost, respectively.


                        Fig. 4
                        
                         presents Sorocaba’s urban area and the geographical locations of the potential sorting centers, indicating the opened and unopened, as well as the zones serviced by each one. The sorting centers and the zones serviced by them are marked in the same area, e.g. candidate 1 serves the green regions, which represents zones 1, 5, 8, 30, 31, 33, 34 and 35. Notice that candidates 3, 8, 9, 10, 11 and 12 were not opened. The zones not serviced by any sorting center are represented by the yellow region. As expected, given the budget constraint, it is not possible to collect recyclable materials from all zones. After a four-year period, 27 had their demand totally served, 7 had their demand partially served, and 13 were not served by the selective collection. Although there are a reasonable number of unmet zones and, consequently, uncollected recyclables, both service levels are considerably improved along the planning horizon. According to the recycling expansion plan of the municipal government, the amount of collected recyclable materials should increase from about 1800t per year, which reflects the current situation, to 6000t per year after the expansion. Notice that the solution provided by our model was significantly better than the forecast, as after four years, up to 8664t of recyclables are collected.

In an attempt to reduce global costs, the municipal government is considering changing the type of transport so that it can double the amount of material collected. That change is complex and entails reviewing the service contracts and the revaluation of screening procedures. Thus, as a sensitivity analysis, we run an additional instance for cap
                        =1.6t per trip. The results show that the use of higher capacity vehicles reduces the cost of transportation from an average of 81.3% to 67.2% of the real costs. On the other hand, installation and operation costs increase from 18.7% to 32.8% of the real costs, as two more candidates were installed along the planning horizon. The results also suggest that the decentralization of the sorting centers in the hope of decreasing shipping costs leads to a significant improvement in service levels: 
                           
                              
                                 
                                    B
                                 
                                 
                                    1
                                 
                              
                              =
                              78.70
                              %
                           
                         and 
                           
                              
                                 
                                    B
                                 
                                 
                                    2
                                 
                              
                              =
                              92.17
                              %
                           
                        .


                        Table 5
                         shows the results of the stochastic model SCFLP Eqs. (14)–(22). The first and second columns indicate the scenarios and probabilities of each scenario. The following columns show: the total cost; the real cost (RC); the percentage of utilization of the available budget; the installation cost; the percentage of the installation cost in the real cost; the shipping cost; the percentage of the shipping cost in the real cost; the cumulative fraction of served zones; service level 
                           
                              
                                 
                                    B
                                 
                                 
                                    1
                                 
                              
                           
                        ; the amount of uncollected demand; and 
                           
                              
                                 
                                    B
                                 
                                 
                                    2
                                 
                              
                           
                        .

In the stochastic model, the location of the facilities for sorting is defined by the first-stage variables that indicate the facilities 1, 2, 4, 5, 6, 7 and 8. The installation of facility 8 was not presented in the solution of the deterministic model, and the main features of this facility are a high fixed cost and a high processing capacity. Hence, the uncertainties in the model suggest that opening an additional center would be a protective measure. This result is particularly interesting for managing the collection of recyclable materials, because the recycling program is based on registering homes and, once registered, the government has to ensure that the collection service will work regardless of any disruptions that may occur during the year.

In terms of planning the location centers, the best case scenario is 3, where demands and shipping costs are low, installation costs are low, and sorting capacities are high. This scenario presents the best performance among the remaining ones: it has the lowest total cost, and the highest service level taking into account the amount of waste collected (72.49%) and the number of regions serviced (1385 zones along the four periods or 73.67% of the total number of zones). The worst-case scenario is 25, which takes into account higher demand values, higher shipping costs, higher fixed costs and lower sorting capacities. In this case, we note the worst results in relation to the total cost (approximately four times greater than the cost of the best case scenario), and lower service levels, with 
                           
                              
                                 
                                    B
                                 
                                 
                                    1
                                 
                              
                              =
                              19.39
                              %
                           
                         and 
                           
                              
                                 
                                    B
                                 
                                 
                                    2
                                 
                              
                              =
                              18.62
                              %
                           
                        .

In general, the results of the worst scenario are associated with the generation of high amount of recyclable materials (19–27). Scenarios with low demand and low capacity (1, 4 and 7) present lower percentage values for budget usage (82.66%, 84.09% and 85.73%, respectively). This occurs because the sorting centers were opened before the realization of the random variables, i.e. in the first-stage when there was a limitation to collect recyclable materials. The results also suggested that changes in fixed costs do not interfere in the percentage of collected recyclable materials. For example, for scenarios 1, 4 and 7, this percentage is identical. However, the variation in demand and transportation costs have a direct impact on the percentage of collected recyclable materials, as can be seen in scenarios 1, 4 and 7, whose percentage of collected recyclable materials is 58.61%, while in scenarios 19, 22 and 25 it is 20.26%, 19.89% and 19.39%, respectively.


                           Table 6
                            shows the results for the 27 deterministic wait-and-see problems. Clearly, randomness plays an important role in the problem, as 
                              
                                 EVPI
                                 =
                                 682
                                 ,
                                 988
                                 ≫
                                 0
                              
                           . In this case, it is always better to make a decision after knowing the random variables for opening the sorting centers and for shipping the recyclable materials optimally, so that uncollected recyclable materials can be avoided as much as possible. Notice that the number of opened centers varied from 5 in scenario 27 – high demand, high fixed cost and high capacity – to 10 in scenario 2 – low demand, low fixed cost and medium capacity. On average, the wait-and-see solutions involve the opening of less sorting centers than the corresponding stochastic solutions. From a managerial viewpoint, the stochastic solution might be preferable to the wait-and-see solutions regardless of the availability of accurate information, as the former is more robust to hedge against uncertainty. As the decision about opening sorting centers lies on the four-year strategic term, reimplementing such decisions even for rare disruptions would be operationally difficult and too costly. Moreover, the difference between the service levels in both approaches is negligible, which indicates that, particularly in this case, the variation in the number of opened centers does not have much impact in the process of recyclable materials collection and/or supplying more zones.

The VSS was evaluated by using the average and the worst-case reference scenarios. In the first case, we obtained 
                              
                                 VSS
                                 =
                                 3
                                 ,
                                 610
                                 ,
                                 393
                              
                           , as the EEV is only slightly higher than the RP (
                              
                                 EEV
                                 =
                                 73
                                 ,
                                 724
                                 ,
                                 475
                              
                           ). In the second case, 
                              
                                 VSS
                                 =
                                 6
                                 ,
                                 912
                                 ,
                                 611
                              
                           . Table 7
                            shows the EEV solution for the worst-case reference scenario only. Comparing both the EEV and the RP approaches, it is possible to notice that the EEV solution invests more money in opening the sorting centers, whereas the RP spends more money in shipping the recyclable materials to the facilities. This is due to the EV problem that opens more facilities than in the RP approach to satisfy the perfect information about the amount of recyclable materials available. On the other hand, the stochastic solution comprises a reasonably good number of facilities to conciliate all scenarios. As expected, the average performance of the EEV solutions regarding budget usage, service levels and the total cost are worse than the RP ones, especially if considering the worst-case reference scenario. In this case, 
                              
                                 
                                    
                                       B
                                    
                                    
                                       1
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       B
                                    
                                    
                                       2
                                    
                                 
                              
                            are approximately 4.6% and 4.8% worse than in the RP. The outperformance of the RP approach is much more pronounced in scenarios 1–9, suggesting that, under low fixed cost and low demand, both average and worst-case scenarios result in very bad decisions.


                           Fig. 6
                            shows a comparison between installation, operating and shipping costs for RP, WS and EEV approaches. Notice that installation and operating costs of the EEV approach were significantly higher than the costs of the other approaches, while shipping costs were lower. It was expected, as the EEV approach provides the installation of more sorting centers. For the lower demand scenarios (1–9), the difference between the relative costs of the RP and WS approaches were very small. The shipping costs have a major impact on the real cost in all approaches. However, in the EEV solutions this impact is somewhat lower, due to the cost of operation that corresponds to 26.93% of the real cost. Note that, as the sorting capacity increases (scenarios 1–3, 4–6, and so on), there are peaks in the transportation cost for both WS and RP approaches. This behavior seems plausible, as more capacity entails more collection, which increases shipping costs.

Risk-averse models MR–CVaR and MR–CVaR–R were solved for 
                           
                              α
                              =
                              0.95
                           
                        , by varying ϕ
                        =0–4. Models CVaR and CVaR–R were solved for β
                        =0.7–0.99. Table 8
                         shows the main results in terms of optimal values (
                           
                              H
                              [
                              Y
                              ,
                              
                                 
                                    X
                                 
                                 
                                    ξ
                                 
                              
                              ]
                           
                        ); real costs (RC); budget usage (
                           
                              RC
                              /
                              γ
                           
                        ); number of installed centers (
                           
                              Z
                           
                        ); percentage of setup, operating and shipping costs in the real cost (f/RC, g/RC and c/RC, respectively); service levels 
                           
                              
                                 
                                    B
                                 
                                 
                                    1
                                 
                              
                           
                         and 
                           
                              
                                 
                                    B
                                 
                                 
                                    2
                                 
                              
                           
                        ; average cost over all scenarios (Avg); standard deviation over all scenarios (Std); coefficient of variation, 
                           
                              Std
                              /
                              Avg
                           
                        ; worst-case scenario (WC), evaluated as the maximum total cost over all scenarios; and best-case scenario (BC), evaluated as the minimum total cost over all scenarios. Figs. 7–9
                        
                        
                         depict the tradeoffs among average values, standard deviations, coefficient of variations and service levels. Observations on Table 8, and Figs. 7–9 are summarized as follows.
                           
                              •
                              The similar behavior of the costs from the risk-averse models compared to the risk neutral case suggests that their allocations are only marginally affected by the increase in the risk parameters (
                                    
                                       α
                                    
                                  and 
                                    
                                       ϕ
                                    
                                 ). One exception is CVaR, whose costs exhibit significant ups and downs along the variation of 
                                    
                                       α
                                    
                                 . The budget usage (
                                    
                                       RC
                                       /
                                       γ
                                    
                                 ) shows a stable behavior (≈96%) for the regret-based models when risk-aversion is enforced. On the other hand, MR–CVaR presents a decreasing budget-usage trend as 
                                    
                                       ϕ
                                    
                                  increases, which is also true for 
                                    
                                       α
                                       ∈
                                       [
                                       0.7
                                       ,
                                       0.85
                                       ]
                                    
                                  in CVaR. In this last case, the smallest budget allocation of 41.30% leads to the worst service levels, the most expensive average cost and the best (lowest) coefficient of variation, as corroborated in Figs. 7–9.

In general, all strategies are able to improve the worst-case scenario for a given 
                                    
                                       α
                                    
                                  and 
                                    
                                       ϕ
                                    
                                  but MR–CVaR–R. Recalling that “the best” worst-case scenario is the pure minimax optimal value (133,665,869), which is identical to the average total cost of Minimax–R. On the other hand, only MR–CVaR and CVaR–R provide better best-case scenarios.

CVaR provides good tradeoffs between average cost and standard deviation (Fig. 7), but some solutions are clearly dominated by the Minimax–R strategy. On the other hand, CVaR dominates Minimax solutions regarding service levels (Fig. 8 and 9). Moreover, MR–CVaR, MR–CVaR–R and CVaR–R provide good service levels, but their coefficients of variation are as high as in the risk-neutral case.

Not surprisingly, CVaR and Minimax share very similar solutions for 
                                    
                                       α
                                       >
                                       0.97
                                    
                                 . Indeed, as the confidence level 
                                    
                                       α
                                    
                                  approaches one, the CVaR risk measure focuses on the worst-case scenario. This case is preferable by a highly risk-averse decision maker. Conversely, 
                                    
                                       α
                                       →
                                       0
                                    
                                  accounts for the contribution of all scenarios; thus CVaR approaches the risk-neutral strategy.

All in all, since the risk-averse solutions hedge against risk by reducing service levels and increasing average costs, it is important to adopt plausible risk parameters 
                           
                              α
                           
                         and 
                           
                              ϕ
                           
                         to achieve possible goals, such as reduced standard deviation (or coefficient of variation), and improved worst- and best-case scenarios. Although none of the strategies is superior in all goals, some solutions sound managerially interesting for the cooperatives, e.g. MR–CVaR for 
                           
                              ϕ
                              =
                              3.5
                           
                        , which leads to a slightly reduced standard deviation and improved worst-case scenarios with good service levels; CVaR for 
                           
                              α
                              =
                              0.7
                           
                         that gives a great standard deviation reduction, but with quite deteriorated service levels; CVaR–R for 
                           
                              α
                              =
                              0.95
                           
                        , which reduces the variability and improves worst- and best-case scenarios, without overly increasing average costs, etc. Last but not least, minimax approaches might be very useful in the absence of the probability distribution, especially the regret version that provides reasonable coefficient of variation and service levels.

In order to evaluate the proposed approaches computationally, we generated 6 classes of problems by varying the number of potential candidates (I), zones (J), time periods (T) and scenarios (W). Each class is identified by the tuple 
                           
                              (
                              I
                              ,
                              J
                              ,
                              T
                              ,
                              W
                              )
                           
                        , and includes five random instances, which were drawn randomly from the uniform distribution supported in the intervals provided in Table 9
                        . The remaining parameters were set according to the real-case data (see Section 6.1).


                        Table 10
                         shows the model dimensions with respect to the number of constraints (m), number of continuous variables (nc), number of 
                           
                              0
                              -
                              1
                           
                         variables (
                           
                              n
                              01
                           
                        ), number of non-zero elements in the constraint matrix (nel), and matrix density (Den in %). As expected, our results show that some approaches can become intractable when the number of inputs are large. It seems that running times increase rapidly with an increase in I or W for all formulations. Although not conclusive, it seems that MR–CVaR–R is the most sensitive risk-averse strategy, followed by the Minimax–R. Both strategies lead to the highest running times among all the remaining strategies. The bad performances of the regret-based versions are due to the evaluation of W additional wait-and-see problems. On the other hand, MR–CVaR and Minimax have the best performances, mainly for larger instances. All in all, the results indicate the need to develop specialized exact and heuristic algorithms for larger instances of the stochastic approaches, in an attempt to obtain high quality solutions within a plausible amount of time. A possible idea would to strengthen the proposed formulations to further applied decomposition-based algorithms for handling the two-stage stochastic and risk-averse models (Fàbiàn, 2008; Penuel, Smith, & Yuan, 2010). For conclusive results, though, it would be necessary to solve a larger set of experiments.

Facility planning decisions have become a critical issue in designing a proper reverse logistics network to deal with waste management and material recovery worldwide and in several Brazilian cities. This is mainly due to the fact that the number of facilities and their locations have a great impact on global transportation efficiency. In this paper, we have integrated, for the first time, concepts from location planning for reverse logistics, scenario-based stochastic programming and risk modeling to deal with a real-case location planning problem for sorting centers in the context of selective collection in the city of Sorocaba, Brazil. Another originality of this work is that our optimization models combine practical features, such as (i) the dynamic environment; (ii) the possibility of not collecting part of the recyclable materials; (ii) the limitation of the budget for installing, operating and shipping; (iv) the randomness of costs, demands and capacities; and (v) the incorporation of the decision-maker’s attitude towards risk. Our results evidence that is possible not only to enhance the current selective collection – without any extra investment – but also may encourage public managers to promote optimization tools in GSCM practices. Apart from this particular application, the proposed framework also offers opportunities for analyzing location planning problems in different contexts. Our findings also bring up new directions for further research, such as studying the possibility of closing facilities along the planning horizon, extending the two-stage model to a multistage setting, analyzing alternative risk-averse models, and developing efficient solution methods for larger instances.

@&#ACKNOWLEDGMENTS@&#

The first author thank to National Council for Scientific and Technological Development – CNPq (Process 479888/2010-8) for the financial support. The authors are grateful to two anonymous reviewers for their insightful comments, and André de Oliveira Souza (Geography Department of Federal University of São Carlos) for providing the location maps.

@&#REFERENCES@&#

