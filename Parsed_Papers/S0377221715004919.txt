@&#MAIN-TITLE@&#Tactical berth allocation under uncertainty

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           This paper investigates the tactical-level berth allocation problem.


                        
                        
                           
                           This paper proposes both a stochastic programming formulation and a robust formulation.


                        
                        
                           
                           The relationship between the two models is also investigated in an analytic way.


                        
                        
                           
                           Some solution methods are suggested for solving the models.


                        
                        
                           
                           Numerical experiments are performed to validate the effectiveness of the models.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Scheduling

Berth allocation

Container terminals

Uncertainty

@&#ABSTRACT@&#


               
               
                  The tactical berth allocation problem (BAP) concerns the allocation of favorite berthing positions to ships that periodically call at the terminals. This paper investigates the tactical-level berth allocation scheduling models. First a deterministic model for tactical BAP is formulated with considering the periodicity of schedule. However, in reality, the number of containers that need to be handled (discharging & loading) for each ship is uncertain in the ship's future periods. Thus for the tactical BAP, there is significant uncertainty with respect to the operation time (dwell time) of ships, which further complicates the traditional berth allocation decisions. From stochastic perspective, this paper proposes both a stochastic programming formulation that can cope with arbitrary probability distributions of ships’ operation time deviation, and a robust formulation that is applicable to situations in which limited information about probability distributions is available. The relationship between the two models is also investigated in an analytic way. Some meta-heuristic algorithms are suggested for solving the models. Numerical experiments are performed to validate the effectiveness of the proposed models and the efficiency of the proposed solution algorithms. The experiments also compare the above stochastic programming formulation and the robust formulation models, as well as evaluate their potential benefits in practice. This study finds that the robust method can derive a near optimal solution to the stochastic model in a fast way, and also has the benefit of limiting the worst-case outcome of the tactical BAP decisions.
               
            

@&#INTRODUCTION@&#

The berth allocation problem (BAP) is an important issue for the operations management in container terminals. It is mainly referred to the assignment of quay space and service time to ships that have to be discharged and loaded at a terminal. For a comprehensive overview on BAP, we refer to the review work given by Bierwirth and Meisel (2010). The extant literature deals largely with the operational-level BAP in deterministic environments with complete information. However, this paper investigates the tactical-level BAP, which is also known as home berth template planning (Moorthy & Teo, 2006). The tactical BAP arises in large container terminals and concerns the allocation of favorite berthing positions to ships which periodically call at the terminals (Giallombardo, Moccia, Salani, & Vacca, 2010). This paper studies how to obtain a robust berth allocation schedule under stochastic operation time (dwell time) of ships. Different from the deterministic operational-level BAP, the robust planning of tactical BAP supports the decisions made by port operators in the negotiation process with shipping liners. In this process, the port operators should try to satisfy the expected berthing time of ships, but also incorporate a degree of anticipation of uncertainty during the schedule's execution. From the stochastic perspective, this paper proposes both a stochastic programming formulation that can cope with arbitrary probability distributions of ships’ operation time deviations, and a robust formulation that is applicable to situations in which limited information about probability distributions is available. We compare the above two models and evaluate the potential benefits in practice. On the basis of numerical experiments, we find that the robust method can derive a near optimal solution to the stochastic model in a fast way, and also has the benefit of limiting the worst-case outcome of the tactical BAP decisions.

The remainder of this paper is organized as follows. Section 2 reviews the related works. In Section 3, we provide the background of the tactical BAP, and propose a deterministic model with considering the periodicity of schedule. Section 4 presents a stochastic programming model that takes account of random extra operation time of ships. In Section 5, some meta-heuristic algorithms are suggested for solving the model. Section 6 addresses a robust formulation model, and also discusses the potential relationship between the robust model and the stochastic programming model. Section 7 reports the numerical results and management implications based on the experiments using some sets of real world like instances. Some possible extensions of this study are also discussed in Section 8. Closing remark and summary are then outlined in the last section.

@&#RELATED WORKS@&#

For a comprehensive overview on container terminal operations and maritime logistics, see the review work given by Vis and de Koster (2003), Steenken, Voß, and Stahlbock (2004), Stahlbock and Voß (2008), Fransoo and Lee (2013). This study is related to the berth allocation problem (BAP), which is very important for ports’ operation management and is also the basis for making other plans on container scheduling decisions by shipping liners (Choi, Lee, Leung, Pinedo, & Briskorn, 2012). BAP has attracted a large attention in academic researches. Imai, Nagaiwa, & Chan (1997) addressed the static BAP (SBAP) in commercial ports. Imai, Nishimura, and Papadimitriou (2001) extended the SBAP to dynamic BAP (DBAP), based on which Monaco and Sammarra (2007) proposed a compact reformulation. BAP can be classified into two types: discrete and continuous problems (Imai, Sun, Nishimura, & Papadimitriou, 2005). As to the discrete problems, the quay is partitioned into a number of sections (berths), where one ship could be handled at a time. Whereas in the continuous problems, ships could be served wherever empty spaces are available, which resembles a two-dimensional un-rotated bin packing problem (Lim, 1998). As to the solution methodology for the continuous BAP, Kim and Moon (2003) proposed a simulated annealing method. Park and Kim (2002) employed a sub-gradient optimization method. Guan and Cheung (2004) developed a heuristic with minimizing total weighted completion time. Wang and Lim (2007) developed a beam search method for BAP. Nishimura, Imai, and Papadimitriou (2001) proposed a genetic algorithm for BAP to obtain a good solution with small computational effort. Imai, Nishimura, Hattori, and Papadimitriou (2007) investigated BAP for the indented berths, where mega-containerships could be served from two sides. Cordeau, Laporte, Legato, and Moccia (2005) studied BAP in some specific quay which consists of variable berths. Hansen, Oguz, and Mladenovic (2008) proposed a variable neighbor search method for BAP, in which vessels’ handing time and cost depend on berthing positions. Lee and Chen (2009) developed a heuristic method for solving the BAP. Besides the above studies mainly based on mathematical programming, some stduies are via the discrete event simulation, e.g., Legato and Mazza (2001). Moreover, the simulation optimization technique is recently utilized to optimize the tactical and operational BAP decisions in an integrated way (Legato, Mazza, & Gullì, 2014). Randomness in discharge/loading operations and quay crane (QC) assignment were also considered. In their study, mathematical programming model and simulation model are used for the tactical and the operation level decisions, respectively. Another stream of the BAP studies is about the integrated planning of berth allocation and QC assignment. Park and Kim (2003) developed a two-phase solution procedure, and a dynamic programming technique. Meisel and Bierwirth (2009) treated the BAP-QC assignment as a multi-mode resource constrained project scheduling problem. Imai, Chen, Nishimura, and Papadimitriou (2008) considered that when one vessel is handling, QCs cannot pass or bypass from its one side to the other. A latest review on BAP was given by Bierwirth and Meisel (2010). Wang, Meng, and Liu (2013) presented a second-order cone programming based method to capture fuel costs associated with ship delays. In the following, we discuss some articles that are more relevant to this study.

The concept of tactical-level berth allocation planning was first mentioned in academic literature by Moorthy and Teo (2006). In their study, the tactical BAP is named as berth template planning, which maximizes the service level that is related to the percentage of ships whose mooring operations commence within 2 hours of arrival, and minimizes the connectivity cost that is related to the distances between berths within ship transshipment groups. In their study, the robustness of the berth template was taken into account to handle the uncertainties in the reality. Cordeau, Gaudioso, Laporte, and Moccia (2007) studied the service allocation problem that is a tactical problem arising in the Gioia Tauro transshipment hub. A generalized quadratic assignment model was formulated to minimize the containers rehandling operations in yard. On the basis of this study, Giallombardo et al. (2010) investigated the tactical discrete BAP and QC assignment problem. A novel concept ‘QC-profile’ was proposed to facilitate the combination of BAP and QC assignment problem. In the objective function, they took account of yard cost that is related to the distances between the incoming and outgoing berths. For the above problem, Vacca, Salani, and Bierlaire (2013) proposed an exact branch and price algorithm, which can solve problem cases with 20 ships and five berths. By following the study of Giallombardo et al. (2010), Zhen, Chew, and Lee (2011b) integrated the tactical berth allocation planning (also known as berth template) with the yard template planning. In this way, more detailed factors on yard transportation can be considered in the tactical BAP. The above four studies mainly apply in transshipment hubs. Whereas, the problem background of this study is oriented to generic ports. It should be noted that the BAP studies for transshipment hubs are more complex than the BAP studies for generic ports, because the former ones need to consider the minimization of the distance between each pair of ships’ berthing positions when there are a lot of transshipped containers between the pair of the two ships (Giallombardo et al., 2010). For model formulation, this study does not consider these factors about distances between each pair of ships with transshipment activities. Recently, Meisel and Bierwirth (2013) proposed a framework for aligning all decisions of berth allocation, quay crane assignment, and quay crane scheduling problems in an integrative manner. Robenek, Umang, Bierlaire, and Ropke (2014) designed an exact branch-and-price algorithm to solve the integrated berth allocation and yard assignment problem in bulk ports. Hendriks, Lefeber, and Udding (2013) proposed a tactical level decision model for simultaneous berth allocation and yard planning. A heuristic method was designed to solve the proposed mixed integer programming model. Wang, Liu, and Qu (2015) designed a collaborative mechanism for tactical-level berth allocation. This study is a major breakthrough in port operations. The mechanism guarantees both system optimality and fairness between shipping lines.

For the uncertainty in BAP, Moorthy and Teo (2006) highlighted this issue; but they did not propose a mathematical model that explicitly involves the uncertainty in the berthing activities. Han et al. (2010) developed a MIP model for berth allocation and QC assignment under stochastic arrival time and operation time; a genetic algorithm based meta-heuristic was suggested for solving the model. Zhen, Lee and Chew (2010a) also studied the BAP under stochastic arrival and operation times. A two-stage stochastic programming model and a simulated annealing based meta-heuristic were proposed. The main difference between these two studies lies in: Zhen's model is about continuous BAP, while Han's model is discrete BAP. Hendriks, Laumanns, Lefeber, and Udding (2010) proposed an arrival window agreement based robust cyclic berth planning model to minimize the maximal crane capacity reservation ever required. Hendriks, Armbruster, Laumanns, Lefeber, and Udding (2012) extended the cyclic berth planning problem from the environment of single terminal to the system of multiple terminals. Both the balance of the QC workload over terminals and the minimization of inter-terminal transportation were considered in the objective of their model.

By comparing with the state-of-the-art literature, this paper makes a more comprehensive study on the tactical BAP. The factor of periodicity is explicitly considered in the stochastic programming formulation model and the robust formulation model. The relationship between the two models is investigated in an analytic way.

The tactical berth allocation planning supports the decisions made by port operators in the negotiation process with shipping liners. In this process, ships (shipping liners) inform the port operator about their expected berthing time, i.e., ei, which also depends on their expected arrival time, for example, every Monday 10 am. The port operators should make the scheduled berthing time for ship i be as close to ei as possible. In addition, a ship's operation time depends on the allocated berthing position. If a ship moors at its favorite berth, the operation time will be the shortest, because this berth may be the nearest to the yard storage locations related to loading (or discharging) containers to (or from) the ship. By negotiating with the shipping liners, the port operator makes decisions: where and when the ships are moored. An example of the berth allocation plan is illustrated in Fig. 1
                     .

The periodicity of ship arrival is a key feature for the tactical BAP. In reality, most of the arriving ships have the weekly arrival pattern (Hendriks et al., 2010; Moorthy & Teo, 2006). For the ships with weekly arrival pattern, the port operator makes a tactical berth allocation schedule. When making the tactical berth allocation schedule, the deviations of ships’ scheduled berthing time from their expected ones should be minimized, because these deviations will incur extra cost for speedup in the ships’ voyages from their previous ports or the voyages to their next ports. The objective of the decision model is to minimize the sum of the ships’ deviation costs.

During the tactical berth allocation for a group of ships with the same cycle time, denoted by H, the port operator faces two interrelated decisions: which berth and when the ships should be moored, as shown in Fig. 2. With considering the periodicity, the allocation of time slots to ships is along several rings, rather than a straight time axis. Each ring denotes one berth, and the length of a ring's circumference equals to H. Based on the above discussion, the deterministic tactical BAP model is formulated as follows.

                        
                           
                              
                              
                              
                                 
                                    Input data:
                                 
                                 
                                    i
                                    index of ships.
                                 
                                 
                                    N
                                    set of all the ships; 
                                          
                                             N
                                             =
                                             {
                                             
                                                1
                                                ,
                                                2
                                                ,
                                                ⋯
                                                ,
                                                i
                                                ,
                                                ⋯
                                                ,
                                                |
                                                N
                                                |
                                             
                                             }
                                          
                                       
                                    
                                 
                                 
                                    b
                                    index of berths.
                                 
                                 
                                    B
                                    set of all the berths in the port; 
                                          
                                             B
                                             =
                                             {
                                             
                                                1
                                                ,
                                                2
                                                ,
                                                ⋯
                                                ,
                                                b
                                                ,
                                                ⋯
                                                ,
                                                |
                                                B
                                                |
                                             
                                             }
                                          
                                       
                                    
                                 
                                 
                                    H
                                    planning horizon.
                                 
                                 
                                    ti,b
                                    
                                    operation time of ship i at berth b.
                                 
                                 
                                    ei
                                    
                                    
                                       
                                          
                                             e
                                             x
                                             p
                                             e
                                             c
                                             t
                                             e
                                             d
                                             
                                             b
                                             e
                                             r
                                             t
                                             h
                                             i
                                             n
                                             g
                                             
                                             t
                                             i
                                             m
                                             e
                                             
                                             o
                                             f
                                             
                                             s
                                             h
                                             i
                                             p
                                             
                                             i
                                             ;
                                             
                                             i
                                             t
                                             
                                             i
                                             s
                                             
                                             p
                                             r
                                             o
                                             p
                                             o
                                             s
                                             e
                                             d
                                             
                                             b
                                             y
                                             
                                             i
                                             t
                                             s
                                             
                                             s
                                             h
                                             i
                                             p
                                             p
                                             i
                                             n
                                             g
                                             l
                                             i
                                             n
                                             e
                                             r
                                             .
                                          
                                       
                                    
                                 
                                 
                                    di
                                    
                                    cost rate of ship i with respect to the deviation of its assigned berthing time from its expected one.
                                 
                                 
                                    M
                                    
                                       
                                          
                                             a
                                             
                                             s
                                             u
                                             f
                                             f
                                             i
                                             c
                                             i
                                             e
                                             n
                                             t
                                             l
                                             y
                                             
                                             l
                                             a
                                             r
                                             g
                                             e
                                             
                                             p
                                             o
                                             s
                                             i
                                             t
                                             i
                                             v
                                             e
                                             
                                             n
                                             u
                                             m
                                             b
                                             e
                                             r
                                             .
                                          
                                       
                                    
                                 
                                 
                                    Decision variables:
                                 
                                 
                                    xi,b
                                    
                                    continuous variable, berthing time of ship i at berth b.
                                 
                                 
                                    yi,b
                                    
                                    binary, set to 1 if ship i moors at berth b, and 0 otherwise.
                                 
                                 
                                    zi,j,b
                                    
                                    binary, set to 1 if ship j is immediately after ship i at berth b, and 0 otherwise.
                                 
                                 
                                    
                                       
                                          
                                             
                                                ζ
                                                
                                                   i
                                                   ,
                                                   b
                                                
                                             
                                             ,
                                             
                                                ζ
                                                i
                                                ′
                                             
                                          
                                       
                                    
                                    binary, auxiliary variables for considering the periodicity of schedules.
                                 
                                 
                                    Mathematical model:
                                 
                              
                           
                        
                     
                     
                        
                           (1)
                           
                              
                                 
                                    [
                                    BAP
                                    ]
                                 
                                 
                                 Minimize
                                 
                                    ∑
                                    
                                       (
                                       i
                                       ∈
                                       N
                                       )
                                    
                                 
                                 
                                    d
                                    i
                                 
                                 
                                    |
                                    
                                       ∑
                                       
                                          b
                                          ∈
                                          b
                                       
                                    
                                    
                                       x
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    −
                                    
                                       ζ
                                       i
                                       ′
                                    
                                    H
                                    −
                                    
                                       e
                                       i
                                    
                                    |
                                 
                              
                           
                        
                     
                     
                        
                           (2)
                           
                              
                                 s
                                 
                                    .
                                    t
                                 
                                 .
                                 
                                 
                                    ∑
                                    
                                       b
                                       ∈
                                       B
                                    
                                 
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 =
                                 1
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (3)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       N
                                    
                                 
                                 
                                    
                                       y
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    
                                       t
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                 
                                 ≤
                                 H
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                              
                           
                        
                     
                     
                        
                           (4)
                           
                              
                                 
                                    x
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 +
                                 
                                    t
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 −
                                 
                                    ζ
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 H
                                 ≤
                                 
                                    x
                                    
                                       j
                                       ,
                                       b
                                    
                                 
                                 +
                                 
                                    (
                                    
                                       1
                                       −
                                       
                                          z
                                          
                                             i
                                             ,
                                             j
                                             ,
                                             b
                                          
                                       
                                    
                                    )
                                 
                                 M
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                                 ,
                                 ∀
                                 i
                                 ,
                                 j
                                 ∈
                                 N
                                 ,
                                 
                                 i
                                 ≠
                                 j
                              
                           
                        
                     
                     
                        
                           (5)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       N
                                    
                                 
                                 
                                    ζ
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 =
                                 1
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                              
                           
                        
                     
                     
                        
                           (6)
                           
                              
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       N
                                       ,
                                       j
                                       ≠
                                       i
                                    
                                 
                                 
                                    z
                                    
                                       i
                                       ,
                                       j
                                       ,
                                       b
                                    
                                 
                                 =
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                                 ,
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (7)
                           
                              
                                 
                                    ∑
                                    
                                       j
                                       ∈
                                       N
                                       ,
                                       j
                                       ≠
                                       i
                                    
                                 
                                 
                                    z
                                    
                                       j
                                       ,
                                       i
                                       ,
                                       b
                                    
                                 
                                 =
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                                 ,
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (8)
                           
                              
                                 
                                    x
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ≤
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 H
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                                 ,
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (9)
                           
                              
                                 
                                    x
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ≥
                                 0
                                 ,
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ,
                                 
                                    z
                                    
                                       i
                                       ,
                                       j
                                       ,
                                       b
                                    
                                 
                                 ,
                                 
                                    ζ
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ,
                                 
                                    ζ
                                    I
                                    ′
                                 
                                 ∈
                                 
                                    {
                                    
                                       0
                                       ,
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                     
                  

Objective (1) is to minimize the total cost of the deviations between the ships’ assigned berthing time and their expected time. In the fields of BAP studies, both the waiting cost (i.e., the deviation between the actual berthing time and the arrival time) and the tardiness cost (i.e., the deviation between the actual departure time and the expected departure time) have been widely considered in the literature (Bierwirth & Meisel, 2010). For example, two pioneering studies on BAP (Imai et al., 2001; Kim & Moon, 2003) considered the two types of costs in their objectives, respectively. Objective (1) belongs to some sort of waiting cost. It should be mentioned that the most of BAP literature is the operational-level BAP; while this study is oriented to the tactical-level BAP, which is a middle-term decision and is involved in the negotiation process between port operators and shipping liners. For shipping liners, they hope their ships’ assigned berthing dates are near to their favorite dates. Each ship's voyage contains multiple ports. The negotiation process is not an easy task. Each ship has its favorite date for berthing at a port, but the assigned berthing date (e.g., Monday) at the port sometimes may be away from their expected date (e.g., Wednesday). The operation time of a ship berthing at different berths in a port is not identical. But this difference is not significant by comparing with the deviation between the assigned berthing time and the expected berthing time for shipping liners, especially in a tactical level decision process. Therefore, this study does not consider the operation time in Objective (1).

Constraint (2) states each ship is assigned to one berth. Constraint (3) ensures the total handling time of ships allocated to each berth cannot exceed the planning horizon. The consistency of x
                     
                        i, b
                      variables with the sequence on berth b is achieved by Constraints (4). The form 
                        
                           −
                           
                              ζ
                              
                                 i
                                 ,
                                 b
                              
                           
                           H
                        
                     ’ in Constraint (4) is like the ‘Mod’ operator. For example, 10 mod 7 = 3, which means the time point ‘10’ is equivalent to the time point ‘3’ because the cycle time of periodicity is ‘7’. Here 10 mod 7 = 10–1 × 7; the form ‘
                        
                           −
                           
                              ζ
                              
                                 i
                                 ,
                                 b
                              
                           
                           H
                        
                     ’ is just like ‘–1 × 7’. In addition, the variables zj,i,b
                      in Constraints (4) define the precedence among ships in each berth; a sequence of ships allocated to each berth forms a ring. Constraint (5) enforces there is one ring of the sequenced ships for each berth. Constraints (6) and (7) guarantee that each ship has exactly one ship immediately before and behind them in the sequence at their allocated berth. Constraint (8) ensures that xi,b
                      equals to zero if ship i is not allocated to berth b; then the berthing time of ship i can be denoted by 
                        
                           
                              ∑
                              
                                 b
                                 ∈
                                 B
                              
                           
                           
                              x
                              
                                 i
                                 ,
                                 b
                              
                           
                        
                      which is used in Objective (1). All the decision variables are defined in Constraint (9).

We give more explanation on the binary variables ζ
                     
                        i, b
                      and ζ'
                        i
                     . For example, the cycle time of a period is 7. Ship s1, s2, s3 moor in berth b at the time 1, 4, 6, respectively. Their stay time is 2. Then Ship s1 is followed by Ship s2, which can be denoted as: 1 + 2 ≤ 4; Ship s2 is followed by Ship s3, which can be denoted as: 4 + 2 ≤ 6. To denote that Ship s3 is followed by Ship s1, the leaving time of Ship s3 (i.e., ‘6 + 2’) should minus the cycle time (i.e., ‘7’) so that it can be less or equal than the berthing time of Ship s1 (i.e., ‘1’). That is: 1 + 2 – 0 × 7 ≤ 4, 4 + 2 – 0 × 7 ≤ 6, 6 + 2 – 1 × 7 ≤ 1. The ζ
                     
                        i, b
                      is the ‘0’–‘1’ variables in the formulae. It equals one only once for each sequence of ships moor in a berth, which is ensured in Constraint (5), i.e., 
                        
                           
                              ∑
                              
                                 i
                                 ∈
                                 N
                              
                           
                           
                              ζ
                              
                                 i
                                 ,
                                 b
                              
                           
                           =
                           1
                           ,
                           
                           ∀
                           b
                           ∈
                           B
                        
                     . Another binary variable ζ'
                        i
                      in Objective (1) is defined for the similar purpose. In Objective (1), ‘
                        
                           
                              ∑
                              
                                 b
                                 ∈
                                 B
                              
                           
                           
                              x
                              
                                 i
                                 ,
                                 b
                              
                           
                        
                     ’ and ‘ei
                     ’ denote the planned and the expected berthing time of ship i, respectively. For example, the planned berthing time of a ship is 6. If its expected time is 6.5, the deviation is 0.5; if its expected time is 2, the deviation should be 3 due to the periodicity. More specifically, 0.5 = |6 – 0 × 7 – 6.5|, 3 = |6 – 1 × 7 – 2|. Here the ζ'
                        i
                      is the ‘0’–‘1’ variables in the formulae. It equals one when the planned time and the expected time are located on the two sides of the zero time point in the period.

The absolute value form in the objective can be linearized by defining two auxiliary variables 
                        
                           β
                           
                              i
                           
                           +
                        
                      and 
                        
                           β
                           
                              i
                           
                           −
                        
                     . Two more constraints are also added. Then the above model turns to:

                        
                           (10)
                           
                              
                                 
                                    [
                                    BAP
                                    ]
                                    
                                       
                                       Minimize
                                    
                                 
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       N
                                    
                                 
                                 
                                    d
                                    i
                                 
                                 
                                    (
                                    
                                       
                                          β
                                          i
                                          +
                                       
                                       +
                                       
                                          β
                                          i
                                          −
                                       
                                    
                                    )
                                 
                              
                           
                        
                     
                  

s.t. Constraints (1)–(9)

                        
                           (11)
                           
                              
                                 
                                    ∑
                                    
                                       b
                                       ∈
                                       B
                                    
                                 
                                 
                                    x
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 −
                                 
                                    ζ
                                    i
                                    ′
                                 
                                 H
                                 −
                                 
                                    e
                                    i
                                 
                                 =
                                 
                                    β
                                    i
                                    +
                                 
                                 −
                                 
                                    β
                                    i
                                    −
                                 
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (12)
                           
                              
                                 
                                    β
                                    i
                                    +
                                 
                                 ,
                                 
                                    β
                                    i
                                    −
                                 
                                 ≥
                                 0
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                                 ,
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                  

When a shipping liner (e.g., for ship i) receives the scheduled berthing time (xi
                     ), i.e., 
                        
                           
                              x
                              i
                           
                           =
                           
                              ∑
                              
                                 b
                                 ∈
                                 B
                              
                           
                           
                              x
                              
                                 i
                                 ,
                                 b
                              
                           
                        
                      (or 
                        
                           
                              ∑
                              
                                 b
                                 ∈
                                 B
                              
                           
                           
                              
                                 x
                                 
                                    i
                                    ,
                                    b
                                 
                              
                              
                                 y
                                 
                                    i
                                    ,
                                    b
                                 
                              
                           
                        
                     ), and the assigned berth index (yi
                     ), i.e., 
                        
                           
                              y
                              i
                           
                           =
                           
                              ∑
                              
                                 b
                                 ∈
                                 B
                              
                           
                           
                              
                                 y
                                 
                                    i
                                    ,
                                    b
                                 
                              
                              b
                           
                        
                     , from the port operator, the shipping liner will make voyage plans for the ship, whose arrival time should be around xi
                      so that it can begin operations at xi
                      according to the baseline schedule. Then the ship's departure time from the port equals to ‘
                     
                        
                           
                              x
                              i
                           
                           +
                           
                              t
                              
                                 i
                                 ,
                                 
                                    y
                                    i
                                 
                              
                           
                        
                     ’. The operation time (dwell time) (ti,yi
                     ) depends on the number of containers that need to be handled (discharging & loading) for the ship. If the number remains the same during each one of the future periods, the operation time 
                        
                           (
                           
                              t
                              
                                 i
                                 ,
                                 
                                    y
                                    i
                                 
                              
                           
                           )
                        
                      for each ship is the deterministic data. In the tactical BAP decision, ship i’s departure time should not be later than the berthing time of the ship that succeeds ship i in a berth's schedule. As shown in Fig. 2, there may exist a slack time between the time slots of two consecutive ships. The slack time (si
                     ) can be used to satisfy the requirements of the unforeseen extra operation time, because the number of discharged and loaded containers may vary in different periods. In reality, the dwell time of ships should be stochastic rather than deterministic. Therefore, from stochastic perspective, the following sections propose both a stochastic programming model and a robust formulation model for the tactical BAP decisions.

The previous section proposes a tactical BAP model based on a deterministic environment with respect to the ships’ dwell time, which depends on the numbers of containers that will be handled (discharging & loading) for arriving ships. However, the global maritime logistic market contains a lot of uncertainties that inherit from the fluctuation of the demand for freight transportation. Shipping liners’ ships visit a port periodically (typically weekly). For a ship, the number of containers that need to be handled for the ship fluctuates in each period. Therefore, the dwell time of ships should be uncertain for the tactical BAP decisions.

When a port operator makes tactical-level berth allocation plan (i.e., berth template), a shipping liner tells the port operator an estimated number about how many containers will be handled during its ship's periodical dwell in the port. The estimated number of the containers that need to be handled is usually based on the estimation on the transportation demands from the shipping liner's long-term clients. For the ship, the port operator should allocate a time slot in the tactical plan to handle the estimated number of containers. Regardless of the actual number of the handled containers in future periods, the port operator promises to allocated the above mentioned time slot to the ship. The time slots are denoted by the deterministic parameters ti,b
                      in the previous section.

In reality, the actual number of the handled containers is usually greater than the estimated number as there are unforeseen transportation tasks emerging in periods. We define a stochastic parameter δi
                      to denote the random extra time slot needed for serving the ship i in one future period. The randomness of δi
                      incurred by the uncertain maritime transportation market has brought new challenges for making a robust berth template so as to improve the efficiency of port operations.

As shown in Fig. 2, we suppose si
                         is the slack time for ship i, i.e., the length of the time interval between the ending time of ship i and the starting time of the ship behind the ship i in the schedule. Then 
                           
                              
                                 (
                                 
                                    
                                       δ
                                       i
                                    
                                    −
                                    
                                       s
                                       i
                                    
                                 
                                 )
                              
                              +
                           
                         is the conflict time by which the ship i may influence its following ships. We can assign a penalty cost rate (denoted by ci
                        ) for 
                           
                              
                                 (
                                 
                                    
                                       δ
                                       i
                                    
                                    −
                                    
                                       s
                                       i
                                    
                                 
                                 )
                              
                              +
                           
                         so as to minimize the potential conflicts during the execution of the initial plan. The penalty cost is mainly related to the rushing cost for increasing the productivity so as to shorten the operation time and resolve the conflict, i.e., 
                           
                              
                                 (
                                 
                                    
                                       δ
                                       i
                                    
                                    −
                                    
                                       s
                                       i
                                    
                                 
                                 )
                              
                              +
                           
                        . Based on the above analysis, we propose a stochastic programming model formulation for the tactical BAP under uncertainty.

                           
                              (13)
                              
                                 
                                    
                                       [
                                       SBAP
                                       ]
                                       
                                       Minimize
                                       
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       d
                                       i
                                    
                                    
                                       (
                                       
                                          
                                             β
                                             i
                                             +
                                          
                                          +
                                          
                                             β
                                             i
                                             −
                                          
                                       
                                       )
                                    
                                    +
                                    E
                                    
                                       {
                                       
                                          
                                             ∑
                                             
                                                i
                                                ∈
                                                N
                                             
                                          
                                          
                                             
                                                c
                                                i
                                             
                                             
                                                
                                                   (
                                                   
                                                      
                                                         δ
                                                         i
                                                      
                                                      −
                                                      
                                                         s
                                                         i
                                                      
                                                   
                                                   )
                                                
                                                +
                                             
                                          
                                       
                                       }
                                    
                                 
                              
                           
                        
                     

s.t. Constraints (2–3; 5–9; 11–12)

                           
                              (14)
                              
                                 
                                    0
                                    ≤
                                    
                                       x
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    +
                                    
                                       t
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    +
                                    
                                       s
                                       i
                                    
                                    −
                                    
                                       ζ
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    H
                                    ≤
                                    H
                                    
                                    ∀
                                    b
                                    ∈
                                    B
                                    ,
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                        
                           
                              (15)
                              
                                 
                                    
                                       x
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    +
                                    
                                       t
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    +
                                    
                                       s
                                       i
                                    
                                    −
                                    
                                       ζ
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    H
                                    ≤
                                    
                                       x
                                       
                                          j
                                          ,
                                          b
                                       
                                    
                                    +
                                    
                                       (
                                       
                                          1
                                          −
                                          
                                             z
                                             
                                                i
                                                ,
                                                j
                                                ,
                                                b
                                             
                                          
                                       
                                       )
                                    
                                    M
                                    
                                    ∀
                                    b
                                    ∈
                                    B
                                    ,
                                    ∀
                                    i
                                    ,
                                    j
                                    ∈
                                    N
                                    ,
                                    i
                                    ≠
                                    j
                                 
                              
                           
                        
                        
                           
                              (16)
                              
                                 
                                    
                                       ∑
                                       
                                          b
                                          ∈
                                          B
                                       
                                    
                                    
                                       
                                          ∑
                                          
                                             i
                                             ∈
                                             N
                                          
                                       
                                       
                                          
                                             y
                                             
                                                i
                                                ,
                                                b
                                             
                                          
                                          
                                             t
                                             
                                                i
                                                ,
                                                b
                                             
                                          
                                       
                                    
                                    +
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       s
                                       i
                                    
                                    =
                                    H
                                    
                                       |
                                       B
                                       |
                                    
                                 
                              
                           
                        
                        
                           
                              (17)
                              
                                 
                                    
                                       s
                                       i
                                    
                                    ≥
                                    0
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                     

Objective (13) contains the cost of baseline schedule, i.e., 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 d
                                 i
                              
                              
                                 (
                                 
                                    
                                       β
                                       i
                                       +
                                    
                                    +
                                    
                                       β
                                       i
                                       −
                                    
                                 
                                 )
                              
                           
                        , and the expected cost for handling potential conflict time during the execution of the baseline schedule. Constraint (4) in the original model BAP is substituted by Constraints (14) and (15), in which a new decision variable (si
                        ) is defined for calculating the slack time behind ship i. Constraint (16) ensures the sum of all the handling time and slack time of ships equals to the total occupancy time of the used berths.

Because of the fluctuation of the demand for freight transportation, the uncertainty of the ships’ operation time (dwell time) is more common than the uncertainty of their arrival time. Thus the previous model explanation does not consider the uncertain arrival time. However, if we define the stochastic parameter δi
                         to denote the sum of the unforeseen deviation of a ship's arrival time and operation time, the model SBAP still works.

In the proposed model SBAP, there is a form of expected value (
                           E
                        ) in the objective function. We deal with it by the Sample Average Approximation (SAA) scheme (Keller & Bayraksan, 2010; Kleywegt, Shapiro & Homem-De-Mello, 2002; Shapiro & Homem-de-Mello, 1998; Zhen & Wang, 2015). Given arbitrary probability distributions of ships’ operation time deviation (δi
                        ), we can obtain a set of samples on the δ-variables. The probability distributions of δi
                         can be estimated from historical data. A random sample of Q scenarios is generated to denote the δ-variables, denoted by δ
                        
                           i, q
                        , i ∈ N, q = 1,…, Q. For the Q scenarios, we assume their probability is identical (i.e., 
                           
                              Q
                              
                                 −
                                 1
                              
                           
                        ) for the interest of simplicity. Then the original model SBAP is approximated by a model as follows:

                           
                              (18)
                              
                                 
                                    Minimize
                                    
                                       ∑
                                       
                                          (
                                          i
                                          ∈
                                          N
                                          )
                                       
                                    
                                    
                                       d
                                       i
                                    
                                    
                                       (
                                       
                                          β
                                          i
                                          +
                                       
                                       +
                                       
                                          β
                                          i
                                          −
                                       
                                       )
                                    
                                    +
                                    
                                       Q
                                       
                                          −
                                          1
                                       
                                    
                                    ·
                                    
                                       ∑
                                       
                                          q
                                          =
                                          1
                                       
                                       Q
                                    
                                    
                                       
                                          ∑
                                          
                                             i
                                             ∈
                                             N
                                          
                                       
                                       
                                          c
                                          i
                                       
                                    
                                    
                                       
                                          (
                                          
                                             
                                                δ
                                                
                                                   i
                                                   ,
                                                   q
                                                
                                             
                                             −
                                             
                                                s
                                                i
                                             
                                          
                                          )
                                       
                                       +
                                    
                                 
                              
                           
                        
                     

s.t. Constraints (2–3; 5–9; 11–12; 14–17)

The nonlinear form ‘
                           
                              
                                 c
                                 i
                              
                              
                                 
                                    (
                                    
                                       
                                          δ
                                          
                                             i
                                             ,
                                             q
                                          
                                       
                                       −
                                       
                                          s
                                          i
                                       
                                    
                                    )
                                 
                                 +
                              
                           
                        ’ in Objective (18) of the above model is linearized by defining two more non-negative variables 
                           
                              φ
                              
                                 i
                                 ,
                                 q
                              
                              +
                           
                         and 
                           
                              φ
                              
                                 i
                                 ,
                                 q
                              
                              −
                           
                        . Then the model turns to:

                           
                              (19)
                              
                                 
                                    [
                                    
                                       SBA
                                       
                                          P
                                          SAA
                                       
                                    
                                    
                                       ]
                                       
                                       Minimize
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       d
                                       i
                                    
                                    
                                       (
                                       
                                          
                                             β
                                             i
                                             +
                                          
                                          +
                                          
                                             β
                                             i
                                             −
                                          
                                       
                                       )
                                    
                                    +
                                    
                                       Q
                                       
                                          −
                                          1
                                       
                                    
                                    ·
                                    
                                       ∑
                                       
                                          q
                                          =
                                          1
                                       
                                       Q
                                    
                                    
                                       
                                          ∑
                                          
                                             i
                                             ∈
                                             N
                                          
                                       
                                       
                                          
                                             c
                                             i
                                          
                                          
                                             φ
                                             
                                                i
                                                ,
                                                q
                                             
                                             +
                                          
                                       
                                    
                                 
                              
                           
                        
                     

s.t. Constraints (2–3; 5–9; 11–12; 14–17)

                           
                              (20)
                              
                                 
                                    
                                       δ
                                       
                                          i
                                          ,
                                          q
                                       
                                    
                                    −
                                    
                                       s
                                       i
                                    
                                    =
                                    
                                       φ
                                       
                                          i
                                          ,
                                          q
                                       
                                       +
                                    
                                    −
                                    
                                       φ
                                       
                                          i
                                          ,
                                          q
                                       
                                       −
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                    ;
                                    q
                                    =
                                    1
                                    ,
                                    ⋯
                                    ,
                                    Q
                                 
                              
                           
                        
                        
                           
                              (21)
                              
                                 
                                    
                                       φ
                                       
                                          i
                                          ,
                                          q
                                       
                                       +
                                    
                                    ,
                                    
                                    
                                       φ
                                       
                                          i
                                          ,
                                          q
                                       
                                       −
                                    
                                    ≥
                                    0
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                    ;
                                    q
                                    =
                                    1
                                    ,
                                    ⋯
                                    ,
                                    Q
                                 
                              
                           
                        
                     

The optimal solution of the model SBAPSAA converges to an optimal solution of the model SBAP as the number of scenarios Q increases. We assume the optimal solution for model SBAP is (x*, y*, z*, s*), and the objective value is Z(x*, y*, z*, s*); the optimal solution for model SBAPSAA is 
                           
                              (
                              
                                 
                                    x
                                    Q
                                    *
                                 
                                 ,
                                 
                                    y
                                    Q
                                    *
                                 
                                 ,
                                 
                                    z
                                    Q
                                    *
                                 
                                 ,
                                 
                                    s
                                    Q
                                    *
                                 
                              
                              )
                           
                        , and the objective value is 
                           
                              
                                 Z
                                 Q
                              
                              
                                 (
                                 
                                    
                                       x
                                       Q
                                       *
                                    
                                    ,
                                    
                                       y
                                       Q
                                       *
                                    
                                    ,
                                    
                                       z
                                       Q
                                       *
                                    
                                    ,
                                    
                                       s
                                       Q
                                       *
                                    
                                 
                                 )
                              
                           
                        . When Q tends to infinity, the optimal solution 
                           
                              (
                              
                                 
                                    x
                                    Q
                                    *
                                 
                                 ,
                                 
                                    y
                                    Q
                                    *
                                 
                                 ,
                                 
                                    z
                                    Q
                                    *
                                 
                                 ,
                                 
                                    s
                                    Q
                                    *
                                 
                              
                              )
                           
                         of the model SBAPSAA converges to an optimal solution (x*, y*, z*, s*) of the model SBAP; and the optimal objective value 
                           
                              
                                 Z
                                 Q
                              
                              
                                 (
                                 
                                    
                                       x
                                       Q
                                       *
                                    
                                    ,
                                    
                                       y
                                       Q
                                       *
                                    
                                    ,
                                    
                                       z
                                       Q
                                       *
                                    
                                    ,
                                    
                                       s
                                       Q
                                       *
                                    
                                 
                                 )
                              
                           
                         of the model SBAPSAA also converges to the optimal objective value Z(x*, y*, z*, s*) of the model SBAP.

We generate M independent samples and solve SBAPSAA for each sample. The optimal objective value is denoted by 
                           
                              Z
                              m
                              Q
                           
                        , m = 1, … , M; and the optimal solution is denoted by (
                           
                              
                                 x
                                 m
                                 Q
                              
                              ,
                              
                                 y
                                 m
                                 Q
                              
                              ,
                              
                              
                                 z
                                 m
                                 Q
                              
                              ,
                              
                                 s
                                 m
                                 Q
                              
                           
                        ). Here 
                           x, y
                        , and 
                           s
                         are |N|-dimensional vectors of berthing time, position, and slack time for all the ships; and 
                           z
                         is a |N| × |N| matrix. Then, 
                           
                              
                                 M
                                 
                                    −
                                    1
                                 
                              
                              ·
                              
                                 ∑
                                 
                                    m
                                    =
                                    1
                                 
                                 M
                              
                              
                                 Z
                                 m
                                 Q
                              
                           
                         provides a lower statistical bound (LB) for the optimal objective value of the model SBAP, i.e., Z* (Mak, Morton, & Wood, 1999; Norkin, Pflug, & Ruszczynski, 1998).

A sample of Q'scenarios (Q' ≫ Q) is generated to evaluate the objective values of the M solutions (
                           
                              
                                 x
                                 m
                                 Q
                              
                              ,
                              …
                           
                        ), i.e., 
                           
                              
                                 
                                    f
                                    ˜
                                 
                                 Q
                              
                              ,
                              
                                 (
                                 
                                    
                                       x
                                       m
                                       Q
                                    
                                    ,
                                    …
                                 
                                 )
                              
                              =
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 d
                                 i
                              
                              
                                 (
                                 
                                    
                                       β
                                       i
                                       +
                                    
                                    +
                                    
                                       β
                                       i
                                       −
                                    
                                 
                                 )
                              
                              +
                              
                                 Q
                                 
                                    
                                       
                                       ′
                                    
                                    −
                                    1
                                 
                              
                              ·
                              
                                 ∑
                                 
                                    q
                                    =
                                    1
                                 
                                 
                                    Q
                                    ′
                                 
                              
                              
                                 c
                                 
                                    
                                       (
                                       
                                          
                                             
                                                δ
                                             
                                             q
                                          
                                          −
                                          
                                             s
                                             m
                                             Q
                                          
                                       
                                       )
                                    
                                    +
                                 
                                 ·
                                 
                                    
                                       f
                                       ˜
                                    
                                    Q
                                 
                                 ,
                                 
                                    (
                                    
                                       
                                          x
                                          m
                                          Q
                                       
                                       ,
                                       …
                                    
                                    )
                                 
                              
                           
                         is an unbiased estimator of 
                           
                              f
                              (
                              
                                 
                                    x
                                    m
                                    Q
                                 
                                 ,
                                 …
                              
                              )
                           
                        . As 
                           
                              (
                              
                                 
                                    x
                                    m
                                    Q
                                 
                                 ,
                                 …
                              
                              )
                           
                         is a feasible solution to the original problem SBAP, we have 
                           
                              f
                              
                                 (
                                 
                                    
                                       x
                                       m
                                       Q
                                    
                                    ,
                                    …
                                 
                                 )
                              
                              ≥
                              
                                 Z
                                 *
                              
                           
                        . Thus 
                           
                              
                                 
                                    f
                                    ˜
                                 
                                 Q
                              
                              
                                 (
                                 
                                    x
                                    m
                                    Q
                                 
                                 ,
                                 …
                                 )
                              
                           
                         is an upper statistical bound (UB
                           m
                        ) for Z
                        *. The solution 
                           
                              (
                              
                                 
                                    x
                                    m
                                    Q
                                 
                                 ,
                                 …
                              
                              )
                           
                         with the smallest gap, i.e., UB
                           m
                        
                        
                           −
                        LB, will be chosen. The above procedure is shown in Fig. 3
                         as follows.

The deterministic tactical BAP model with moderate-scale problem cases is even hard to solve by some commercial software (e.g., CPLEX, LINDO), not to mention the model SBAPSAA. Thus, a heuristic algorithm is suggested to solve the model SBAPSAA in the large-scale applications.

The problem in this study is more difficult than generic assignment problems as it contains three levels of decisions: (1) ship-berth assignment, (2) precedence of ships in each berth, and (3) the berthing time of ships. In our approach, a feasible solution can be derived from a given sequence of ships. The decoding of a sequence into a feasible solution contains three stages, as shown in Fig. 4
                        .

                           
                              (1)
                              
                                 Solving y
                                 
                                    i, b
                                 : given a sequence of ships, we solve a model (BAP_n) for each ship one by one. The ship-berth assignment decisions (i.e., y
                                 
                                    i, b
                                 ) are determined sequentially.


                                 Solving z
                                 
                                    i, j, b
                                 : given the above obtained ship-berth assignments for all the ships, we solve the model (BAP) to obtain decisions on the precedence of ships for each berth (i.e., z
                                 
                                    i, j, b
                                 ).


                                 Solving x
                                 
                                    i, b
                                 : given the obtained decision on the ship-berth assignments (i.e., y
                                 
                                    i, b
                                 ) and the ship precedence in all the berths (i.e., z
                                 
                                    i, j, b
                                 ), we solve the model (SBAPSAA) to obtain decisions on the berthing time for all the ships (i.e., x
                                 
                                    i, b
                                 ).

On the basis of the above three-stage decoding method, we propose some meta-heuristics, which change the sequence of ships in order to improve the quality of solutions.


                        Sections 5.2–5.5 will elaborate on the above issues (three stages and meta-heuristics).

Here we propose some rules for generating the initial sequence. (1) The most intuitive rule is to generate a sequence by the decreasing order of di
                        . The weights reflect ships’ priorities. (2) Another rule is to generate a sequence by the decreasing order of: min 
                           b ∈ B
                        
                        t
                        
                           i, b
                        , which is the minimum handling time of ships. The ships with long handling time should be placed in the front of the sequence. In this study, we use the above rules (1) and (2) as the primary and secondary criteria for generating the initial sequence of ships.

The deterministic tactical BAP is still intractable when the numbers of ships and berths are large. The CPLEX can hardly solve the deterministic BAP model with large-scale instances efficiently.

This study proposes a sequential method to find a good feasible plan on berth-ship assignments in a reasonable time. As the name suggests, the sequential method is to solve the berth-ship assignments for ships one by one. Given a sequence of ships, a model (BAP_n) is solved for ships one by one. Let the sequence of ships be {v
                        1, ⋅⋅⋅, vn
                        , ⋅⋅⋅, v
                        |N|}, where |N| is the number of ships. The sequential method solves |N| ships sequentially by using multiple iterations. In the nth iteration, the model (BAP_n) is solved to obtain the berth allocation decision for the nth ship in the sequence.

We define a parameter DS, which means the depth of search, e.g., DS = 5. In the nth iteration for solving the decision of the nth ship (i.e., 
                           
                              y
                              
                                 
                                    v
                                    n
                                 
                                 ,
                                 b
                              
                           
                         and 
                           
                              x
                              
                                 
                                    v
                                    n
                                 
                                 ,
                                 b
                              
                           
                        ), the variables of ships 
                           
                              
                                 v
                                 1
                              
                              ,
                              ⋯
                              ,
                              
                                 v
                                 
                                    n
                                    −
                                    1
                                 
                              
                           
                         are input data, and the variables of ships 
                           
                              
                                 v
                                 n
                              
                              ,
                              ⋯
                              ,
                              
                                 v
                                 
                                    n
                                    +
                                    D
                                    S
                                 
                              
                           
                         are decision variables. After solving the model (BAP_n), the obtained decision variables of the ship vn
                         are fixed as the input data for the next iteration. The procedure consists of ‘|N|-DS’ iterations. The last iteration is to solve the variables of ships 
                           
                              
                                 v
                                 
                                    |
                                    N
                                    |
                                    −
                                    D
                                    S
                                 
                              
                              ,
                              ⋯
                              ,
                              
                                 v
                                 
                                    |
                                    N
                                    |
                                 
                              
                           
                        . For the model (BAP_n) in the nth iteration, two sets are defined: 
                           
                              
                                 V
                                 n
                                 F
                              
                              =
                              
                                 {
                                 
                                    
                                       v
                                       1
                                    
                                    ,
                                    ⋯
                                    ,
                                    
                                       v
                                       
                                          n
                                          −
                                          1
                                       
                                    
                                 
                                 }
                              
                           
                         and 
                           
                              
                                 V
                                 n
                                 B
                              
                              =
                              
                                 {
                                 
                                    
                                       v
                                       n
                                    
                                    ,
                                    ⋯
                                    ,
                                    
                                       v
                                       
                                          n
                                          +
                                          D
                                          S
                                       
                                    
                                 
                                 }
                              
                           
                        , 
                           
                              n
                              ∈
                              {
                              
                                 1
                                 ,
                                 2
                                 ,
                                 ⋯
                                 ,
                                 |
                                 N
                                 |
                                 −
                                 D
                                 S
                              
                              }
                           
                        . For the first iteration, 
                           
                              
                                 V
                                 1
                                 F
                              
                              =
                              ∅
                           
                        .

The model for the nth iteration (BAP_n) is formulated as follows:

Input data: all the input data for the original model SBAPSAA, and 
                           
                              
                                 x
                                 
                                    i
                                    ,
                                    b
                                 
                              
                              ,
                              
                              
                                 y
                                 
                                    i
                                    ,
                                    b
                                 
                              
                              ,
                              ∀
                              i
                              ∈
                              
                                 V
                                 n
                                 F
                              
                           
                        .

                           
                              (22)
                              
                                 
                                    
                                       [
                                       BAP
                                       
                                          _
                                          n
                                       
                                       ]
                                    
                                    
                                    Minimize
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          
                                             V
                                             n
                                             B
                                          
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          |
                                          
                                             ∑
                                             
                                                b
                                                ∈
                                                B
                                             
                                          
                                          
                                             
                                                x
                                                
                                                   i
                                                   ,
                                                   b
                                                
                                             
                                             −
                                             
                                                
                                                   
                                                      ζ
                                                      ′
                                                   
                                                
                                                i
                                             
                                             H
                                             −
                                             
                                                e
                                                i
                                             
                                          
                                          |
                                       
                                    
                                 
                              
                           
                        
                     

s.t. Constraints (4)–(7)

                           
                              (23)
                              
                                 
                                    
                                       ∑
                                       
                                          b
                                          ∈
                                          B
                                       
                                    
                                    
                                       y
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    =
                                    1
                                    
                                    ∀
                                    i
                                    ∈
                                    
                                       V
                                       n
                                       B
                                    
                                 
                              
                           
                        
                        
                           
                              (24)
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          
                                             V
                                             n
                                             B
                                          
                                          ∪
                                          
                                             V
                                             n
                                             F
                                          
                                       
                                    
                                    
                                       
                                          y
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                       
                                          t
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                    
                                    ≤
                                    H
                                    
                                    ∀
                                    b
                                    ∈
                                    B
                                 
                              
                           
                        
                        
                           
                              (25)
                              
                                 
                                    
                                       x
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    ≤
                                    
                                       y
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    H
                                    
                                    ∀
                                    b
                                    ∈
                                    B
                                    ,
                                    ∀
                                    i
                                    ∈
                                    
                                       V
                                       n
                                       B
                                    
                                 
                              
                           
                        
                        
                           
                              (26)
                              
                                 
                                    
                                       x
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    ≥
                                    0
                                    ,
                                    
                                    
                                       y
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    ,
                                    
                                    
                                       ζ
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    ,
                                    
                                    
                                       ζ
                                       i
                                       ′
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          1
                                       
                                       }
                                    
                                    
                                    ∀
                                    b
                                    ∈
                                    B
                                    ,
                                    ∀
                                    i
                                    ∈
                                    
                                       V
                                       n
                                       B
                                    
                                 
                              
                           
                        
                        
                           
                              (27)
                              
                                 
                                    
                                       z
                                       
                                          i
                                          ,
                                          j
                                          ,
                                          b
                                       
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          1
                                       
                                       }
                                    
                                    
                                    ∀
                                    b
                                    ∈
                                    B
                                    ,
                                    ∀
                                    i
                                    ∈
                                    
                                       V
                                       n
                                       B
                                    
                                    ∪
                                    
                                       V
                                       n
                                       F
                                    
                                 
                              
                           
                        
                     

Objective (22) can be linearized by the way as Constraints (10)–(12).

The search depth DS is an important parameter. A large DS makes the solving process become time-consuming. The setting of DS depends on the computer's capacity. If DS = 0, the method degenerates to a normal greedy search. This way is fast but incurs much loss of optimality. Moreover, if DS is too small, it may probably incur that no feasible time-berth space can be allocated to the last few ships. It can effectively avoid that infeasibility for rear ships by setting a proper DS value.

The previous procedure solves a series of partial BAP models (i.e., BAP_n) sequentially, and obtains a feasible plan that consists of the decisions on ship-berth assignments, ship precedence, and ships’ berthing time. As this plan is obtained for ships in a sequential way, we can improve the plan by solving the whole BAP model at a time for all the ships with the ship-berth assignments fixed. In this process, the decisions on ship precedence in berths may be refined.

Input data: all the input data for the original model SBAPSAA, and y
                        
                           i, b
                        , ∀i ∈ N,  b ∈ B.

[BAP] Objective (1)

s.t. Constraints (4–8)

                           
                              (28)
                              
                                 
                                    
                                       x
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    ≥
                                    0
                                    ,
                                    
                                       z
                                       
                                          i
                                          ,
                                          j
                                          ,
                                          b
                                       
                                    
                                    ,
                                    
                                       ζ
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    ,
                                    
                                       ζ
                                       i
                                       ′
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          1
                                       
                                       }
                                    
                                 
                              
                           
                        
                     

The above process is different from the last iteration in Section 5.2. One of the key differences is that the variables x
                        
                           i, b
                         are optimized at one time in Section 5.3; while they are optimized one by one during multiple iterations in Section 5.2. Therefore Section 5.3 is necessary.

Given the ship-berth assignment and the ship precedence obtained in the previous two steps, we solve the SBAPSAA model so as to determine a good arrangement on the ships’ berthing time.

Input data: all the input data for the original model SBAPSAA, and y
                        
                           i, b
                        , z
                        
                           i, j, b
                         ∀i, j ∈ N,  b ∈ B.

[SBAPSAA
                        ] Objective (19)

s.t. Constraints (5; 8; 11,12; 14–16; 20)

                           
                              (29)
                              
                                 
                                    
                                       x
                                       
                                          (
                                          i
                                          ,
                                          b
                                          )
                                       
                                    
                                    ,
                                    
                                       s
                                       i
                                    
                                    ,
                                    
                                       β
                                       i
                                       +
                                    
                                    ,
                                    
                                       β
                                       i
                                       −
                                    
                                    ,
                                    
                                       φ
                                       
                                          (
                                          i
                                          ,
                                          q
                                          )
                                       
                                       +
                                    
                                    ,
                                    
                                       φ
                                       
                                          (
                                          i
                                          ,
                                          q
                                          )
                                       
                                       −
                                    
                                    ≥
                                    0
                                    ,
                                    
                                       ζ
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    ,
                                    
                                       ζ
                                       i
                                       ′
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          1
                                       
                                       }
                                    
                                 
                              
                           
                        
                     

It should be explained that the uncertain part in the objective ‘
                           
                              E
                              {
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       N
                                    
                                 
                                 
                                    
                                       c
                                       i
                                    
                                    
                                       
                                          (
                                          
                                             
                                                δ
                                                i
                                             
                                             −
                                             
                                                s
                                                i
                                             
                                          
                                          )
                                       
                                       +
                                    
                                 
                              
                              }
                           
                        ’ is only considered in the third step because this part mainly depends on the slack time of ships ‘si
                        ’, which is actually derived from the ships’ berthing time. The third step is to solve the ships’ berthing time, so we solve the SBAPSAA model in this step, but solve the BAP model in the previous two steps.

A feasible solution is derived from (encoded by) a sequence of ships. The above three stages decode a sequence into a solution. This section addresses some meta-heuristics for changing the sequence of ships so as to improve the quality of solutions.

Some meta-heuristics were often used in optimization problems on port operations. For example, the Tabu Search (TS) employs pairwise-exchanges of ships in the sequence to obtain new solutions. The neighborhood of a sequence is completely explored by pairwise-exchanges within each TS iteration. The complete pairwise-exchange strategy will cause the size of neighborhood for a sequence becomes very large. Thus, if this problem is solved by TS, it becomes very time-consuming.

Another meta-heuristic, Squeaky Wheel Optimization (SWO), was also often utilized in studies on port operations, e.g., yard optimization problems (Chen et al., 2004), berth allocation problems (Meisel & Bierwirth, 2009; Umang, Bierlaire, & Vacca, 2013). SWO changes a sequence in the way as follows: first we calculate the cost related to each ship: 
                           
                              cos
                              t
                              
                                 (
                                 
                                    V
                                    i
                                 
                                 )
                              
                              =
                              
                                 d
                                 i
                              
                              
                                 |
                                 
                                    
                                       ∑
                                       
                                          b
                                          ∈
                                          B
                                       
                                    
                                    
                                       
                                          x
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                       −
                                       
                                          
                                             
                                                ζ
                                                ′
                                             
                                          
                                          i
                                       
                                       H
                                       −
                                       
                                          e
                                          i
                                       
                                    
                                 
                                 |
                              
                              +
                              
                                 Q
                                 
                                    −
                                    1
                                 
                              
                              ·
                              
                                 ∑
                                 
                                    q
                                    =
                                    1
                                 
                                 Q
                              
                              
                                 
                                    c
                                    i
                                 
                                 
                                    
                                       (
                                       
                                          
                                             δ
                                             
                                                i
                                                ,
                                                q
                                             
                                          
                                          −
                                          
                                             s
                                             i
                                          
                                       
                                       )
                                    
                                    +
                                 
                              
                           
                        ; then starting from the front of the sequence, we swap two consecutive ships if the cost value of the former one is lower than the latter one. After swap operations, we obtain a new sequence. To avoid SWO is trapped in a cycle, if a sequence has already been generated before, it will be ignored. SWO terminates after obtaining a given number of solutions without improvement.

SWO only considers adjacent swaps, and is not effective for all types of port operation problems. Thus, a method named Critical-Shaking Neighborhood Search (CSNS) was proposed by Lim and Xu (2006), and outperforms other meta-heuristics for the yard allocation problem. CSNS was also used in the integrated optimization on berth and yard planning in bulk ports (Robenek et al., 2014). In contrast to SWO, which increases the priority of the critical elements in the sequence, CSNS randomly shakes the priority of the critical elements in the sequence to help sequences escape from the local optimum. Here the critical elements are regarded as the ships with high cost, i.e., cost(Vi
                        ). We define NC as the number of critical elements. Given a sequence, we select NC ships with the top NC highest cost value cost(Vi
                        ), and then randomly shake the NC ships to other places in the sequence. To avoid CSNS is trapped in a cycle, if a sequence has already been generated before, we generate a new one in this random way again. The procedure terminates after obtaining a given number of solutions without improvement. The above two meta-heuristics are shown in Fig. 5
                        .

Port operators may face the problem on insufficient data for calibrating a stochastic programming model such as the described above. When limited or no data are available for the operation time (dwell time) of ships, port operators rely on estimates of the shortest-longest deviations of ships’ operation time. Similar with the above analysis in Section 4, the deviation of ship i's actual operation time from its estimated time is denoted by a stochastic variable δi
                     , which is random with unknown distribution and lies within an uncertainty set. The objective is to obtain a robust baseline schedule of tactical berth allocation that minimizes the worst possible cost for all realizations of ships’ deviation time within the uncertainty sets (Bertsimas & Sim, 2004; Sungur, Ordóñez, & Dessouky, 2008).

We assume the lower and upper bounds of the δi
                         uncertainty sets are known, i.e., 
                           
                              
                                 Δ
                                 i
                                 L
                              
                              ≤
                              
                                 δ
                                 i
                              
                              ≤
                              
                                 Δ
                                 i
                                 U
                              
                           
                        , 
                           
                              
                                 Δ
                                 i
                                 L
                              
                              ,
                              
                              
                                 Δ
                                 i
                                 U
                              
                           
                        , 
                           
                              Δ
                              i
                              U
                           
                         are the lower and upper bounds of the deviation for ship i. We define a normalized bound on the total actual deviation of all ships as: 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 [
                                 
                                    
                                       (
                                       
                                          
                                             δ
                                             i
                                          
                                          −
                                          
                                             Δ
                                             i
                                             L
                                          
                                       
                                       )
                                    
                                    /
                                    
                                       (
                                       
                                          
                                             Δ
                                             i
                                             U
                                          
                                          −
                                          
                                             Δ
                                             i
                                             L
                                          
                                       
                                       )
                                    
                                 
                                 ]
                              
                              ≤
                              W
                           
                        . Here W can be regarded as an upper limit on the number of ships that reach their worst-case upper bounds 
                           
                              Δ
                              i
                              U
                           
                        . From a decision maker's perspective, W is a way for controlling how conservative the worst-case scenario is. Based on the above discussion, we formulate the robust version of the problem as follows:

                           
                              (30)
                              
                                 
                                    Minimize
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                β
                                                i
                                                +
                                             
                                             +
                                             
                                                β
                                                i
                                                −
                                             
                                          
                                          )
                                       
                                    
                                    +
                                    C
                                    
                                       (
                                       s
                                       )
                                    
                                 
                              
                           
                        
                     

s.t. Constraints (2–3; 5–9; 11–12; 14–17)

                           
                              (31)
                              
                                 
                                    where
                                    
                                    C
                                    
                                       (
                                       s
                                       )
                                    
                                    =
                                    maximize
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          c
                                          i
                                       
                                       
                                          
                                             (
                                             
                                                
                                                   δ
                                                   i
                                                
                                                −
                                                
                                                   s
                                                   i
                                                
                                             
                                             )
                                          
                                          +
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (32)
                              
                                 
                                    s
                                    
                                       .
                                       t
                                    
                                    .
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       [
                                       
                                          
                                             (
                                             
                                                
                                                   δ
                                                   i
                                                
                                                −
                                                
                                                   Δ
                                                   i
                                                   L
                                                
                                             
                                             )
                                          
                                          /
                                          
                                             (
                                             
                                                
                                                   Δ
                                                   i
                                                   U
                                                
                                                −
                                                
                                                   Δ
                                                   i
                                                   L
                                                
                                             
                                             )
                                          
                                       
                                       ]
                                    
                                    ≤
                                    W
                                 
                              
                           
                        
                        
                           
                              (33)
                              
                                 
                                    
                                       Δ
                                       i
                                       L
                                    
                                    ≤
                                    
                                       δ
                                       i
                                    
                                    ≤
                                    
                                       Δ
                                       i
                                       U
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                     

In the model C(
                           s
                        ), δi
                         is decision variable, δi
                         and 
                           
                              Δ
                              i
                              U
                           
                         are parameters. The reason why we define δi
                         as variable is that the model C(
                           s
                        ) is to find the maximum cost (the worst case) when uncertain δi
                         is located in the range [
                           
                              
                                 Δ
                                 i
                                 L
                              
                              ,
                              
                                 Δ
                                 i
                                 U
                              
                           
                        ].

In the model, Objective (31) is nonlinear because it contains the form ‘
                           
                              
                                 (
                                 ·
                                 )
                              
                              +
                           
                        ’. It is not easy to linearize a form 
                           
                              
                                 
                                 ′
                              
                              
                                 
                                    
                                       
                                          (
                                          ·
                                          )
                                       
                                       +
                                    
                                 
                                 ′
                              
                           
                         contained in a maximization objective by defining some auxiliary continuous variables. For linearizing it, we need to define some more binary variables. We define binary variables ηi
                        , such that 
                           
                              
                                 η
                                 i
                              
                              =
                              0
                           
                         if 
                           
                              
                                 δ
                                 i
                              
                              −
                              
                                 s
                                 i
                              
                              ≤
                              0
                           
                         and 
                           
                              
                                 η
                                 i
                              
                              =
                              1
                           
                         if 
                           
                              
                                 δ
                                 i
                              
                              −
                              
                                 s
                                 i
                              
                              >
                              0
                           
                        . The objective turns to: 
                           
                              C
                              
                                 (
                                 s
                                 )
                              
                              =
                              
                                 maximize
                                 
                              
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 c
                                 i
                              
                              
                                 (
                                 
                                    
                                       δ
                                       i
                                    
                                    −
                                    
                                       s
                                       i
                                    
                                 
                                 )
                              
                              
                                 η
                                 i
                              
                           
                        , which is still nonlinear. However, based on this transformation, the C(
                           s
                        ) can be reformulated as:

                           
                              (34)
                              
                                 
                                    
                                       [
                                       C
                                       
                                          (
                                          s
                                          )
                                       
                                       ]
                                    
                                    
                                    Maximize
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          c
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                δ
                                                i
                                             
                                             −
                                             
                                                s
                                                i
                                             
                                             
                                                η
                                                i
                                             
                                          
                                          )
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (35)
                              
                                 
                                    s
                                    .
                                    t
                                    .
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       [
                                       
                                          
                                             (
                                             
                                                
                                                   δ
                                                   i
                                                
                                                −
                                                
                                                   Δ
                                                   i
                                                   L
                                                
                                                
                                                   η
                                                   i
                                                
                                             
                                             )
                                          
                                          /
                                          
                                             (
                                             
                                                
                                                   Δ
                                                   i
                                                   U
                                                
                                                −
                                                
                                                   Δ
                                                   i
                                                   L
                                                
                                             
                                             )
                                          
                                       
                                       ]
                                    
                                    ≤
                                    W
                                 
                              
                           
                        
                        
                           
                              (36)
                              
                                 
                                    
                                       Δ
                                       i
                                       L
                                    
                                    
                                       η
                                       i
                                    
                                    ≤
                                    
                                       δ
                                       i
                                    
                                    ≤
                                    
                                       Δ
                                       i
                                       U
                                    
                                    
                                       η
                                       i
                                    
                                    
                                    ∀
                                    ∈
                                    N
                                 
                              
                           
                        
                        
                           
                              (37)
                              
                                 
                                    
                                       η
                                       i
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          1
                                       
                                       }
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                     

By substituting 
                           
                              
                                 (
                                 
                                    
                                       δ
                                       i
                                    
                                    −
                                    
                                       Δ
                                       i
                                       L
                                    
                                    
                                       η
                                       i
                                    
                                 
                                 )
                              
                              /
                              
                                 (
                                 
                                    
                                       Δ
                                       i
                                       U
                                    
                                    −
                                    
                                       Δ
                                       i
                                       L
                                    
                                 
                                 )
                              
                           
                         with a new variable δ'
                           i
                        , the above model C(
                           s
                        ) is reformulated as:

                           
                              (38)
                              
                                 
                                    
                                       [
                                       C
                                       
                                          (
                                          s
                                          )
                                       
                                       ]
                                    
                                    
                                    Maximize
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          c
                                          i
                                       
                                       
                                          [
                                          
                                             
                                                (
                                                
                                                   
                                                      Δ
                                                      i
                                                      U
                                                   
                                                   −
                                                   
                                                      Δ
                                                      i
                                                      L
                                                   
                                                
                                                )
                                             
                                             
                                                
                                                   
                                                      δ
                                                      ′
                                                   
                                                
                                                i
                                             
                                             +
                                             
                                                Δ
                                                i
                                                L
                                             
                                             
                                                η
                                                i
                                             
                                             −
                                             
                                                s
                                                i
                                             
                                             
                                                η
                                                i
                                             
                                          
                                          ]
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (39)
                              
                                 
                                    s
                                    .
                                    t
                                    .
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          
                                             δ
                                             ′
                                          
                                       
                                       i
                                    
                                    ≤
                                    W
                                 
                              
                           
                        
                        
                           
                              (40)
                              
                                 
                                    0
                                    ≤
                                    
                                       δ
                                       i
                                       ′
                                    
                                    ≤
                                    
                                       η
                                       i
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                        
                           
                              (41)
                              
                                 
                                    
                                       η
                                       i
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          1
                                       
                                       }
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                     

For the above model (38)–(41), we can show its LP relaxation still has integer solution, i.e., the polyhedron X = {(δ', η) | Constraints (39)–(40); 0 ≤ ηi
                         ≤ 1,  ∀i ∈ N} has integer extreme points. The reason is: First, we observe that X' = {(δ', η) | Constraint (40); 0 ≤ ηi
                         ≤ 1,  ∀i ∈ N} is an integral polyhedron as the constraint matrix is totally unimodual. In addition, 
                           
                              
                                 X
                                 
                                    ′
                                    ′
                                 
                              
                              =
                              
                                 {
                                 
                                    
                                       (
                                       
                                          δ
                                          ′
                                       
                                       ,
                                       η
                                       )
                                    
                                    ∈
                                    
                                       X
                                       ′
                                    
                                    
                                       |
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          
                                             
                                                δ
                                                ′
                                             
                                          
                                          i
                                       
                                       =
                                       W
                                    
                                 
                                 }
                              
                           
                         is a subset of X' in which all extreme points are integer. Finally, All the extreme points of X are either extreme points of X'', or extreme points of X' in which 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 
                                    
                                       δ
                                       ′
                                    
                                 
                                 i
                              
                              <
                              W
                           
                        .

After confirming the LP relaxation of the model C(
                           s
                        ) still has integer solution, we apply LP duality to the LP relaxation of C(
                           s
                        ):

                           
                              (42)
                              
                                 
                                    
                                       [
                                       C
                                       
                                          
                                             (
                                             s
                                             )
                                          
                                          LR
                                       
                                       ]
                                    
                                    
                                    Maximize
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       [
                                       
                                          
                                             c
                                             i
                                          
                                          
                                             (
                                             
                                                
                                                   Δ
                                                   i
                                                   U
                                                
                                                −
                                                
                                                   Δ
                                                   i
                                                   L
                                                
                                             
                                             )
                                          
                                          
                                             
                                                
                                                   δ
                                                   ′
                                                
                                             
                                             i
                                          
                                          +
                                          
                                             c
                                             i
                                          
                                          
                                             (
                                             
                                                
                                                   Δ
                                                   i
                                                   L
                                                
                                                −
                                                
                                                   s
                                                   i
                                                
                                             
                                             )
                                          
                                          
                                             η
                                             i
                                          
                                       
                                       ]
                                    
                                 
                              
                           
                        
                        
                           
                              (43)
                              
                                 
                                    s
                                    
                                       .
                                       t
                                    
                                    .
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          
                                             δ
                                             ′
                                          
                                       
                                       i
                                    
                                    ≤
                                    W
                                 
                              
                           
                        
                        
                           
                              (44)
                              
                                 
                                    
                                       δ
                                       i
                                       ′
                                    
                                    −
                                    
                                       η
                                       i
                                    
                                    ≤
                                    0
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                        
                           
                              (45)
                              
                                 
                                    
                                       η
                                       i
                                    
                                    ≤
                                    1
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                        
                           
                              (46)
                              
                                 
                                    
                                       δ
                                       i
                                       ′
                                    
                                    ≥
                                    0
                                    ;
                                    
                                       η
                                       i
                                    
                                    ≥
                                    0
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                     

We define θ, γ, σ as the dual variables of Constraints (43)–(45), respectively. The dual of the model is:

                           
                              (47)
                              
                                 
                                    
                                       [
                                       C
                                       
                                          
                                             (
                                             s
                                             )
                                          
                                          LR
                                       
                                       ]
                                    
                                    
                                    Minimize
                                    
                                    W
                                    θ
                                    +
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       σ
                                       i
                                    
                                 
                              
                           
                        
                        
                           
                              (48)
                              
                                 
                                    s
                                    
                                       .
                                       t
                                    
                                    .
                                    
                                    θ
                                    +
                                    
                                       γ
                                       i
                                    
                                    ≥
                                    
                                       c
                                       i
                                    
                                    
                                       (
                                       
                                          
                                             Δ
                                             i
                                             U
                                          
                                          −
                                          
                                             Δ
                                             i
                                             L
                                          
                                       
                                       )
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                        
                           
                              (49)
                              
                                 
                                    −
                                    
                                       γ
                                       i
                                    
                                    +
                                    
                                       σ
                                       i
                                    
                                    ≥
                                    
                                       c
                                       i
                                    
                                    
                                       (
                                       
                                          
                                             Δ
                                             i
                                             L
                                          
                                          −
                                          
                                             s
                                             i
                                          
                                       
                                       )
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                        
                           
                              (50)
                              
                                 
                                    θ
                                    ≥
                                    0
                                    ;
                                    
                                    
                                       γ
                                       i
                                    
                                    ≥
                                    0
                                    ;
                                    
                                       σ
                                       i
                                    
                                    ≥
                                    0
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                           
                        
                     

Then we obtain a model formulation as follows.

                           
                              (51)
                              
                                 
                                    
                                       [
                                       RBAP
                                       ]
                                    
                                    
                                    Minimize
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                β
                                                i
                                                +
                                             
                                             +
                                             
                                                β
                                                i
                                                −
                                             
                                          
                                          )
                                       
                                       +
                                       W
                                       θ
                                    
                                    +
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       σ
                                       i
                                    
                                 
                              
                           
                        
                     

s.t. Constraints (2–3; 5–9; 11–12; 14–17; 48–50)

In the above analysis, we apply LP duality to the LP relaxation of C(
                           s
                        ) so that it is transformed from a maximization model to a minimization model and then is involved in the master model. It should be mentioned that we cannot revise Objective (30) as ‘
                           
                              Min
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 
                                    d
                                    i
                                 
                                 
                                    (
                                    
                                       β
                                       i
                                       +
                                    
                                    +
                                    
                                       β
                                       i
                                       −
                                    
                                    )
                                 
                                 −
                                 C
                                 
                                    (
                                    s
                                    )
                                 
                              
                           
                        ’ so as to involve the C(
                           s
                        ), because this revision way will change the original meaning of the objective and the obtained solution will not be the solution for the original model.

The robust problem RBAP can be interpreted as an interesting alternative formulation to the stochastic BAP faced by port operators. It attempts to avoid the worst case while imposing a limit on how conservative the optimal solution is (by controlling the parameter W).

The previous proposed meta-heuristic algorithm for SBAPSAA can also apply to RBAP, but we need to change the third step (Section 5.4) to use the above model RBAP. The remainder parts are the same as the algorithm for SBAPSAA.

Solving RBAP is easier and faster than SBAPSAA, which is later investigated in the experiments. In addition, the requirement of input data for RBAP is much less than SBAPSAA. For SBAPSAA, port operators need to collect sufficient historical data for estimating probability distributions of δi
                         for each ship so as to obtain a lot of scenarios. However, for RBAP, the port operators just need to estimate the ranges of δi
                        . RBAP can be employed to derive a good solution for the stochastic programming formulation SBAPSAA. The core of the relationship lies in the parameter W. By setting a proper value for the parameter W, RBAP can be used to derive a good solution for SBAPSAA. The next subsection will investigate the potential relationship between the two models, RBAP and SBAP.


                        W is an important parameter in RBAP. Here a heuristic is suggested for setting W so as to obtain a solution that performs well with respect to minimizing the objective of SBAP. In other words, this heuristic is to select W so that the optimal solution by RBAP is near-optimal for SBAP, which means the obtained solution can perform well under the aspects of worst-case cost and expected cost. It should be mentioned that the following analysis on the heuristic is based on some assumptions that simplify the original tactical BAP models, i.e., SBAP and RBAP.

                           
                              (1)
                              The operation time for ships would not vary obviously under different berths. For the interest of simplicity, t
                                 
                                    i, b
                                  can be simplified as 
                                    
                                       
                                          t
                                          ¯
                                       
                                       i
                                    
                                 . For example, we can set 
                                    
                                       
                                          
                                             t
                                             ¯
                                          
                                          i
                                       
                                       
                                          =
                                          |
                                          B
                                       
                                       
                                          
                                             |
                                          
                                          
                                             −
                                             1
                                          
                                       
                                       
                                          ∑
                                          
                                             b
                                             ∈
                                             B
                                          
                                       
                                       
                                          t
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                    
                                  for each ship.

The cost coefficients ci
                                  would not vary obviously for different ships. Thus they can be simplified as 
                                    
                                       c
                                       ¯
                                    
                                 , i.e., 
                                    
                                       
                                          c
                                          ¯
                                       
                                       
                                          =
                                          |
                                          N
                                       
                                       
                                          
                                             |
                                          
                                          
                                             −
                                             1
                                          
                                       
                                       
                                          ∑
                                          
                                             i
                                             ∈
                                             N
                                          
                                       
                                       
                                          c
                                          i
                                       
                                    
                                  for all the ships.

Based on the above two simplifications, the model SBAP can be approximately formulated as:

                           
                              (52)
                              
                                 
                                    Minimize
                                    
                                    
                                       Z
                                       S
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                β
                                                i
                                                +
                                             
                                             +
                                             
                                                β
                                                i
                                                −
                                             
                                          
                                          )
                                       
                                    
                                    +
                                    
                                       c
                                       ¯
                                    
                                    E
                                    
                                       {
                                       
                                          
                                             
                                                (
                                                
                                                   
                                                      ∑
                                                      
                                                         i
                                                         ∈
                                                         N
                                                      
                                                   
                                                   
                                                      δ
                                                      i
                                                   
                                                   −
                                                   
                                                      ∑
                                                      
                                                         i
                                                         ∈
                                                         N
                                                      
                                                   
                                                   
                                                      s
                                                      i
                                                   
                                                
                                                )
                                             
                                          
                                          +
                                       
                                       }
                                    
                                 
                              
                           
                        
                     

s.t. Constraints (2–3; 5–9; 11–12; 14–17)

Since 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 (
                                 
                                    
                                       
                                          t
                                          ¯
                                       
                                       i
                                    
                                    +
                                    
                                       s
                                       i
                                    
                                 
                                 )
                              
                              =
                              H
                              
                                 |
                                 B
                                 |
                              
                           
                        , we define 
                           
                              a
                              =
                              
                                 H
                                 |
                                 B
                                 |
                              
                              −
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 
                                    t
                                    ¯
                                 
                                 i
                              
                           
                         so as to replace ‘
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 s
                                 i
                              
                           
                        ’. Then the above formula (52) can be rewritten as:

                           
                              (53)
                              
                                 
                                    Minimize
                                    
                                    
                                       Z
                                       S
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                β
                                                i
                                                +
                                             
                                             +
                                             
                                                β
                                                i
                                                −
                                             
                                          
                                          )
                                       
                                    
                                    +
                                    
                                       c
                                       ¯
                                    
                                    E
                                    
                                       {
                                       
                                          
                                             
                                                (
                                                
                                                   
                                                      ∑
                                                      
                                                         i
                                                         ∈
                                                         N
                                                      
                                                   
                                                   
                                                      
                                                         δ
                                                         i
                                                      
                                                      −
                                                      a
                                                   
                                                
                                                )
                                             
                                          
                                          +
                                       
                                       }
                                    
                                 
                              
                           
                        
                     

Here, 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 δ
                                 i
                              
                           
                         can be regarded as one stochastic parameter. We define f( · ) as the probability function for 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 δ
                                 i
                              
                           
                        . According to the central limited theorem, as the number of ships (|N|) grows large, f( · ) can be approximated as a normal distribution with mean and variance equal to the sum of the means and variances for the individual ships.

                           
                              (54)
                              
                                 
                                    Minimize
                                    
                                    
                                       Z
                                       S
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                β
                                                i
                                                +
                                             
                                             +
                                             
                                                β
                                                i
                                                −
                                             
                                          
                                          )
                                       
                                    
                                    +
                                    
                                       c
                                       ¯
                                    
                                    
                                       ∫
                                       a
                                       
                                          +
                                          ∞
                                       
                                    
                                    
                                       f
                                       
                                          (
                                          x
                                          )
                                       
                                       
                                          (
                                          
                                             x
                                             −
                                             a
                                          
                                          )
                                       
                                    
                                    d
                                    x
                                 
                              
                           
                        
                     

Similarly as the above analysis on SBAP, the model RBAP can be approximately formulated as:

                           
                              (55)
                              
                                 
                                    Minimize
                                    
                                    
                                       Z
                                       R
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                β
                                                i
                                                +
                                             
                                             +
                                             
                                                β
                                                i
                                                −
                                             
                                          
                                          )
                                       
                                    
                                    +
                                    
                                       c
                                       ¯
                                    
                                    
                                       max
                                       δ
                                    
                                    
                                       
                                          (
                                          
                                             
                                                ∑
                                                
                                                   i
                                                   ∈
                                                   N
                                                
                                             
                                             
                                                δ
                                                i
                                             
                                             −
                                             
                                                ∑
                                                
                                                   i
                                                   ∈
                                                   N
                                                
                                             
                                             
                                                s
                                                i
                                             
                                          
                                          )
                                       
                                       +
                                    
                                 
                              
                           
                        
                     

s.t. Constraints (2–3; 5–9; 11–12; 14–17)

                           
                              (56)
                              
                                 
                                    
                                       
                                          
                                             ∑
                                             
                                                i
                                                ∈
                                                N
                                             
                                          
                                          
                                             
                                                δ
                                                i
                                             
                                             −
                                             
                                                G
                                                L
                                             
                                          
                                       
                                       
                                          
                                             G
                                             U
                                          
                                          −
                                          
                                             G
                                             L
                                          
                                       
                                    
                                    ≤
                                    
                                       W
                                       ′
                                    
                                 
                              
                           
                        
                     

In Constraint (56), GL
                         and GU
                         are the lower and upper bounds for ‘
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 δ
                                 i
                              
                           
                        ’, which is assumed to follow the normal distribution. The interval [GL, GU
                        ] is based on the same confidence as the setting of intervals [
                           
                              
                                 Δ
                                 
                                    i
                                 
                                 L
                              
                              ,
                              
                                 Δ
                                 
                                    i
                                 
                                 U
                              
                           
                        ] for ships, which can intuitively result in:

                           
                              (57)
                              
                                 
                                    
                                       G
                                       U
                                    
                                    −
                                    
                                       G
                                       L
                                    
                                    =
                                    
                                       (
                                       
                                          1
                                          /
                                          
                                             N
                                          
                                       
                                       )
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       (
                                       
                                          
                                             Δ
                                             i
                                             U
                                          
                                          −
                                          
                                             Δ
                                             i
                                             L
                                          
                                       
                                       )
                                    
                                 
                              
                           
                        
                     

According to Constraint (32), we recall that 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 (
                                 
                                    
                                       
                                          δ
                                          i
                                       
                                       −
                                       
                                          Δ
                                          i
                                          L
                                       
                                    
                                    
                                       
                                          Δ
                                          i
                                          U
                                       
                                       −
                                       
                                          Δ
                                          i
                                          L
                                       
                                    
                                 
                                 )
                              
                              ≤
                              W
                           
                        . We can approximately regard 
                           
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       (
                                       
                                          
                                             δ
                                             i
                                          
                                          −
                                          
                                             Δ
                                             i
                                             L
                                          
                                       
                                       )
                                    
                                 
                                 
                                    
                                       (
                                       
                                          1
                                          /
                                          N
                                       
                                       )
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       (
                                       
                                          
                                             Δ
                                             i
                                             U
                                          
                                          −
                                          
                                             Δ
                                             i
                                             L
                                          
                                       
                                       )
                                    
                                 
                              
                              ≤
                              W
                           
                        . Then based on Formula (57), we have 
                           
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          δ
                                          i
                                       
                                       −
                                       
                                          G
                                          L
                                       
                                    
                                 
                                 
                                    
                                       G
                                       U
                                    
                                    −
                                    
                                       G
                                       L
                                    
                                 
                              
                              ≤
                              W
                              /
                              
                                 N
                              
                           
                        , which motivates setting 
                           
                              W
                              
                                 
                                 ′
                              
                              =
                              W
                              /
                              
                                 N
                              
                           
                        . Constraint (56) can be written as: 
                           
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          δ
                                          i
                                       
                                       −
                                       
                                          G
                                          L
                                       
                                    
                                 
                                 
                                    
                                       G
                                       U
                                    
                                    −
                                    
                                       G
                                       L
                                    
                                 
                              
                              ≤
                              W
                              /
                              
                                 N
                              
                           
                        .

Similarly, we define 
                           
                              a
                              =
                              
                                 H
                                 |
                                 B
                                 |
                              
                              −
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 
                                    t
                                    ¯
                                 
                                 i
                              
                           
                         to replace ‘
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 s
                                 i
                              
                           
                        ’. The above model (55)–(56) can be rewritten as follows.

                           
                              (58)
                              
                                 
                                    Minimize
                                    
                                    
                                       Z
                                       R
                                    
                                    =
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                β
                                                i
                                                +
                                             
                                             +
                                             
                                                β
                                                i
                                                −
                                             
                                          
                                          )
                                       
                                    
                                    +
                                    
                                       c
                                       ¯
                                    
                                    
                                       max
                                       δ
                                    
                                    
                                       
                                          (
                                          
                                             
                                                ∑
                                                
                                                   i
                                                   ∈
                                                   N
                                                
                                             
                                             
                                                
                                                   δ
                                                   i
                                                
                                                −
                                                a
                                             
                                          
                                          )
                                       
                                       +
                                    
                                 
                              
                           
                        
                        
                           
                              (59)
                              
                                 
                                    s
                                    
                                       .
                                       t
                                    
                                    .
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          δ
                                          i
                                       
                                       ≤
                                       W
                                       
                                          (
                                          
                                             
                                                G
                                                U
                                             
                                             −
                                             
                                                G
                                                L
                                             
                                          
                                          )
                                       
                                    
                                    /
                                    
                                       N
                                    
                                    +
                                    
                                       G
                                       L
                                    
                                 
                              
                           
                        
                     

The above problem model equals to:

                           
                              (60)
                              
                                 
                                    
                                       
                                          
                                             Minimize
                                             
                                             
                                                Z
                                                R
                                             
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             
                                                ∑
                                                
                                                   i
                                                   ∈
                                                   N
                                                
                                             
                                             
                                                
                                                   d
                                                   i
                                                
                                                
                                                   (
                                                   
                                                      
                                                         β
                                                         i
                                                         +
                                                      
                                                      +
                                                      
                                                         β
                                                         i
                                                         −
                                                      
                                                   
                                                   )
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             +
                                             
                                             
                                                c
                                                ¯
                                             
                                             
                                                
                                                   (
                                                   
                                                      W
                                                      
                                                         (
                                                         
                                                            
                                                               G
                                                               U
                                                            
                                                            −
                                                            
                                                               G
                                                               L
                                                            
                                                         
                                                         )
                                                      
                                                      /
                                                      
                                                         N
                                                      
                                                      +
                                                      
                                                         G
                                                         L
                                                      
                                                      −
                                                      a
                                                   
                                                   )
                                                
                                                +
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

As aforementioned at the beginning of this subsection, the target is to select W so that the optimal solution by RBAP is near-optimal for SBAP. Then we should make ZR
                         approach to ZS
                        . By comparing Objective (54) and Objective (60), it means:

                           
                              (61)
                              
                                 
                                    
                                       
                                          (
                                          
                                             W
                                             
                                                (
                                                
                                                   
                                                      G
                                                      U
                                                   
                                                   −
                                                   
                                                      G
                                                      L
                                                   
                                                
                                                )
                                             
                                             /
                                             
                                                N
                                             
                                             +
                                             
                                                G
                                                L
                                             
                                             −
                                             a
                                          
                                          )
                                       
                                       +
                                    
                                    =
                                    
                                       ∫
                                       a
                                       
                                          +
                                          ∞
                                       
                                    
                                    
                                       f
                                       (
                                       x
                                       )
                                       (
                                       
                                          x
                                          −
                                          a
                                       
                                       )
                                    
                                    d
                                    x
                                 
                              
                           
                        
                        
                           
                              (62)
                              
                                 
                                    W
                                    =
                                    
                                       N
                                    
                                    ·
                                    
                                       
                                          
                                             ∫
                                             a
                                             
                                                +
                                                ∞
                                             
                                          
                                          
                                             f
                                             
                                                (
                                                x
                                                )
                                             
                                             
                                                (
                                                
                                                   x
                                                   −
                                                   a
                                                
                                                )
                                             
                                             d
                                             x
                                             +
                                             a
                                             −
                                             
                                                G
                                                L
                                             
                                          
                                       
                                       
                                          
                                             G
                                             U
                                          
                                          −
                                          
                                             G
                                             L
                                          
                                       
                                    
                                 
                              
                           
                        
                     

We define F(.) is the cumulative probability function for the probability density function f(.). We have 
                           
                              
                                 ∫
                                 a
                                 
                                    +
                                    ∞
                                 
                              
                              
                                 
                                    
                                       f
                                       (
                                       x
                                       )
                                       (
                                       
                                          x
                                          −
                                          a
                                       
                                       )
                                    
                                    d
                                    x
                                    =
                                    
                                       (
                                       
                                          x
                                          −
                                          a
                                       
                                       )
                                       F
                                       (
                                       x
                                       )
                                    
                                    |
                                 
                                 a
                                 
                                    +
                                    ∞
                                 
                              
                              −
                              
                                 ∫
                                 a
                                 
                                    +
                                    ∞
                                 
                              
                              
                                 F
                                 (
                                 x
                                 )
                                 d
                                 x
                              
                              =
                              
                                 (
                                 
                                    
                                       G
                                       U
                                    
                                    −
                                    a
                                 
                                 )
                              
                              −
                              
                                 ∫
                                 a
                                 
                                    G
                                    U
                                 
                              
                              
                                 F
                                 (
                                 x
                                 )
                              
                              d
                              x
                           
                        . Then Formula (62) turns to:

                           
                              (63)
                              
                                 
                                    W
                                    =
                                    
                                       N
                                    
                                    
                                       (
                                       
                                          1
                                          −
                                          
                                             
                                                
                                                   ∫
                                                   a
                                                   
                                                      G
                                                      U
                                                   
                                                
                                                
                                                   F
                                                   
                                                      (
                                                      x
                                                      )
                                                   
                                                
                                                d
                                                x
                                             
                                             
                                                
                                                   G
                                                   U
                                                
                                                −
                                                
                                                   G
                                                   L
                                                
                                             
                                          
                                       
                                       )
                                    
                                 
                              
                           
                        
                     

Here F(x) is the cumulative probability function for 
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 δ
                                 i
                              
                           
                        , which follows a normal distribution. The above formula can be used as a heuristic to setting a proper W value so that the RBAP model can derive a solution which is also near optimal to the SBAP model. Formula (63) will be validated by a series of experiments in Section 7.5.

The period of the planning horizon is one week, i.e., 168 hours. In this study, we consider six classes of instances: 10 ships & 3 berths, 20 ships & 5 berths, 30 ships & 8 berths, 40 ships & 10 berths, 50 ships & 13 berths, and 60 ships & 16 berths. For the deterministic part of ships’ operation time (i.e., t
                        
                           i, b
                        ), they are generated as following process. For Ship i as an example, its operation time is not identical when it moors at different berths. Therefore, we generate the average operation time (
                           
                              
                                 t
                                 ¯
                              
                              i
                           
                        ) for Ship i first. And then the operation time of Ship i when it moors at each berth (i.e., t
                        
                           i, 1, …, t
                        
                           i, b
                        , …, t
                        
                           i, |B|) is randomly generated with guaranteeing that their average value equals the aforementioned value 
                           
                              
                                 t
                                 ¯
                              
                              i
                           
                        , i.e., 
                           
                              
                                 
                                    |
                                    B
                                    |
                                 
                                 
                                    −
                                    1
                                 
                              
                              
                                 ∑
                                 
                                    b
                                    ∈
                                    B
                                 
                              
                              
                                 t
                                 
                                    i
                                    ,
                                    b
                                 
                              
                              =
                              
                                 
                                    t
                                    ¯
                                 
                                 i
                              
                           
                        . In this study, we assume the 
                           
                              
                                 t
                                 ¯
                              
                              i
                           
                         follows a uniform distribution, i.e., 
                           
                              
                                 
                                    t
                                    ¯
                                 
                                 i
                              
                              ∼
                              U
                              
                                 (
                                 18
                                 ,
                                 36
                                 )
                              
                           
                        , the unit is hour. In literature on BAP, there are few studies that mentioned the standard answer to the probability distributions of the ships’ average operation time, because it varies in different ports. For some mega ports, the majority of their visiting ships are usually large-size and their operation time may be very long. While some small ports may have the reverse situation. For the interest of simplicity, we assume the ships’ average operation time (i.e., 
                           
                              
                                 |
                                 B
                              
                              
                                 
                                    |
                                 
                                 
                                    (
                                    −
                                    1
                                    )
                                 
                              
                              
                                 ∑
                                 
                                    b
                                    ∈
                                    B
                                 
                              
                              
                                 t
                                 
                                    i
                                    ,
                                    b
                                 
                              
                           
                        ) follows the uniform distribution. Therefore, the average operation time for all the ships (i.e., 
                           
                              
                                 
                                    (
                                    
                                       |
                                       N
                                       ∥
                                       B
                                       |
                                    
                                    )
                                 
                                 
                                    −
                                    1
                                 
                              
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 ∑
                                 
                                    b
                                    ∈
                                    B
                                 
                              
                              
                                 t
                                 
                                    i
                                    ,
                                    b
                                 
                              
                           
                        ) is estimated by (18 + 36)/2 = 27 hours.

For the uncertain extra operation time of ships (i.e., δi), they are assumed to follow uniform distributions in the model SBAPSAA, i.e., 
                           
                              
                                 δ
                                 i
                              
                              ∼
                              U
                              
                                 (
                                 
                                    
                                       Δ
                                       i
                                       L
                                    
                                    ,
                                    
                                       Δ
                                       i
                                       U
                                    
                                 
                                 )
                              
                           
                        . The lower limits of ships (i.e, 
                           
                              Δ
                              i
                              L
                           
                        ) are randomly generated around a mean value 5 hours; while the upper limits of ships (i.e., 
                           
                              Δ
                              i
                              U
                           
                        ) are around a mean value 19 hours. For the uncertain sets (i.e., 
                           
                              
                                 δ
                                 i
                              
                              ∈
                              
                                 [
                                 
                                    
                                       Δ
                                       i
                                       L
                                    
                                    ,
                                    
                                       Δ
                                       i
                                       U
                                    
                                 
                                 ]
                              
                           
                        ) in the model RBAP, they are also generated as the above way. It should be noted that the above assumption on the uniform distributions for δi
                         is set for the interest of simplicity, which may be different from the situations in some realistic ports. For example, Legato et al. (2014) studied the real data of ships' duration time from the Medcenter Container Terminal SpA, and calibrated two Beta distributions with (mean, variance, skewness) = (15.12, 18.96, 0.66) and (21.44, 39.95, 0.54) for feeders and oceanic vessels, respectively. Different ports may have different types of distributions. The setting of distributions has impact on the results of experiments, but may not influence the validation of the proposed methods because the models are independent from the probability distribution settings.

Based on the above settings, the average berth utilization in the port can be estimated according to: the planning period, i.e., 168 hours; the average t
                        
                           i, b
                        , i.e., (18 + 36)/2 = 27 hours; the average δi
                        , i.e., (5 + 19)/2 = 12 hours; the ratio of the ships to the berths, i.e., |N|/|B| ≈ 3.77, which is obtained by the average of 10/3, 20/5, 30/8, 40/10, 50/13, and 60/13. Then the average berth utilization is estimated by: (27 + 12) × 3.77/168 = 87.5 percent, which reflects reality in the ports around the world.

For the cost rates of ships (i.e., di
                        ) with respect to the deviation of their assigned berthing time from their expected one, they are randomly generated around a mean value 2000 USD/hour. For the penalty cost rates (i.e., ci
                        ) when the uncertain extra operations time exceeds the prearranged slack time, they are randomly generated around a mean value 6000 USD/hour. The setting on the above two parameters follows the setting in the study by Meisel and Bierwirth (2009).

Some experiments are performed to compare the results solved by the CPLEX solver directly and the results solved by the proposed solution approaches, i.e., the SWO based meta-heuristic and the CSNS based meta-heuristic. Due to the complexity of the models, these experiments are only based on some small-scale problem cases, i.e., 10 ships & 3 berths. The comparative experiments contain two parts: one is for the model SBAPSAA, and the other is for the model RBAP.


                        Tables 1
                         and 2
                         show that the proposed meta-heuristic approaches (i.e., SWO and CSNS) can obtain optimal or near-optimal solutions by comparing the results calculated by CPLEX. The gaps between them are not evident, and the average gap values are about 1.8 percent and 1.7 percent for the SWO and the CSNS based meta-heuristics, respectively. The results imply that the proposed meta-heuristics are effective methods for solving the proposed models SBAPSAA and RBAP. For the computing time of the methods, the CPU time of CPLEX method varies very obviously even for the instances with the same problem scale. Whereas the CPU time of the meta-heuristic methods do not vary evidently, and it mainly depends on the problem scale. From experiments, we observe that CPLEX cannot solve some instances when the number of ships exceeds 20, or the number of scenarios exceeds 70 for the instances with 10 ships & 3 berths, but the meta-heuristic approaches can solve them in the reasonable computing time.

To evaluate the meta-heuristic approaches in some large-scale instance, we design two lower bounds 
                           
                              LB
                              
                                 decoup
                              
                              SBAP
                           
                         and 
                           
                              LB
                              
                                 decoup
                              
                              RBAP
                           
                         by decoupling the original models SBAPSAA and RBAP, respectively. The details of the two lower bounds are elaborated in Appendix. Table 3
                         shows the comparison between the lower bounds and the results obtained by the proposed meta-heuristics in large-scale instance. We can see that the average gap to the lower bounds is about 13 percent. The true relative error of the proposed approaches to the optimal results may be much less than 13 percent as the lower bounds are a bit loose. Table 4
                         shows the average gap of the lower bounds to the optimal results is about 11 percent. So we can estimate the true relative error of the meta-heuristics is at a very low level.

(1) Convergence analysis

Scenarios denote the possible realizations of random parameters (i.e., the operation time of ships in this study) in the future. The more is the number of scenarios, the scenario-based model formulation will be able to reflect the original stochastic programming model in a more approaching way. The results of the stochastic programming model under different sets of scenarios are not identical even if the number of the scenarios is the same for these sets. From a theoretical perspective, the standard deviation of the different results should decease when the number of scenarios increasing. Experiments are conducted to investigate this phenomenon of convergence.

In experiments, we consider two test instances with ‘10 ships & 3 berths’ and ‘30 ships & 8 berths’. As to a given number of scenarios (i.e., 10, 30, 50, 70, 100, 300, 500, 700, 1000, 3000, 5000, 7000, or 10000), ten different cases are generated randomly, and are solved in the proposed SBAPSAA model. For the instance of ‘30 ships & 8 berths’, the computation is extremely time-consuming when the number of scenarios exceeding 5000. Thus we only calculate eleven series of experiments. The max., min. and avg. of the ten cases are recorded, as shown in each row of Table 5
                        .

From Table 5 and Fig. 6
                        , we can see that the gap between the maximum and minimum, and the standard deviation decrease evidently when the number of scenarios is increasing, which shows that the solutions of the model SBAPSAA converges as the number of scenarios is large enough. This phenomenon obeys the Proposition 1 proposed in Section 4.2. In addition, the results in Table 5 also show that the CPU time increases evidently with the number of scenarios increasing.

A lower bound of required sample size was proposed by Kleywegt et al., (2002), in which the required minimum number of scenarios is 
                           
                              
                                 (
                                 
                                    3
                                    
                                       σ
                                       
                                          max
                                       
                                       2
                                    
                                    /
                                    
                                       
                                          (
                                          
                                             
                                                ɛ
                                             
                                             −
                                             δ
                                          
                                          )
                                       
                                       2
                                    
                                 
                                 )
                              
                              log
                              
                                 (
                                 
                                    |
                                    S
                                    |
                                    /
                                    α
                                 
                                 )
                              
                           
                        , here 
                           
                              |
                              S
                              |
                           
                         is size of feasible solution set; δ is the optimal gap of the solved solution to the model SBAPSAA; ɛ is its optimal gap to the original model SBAP with a probability of at least 1
                           
                              −
                              α
                           
                        ; 
                           
                              σ
                              
                                 max
                              
                              2
                           
                         is a maximum variance of certain function differences. However, Kleywegt et al., (2002) also noted that above formula had two shortcomings for computational purposes: (1) it is not easy to compute the bound as 
                           
                              σ
                              
                                 max
                              
                              2
                           
                         and 
                           
                              |
                              S
                              |
                           
                         are hard to compute; (2) the bound may be far too conservative to obtain a practical estimate of the required sample size. For example, as x
                        
                           i, b
                         is continuous variable in the model, it is hard to compute the value of 
                           
                              |
                              S
                              |
                           
                        . Therefore we need to estimate the required sample size by some practical way. In this study, the number of scenarios is increased by one at a time until the standard deviation (S.d.) in the averaged objective value (Avg.) is below a given threshold (e.g., 1 percent of the Avg.). For the above case of ‘10 ships & 3 berths’, when the number of scenarios exceeds 218, the percentage of S.d. to Avg. is below 1 percent; and for the case of ‘30 ships & 8 berths’, the minimum sample size is calculated as 193. In reality, the required sample size depends on the threshold in the mind of decision makers.

(2) Comparison with other method

To validate the effectiveness of the proposed stochastic programming model (SBAPSAA), we compare its solutions with FCFS (First Come First Served), i.e., the most intuitive scheduling way. By FCFS, we arrange the ships one by one according to the increasing order of their expected berthing time, i.e., ei
                        . When arranging a ship, we select the berth, in which the ship can moor at its expected berthing time. There are three exceptional cases: (1) if none of such ‘best’ berth exists, we select the berth, in which the ship can moor at some time that is the nearest to its expected time; (2) if several such ‘best’ berths exist, we select the berth, in which the ship's operation time is the shortest; (3) if there is no feasible time slot for the ship, we select the longest one from the remaining feasible time slots and adjust the arranged berthing time of other ships that are before or behind the time slot so that the ship can be insert. All the ships are arranged according to the above procedure one by one.

For a fair comparison, the objective value of the FCFS method is also derived from the same objective of the proposed model SBAPSAA, i.e., Formula (19). The objective of the FCFS denotes the expected cost of the berthing plan, which is obtained by FCFS, when it is applied to the uncertain environments. The FCFS method is the most straightforward planning way and is commonly used in the reality. The gap between the objective values of the FCFS and the proposed stochastic programming model (i.e., SBAPSAA) reflects the value of stochastic solution, which measures the cost of ignoring uncertainties while making a decision (Avriel & Williams, 1970).

In Table 6
                        , S1, S2, S3, S4 and S5 denote the index of cases, in which all the parameters (e.g., ships’ expected berthing time, operation time, cost rates, and extra time in scenarios) may be different from each other. Table 6 illustrates the results of the comparisons between the proposed methods and the FCFS. In Table 6, Rateimp measures the improvement of the proposed method by comparing with the FCFS method. Both of the proposed meta-heuristics (i.e., CSNS and SWO) show evident improvement. The CSNS seems a bit better than the SWO for these large-scale instances, whereas the computation time of the CSNS is longer than the SWO.

(1) Analyzing the impact of the parameter W
                     

In the robust formulation model RBAP, W is an important parameter for controlling how conservative the worst-case scenario is in RBAP. The higher is the W value, the more conservative decision is obtained by RBAP. Fig. 7
                         illustrates the influence of W on the objective value of RBAP under different uncertain degrees, which is reflected by the average range of δi
                        ’s uncertain set, i.e., 
                           
                              
                                 avg
                                 
                                    ∀
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 (
                                 
                                    
                                       Δ
                                       i
                                       U
                                    
                                    −
                                    
                                       Δ
                                       i
                                       L
                                    
                                 
                                 )
                              
                           
                        . The increasing trend of the objective values with W mounting up is obvious in Fig. 7. For the cases with higher uncertain degree, the increasing rate of the trend is larger than the rate of the cases with lower uncertain degree. In addition, given a W value, the objective value under higher uncertain degree is not always larger than the one under lower uncertain degree. When W is below some certain value (denoted by dashed lines in Fig. 7), the case of higher uncertain degree may output a lower objective value than the case of lower uncertain degree. The results show that both the uncertain degree in reality and the conservative degree of decision makers have influence on the optimal solution's objective value.

(2) Comparing the computation time with the stochastic programming model SBAPSAA
                     

The robust formulation model RBAP needs no scenario related parameters and variables. RBAP's solving process should be faster than the stochastic programming model SBAPSAA. For some instances with small and moderate problem scales, experiments are conducted to compare the CPU time of the two models. For RBAP, the parameter W is set as 2, 4, and 5 for the instances with 10, 20, and 30 ships, respectively. For SBAPSAA, the numbers of scenarios (denoted by Q in Table 7
                        ) are set as 10, 50, 100, 500, and 1000. From the results in Table 7, it is observed that the solving time of RBAP is longer than its rival only when the model SBAPSAA just contains ten scenarios. For the cases with more than ten scenarios, it is evidently faster to solve RBAP than SBAPSAA.

The results in Table 2 validate that RBAP's solving process is faster than SBAPSAA, especially for some cases with a large number of scenarios in SBAPSAA. In addition, the solution of RBAP is deterministic given a value of W; while SBAPSAA’s solutions vary in different runs even for the same number of scenarios. Moreover, when using SBAPSAA, a decision maker needs sufficient data to calibrate probability distributions and generate a large number of scenarios; but for RBAP, the decision maker just needs to define some uncertain sets for ships. Therefore, besides the efficiency in the solving process, RBAP is also more convenient than SBAPSAA for port operators in realistic applications. As solving RBAP is more efficient than SBAPSAA, the next subsection investigates how to use RBAP to derive a good solution for SBAPSAA by setting a proper value for the W.

It is important to investigate the relationship between the proposed two models, i.e., SBAPSAA and RBAP, so that we can use RBAP to derive a robust solution that is near optimal for SBAPSAA. The obtained solution can perform well under the worst-case cost and expected cost.

The core of their relationship lies in how to find a critical value W (denoted by W*), under which RBAP can obtain an optimal solution whose objective value is near SBAPSAA’s optimal objective value. We use an example to explain the process of finding W*. For an instance of 40 ships & 10 berths, the objective values of RBAP under different W values are plotted as a curve in Fig. 8
                        . The RBAP is based on the uncertain sets 
                           
                              
                                 δ
                                 i
                              
                              ∈
                              
                                 [
                                 
                                    Δ
                                    i
                                    L
                                 
                                 ,
                                 
                                    Δ
                                    i
                                    U
                                 
                                 ]
                              
                           
                         for all the ships. By using the uniform distributions 
                           
                              
                                 δ
                                 i
                              
                              ∼
                              U
                              
                                 (
                                 
                                    
                                       Δ
                                       i
                                       L
                                    
                                    ,
                                    
                                       Δ
                                       i
                                       U
                                    
                                 
                                 )
                              
                           
                         for all the ships, we generate 100 scenarios data, solve the SBAPSAA, and obtain its objective value is 799.81, which is denoted by a horizontal line in Fig. 8. The crossover point of the curve and the line corresponds to a W value at about 5.48, which is the critical value W* for this instance, i.e., W* = 5.48.


                        Section 6.2 proposes a formula that can estimate the critical value W* approximately. According to Formula (63), we calculate some parameters in this instance. Their values are shown as follows: N = 40, GU
                         = 32.39, GL
                         = 7.02, a = 29.66, the cumulative probability function F(x) is based on a normal distribution with mean μ at 12.69 and standard deviation σ at 1.30. More specifically, we calculate 
                           
                              
                                 G
                                 U
                              
                              =
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 Δ
                                 i
                                 U
                              
                           
                        , 
                           
                              
                                 G
                                 L
                              
                              =
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 Δ
                                 i
                                 L
                              
                              ,
                              a
                              =
                              H
                              
                                 |
                                 B
                                 |
                              
                              −
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 (
                                 |
                                 B
                                 
                                    
                                       |
                                    
                                    
                                       −
                                       1
                                    
                                 
                                 
                                    ∑
                                    
                                       b
                                       ∈
                                       B
                                    
                                 
                                 
                                    t
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 )
                              
                           
                        , which is defined in Section 6.2, 
                           
                              μ
                              =
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 [
                                 
                                    (
                                    
                                       
                                          Δ
                                          i
                                          U
                                       
                                       +
                                       
                                          Δ
                                          i
                                          L
                                       
                                    
                                    )
                                    /
                                    2
                                 
                                 ]
                              
                              ,
                              σ
                              =
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       [
                                       
                                          
                                             
                                                (
                                                
                                                   
                                                      Δ
                                                      i
                                                      U
                                                   
                                                   −
                                                   
                                                      Δ
                                                      i
                                                      L
                                                   
                                                
                                                )
                                             
                                             2
                                          
                                          /
                                          12
                                       
                                       ]
                                    
                                 
                              
                           
                        .

Then, according to Formula (63), the estimated critical value 
                           
                              
                                 W
                                 ¯
                              
                              *
                           
                         is calculated as follows:

                           
                              
                                 
                                    
                                       (
                                       
                                          
                                             W
                                             ¯
                                          
                                          *
                                       
                                       )
                                    
                                    =
                                    
                                       N
                                    
                                    
                                       (
                                       
                                          1
                                          −
                                          
                                             
                                                
                                                   ∫
                                                   a
                                                   
                                                      G
                                                      U
                                                   
                                                
                                                
                                                   F
                                                   (
                                                   x
                                                   )
                                                   d
                                                   x
                                                
                                             
                                             
                                                
                                                   G
                                                   U
                                                
                                                −
                                                
                                                   G
                                                   L
                                                
                                             
                                          
                                       
                                       )
                                    
                                    ≈
                                    5.64
                                    .
                                 
                              
                           
                        
                     

From the above example, it is noted that the critical value 
                           
                              
                                 W
                                 *
                              
                              ¯
                           
                         estimated by Formula (63) is very close to the value obtained by a series of experiments, i.e., W* = 5.48.

Some experiments are conducted under different parameter settings. The results are shown in Table 8. The cost setting includes GU, GL, a, and (μ, σ) for the cumulative probability function F(x). Their definitions are explained in Section 6.2. Their values are calculated according to the input data of this problem. For each setting, we obtain the optimal objective value of SBAPSAA, i.e., ZS
                        , and two objective values of RBAP under two W values (i.e., W
                        1, W
                        2). The two objective values of RBAP (i.e., 
                           
                              Z
                              1
                              R
                           
                        , 
                           
                              Z
                              2
                              R
                           
                        ) are very close to ZS
                        , and 
                           
                              
                                 Z
                                 1
                                 R
                              
                              ≤
                              
                                 Z
                                 S
                              
                              ≤
                              
                              
                                 Z
                                 2
                                 R
                              
                           
                        . Then W* is estimated by linear interpolation. From the example in Fig. 8, it can be noted that the linear interpolation is a proper way for the estimation in this problem. The critical value W* is calculated by

                           
                              (64)
                              
                                 
                                    
                                       W
                                       *
                                    
                                    =
                                    
                                       
                                          
                                             Z
                                             S
                                          
                                          −
                                          
                                             Z
                                             1
                                             R
                                          
                                       
                                       
                                          
                                             Z
                                             2
                                             R
                                          
                                          −
                                          
                                             Z
                                             1
                                             R
                                          
                                       
                                    
                                    
                                       (
                                       
                                          
                                             W
                                             2
                                          
                                          −
                                          
                                             W
                                             1
                                          
                                       
                                       )
                                    
                                    +
                                    
                                       W
                                       1
                                    
                                 
                              
                           
                        
                     


                        Table 8 contains two parts: ‘W
                        * obtained by experiments’ and ‘
                           
                              
                                 W
                                 *
                              
                              ¯
                           
                         obtained by Formula (63)’. The former part is the result without the assumptions and simplification, which are used to derive the Formula (63) in an analytical way. The results in Table 8 validate that the proposed Formula (63) can estimate a proper W value, by which RBAP can derive a robust solution that is near optimal for SBAPSAA. In this way, port operators need not to collect sufficient historical data so as to calibrate a large number of scenarios for the SBAPSAA.

Another finding from the above experiments is that the complex Formula (63) can be simplified in the realistic applications of berth allocation. From Table 8, it is observed that the parameters GU
                         and a are much larger than ‘
                           
                              μ
                              +
                              3
                              σ
                           
                        ’. As explained in Section 7.1, the input data is real-world like instance. Thus in the realistic application context of port berth allocation, 
                           
                              
                                 G
                                 U
                              
                              ,
                              a
                              >
                              μ
                              +
                              3
                              σ
                           
                        . Hence we have 
                           
                              
                                 ∫
                                 a
                                 
                                    G
                                    U
                                 
                              
                              
                                 F
                                 (
                                 x
                                 )
                              
                              d
                              x
                              ≈
                              
                                 G
                                 U
                              
                              −
                              a
                           
                        . Then, the previous Formula (63) can be simplified as:

                           
                              (65)
                              
                                 
                                    W
                                    =
                                    
                                       N
                                    
                                    
                                       
                                          a
                                          −
                                          
                                             G
                                             L
                                          
                                       
                                       
                                          
                                             G
                                             U
                                          
                                          −
                                          
                                             G
                                             L
                                          
                                       
                                    
                                    .
                                 
                              
                           
                        
                     

In summary, RBAP can be used to derive a good solution to SBAPSAA by setting a proper W value, which can be estimated by the above Formula (65). If a decision maker has no sufficient historical data so as to calibrate a large number of scenarios for SBAPSAA, the decision maker should adopt RBAP as an alternative method to obtain a robust assignment schedule. Besides the fewer requirements on input data, RBAP is also faster in solving process than SBAPSAA.

It should be mentioned that SBAPSAA also has its usages in some situations, in which RBAP is not suitable. For example, when the uncertain degrees of δi
                         among ships are evidently different from each other, it is not an appropriate way for RBAP just using one parameter W to handle the uncertainty and control the conservative degree of the decision. In this situation, SBAPSAA uses the way of calibrating probability distributions for each ship, which is more rational than RBAP's way.

Although there exist plenty of heuristics and exact methods for solving the deterministic BAP, this paper studies a unique BAP. Even if we only consider the deterministic part of the model, it is still different from the existing deterministic BAP models. The existing solution methods cannot apply to the deterministic part of the model in this study directly. Thus it may be difficult to compare our proposed methods with the existing methods. The main idea of our proposed method actually originates from one of the deterministic BAP studies. From the paper by Meisel and Bierwirth (2009), we borrowed the idea of sequence-based framework for designing solution method, and the idea of the SWO meta-heuristic for changing the sequence. We also borrowed the idea of the CSNS meta-heuristic for changing the sequence from the work by Lim and Xu (2006). Therefore, our proposed method is already based on the existng heuristics. The reason why we choose the sequence-based framework for designing the solution method is that the search space of sequences is not very large by comparing with the GA, SA, PSO, and other widely-used meta-heuristics. Moreover, with the advancement of the CPLEX solver's capacity, the usage of the CPLEX for solving some sub-models becomes more efficient than some well-designed heuristics such as Kim and Moon (2003). Therefore, our proposed method is based on the sequence-based framework, the usage of the CPLEX solver to solve sub-models directly, and the SWO, CSNS meta-heuristics for changing the sequences, which have been used and validated by other studies.

The proposed models can act as the basis for further extensions so that more realistic issues are taken account. Some possible extensions are discussed as follows.

A continuous BAP can be approximated by a discrete BAP if berths are very small and one ship can occupy several adjacent berths. For example, a mega-ship occupies three berths. It can be regarded as three ships. Then we can make use of the proposed methodology in this study to handle this continuous BAP. We just need to add some constraints to ensure: the berthing time for the three ships should be the same; and the allocated berths to them should be adjacent.

More specifically, we define g as a group of (virtual) ships. For example, g = {3,4}, it means ship 3 and ship 4 actually denote one and the same mega-ship, and g(1) = 3. G is defined as the set of all these ship groups, g ∈ G. In addition, we assume the ship indices within a group should be consecutive numbers; and the ship with lower index should be placed in the berths with lower index. This rule is set for the interest of antisymmetry, which avoids the repeat solutions. For example, the scenario in which ship (3 and 4) are allocated to berths (1 and 2) is the equivalent to the scenario in which ships (4 and 3) are allocated to berths (1 and 2).

The following constraints should be added into the previously proposed models:

                           
                              (66)
                              
                                 
                                    
                                       x
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    =
                                    
                                       x
                                       
                                          g
                                          (
                                          1
                                          )
                                          ,
                                          b
                                       
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    g
                                    ;
                                    ∀
                                    g
                                    ∈
                                    G
                                    ;
                                    ∀
                                    b
                                    ∈
                                    B
                                 
                              
                           
                        
                        
                           
                              (67)
                              
                                 
                                    
                                       ∑
                                       
                                          b
                                          ∈
                                          B
                                       
                                    
                                    
                                       
                                          y
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                       b
                                    
                                    =
                                    
                                       ∑
                                       
                                          b
                                          ∈
                                          B
                                       
                                    
                                    
                                       
                                          y
                                          
                                             g
                                             
                                                (
                                                1
                                                )
                                             
                                             ,
                                             b
                                          
                                       
                                       b
                                    
                                    +
                                    i
                                    −
                                    g
                                    
                                       (
                                       1
                                       )
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    g
                                    ;
                                    ∀
                                    g
                                    ∈
                                    G
                                    ;
                                    ∀
                                    b
                                    ∈
                                    B
                                 
                              
                           
                        
                     

Constraint (66) ensures the same berthing time for the ships within the same group. Constraint (67) guarantees their allocated berths should be adjacent.

Most literature on BAP is in operational-level; and their objectives are commonly to minimize the ships’ waiting time or the tardiness time from ships’ expected departure time. These factors do not apply in this study as there is no specific input data on arrival time (or departure time) in tactical BAP. As mentioned in the beginning of this paper, the tactical BAP is made first; then shipping liners make their ships’ detailed voyage plans. So these ships’ planned arrival time actually depends on the tactical BAP schedule.

For considering uncertainty, the part 
                           
                              
                                 c
                                 i
                              
                              
                                 
                                    (
                                    
                                       
                                          δ
                                          i
                                       
                                       −
                                       
                                          s
                                          i
                                       
                                    
                                    )
                                 
                                 +
                              
                           
                         in the objective is minimized, which actually assumes that the penalty cost is proportional to the conflict time 
                           
                              
                                 (
                                 
                                    
                                       δ
                                       i
                                    
                                    −
                                    
                                       s
                                       i
                                    
                                 
                                 )
                              
                              +
                           
                         with a fixed rate ci
                        . In reality, maybe this rate should grow with the conflict time increasing. For each ship i, we can use a piecewise linear function to represent this type of cost. More specifically, we assume the slopes of this piecewise linear function are 
                           
                              
                                 c
                                 i
                                 0
                              
                              ,
                              
                                 c
                                 i
                                 1
                              
                              ,
                              …
                              
                                 c
                                 i
                                 k
                              
                              ,
                              …
                              
                                 c
                                 i
                                 K
                              
                           
                         at the intervals 
                           
                              
                                 [
                                 
                                    
                                       τ
                                       i
                                       0
                                    
                                    ,
                                    
                                       τ
                                       i
                                       1
                                    
                                 
                                 )
                              
                              ,
                              
                                 [
                                 
                                    
                                       τ
                                       i
                                       1
                                    
                                    ,
                                    
                                       τ
                                       i
                                       2
                                    
                                 
                                 )
                              
                              ,
                              …
                              
                                 [
                                 
                                    
                                       τ
                                       i
                                       k
                                    
                                    ,
                                    
                                       τ
                                       i
                                       
                                          k
                                          +
                                          1
                                       
                                    
                                 
                                 )
                              
                              ,
                              …
                              
                                 [
                                 
                                    
                                       τ
                                       i
                                       K
                                    
                                    ,
                                    ∞
                                 
                                 )
                              
                           
                        , respectively; here these slopes are increasing, i.e., 
                           
                              
                                 c
                                 i
                                 
                                    k
                                    +
                                    1
                                 
                              
                              >
                              
                                 c
                                 i
                                 k
                              
                           
                        , and 
                           
                              
                                 τ
                                 i
                                 0
                              
                              =
                              0
                           
                        . Objective (19) in the original model SBAPSAA is changed to:

                           
                              (68)
                              
                                 
                                    Minimize
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          d
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                β
                                                i
                                                +
                                             
                                             +
                                             
                                                β
                                                i
                                                −
                                             
                                          
                                          )
                                       
                                    
                                    +
                                    
                                       Q
                                       
                                          −
                                          1
                                       
                                    
                                    ·
                                    
                                       ∑
                                       
                                          q
                                          =
                                          1
                                       
                                       Q
                                    
                                    
                                       
                                          ∑
                                          
                                             i
                                             ∈
                                             N
                                          
                                       
                                       
                                          
                                             ∑
                                             
                                                k
                                                =
                                                0
                                             
                                             K
                                          
                                          
                                             
                                                c
                                                i
                                             
                                             
                                                φ
                                                
                                                   i
                                                   ,
                                                   ω
                                                
                                                k
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

In addition, Constraints (20)–(21) in the original model are also changed to:

                           
                              (69)
                              
                                 
                                    
                                       ∑
                                       
                                          k
                                          =
                                          0
                                       
                                       K
                                    
                                    
                                       φ
                                       
                                          i
                                          ,
                                          q
                                       
                                       k
                                    
                                    ≥
                                    
                                       δ
                                       
                                          i
                                          ,
                                          q
                                       
                                    
                                    −
                                    
                                       s
                                       i
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                    ;
                                    q
                                    =
                                    1
                                    ,
                                    ⋯
                                    ,
                                    Q
                                 
                              
                           
                        
                        
                           
                              (70)
                              
                                 
                                    0
                                    ≤
                                    
                                       φ
                                       
                                          i
                                          ,
                                          q
                                       
                                       k
                                    
                                    ≤
                                    
                                       τ
                                       i
                                       
                                          k
                                          +
                                          1
                                       
                                    
                                    −
                                    
                                       τ
                                       i
                                       k
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                    ;
                                    q
                                    =
                                    1
                                    ,
                                    ⋯
                                    ,
                                    Q
                                    ;
                                    k
                                    =
                                    0
                                    ,
                                    …
                                    ,
                                    K
                                 
                              
                           
                        
                     

In this way, more realistic factors can be considered in the objective without complicating the original model to some nonlinear models.

The quay cranes (QC) assignment impacts ships’ operation time. To involve the QC assignment in the proposed models we can borrow the concept of ‘QC-profile’ developed by Giallombardo et al. (2010). The QC-profile denotes the number of QCs assigned for the berthed ship in each time step. For each ship, a set of feasible QC-profiles is defined in advance. Then the QC assignment problem turns to the QC-profile assignment. This way can reduce the complexity of problem by comparing with the traditional BAP-QCAP models. This practical method was also employed in other BAP studies by Zhen et al. (2011b) and Vacca et al. (2013). When using the method of QC-profile, we should make revisions on the proposed methodology by changing the current continuous time models to the discrete time step models.

For the interest of simplicity, the models in previous sections just contain one period for each ship. However, the proposed models can be easily extended to consider the multiple periods. In this case, the random parameter δi
                         should be changed to δ
                        
                           i, p
                        , here the subscript p denotes the index of periods. For the SBAP model, the part ‘
                           
                              E
                              {
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          c
                                          i
                                       
                                       
                                          (
                                          
                                             
                                                δ
                                                i
                                             
                                             −
                                             
                                                s
                                                i
                                             
                                          
                                          )
                                       
                                    
                                 
                                 +
                              
                              }
                           
                        ’ in its objective should be changed to ‘
                           
                              E
                              {
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       N
                                    
                                 
                                 
                                    
                                       ∑
                                       
                                          p
                                          ∈
                                          P
                                       
                                    
                                    
                                       
                                          c
                                          i
                                       
                                       
                                          
                                             (
                                             
                                                
                                                   δ
                                                   
                                                      i
                                                      ,
                                                      p
                                                   
                                                
                                                −
                                                
                                                   s
                                                   i
                                                
                                             
                                             )
                                          
                                          +
                                       
                                    
                                 
                              
                              }
                           
                        ’. For the RBAP model, the C(
                           s
                        ) in its objective should be changed to:

                           
                              (71)
                              
                                 
                                    C
                                    
                                       (
                                       s
                                       )
                                    
                                    =
                                    maximize
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          ∑
                                          
                                             p
                                             ∈
                                             P
                                          
                                       
                                       
                                          
                                             c
                                             i
                                          
                                          
                                             
                                                
                                                   (
                                                   
                                                      
                                                         δ
                                                         
                                                            i
                                                            ,
                                                            p
                                                         
                                                      
                                                      −
                                                      
                                                         s
                                                         i
                                                      
                                                   
                                                   )
                                                
                                             
                                             +
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (72)
                              
                                 
                                    s
                                    
                                       .
                                       t
                                    
                                    .
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       
                                          ∑
                                          
                                             p
                                             ∈
                                             P
                                          
                                       
                                       
                                          [
                                          
                                             
                                                (
                                                
                                                   
                                                      δ
                                                      
                                                         i
                                                         ,
                                                         p
                                                      
                                                   
                                                   −
                                                   
                                                      Δ
                                                      i
                                                      L
                                                   
                                                
                                                )
                                             
                                             /
                                             
                                                (
                                                
                                                   
                                                      Δ
                                                      i
                                                      U
                                                   
                                                   −
                                                   
                                                      Δ
                                                      i
                                                      L
                                                   
                                                
                                                )
                                             
                                          
                                          ]
                                       
                                    
                                    ≤
                                    W
                                 
                              
                           
                        
                        
                           
                              (73)
                              
                                 
                                    
                                       Δ
                                       i
                                       L
                                    
                                    ≤
                                    
                                       δ
                                       
                                          i
                                          ,
                                          p
                                       
                                    
                                    ≤
                                    
                                       Δ
                                       i
                                       U
                                    
                                    
                                    ∀
                                    i
                                    ∈
                                    N
                                    ,
                                    ∀
                                    p
                                    ∈
                                    P
                                 
                              
                           
                        
                     

Here W is still an important parameter for controlling how conservative the worst-case scenario is. From a decision maker's perspective, W can be regarded as an upper limit on the total times that ships reach their worst-case upper bounds 
                           
                              Δ
                              i
                              U
                           
                         in all the periods.

Given a set of berths, there is possibility that a port cannot serve all the ships due to the limitation on the available berths. In this case, there is another decision on selecting some ships to be served. For the un-served ships, there should be another type of penalty cost considered in the objective. For handling this issue, we can define a dummy berth (b
                        0), which is used to contain the un-served ships. The ships’ operation time at the dummy berth is zero, i.e., 
                           
                              
                                 t
                                 
                                    i
                                    ,
                                    
                                       b
                                       0
                                    
                                 
                              
                              =
                              0
                           
                        . Another type of cost rate r
                        
                           i, b
                         should be defined to reflect a cost if ship i is assigned to berth b. For 
                           
                              ∀
                              b
                              ∈
                              
                                 |
                                 B
                                 |
                              
                              /
                              
                                 {
                                 
                                    b
                                    0
                                 
                                 }
                              
                              ,
                              
                                 r
                                 
                                    i
                                    ,
                                    b
                                 
                              
                              =
                              0
                           
                        ; and 
                           
                              r
                              
                                 i
                                 ,
                                 
                                    b
                                    0
                                 
                              
                           
                         is a positive penalty cost when ship i is not served by the port. The cost part ‘
                           
                              
                                 ∑
                                 
                                    i
                                    ∈
                                    N
                                 
                              
                              
                                 
                                    ∑
                                    
                                       b
                                       ∈
                                       B
                                    
                                 
                                 
                                    
                                       r
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                    
                                       y
                                       
                                          i
                                          ,
                                          b
                                       
                                    
                                 
                              
                           
                        ’ should be added in the objective of the models.

In the proposed stochastic programming model SBAPSAA and robust optimization model RBAP, their second-stage sub-models belong to operational level decisions and can be replaced by some well-designed simulation models. In this case, more realistic and random factors in reality can be taken into account. Then these proposed models that are only based on mathematical programming will turn to some simulation optimization (SO) framework (Legato et al., 2014). Each methodology has its relative merit. The mathematical programming models (SBAPSAA and RBAP) and the SO techniques can be merged together as a BAP-DSS (decision support system) for port operators.

@&#CONCLUSIONS@&#

This paper studies the tactical-level berth allocation problem under uncertain ships’ operation time (dwell time) in the port. From stochastic perspective, this paper proposes two types of the stochastic models for handling the uncertainty. The relationship between the two models is also investigated in an analytic way. Some meta-heuristic algorithms are suggested for solving the models. Numerical experiments are performed to validate the effectiveness of the proposed models and the efficiency of the proposed solution algorithms. By comparing with other scholars’ work on the related areas, the contribution mainly includes four aspects:

                        
                           (1)
                           Most of studies on berth allocation problems are operational-level decisions, and do not consider the periodicity of ships’ arrivals. The models proposed in this study take account of this feature. Besides the application in berth allocation problems, the proposed methodology can also apply in some other problems on job (or service) scheduling, in which the jobs (or services) will periodically call at a work station (service center) and the service time is random.

For handling the random operation time (dwell time) of ships, this paper proposes both a stochastic programming formulation model and a robust formulation model. The former one can cope with arbitrary probability distributions of ships’ operation time deviation, while the latter one is applicable to situations in which limited information about probability distributions is available.

The robust formulation model not only has the benefit of limiting the worst-case outcome of the tactical berth allocation decisions, but also can be solved faster and needs fewer inputs than the stochastic programming formulation model. So this study investigates the relationship between the two models, and proposes a heuristic for controlling a parameter in the robust formulation model so as to derive a near-optimal solution to the stochastic programming formulation model in a more efficient way.

The proposed models are intractable by CPLEX and some exact solution methods when the numbers of ships and berths are large. This paper develops a scalable meta-heuristic algorithm that can well solve the proposed models in large-scale realistic environments. Numerical experiments are conducted to prove the necessity of the proposed model and also validate the efficiency of the proposed meta-heuristic algorithm. For a set of real world like instances, the algorithm can obtain good berth allocation plans within a reasonable time.

However, there are limitations for the current study. First, the randomness of the ships’ arrival time is not considered explicitly in the models. This issue can bring more challenges to the model formulation because the earliness and the tardiness of ships’ arrival may change the precedence of ships in each berth. If the deviation of ships’ arrival time is not very large, we can combine it with the deviation of ships’ operation time and consider the uncertain issues together through random parameter δi
                     . Then all the proposed methodology in this paper can also apply in this case. In addition, the considerations on quay cranes assignment, multiple periods, continuous berth allocation, and increasing cost rates, are not taken into account in the this study. However, all of these possible extensions are discussed in this paper. All of the above issues will be improved in future studies. Last but not least, this study is mainly based on mathematical programming methodologies. To give a more convincing validation for these proposed models, some specialized and detailed simulation models need to be developed in the future studies.

@&#ACKNOWLEDGMENTS@&#

The author would like to thank three anonymous reviewers for their valuable comments and constructive suggestions, which have greatly improved the quality of this paper. This research is supported by National Natural Science Foundation of China [grant number 71422007], Program for Professor of Special Appointment (Eastern Scholar) at Shanghai Institutions of Higher Learning, Shanghai Social Science Research Program [grant number 2014BGL006], Shanghai Pujiang Talent Program [grant number 11PJC072].

To evaluate the proposed solution methods, we need to compare with lower bounds.

For the model SBAPSAA, we propose a lower bound (
                        
                           LB
                           
                              decoup
                           
                           SBAP
                        
                     ) obtained by decoupling the original model SBAPSAA. The objective of the model SBAPSAA contains two parts: one is about the deviation of ships’ assigned berthing time from their expected time, which is also the objective of the deterministic model BAP; the other is about the conflict time by which a ship may influence its following ships in scenarios. Therefore, the original model SBAPSAA is decoupled into two independent models. One is the deterministic model BAP, i.e., Objective (1), s.t. Constraints (2)–(9). Its objective value is denoted by Z
                     BAP. The other model is defined as follows:

                        
                           (A.1)
                           
                              
                                 
                                    Z
                                    
                                       Conflict
                                    
                                    S
                                 
                                 =
                                 Minimize
                                 
                                 
                                    Q
                                    
                                       −
                                       1
                                    
                                 
                                 ·
                                 
                                    ∑
                                    
                                       q
                                       =
                                       1
                                    
                                    Q
                                 
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          N
                                       
                                    
                                    
                                       c
                                       i
                                    
                                 
                                 
                                    
                                       (
                                       
                                          
                                             δ
                                             
                                                i
                                                ,
                                                q
                                             
                                          
                                          −
                                          
                                             ∑
                                             
                                                b
                                                ∈
                                                B
                                             
                                          
                                          
                                             s
                                             
                                                i
                                                ,
                                                b
                                             
                                          
                                       
                                       )
                                    
                                    +
                                 
                              
                           
                        
                     
                     
                        
                           (A.2)
                           
                              
                                 s
                                 
                                    .
                                    t
                                 
                                 .
                                 
                                    ∑
                                    
                                       b
                                       ∈
                                       B
                                    
                                 
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 =
                                 1
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (A.3)
                           
                              
                                 
                                    s
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ≤
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 H
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                                 ,
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (A.4)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       N
                                    
                                 
                                 
                                    (
                                    
                                       
                                          y
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                       
                                          t
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                       +
                                       
                                          s
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                    
                                    )
                                 
                                 =
                                 H
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                              
                           
                        
                     
                     
                        
                           (A.5)
                           
                              
                                 
                                    s
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ≥
                                 0
                                 ,
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ∈
                                 
                                    {
                                    
                                       0
                                       ,
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                  

The nonlinear form ‘
                        
                           
                              (
                              ·
                              )
                           
                           +
                        
                     ’ in Objective (A.1) can be linearized by the similar way as Constraints (19)–(21). The above model is to minimize the expected cost of conflict time in Q scenarios. The decision variables are just concerned with the assignment of ships to berths (i.e., y
                     
                        i, b
                     ) and the slack time that follows Ship i if it moors at Berth b (i.e., s
                     
                        i, b
                     ). The above model only considers the slack time between ships because it has direct influence on the potential conflict time in scenarios. But the model ignores the berthing time related decision (i.e., x
                     
                        i, b
                     ) because it is related with the deviation of assigned berthing time from its expected berthing time, which is considered in the other decoupled model. By solving the above model and the deterministic model BAP, the lower bound for the model SBAPSAA can be calculated by:

                        
                           (A.6)
                           
                              
                                 
                                    LB
                                    
                                       decoup
                                    
                                    SBAP
                                 
                                 =
                                 
                                    Z
                                    BAP
                                 
                                 +
                                 
                                    Z
                                    
                                       Conflict
                                    
                                    S
                                 
                              
                           
                        
                     
                  

For the model RBAP, we also propose a lower bound (
                        
                           LB
                           
                              decoup
                           
                           RBAP
                        
                     ) obtained by decoupling the original model RBAP into two independent models. One is the deterministic model BAP. The other model is defined on the basis of C(
                        s
                     )LR, i.e., Objective (47), s.t. Constraints (48)–(50). The model is defined as follows:

                        
                           (A.7)
                           
                              
                                 
                                    Z
                                    
                                       Conflict
                                    
                                    R
                                 
                                 =
                                 
                                 Minimize
                                 
                                 W
                                 θ
                                 +
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       N
                                    
                                 
                                 
                                    σ
                                    i
                                 
                                 
                              
                           
                        
                     
                     
                        
                           (A.8)
                           
                              
                                 s
                                 
                                    .
                                    t
                                 
                                 .
                                 
                                    ∑
                                    
                                       b
                                       ∈
                                       B
                                    
                                 
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 =
                                 1
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (A.9)
                           
                              
                                 
                                    s
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ≤
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 H
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                                 ,
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (A.10)
                           
                              
                                 
                                    ∑
                                    
                                       i
                                       ∈
                                       N
                                    
                                 
                                 
                                    (
                                    
                                       
                                          y
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                       
                                          t
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                       +
                                       
                                          s
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                    
                                    )
                                 
                                 =
                                 H
                                 
                                 ∀
                                 b
                                 ∈
                                 B
                              
                           
                        
                     
                     
                        
                           (A.11)
                           
                              
                                 θ
                                 +
                                 
                                    γ
                                    i
                                 
                                 ≥
                                 
                                    c
                                    i
                                 
                                 
                                    (
                                    
                                       
                                          Δ
                                          i
                                          U
                                       
                                       −
                                       
                                          Δ
                                          i
                                          L
                                       
                                    
                                    )
                                 
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (A.12)
                           
                              
                                 −
                                 
                                    γ
                                    i
                                 
                                 +
                                 
                                    σ
                                    i
                                 
                                 ≥
                                 
                                    c
                                    i
                                 
                                 
                                    (
                                    
                                       
                                          Δ
                                          i
                                          L
                                       
                                       −
                                       
                                          ∑
                                          
                                             b
                                             ∈
                                             B
                                          
                                       
                                       
                                          s
                                          
                                             i
                                             ,
                                             b
                                          
                                       
                                    
                                    )
                                 
                                 
                                 ∀
                                 i
                                 ∈
                                 N
                              
                           
                        
                     
                     
                        
                           (A.13)
                           
                              
                                 
                                    s
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ≥
                                 0
                                 ;
                                 
                                 θ
                                 ≥
                                 0
                                 ;
                                 
                                 
                                    γ
                                    i
                                 
                                 ≥
                                 0
                                 ;
                                 
                                 
                                    σ
                                    i
                                 
                                 ≥
                                 0
                                 ;
                                 
                                    y
                                    
                                       i
                                       ,
                                       b
                                    
                                 
                                 ∈
                                 
                                    {
                                    
                                       0
                                       ,
                                       1
                                    
                                    }
                                 
                              
                           
                        
                     
                  

The above model is different from the model C(
                        s
                     )LR, which is to minimize the worst case of the conflicts between ships. The difference lies in that the slack time that follows ships (i.e., s
                     
                        i, b
                     ) is decision variable. By solving the above model and the deterministic model BAP, the lower bound for the model RBAP can be calculated by:

                        
                           (A.14)
                           
                              
                                 
                                    LB
                                    
                                       decoup
                                    
                                    RBAP
                                 
                                 =
                                 
                                    Z
                                    BAP
                                 
                                 +
                                 
                                    Z
                                    
                                       Conflict
                                    
                                    R
                                 
                              
                           
                        
                     
                  

@&#REFERENCES@&#

