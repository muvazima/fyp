@&#MAIN-TITLE@&#Optimal product line pricing in the presence of budget-constrained consumers

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           First study of the product line pricing problem with budget-constrained consumers.


                        
                        
                           
                           Consideration of both optimal and heuristic types of consumer purchase behaviour.


                        
                        
                           
                           Proposition of mixed-integer linear programming formulations for the problem.


                        
                        
                           
                           Development of a branch-and-bound procedure with problem-specific bound arguments.


                        
                        
                           
                           Extensive simulation study to evaluate the procedure and derive managerial insights.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Pricing

Mixed-integer programming

Branch-and-bound

Knapsack constraints

@&#ABSTRACT@&#


               
               
                  The product line pricing problem is generally defined as a seller's task to determine the optimal prices for each product in a product line while accounting for both demand-side and supply-side restrictions. In this paper, we contribute to the existing literature by incorporating consumers’ budget considerations into the seller's optimisation problem. Despite playing an important role in many applications, such as the pricing of tickets for sporting or theatre seasons, budget constraints have not been considered in the academic literature in the context of product line pricing to date.
                  By building on the assumptions and the model formulation recently proposed in a previous study by [Burkart, W. R. et al. (2012). Product line pricing for services with capacity constraints and dynamic substitution. European Journal of Operational Research, 219(2), 347--359] for standard product line pricing, we propose a number of new mixed-integer linear formulations assuming budget-constrained consumers. The formulations differ in terms of how consumers handle their individual budget limitations. To solve the underlying problems, we propose a customised branch-and-bound procedure that relies on various novel problem-specific bound arguments explicitly exploiting the consumers’ budget limitations. Experimental tests show that the branch-and-bound procedure clearly outperforms IBM ILOG CPLEX, which is unable to solve problems for even medium-sized instances. Furthermore, based on a number of scenarios, we derive managerial insights regarding, e.g., the overall impact of considering budget constraints on the seller's revenue as well as the impact of correctly anticipating the type of consumer purchase behaviour.
               
            

@&#INTRODUCTION@&#

In general, a product line is defined as a set of several closely related products, such as goods or services, which are separately offered by a single seller. A product line can comprise related products of various sizes, types, colours, qualities, or prices that satisfy the same general needs and may be marketed together (Monroe & Zoltners, 1979). Product lining is different from product bundling, where several products are combined into one group, which is then offered for sale as a unit (cf., e.g., Chakravarty, Mild, & Taudes, 2013 and Mayer, Klein, & Seiermann, 2013). The seller's task to determine the optimal prices for each product in a line while accounting for both demand-side and supply-side restrictions is generally referred to as the product line pricing problem. In the academic literature, this problem was first formalised by Dean (1950).

Most researchers focus on product lines in which the products are substitutes from a consumer's point of view, each destined for the same overall market (cf., e.g., Phillips, 2005, chap. 4.3.5 or Rao, 2009, chap. 10). Setting the prices within the product line then mainly aims at extracting different consumers’ willingness-to-pay and is in fact an implementation of price differentiation. In this context, a number of optimisation models and procedures have been proposed, mainly in the marketing and operations research literature (cf., e.g., Burkart, Klein, & Mayer, 2012; Chen & Hausman, 2000; Day & Venkataramanan, 2006; Dobson & Kalish, 1988, 1993; Green & Krieger, 1985; Hanson & Martin, 1996; Kraus & Yano, 2003; Reibstein & Gatignon, 1984; Shioda, Tuncel, & Myklebust, 2011; Zufryden, 1982). They often also include product line selection, i.e., deciding which products to offer.

Regarding the supply-side restrictions, some of the authors consider the limited inventory of the offered products (cf., e.g., Burkart et al., 2012), implying dynamic substitution effects in the case that products become unavailable for consumers during the sales process. Indeed, service providers in particular often face strong capacity constraints, as the total supply is limited by external factors that do not allow for an adaption of capacity in the short run (cf., e.g., Kimes, 1989). Examples include selling tickets for sporting or theatre events, where the number of saleable tickets is limited by the number of available seats and selling advertisement time and space in TV and newspapers, respectively.

Considering the demand-side, an essential part of any product line pricing model is how the consumer purchase behaviour is incorporated, as consumers can self-select their desired purchase option. The literature usually assumes risk-neutral consumers who make fully rational decisions and maximise their individual utility. Although some researchers model consumer purchase behaviour by a discrete choice model in this context (cf., e.g., Bitran & Ferrer, 2007; Gallego & Wang, 2014; Hanson & Martin, 1996), the most common approach in the literature on pricing to capture consumer behaviour is the deterministic max-surplus choice rule based on consumers’ valuations. Represented by two well-known concepts based on reservation prices, i.e., individual rationality (or participation) and incentive compatibility, this choice rule can be incorporated into optimisation models or analytical approaches (cf., e.g., Dobson & Kalish, 1993; Green & Krieger, 1985; Shioda et al., 2011).

Given this emphasis on detailed modelling of the effect of consumers’ individual valuations on their purchase behaviour, it is surprising that little attention has been paid to individual budget constraints as limiting resources on the demand-side in the literature on product line or bundle pricing. Budget considerations are particularly necessary if not all products of a product line are substitutes, such that consumers can decide to purchase several products at once. In this case, consumers may not be able to buy all products that yield a positive individual surplus (which is defined as the difference between valuation and price); instead, they can only select a subset of the relevant products to keep to their available budget while striving to maximise their surplus. Originating in the 19th century, budget constraints have been intensively discussed and analysed in the field of neo-classical microeconomics. Despite the economic implications of existing budget constraints, they have attracted little interest in the traditional operations research stream of research; however, this interest is growing, e.g., in the context of multi-product or combinatorial auctions and mechanism design, situated at the interface of economics and operations research. Undoubtedly, there are many real-world examples where the available budget has a strong influence on the consumers’ purchase decisions when selecting from a product line. Using the example of ticket pricing for sporting or theatre events, consumers facing a limited budget may be restricted to purchasing only a subset of the tickets for all events of a certain season that yield a positive surplus. Similarly, firms that want to promote their products or services in TV commercials or banners on websites must carefully decide on the duration, time, and location of the promotion subject to their advertising budget. Other examples include tour operators, who usually publish their package coach tours in a seasonal brochure in advance. Consumers then have to book their preferred trips subject to their travel budget.

To address the resulting research gap, in this paper, we introduce the product line pricing problem with budget-constrained consumers. More specifically, the contributions of our work are as follows:

                        
                           •
                           First, we propose a mixed-integer linear programming model (MILP) for the product line pricing problem with budget-constrained consumers. The problem specification also contains capacity constraints and thus dynamic substitution such that the resulting model can be observed as a natural extension of that proposed by Burkart et al. (2012) for product line pricing under capacity constraints and substitutable products. We argue that the problem is NP-hard and thus potentially difficult to solve in general. Furthermore, we present MILP formulations for two variants of the original problem differing in terms of the assumptions regarding consumer purchase behaviour. More precisely, we consider the case that consumers may not be able to precisely determine their optimal purchase option given their individual budget constraint, behaving heuristically instead. This type of limitation is quite common in the context of the theory of bounded rationality (cf., e.g., Kahneman & Tversky, 1979 or Gigerenzer & Gaissmaier, 2011). Particularly, it has extensively been discussed in the economic literature on the so-called classical consumer problem, of which our model of consumer purchase behaviour is an instance (cf. Section 2.2).

Second, we develop a customised branch-and-bound procedure to solve the original problem as well as the variants to optimality. In this context, special emphasis is put on the development of a number of problem-specific bounds that partly extend existing bound arguments in product line pricing to the new setting and partly rely on new considerations specifically arising from the budget constraints.

Third, regarding the original problem, we demonstrate that applying the proposed branch-and-bound procedure clearly outperforms solving the corresponding MILP formulation with the standard software package IBM ILOG CPLEX (henceforth, CPLEX). In particular, we present details from a comprehensive numerical study considering problem classes of typical sizes investigated in the former literature on standard product line pricing. We first examine the performance of the different proposed bound arguments and calibrate the branch-and-bound procedure accordingly. Next, we compare the performance of the branch-and-bound procedure with the performance of CPLEX. It turns out that even though the problem itself is much more complicated than the standard product line pricing problem without budget constraints, all problem classes can be solved to optimality by the branch-and-bound procedure. In contrast, we show that applying CPLEX requires a much higher runtime and is impossible for even medium-sized problem classes.

Fourth, we derive managerial insights by evaluating, e.g., in detail the profit losses experienced in the case that the consumers’ budget limitations are neglected by the seller. It turns out that the optimised prices are significantly influenced by the anticipation of the budget constraints and, as a consequence, the revenues increase and decrease correspondingly. In contrast, the loss in revenue is rather limited if the seller optimises prices assuming heuristic consumer behaviour while in fact the consumers behave optimally, and vice versa. Interestingly, however, the heuristic problem variants can be solved substantially faster. Furthermore, we state and discuss a number of observations regarding the optimal prices depending on the parameters of the specific problem class, leading to additional managerial insights.

The paper is structured as follows: In Section 2, we formally present the product line pricing problem with budget-constrained consumers and introduce the relevant notation. We also formalise the demand model reflecting consumer behaviour, as well as the corresponding assumptions underlying the problem variants. In Section 3, we present the MILP formulations for the original problem as well as the problem variants. In Section 4, we propose the customised branch-and-bound procedure to solve these problems. Section 5 contains the performance analysis. In Section 6, we present the managerial insights. The main results of the paper are summarised in Section 7.

The basic problem assumptions are in line with the assumptions from the existing product line pricing literature incorporating capacity constraints (cf., e.g., Burkart et al. (2012)). In particular, we consider a seller who has to determine static product-specific prices pj
                      for J products 
                        
                           (
                           
                              j
                              =
                              1
                              ,
                              …
                              ,
                              J
                           
                           )
                        
                      at the beginning of a selling period. We assume that the initial capacity of each product j is fixed at c
                     0j
                      and that there are no additional variable costs linked with selling a product, such that the seller simply aims to maximise his total revenue. Note that – in line with the existing literature – we use the term ‘capacity’ referring to the number of available supply units, in spite of the discrete nature of the parameter. The set of possible prices is discrete. Hence, the seller has to select a price for each product j out of a set of discrete price points 
                        
                           {
                           
                              
                                 p
                                 
                                    j
                                    1
                                 
                              
                              ,
                              …
                              ,
                              
                                 p
                                 
                                    j
                                    
                                       N
                                       j
                                    
                                 
                              
                           
                           }
                        
                     . In this section, for ease of presentation, let 
                        
                           
                              p
                              j
                           
                           ∈
                           
                              {
                              
                                 
                                    p
                                    
                                       j
                                       1
                                    
                                 
                                 ,
                                 …
                                 ,
                                 
                                 
                                    p
                                    
                                       j
                                       
                                          N
                                          j
                                       
                                    
                                 
                              
                              }
                           
                        
                      denote the selected price point for product j. Subsequently, I consumers 
                        
                           (
                           
                              i
                              =
                              1
                              ,
                              …
                              ,
                              I
                           
                           )
                        
                      arrive consecutively during the selling period. Each time a unit of a product is sold to a consumer i the corresponding remaining capacity is reduced by one. The remaining capacity of product j after handling consumer i is denoted by cij
                     , and we call it available for consumer i if 
                        
                           
                              c
                              
                                 i
                                 −
                                 1
                                 ,
                                 j
                              
                           
                           >
                           0
                        
                     . The consumers 
                        
                           (
                           
                              i
                              =
                              1
                              ,
                              …
                              ,
                              I
                           
                           )
                        
                      appear in the sequence of their numbering and evaluate the available products subject to the effective prices. The monetary valuation of consumer i for product j is represented by a reservation price (or valuation) denoted by vij
                      ≥ 0, and, on this basis, the surplus sij
                      for product j is defined as the difference between the valuation and the respective price, i.e., 
                        
                           
                              s
                              
                                 i
                                 j
                              
                           
                           =
                           
                              v
                              
                                 i
                                 j
                              
                           
                           −
                           
                              p
                              j
                           
                        
                     . Applying the max-surplus choice rule, consumers act according to the following two assumptions (cf., e.g., Talluri & van Ryzin, 2004, chap. 8.3.3.3). First, an available product j may only be bought if the participation constraint (PC) is satisfied, i.e., if the corresponding obtainable surplus is nonnegative (sij
                      ≥ 0). We call such a product acquirable. Second, the incentive compatibility constraint (IC) claims that there is no purchase alternative that yields a higher utility (i.e., overall surplus) than the subset of products that is selected by the consumer. In this context, the budget constraints we additionally consider in this paper become relevant. A consumer i may not simply self-select all products that are acquirable. In fact, the sum of the prices of the products that consumer i selects for purchase must not exceed the available budget Bi
                     ; we call such a subset of acquirable products affordable. Regarding the consumers’ ability to solve the IC, i.e., to figure out which subset of affordable products leads to the highest utility, we distinguish between four types of consumer behaviour, which are outlined in the following subsections.

We first consider the case that consumers maximise their utility exactly. The resulting decision problem for a consumer i evaluating the products j at the given prices pj
                         can be formalised by a binary linear program that maximises the surplus the consumer receives when making a purchase. With binary decision variables xj
                         indicating whether product j is contained in the selected set of consumer i and 
                           
                              
                                 J
                                 i
                              
                              =
                              
                                 {
                                 
                                    
                                       j
                                       ∈
                                       
                                          {
                                          
                                             1
                                             ,
                                             …
                                             ,
                                             J
                                          
                                          }
                                       
                                       |
                                    
                                    
                                       c
                                       
                                          i
                                          −
                                          1
                                          ,
                                          j
                                       
                                    
                                    >
                                    0
                                    
                                    ∧
                                    
                                    
                                       s
                                       
                                          i
                                          j
                                       
                                    
                                    ≥
                                    0
                                 
                                 }
                              
                           
                         denoting the set of acquirable products, this program can be stated as follows:

                           
                              (1)
                              
                                 
                                    Max
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          
                                             J
                                             i
                                          
                                       
                                    
                                    
                                       x
                                       j
                                    
                                    
                                       s
                                       
                                          i
                                          j
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (2)
                              
                                 
                                    s
                                    
                                       .
                                       t
                                    
                                    .
                                    
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          
                                             J
                                             i
                                          
                                       
                                    
                                    
                                       x
                                       j
                                    
                                    
                                       p
                                       j
                                    
                                    ≤
                                    
                                       B
                                       i
                                    
                                 
                              
                           
                        
                        
                           
                              (3)
                              
                                 
                                    
                                       x
                                       j
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          
                                          1
                                       
                                       }
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    j
                                    ∈
                                    
                                       J
                                       i
                                    
                                 
                              
                           
                        The objective function (1) maximises the sum of the surpluses of all products being selected. Constraint (2) ensures that the sum of the corresponding prices does not exceed the budget. Constraints (3) are the definition of the binary variables. Note that as only acquirable products are considered in the formulation, the PC is satisfied. In addition, maximising (1) under (2) simultaneously ensures that the IC is fulfilled. In the event that no product is acquirable (
                           
                              
                                 J
                                 i
                              
                              
                                 =
                                 ∅
                                 )
                              
                           
                         or no subset of acquirable products is affordable, consumer i leaves without buying anything. Technically, (1)–(3) is the model of a standard knapsack problem with 
                           
                              
                                 |
                              
                              
                                 J
                                 i
                              
                              
                                 |
                              
                           
                         elements, weights sij
                        , and size Bi
                        .

The way consumers optimally solve the IC – as given by (1)–(3) – is an instance of the classical consumer problem known from neoclassical consumer theory. In this context, many economists agree on the fact that the underlying assumptions of rational behaviour are often not very plausible in practice, at least when being literally interpreted (cf., e.g., Gilboa, Postlewaite, & Schmeidler, 2010). One of the criticised assumptions is that consumers are aware of all the potential product bundles that fit in their budget. In fact, this implies that consumers need to solve a very complex decision problem. The combinatorial aspects of the classical consumer problem have explicitly been discussed in the literature (cf., e.g., MacLeod, 1996). Indeed, in the context of our model, already for a supposedly small number of 
                           
                              
                                 |
                              
                              
                                 J
                                 i
                              
                              
                                 |
                                 =
                                 6
                              
                           
                         acquirable products, up to 
                           
                              
                                 2
                                 6
                              
                              =
                              64
                           
                         potential bundles would have to be evaluated by a consumer i. Gilboa et al. (2010) show that not only the number of possible bundles grows exponentially in the problem parameters, but the problem is even NP-complete, i.e., it is complex in a formal sense. This implies that even latest computer technology cannot solve larger instances of the problem, making it unlikely that consumers can do so. Even more, opposed to some other prominent behavioural effects discussed by economists (cf., e.g., the framing of decisions investigated by Tversky & Kahneman, 1981), resulting deviations from neoclassical consumer theory cannot simply be seen as ‘careless mistakes’ that can be solved by being careful enough (cf. Gilboa et al., 2010). Overall, it is very likely that consumers apply a kind of heuristic approach to figure out their purchase decisions, that is, they show bounded rationality in their behaviour. Nevertheless, it is reasonable to assume that heuristic behaviour regarding a product line is not completely uninformed, but the result of some assessment. Therefore, in the following subsections, we present two heuristics – greedy consumer behaviour and look-ahead consumer behaviour – that both explicitly incorporate exact information on the budget, the prices, and the consumers’ reservation prices. To further justify the use of bounded rationality as well as the relevance of the two heuristics in our setting, we additionally performed an informal test with a class of 25 OR-students at advanced bachelor-level. Interestingly, when giving them the result of the look-ahead heuristic for a problem instance with 
                           
                              J
                              =
                              6
                           
                         products, nearly all of them explicitly confirmed the optimality of the solution, even though it was not optimal. Even after having explained them how the heuristic works, they did not doubt that this procedure leads to the optimum.

First, we consider consumers who select the products they purchase in a greedy manner. More precisely, each consumer i adds acquirable products to her purchase according to the corresponding surplus sij
                            she receives from the product. The resulting algorithm can be stated as follows:

                              
                                 1.
                                 Sort the acquirable products in decreasing order according to sij
                                    :

Priority list 
                                       
                                          〈
                                          
                                             t
                                             
                                                i
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             t
                                             
                                                i
                                                k
                                             
                                          
                                          ,
                                          …
                                          
                                             t
                                             
                                                
                                                   i
                                                   |
                                                
                                                
                                                   J
                                                   i
                                                
                                                
                                                   |
                                                
                                             
                                          
                                          〉
                                       
                                     with 
                                       
                                          
                                             t
                                             
                                                i
                                                k
                                             
                                          
                                          ∈
                                          
                                             J
                                             i
                                          
                                       
                                     for 
                                       
                                          
                                             k
                                             =
                                             1
                                             ,
                                             …
                                             ,
                                             |
                                          
                                          
                                             J
                                             i
                                          
                                          
                                             |
                                          
                                       
                                    , tik
                                     ≠ til
                                     for 
                                       
                                          
                                             k
                                             ,
                                             l
                                             =
                                             1
                                             ,
                                             …
                                             ,
                                             |
                                          
                                          
                                             J
                                             i
                                          
                                          
                                             |
                                          
                                       
                                     and k ≠ l, and 
                                       
                                          
                                             s
                                             
                                                i
                                                
                                                   t
                                                   
                                                      i
                                                      k
                                                   
                                                
                                             
                                          
                                          ≥
                                          
                                             s
                                             
                                                i
                                                
                                                   t
                                                   
                                                      i
                                                      ,
                                                      k
                                                      +
                                                      1
                                                   
                                                
                                             
                                          
                                       
                                     for 
                                       
                                          
                                             k
                                             =
                                             1
                                             ,
                                             …
                                             ,
                                             |
                                          
                                          
                                             J
                                             i
                                          
                                          
                                             |
                                             −
                                             1
                                          
                                       
                                    
                                 

Initialise the remaining budget bi
                                    : 
                                       
                                          
                                             b
                                             i
                                          
                                          :
                                          =
                                          
                                             B
                                             i
                                          
                                       
                                    .

Loop over all acquirable products in decreasing order of the consumer surplus 
                                       
                                          
                                             k
                                             =
                                             1
                                             ,
                                             …
                                             ,
                                             |
                                          
                                          
                                             J
                                             i
                                          
                                          
                                             |
                                          
                                       
                                    :

If 
                                       
                                          
                                             b
                                             i
                                          
                                          ≥
                                          
                                             p
                                             
                                                t
                                                
                                                   i
                                                   k
                                                
                                             
                                          
                                       
                                    : 
                                       
                                          
                                             x
                                             
                                                t
                                                
                                                   i
                                                   k
                                                
                                             
                                          
                                          :
                                          =
                                          1
                                       
                                     and 
                                       
                                          
                                             b
                                             i
                                          
                                          :
                                          =
                                          
                                             b
                                             i
                                          
                                          −
                                          
                                             p
                                             
                                                t
                                                
                                                   i
                                                   k
                                                
                                             
                                          
                                       
                                    .

Second, we consider consumers who follow a look-ahead approach. In extension to greedy behaviour, they explicitly consider the budget consumption when calculating the surplus of a product. More precisely, products are added to the purchase according to the corresponding relative surplus 
                              
                                 s
                                 
                                    i
                                    j
                                 
                                 
                                    r
                                    e
                                    l
                                 
                              
                           , i.e., the consumer surplus relative to the price that has to be paid. The resulting algorithm is a straightforward extension of that presented above for greedy consumers by simply replacing sij
                            with 
                              
                                 s
                                 
                                    i
                                    j
                                 
                                 
                                    r
                                    e
                                    l
                                 
                              
                           , which is calculated by 
                              
                                 
                                    s
                                    
                                       i
                                       j
                                    
                                    
                                       r
                                       e
                                       l
                                    
                                 
                                 :
                                 =
                                 
                                    (
                                    
                                       
                                          v
                                          
                                             i
                                             j
                                          
                                       
                                       −
                                       
                                          p
                                          j
                                       
                                    
                                    )
                                 
                                 /
                                 
                                    p
                                    j
                                 
                              
                           . Note that, technically, this procedure is closely related to the well-known standard procedure for solving the continuous knapsack problem (cf. Dantzig, 1957).

To illustrate the problem setting and assumptions, we provide a brief example, allowing us to compare the sales processes for the different types of consumer behaviour. The seller offers 
                           
                              J
                              =
                              3
                           
                         single products with an initial capacity of 
                           
                              
                                 c
                                 
                                    0
                                    j
                                 
                              
                              =
                              2
                              
                              ∀
                              
                              j
                              ∈
                              
                                 {
                                 
                                    1
                                    ,
                                    
                                    2
                                    ,
                                    
                                    3
                                 
                                 }
                              
                           
                        . Pursuing the objective to maximise his revenue, he can choose prices pj
                         for all of the products j out of a set of discrete price points 
                           
                              
                                 p
                                 j
                              
                              ∈
                              
                                 {
                                 
                                    5
                                    ,
                                    
                                    10
                                    ,
                                    …
                                    ,
                                    
                                    100
                                 
                                 }
                              
                           
                        . Table 1 depicts the reservation prices of 
                           
                              I
                              =
                              3
                           
                         consumers, who arrive during the selling period together with the (relative) surplus for an arbitrary chosen price vector 
                           
                              p
                              =
                              (
                              
                                 60
                                 ,
                                 
                                 40
                                 ,
                                 
                                 50
                              
                              )
                           
                        . The products that are selected by a consumer are highlighted in grey.

First, we see that in this example, given the price vector, all three types of consumer behaviour lead to different overall sales processes and even different obtained revenues of 240, 250, and 210. We now specifically discuss the differences between optimal, look-ahead, and greedy behaviour. For consumer 
                           
                              i
                              =
                              1
                           
                        , the set of selected products assuming optimal behaviour is identical to that under look-ahead behaviour but different from that under greedy behaviour. Specifically, a greedy consumer buys product 
                           
                              j
                              =
                              1
                           
                         due to the high absolute surplus 
                           
                              
                                 s
                                 11
                              
                              =
                              15
                           
                        , implying that no other products can be purchased according to the budget constraint. In contrast, optimal as well as look-ahead behaviour ‘recognises’ this circumstance, and the consumer selects the other two products, leading to a higher overall surplus. For consumer 
                           
                              i
                              =
                              2
                           
                        , the look-ahead behaviour fails to be optimal, while the greedy behaviour is in line with the optimum. First note that any two of the three products could potentially be bought due to the budget constraint. Next, product 
                           
                              j
                              =
                              2
                           
                         comes along with the highest relative surplus 
                           
                              
                                 s
                                 
                                    22
                                 
                                 
                                    r
                                    e
                                    l
                                 
                              
                              =
                              0.23
                           
                        , leading to a purchase of products 
                           
                              j
                              =
                              2
                           
                         and 
                           
                              j
                              =
                              1
                           
                         under look-ahead behaviour. However, it is obviously preferable to add product 
                           
                              j
                              =
                              3
                           
                         to the purchase instead of product 
                           
                              j
                              =
                              2
                           
                         because although the relative surplus of product 
                           
                              j
                              =
                              3
                           
                         is lower, its absolute value is higher than that of product 
                           
                              j
                              =
                              2
                           
                         (
                           
                              
                                 s
                                 23
                              
                              =
                              10
                              >
                              
                                 s
                                 22
                              
                              =
                              9
                           
                        ), and it fits into the given budget as well. We now turn to consumer 
                           
                              i
                              =
                              3
                           
                        . For her, due to the given price vector 
                           p
                        , product 
                           
                              j
                              =
                              3
                           
                         is not acquirable because the PC is not satisfied (marked with (PC)). Regarding the other products, the situations for different behaviours differ because of the differences that occur for the predecessors. More precisely, while under optimal behaviour, both products are still available, under look-ahead and greedy behaviour, products 
                           
                              j
                              =
                              2
                           
                         and 
                           
                              j
                              =
                              1
                           
                         are already sold out (marked with (c)), leading to different purchase decisions.

In this section, we develop MILP formulations for each of the different consumer behaviour variants of the product line pricing problem described in Section 2, incorporating both budget and capacity constraints. The common notation for the model formulations is shown in Table 2
                     . As the formulations become more complex with an increasing level of sophistication of the consumer behaviour, we begin with the description of the model with the simplest heuristic behaviour, i.e., greedy behaviour, and continue with look-ahead and optimal behaviours.

The product line pricing problem assuming greedy consumer behaviour, as described in Section 2.2.1, can be formulated as a mixed-integer linear program as follows (MILPgreedy):

                           
                              (4)
                              
                                 
                                    Max
                                    
                                       ∑
                                       
                                          i
                                          =
                                          1
                                       
                                       I
                                    
                                    
                                       ∑
                                       
                                          j
                                          =
                                          1
                                       
                                       J
                                    
                                    
                                       ∑
                                       
                                          n
                                          =
                                          1
                                       
                                       
                                          N
                                          j
                                       
                                    
                                    
                                       x
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    
                                    
                                       p
                                       
                                          j
                                          n
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (5)
                              
                                 
                                    s
                                    
                                       .
                                       t
                                    
                                    .
                                    
                                       ∑
                                       
                                          n
                                          =
                                          1
                                       
                                       
                                          N
                                          j
                                       
                                    
                                    
                                       π
                                       
                                          j
                                          n
                                       
                                    
                                    =
                                    1
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    j
                                 
                              
                           
                        
                        
                           
                              (6)
                              
                                 
                                    
                                       c
                                       
                                          i
                                          j
                                       
                                    
                                    =
                                    
                                       c
                                       
                                          i
                                          −
                                          1
                                          ,
                                          j
                                       
                                    
                                    −
                                    
                                       ∑
                                       
                                          n
                                          =
                                          1
                                       
                                       
                                          N
                                          j
                                       
                                    
                                    
                                       x
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    j
                                 
                              
                           
                        
                        
                           
                              (7)
                              
                                 
                                    
                                       ∑
                                       
                                          n
                                          =
                                          1
                                       
                                       
                                          N
                                          j
                                       
                                    
                                    
                                       γ
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    ≤
                                    
                                       c
                                       
                                          i
                                          −
                                          1
                                          ,
                                          j
                                       
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    j
                                 
                              
                           
                        
                        
                           
                              (8)
                              
                                 
                                    
                                       γ
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    ≤
                                    
                                       π
                                       
                                          j
                                          n
                                       
                                    
                                    
                                       q
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    j
                                    ,
                                    n
                                 
                              
                           
                        
                        
                           
                              (9)
                              
                                 
                                    
                                       γ
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    ≥
                                    
                                       q
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    +
                                    
                                       π
                                       
                                          j
                                          n
                                       
                                    
                                    +
                                    
                                       
                                          c
                                          
                                             i
                                             −
                                             1
                                             ,
                                             j
                                          
                                       
                                       
                                          c
                                          
                                             0
                                             j
                                          
                                       
                                    
                                    −
                                    2
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    j
                                    ,
                                    n
                                 
                              
                           
                        
                        
                           
                              (10)
                              
                                 
                                    
                                       x
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    ≤
                                    
                                       γ
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    j
                                    ,
                                    n
                                 
                              
                           
                        
                        
                           
                              (11)
                              
                                 
                                    
                                       ∑
                                       
                                          j
                                          =
                                          1
                                       
                                       J
                                    
                                    
                                       ∑
                                       
                                          n
                                          =
                                          1
                                       
                                       
                                          N
                                          j
                                       
                                    
                                    
                                       x
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    
                                       p
                                       
                                          j
                                          n
                                       
                                    
                                    ≤
                                    
                                       B
                                       i
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                 
                              
                           
                        
                        
                           
                              (12)
                              
                                 
                                    
                                       
                                       
                                       
                                          
                                             
                                                B
                                                i
                                             
                                             −
                                             
                                                ∑
                                                
                                                   k
                                                   =
                                                   1
                                                
                                                J
                                             
                                             
                                                ∑
                                                
                                                   m
                                                   =
                                                   1
                                                
                                                
                                                   N
                                                   k
                                                
                                             
                                             
                                                x
                                                
                                                   i
                                                   k
                                                   m
                                                
                                             
                                             
                                                p
                                                
                                                   k
                                                   m
                                                
                                             
                                             +
                                             
                                             ϵ
                                             ≤
                                             
                                                ∑
                                                
                                                   n
                                                   =
                                                   1
                                                
                                                
                                                   N
                                                   j
                                                
                                             
                                             
                                                (
                                                
                                                   
                                                      γ
                                                      
                                                         i
                                                         j
                                                         n
                                                      
                                                   
                                                   −
                                                   
                                                      x
                                                      
                                                         i
                                                         j
                                                         n
                                                      
                                                   
                                                
                                                )
                                             
                                             
                                                p
                                                
                                                   j
                                                   n
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             +
                                             
                                             
                                                (
                                                
                                                   1
                                                   +
                                                   
                                                      ∑
                                                      
                                                         n
                                                         =
                                                         1
                                                      
                                                      
                                                         N
                                                         j
                                                      
                                                   
                                                   
                                                      (
                                                      
                                                         
                                                            x
                                                            
                                                               i
                                                               j
                                                               n
                                                            
                                                         
                                                         −
                                                         
                                                            γ
                                                            
                                                               i
                                                               j
                                                               n
                                                            
                                                         
                                                      
                                                      )
                                                   
                                                
                                                )
                                             
                                             
                                                M
                                                i
                                             
                                             
                                             
                                                for
                                                
                                                all
                                             
                                             
                                             i
                                             ,
                                             j
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (13)
                              
                                 
                                    
                                       
                                       
                                       
                                          
                                             
                                                (
                                                
                                                   B
                                                   i
                                                
                                                −
                                                
                                                   ∑
                                                   
                                                      
                                                         
                                                            
                                                               l
                                                               ≠
                                                               j
                                                               ∧
                                                               l
                                                               ≠
                                                               k
                                                            
                                                         
                                                         
                                                            
                                                               l
                                                               =
                                                               1
                                                            
                                                         
                                                      
                                                   
                                                   J
                                                
                                                
                                                   ∑
                                                   
                                                      n
                                                      =
                                                      1
                                                   
                                                   
                                                      N
                                                      l
                                                   
                                                
                                                
                                                   p
                                                   
                                                      l
                                                      n
                                                   
                                                
                                                
                                                   x
                                                   
                                                      i
                                                      l
                                                      n
                                                   
                                                
                                                −
                                                
                                                   ∑
                                                   
                                                      n
                                                      =
                                                      1
                                                   
                                                   
                                                      N
                                                      j
                                                   
                                                
                                                
                                                   p
                                                   
                                                      j
                                                      n
                                                   
                                                
                                                
                                                   π
                                                   
                                                      j
                                                      n
                                                   
                                                
                                                +
                                                ϵ
                                                )
                                             
                                             /
                                             
                                                M
                                                
                                                   i
                                                   j
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ≤
                                             
                                             (
                                             
                                                1
                                                −
                                                
                                                   ρ
                                                   
                                                      i
                                                      j
                                                      k
                                                   
                                                
                                             
                                             )
                                             
                                             
                                                for
                                                
                                                all
                                             
                                             
                                             i
                                             ,
                                             j
                                             ,
                                             k
                                             :
                                             j
                                             ≠
                                             k
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (14)
                              
                                 
                                    
                                       
                                       
                                       
                                          
                                             
                                                (
                                                
                                                   
                                                      ∑
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        l
                                                                        =
                                                                        1
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                            
                                                               
                                                                  
                                                                     
                                                                        l
                                                                        ≠
                                                                        j
                                                                        
                                                                        ∧
                                                                        
                                                                        l
                                                                        ≠
                                                                        k
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                      J
                                                   
                                                   
                                                      ∑
                                                      
                                                         n
                                                         =
                                                         1
                                                      
                                                      
                                                         N
                                                         l
                                                      
                                                   
                                                   
                                                      p
                                                      
                                                         l
                                                         n
                                                      
                                                   
                                                   
                                                      x
                                                      
                                                         i
                                                         l
                                                         n
                                                      
                                                   
                                                   +
                                                   
                                                      ∑
                                                      
                                                         n
                                                         =
                                                         1
                                                      
                                                      
                                                         N
                                                         j
                                                      
                                                   
                                                   
                                                      p
                                                      
                                                         j
                                                         n
                                                      
                                                   
                                                   
                                                      π
                                                      
                                                         j
                                                         n
                                                      
                                                   
                                                   −
                                                   
                                                      B
                                                      i
                                                   
                                                   +
                                                   ϵ
                                                
                                                )
                                             
                                             /
                                             
                                                M
                                                
                                                   i
                                                   k
                                                
                                                
                                                   
                                                   ′
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ≤
                                             
                                                ρ
                                                
                                                   i
                                                   j
                                                   k
                                                
                                             
                                             
                                             
                                                for
                                                
                                                all
                                             
                                             
                                             i
                                             ,
                                             j
                                             ,
                                             k
                                             :
                                             j
                                             ≠
                                             k
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (15)
                              
                                 
                                    
                                       
                                       
                                       
                                          
                                             
                                                ∑
                                                
                                                   m
                                                   =
                                                   1
                                                
                                                
                                                   N
                                                   k
                                                
                                             
                                             
                                                x
                                                
                                                   i
                                                   k
                                                   m
                                                
                                             
                                             ≤
                                             1
                                             +
                                             
                                                ∑
                                                
                                                   n
                                                   =
                                                   1
                                                
                                                
                                                   N
                                                   j
                                                
                                             
                                             
                                                x
                                                
                                                   i
                                                   j
                                                   n
                                                
                                             
                                             +
                                             
                                                (
                                                
                                                   ∑
                                                   
                                                      m
                                                      =
                                                      1
                                                   
                                                   
                                                      N
                                                      k
                                                   
                                                
                                                
                                                   s
                                                   
                                                      i
                                                      k
                                                      m
                                                   
                                                
                                                
                                                   γ
                                                   
                                                      i
                                                      k
                                                      m
                                                   
                                                
                                                −
                                                
                                                   ∑
                                                   
                                                      n
                                                      =
                                                      1
                                                   
                                                   
                                                      N
                                                      j
                                                   
                                                
                                                
                                                   s
                                                   
                                                      i
                                                      j
                                                      n
                                                   
                                                
                                                
                                                   γ
                                                   
                                                      i
                                                      j
                                                      n
                                                   
                                                
                                                )
                                             
                                             /
                                             
                                                M
                                                
                                                   i
                                                   k
                                                
                                                
                                                   ′
                                                   ′
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             +
                                             
                                             
                                                ρ
                                                
                                                   i
                                                   j
                                                   k
                                                
                                             
                                             
                                             
                                                for
                                                
                                                all
                                             
                                             
                                             i
                                             ,
                                             j
                                             ,
                                             k
                                             :
                                             j
                                             ≠
                                             k
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (16)
                              
                                 
                                    
                                       c
                                       
                                          i
                                          j
                                       
                                    
                                    ≥
                                    0
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    j
                                 
                              
                           
                        
                        
                           
                              (17)
                              
                                 
                                    
                                       ρ
                                       
                                          i
                                          j
                                          k
                                       
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          
                                          1
                                       
                                       }
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    j
                                    ,
                                    k
                                    :
                                    j
                                    ≠
                                    k
                                 
                              
                           
                        
                        
                           
                              (18)
                              
                                 
                                    
                                       x
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    ,
                                    
                                    
                                       π
                                       
                                          j
                                          n
                                       
                                    
                                    ,
                                    
                                    
                                       γ
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          
                                          1
                                       
                                       }
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    j
                                    ,
                                    n
                                 
                              
                           
                        The objective function (4) maximises the seller's total revenue by aggregating the purchase decisions of consumers 
                           
                              i
                              =
                              1
                              ,
                              …
                              ,
                              I
                           
                        . In the event that consumer i purchases product j at price point pjn
                        , i.e., if 
                           
                              
                                 x
                                 
                                    i
                                    j
                                    n
                                 
                              
                              =
                              1
                           
                        , the corresponding revenue is included in the objective function value. Constraints (5) ensure that exactly one price point pjn
                         is selected for each product j. In constraints (6), the capacity of each product 
                           
                              j
                              =
                              1
                              ,
                              …
                              ,
                              J
                           
                         is reduced by 1 after each consumer i if she bought the respective product. Constraints (7)–(9) control the value of the auxiliary variable γijn
                        , which indicates whether product j is acquirable at price point pjn
                         by consumer i. Constraints (7) force the value of γijn
                         to 0 if product j is not available, and constraints (8) force it to 0 in the case that the corresponding price point pjn
                         is not chosen or the PC is not satisfied for consumer i. On the other hand, if all three conditions are satisfied, γijn
                         is forced to 1 by constraints (9). Constraints (10) link the auxiliary variables γijn
                         to the decision variables xijn
                         by preventing a purchase in the case that 
                           
                              
                                 γ
                                 
                                    i
                                    j
                                    n
                                 
                              
                              =
                              0
                           
                        . Constraints (11) ensure that the total price consumer i pays for the purchase does not exceed her available budget.

Constraints (12) ensure that no consumer i is allowed to save a part of her budget if acquirable products are still available. The remaining budget after the purchase decision has to be smaller than the price pj
                         of each product j that is acquirable 
                           
                              (
                              
                                 
                                    γ
                                    
                                       i
                                       j
                                       n
                                    
                                 
                                 =
                                 1
                              
                              )
                           
                         but not yet selected 
                           
                              (
                              
                                 
                                    x
                                    
                                       i
                                       j
                                       n
                                    
                                 
                                 =
                                 0
                              
                              )
                           
                        . Otherwise, if product j is either not acquirable or already selected, the right-hand side of (12) takes on a sufficiently large value Mi
                         and the constraints are not binding. Constraints (13) and (14) control the values of the new binary auxiliary variables ρijk
                         for each consumer i and each pairwise comparison of products j and k. Each of these variables, which are needed in (15) when analysing a certain product k, indicates whether the budget is sufficient for additionally purchasing a product j. More precisely, due to constraints (13), if the remaining budget after considering the purchase decisions of all products l ≠ (j∨k) is sufficient for also purchasing product j, the left-hand side of (13) is positive, and ρijk
                         is forced to 0. Otherwise, ρijk
                         is forced to 1 due to (14). Finally, constraints (15) assure that the purchase decision is made according to decreasing values of the surplus sijn
                        . They ensure that a product k cannot be bought if an acquirable product j ≠ k, which yields a higher surplus and would alternatively fit into the consumer's budget (
                           
                              
                                 ρ
                                 
                                    i
                                    j
                                    k
                                 
                              
                              
                                 =
                                 0
                                 )
                              
                           
                        , is not selected 
                           
                              (
                              
                                 
                                    ∑
                                    
                                       n
                                       =
                                       1
                                    
                                    
                                       N
                                       j
                                    
                                 
                                 
                                    x
                                    
                                       i
                                       j
                                       n
                                    
                                 
                                 =
                                 0
                              
                              )
                           
                        . In contrast, in the case that product j has a positive surplus but cannot be chosen because the consumer's budget Bi
                         is no longer sufficient, it might be possible for consumer i to choose product k. Then, 
                           
                              
                                 ρ
                                 
                                    i
                                    j
                                    k
                                 
                              
                              =
                              1
                           
                         due to (14), and the right-hand side of (15) is larger than 1, which allows the term 
                           
                              
                                 ∑
                                 
                                    m
                                    =
                                    1
                                 
                                 
                                    N
                                    k
                                 
                              
                              
                                 x
                                 
                                    i
                                    k
                                    m
                                 
                              
                           
                         to equal 1. If product j is already selected, constraints (15) do not limit the decision for product k. Note that we can set 
                           
                              
                                 M
                                 i
                              
                              :
                              =
                              
                                 B
                                 i
                              
                              +
                              ϵ
                           
                         in (12), 
                           
                              
                                 M
                                 
                                    i
                                    j
                                 
                              
                              :
                              =
                              
                                 B
                                 i
                              
                              −
                              
                                 p
                                 
                                    j
                                    1
                                 
                              
                              +
                              ϵ
                           
                         in (13), 
                           
                              
                                 M
                                 
                                    i
                                    k
                                 
                                 ′
                              
                              :
                              =
                              
                                 ∑
                                 
                                    l
                                    =
                                    1
                                    ,
                                    
                                    l
                                    ≠
                                    k
                                    
                                 
                                 J
                              
                              
                                 p
                                 
                                    l
                                    
                                       N
                                       l
                                    
                                 
                              
                              −
                              
                                 B
                                 i
                              
                              +
                              ϵ
                           
                         in (14), and 
                           
                              
                                 M
                                 
                                    i
                                    k
                                 
                                 
                                    ′
                                    ′
                                 
                              
                              :
                              =
                              
                                 v
                                 
                                    i
                                    k
                                 
                              
                              −
                              
                                 p
                                 
                                    k
                                    1
                                 
                              
                           
                         in (15) to tighten the formulation.

The model formulation for look-ahead consumer behaviour, as described in Section 2.2.2, is quite similar to the model for greedy behaviour. In fact, the only modification is that in (15), sijn
                         must be replaced with 
                           
                              s
                              
                                 i
                                 j
                                 n
                              
                              
                                 r
                                 e
                                 l
                              
                           
                         and the calculation of 
                           
                              M
                              
                                 i
                                 k
                              
                              
                                 ′
                                 ′
                              
                           
                         needs to be adapted accordingly (
                           
                              
                                 M
                                 
                                    i
                                    k
                                 
                                 
                                    ′
                                    ′
                                 
                              
                              :
                              =
                              
                                 (
                                 
                                    
                                       v
                                       
                                          i
                                          k
                                       
                                    
                                    −
                                    
                                       p
                                       
                                          k
                                          1
                                       
                                    
                                 
                                 )
                              
                              /
                              
                                 p
                                 
                                    k
                                    1
                                 
                              
                           
                        ). Overall, we obtain the following model formulation (MILPlook-ahead):

                           
                              (19)
                              
                                 
                                    Max
                                    
                                       ∑
                                       
                                          i
                                          =
                                          1
                                       
                                       I
                                    
                                    
                                       ∑
                                       
                                          j
                                          =
                                          1
                                       
                                       J
                                    
                                    
                                       ∑
                                       
                                          n
                                          =
                                          1
                                       
                                       
                                          N
                                          j
                                       
                                    
                                    
                                       x
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    
                                    
                                       p
                                       
                                          j
                                          n
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (20)
                              
                                 
                                    
                                       
                                       
                                       
                                          
                                             s
                                             
                                                .
                                                t
                                             
                                             .
                                             
                                             
                                                ∑
                                                
                                                   m
                                                   =
                                                   1
                                                
                                                
                                                   N
                                                   k
                                                
                                             
                                             
                                                x
                                                
                                                   i
                                                   k
                                                   m
                                                
                                             
                                             ≤
                                             1
                                             +
                                             
                                                ∑
                                                
                                                   n
                                                   =
                                                   1
                                                
                                                
                                                   N
                                                   j
                                                
                                             
                                             
                                                x
                                                
                                                   i
                                                   j
                                                   n
                                                
                                             
                                             +
                                             
                                                (
                                                
                                                   
                                                      ∑
                                                      
                                                         m
                                                         =
                                                         1
                                                      
                                                      
                                                         N
                                                         k
                                                      
                                                   
                                                   
                                                      s
                                                      
                                                         i
                                                         k
                                                         m
                                                      
                                                      
                                                         r
                                                         e
                                                         l
                                                      
                                                   
                                                   ·
                                                   
                                                      γ
                                                      
                                                         i
                                                         k
                                                         m
                                                      
                                                   
                                                   −
                                                   
                                                      ∑
                                                      
                                                         n
                                                         =
                                                         1
                                                      
                                                      
                                                         N
                                                         j
                                                      
                                                   
                                                   
                                                      s
                                                      
                                                         i
                                                         j
                                                         n
                                                      
                                                      
                                                         r
                                                         e
                                                         l
                                                      
                                                   
                                                   ·
                                                   
                                                      γ
                                                      
                                                         i
                                                         j
                                                         n
                                                      
                                                   
                                                
                                                )
                                             
                                             /
                                             
                                                M
                                                
                                                   i
                                                   k
                                                
                                                
                                                   ′
                                                   ′
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             +
                                             
                                             
                                                ρ
                                                
                                                   i
                                                   j
                                                   k
                                                
                                             
                                             
                                             
                                                for
                                                
                                                all
                                             
                                             
                                             i
                                             ,
                                             j
                                             ,
                                             k
                                             :
                                             j
                                             ≠
                                             k
                                          
                                       
                                    
                                 
                              
                           
                        
                     

and constraints (5)–(14) and (16)–(18).

Obtaining the optimal prices under optimal consumer behaviour requires a model formulation in which the different purchase alternatives that consumers are faced with are explicitly considered. More precisely, each consumer i selects an alternative z out of all 2
                           J
                         possible alternatives, i.e., product combinations. We define 
                           
                              
                                 K
                                 z
                              
                              ⊆
                              
                                 {
                                 
                                    1
                                    ,
                                    …
                                    ,
                                    J
                                 
                                 }
                              
                           
                         as the set of products of alternative z. Again, basically only the constraints reflecting consumer behaviour need to be modified, such that we obtain the following formulation (MILPoptimal):

                           
                              (21)
                              
                                 
                                    Max
                                    
                                       ∑
                                       
                                          i
                                          =
                                          1
                                       
                                       I
                                    
                                    
                                       ∑
                                       
                                          j
                                          =
                                          1
                                       
                                       J
                                    
                                    
                                       ∑
                                       
                                          n
                                          =
                                          1
                                       
                                       
                                          N
                                          j
                                       
                                    
                                    
                                       x
                                       
                                          i
                                          j
                                          n
                                       
                                    
                                    
                                    
                                       p
                                       
                                          j
                                          n
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (22)
                              
                                 
                                    
                                       (
                                       
                                          
                                             B
                                             i
                                          
                                          −
                                          
                                             ∑
                                             
                                                k
                                                ∈
                                                
                                                   K
                                                   z
                                                
                                             
                                          
                                          
                                             ∑
                                             
                                                n
                                                =
                                                1
                                             
                                             
                                                N
                                                k
                                             
                                          
                                          
                                             p
                                             
                                                k
                                                n
                                             
                                          
                                          
                                             π
                                             
                                                k
                                                n
                                             
                                          
                                          +
                                          ϵ
                                       
                                       )
                                    
                                    /
                                    
                                       B
                                       i
                                    
                                    
                                    ≤
                                    
                                       β
                                       
                                          i
                                          z
                                       
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    z
                                 
                              
                           
                        
                        
                           
                              (23)
                              
                                 
                                    
                                       (
                                       
                                          
                                             B
                                             i
                                          
                                          −
                                          
                                             ∑
                                             
                                                k
                                                ∈
                                                
                                                   K
                                                   z
                                                
                                             
                                          
                                          
                                             ∑
                                             
                                                n
                                                =
                                                1
                                             
                                             
                                                N
                                                k
                                             
                                          
                                          
                                             p
                                             
                                                k
                                                n
                                             
                                          
                                          
                                             π
                                             
                                                k
                                                n
                                             
                                          
                                       
                                       )
                                    
                                    /
                                    
                                       M
                                       
                                          i
                                          z
                                       
                                    
                                    ≥
                                    
                                       β
                                       
                                          i
                                          z
                                       
                                    
                                    −
                                    1
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    z
                                 
                              
                           
                        
                        
                           
                              (24)
                              
                                 
                                    
                                       δ
                                       
                                          i
                                          z
                                          k
                                          n
                                       
                                    
                                    ≤
                                    
                                       β
                                       
                                          i
                                          z
                                       
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    z
                                    ,
                                    n
                                    ;
                                    k
                                    ∈
                                    
                                       K
                                       z
                                    
                                 
                              
                           
                        
                        
                           
                              (25)
                              
                                 
                                    
                                       δ
                                       
                                          i
                                          z
                                          k
                                          n
                                       
                                    
                                    −
                                    
                                       γ
                                       
                                          i
                                          k
                                          n
                                       
                                    
                                    ≤
                                    1
                                    −
                                    
                                       β
                                       
                                          i
                                          z
                                       
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    z
                                    ,
                                    n
                                    ;
                                    k
                                    ∈
                                    
                                       K
                                       z
                                    
                                 
                              
                           
                        
                        
                           
                              (26)
                              
                                 
                                    
                                       γ
                                       
                                          i
                                          k
                                          n
                                       
                                    
                                    −
                                    
                                       δ
                                       
                                          i
                                          z
                                          k
                                          n
                                       
                                    
                                    ≤
                                    1
                                    −
                                    
                                       β
                                       
                                          i
                                          z
                                       
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    z
                                    ,
                                    n
                                    ;
                                    k
                                    ∈
                                    
                                       K
                                       z
                                    
                                 
                              
                           
                        
                        
                           
                              (27)
                              
                                 
                                    
                                       
                                       
                                       
                                          
                                             
                                                ∑
                                                
                                                   j
                                                   =
                                                   1
                                                
                                                J
                                             
                                             
                                                ∑
                                                
                                                   n
                                                   =
                                                   1
                                                
                                                
                                                   N
                                                   j
                                                
                                             
                                             
                                                (
                                                
                                                   
                                                      v
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                   −
                                                   
                                                      p
                                                      
                                                         j
                                                         n
                                                      
                                                   
                                                
                                                )
                                             
                                             
                                                x
                                                
                                                   i
                                                   j
                                                   n
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ≥
                                             
                                                ∑
                                                
                                                   k
                                                   ∈
                                                   
                                                      K
                                                      z
                                                   
                                                
                                             
                                             
                                                ∑
                                                
                                                   n
                                                   =
                                                   1
                                                
                                                
                                                   N
                                                   k
                                                
                                             
                                             
                                                (
                                                
                                                   
                                                      v
                                                      
                                                         i
                                                         k
                                                      
                                                   
                                                   −
                                                   
                                                      p
                                                      
                                                         k
                                                         n
                                                      
                                                   
                                                
                                                )
                                             
                                             
                                                δ
                                                
                                                   i
                                                   z
                                                   k
                                                   n
                                                
                                             
                                             
                                             
                                                for
                                                
                                                all
                                             
                                             
                                             i
                                             ,
                                             z
                                          
                                       
                                    
                                 
                              
                           
                        
                        
                           
                              (28)
                              
                                 
                                    0
                                    ≤
                                    
                                       δ
                                       
                                          i
                                          z
                                          k
                                          n
                                       
                                    
                                    ≤
                                    1
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    z
                                    ,
                                    n
                                    ;
                                    k
                                    ∈
                                    
                                       K
                                       z
                                    
                                 
                              
                           
                        
                        
                           
                              (29)
                              
                                 
                                    
                                       β
                                       
                                          i
                                          z
                                       
                                    
                                    ∈
                                    
                                       {
                                       
                                          0
                                          ,
                                          
                                          1
                                       
                                       }
                                    
                                    
                                    
                                       for
                                       
                                       all
                                    
                                    
                                    i
                                    ,
                                    z
                                 
                              
                           
                        and constraints (5)–(11), (16), and (18).

Constraints (22) and (23) control the value of the additional auxiliary variable βiz
                         for each alternative z. Constraints (22) force βiz
                         to 1 if the budget of consumer i is sufficient to buy all products of alternative z. Otherwise, βiz
                         is set to 0 by constraints (23). Constraints (24)–(26) are purely technical, as they represent a linearisation of the equation 
                           
                              
                                 δ
                                 
                                    i
                                    z
                                    k
                                    n
                                 
                              
                              =
                              
                                 β
                                 
                                    i
                                    z
                                 
                              
                              
                                 γ
                                 
                                    i
                                    k
                                    n
                                 
                              
                              ,
                              
                              ∀
                              
                              i
                              ,
                              z
                              ,
                              k
                              ∈
                              
                                 K
                                 z
                              
                              ,
                              n
                           
                        . The additional auxiliary variable δizkn
                         is set to 1 if alternative z is affordable by consumer i, i.e., if consumer i’s budget is sufficient to purchase the products that are contained in alternative z (
                           
                              
                                 β
                                 
                                    i
                                    z
                                 
                              
                              
                                 =
                                 1
                                 )
                              
                           
                        , and if each product k of alternative z is acquirable for consumer i, and if the price point pkn
                         is selected (
                           
                              
                                 γ
                                 
                                    i
                                    k
                                    n
                                 
                              
                              =
                              1
                           
                        ). Constraints (27) assure that each consumer i selects the alternative that maximises her individual utility according to the objective function. The products are selected in such a way that the corresponding aggregated surplus 
                           
                              
                                 ∑
                                 
                                    j
                                    =
                                    1
                                 
                                 J
                              
                              
                                 ∑
                                 
                                    n
                                    =
                                    1
                                 
                                 
                                    N
                                    j
                                 
                              
                              
                                 (
                                 
                                    
                                       v
                                       
                                          i
                                          j
                                       
                                    
                                    −
                                    
                                       p
                                       
                                          j
                                          n
                                       
                                    
                                 
                                 )
                              
                              
                                 x
                                 
                                    i
                                    j
                                    n
                                 
                              
                           
                         is greater than or equal to the aggregated surplus of all alternatives z for which 
                           
                              
                                 δ
                                 
                                    i
                                    z
                                    k
                                    n
                                 
                              
                              =
                              1
                           
                        . In the case that no product j yields a positive surplus, consumer i leaves without buying anything according to constraints (10). We can set 
                           
                              
                                 M
                                 
                                    i
                                    z
                                 
                              
                              :
                              =
                              
                                 B
                                 i
                              
                              −
                              
                                 ∑
                                 
                                    k
                                    ∈
                                    
                                       K
                                       z
                                    
                                 
                              
                              
                                 p
                                 
                                    k
                                    1
                                 
                              
                           
                         in (23) to tighten the formulation. Note that MILPoptimal is quite a complex optimisation problem, as the number of constraints is linearly dependent on the number of alternatives a consumer is faced with, which is in turn exponential in the total number of products in the line in general. Obviously, the problem is NP-hard, as one can easily perform a polynomial-time reduction from an arbitrary standard knapsack problem instance with H elements (
                           
                              h
                              =
                              1
                              ,
                              …
                              ,
                              H
                           
                        ), utilities uh
                        , weights wh
                        , and size κ. This is accomplished by defining 
                           
                              I
                              :
                              =
                              1
                           
                        , 
                           
                              J
                              :
                              =
                              H
                           
                        , 
                           
                              
                                 N
                                 j
                              
                              :
                              =
                              1
                              ,
                           
                         and 
                           
                              
                                 B
                                 1
                              
                              :
                              =
                              κ
                           
                         as well as c
                        0j
                         ≥ 1, 
                           
                              
                                 p
                                 
                                    j
                                    1
                                 
                              
                              :
                              =
                              
                                 u
                                 j
                              
                           
                         and 
                           
                              
                                 v
                                 
                                    1
                                    j
                                 
                              
                              :
                              =
                              
                                 w
                                 j
                              
                              +
                              
                                 u
                                 j
                              
                           
                         for all 
                           
                              j
                              =
                              1
                              ,
                              …
                              ,
                              J
                           
                        . In fact, the generation of one constraint for each possible alternative resembles a complete enumeration over the solution space of a knapsack problem.

In this section, we propose a customised branch-and-bound procedure to solve the different variants of the product line pricing problem presented above. In Section 4.1, several problem-specific upper bound arguments are introduced. In Section 4.2, we propose a branching scheme and show how the definitions of the proposed bounds need to be adapted within the enumeration tree to fathom nodes.

All of the upper bound arguments we propose, i.e., UB1, UB2, UB3, and UB4, have in common that the utility maximising behaviour (IC) of the consumers as well as the sequence of the consumers’ arrival are relaxed. This automatically implies that these bounds are valid for all four problem variants discussed above. Regarding the other characteristics of the product line pricing problem, the bounds differ substantially. Table 3
                         summarises which characteristics are considered (✓) and which are not (✗) for each of the bounds.

Furthermore, for all bound arguments, we conduct some pre-processing to improve the resulting quality of the bounds. Taking into consideration the discrete nature of the prices, we round down the reservation prices vij
                         ∀ i, j to the next-lowest price point pjn
                        , i.e., to the highest price point pjn
                         satisfying the PC for consumer i, and use these modified reservation prices 
                           
                              v
                              
                                 i
                                 j
                              
                              ′
                           
                         in all subsequent considerations: 
                           
                              
                                 v
                                 
                                    i
                                    j
                                 
                                 ′
                              
                              :
                              =
                              
                                 max
                                 
                                    n
                                    ∈
                                    {
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       
                                          N
                                          j
                                       
                                    
                                    }
                                 
                              
                              
                                 {
                                 
                                    
                                       p
                                       
                                          j
                                          n
                                       
                                    
                                    
                                       
                                       |
                                       
                                    
                                    
                                       p
                                       
                                          j
                                          n
                                       
                                    
                                    ≤
                                    
                                       v
                                       
                                          i
                                          j
                                       
                                    
                                 
                                 }
                              
                           
                        .

The first argument UB1 is a natural extension of the bound argument UB_SP in Burkart et al. (2012), which is adapted to the context of budget-constrained consumers. Within this context, we consider the products 
                              
                                 j
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 J
                              
                            separately and identify the prices that yield the maximum product-specific revenues given this product's total capacity; thereby, constraints (11) are relaxed, allowing the consumers to purchase more products than they can afford provided that the PC is satisfied. For this purpose, product-specific achievable revenues arjn
                            are determined for each price point pjn
                            with 
                              
                                 n
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 
                                    N
                                    j
                                 
                              
                            by 
                              
                                 a
                                 
                                    r
                                    
                                       j
                                       n
                                    
                                 
                                 =
                                 
                                    p
                                    
                                       j
                                       n
                                    
                                 
                                 
                                 ×
                                 
                                    
                                    min
                                 
                                 
                                    {
                                    
                                       
                                          c
                                          
                                             0
                                             j
                                          
                                       
                                       ,
                                       
                                       
                                          |
                                          
                                             I
                                             
                                                j
                                                n
                                             
                                          
                                          |
                                       
                                    
                                    }
                                 
                              
                            with 
                              
                                 
                                    I
                                    
                                       j
                                       n
                                    
                                 
                                 =
                                 
                                    {
                                    
                                       i
                                       ∈
                                       
                                          {
                                          
                                             1
                                             ,
                                             …
                                             ,
                                             I
                                          
                                          }
                                       
                                       
                                       |
                                       
                                          v
                                          
                                             i
                                             j
                                          
                                          ′
                                       
                                       ≥
                                       
                                          p
                                          
                                             j
                                             n
                                          
                                       
                                    
                                    }
                                 
                              
                           . The set 
                              
                                 I
                                 
                                    j
                                    n
                                 
                              
                            comprises all consumers who buy product j at the corresponding price point pjn
                            as the corresponding PC is satisfied. Then, UB1 as an upper bound on the total maximal revenue is calculated by aggregating the maximal product-specific revenues 
                              
                                 
                                    max
                                    
                                       n
                                       ∈
                                       {
                                       
                                          1
                                          ,
                                          …
                                          ,
                                          
                                             N
                                             j
                                          
                                       
                                       }
                                    
                                 
                                 
                                    {
                                    
                                       a
                                       
                                          r
                                          
                                             j
                                             n
                                          
                                       
                                    
                                    }
                                 
                              
                           :

                              
                                 (30)
                                 
                                    
                                       
                                          UB
                                          1
                                       
                                       =
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          max
                                          
                                             n
                                             ∈
                                             
                                                {
                                                
                                                   1
                                                   ,
                                                   …
                                                   ,
                                                   
                                                      N
                                                      j
                                                   
                                                
                                                }
                                             
                                          
                                       
                                       
                                          {
                                          
                                             a
                                             
                                                r
                                                
                                                   j
                                                   n
                                                
                                             
                                          
                                          }
                                       
                                    
                                 
                              
                           
                        

The further bound arguments UB2–UB4 are based on new considerations, as they explicitly take into account the consumers’ budget limitations. In addition to the relaxation of the IC and the sequence of arrival, UB2 also relaxes the product-specific prices of the original problem and allows consumer-specific prices while still accounting for capacity as well as budget considerations. For this purpose, we define the binary variables xij
                            ∈ {0, 1} and price variables πij
                            ≥ 0, denoting whether product j is sold to consumer i and at what price, respectively. The bound can then be calculated by the following straightforward mixed-binary optimisation model:

                              
                                 (31)
                                 
                                    
                                       
                                          UB
                                          2
                                          
                                       
                                       =
                                       Max
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          π
                                          
                                             i
                                             j
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (32)
                                 
                                    
                                       s
                                       
                                          .
                                          t
                                       
                                       .
                                       
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          π
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          B
                                          i
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                    
                                 
                              
                           
                           
                              
                                 (33)
                                 
                                    
                                       
                                          π
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          v
                                          
                                             i
                                             j
                                          
                                          ′
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ,
                                       j
                                    
                                 
                              
                           
                           
                              
                                 (34)
                                 
                                    
                                       
                                          π
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          M
                                          i
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ,
                                       j
                                    
                                 
                              
                           
                           
                              
                                 (35)
                                 
                                    
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          c
                                          
                                             0
                                             j
                                          
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       j
                                    
                                 
                              
                           
                           
                              
                                 (36)
                                 
                                    
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ∈
                                       
                                          {
                                          
                                             0
                                             ,
                                             
                                             1
                                          
                                          }
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ,
                                       j
                                    
                                 
                              
                           
                           
                              
                                 (37)
                                 
                                    
                                       
                                          π
                                          
                                             i
                                             j
                                          
                                       
                                       ≥
                                       0
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ,
                                       j
                                    
                                 
                              
                           
                        

The objective function (31) maximises the total revenue as the sum of the consumer-specific prices. Constraints (32) enforce the budget limitations regarding each consumer. Constraints (33) ensure that the consumer-specific selling prices cannot exceed the reservation prices. Constraints (34) force the price for a product to zero in the case that the product is not sold to the given consumer (
                              
                                 
                                    x
                                    
                                       i
                                       j
                                    
                                 
                                 =
                                 0
                              
                           ); here, we can set 
                              
                                 
                                    M
                                    i
                                 
                                 :
                                 =
                                 
                                    max
                                    
                                       j
                                       ∈
                                       {
                                       
                                          1
                                          ,
                                          …
                                          ,
                                          J
                                       
                                       }
                                    
                                 
                                 
                                    {
                                    
                                       v
                                       
                                          i
                                          j
                                       
                                       ′
                                    
                                    }
                                 
                              
                           . Constraints (35) represent the capacity constraints.

A more efficient reformulation of (31)–(37) with substantially fewer variables can be obtained by the following observation. In the case that a number of products are sold to a certain consumer, it is not necessary to determine the price of each product for this consumer. Instead, it is sufficient to ensure that the overall revenue from the consumer neither exceeds her budget nor the sum of the corresponding reservation prices. Let πi
                            denote the total revenue obtained from consumer i. Then, the above consideration can be expressed by

                              
                                 (38)
                                 
                                    
                                       
                                          π
                                          i
                                       
                                       =
                                       min
                                       
                                          {
                                          
                                             
                                                B
                                                i
                                             
                                             ,
                                             
                                             
                                                ∑
                                                
                                                   j
                                                   =
                                                   1
                                                
                                                J
                                             
                                             
                                                v
                                                
                                                   i
                                                   j
                                                
                                                ′
                                             
                                             
                                                x
                                                
                                                   i
                                                   j
                                                
                                             
                                          
                                          }
                                       
                                    
                                 
                              
                           where the equality sign follows from revenue maximisation. Based on this idea, the following reformulation is obtained:

                              
                                 (39)
                                 
                                    
                                       
                                          UB
                                          2
                                          
                                       
                                       =
                                       Max
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          π
                                          i
                                       
                                    
                                 
                              
                           
                           
                              
                                 (40)
                                 
                                    
                                       s
                                       
                                          .
                                          t
                                       
                                       .
                                       
                                       
                                          π
                                          i
                                       
                                       ≤
                                       
                                          B
                                          i
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                    
                                 
                              
                           
                           
                              
                                 (41)
                                 
                                    
                                       
                                          π
                                          i
                                       
                                       ≤
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          v
                                          
                                             i
                                             j
                                          
                                          ′
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                    
                                 
                              
                           
                           
                              
                                 (42)
                                 
                                    
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          c
                                          
                                             0
                                             j
                                          
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       j
                                    
                                 
                              
                           
                           
                              
                                 (43)
                                 
                                    
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ∈
                                       
                                          {
                                          
                                             0
                                             ,
                                             
                                             1
                                          
                                          }
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ,
                                       j
                                    
                                 
                              
                           
                           
                              
                                 (44)
                                 
                                    
                                       
                                          π
                                          i
                                       
                                       ≥
                                       0
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                    
                                 
                              
                           
                        

The objective (39) is to define the values of the consumer-specific revenues πi
                            as high as possible. Constraints (40) and (41) represent the linearisation of (38). Constraints (42) are identical to (35) from the model above, accounting for the total capacity of each product.

Model (39)–(44) can be solved by a mixed-integer programming solver. Alternatively, a dynamic programming approach is promising. Each consumer i corresponds to a stage of the dynamic program. The transition from stage i to 
                              
                                 i
                                 +
                                 1
                              
                            is given by determining the purchase of consumer i, i.e., selecting possible values of the variables xij
                            ≤ cj
                            for all j with cj
                            being the corresponding remaining capacity. The corresponding reward is calculated by (38). The state space is defined by the possible vectors of the remaining capacity cj
                            of all products after the assignment. Now, let 
                              
                                 
                                    π
                                    i
                                 
                                 
                                    (
                                    
                                       
                                          c
                                          1
                                       
                                       ,
                                       …
                                       ,
                                       
                                          c
                                          J
                                       
                                    
                                    )
                                 
                              
                            denote the cumulated revenue obtained from stage i onwards, given remaining capacity 
                              
                                 
                                    c
                                    1
                                 
                                 ,
                                 …
                                 ,
                                 
                                    c
                                    J
                                 
                              
                           . Next, the upper bound can be recursively computed by 
                              
                                 
                                    UB
                                    2
                                 
                                 =
                                 
                                    π
                                    1
                                 
                                 
                                    (
                                    
                                       
                                          c
                                          01
                                       
                                       ,
                                       …
                                       ,
                                       
                                          c
                                          
                                             0
                                             J
                                          
                                       
                                    
                                    )
                                 
                              
                            given the Bellman function

                              
                                 
                                    
                                       
                                          
                                             
                                                
                                                   π
                                                   i
                                                
                                                
                                                   (
                                                   
                                                      
                                                         c
                                                         1
                                                      
                                                      ,
                                                      …
                                                      ,
                                                      
                                                         c
                                                         J
                                                      
                                                   
                                                   )
                                                
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   max
                                                   
                                                      
                                                         x
                                                         
                                                            i
                                                            1
                                                         
                                                      
                                                      ≤
                                                      
                                                         c
                                                         1
                                                      
                                                      ,
                                                      …
                                                      ,
                                                      
                                                         x
                                                         
                                                            i
                                                            J
                                                         
                                                      
                                                      ≤
                                                      
                                                         c
                                                         J
                                                      
                                                   
                                                
                                                
                                                   {
                                                   min
                                                   
                                                      {
                                                      
                                                         
                                                            B
                                                            i
                                                         
                                                         ,
                                                         
                                                         
                                                            ∑
                                                            
                                                               j
                                                               =
                                                               1
                                                            
                                                            J
                                                         
                                                         
                                                            v
                                                            
                                                               i
                                                               j
                                                            
                                                            ′
                                                         
                                                         
                                                            x
                                                            
                                                               i
                                                               j
                                                            
                                                         
                                                      
                                                      }
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                          
                                             
                                                +
                                                
                                                
                                                   π
                                                   
                                                      i
                                                      +
                                                      1
                                                   
                                                
                                                
                                                   (
                                                   
                                                      
                                                         c
                                                         1
                                                      
                                                      −
                                                      
                                                         x
                                                         
                                                            i
                                                            1
                                                         
                                                      
                                                      ,
                                                      …
                                                      ,
                                                      
                                                         c
                                                         J
                                                      
                                                      −
                                                      
                                                         x
                                                         
                                                            i
                                                            J
                                                         
                                                      
                                                   
                                                   )
                                                
                                                }
                                             
                                          
                                       
                                    
                                 
                              
                           with the boundary constraint 
                              
                                 
                                    π
                                    
                                       I
                                       +
                                       1
                                    
                                 
                                 
                                    (
                                    
                                       ·
                                       ,
                                       …
                                       ,
                                       ·
                                    
                                    )
                                 
                                 =
                                 0
                              
                           .

Note that computing UB2 can be quite time-consuming, as can be concluded from the dynamic programming formulation, which obviously suffers from the curse of dimensionality resulting from the multidimensional state space. Therefore, it can be beneficial to consider further relaxations to obtain more tractable bounds that can, e.g., be computed more often throughout a branch-and-bound procedure. This is performed in the following two subsections.

Basically, the upper bound UB3 is the LP-relaxation of (39)–(44), i.e., xij
                            ∈ {0, 1} is replaced by 0 ≤ xij
                            ≤ 1 ∀ i, j in (43). Furthermore, some simplifications in the resulting model can be realised as follows: first note that in an optimal solution, considering a single consumer i, at least one of the constraint sets (40) and (41) is binding. We now distinguish two cases. First, if only (41) is binding, i.e., πi
                            < Bi
                           , or if both constraints are binding, i.e., 
                              
                                 
                                    B
                                    i
                                 
                                 =
                                 
                                    ∑
                                    
                                       j
                                       =
                                       1
                                    
                                    J
                                 
                                 
                                    v
                                    
                                       i
                                       j
                                    
                                    ′
                                 
                                 
                                    x
                                    
                                       i
                                       j
                                    
                                 
                              
                           , then the aggregated value of the allocations to consumer i is chosen such that 
                              
                                 
                                    π
                                    i
                                 
                                 =
                                 
                                    ∑
                                    
                                       j
                                       =
                                       1
                                    
                                    J
                                 
                                 
                                    v
                                    
                                       i
                                       j
                                    
                                    ′
                                 
                                 
                                    x
                                    
                                       i
                                       j
                                    
                                 
                              
                            holds. Second, if only (40) is binding, i.e., 
                              
                                 
                                    π
                                    i
                                 
                                 <
                                 
                                    ∑
                                    
                                       j
                                       =
                                       1
                                    
                                    J
                                 
                                 
                                    v
                                    
                                       i
                                       j
                                    
                                    ′
                                 
                                 
                                    x
                                    
                                       i
                                       j
                                    
                                 
                              
                           , then there exists another feasible solution with 
                              
                                 
                                    
                                       x
                                       ^
                                    
                                    
                                       i
                                       j
                                    
                                 
                                 ∈
                                 
                                    [
                                    
                                       0
                                       ,
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                    
                                    ]
                                 
                                 
                                 ∀
                                 
                                 j
                              
                            with the same objective function value such that 
                              
                                 
                                    π
                                    i
                                 
                                 =
                                 
                                    ∑
                                    
                                       j
                                       =
                                       1
                                    
                                    J
                                 
                                 
                                    v
                                    
                                       i
                                       j
                                    
                                    ′
                                 
                                 
                                    
                                       x
                                       ^
                                    
                                    
                                       i
                                       j
                                    
                                 
                              
                            holds. This follows from the fact that if the values xij
                            are feasible with respect to the capacity constraints (42), then by definition of 
                              
                                 
                                    x
                                    ^
                                 
                                 
                                    i
                                    j
                                 
                              
                           , the inequality 
                              
                                 
                                    ∑
                                    
                                       i
                                       =
                                       1
                                    
                                    I
                                 
                                 
                                    
                                       x
                                       ^
                                    
                                    
                                       i
                                       j
                                    
                                 
                                 ≤
                                 
                                    c
                                    
                                       0
                                       j
                                    
                                 
                              
                            holds as well. As such an optimal solution exists, we can conclude that πi
                            can be replaced ex ante by 
                              
                                 
                                    ∑
                                    
                                       j
                                       =
                                       1
                                    
                                    J
                                 
                                 
                                    v
                                    
                                       i
                                       j
                                    
                                    ′
                                 
                                 
                                    x
                                    
                                       i
                                       j
                                    
                                 
                              
                            in (39)–(41), which eliminates πi
                            from the model. Thus, UB3 can be reformulated as follows:

                              
                                 (45)
                                 
                                    
                                       
                                          UB
                                          3
                                          
                                       
                                       =
                                       Max
                                       
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          v
                                          
                                             i
                                             j
                                          
                                          ′
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (46)
                                 
                                    
                                       s
                                       
                                          .
                                          t
                                       
                                       .
                                       
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          v
                                          
                                             i
                                             j
                                          
                                          ′
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          B
                                          i
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                    
                                 
                              
                           
                           
                              
                                 (47)
                                 
                                    
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          c
                                          
                                             0
                                             j
                                          
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       j
                                    
                                 
                              
                           
                           
                              
                                 (48)
                                 
                                    
                                       0
                                       ≤
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       1
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ,
                                       j
                                    
                                 
                              
                           Model (45)–(48) can be solved by a linear programming solver. Note that it is not possible to re-obtain the model formulation (39)–(44) by simply re-specifying the decision variables xij
                            as binary in (45)–(48) and thus obtaining a potentially easier model of UB2. The resulting model would no longer represent an upper bound of the total revenue due to the fixed weights 
                              
                                 v
                                 
                                    i
                                    j
                                 
                                 ′
                              
                            in (47) and (48). In a binary formulation, these weights would inhibit the vendor from selling the product j to consumer i at a price lower than 
                              
                                 v
                                 
                                    i
                                    j
                                 
                                 ′
                              
                           . However, choosing such a lower price point for a product j might result in a higher consumer-specific total revenue because additional products might be sold, thereby exploiting the consumer's budget to a greater extent.

The upper bound UB4 is also based on (39)–(44) and obtained from applying a surrogate relaxation regarding the capacity constraints (42). More precisely, we replace these constraints by their sum such that the resulting model only contains the following aggregated capacity constraint, which no longer distinguishes between products:

                              
                                 (49)
                                 
                                    
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          c
                                          
                                             0
                                             j
                                          
                                       
                                    
                                 
                              
                           The resulting model – consisting of (39)–(41), (43)–(44), and (49) – can be further simplified based upon the following proposition, which is intuitive and can easily be shown by contradiction (the proof is omitted):


                           Proposition: For all 
                              
                                 i
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 I
                                 ;
                                 j
                                 ,
                                 
                                    j
                                    ′
                                 
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 J
                                 ,
                                 
                                 j
                                 ≠
                                 
                                    j
                                    ′
                                 
                              
                           , there is an optimal solution with:

                              
                                 
                                    
                                       
                                          v
                                          
                                             i
                                             j
                                          
                                          ′
                                       
                                       >
                                       
                                          v
                                          
                                             i
                                             
                                                j
                                                ′
                                             
                                          
                                          ′
                                       
                                       
                                       ⇒
                                       
                                          (
                                          
                                             
                                                x
                                                
                                                   i
                                                   
                                                      j
                                                      ′
                                                   
                                                
                                             
                                             =
                                             1
                                             
                                             ⇒
                                             
                                             
                                                x
                                                
                                                   i
                                                   j
                                                
                                             
                                             =
                                             1
                                          
                                          )
                                       
                                    
                                 
                              
                           
                        

From the proposition, it follows that products that are sold to a specific consumer i can always be selected according to monotonically decreasing (modified) reservation prices 
                              
                                 v
                                 
                                    i
                                    j
                                 
                                 ′
                              
                            without interruption. Therefore, we can ex ante further transform the (modified) reservation prices 
                              
                                 v
                                 
                                    i
                                    j
                                 
                                 ′
                              
                           , i.e., the maximum obtainable revenue from selling product j to consumer i, such that they implicitly incorporate the limitations resulting from the budget constraints (40). To formally specify these transformed reservation prices, we first define a priority list sorting the products for each consumer i according to the original values 
                              
                                 v
                                 
                                    i
                                    j
                                 
                                 ′
                              
                           : 
                              
                                 〈
                                 
                                    t
                                    
                                       i
                                       1
                                    
                                 
                                 ,
                                 …
                                 ,
                                 
                                    t
                                    
                                       i
                                       k
                                    
                                 
                                 ,
                                 …
                                 ,
                                 
                                    t
                                    
                                       i
                                       J
                                    
                                 
                                 〉
                              
                            with 
                              
                                 
                                    t
                                    
                                       i
                                       k
                                    
                                 
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 J
                              
                            for 
                              
                                 k
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 J
                              
                           , tik
                            ≠ til
                            for 
                              
                                 k
                                 ,
                                 l
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 J
                              
                            and k ≠ l, and 
                              
                                 
                                    v
                                    
                                       i
                                       
                                          t
                                          
                                             i
                                             k
                                          
                                       
                                    
                                    ′
                                 
                                 ≥
                                 
                                    v
                                    
                                       i
                                       
                                          t
                                          
                                             i
                                             ,
                                             k
                                             +
                                             1
                                          
                                       
                                    
                                    ′
                                 
                              
                            for 
                              
                                 k
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 J
                                 −
                                 1
                              
                           .

Furthermore, we define 
                              
                                 
                                    
                                       j
                                       ¯
                                    
                                    i
                                 
                                 :
                                 =
                                 
                                    max
                                    
                                       l
                                       ∈
                                       {
                                       
                                          1
                                          ,
                                          …
                                          ,
                                          J
                                       
                                       }
                                    
                                 
                                 
                                    {
                                    
                                       
                                          ∑
                                          
                                             k
                                             =
                                             1
                                          
                                          l
                                       
                                       
                                          
                                             
                                                v
                                                ′
                                             
                                          
                                          
                                             i
                                             
                                                t
                                                
                                                   i
                                                   k
                                                
                                             
                                          
                                       
                                       ≤
                                       
                                          B
                                          i
                                       
                                    
                                    }
                                 
                                 +
                                 1
                              
                           . Now, the transformed reservation prices aij
                            can be calculated as follows:

                              
                                 (50)
                                 
                                    
                                       
                                          a
                                          
                                             i
                                             
                                                t
                                                
                                                   i
                                                   k
                                                
                                             
                                          
                                       
                                       =
                                       
                                          v
                                          
                                             i
                                             
                                                t
                                                
                                                   i
                                                   k
                                                
                                             
                                          
                                          ′
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ;
                                       k
                                       =
                                       1
                                       ,
                                       …
                                       ,
                                       
                                          
                                             j
                                             ¯
                                          
                                          i
                                       
                                       −
                                       1
                                    
                                 
                              
                           
                           
                              
                                 (51)
                                 
                                    
                                       
                                          a
                                          
                                             i
                                             
                                                t
                                                
                                                   i
                                                   k
                                                
                                             
                                          
                                       
                                       =
                                       
                                          B
                                          i
                                       
                                       −
                                       
                                          ∑
                                          
                                             l
                                             =
                                             1
                                          
                                          
                                             k
                                             −
                                             1
                                          
                                       
                                       
                                          v
                                          
                                             i
                                             
                                                t
                                                
                                                   i
                                                   l
                                                
                                             
                                          
                                          ′
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ;
                                       k
                                       =
                                       
                                          
                                             j
                                             ¯
                                          
                                          i
                                       
                                    
                                 
                              
                           
                           
                              
                                 (52)
                                 
                                    
                                       
                                          a
                                          
                                             i
                                             
                                                t
                                                
                                                   i
                                                   k
                                                
                                             
                                          
                                       
                                       =
                                       0
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ;
                                       k
                                       =
                                       
                                          
                                             j
                                             ¯
                                          
                                          i
                                       
                                       +
                                       1
                                       ,
                                       …
                                       ,
                                       J
                                    
                                 
                              
                           The transformation can be explained as follows: As long as the budget is sufficient – i.e., when selling up to the first 
                              
                                 
                                    
                                       j
                                       ¯
                                    
                                    i
                                 
                                 −
                                 1
                              
                            products of the priority list – the revenues obtained correspond to the original modified reservation prices 
                              
                                 v
                                 
                                    i
                                    
                                       t
                                       
                                          i
                                          k
                                       
                                    
                                 
                                 ′
                              
                            (cf. (50)). Selling product 
                              
                                 
                                    j
                                    ¯
                                 
                                 i
                              
                            from the priority list does not correspond to the full (modified) reservation price 
                              
                                 v
                                 
                                    i
                                    
                                       t
                                       
                                          i
                                          
                                             
                                                j
                                                ¯
                                             
                                             i
                                          
                                       
                                    
                                 
                              
                           , but only to the fraction of the budget 
                              
                                 
                                    B
                                    i
                                 
                                 −
                                 
                                    ∑
                                    
                                       l
                                       =
                                       1
                                    
                                    
                                       
                                          
                                             j
                                             ¯
                                          
                                          i
                                       
                                       −
                                       1
                                    
                                 
                                 
                                    v
                                    
                                       i
                                       
                                          t
                                          
                                             i
                                             l
                                          
                                       
                                    
                                    ′
                                 
                              
                            remaining after selling the first 
                              
                                 
                                    
                                       j
                                       ¯
                                    
                                    i
                                 
                                 −
                                 1
                              
                            products (cf. (51)). Finally, selling products of even lower priority (
                              
                                 k
                                 =
                                 
                                    
                                       j
                                       ¯
                                    
                                    i
                                 
                                 
                                    +
                                    1
                                    ,
                                    …
                                    ,
                                    J
                                    )
                                 
                              
                            would result in a revenue of 0 due to the budget limitation (cf. (52)). Overall, as the transformation fully comprises the limitations resulting from the consumers’ budgets, we can replace 
                              
                                 v
                                 
                                    i
                                    j
                                 
                                 ′
                              
                            with aij
                            in the model, omit constraints (40) – which also implies 
                              
                                 
                                    π
                                    i
                                 
                                 =
                                 
                                    ∑
                                    
                                       j
                                       =
                                       1
                                    
                                    J
                                 
                                 
                                    a
                                    
                                       i
                                       j
                                    
                                 
                                 
                                    x
                                    
                                       i
                                       j
                                    
                                 
                              
                            such that πi
                            can be substituted as well – and obtain the following simplified binary program:

                              
                                 (53)
                                 
                                    
                                       
                                          UB
                                          4
                                       
                                       =
                                       Max
                                       
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          a
                                          
                                             i
                                             j
                                          
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (54)
                                 
                                    
                                       s
                                       
                                          .
                                          t
                                       
                                       .
                                       
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          I
                                       
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ≤
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          c
                                          
                                             0
                                             j
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (55)
                                 
                                    
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                       ∈
                                       
                                          {
                                          
                                             0
                                             ,
                                             
                                             1
                                          
                                          }
                                       
                                       
                                       
                                          for
                                          
                                          all
                                       
                                       
                                       i
                                       ,
                                       j
                                    
                                 
                              
                           Note that (53)–(55) is a special knapsack problem with all weights in the knapsack constraint (54) being 1, such that an optimal solution can easily be found without relying on dynamic programming or integer programming solvers. More precisely – technically analogously to the algorithm described in Section 2.2.1 for greedy consumer behaviour – the values xij
                            can simply be set to 1 in decreasing order of aij
                            over all consumers i and products j while the capacity is sufficient.

The branching scheme we propose is based on that presented by Burkart et al. (2012). More precisely, the enumeration tree is constructed according to a depth-first search, with the products being considered in the sequence 
                           
                              j
                              =
                              1
                              ,
                              …
                              ,
                              J
                           
                        , each corresponding to a level of the enumeration tree. Let LB denote the objective function value of the incumbent and let UB
                           jn
                         denote the local upper bound for a node with price index n on level j within the enumeration tree. Then, the latter can be fathomed in the case that UB
                           jn
                         ≤ LB. Otherwise, it is branched according to the 
                           
                              N
                              
                                 j
                                 +
                                 1
                              
                           
                         price points 
                           
                              p
                              
                                 j
                                 +
                                 1
                                 ,
                                 n
                              
                           
                         of the next level 
                           
                              j
                              +
                              1
                           
                         in a depth-first manner.

With respect to the different bound arguments presented in Section 4.1, the corresponding local upper bound for the price index n on level j can be derived as follows, with n(k) denoting the branching decisions in the preceding levels 
                           
                              k
                              =
                              1
                              ,
                              …
                              ,
                              j
                              −
                              1
                           
                        :

                           
                              •
                              UB1: in line with Burkart et al. (2012), the local upper bounds are straightforwardly derived by 
                                    
                                       UB
                                       
                                          1
                                          
                                             j
                                             n
                                          
                                       
                                       =
                                       
                                          ∑
                                          
                                             k
                                             =
                                             1
                                          
                                          
                                             j
                                             −
                                             1
                                          
                                       
                                       a
                                       
                                          r
                                          
                                             k
                                             ,
                                             n
                                             (
                                             k
                                             )
                                          
                                       
                                       +
                                       a
                                       
                                          r
                                          
                                             j
                                             n
                                          
                                       
                                       +
                                       
                                          ∑
                                          
                                             k
                                             =
                                             j
                                             +
                                             1
                                          
                                          J
                                       
                                       
                                          max
                                          
                                             m
                                             ∈
                                             {
                                             
                                                1
                                                ,
                                                …
                                                ,
                                                
                                                   N
                                                   k
                                                
                                             
                                             }
                                          
                                       
                                       
                                          {
                                          
                                             a
                                             
                                                r
                                                
                                                   k
                                                   m
                                                
                                             
                                          
                                          }
                                       
                                    
                                 , taking into account that the achievable revenues for the products 
                                    
                                       1
                                       ,
                                       …
                                       ,
                                       j
                                    
                                  are determined by the selected price points on the upper levels of the tree (first two terms), while for the following levels, the optimal price points are chosen as in UB1 (last term). Note that the product-specific achievable revenues arjn
                                  for all price indices n only have to be calculated once in the root node for all products j and can then be reused, such that the computation of the corresponding local bounds is very efficient. Given this fact, the branching of a node on level 
                                    
                                       j
                                       −
                                       1
                                    
                                  over the price indices n can easily be performed according to monotonically decreasing values UB1
                                    jn
                                  in the spirit of a ‘local’ maximum upper bound search strategy, such that we have a depth-first search with complete branching (cf., e.g., Klein, 2000, chap. 6.1.2). As a consequence, as soon as a node of price index n with UB1
                                    jn
                                  ≤ LB is fathomed, all the remaining price indices on the current level j can be fathomed as well. This drastically increases the performance.

UB2–UB4: the new local upper bounds UB2
                                    jn
                                 , UB3
                                    jn
                                 , and UB4
                                    jn
                                  are derived by solving the corresponding mathematical model from Section 4.1 using the following adjustment of the modified reservation prices:

                                    
                                       (56)
                                       
                                          
                                             
                                                v
                                                
                                                   i
                                                   k
                                                
                                                ′
                                             
                                             :
                                             =
                                             
                                                {
                                                
                                                   
                                                      
                                                         
                                                            p
                                                            
                                                               k
                                                               ,
                                                               n
                                                               
                                                                  (
                                                                  k
                                                                  )
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                            
                                                               
                                                                  if
                                                                  
                                                               
                                                               
                                                               
                                                                  v
                                                                  
                                                                     i
                                                                     k
                                                                  
                                                                  ′
                                                               
                                                               ≥
                                                               
                                                                  p
                                                                  
                                                                     k
                                                                     ,
                                                                     n
                                                                     
                                                                        (
                                                                        k
                                                                        )
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                      
                                                      
                                                         
                                                            
                                                            otherwise
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                             
                                                for
                                                
                                                all
                                             
                                             
                                             i
                                             ;
                                             k
                                             =
                                             1
                                             ,
                                             …
                                             ,
                                             j
                                          
                                       
                                    
                                 
                              

This takes into account that for the products 
                                    
                                       k
                                       =
                                       1
                                       ,
                                       …
                                       ,
                                       j
                                    
                                 , the maximum revenue, which can be extracted from a consumer i, is limited by the fixed price p
                                 
                                    k, n(k) of level k and that those products cannot be sold to consumers with lower valuations.

In this section, we present the results of a comprehensive experimental study. In Section 5.1, we describe the experimental design. In Section 5.2, we investigate in detail various specifications of our branch-and-bound procedure. For this purpose, we analyse the performance of the upper bound arguments developed in Section 4.1 and compare the performance of the branch-and-bound procedure with that of CPLEX.

@&#EXPERIMENTAL DESIGN@&#

To gain a comprehensive overview and to address a large variety of possible real-world cases, we systematically analyse a multitude of different problem classes. Each problem class C is characterised by distinctive deterministic parameters, such as the number of offered products J, their initial capacity c
                           0j
                           , the number price points N, the number of consumers I, their demand pattern (the distribution of arrival and reservation prices), and the tightness of their budgets. In total, we generate 
                              
                                 
                                    ∏
                                    
                                       i
                                       =
                                       1
                                    
                                    5
                                 
                                 
                                    |
                                    
                                       C
                                       i
                                    
                                    |
                                 
                                 =
                                 243
                              
                            problem classes. The parameters and the generation process are described in detail in Appendix A.1.

For each problem class, we generate scenarios by drawing random reservation prices vij
                            for each consumer i and each product j according to the demand pattern η specified by the problem class, and by drawing each consumer's specific budget limitation from a range (B
                           LB, B
                           UB) specified by the problem class. To solve each of the resulting scenarios, we define a set of N predefined price points with 
                              
                                 N
                                 =
                                 
                                    N
                                    1
                                 
                                 =
                                 ⋯
                                 =
                                 
                                    N
                                    J
                                 
                              
                            being specified by the problem class. More precisely, based on the interval of reservation prices, equidistant price points 
                              
                                 
                                    p
                                    
                                       j
                                       n
                                    
                                 
                                 =
                                 
                                    100
                                    N
                                 
                                 ×
                                 n
                                 
                                 ∀
                                 
                                 j
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 J
                                 ;
                                 n
                                 =
                                 1
                                 ,
                                 …
                                 ,
                                 N
                              
                            are defined. In total, the experimental tests are based on 
                              
                                 
                                    Q
                                    
                                       t
                                       o
                                       t
                                       a
                                       l
                                    
                                 
                                 =
                                 2430
                              
                            scenarios in which product prices can be optimised subject to alternative assumptions of the consumer purchase behaviour as described in Section 2. The experimental study is performed on a desktop PC with an Intel Core i7 CPU at 2.80 gigahertz, 8 gigabytes of RAM, and Windows 7 Professional. The algorithms are implemented in VB.NET using the .NET Framework 4.0.

To evaluate the test results, we introduce the following generic measures (see Appendix A.2 for details):

                              
                                 •
                                 
                                    
                                       
                                          a
                                          v
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                       
                                    : average relative deviation of a specific performance outcome (type) obtained by applying a procedure A from that of a procedure B, both being performed on the same scenarios Q⊆Qtotal
                                    . Note that in what follows, the set of considered scenarios Q will differ depending on the specific analysis with the specific selection of scenarios being made sure from the context, which eases the notation of the measures.


                                    
                                       
                                          m
                                          a
                                          x
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                          
                                          /
                                          
                                          m
                                          i
                                          n
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                       
                                    : the maximum and the minimum relative deviations of a specific performance outcome (type) obtained by A from that of B, respectively.

Besides these generic performance measures, which are used for different investigations, we also make use of the following more specific measures:

                              
                                 •
                                 
                                    A → B: relative number of scenarios with respect to |Q| in which a bound A is tighter than a bound B, i.e., in which A dominates B.

av.cpuA: average runtime of a procedure A across |Q| scenarios (quoted in seconds).

min.cpuA / max.cpuA: the minimum and maximum runtimes of a procedure A, respectively, across |Q| scenarios.


                                    av.pj
                                    : the average optimal price for product 
                                       
                                          j
                                          ∈
                                          {
                                          
                                             1
                                             ,
                                             …
                                             ,
                                             J
                                          
                                          }
                                       
                                     across |Q| scenarios, 
                                       
                                          av
                                          .
                                          
                                             p
                                             j
                                          
                                          :
                                          =
                                          
                                             1
                                             
                                                |
                                                Q
                                                |
                                             
                                          
                                          
                                             ∑
                                             
                                                q
                                                ∈
                                                Q
                                             
                                          
                                          
                                             p
                                             j
                                             
                                                (
                                                q
                                                )
                                             
                                          
                                       
                                     with 
                                       
                                          p
                                          j
                                          
                                             (
                                             q
                                             )
                                          
                                       
                                     representing the price of product j in scenario q.

As a preliminary investigation, we analyse the quality and the performance of the bound arguments presented in Section 4.1 to decide which upper bounds to integrate in the branch-and-bound procedure. Therefore, we compute each upper bound UB1, UB2, UB3, and UB4 once in the root node of the enumeration tree for each of the 2430 scenarios.


                        Table 4
                         depicts the corresponding values of min.cpuUB, av.cpuUB, max.cpuUB, and the aggregated runtime for each bound argument UB (given by the table columns; UB1+4 will be defined later on). Furthermore, the values of 
                           
                              min
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       ,
                                       opt
                                    
                                 
                                 rev
                              
                           
                        , 
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       ,
                                       opt
                                    
                                 
                                 rev
                              
                           
                        , and 
                           
                              max
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       ,
                                       opt
                                    
                                 
                                 rev
                              
                           
                         are given, relating the value of the respective upper bounds UB to the obtainable optimal revenue (‘rev’), which we denote by ‘opt’.

Looking at the table, it is obvious that computing UB1 takes almost no runtime; however, the average relative deviation of 58.6 percent is quite substantial. In contrast, 
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       2
                                       ,
                                       opt
                                    
                                 
                                 rev
                              
                           
                        , 
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       3
                                       ,
                                       opt
                                    
                                 
                                 rev
                              
                           
                        , and 
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       4
                                       ,
                                       opt
                                    
                                 
                                 rev
                              
                           
                        , referring to the new budget-based bounds, are only approximately 19 percent and, thus, these bounds are much tighter. Here, the runtimes clearly deviate, with UB4 having the shortest times due to its efficient solution, as described in Section 4.1.4.

To derive more detailed results, we compare the bounds pairwise, as illustrated in Fig. 1
                        . Here, the caption of an arrow from a node A to a node B depicts the relative number of scenarios in which bound A is tighter than bound B, i.e., A → B, followed by the average relative deviation of B from A for these scenarios, i.e., 
                           
                              av
                              .
                              
                                 dev
                                 
                                    B
                                    ,
                                    A
                                 
                                 rev
                              
                           
                        . By construction, UB3 and UB4 yield values that are greater than or equal to the values of UB2, as they are both relaxations of the latter. However, it turns out that the results of UB4 are almost as good as UB2. In 93.8 percent of all scenarios, the bounds yield identical values, and for the rest, the average relative deviation is only 0.03 percent. Considering the low runtime, we conclude that the bound argument UB4 is preferable over UB2 and UB3. In many cases, UB4 is also better than UB1 in the root node. Yet, there is no clear dominance. Bearing in mind the preferable fathoming characteristic of UB1 as described in Section 4.2, we continue with the two arguments UB1 and UB4 in the following. Additionally, we evaluate a combination UB1+4 of these two bounds, which, for the root node, simply is the minimum of the two values of UB1 and UB4. The performance of UB1+4 is also given in the last column of Table 4, yielding an improved 
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       1
                                       +
                                       4
                                       ,
                                       opt
                                    
                                 
                                 rev
                              
                           
                         of 17.1 percent.

Looking closely at the performances of UB1 and UB4, some general observations can be made. Table 5
                         depicts the relative number of scenarios, in which one of these two bounds dominates the other as a function of the number of products J, the identifier of the demand pattern η, and the relative number of consumers to capacity I/co
                        . The tests reveal that the scarcer the initial capacity is (i.e., the higher I/co
                        ), the better the bound UB1 performs. This is intuitive, as with a very tight capacity, the budget constraints (which are not considered by UB1) tend to no longer be the bottleneck during the selling process. Furthermore, the higher the value of η is, i.e., the more heterogeneous the consumers are with respect to their valuations (see Appendix A.1), the better values UB4 yields. This is especially true if capacity is scarce (cf. the last two columns of Table 5). A detailed analysis shows that this behaviour is also quite comprehensible because with heterogeneous consumers, UB1 incorrectly assigns too many products at high prices to consumers with higher valuations, while their budget limitations actually do not allow such a purchase.

Based on the results of Section 5.2, we now solve all scenarios with the branch-and-bound procedure incorporating the upper bounds UB1 and UB4, assuming optimal consumer behaviour as defined in Section 2.1. We also consider the combined bound UB1+4, which is adequately integrated into the branch-and-bound procedure as follows: To exploit the preferable fathoming characteristic of UB1 described before, we rely on the branching logic of UB1, while for the calculation of the local upper bounds, UB4 is additionally considered. Particularly, whenever UB1
                           jn
                         > LB holds in a node with price index n on level j, we additionally compute UB4 and utilise the better value.


                        Table 6
                         summarises the results. In the table rows, the figures are grouped for a different number of products (
                           
                              J
                              =
                              2
                              ,
                              
                              4
                              ,
                              
                              6
                           
                        ), and, for each of them, according to the different levels of the tightness of the consumers’ budgets (see Appendix A.1), ranging from 
                           
                              
                                 (
                                 
                                    
                                       B
                                       LB
                                    
                                    ,
                                    
                                    
                                       B
                                       UB
                                    
                                 
                                 )
                              
                              =
                              
                                 (
                                 
                                    10
                                    ,
                                    
                                    30
                                 
                                 )
                              
                           
                         (tight) to 
                           
                              
                                 (
                                 
                                    
                                       B
                                       LB
                                    
                                    ,
                                    
                                    
                                       B
                                       UB
                                    
                                 
                                 )
                              
                              =
                              
                                 (
                                 
                                    30
                                    ,
                                    70
                                 
                                 )
                              
                           
                         (not tight). Each group covers 27 problem classes and 
                           
                              Q
                              =
                              270
                           
                         scenarios in total, according to the definitions in Section 5.1.

Columns 3–6 of the table illustrate the average relative deviations of the number of nodes (
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       ,
                                       CE
                                    
                                 
                                 nodes
                              
                           
                        ) and the number of evaluations of a price vector in the leaf nodes (
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       ,
                                       CE
                                    
                                 
                                 eval
                              
                           
                        ) related to a simple complete enumeration (r.t. ‘CE’; in the complete enumeration, the enumeration tree results from branching over the prices as well, while bounding is omitted) for both specifications of the branch-and-bound procedure with regard to the applied upper bound UB – one relying on UB1 and one on UB4. The results show that while fewer nodes are needed on average using UB1, fewer evaluations are necessary in most cases when UB4 is incorporated. Thus, UB4 often takes effect in the leaf nodes of the enumeration tree. Furthermore, it is evident that the problem becomes substantially more difficult to solve with increasing tightness of the consumers’ budgets. For example, solving scenarios with 
                           
                              J
                              =
                              6
                           
                         by using UB1, an average of 89.5 percent of all nodes do not need to be evaluated if 
                           
                              
                                 B
                                 LB
                              
                              =
                              30
                           
                        , whereas the corresponding value drops to 42.2 percent if 
                           
                              
                                 B
                                 LB
                              
                              =
                              10
                           
                        .

Columns 7–9 of the table refer to the combined bound UB1+4, allowing for further improvements compared to UB1. As one can see, on average, up to 19.9 percent of the number of nodes and up to 60.8 percent of the number of evaluations can additionally be saved. This is due to a much higher number of nodes that can additionally be fathomed, which is also depicted in Table 6 by 
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       UB
                                       1
                                       +
                                       4
                                       ,
                                       UB
                                       1
                                    
                                 
                                 fath
                              
                           
                        . Obviously, the advantage of applying the combined bound UB1+4 and, hence, of additionally considering the consumers’ budgets, increases strongly with increasing tightness of the budgets, which follows intuition. Additional analysis (not depicted in the table) shows that on average, between 73.9 percent and 92.2 percent of the evaluated nodes the bound argument UB4 is calculated in addition to UB1, whereas UB4 yields a tighter upper bound than UB1 in between 56.4 percent and 79.1 percent of the cases.

To evaluate the performance of our branch-and-bound procedure in comparison with commercial standard software, we also implemented the model formulations presented in Section 3 in IBM ILOG CPLEX Optimization Studio 12.5 and solved them with the integrated CPLEX solver, implementing a depth-first search in batch mode. The results are depicted in Table 7
                         assuming optimal consumer behaviour.

For problem classes with 
                           
                              J
                              =
                              2
                           
                        , all scenarios can be solved with CPLEX; however, the runtimes, which take up to 15.7 seconds on average, already clearly deviate from our own implementation, which is almost instantaneous. For problem classes with J ≥ 4, while the branch-and-bound procedure was able to solve all scenarios, only a subset of these scenarios could be solved with CPLEX. Therefore, in the table, we base all calculations of runtime measures on only the scenarios that could be solved with CPLEX (cf. the indication of the cardinality of Q in the fourth column). Although for J ≥ 4, the runtimes of the branch-and-bound procedure on average do not exceed 4 minutes using UB1 and stay below 4 seconds using UB4, we had to cancel the solution process of CPLEX in certain scenarios, such as in problem classes with 
                           
                              J
                              =
                              6
                           
                        , 
                           
                              N
                              =
                              20
                           
                        , and 
                           
                              
                                 (
                                 
                                    
                                       B
                                       LB
                                    
                                    ,
                                    
                                    
                                       B
                                       UB
                                    
                                 
                                 )
                              
                              =
                              
                                 (
                                 
                                    30
                                    ,
                                    
                                    70
                                 
                                 )
                              
                           
                        , after more than 33 hours without a solution. Additionally, in many cases with J ≥ 6, CPLEX stops on its own, as it runs out of memory. In general, the results reveal that the problem becomes more difficult to solve for tighter consumer budgets. Furthermore, the runtimes increase rapidly with an increase in the number of price points N and the number of products J. Overall, this analysis clearly demonstrates that the standard solver is not a reasonable alternative to the proposed customised branch-and-bound procedure for solving the product line pricing problem with budget-constrained consumers.

In this section, we derive managerial insights by analysing price patterns and evaluating the impact of budget constraints and the consumer purchase behaviour on the seller's revenue. The analysis is based on the scenarios as well as the performance measures defined in Section 5.1.

First, we have a closer look at the optimal price patterns resulting from performing product line pricing in the presence of budget-constrained consumers. The results are depicted in Table 8
                        . Similar to the investigation in Section 5, we state the results for different levels of capacity scarcity (cf. the main columns). Capacity scarcity is expressed by the ratio between the number of consumers I and the initial capacity c
                        0, ranging from 
                           
                              I
                              /
                              
                                 c
                                 0
                              
                              =
                              0.5
                           
                         (not scarce) up to 
                           
                              I
                              /
                              
                                 c
                                 0
                              
                              =
                              J
                           
                         (scarce). In the table rows, we group the results for a different number of offered products (
                           
                              J
                              =
                              2
                              ,
                              
                              4
                              ,
                              
                              6
                           
                        ), and, for each of them, according to different levels of the tightness of budgets, ranging from 
                           
                              
                                 (
                                 
                                    
                                       B
                                       LB
                                    
                                    ,
                                    
                                    
                                       B
                                       UB
                                    
                                 
                                 )
                              
                              =
                              
                                 (
                                 
                                    10
                                    ,
                                    
                                    30
                                 
                                 )
                              
                           
                         (tight) to 
                           
                              
                                 (
                                 
                                    
                                       B
                                       LB
                                    
                                    ,
                                    
                                    
                                       B
                                       UB
                                    
                                 
                                 )
                              
                              =
                              
                                 (
                                 
                                    30
                                    ,
                                    70
                                 
                                 )
                              
                           
                         (not tight). Given this scheme, which is used for all tables in this section, Table 8 exemplarily presents the average values of the optimal prices av.pj
                         of the first two products of the line (i.e., 
                           
                              j
                              =
                              1
                           
                         and 
                           
                              j
                              =
                              2
                           
                        ), calculated across 
                           
                              |
                              Q
                              |
                              =
                              270
                           
                         scenarios.

The following insights can be obtained: First, the results show that the stronger the consumers’ budget limitation are (lower values of B
                        LB and B
                        UB, ceteris paribus), the more prices have to be chosen on a lower level to maximise revenues. This is intuitive, because in addition to the consumers’ valuations, the budget is a second source of restriction on the consumers’ side that has to be considered by a seller when setting prices. Or, stated differently, a pure orientation on the willingness-to-pay, like in the traditional product line pricing setting without budgets, would be misleading in the case of tight budget constraints. Second, the results demonstrate that prices can be set higher when the availability of the products is lower, i.e., when capacity is scarcer (higher values of I/c
                        0, ceteris paribus). This is also intuitive because the more consumers arrive during the selling period relative to capacity, the more consumers can be expected to have valuations that exceed a certain price point. This, in turn, allows for charging higher prices.

In the context of product line pricing under the presence of budget-constrained consumers, the most important managerial question a seller might pose is how much revenue is lost if the seller optimises product prices in the ‘traditional way’, i.e., without considering the consumers’ budget limitations. Or, stated differently, whether it is worth implementing the new models and solution approaches proposed in this paper. To answer this question, we compared the optimal revenues, which are obtained using our branch-and-bound procedure, with the revenues that are realised with optimised prices on the basis of incorrectly assuming unlimited budgets of the consumers. For the latter case, we optimised product prices in all scenarios by simply setting the budget Bi
                         of all consumers 
                           
                              i
                              =
                              1
                              ,
                              …
                              ,
                              I
                           
                         to a large number, i.e., we set 
                           
                              
                                 B
                                 i
                              
                              =
                              100
                              ·
                              J
                           
                         with 
                           
                              
                                 B
                                 i
                              
                              ≥
                              
                                 ∑
                                 
                                    j
                                    =
                                    1
                                 
                                 J
                              
                              
                                 v
                                 
                                    i
                                    j
                                 
                              
                           
                        . This implies that the budget constraints are no longer binding.

The results are depicted in Table 9
                        
                        . Here, the columns ‘
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       nobudX
                                       ,
                                       bud
                                    
                                 
                                 rev
                              
                           
                        ’ state the average losses, i.e., the average relative deviation of the revenue obtained with optimised prices when incorrectly assuming that the consumers have an unlimited budget at their disposal (‘nobudX’) from the revenue being optimised anticipating the budget constraints correctly (‘bud’) across 
                           
                              |
                              Q
                              |
                              =
                              270
                           
                         scenarios in each problem class.

The results show that the tighter the consumers’ budgets are, i.e., the lower the values of B
                        LB and B
                        UB are, ceteris paribus, the higher the losses are. This confirms intuition, because the tighter the budgets are, the larger the number of customers is for which the corresponding constraint becomes relevant when choosing from the product line. Consequently, the more consumers are incorrectly assumed to act as if they had no budget limitations, the more the suboptimal prices from the traditional models of product line pricing deviate from the optimal solution, leading to suboptimal achievable overall revenues. Note that the magnitude of the losses in revenues arising from an incorrect assumption about budgets is quite impressive ranging between 7.4 percent and 31.7 percent.

For the sake of completeness, we also evaluated the opposite case, i.e., the respective losses when incorrectly assuming budget constraints while in fact the consumers have an infinite budget (cf. the columns ‘
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       budX
                                       ,
                                       nobud
                                    
                                 
                                 rev
                              
                           
                        ’, which are defined analogously to 
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       nobudX
                                       ,
                                       bud
                                    
                                 
                                 rev
                              
                           
                        ). In this case, not only the effort in price optimisation considering budget limitations is futile, but there are also significant losses in revenues of up to 45.3 percent.

Given the different types of consumer behaviour discussed in Sections 2 and 3, the question arises of what implications the related models have on the seller's revenue. Specifically, it is interesting to determine to what extent a loss in revenues occurs if prices are optimised on the basis of an incorrectly anticipated consumer purchase behaviour.


                        Table 10 illustrates the results of the corresponding analysis. The columns ‘
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       heurX
                                       ,
                                       opt
                                    
                                 
                                 rev
                              
                           
                        ’ show the average revenue losses resulting from wrongly assuming that consumers behave heuristically according to the look-ahead type (cf. Section 2.2.2) and applying the resulting prices while consumers actually behave optimally (‘heurX’). This is compared to applying the prices that are optimised using the correct model of purchase behaviour, i.e., the model anticipating optimal consumer behaviour (‘opt’). Interestingly, the losses are quite small in general. Vice versa, the columns ‘
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       optX
                                       ,
                                       heur
                                    
                                 
                                 rev
                              
                           
                        ’ (which is defined analogously) show the average losses if the consumers act heuristically (‘heur’) but prices are optimised assuming rational consumers (‘optX’). Here, the losses tend to be a bit higher but are still quite small in general.

The results also demonstrate that the tighter the consumers’ budgets are, i.e., the lower the values of B
                        LB and B
                        UB, the higher the respective loss in revenues and, thus, the more important the anticipation of the correct purchase behaviour is. This is intuitive, because if budgets are relatively high, there are consumers for whom the budget is not restrictive such that there is no difference between the heuristic and the optimal consumer behaviour model.

Furthermore, the results also show that the losses take on the largest values if capacity is moderately scarce. This can be explained as follows: When capacity is not scarce, i.e., 
                           
                              I
                              /
                              
                                 c
                                 0
                              
                              =
                              0.5
                           
                        , prices tend to be low in general (cf. Section 6.1). With lower prices, there will be a larger number of consumers for whom the budget no longer tends to be binding, which again means that there will be no difference between the different models of consumer behaviour. Vice versa, if capacity is scarce, i.e., 
                           
                              I
                              /
                              
                                 c
                                 0
                              
                              =
                              J
                           
                        , prices tend to be high (cf. Section 6.1). If prices are considerable high and thus, budgets are pretty tight, the combinatorial character of each consumer's remaining selection problem is very much reduced, as the number of potential product bundles that fit in her budget becomes small. Consequently, the solution of the heuristic more often corresponds to the optimal solution.

Given the observation from above that losses resulting from assuming the wrong model of purchase behaviour tend to be small, it is an interesting follow-up question how the models differ in terms of computational performance.


                        Table 11
                         summarises the corresponding average runtimes av.cpuopt for the optimisation model incorporating optimal consumer behaviour (MILPoptimal, cf. Section 3.3) and av.cpuheur for the model incorporating heuristic behaviour (MILPlook-ahead, cf. Section 3.2) using the branch-and-bound solution procedure proposed in Section 4 in both cases. The average relative deviations 
                           
                              av
                              
                                 
                                    .
                                    dev
                                 
                                 
                                    
                                       heur
                                       ,
                                       opt
                                    
                                 
                                 cpu
                              
                           
                         are given as well.

The results demonstrate that the price optimisation for J ≥ 4 products generally requires substantially lower runtimes in the case that the consumers are anticipated to behave heuristically. If the deviation of consumers to the initial capacity is limited (i.e., 
                           
                              I
                              /
                              
                                 c
                                 0
                              
                              =
                              0.5
                           
                         or 
                           
                              I
                              /
                              
                                 c
                                 0
                              
                              =
                              1.5
                           
                        ), the reduction of runtimes of heuristic consumers is the highest, increasing with both the number of products J and higher values of η. If the initial capacity is very low (
                           
                              I
                              /
                              
                                 c
                                 0
                              
                              =
                              J
                           
                        ), the runtimes of the two types of consumer behaviours converge, as the absolute values of av.cpuopt and av.cpuheur prove.

Overall, considering the runtimes, a seller might incorporate a heuristic type of consumer behaviour during price optimisation. Even if the consumers’ purchase behaviour is actually optimal, the resulting loss in revenues is rather limited.

@&#SUMMARY@&#

To the best of our knowledge, this study is the first work that considers product line pricing in the presence of budget-constrained consumers. Consumers’ budget considerations play an important role in many real-world applications, such as the pricing of tickets for sporting or theatre seasons. In the basic version of the resulting product line pricing problem, we have assumed optimal consumer behaviour. More precisely, given a set of available products along with their prices, each consumer solves a standard knapsack problem with her budget as a limiting resource to decide what to purchase. In this paper, we have shown that – similarly to traditional product line pricing – the resulting optimisation problem can be formulated as a mixed-integer linear program. In addition, motivated by the theory of bounded rationality, we have also considered two variants of the problem in which consumers are assumed to behave heuristically regarding their budget limitations. We have developed corresponding mixed-integer linear programming formulations reflecting both greedy and look-ahead behaviour.

It has turned out that all of the above mentioned programs are quite difficult to solve with well-established optimisation software packages, such as the standard solver IBM ILOG CPLEX, which takes up to several hours for problems with only four products, while larger problem sizes are not solvable at all due to memory issues. Therefore, we have developed a customised branch-and-bound solution procedure. For the specification of the branch-and-bound procedure, we have proposed a number of new bound arguments that specifically exploit the consumers’ budget constraints.

We have then conducted an extensive experimental study. In the first part of the study, we have presented a performance analysis comparing the proposed bounds and their usage within the branch-and-bound procedure, relying on a large number of various problem classes following a full factorial design based on realistic values for the problem parameters. It has turned out that the new bound arguments are clearly tighter than those obtained when simply applying an adaptation of the product-specific bound proposed in the recent literature for the standard product line pricing problem. More precisely, an efficient combination of the traditional bound with one of the new bound arguments performs best in our computational tests. Furthermore, we have shown that the branch-and-bound procedure clearly outperforms standard solvers in terms of runtime, and, additionally, even larger problem sizes can be solved to optimality. All of the tested problem classes can be solved in less than 280 seconds.

In the second part of the experimental study, we have focussed on additional managerial implications. First, an analysis of the resulting price patterns has shown that the tighter the consumers’ budget limitations are, the lower the prices have to be chosen in order to maximise revenues. However, the prices can be increased, the scarcer the capacity is. Second, and most importantly, we have analysed the benefit of the models and procedures proposed in this paper. For this purpose, we have compared the obtained revenues to the revenues that are obtainable from applying the traditional product line pricing approach not taking the consumers’ budgets into consideration. It has turned out that the losses from incorrectly applying the traditional model are up to 31.7 percent in the investigated scenarios, or, equivalently, up to 46.4 percent of revenue gains can be achieved with the new approach. Consequently, the approach proposed in this paper is essential for product line pricing in the case a seller is aware of consumers’ budget constraints. In particular, the analysis shows that the tighter the consumers’ budgets are, the higher the losses from applying the wrong model will be. Third, we have investigated to what extent a loss in revenues occurs if prices are optimised on the basis of incorrectly anticipated consumer purchase behaviour. Therefore, we have considered the model in which consumers are assumed to behave heuristically regarding their budget limitations according to the look-ahead type. It has turned out that the model can be solved much more rapidly by our branch-and-bound procedure than the corresponding problem assuming optimal consumer behaviour. However, the loss in overall revenues resulting from incorrectly assuming heuristic behaviour while consumers in reality behave optimally is quite limited in our problem classes (less than 2 percent on average). Hence, we conclude that depending on the specific application domain of the problem, it can be time-saving for a seller to optimise his prices under one of the assumptions of heuristic behaviour based on the best predicted fit to his consumers. Even if optimal consumer behaviour is observed to a certain extent, the losses in most cases can be expected to be rather small.

Applying a full factorial design, we generate 
                           
                              
                                 ∏
                                 
                                    i
                                    =
                                    1
                                 
                                 5
                              
                              
                                 |
                                 
                                    C
                                    i
                                 
                                 |
                              
                              =
                              243
                           
                         problem classes by combining each element of the following five different sets of components 
                           
                              
                                 C
                                 1
                              
                              ,
                              …
                              ,
                              
                                 C
                                 5
                              
                           
                        :

                           
                              •
                              
                                 
                                    
                                       
                                          C
                                          1
                                       
                                       =
                                       
                                          {
                                          
                                             2
                                             ,
                                             
                                             4
                                             ,
                                             
                                             6
                                          
                                          }
                                       
                                    
                                 : the number of offered products J ∈ C
                                 1.


                                 
                                    
                                       
                                          C
                                          2
                                       
                                       =
                                       
                                          {
                                          
                                             10
                                             ,
                                             
                                             50
                                             ,
                                             
                                             90
                                          
                                          }
                                       
                                    
                                 : the initial capacity c
                                 0 ∈ C
                                 2 with 
                                    
                                       
                                          c
                                          01
                                       
                                       =
                                       ⋯
                                       =
                                       
                                          c
                                          
                                             0
                                             J
                                          
                                       
                                       =
                                       
                                          c
                                          0
                                       
                                    
                                 .


                                 
                                    
                                       
                                          C
                                          3
                                       
                                       =
                                       
                                          {
                                          
                                             0.5
                                             ,
                                             
                                             1.5
                                             ,
                                             
                                             J
                                          
                                          }
                                       
                                    
                                 : the scaling factor sf ∈ C
                                 3 that determines the number of consumers 
                                    
                                       I
                                       =
                                       s
                                       f
                                       
                                          c
                                          0
                                       
                                    
                                 .


                                 
                                    
                                       
                                          C
                                          4
                                       
                                       =
                                       
                                          {
                                          
                                             1
                                             ,
                                             
                                             2
                                             ,
                                             
                                             3
                                          
                                          }
                                       
                                    
                                 : the identifier η ∈ C
                                 4 of the demand pattern, which specifies the distribution of the consumers’ reservation prices vij
                                  and their arrival. In line with the existing literature (cf., e.g., Burkart et al., 2012), we assume that the consumers’ reservation prices vij
                                  follow a specific Beta(αj
                                 , βj
                                 )-distribution, depending on the point in time of their arrival:
                                    
                                       -
                                       if 
                                             
                                                η
                                                =
                                                1
                                             
                                          , then 
                                             
                                                
                                                   v
                                                   
                                                      i
                                                      j
                                                   
                                                
                                                ∼
                                                Beta
                                                
                                                   (
                                                   
                                                      7.3
                                                      ,
                                                      
                                                      7.3
                                                   
                                                   )
                                                
                                                
                                                ∀
                                                
                                                i
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                I
                                                ;
                                                j
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                J
                                             
                                           scaled to the interval [0, 100]

if 
                                             
                                                η
                                                =
                                                2
                                             
                                          , then 
                                             
                                                
                                                   v
                                                   
                                                      i
                                                      j
                                                   
                                                
                                                ∼
                                                Beta
                                                
                                                   (
                                                   
                                                      7.3
                                                      ,
                                                      
                                                      7.3
                                                   
                                                   )
                                                
                                                
                                                ∀
                                                
                                                i
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                0.6
                                                ·
                                                I
                                                ;
                                                j
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                J
                                             
                                          , and 
                                             
                                                
                                                   v
                                                   
                                                      i
                                                      j
                                                   
                                                
                                                ∼
                                                Beta
                                                
                                                   (
                                                   
                                                      7.9
                                                      ,
                                                      
                                                      3.3
                                                   
                                                   )
                                                
                                                
                                                ∀
                                                
                                                i
                                                =
                                                0.6
                                                ·
                                                I
                                                +
                                                1
                                                ,
                                                …
                                                ,
                                                I
                                                ;
                                                j
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                J
                                             
                                           scaled to the interval [0, 100]

if 
                                             
                                                η
                                                =
                                                3
                                             
                                          , then 
                                             
                                                
                                                   v
                                                   
                                                      i
                                                      j
                                                   
                                                
                                                ∼
                                                Beta
                                                
                                                   (
                                                   
                                                      1.8
                                                      ,
                                                      
                                                      8.1
                                                   
                                                   )
                                                
                                                
                                                ∀
                                                
                                                i
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                0.4
                                                ·
                                                I
                                                ;
                                                j
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                J
                                             
                                          , and 
                                             
                                                
                                                   v
                                                   
                                                      i
                                                      j
                                                   
                                                
                                                ∼
                                                Beta
                                                
                                                   (
                                                   
                                                      8.1
                                                      ,
                                                      
                                                      1.8
                                                   
                                                   )
                                                
                                                
                                                ∀
                                                
                                                i
                                                =
                                                0.4
                                                ·
                                                I
                                                +
                                                1
                                                ,
                                                …
                                                ,
                                                I
                                                ;
                                                j
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                J
                                             
                                           scaled to the interval [0, 100]


                                 
                                    
                                       
                                          C
                                          5
                                       
                                       =
                                       
                                          {
                                          
                                             (
                                             
                                                10
                                                ,
                                                
                                                30
                                             
                                             )
                                             ,
                                             (
                                             
                                                20
                                                ,
                                                
                                                50
                                             
                                             )
                                             ,
                                             
                                             (
                                             
                                                30
                                                ,
                                                
                                                70
                                             
                                             )
                                          
                                          }
                                       
                                    
                                 : the tuple (B
                                 LB, B
                                 UB) ∈ C
                                 5 indicating the distribution of the consumers’ budget limitations in percentage to the sum of consumer i’s reservation prices 
                                    
                                       
                                          ∑
                                          
                                             j
                                             =
                                             1
                                          
                                          J
                                       
                                       
                                          v
                                          
                                             i
                                             j
                                          
                                       
                                    
                                 . More precisely, depending on (B
                                 LB, B
                                 UB), consumer budgets are drawn from a continuous uniform distribution 
                                    
                                       U
                                       (
                                       
                                          
                                             
                                                B
                                                LB
                                             
                                             100
                                          
                                          
                                             ∑
                                             
                                                j
                                                =
                                                1
                                             
                                             J
                                          
                                          
                                             v
                                             
                                                i
                                                j
                                             
                                          
                                          ,
                                          
                                             
                                                B
                                                UB
                                             
                                             100
                                          
                                          
                                             ∑
                                             
                                                j
                                                =
                                                1
                                             
                                             J
                                          
                                          
                                             v
                                             
                                                i
                                                j
                                             
                                          
                                       
                                       )
                                    
                                  or, in the case that 
                                    
                                       
                                          B
                                          i
                                          LB
                                       
                                       <
                                       
                                          max
                                          
                                             j
                                             =
                                             1
                                             ,
                                             …
                                             ,
                                             J
                                          
                                       
                                       
                                          {
                                          
                                             v
                                             
                                                i
                                                j
                                             
                                          
                                          }
                                       
                                    
                                 , from 
                                    
                                       U
                                       (
                                       
                                          
                                             max
                                             
                                                j
                                                =
                                                1
                                                ,
                                                …
                                                ,
                                                J
                                             
                                          
                                          
                                             {
                                             
                                                v
                                                
                                                   i
                                                   j
                                                
                                             
                                             }
                                          
                                          ,
                                          max
                                          
                                             {
                                             
                                                
                                                   max
                                                   
                                                      j
                                                      =
                                                      1
                                                      ,
                                                      …
                                                      ,
                                                      J
                                                   
                                                
                                                
                                                   {
                                                   
                                                      v
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                   }
                                                
                                                ;
                                                
                                                
                                                   B
                                                   i
                                                   UB
                                                
                                             
                                             }
                                          
                                       
                                       )
                                    
                                 .


                                 
                                    
                                       
                                          C
                                          6
                                       
                                       =
                                       
                                          {
                                          
                                             10
                                             ,
                                             
                                             20
                                          
                                          }
                                       
                                    
                                 : number of price points N ∈ C
                                 6 with 
                                    
                                       N
                                       =
                                       
                                          N
                                          1
                                       
                                       =
                                       ⋯
                                       =
                                       
                                          N
                                          J
                                       
                                    
                                 .


                           
                              
                                 •
                                 
                                    
                                       
                                          a
                                          v
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                       
                                    : average relative deviation of a specific performance outcome obtained by applying a procedure A from that of a procedure B, both being performed on the same scenarios Q⊆Qtotal
                                    . The notion ‘procedure’ is generic and refers to, e.g., a specific type of bound calculation or a specific configuration of the branch-and-bound procedure depending on the matter of investigation. In order to indicate the type of performance outcomes that are compared, we use the superscript type, which could be, e.g., the obtained revenue or the number of nodes within a resulting enumeration tree. The measure is computed by 
                                       
                                          a
                                          v
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                          :
                                          =
                                          
                                             1
                                             
                                                |
                                                Q
                                                |
                                             
                                          
                                          
                                             ∑
                                             
                                                q
                                                ∈
                                                Q
                                             
                                          
                                          
                                             
                                                
                                                   v
                                                   A
                                                   
                                                      t
                                                      y
                                                      p
                                                      e
                                                      ,
                                                      (
                                                      q
                                                      )
                                                   
                                                
                                                −
                                                
                                                   v
                                                   B
                                                   
                                                      t
                                                      y
                                                      p
                                                      e
                                                      ,
                                                      (
                                                      q
                                                      )
                                                   
                                                
                                             
                                             
                                                v
                                                B
                                                
                                                   t
                                                   y
                                                   p
                                                   e
                                                   ,
                                                   (
                                                   q
                                                   )
                                                
                                             
                                          
                                          ×
                                          100
                                          %
                                       
                                    , with 
                                       
                                          v
                                          A
                                          
                                             t
                                             y
                                             p
                                             e
                                             ,
                                             
                                             (
                                             q
                                             )
                                          
                                       
                                     denoting the outcome of procedure A with respect to type and 
                                       
                                          v
                                          B
                                          
                                             t
                                             y
                                             p
                                             e
                                             ,
                                             
                                             (
                                             q
                                             )
                                          
                                       
                                     denoting the corresponding outcome of procedure B, each in scenario q. Note that in what follows, the set of considered scenarios Q will differ depending on the specific analysis with the specific selection of scenarios being made sure from the context, which eases the notation of the measures.


                                    
                                       
                                          m
                                          a
                                          x
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                          
                                          /
                                          
                                          m
                                          i
                                          n
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                       
                                    : analogously to 
                                       
                                          a
                                          v
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                       
                                    , the maximum and the minimum relative deviations of a specific performance outcome obtained by A from that of B are calculated by 
                                       
                                          m
                                          a
                                          x
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                          :
                                          =
                                          ma
                                          
                                             x
                                             
                                                q
                                                ∈
                                                Q
                                             
                                          
                                          
                                             {
                                             
                                                
                                                   
                                                      
                                                         v
                                                         A
                                                         
                                                            t
                                                            y
                                                            p
                                                            e
                                                            ,
                                                            
                                                            (
                                                            q
                                                            )
                                                         
                                                      
                                                      −
                                                      
                                                         v
                                                         B
                                                         
                                                            t
                                                            y
                                                            p
                                                            e
                                                            ,
                                                            (
                                                            q
                                                            )
                                                         
                                                      
                                                   
                                                   
                                                      v
                                                      B
                                                      
                                                         t
                                                         y
                                                         p
                                                         e
                                                         ,
                                                         (
                                                         q
                                                         )
                                                      
                                                   
                                                
                                                
                                             
                                             }
                                          
                                          ×
                                          100
                                          %
                                       
                                     and 
                                       
                                          m
                                          i
                                          n
                                          .
                                          d
                                          e
                                          
                                             v
                                             
                                                A
                                                ,
                                                B
                                             
                                             
                                                t
                                                y
                                                p
                                                e
                                             
                                          
                                          :
                                          =
                                          mi
                                          
                                             n
                                             
                                                q
                                                ∈
                                                Q
                                             
                                          
                                          
                                             {
                                             
                                                
                                                   
                                                      
                                                         v
                                                         A
                                                         
                                                            t
                                                            y
                                                            p
                                                            e
                                                            ,
                                                            
                                                            (
                                                            q
                                                            )
                                                         
                                                      
                                                      −
                                                      
                                                         v
                                                         B
                                                         
                                                            t
                                                            y
                                                            p
                                                            e
                                                            ,
                                                            (
                                                            q
                                                            )
                                                         
                                                      
                                                   
                                                   
                                                      v
                                                      B
                                                      
                                                         t
                                                         y
                                                         p
                                                         e
                                                         ,
                                                         (
                                                         q
                                                         )
                                                      
                                                   
                                                
                                                
                                             
                                             }
                                          
                                          ×
                                          100
                                          %
                                       
                                    , respectively.

@&#REFERENCES@&#

