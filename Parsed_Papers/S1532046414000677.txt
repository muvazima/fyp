@&#MAIN-TITLE@&#Using large clinical corpora for query expansion in text-based cohort identification

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Demonstrated utility of an in-domain collection (clinical text) for query expansion.


                        
                        
                           
                           Analyzed effect of external collection size on a mixture of relevance models.


                        
                        
                           
                           Any existing query expansion configuration can benefit from an indomain collection.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Cohort identification

Information retrieval

Query expansion

Clinical text

Electronic medical records

@&#ABSTRACT@&#


               
               
                  In light of the heightened problems of polysemy, synonymy, and hyponymy in clinical text, we hypothesize that patient cohort identification can be improved by using a large, in-domain clinical corpus for query expansion. We evaluate the utility of four auxiliary collections for the Text REtrieval Conference task of IR-based cohort retrieval, considering the effects of collection size, the inherent difficulty of a query, and the interaction between the collections. Each collection was applied to aid in cohort retrieval from the Pittsburgh NLP Repository by using a mixture of relevance models. Measured by mean average precision, performance using any auxiliary resource (MAP=0.386 and above) is shown to improve over the baseline query likelihood model (MAP=0.373). Considering subsets of the Mayo Clinic collection, we found that after including 2.5 billion term instances, retrieval is not improved by adding more instances. However, adding the Mayo Clinic collection did improve performance significantly over any existing setup, with a system using all four auxiliary collections obtaining the best results (MAP=0.4223). Because optimal results in the mixture of relevance models would require selective sampling of the collections, the common sense approach of “use all available data” is inappropriate. However, we found that it was still beneficial to add the Mayo corpus to any mixture of relevance models. On the task of IR-based cohort identification, query expansion with the Mayo Clinic corpus resulted in consistent and significant improvements. As such, any IR query expansion with access to a large clinical corpus could benefit from the additional resource. Additionally, we have shown that more data is not necessarily better, implying that there is value in collection curation.
               
            

@&#INTRODUCTION@&#

Electronic medical records (EMRs) have the potential to streamline the processes involved in clinical and translational research. In the past, identification of cohorts for clinical trials or retrospective studies has been a costly endeavor, requiring hours of trained expertise to accomplish manual chart reviews. In the EMR age, this problem of cohort identification may be cast as one of information retrieval (IR). Here, clinical text (e.g., a discharge summary) must be searched alongside structured data (e.g., lab results) to find a pool of patients that fit some criteria, such as symptoms present, family history, or demographics (i.e., the query). But it is challenging for a clinician or epidemiological researcher to formulate an optimal query based on their desired criteria. This is in part because of the inherent diversity of language: ‘cold’ could be a temperature or a disease (polysemy), ‘dyspnea’ could be expressed in a medical record as ‘shortness of breath’ (synonymy), ‘ibuprofen’ could be expressed as ‘pain reliever’ (hyponymy).

One effective general-domain IR approach for these problems is to expand queries to include other terms that might be relevant or implied. In the mixture of relevance models approach to query expansion [1], multiple large external text corpora have been used to select what terms might be helpful to add to a query. When searching for patient cohorts in the clinical domain, general-domain collections have been shown to select reasonable terms and improve retrieval performance [2]. What sort of improvement, if any, should be expected if clinical-domain collections are used for this query expansion?

In this work, we analyze the effects of including a large, unlabeled corpus of clinical notes into an statistical IR system for cohort identification. In particular, we evaluate the helpfulness of a corpus of Mayo Clinic clinical notes for the Text REtrieval Conference (TREC
                        2
                        
                           http://trec.nist.gov/.
                     
                     
                        2
                     ) task of IR-based cohort retrieval, considering the effects of collection size, the inherent difficulty of a query, and the interaction with other widely-available collections. As our results will show, the large clinical corpus is the single most useful collection for query expansion. It is interesting to note, however, that optimal results in the mixture of relevance models would require selective application of this query expansion.

The TREC Medical Records Cohort Retrieval Task was to retrieve relevant patient visits from a target text collection of patient records [3,4]. The University of Pittsburgh NLP Repository supplied de-identified medical reports as the target collection for the TREC 2011 and 2012 Medical Records Tracks. A patient visit to the hospital usually generates multiple medical reports, so 100,866 Pittsburgh medical reports corresponded to 17,198 patient visits. This is an approximation of finding actual patients for a cohort (a patient could have multiple hospital visits), which was impossible due to the record de-identification process.

Each medical report is an XML file with a fixed set of fields as shown in Fig. 1
                        . We mainly used ICD-9 codes for admit and discharge diagnoses, and the “report text” field which contained the full text of clinical narratives. Medical reports could be mapped to patient visits via a report-to-visit mapping table provided with the Pittsburgh NLP Repository.

81 queries (or “topics” in TREC terminology) were developed by TREC assessors, reflecting the types of queries that might be used to identify cohorts for comparative effectiveness research [3]. These queries were designed to require information from the free-text fields, i.e., topics are not answerable solely by the diagnostic codes. The topic usually specifies the patient’s condition, disease, treatment, etc. For example:
                           
                              Topic 107Patients with ductal carcinoma in situ (DCIS)

Topic 185Patients who develop thrombocytopenia in pregnancy

For each topic, TREC assessors gave a relevance judgment (highly relevant, relevant, or not relevant) to subsets of the 17,198 visits; these subsets were chosen based on pooled results from TREC Medical Records Track participants. Our evaluations used these 81 relevance-judged topics, with ninefold cross validation to examine the benefit of query expansion.

The remainder of this paper is organized as follows: Section 2 highlights related work. Section 3.1 introduces some characteristics of the collections used for query expansion. After some preprocessing in Sections 3.2 and 3.3 describes the retrieval model. Section 4 details the evaluation metrics and experimental setup. Then, Section 5 presents results and discusses the utility of the Mayo corpus under various settings. After some further discussion in Section 6, we summarize our findings in Section 7.

@&#RELATED WORK@&#

While cohort identification is a widely known and addressed problem in medical informatics [5–9], few approaches have used traditional text-based IR approaches. A notable exception is the EMERSE (Electronic Medical Record Search Engine) system [10]. As one of the earliest and successful non-commercial EMR search engines, EMERSE supports free-text queries, and has been used by medical professionals in a few hospitals, health centers, and clinics since its initial introduction in 2005 [10,11]. Though EMERSE has not achieved widespread adoption and there is little discussion about its search algorithms, a few interesting studies have been done using EMERSE: Seyfried et al. [11] compared EMERSE-facilitated chart reviews with manual reviews, and concluded that using a well-designed EMR search engine for retrieving information in free-text EMR can provide significant time saving while preserving reliability. Yang et al. [12] analyzed a query log of the EMERSE system recorded over the course of 4years. They find that the users have difficulty expressing their information needs in well formulated EMR search queries. Another interesting finding is that the coverage of EMR query terms by a meta-dictionary (containing all terms in the Unified Medical Language System (UMLS) Metathesaurus [13], an English dictionary, and a medical dictionary) is much lower than the usual 85–90% coverage of Web queries by English dictionaries. Thus, they suggest seeking beyond the use of medical ontologies to enhance medical information retrieval. Apart from these few attempts, methods emerging from research on information retrieval have not been well explored, largely due to the sensitivity of patient data, preventing its use by academic researchers.

Fortunately, the Text REtrieval Conference (TREC) initiated a Medical Records track in 2011 making a set of real medical records and human judgments of relevance to search queries available to the research community. TREC is an annual evaluation workshop/competition with the goal of providing a common experimental setting for researchers that want to work on particular search tasks. Each year, there are up to 7 “tracks” devoted to a different search task. Organizers provide documents and information needs to participants, ensuring that all participants are using the same data and working towards the same task. TREC organizers also oversee the collection of human relevance judgments, which are instrumental in understanding the effectiveness of a search system.

Most participants in TREC’s Medical Records track tried using medical-specific knowledge to enhance retrieval, but only a few of them achieved positive results. King et al. [14] identified and indexed terms of medical reports that appeared in the UMLS. Meanwhile, they expanded original queries with related terms in UMLS and several commercial medical reference encyclopedias. Goodwin et al. [15] leveraged information from SNOMED-CT [16], UMLS, and a subset of PubMed Central database for query expansion. Zhu et al. [2,17] also used several medical-related external utilities for query expansion. These three teams all obtained large improvement over their baselines which used no medical-specific knowledge.

Wu et al. [18,19] represented queries and reports in the concept space with expansion to related concepts but found only modest improvements. Several others [20–24] expanded query terms more traditionally, using UMLS synonyms, MeSH terms, RxNorm, Google search, healthcare websites, and DrugBank. However, they all obtained very little or no improvement over their baselines. More recently, Qi and Laquerre [25] transformed plain-text medical reports and queries into concepts based on UMLS Metathesaurus and experimented with various retrieval models, such as vector space model, query likelihood model, and Learning to Rank model. Their approaches achieved reasonably good results. All of the above groups used medical resources in similar ways, but produced varying results. This paper differs in that it aims to characterize the effectiveness of query expansion based on in-domain resources. The techniques and resources used here have several advantages over those previously used in the TREC Medical Records track. The 39 million-document subset of Mayo Clinic clinical notes is the most similar to the target collection, and it is the largest of its kind. Moreover, our query expansion technique (Section 3.3.2) is highly scalable in that it allows us to easily compare and combine this and other external resources in a uniform way.

This work mainly performs an analysis based on a clinical text collection: a 39 million-document subset of Mayo Clinic clinical notes between 1/1/2001–12/31/2010, retrieved from the Mayo Clinic Life Sciences System (MCLSS). This includes data from a comprehensive snapshot of Mayo Clinic’s service areas, excluding only microbiology, radiology, ophthamology, and surgical reports. Additionally, each possible note type at Mayo was represented: Clinical Note, Hospital Summary, Post-procedure Note, Procedure Note, Progress Note, Tertiary Trauma, and Transfer Note. This corpus has been characterized for its clinical information content (namely, medical concepts [26] and terms [27]) and compared to other corpora, such as the 2011 MEDLINE/PubMed Baseline Repository and the 2010 i2b2 NLP challenge dataset [28].

In addition to the medical records from Mayo Clinic, we leverage information in several other large, widely-available collections: the TREC 2007 Genomics Track dataset [29], the TREC 2009 ClueWeb09 Category B dataset
                           3
                           
                              http://lemurproject.org/clueweb09.php/. The ClueWeb09 dataset was created to support research on IR and related human language technologies. It contains about 1 billion web pages, and is used by several tracks of the TREC conference. TREC Category B contains first 50 million English pages including about 6 million Wikipedia pages.
                        
                        
                           3
                         (excluding Wikipedia pages), and the Pittsburgh NLP Repository itself (the target collection, as indicated by * in Table 1
                        ). Table 1 provides statistics about these datasets.

The ClueWeb09 dataset was created to support research on information retrieval and related human language technologies. It consists of about 1 billion web pages in ten languages that were collected in January and February 2009. The dataset is used by several tracks of the TREC conference. TREC Category B contains first 50 million English pages.
                           4
                           Available at http://lemurproject.org/clueweb09.php/.
                        
                        
                           4
                         The ClueWeb09 Cat-B dataset has comparable size to Mayo Clinic dataset in terms of the number of documents, however, it is less similar in content to the target collection (i.e., the Pittsburgh NLP Repository) and is considered more noisy than Mayo Clinic dataset.

TREC 2007 Genomics Track dataset consists of full-text HTML documents from 49 journals
                           5
                           The full list of journal can be found at http://ir.ohsu.edu/genomics/2007data.html.
                        
                        
                           5
                         published publish electronically via Highwire Press.
                           6
                           
                              http://www.highwire.org/.
                        
                        
                           6
                         The Genomics dataset is much smaller than the ClueWeb09 Cat-B dataset, however, the knowledge domain where the Genomics dataset comes from overlaps more with the clinical domain than the general web domain where the ClueWeb dataset is derived from.

Note that while there are other in-domain resources such as the UMLS Metathesaurus, to treat these more structured resources as expansion collections was out of the scope of this work. Mixtures of relevance models (Section 3.3.2) only apply directly to free-text collections. Also, the evaluations concerning collection size and quality (Section 5) cannot be easily extended to cover the case of a structured resource.

As a pre-processing step, we merged the reports from a single visit into a visit document, thereby converting the 100,866 medical reports into 17,198 visit documents. This allowed us to combine evidence from scattered reports for each unique visit, and to consider the patient–visit retrieval problem as a document retrieval problem.

Additionally, we expanded the ICD-9 codes from the admit and discharge diagnoses. Though these codes are typically used for billing purposes, they give a high level summary of content in the medical records, and their associated descriptions can provide terms that are likely to be helpful to our retrieval system. Thus, we expand ICD-9 codes in medical reports with their corresponding descriptions. For instance, we substitute code “428.1” with “left heart failure”. While these codes could be searched directly as in a typical databse search, this mapping to text allowed us to consider the information in the codes alongside the rest of the text documents, without modifying the text-based search model described in Section 3.3.

We also used the Porter stemmer [30] to normalize for morphological differences in the indexed clinical text. The same stemmer was later run on the queries. No stopwords were removed from the index. We did not expand terms in the collections according to resource-based synonyms (e.g., from the UMLS), since synonyms were modeled through query expansion.

Finally, it is well-known that negation phrases in narrative clinical reports are frequently used to claim the absence of certain conditions or symptoms [31], such as “no evidence of.” Negations may cause retrieval false positives if they are not dealt with. Thus, we use ConText
                           7
                           
                              http://code.google.com/p/negex/.
                        
                        
                           7
                         
                        [32] to eliminate all negated portions of the sentences from the medical records before indexing. For instance, we would delete the whole phrase “ruled out for an acute coronary syndrome” from an original report. This simple way of dealing with negations in clinical narratives has been shown to be quite effective [17]. By removing negations we eliminate retrieval false positives that can possibly lead to an underestimation of the true performance of a good expansion collection.

After this preprocessing, we built an Indri index for the merged documents. Indri
                           8
                           
                              http://www.lemurproject.org/indri/.
                        
                        
                           8
                         is an open-source system for indexing and retrieving full-text documents. It supports basic keyword queries, but also has a complex querying language that offers much greater expressive power.

We start with a basic “bag-of-words” probabilistic model: the query likelihood language model. This model scores documents for queries as a function of the probability that query terms would be sampled (independently) from a bag containing all the words in that document. Formally, the scoring function for a document D on query Q is a sum of the logarithms of smoothed probabilities:
                              
                                 (1)
                                 
                                    score
                                    (
                                    D
                                    ,
                                    Q
                                    )
                                    =
                                    log
                                    P
                                    (
                                    Q
                                    |
                                    D
                                    )
                                    =
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             i
                                             =
                                             1
                                          
                                          
                                             n
                                          
                                       
                                    
                                    log
                                    
                                       
                                          
                                             
                                                tf
                                             
                                             
                                                
                                                   
                                                      q
                                                   
                                                   
                                                      i
                                                   
                                                
                                                ,
                                                D
                                             
                                          
                                          +
                                          μ
                                          
                                             
                                                
                                                   
                                                      tf
                                                   
                                                   
                                                      
                                                         
                                                            q
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                      ,
                                                      C
                                                   
                                                
                                             
                                             
                                                |
                                                C
                                                |
                                             
                                          
                                       
                                       
                                          |
                                          D
                                          |
                                          +
                                          μ
                                       
                                    
                                    ,
                                 
                              
                           where 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            is the ith query term, 
                              
                                 |
                                 D
                                 |
                              
                            and 
                              
                                 |
                                 C
                                 |
                              
                            are the document and collection lengths in words respectively, 
                              
                                 
                                    
                                       tf
                                    
                                    
                                       
                                          
                                             q
                                          
                                          
                                             i
                                          
                                       
                                       ,
                                       D
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       tf
                                    
                                    
                                       
                                          
                                             q
                                          
                                          
                                             i
                                          
                                       
                                       ,
                                       C
                                    
                                 
                              
                            are the document and collection term frequencies of 
                              
                                 
                                    
                                       q
                                    
                                    
                                       i
                                    
                                 
                              
                            respectively, and 
                              
                                 μ
                              
                            is the Dirichlet smoothing parameter. The Indri retrieval system supports this model by default.

The above model is a strong baseline, but the only information it uses is terms in the query and terms in the document. It can be improved by expanding the query with additional “related” terms. These related terms can be derived from a relevance model (involving pseudo-relevance feedback in the target collection) or mixtures of relevance models (involving feedback in multiple collections) [1]. We describe MRM from a query expansion perspective to emphasize how external collections like the clinical corpus under consideration are really used. For each query Q, we perform the following 4 steps:
                              
                                 1.
                                 
                                    Pseudo-relevance feedback. Retrieve and rank documents 
                                       
                                          
                                             
                                                D
                                             
                                             
                                                C
                                             
                                          
                                       
                                     from each expansion collection C according to the QL model. This considers all n terms of the query. Return the document score.
                                       
                                          (2)
                                          
                                             score
                                             (
                                             
                                                
                                                   D
                                                
                                                
                                                   C
                                                
                                             
                                             ,
                                             Q
                                             )
                                             =
                                             log
                                             P
                                             (
                                             Q
                                             |
                                             
                                                
                                                   D
                                                
                                                
                                                   C
                                                
                                             
                                             )
                                             =
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      i
                                                      =
                                                      1
                                                   
                                                   
                                                      n
                                                   
                                                
                                             
                                             log
                                             
                                                
                                                   
                                                      
                                                         tf
                                                      
                                                      
                                                         
                                                            
                                                               q
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         ,
                                                         
                                                            
                                                               D
                                                            
                                                            
                                                               C
                                                            
                                                         
                                                      
                                                   
                                                   +
                                                   μ
                                                   
                                                      
                                                         
                                                            
                                                               tf
                                                            
                                                            
                                                               
                                                                  
                                                                     q
                                                                  
                                                                  
                                                                     i
                                                                  
                                                               
                                                               ,
                                                               C
                                                            
                                                         
                                                      
                                                      
                                                         |
                                                         C
                                                         |
                                                      
                                                   
                                                
                                                
                                                   |
                                                   
                                                      
                                                         D
                                                      
                                                      
                                                         C
                                                      
                                                   
                                                   |
                                                   +
                                                   μ
                                                
                                             
                                          
                                       
                                    
                                 


                                    Find candidate expansion terms. For each collection-specific ranked list, consider all terms e that are present in the top k documents, and calculate 
                                       
                                          P
                                          (
                                          e
                                          |
                                          
                                             
                                                
                                                   
                                                      θ
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                Q
                                                ,
                                                C
                                             
                                          
                                          )
                                       
                                     as below. Keep only the top m terms from each corpus.
                                       
                                          (3)
                                          
                                             P
                                             (
                                             e
                                             |
                                             
                                                
                                                   
                                                      
                                                         θ
                                                      
                                                      
                                                         ˆ
                                                      
                                                   
                                                
                                                
                                                   Q
                                                   ,
                                                   C
                                                
                                             
                                             )
                                             =
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      j
                                                      =
                                                      1
                                                   
                                                   
                                                      k
                                                   
                                                
                                             
                                             exp
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  tf
                                                               
                                                               
                                                                  e
                                                                  ,
                                                                  
                                                                     
                                                                        D
                                                                     
                                                                     
                                                                        j
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            |
                                                            
                                                               
                                                                  D
                                                               
                                                               
                                                                  j
                                                               
                                                            
                                                            |
                                                         
                                                      
                                                      +
                                                      log
                                                      
                                                         
                                                            |
                                                            C
                                                            |
                                                         
                                                         
                                                            
                                                               
                                                                  df
                                                               
                                                               
                                                                  e
                                                                  ,
                                                                  C
                                                               
                                                            
                                                         
                                                      
                                                      +
                                                      score
                                                      (
                                                      
                                                         
                                                            D
                                                         
                                                         
                                                            j
                                                            ,
                                                            C
                                                         
                                                      
                                                      ,
                                                      Q
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                    Here, 
                                       
                                          
                                             
                                                
                                                   
                                                      θ
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                Q
                                                ,
                                                C
                                             
                                          
                                       
                                     represents the scored results of pseudo-relevance feedback, i.e., the estimated model 
                                       
                                          
                                             
                                                θ
                                             
                                             
                                                ˆ
                                             
                                          
                                       
                                     of collection C for the query Q. 
                                       
                                          |
                                          D
                                          |
                                       
                                     and 
                                       
                                          |
                                          C
                                          |
                                       
                                     are the document and collection lengths in words respectively, and 
                                       
                                          
                                             
                                                df
                                             
                                             
                                                e
                                                ,
                                                C
                                             
                                          
                                       
                                     is the number of documents containing term e in collection C.


                                    Determine query and expansion term weights. Calculate 
                                       
                                          P
                                          (
                                          w
                                          |
                                          
                                             
                                                
                                                   
                                                      θ
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                Q
                                             
                                          
                                          )
                                       
                                     as below; w represents both q (original query terms) and e (retained expansion terms from each collection), and 
                                       
                                          
                                             
                                                
                                                   
                                                      θ
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                Q
                                             
                                          
                                       
                                     models scores for query Q the across all collections.
                                       
                                          (4)
                                          
                                             P
                                             (
                                             w
                                             |
                                             
                                                
                                                   
                                                      
                                                         θ
                                                      
                                                      
                                                         ˆ
                                                      
                                                   
                                                
                                                
                                                   Q
                                                
                                             
                                             )
                                             =
                                             
                                                
                                                   λ
                                                
                                                
                                                   Q
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         tf
                                                      
                                                      
                                                         w
                                                         ,
                                                         Q
                                                      
                                                   
                                                
                                                
                                                   |
                                                   Q
                                                   |
                                                
                                             
                                             +
                                             (
                                             1
                                             -
                                             
                                                
                                                   λ
                                                
                                                
                                                   Q
                                                
                                             
                                             )
                                             
                                                
                                                   
                                                      ∑
                                                   
                                                   
                                                      C
                                                   
                                                
                                             
                                             
                                                
                                                   λ
                                                
                                                
                                                   C
                                                
                                             
                                             P
                                             (
                                             w
                                             |
                                             
                                                
                                                   
                                                      
                                                         θ
                                                      
                                                      
                                                         ˆ
                                                      
                                                   
                                                
                                                
                                                   Q
                                                   ,
                                                   C
                                                
                                             
                                             )
                                          
                                       
                                    This linearly interpolates the mixture of relevance models (second term, where the 
                                       
                                          λ
                                       
                                     are collection weights and 
                                       
                                          
                                             
                                                ∑
                                             
                                             
                                                C
                                             
                                          
                                          
                                             
                                                λ
                                             
                                             
                                                C
                                             
                                          
                                          =
                                          1
                                       
                                    ) with the maximum likelihood query estimate (first term). Note that the count of w in the query, 
                                       
                                          
                                             
                                                tf
                                             
                                             
                                                w
                                                ,
                                                Q
                                             
                                          
                                       
                                     will be 0 for expansion terms since they do not appear in the query.


                                    Aggregate across terms for final score. The final score for ranking document D is a log-transformed version of 
                                       
                                          P
                                          (
                                          Q
                                          |
                                          D
                                          )
                                          =
                                          
                                             
                                                ∑
                                             
                                             
                                                w
                                             
                                          
                                          P
                                          (
                                          w
                                          |
                                          
                                             
                                                
                                                   
                                                      θ
                                                   
                                                   
                                                      ˆ
                                                   
                                                
                                             
                                             
                                                Q
                                             
                                          
                                          )
                                       
                                    .

In practice, the final score is given by creating a query in the Indri query language, with the weights of Step 3 combined via “#weight” operators:
                              
                                 
                                    
                                    
                                       
                                          #weight(
                                       
                                       
                                          
                                             
                                             
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         Q
                                                      
                                                   
                                                
                                              #combine(
                                                
                                                   
                                                      
                                                         q
                                                      
                                                      
                                                         1
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         q
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                              …
                                                
                                                   
                                                      
                                                         q
                                                      
                                                      
                                                         |
                                                         Q
                                                         |
                                                      
                                                   
                                                
                                             )
                                       
                                       
                                          
                                             
                                             
                                                
                                                   (
                                                   1
                                                   -
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         Q
                                                      
                                                   
                                                   )
                                                
                                              #weight(
                                       
                                       
                                          
                                             
                                             
                                             
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                      
                                                   
                                                
                                             #weight(
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         11
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         e
                                                      
                                                      
                                                         11
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         12
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         e
                                                      
                                                      
                                                         12
                                                      
                                                   
                                                
                                              …
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         1
                                                         m
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         e
                                                      
                                                      
                                                         1
                                                         m
                                                      
                                                   
                                                
                                             )
                                       
                                       
                                          
                                             
                                             …
                                       
                                       
                                          
                                             
                                             
                                             
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         
                                                            
                                                               C
                                                            
                                                            
                                                               n
                                                            
                                                         
                                                      
                                                   
                                                
                                             #weight(
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         n
                                                         1
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         e
                                                      
                                                      
                                                         n
                                                         1
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         n
                                                         2
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         e
                                                      
                                                      
                                                         n
                                                         2
                                                      
                                                   
                                                
                                              …
                                                
                                                   
                                                      
                                                         p
                                                      
                                                      
                                                         nm
                                                      
                                                   
                                                
                                              
                                             
                                                
                                                   
                                                      
                                                         e
                                                      
                                                      
                                                         nm
                                                      
                                                   
                                                
                                             ))),
                                       
                                    
                                 
                              
                           where p is the probability from step 2 above. Thus, an expanded query based on two expansion collections when the values of 
                              
                                 λ
                              
                           ’s are specified as (0.7,0.2,0.1) looks like the following:
                              
                                 
                                    
                                    
                                       
                                          #weight(
                                       
                                       
                                          
                                             0.7 #combine(female breast cancer mastectomies admission)
                                       
                                       
                                          
                                             0.2 #weight(0.225 mastectomy 0.145 women 0.110 risk
                                       
                                       
                                          
                                             
                                             0.107 prophylactic 0.101 bct 0.074 radiate 0.068 therapy
                                       
                                       
                                          
                                             
                                             0.062 radiotherapy 0.058 surgery 0.050 adjuvant)
                                       
                                       
                                          
                                             0.1 #weight(0.211 mammographic 0.159 tram 0.101 dci
                                       
                                       
                                          
                                             
                                             0.116 mammography 0.93 flap 0.082 mammogram
                                       
                                       
                                          
                                             
                                             0.068 duct 0.063 biopsy 0.059 axillary 0.048 recurrence)
                                       
                                       
                                          ),
                                       
                                    
                                 
                              
                           where “female breast cancer mastectomies admission” is the original query, followed by weighted expansion terms specified in the “#weight” phrases.

@&#EVALUATION@&#

MAP was the primary evaluation measure (for training and testing) in this work. MAP (mean average precision) provides a single-figure measure of quality across recall levels [33]. If 
                        
                           {
                           
                              
                                 d
                              
                              
                                 1
                              
                           
                           ,
                           …
                           ,
                           
                              
                                 d
                              
                              
                                 j
                              
                           
                           }
                        
                      is the set of relevant documents for an information need 
                        
                           q
                           ∈
                           Q
                        
                     , then MAP is defined as:
                        
                           (5)
                           
                              MAP
                              (
                              Q
                              )
                              =
                              
                                 
                                    1
                                 
                                 
                                    |
                                    Q
                                    |
                                 
                              
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       q
                                       ∈
                                       Q
                                    
                                 
                              
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          d
                                          ∈
                                          {
                                          
                                             
                                                d
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             
                                                d
                                             
                                             
                                                j
                                             
                                          
                                          }
                                       
                                    
                                    Prec
                                    (
                                    rank
                                    (
                                    d
                                    )
                                    )
                                 
                                 
                                    |
                                    {
                                    
                                       
                                          d
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          d
                                       
                                       
                                          j
                                       
                                    
                                    }
                                    |
                                 
                              
                              ,
                           
                        
                     where 
                        
                           Prec
                           (
                           k
                           )
                        
                      is the proportion of relevant documents among the top k retrieved.

While the official metrics for the 2011 and 2012 TREC Medical Records Tracks were bpref [34] and infAP [35],
                        9
                        bpref and infAP measures are both used to approximate average precision when the relevance judgments are incomplete, and infAP is found to be more robust than bpref [35].
                     
                     
                        9
                      respectively, we observed that MAP correlates well with the official measures in term of ranking systems. We train our systems on MAP as is most commonly used in IR to improve retrieval performance, and we find that training for high MAP improved the performance of other metrics, while training on the official metrics did not.

We used the Porter stemmer and a simple standard medical stoplist [36] for stemming and stopping words in queries during retrieval. Then we conducted 9-fold cross-validation and used the top 1000 retrieved visits
                        10
                        Medical Records track guideline requires each retrieval set contain no more than 1000 visits.
                     
                     
                        10
                      for each query to evaluate our system under different settings. In each iteration, we trained our system on 72 queries to obtain the best parameter setting for MAP by sweeping over the parameter space according to Table 2
                      below, and then generate a ranking for each of the remaining 9 queries based on the trained system. When complete, we had full rankings for all 81 topics as a test set. We evaluated the system based on MAP over all 81 topics.

Note that the baseline system using Eq. (1) has only one free variable 
                        
                           μ
                        
                      to train. In this work, we fix expansion weight 
                        
                           
                              
                                 λ
                              
                              
                                 Q
                              
                           
                        
                      to 0.7 and use equal weights for 
                        
                           
                              
                                 λ
                              
                              
                                 C
                              
                           
                        
                     . This is because we need to test various system settings with multiple parameters. Including 
                        
                           λ
                        
                      in training will be computationally expensive when two or more expansions collections are used the mixture of relevance models. In fact, expansion collection weighting itself is an interesting research problem and we plan to explore it in our future work.

To assess the statistical significance of differences in the performance of two systems, we perform one-tailed paired t-test for difference in MAP.

@&#RESULTS AND ANALYSIS@&#

In this section, we show and discuss the results of including the Mayo Clinic corpus under various settings.


                        Table 3
                         shows the retrieval performance when a single collection was used to produce query expansions. It can be seen that the best single MAP score is using the Mayo Clinic corpus. This is particularly interesting because it outperforms the target collection (PittNLP) itself, though the difference is not statistically significant. The Mayo Clinic data does significantly (at the 
                           
                              p
                              <
                              .
                              10
                           
                         level) outperform ClueWeb, showing the domain of similar-sized corpora matters.

In these single expansion collection tests, the similarity of the collection appears to be a suitable measure of quality. Similar corpora will tend to reduce noise and so improve precision; while dissimilar corpora will attempt to increase recall with novel terms but contribute noise, thus hurting precision.

To test the impact of the collection size on the query expansion effectiveness, we created multiple expansion collections of different size in an incremental way based on the original Mayo Clinic corpus. In particular, we built the smallest sub-collection 
                           
                              
                                 
                                    C
                                 
                                 
                                    0
                                 
                              
                           
                         by randomly sampling a set of clinical notes in the Mayo Clinc corpus, and then built the next sub-collection 
                           
                              
                                 
                                    C
                                 
                                 
                                    1
                                 
                              
                           
                         by adding more clinical notes that are randomly selected, and then built 
                           
                              
                                 
                                    C
                                 
                                 
                                    2
                                 
                              
                           
                         by adding more notes to 
                           
                              
                                 
                                    C
                                 
                                 
                                    1
                                 
                              
                           
                        , and so on. Thus 
                           
                              
                                 
                                    C
                                 
                                 
                                    j
                                 
                              
                           
                         is a superset of 
                           
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                           
                         for 
                           
                              i
                              <
                              j
                           
                        . We built an index for each sub-collection and use it for query expansion. The number of terms in each sub-collection is shown on the x-axis in Fig. 2
                        . Fig. 2 further shows the accumulated AP gain on the y-axis, where the accumulated AP gain is the sum of MAP score improvements. We have divided the queries into three classes, based on their performance (without any query expansion): hard
                        =MAP<.33; medium
                        =.338MAP<.67; and easy
                        =MAP>.67. It is clear that “more is better” does not hold here. There is a peak at about 2.5 billion terms, at which the Mayo clinical notes no longer contribute positive query expansions, and they are more likely contributing noise instead. This is an interesting result, because it counters the common wisdom that more data will always solve the problem. In the case of query expansion, it is helpful to have the right amount of in-domain information.


                        Fig. 2 also shows that the beneficial effects of query expansion are less pronounced for easy queries. Because the query difficulty categorizations were made without query expansion, easy queries are already able to be retrieved without the help of query expansion. Medium and hard queries are more helped.

In this experiment, we compared the individual performance of several expansion collections listed in Table 1. This corresponds to using Eq. (4) for computing the relevance scores. Since we had 4 expansion collections in total, there are 11 different combinations of two or more expansion collections.

First, we note that the 4-corpus MRM-11 run achieves the highest MAP score of any tested combination. Thus, while Fig. 2 showed that bigger was not necessarily better for the size of the clinical corpus, more multi-corpus data was helpful to performance.

Furthermore, Table 4
                         suggests that the diversity of expansion collections should be considered when dealing with more than one expansion collection. With multiple expansion collections, the effect of noisy terms from a single collection can be mitigated by terms from other collections, as long as the collections are diverse. Thus, diversity (appropriate dissimilarity in domains) counterbalances similarity, providing additional recall with suppressed loss of precision.

Thus, while an in-house clinical collection (here, the Mayo corpus) is the single most beneficial resource (according to Table 3), it is not necessarily the best resource in a multiple expansion collections case. However, because in-house collections may be the most available resource within an institution (no subscription or data use agreement), the next subsection explores whether it is worth the effort to produce such an in-house collection.

We ran query expansion using multiple collections and computed the relevance scores according to Eq. (4). Using the 11 runs calculated in Table 4, we considered the significance of adding the Mayo corpus given that one or more of the other expansion collections were already present. This is a realistic setting when implementing an IR-based cohort identification system with a local EMR. The significance of adding the Mayo clinical corpus is very clear. Regardless of what collections have been used for the mixture of relevance models, results will be improved by adding the corpus. This implies that any locally-implemented IR-based cohort identification system can significantly improve its performance by utilizing a large unlabeled corpus within their institution.

@&#DISCUSSION@&#

The quality, size, and diversity of the expansion collections are three important factors that impact performance gain.

First, larger expansion collections tend to have a better coverage of query-related expansion terms. However, an expansion collection can also introduce more noise if it is too large. Table 6 shows the top weighted expansion terms (word stems) for the query “hearing loss”. The first three columns are terms derived from Mayo sub-collections of different sizes. As we can see, M30 produces a much better set of expansions terms than M10. However, the set derived from M80 is apparently contaminated by noise.

The quality of expansion collection is estimated by the overlap between two domains, i.e., the content similarity of the expansion collection to the target collection. Expansion collections containing similar content to the target collection tend to use a similar underlying language model (i.e., vocabulary and term distributions) and thus can derive a better “relevance model”.

Moreover, a diversified set of expansion collections work better than a specialized set of collections. This is because expansion collections from different domains contribute differently to the retrieval performance with respect to different queries. If one collection in that diversified set fails to improve retrieval the others might still help (as shown in Table 6), which is not the case if we use a set of similar collections.

We have illustrated the significant benefit of adding any auxiliary collection for MRM-based query expansion in Table 5
                        .  These results are similar to those reported in Zhu and Carterette [17], who also gave MAP scores on individual expansion collections in the 0.37–0.39 range. However, the results are not directly comparable because we have used a cross-validated evaluation across queries to obtain a more stable estimate, rather than testing on the 47 topics of the 2012 TREC Medical Records track. This means there was more training data available to tune parameters for each query, but the evaluation metrics were more susceptible to the idiosyncrasies of particular queries.

The best results we have reported (MAP=0.4223) are from the full model in Table 3. Again, the results cannot be directly compared to Zhu and Carterette’s best scores because of the difference in cross-training vs. train/test evaluation setup. Additionally, Zhu and Carterette [17] modeled query term dependencies using Markov Random Fields. Modeling these dependencies resulted in their highest-performing system (MAP=0.413), which was the top-ranked automatic system in TREC 2012. Using only expansion collections to improve upon the query likelihood model, as in our tests, still performed well (MAP=0.398). Thus, there is reason to believe that our reported retrieval performance could be further improved by modeling term dependencies with Markov Random Fields or another similar model.

We have shown that, on the task of IR-based cohort identification, query expansion with the Mayo Clinic corpus resulted in consistent and significant improvements. As such, any IR query expansion without access to a large clinical corpus would feasibly benefit from the additional resource. Additionally, we have shown that the more a query is inherently difficult, the more it will be helped by this type of query expansion. This implies the need for query-adaptive collection selection, which is a direction of active research. Finally, we have shown that more data is not necessarily better, implying that there is value in collection curation. This is a possible direction for future work.

@&#ACKNOWLEDGMENTS@&#

This work was supported in part by the SHARPn (Strategic Health IT Advanced Research Projects) Area 4: Secondary Use of EHR Data Cooperative Agreement from the HHS Office of the National Coordinator, Washington, DC. DHHS 90TR000201.

@&#REFERENCES@&#

