@&#MAIN-TITLE@&#On two-echelon inventory systems with Poisson demand and lost sales

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We consider a two-echelon inventory system with Poisson demand and lost sales.


                        
                        
                           
                           For this system, we develop a new analysis approach that works well in many settings.


                        
                        
                           
                           Our main contribution is a more accurate analysis of the central depot.


                        
                        
                           
                           Contrary to existing methods, we therefore do not need an iterative analysis approach.


                        
                        
                           
                           A numerical experiment shows the method to be very accurate relative to simulation.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Inventory

Two-echelon system

Spare parts

Lost sales

Approximation

@&#ABSTRACT@&#


               
               
                  We consider a two-echelon, continuous review inventory system under Poisson demand and a one-for-one replenishment policy. Demand is lost if no items are available at the local warehouse, the central depot, or in the pipeline in between. We give a simple, fast and accurate approach to approximate the service levels in this system. In contrast to other methods, we do not need an iterative analysis scheme. Our method works very well for a broad set of cases, with deviations to simulation below 0.1% on average and below 0.36% for 95% of all test instances.
               
            

@&#INTRODUCTION@&#

For advanced capital goods such as medical systems or defense systems, downtime may have serious consequences in terms of production loss and safety. To maintain such systems during their life cycle, the availability of spare parts to replace failed components is crucial. The related inventory holding costs can be huge, making the optional positioning of spare parts in the supply chain an important matter. Local stock points close to the installed base guarantee fast delivery, while a single central location facilitates low safety stocks because of the risk pooling effect. This leads to the need to analyze the performance of a single-item, two-echelon inventory model, consisting of various local warehouses that are replenished from a central depot.

For (expensive) slow moving parts, it is common to model demand by a Poisson distribution and to apply a one-for-one replenishment policy, see e.g. Muckstadt (2005). Also, since system downtime should be minimized, emergency procedures are typically used in out-of-stock situations. That is, a part is supplied from another source (e.g. the manufacturer) at additional costs. This demand can thus be considered as lost to the two-echelon system. The common approach in the literature is to use an emergency shipment if the local warehouse is out of stock. In this paper, we apply an emergency procedure only if the local warehouse is out of stock and no item is available at the central depot or in the pipeline between the depot and warehouse. The reason is that we focus on a setting where the spare part may be kept in stock both at the customer sites and at a forward stocking location serving all customers in a certain region. As the lead times between the forward stocking location and the customer sites are typically short, an emergency shipment from a (remote) external supplier does not make sense if a much cheaper regular shipment is feasible.

We found several related methods in the literature for the performance evaluation of single-item two-echelon models with lost sales, as we will explain in Section 2. For our variant, we develop a new method to analyze the performance of the inventory system in Section 3. We validate our method in Section 4 through a numerical experiment. We finish with our conclusions in Section 5.

We consider literature on single-item, two-echelon supply chains, consisting of multiple local warehouses facing Poisson distributed demand, and a central depot. Each location uses a continuous review, one-for-one replenishment policy. Demand that cannot be met from stock is served using an emergency shipment from an external source with ample supply and is thus lost to the system. A one-for-one replenishment policy is not always optimal under lost sales, since holding costs can be reduced by not requesting a replenishment directly after a demand occurs Hill (1999). The cost benefits of a sophisticated policy are limited to 1–2% Bijvank and Vis (2011).

It is well known that the analysis of such lost-sales inventory systems is more complex than its equivalent under full backordering Bijvank and Vis (2011). In particular, the analysis of the central depot is complex, since (i) the order process is not Poisson, and (ii) the order arrival rate depends on the inventory states of the warehouses: warehouses only generate replenishment orders if they have stock on hand. In the literature, solutions exist for specific cases. Muckstadt and Thomas (1980) consider a model where demand at any warehouse is met using an emergency shipment from the depot if the warehouse is out of stock and the depot still has stock. If neither location has stock, an emergency shipment from an external facility is used (with the demand thus lost to the system). They approximate the demand rate at the depot by a Poisson distribution with a constant rate.

In Andersson and Melchiors (2001), demand at a warehouse is lost if the warehouse is out of stock, even if the depot still has stock on hand. They approximate the arrival process at the depot by a Poisson distribution with a rate dependent on the warehouse fill rates and evaluate performance using an iterative approach: first, they find the mean waiting time for replenishment orders at the depot from the warehouse fill rates. Then, they find the warehouse fill rates given the mean waiting time at the depot. This iterative approach is reasonably accurate, but often does not converge when a lot of stock is kept at the depot, with little stock kept locally. Such a setting is very common for expensive slow movers to benefit from risk pooling. Seifbarghy and Jokar (2006) consider a similar approach for a model under an (R,
                     Q) policy, i.e., with orders of size Q placed when the inventory position reaches a level R. The authors only consider identical warehouses and limit their experiments to settings with high service levels (fill rates of 90% or more).

All papers mentioned above use rather simple approximations for the analysis of the central depot, ignoring the fact that demand is not Poisson. Also, they ignore that the demand rate at the depot depends on the inventory levels at all warehouses. The only exception to the latter is Hill, Seifbarghy, and Smith (2007) who assume that (i) each local warehouse may have at most one outstanding order, and (ii) the shipment time from depot to warehouse is at least the central depot lead time. The second assumption is particularly restrictive, since upstream lead times tend to exceed downstream ones.

In this paper, we apply an accurate analysis of the order arrival rates and the pipeline at the central depot. We can handle non-identical local warehouses and allow any number of outstanding orders. As mentioned in the introduction, our notion of lost sales differs from literature, as we satisfy demand using the two-echelon network if an item is available in local stock, central stock or in transit in between. We find very accurate approximations for the service levels.


                        Fig. 1
                         illustrates our two-echelon model. We use index k
                        =0 for the depot and indices k
                        =1,…,
                        K for the local warehouses. Demand arriving at warehouse k is served through the two-echelon network (the regular channel) if an item is available at the warehouse, at the depot, or in the transport pipeline in between. Note that an item in the transport pipeline can only be available if it has not yet been assigned to backordered demand at the warehouse. If no such item is available, we use an external emergency channel with infinite capacity at additional costs, and the demand is lost to the network. We use the following notation and assumptions:
                           
                              •
                              The stock at location k
                                 =0,…,
                                 K is controlled using an (Sk
                                 
                                 −1,
                                 Sk
                                 ) installation stock policy.

Demand at local warehouse k occurs according to a Poisson process with rate mk
                                 .

The replenishment lead time to the depot has an exponential distribution with mean L
                                 0. This assumption facilitates an analysis using Markov chains. Also, the performance of such lost sales models is not very sensitive to the lead time distribution, see Alfredsson and Verrijdt (1999).

The transportation time from the depot to warehouse k is deterministic and equal to Lk
                                 .

The emergency shipment time to local warehouse k has an arbitrary probability distribution function with mean Tk
                                 .

Our performance indicators are (i) the fraction of warehouse k demand that is satisfied through the regular channel αk
                        , and (ii) the mean waiting time for demand satisfied through the regular channel E[Wk
                        ] (k
                        =1,…,
                        K). These performance indicators enable us to evaluate the mean downtime waiting for the spare part DTWPk
                         at local warehouse k as αkE[Wk
                        ]+(1−
                        αk
                        )Tk
                        .

@&#ANALYSIS@&#

We find E[Wk
                        ] from Little’s Law, i.e. E[Wk
                        ]=
                        E[BOk
                        ]/αkmk
                        , with BOk
                         denoting the number of items backordered at warehouse k. In turn, we find both E[BOk
                        ] and αk
                         from the distribution of the number of backorders at the depot destined for local warehouse k, which we denote by 
                           
                              
                                 
                                    BO
                                 
                                 
                                    0
                                 
                                 
                                    k
                                 
                              
                           
                        . This is the critical and novel part of our analysis. Depot backorders occur when a warehouse sends a replenishment request to the depot when the latter is out of stock. The distribution of 
                           
                              
                                 
                                    BO
                                 
                                 
                                    0
                                 
                                 
                                    k
                                 
                              
                           
                         allows us to determine the distribution of the number of outstanding orders (i.e. the pipeline) at warehouse k, which in turn allows us to determine the distribution of BOk
                        . From the distribution of the depot backorders 
                           
                              
                                 
                                    BO
                                 
                                 
                                    0
                                 
                                 
                                    k
                                 
                              
                           
                         we also directly obtain αk
                        : once the depot is out of stock, at most Sk
                         additional requests can still be met through the regular channel (either directly from warehouse stock or from items in the transport pipeline). Hence, once we have Sk
                         depot backorders for warehouse k, further demand at that warehouse is lost. We thus find αk
                         as follows:
                           
                              (1)
                              
                                 
                                    
                                       α
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 Pr
                                 {
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 <
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 }
                                 =
                                 1
                                 -
                                 Pr
                                 {
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 }
                              
                           
                        
                     

We first show how to find the distribution of 
                           
                              
                                 
                                    BO
                                 
                                 
                                    0
                                 
                                 
                                    k
                                 
                              
                           
                        . Then, we show how to find E[BOk
                        ]. For the analysis, we also need PIk
                        , the number of outstanding orders at each location (k
                        =0,…,
                        K).

We condition on the number of outstanding orders at the depot PI
                           0. Under full backordering, we can easily disaggregate the depot backorders over the warehouses: Given y
                           0
                           
                           >
                           S
                           0 outstanding orders, the conditional probability 
                              
                                 Pr
                                 {
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       x
                                    
                                    
                                       k
                                    
                                 
                                 |
                                 
                                    
                                       PI
                                    
                                    
                                       0
                                    
                                 
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       0
                                    
                                 
                                 }
                              
                            of having xk
                            backorders at the depot for warehouse k follows a binomial distribution with y
                           0
                           −
                           S
                           0 trials and “success probability” 
                              
                                 
                                    
                                       q
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       m
                                    
                                    
                                       k
                                    
                                 
                                 /
                                 
                                    
                                       ∑
                                    
                                    
                                       h
                                       =
                                       1
                                    
                                    
                                       K
                                    
                                 
                                 
                                    
                                       m
                                    
                                    
                                       h
                                    
                                 
                              
                            
                           Graves (1985). However, this does not apply for our model. Also, the arrival rates of replenishment orders at the depot are state-dependent: the conditional probability of warehouse k being out of stock given PI
                           0
                           =
                           y
                           0 increases in y
                           0, and so the arrival rate of replenishment orders at the depot decreases in y
                           0.

We now first show how to compute 
                              
                                 Pr
                                 {
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       x
                                    
                                    
                                       k
                                    
                                 
                                 |
                                 
                                    
                                       PI
                                    
                                    
                                       0
                                    
                                 
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       0
                                    
                                 
                                 }
                              
                            exactly. Using these conditional probabilities, we compute the state-dependent arrival rates at the depot and find the distribution of PI
                           0. As an approximation in this second step, we assume that these arrival rates have a Poisson distribution irrespective of the value of PI
                           0. Finally, we find the distribution of 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                              
                            as follows:
                              
                                 (2)
                                 
                                    Pr
                                    
                                       
                                          
                                             
                                                
                                                   BO
                                                
                                                
                                                   0
                                                
                                                
                                                   k
                                                
                                             
                                             =
                                             
                                                
                                                   x
                                                
                                                
                                                   k
                                                
                                             
                                          
                                       
                                    
                                    =
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             
                                                
                                                   y
                                                
                                                
                                                   0
                                                
                                             
                                             =
                                             0
                                          
                                          
                                             
                                                
                                                   S
                                                
                                                
                                                   tot
                                                
                                             
                                          
                                       
                                    
                                    Pr
                                    
                                       
                                          
                                             
                                                
                                                   BO
                                                
                                                
                                                   0
                                                
                                                
                                                   k
                                                
                                             
                                             =
                                             
                                                
                                                   x
                                                
                                                
                                                   k
                                                
                                             
                                             |
                                             
                                                
                                                   PI
                                                
                                                
                                                   0
                                                
                                             
                                             =
                                             
                                                
                                                   y
                                                
                                                
                                                   0
                                                
                                             
                                          
                                       
                                    
                                    Pr
                                    {
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    }
                                 
                              
                           In (2), Stot
                            is shorthand notation for 
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       =
                                       0
                                    
                                    
                                       K
                                    
                                 
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 .
                              
                            Note that PI
                           0 cannot exceed this value: the central depot can have at most S
                           0 orders outstanding for replenishing its stock. Once the depot is out of stock, further outstanding orders can only be realized if a warehouse still has stock on-hand, which results in backorders at the depot for that warehouse. As the number of depot backorders for warehouse k cannot exceed Sk
                           , we find in an upper bound on PI
                           0 of 
                              
                                 
                                    
                                       S
                                    
                                    
                                       0
                                    
                                 
                                 +
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       =
                                       1
                                    
                                    
                                       K
                                    
                                 
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                              
                            units.


                           
                              
                                 Step 1: compute 
                                       
                                          Pr
                                          {
                                          
                                             
                                                BO
                                             
                                             
                                                0
                                             
                                             
                                                k
                                             
                                          
                                          =
                                          
                                             
                                                x
                                             
                                             
                                                k
                                             
                                          
                                          |
                                          
                                             
                                                PI
                                             
                                             
                                                0
                                             
                                          
                                          =
                                          
                                             
                                                y
                                             
                                             
                                                0
                                             
                                          
                                          }
                                       
                                    
                                 

Note that 
                              
                                 Pr
                                 {
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 0
                                 |
                                 
                                    
                                       PI
                                    
                                    
                                       0
                                    
                                 
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       0
                                    
                                 
                                 }
                              
                            equals 1 when 
                              
                                 
                                    
                                       y
                                    
                                    
                                       0
                                    
                                 
                                 ⩽
                                 
                                    
                                       S
                                    
                                    
                                       0
                                    
                                 
                              
                           , as these orders are only meant for replenishing depot stock. For y
                           0
                           >
                           S
                           0, we have in total y
                           0
                           −
                           S
                           0 backorders at the depot which must be disaggregated over the warehouses. As each warehouse k can have at most Sk
                            backorders at the depot, the possibilities for disaggregation are limited and a binomial distribution no longer applies. For instance, if y
                           0
                           −
                           S
                           0
                           =5 depot backorders are to be allocated over 3 warehouses, with Sk
                           
                           =2 for each warehouse, the only possibilities 
                              
                                 (
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       2
                                    
                                 
                                 ,
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       3
                                    
                                 
                                 )
                              
                            are {(1,2,2), (2,1,2), (2,2,1)}.

If Sk
                           
                           →∞∀k, the joint distribution of 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                              
                            (k
                           =1,…,
                           K) when PI
                           0
                           =
                           y
                           0 is a K-category multinomial distribution with y
                           0
                           −
                           S
                           0 trials and success probabilities 
                              
                                 
                                    
                                       q
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       m
                                    
                                    
                                       k
                                    
                                 
                                 /
                                 
                                    
                                       ∑
                                    
                                    
                                       h
                                       =
                                       1
                                    
                                    
                                       K
                                    
                                 
                                 
                                    
                                       m
                                    
                                    
                                       h
                                    
                                 
                              
                           . Let us denote this probability distribution by
                              
                                 (3)
                                 
                                    p
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          K
                                       
                                    
                                    |
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    )
                                    =
                                    Pr
                                    {
                                    
                                       
                                          BO
                                       
                                       
                                          0
                                       
                                       
                                          1
                                       
                                    
                                    ⩽
                                    
                                       
                                          x
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          BO
                                       
                                       
                                          0
                                       
                                       
                                          K
                                       
                                    
                                    ⩽
                                    
                                       
                                          x
                                       
                                       
                                          K
                                       
                                    
                                    |
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    }
                                 
                              
                           Clearly, the joint probability distribution for finite values of Sk
                            has a truncated multinomial distribution, as we condition on the upper bounds Sk
                            for the depot backorders for warehouse k:
                              
                                 (4)
                                 
                                    
                                       
                                          p
                                       
                                       
                                          
                                             
                                                S
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             
                                                S
                                             
                                             
                                                K
                                             
                                          
                                       
                                    
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          K
                                       
                                    
                                    |
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          Pr
                                          {
                                          
                                             
                                                BO
                                             
                                             
                                                0
                                             
                                             
                                                1
                                             
                                          
                                          ⩽
                                          
                                             
                                                x
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             
                                                BO
                                             
                                             
                                                0
                                             
                                             
                                                K
                                             
                                          
                                          ⩽
                                          
                                             
                                                x
                                             
                                             
                                                K
                                             
                                          
                                          |
                                          
                                             
                                                PI
                                             
                                             
                                                0
                                             
                                          
                                          =
                                          
                                             
                                                y
                                             
                                             
                                                0
                                             
                                          
                                          }
                                       
                                       
                                          Pr
                                          {
                                          
                                             
                                                BO
                                             
                                             
                                                0
                                             
                                             
                                                1
                                             
                                          
                                          ⩽
                                          
                                             
                                                S
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             
                                                BO
                                             
                                             
                                                0
                                             
                                             
                                                K
                                             
                                          
                                          ⩽
                                          
                                             
                                                S
                                             
                                             
                                                K
                                             
                                          
                                          |
                                          
                                             
                                                PI
                                             
                                             
                                                0
                                             
                                          
                                          =
                                          
                                             
                                                y
                                             
                                             
                                                0
                                             
                                          
                                          }
                                       
                                    
                                    =
                                    
                                       
                                          p
                                          (
                                          
                                             
                                                x
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             
                                                x
                                             
                                             
                                                K
                                             
                                          
                                          |
                                          
                                             
                                                PI
                                             
                                             
                                                0
                                             
                                          
                                          =
                                          
                                             
                                                y
                                             
                                             
                                                0
                                             
                                          
                                          )
                                       
                                       
                                          p
                                          (
                                          
                                             
                                                S
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             
                                                S
                                             
                                             
                                                K
                                             
                                          
                                          |
                                          
                                             
                                                PI
                                             
                                             
                                                0
                                             
                                          
                                          =
                                          
                                             
                                                y
                                             
                                             
                                                0
                                             
                                          
                                          )
                                       
                                    
                                 
                              
                           The marginal probability density functions 
                              
                                 Pr
                                 {
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       x
                                    
                                    
                                       k
                                    
                                 
                                 |
                                 
                                    
                                       PI
                                    
                                    
                                       0
                                    
                                 
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       0
                                    
                                 
                                 }
                              
                           , where 
                              
                                 
                                    
                                       x
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 ∀
                                 k
                                 ⩾
                                 1
                              
                           , are:
                              
                                 (5)
                                 
                                    Pr
                                    {
                                    
                                       
                                          BO
                                       
                                       
                                          0
                                       
                                       
                                          k
                                       
                                    
                                    =
                                    
                                       
                                          x
                                       
                                       
                                          k
                                       
                                    
                                    |
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    }
                                    =
                                    
                                       
                                          p
                                       
                                       
                                          
                                             
                                                S
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             
                                                S
                                             
                                             
                                                K
                                             
                                          
                                       
                                    
                                    (
                                    
                                       
                                          S
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          k
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          S
                                       
                                       
                                          K
                                       
                                    
                                    |
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    )
                                    -
                                    
                                       
                                          p
                                       
                                       
                                          
                                             
                                                S
                                             
                                             
                                                1
                                             
                                          
                                          ,
                                          …
                                          ,
                                          
                                             
                                                S
                                             
                                             
                                                K
                                             
                                          
                                       
                                    
                                    (
                                    
                                       
                                          S
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          k
                                       
                                    
                                    -
                                    1
                                    ,
                                    …
                                    ,
                                    
                                       
                                          S
                                       
                                       
                                          K
                                       
                                    
                                    |
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    )
                                 
                              
                           To quickly evaluate p(x
                           1,…,
                           xK
                           |PI
                           0
                           =
                           y
                           0), we use the method by Levin (1981). Let n
                           =
                           y
                           0
                           −
                           S
                           0 denote the total number of depot backorders. Levin (1981) shows that:
                              
                                 (6)
                                 
                                    p
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          1
                                       
                                    
                                    ,
                                    …
                                    ,
                                    
                                       
                                          x
                                       
                                       
                                          K
                                       
                                    
                                    |
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          n
                                          !
                                       
                                       
                                          
                                             
                                                v
                                             
                                             
                                                n
                                             
                                          
                                          
                                             
                                                e
                                             
                                             
                                                -
                                                v
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      ∏
                                                   
                                                   
                                                      k
                                                      =
                                                      1
                                                   
                                                   
                                                      K
                                                   
                                                
                                             
                                             Pr
                                             {
                                             
                                                
                                                   X
                                                
                                                
                                                   k
                                                
                                             
                                             ⩽
                                             
                                                
                                                   x
                                                
                                                
                                                   k
                                                
                                             
                                             }
                                          
                                       
                                    
                                    Pr
                                    {
                                    W
                                    =
                                    n
                                    }
                                 
                              
                           In (6), v may be any real number, the Xk
                            are independent Poisson distributed random variables with means v
                           ⋅
                           qk
                           , and W is a sum of independent truncated Poisson random variables. That is, 
                              
                                 W
                                 =
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       =
                                       1
                                    
                                    
                                       K
                                    
                                 
                                 
                                    
                                       Z
                                    
                                    
                                       k
                                    
                                 
                              
                           , where Zk
                            has a truncated Poisson distribution with mean v
                           ⋅
                           qk
                            and upper bound xk
                           . As Levin (1981) states, v is a tuning parameter which may be chosen for convenience and numerical stability. He suggests setting v
                           =
                           n, because then Stirling’s approximation can be used to compute the first term in (6): 
                              
                                 
                                    
                                       n
                                       !
                                    
                                    
                                       
                                          
                                             v
                                          
                                          
                                             n
                                          
                                       
                                       
                                          
                                             e
                                          
                                          
                                             -
                                             v
                                          
                                       
                                    
                                 
                                 ≈
                                 
                                    
                                       2
                                       π
                                       n
                                    
                                 
                              
                           . Finally, Pr{W
                           =
                           n} can either be evaluated using explicit convolutions (as we do in our numerical experiments) or using a Normal approximation.


                           
                              
                                 Step 2. Compute Pr{PI
                                    0
                                    =
                                    y
                                    0}

Given y
                           0 outstanding orders at the depot, we find the arrival rate of new requests at the depot M(y
                           0) as follows: with probability 
                              
                                 1
                                 -
                                 Pr
                                 {
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 |
                                 
                                    
                                       PI
                                    
                                    
                                       0
                                    
                                 
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       0
                                    
                                 
                                 }
                              
                           , new demand at warehouse k can be met through the regular channel (either from stock at warehouse k or the depot, or because there is an item in transit from the depot to warehouse k). Then, the depot sees requests from warehouse k at rate mk
                           . Otherwise, the depot sees no arrivals from that warehouse. We thus find:
                              
                                 (7)
                                 
                                    M
                                    (
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    )
                                    =
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             k
                                             =
                                             1
                                          
                                          
                                             K
                                          
                                       
                                    
                                    
                                       
                                          m
                                       
                                       
                                          k
                                       
                                    
                                    (
                                    1
                                    -
                                    Pr
                                    {
                                    
                                       
                                          BO
                                       
                                       
                                          0
                                       
                                       
                                          k
                                       
                                    
                                    =
                                    
                                       
                                          S
                                       
                                       
                                          k
                                       
                                    
                                    |
                                    
                                       
                                          PI
                                       
                                       
                                          0
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          0
                                       
                                    
                                    }
                                    )
                                 
                              
                           Note that 
                              
                                 M
                                 (
                                 
                                    
                                       y
                                    
                                    
                                       0
                                    
                                 
                                 )
                                 =
                                 
                                    
                                       ∑
                                    
                                    
                                       k
                                       =
                                       1
                                    
                                    
                                       K
                                    
                                 
                                 
                                    
                                       m
                                    
                                    
                                       k
                                    
                                 
                              
                            when y
                           0
                           <
                           S
                           0, as the depot still has stock on-hand then. By approximating the arrival process by a Poisson process, we can model PI
                           0 as a continuous-time Markov chain (Fig. 2
                           ). In the figure, μ denotes the regular replenishment rate (i.e. μ
                           =1/L
                           0).

We find E[BOk
                           ] from the distribution of the number of outstanding orders PIk
                            to warehouse k. PIk
                            consists of (i) the items backordered at the depot for warehouse k (i.e. 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                              
                           ), and (ii) the items in transit from the depot to warehouse k, which we denote by Qk
                           . Under full backordering, these two elements are independent Graves (1985) and PIk
                            can be computed as a convolution of 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                              
                            and Qk
                           . In our model, 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                              
                            and Qk
                            are dependent: once 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                              
                           , the transport pipeline to warehouse k cannot increase further until one of the Sk
                            depot backorders is cleared. Then, new requests at warehouse k are lost to the system. Still, we can accurately approximate PIk
                            by assuming that (i) Qk
                            has a Poisson distribution with mean mkLk
                            as in the backordering model, and that (ii) 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                              
                            and Qk
                            are mutually independent when 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 <
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                              
                           . As a result, when 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 <
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                              
                            we find PIk
                            as a convolution of 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                              
                            and Qk
                           . When 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                                 =
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                              
                           , warehouse k will not receive any new demand and Qk
                            equals 0. We thus find for Pr{PIk
                           
                           =
                           yk
                           } and, hence, E[BOk
                           ]:
                              
                                 (8)
                                 
                                    Pr
                                    {
                                    
                                       
                                          PI
                                       
                                       
                                          k
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          k
                                       
                                    
                                    }
                                    =
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               
                                                                  
                                                                     x
                                                                  
                                                                  
                                                                     k
                                                                  
                                                               
                                                               =
                                                               0
                                                            
                                                            
                                                               min
                                                               {
                                                               
                                                                  
                                                                     S
                                                                  
                                                                  
                                                                     k
                                                                  
                                                               
                                                               -
                                                               1
                                                               ,
                                                               
                                                                  
                                                                     y
                                                                  
                                                                  
                                                                     k
                                                                  
                                                               
                                                               }
                                                            
                                                         
                                                      
                                                      Pr
                                                      {
                                                      
                                                         
                                                            BO
                                                         
                                                         
                                                            0
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      }
                                                      Pr
                                                      {
                                                      
                                                         
                                                            Q
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      }
                                                      ,
                                                   
                                                   
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      
                                                      ≠
                                                      
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         
                                                            
                                                               ∑
                                                            
                                                            
                                                               
                                                                  
                                                                     x
                                                                  
                                                                  
                                                                     k
                                                                  
                                                               
                                                               =
                                                               0
                                                            
                                                            
                                                               
                                                                  
                                                                     S
                                                                  
                                                                  
                                                                     k
                                                                  
                                                               
                                                               -
                                                               1
                                                            
                                                         
                                                      
                                                      Pr
                                                      {
                                                      
                                                         
                                                            BO
                                                         
                                                         
                                                            0
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      }
                                                      Pr
                                                      {
                                                      
                                                         
                                                            Q
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      -
                                                      
                                                         
                                                            x
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      }
                                                      +
                                                      Pr
                                                      {
                                                      
                                                         
                                                            BO
                                                         
                                                         
                                                            0
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      }
                                                      ,
                                                   
                                                   
                                                      
                                                         
                                                            y
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                      =
                                                      
                                                         
                                                            S
                                                         
                                                         
                                                            k
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (9)
                                 
                                    E
                                    [
                                    
                                       
                                          BO
                                       
                                       
                                          k
                                       
                                    
                                    ]
                                    =
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             
                                                
                                                   y
                                                
                                                
                                                   k
                                                
                                             
                                             =
                                             
                                                
                                                   S
                                                
                                                
                                                   k
                                                
                                             
                                             +
                                             1
                                          
                                          
                                             ∞
                                          
                                       
                                    
                                    (
                                    
                                       
                                          y
                                       
                                       
                                          k
                                       
                                    
                                    -
                                    
                                       
                                          S
                                       
                                       
                                          k
                                       
                                    
                                    )
                                    Pr
                                    {
                                    
                                       
                                          PI
                                       
                                       
                                          k
                                       
                                    
                                    =
                                    
                                       
                                          y
                                       
                                       
                                          k
                                       
                                    
                                    }
                                 
                              
                           To truncate the sum in (9), we set an upper bound on PIk
                            of 
                              
                                 
                                    
                                       S
                                    
                                    
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       g
                                    
                                    
                                       k
                                    
                                    
                                       UB
                                    
                                 
                              
                           , with Sk
                            the bound on 
                              
                                 
                                    
                                       BO
                                    
                                    
                                       0
                                    
                                    
                                       k
                                    
                                 
                              
                            and 
                              
                                 
                                    
                                       g
                                    
                                    
                                       k
                                    
                                    
                                       UB
                                    
                                 
                              
                            being an accurate upper bound on Qk
                           . We find 
                              
                                 
                                    
                                       g
                                    
                                    
                                       k
                                    
                                    
                                       UB
                                    
                                 
                              
                            when 
                              
                                 1
                                 -
                                 Pr
                                 {
                                 
                                    
                                       Q
                                    
                                    
                                       k
                                    
                                 
                                 ⩽
                                 
                                    
                                       g
                                    
                                    
                                       k
                                    
                                    
                                       UB
                                    
                                 
                                 }
                                 <
                                 ε
                              
                           .

Our aim is to evaluate the accuracy of our method. As our notion of lost demand differs from other models in the literature, a comparison to these models is only feasible for special cases. Specifically, the models by Muckstadt and Thomas (1980) and Andersson and Melchiors (2001) (MT and AM model respectively) coincide with our model for the special case that the transportation time Lk
                         from the depot to any warehouse k is 0 and the warehouse base stock levels Sk
                         are strictly positive. Then, any item taken from local stock will be replenished instantaneously if the central depot still has stock on hand. Thus, demand is only lost if both the local warehouse and the depot are out of stock, which corresponds to our model. If a warehouse is out of stock, but the depot still has stock, demand will always be lost in the AM model, but not in our model (or the MT model).

Now we validate our model in two ways. First, we compare our model to the AM and MT models for a set of problem instances that yield identical model behavior (Section 4.2). We use discrete-event simulation as a benchmark. Next, we assess the accuracy of our approximations for a wider range of problem instances by comparison to discrete-event simulation only (Section 4.3). We use a replication–deletion approach for simulation, with a warm-up period of at least 50,000 arrivals per warehouse and a data collection interval consisting of multiple runs that each have at least 0.25million arrivals per warehouse. The simulation ends once the half-width of a 95% confidence interval is at most 0.5% of the point estimate for each performance measure. By design, a simulation consists of at least 5 runs, with the average number of runs equal to 10. Below, we show the key results, with details being given in the Appendices in the online supplement.

We test 86 instances with Lk
                        
                        =0 (36 with 5 warehouses and 50 with 20 warehouses), with L
                        0 set to 10days and Tk
                         to 2days. Tables 1 and 2
                        
                         give the demand rates and stock levels. The demand rates in Table 2 are specified for groups of warehouses: warehouses 1 through 4 have the same demand rates, as do warehouses 5 through 8, etc. Our demand rates cover a broad range of values and are based on those in Muckstadt and Thomas (1980), who use industrial data.


                        Table 3
                         shows the accuracy of αk
                         and the computation times of our method (OM) and the AM model. We omit detailed results for the MT model, as these are only accurate for low demand rates. For medium and high demand rates, the relative errors are large, see Appendix A in the online supplement. Note that αk
                         fully determines the mean downtime waiting for the spare part, DTWPk
                        , as the waiting time when using the regular channel is zero. Our method is very accurate: the relative error is at most 0.2%. In contrast, the AM model is much less accurate. That model also did not converge for 5 instances with 5 warehouses and 12 with 20 warehouses, with α then iterating between 0.6 and 0.99 (in one example). We estimated performance for the AM model over the instances that converged. Convergence difficulties occur for instances with high demand rates when the depot stock level increases, while the local stock levels decrease. Appendix B in the online supplement gives further details. In contrast, our method does not rely on an iterative scheme and therefore always converges. The computation times of both methods are a fraction of a second, where those of our method clearly increase with the amount of local stock kept.

All parameters except Lk
                         are as before. For Lk
                        , we consider 0.5, 1.5 and 5days, resulting in 258 instances, of which 108 have 5 warehouses. When Lk
                         is 5days, emergency shipments are faster than replenishments from the depot. Still, as emergency supply is often costly, a service provider may opt to use them only if the regular channel cannot supply the item within reasonable time.


                        Table 4
                         shows the high accuracy for DTWPk
                        : 95% of all values has an error below 0.36%. Also, relatively large errors (around 3%) pertain to very small waiting times, e.g. a simulated value of 0.0004 and a computed value of 0.0003. The accuracy of αk
                         and the computation times are as in Table 3: neither estimate depends on the value of Lk
                        . Appendix C in the online supplement shows further details. We also tested our model on the parameters used in Muckstadt and Thomas (1980), both using the stock levels under item decomposition and those under level decomposition (see Section 4 of Muckstadt and Thomas (1980), Tables I and II). The overall relative error was at most 0.2% for αk
                         and 0.71% for DTWPk
                        , which further shows the accuracy of our model.

@&#CONCLUSIONS@&#

We developed a simple and accurate approximation for a two-echelon inventory model with Poisson demand and lost sales. In contrast to existing methods, we do not require restrictive assumptions and we do not need an iterative procedure as is typically applied in the related literature. Our approach works very well for a broad range of settings.

Supplementary data associated with this article can be found, in the online version, at http://dx.doi.org/10.1016/j.ejor.2013.12.031.


                     
                        
                           Supplementary data 1
                           
                        
                     
                  

@&#REFERENCES@&#

