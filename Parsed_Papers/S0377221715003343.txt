@&#MAIN-TITLE@&#Methods for solving the mean query execution time minimization problem

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           It is shown that greedy algorithms can solve efficiently the view selection problem.


                        
                        
                           
                           Several algorithms for the view selection problem are comprehensively compared.


                        
                        
                           
                           Improvements of used algorithms for the view selection problem are considered.


                        
                        
                           
                           The proposed methods can be used to solve the largest problems considered so far.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Decision support systems

Heuristics

OLAP

View materialization

View selection problem

@&#ABSTRACT@&#


               
               
                  One of the most significant and common techniques to accelerate user queries in multidimensional databases is view materialization. The problem of choosing an appropriate part of data structure for materialization under limited resources is known as the view selection problem. In this paper, the problem of the mean query execution time minimization under limited storage space is studied. Different heuristics based on a greedy method are examined, proofs regarding their performance are presented, and modifications for them are proposed, which not only improve the solution cost but also shorten the running time. Additionally, the heuristics and a widely used Integer Programming solver are experimentally compared with respect to the running time and the cost of solution. What distinguishes this comparison is its comprehensiveness, which is obtained by the use of performance profiles. Two computational effort reduction schemas, which significantly accelerate heuristics as well as optimal algorithms without increasing the value of the cost function, are also proposed. The presented experiments were done on a large dataset with special attention to the large problems, rarely considered in previous experiments. The main disadvantage of a greedy method indicated in literature was its long running time. The results of the conducted experiments show that the modification of the greedy algorithm together with the computational effort reduction schemas presented in this paper result in the method which finds a solution in short time, even for large lattices.
               
            

@&#INTRODUCTION@&#

On-Line Analytical Processing (OLAP) is one of the most important technologies applied in modern decision support systems. OLAP provides users with ability to perform on-line, multidimensional analysis requiring the computation of many aggregating functions, frequently on large volumes of data. The query response time is considered as the main measure of system efficiency. Many methods are used to meet the performance demands, beginning from the base OLAP characteristic – the specialized multidimensional structure, through data indexing strategies, partitioning, or query optimizers. One of the common techniques is precomputing (materializing) the part of data cube aggregates. The user queries can retrieve data from prepared structures instead of making all calculations on the fly (Chaudhuri, Dayal, & Narasayya, 2011). The problem of choosing part of data structure for materialization under limited resources is universally known as the view selection problem, or as the warehouse view selection problem when used in designing data warehouses. The solution to this problem is not as simple as materializing the cells which are most frequently requested by users’ queries, since cells are dependent on each other and some may be even not asked at all but their materialization will greatly facilitate calculation of other cells. In general case, the problem of selecting the right part of cube for materialization is NP-hard (Gupta, 1997).

To illustrate the concept of using materialized views to answer queries let us consider an example of simple star schema database (Kimball & Ross, 2002), which is derived from O’Neil, O’Neil, and Chen (2009). The schema consists of four dimension tables: CUSTOMER, SUPPLIER, PART and DATE and one fact table: LINEORDER. For simplification, assume that every dimension table has only one attribute, called the same as dimension name and fact table has only one measure Revenue. The database schema is presented in Fig. 1
                     (a). For example, a user may be interested in revenue by customers and parts, which is expressed by the following SQL query:

SELECT C.Customer, P.Part, SUM(L.Revenue)

FROM dbo.LINEORDER L, dbo.CUSTOMER C, dbo.PART P

WHERE L.Customer=C.Customer and L.Part=P.Part

GROUP BY C.Customer, P.Part

The query could be answered directly from the schema tables, but if the view grouping data by customers and parts is materialized, it could be used to save time on joins, groupings, and aggregations.

The above query could also be answered from the view which groups data by customers, parts, and suppliers (by summing revenue over all suppliers), or from the view which groups data by customers, parts, and dates (by summing revenue over all dates). The lattice framework introduced in Harinarayan, Rajaraman, and Ullman (1996) could be used to describe relations between all possible views which aggregate revenue by attributes from dimension tables. Views are represented as nodes in the lattice diagram. Every edge that connects two views means that a higher view (parent) can be calculated from a lower view (child). More precisely, if ≻ denotes a strong partial order between views,
                        1
                     
                     
                        1
                        
                           vi
                           ≻vj
                            for vi
                            ≠ vj
                            if and only if vi
                            can be answered using only the results of vj
                            – we say that vi
                            is calculated from vj
                           .
                      
                     vi
                      ≠ vj
                      and vi
                     ≻vj
                      then there is an edge between two views vi
                      and vj
                      and there is no vk
                      such that vi
                     ≻vk
                     ≻vj, vk
                      ≠ vi
                      and vk
                      ≠ vj
                     .
                        2
                     
                     
                        2
                        In fact, in order to have the lattice it is also required that for any two views the least upper bound (supremum) and the greatest lower bound (infimum) must exist. However, after Harinarayan et al. (1996) it is postulated that: (1) there is a partial order between views; (2) there exists one view from which every other view could be determined.
                      All possible views with dependencies between them, for the considered example, are presented in Fig. 1(b). Each view is labelled according to the first letter of attributes in its GROUP BY (and WHERE) clause. The ‘All’ view contains one value which aggregates all the data (note, that it can be computed from any other view). The lowest view is created by joining all dimension tables with a fact table with grouping on all attributes. In this paper, the lowest view is called the base view. Every view could be computed from the base view.

The considered problem is as follows: giving the data cube, probability distribution of user queries and maximum space allocated for views materialization, find a set of views for materialization which minimizes the mean response time of user queries. As in most papers (Asgharzadeh Talebi, Chirkova, and Fathi, 2007 and antecedent papers, Asgharzadeh Talebi, Chirkova, and Fathi, 2013; Gupta, Harinarayan, Rajaraman, and Ullman, 1997; Harinarayan et al., 1996; Kalnis, Mamoulis, and Papadias, 2002; Li, Asgharzadeh Talebi, Chirkova, and Fathi, 2005; Shukla, Deshpande, and Naughton, 1998) the analysis is restricted to a data cube, which views form OR view graph (Gupta, 1997; Gupta & Mumick, 2005). The view graph is OR if every parent view can be computed from any of its children (as in the lattice defined above). It is also assumed that each query is always answered from one view (as in Asgharzadeh Talebi et al., 2007 and antecedent papers, Asgharzadeh Talebi et al., 2013; Gupta et al., 1997; Harinarayan et al., 1996; Kalnis et al., 2002; Li et al., 2005; Shukla et al., 1998) and based on that assumption in the rest of the paper the terms query evaluation time and view evaluation time are used interchangeably. When the cube views are described as the lattice, the view selection problem corresponds to selecting nodes from the lattice diagram. As stressed in Harinarayan et al. (1996) the storage space is also a good indicator of the time needed to create the cube.

The research presented here was motivated by the conclusions from Asgharzadeh Talebi et al. (2007) and antecedent papers. Intuitively, it may be supposed that for real size problems an exponential algorithm like Branch and Bound performs much worse with respect to the execution time than a polynomial time heuristic like a greedy algorithm. However, from Asgharzadeh Talebi et al. (2007) and antecedent papers it can be learnt that branch and bound actually performs better not only with respect to the quality of solution (which is obvious) but also with respect to the execution time.

The specific contributions of the paper are as follows:

                        
                           (i)
                           Different heuristics presented in literature and based on a greedy method are compared with widely used Integer Programming procedures.

The numerical experiments presented in the paper were done on large datasets since that minimizes the influence of untypical cases. A special attention was paid to large problems rarely considered in numerical experiments discussed so far in literature.

The presented paper is the first one in which different algorithms for the view selection problem are compared comprehensively with the help of performance profiles (Dolan & Moré, 2002).

Using the example of the lattice from Karloff and Mihail (1999) it has been shown that the popular greedy algorithm presented in Gupta and Mumick (2005) has no performance guarantee for the discussed view selection problem.

Several modifications to the greedy heuristic from Gupta and Mumick (2005) have been proposed to construct the method which is better with the respect to the value of objective function and with respect to the computational time.

It has been proved that the greedy heuristic from Asgharzadeh Talebi, Chirkova, and Fathi (2006) has no performance guarantee for the query response time minimization and benefit maximization problems.

Two improvement schemas which significantly accelerate methods for solving the view selection problem without sacrificing the goal function results have been proposed (these procedures are up to three orders of magnitude faster after applying the schemas).

It has been experimentally shown that the proposed modifications of the greedy algorithm from Gupta and Mumick (2005) (including these mentioned above) lead to the procedure which finds near-optimal solutions in a very short time even for large lattices.

@&#RELATED WORK@&#

In order to discuss the view selection problem one has to refer to a data cube operator. Such an operator was introduced in Gray et al. (1997) as n-dimensional generalization of the SQL GROUP BY operator. The cube operator calculates aggregates for all subsets of dimensions from detailed data set (all views materialization). Arguably Harinarayan et al. (1996) is the first important paper investigating the view selection problem in data cubes. The goal was to minimize the average query evaluation time provided, that only the fixed number of views could be materialized.
                           3
                        
                        
                           3
                           The paper also described how to change the restriction on the fixed number of views to the restriction on space available for materialization.
                         In the paper, the lattice framework describing the relations between views in the data cube was introduced together with a greedy algorithm. In Karloff and Mihail (1999), it was proved that the solution found by the algorithm from Harinarayan et al. (1996) has no worst case performance guarantee. Moreover, it was proved that the view selection problem is inapproximable (Theorem 3). In Shukla et al. (1998), another heuristic algorithm was proposed. That algorithm guaranteed a lower execution time but at the cost of higher values of the objective function for general lattices. In Gupta (1997) and Gupta and Mumick (2005) other heuristics based on a greedy algorithm were developed. In these papers, a general problem of views selection in data warehouse was described. The authors considered the cases with additional dependencies between views and the problem of the minimization of maintenance cost. The reports on greedy algorithms inapplicability to large problems, resulted from their excessive running times, led to the design of heuristics based on randomized search – these methods trade solutions quality to reduce running times (Kalnis et al., 2002). In Paraboschi, Sindoni, Baralis, and Teniente (2003) algorithms were proposed which eliminate views that do not decrease queries cost, based on hierarchical dependencies and assuming that queries asked only for a subset of all views (it is a special case of the problem considered in this paper, where most queries are asked with probability equal to 0). A heuristic algorithm was also proposed to further reduce the search space. The view selection problem was also researched in Asgharzadeh Talebi et al. (2006, 2007, 2013), Li et al. (2005). In these papers, like in Paraboschi et al. (2003), a subset of all possible queries was considered in the objective function.

In Li et al. (2005), IP (Integer Programming) model for the view selection problem was proposed together with a numerical procedure for its solution based on CPLEX solver coupled with AMPL interface. In Asgharzadeh Talebi, Chirkova, and Fathi (2005), Asgharzadeh Talebi et al. (2006), that approach was compared with that based on a greedy algorithm. The authors concluded that the approach based on IP solvers is much more efficient than the approach which uses the greedy algorithm discussed in Harinarayan et al. (1996) – as a result large view selection problems can be solved by IP solvers. The authors also constructed examples of view selection problems for which solutions obtained by the greedy algorithm were far from optimal ones.

The paper Agrawal, Sundararaghavan, Ahmed, and Nandkeolyar (2007) examined four view selection problems which were a combination of two goal functions – total cost minimization and maximum cost minimization and two constraints – the fixed number of views and the fixed number of pages (blocks of database rows) available for materialization. The paper also presented the results of an experimental evaluation of the heuristics from Harinarayan et al. (1996) (for total cost minimization) and the LINGO solver applied to small cubes (up to 128 views).

The problem of choosing the right structures for speeding up queries execution time does not escape attention of commercial database systems producers. A system architecture and end-to-end framework for index selection in relational databases were presented in Chaudhuri and Narasayya (1997) and extended for views and index selection in Agrawal, Chaudhuri, and Narasayya (2000). In both papers, a variation of greedy heuristic was used for views/indexes selection. The description of the other commercial tools which include function providing recommendation for views materialization can be found in Dageville et al. (2004). The overview of problems connected with automatic database tuning, including view selection, was described in Chaudhuri and Narasayya (2007).

In Gupta et al. (1997) and Asgharzadeh Talebi et al. (2013), the searching space was expanded for indexes in addition to views. The review of the view selection methods can be found in Mami and Bellahsene (2012). Methods of rewriting queries using views were surveyed in Halevy (2001).

The paper is organized as follows. In Section 2 the view selection problem is formally defined and formulated as an Integer Programming problem. Then in Section 3 greedy algorithms are presented and analysed. Section 4 introduces schemas for computational effort reduction. The results of numerical experiments are discussed in Section 5. Finally, the conclusion is presented in Section 6.

As mentioned earlier, it is assumed that only one view is needed to answer each query. Furthermore, the typical cost model in which the cost of answering a query is equal to the number of tuples in a view from which it would be answered, is considered. The justification for using that cost model can be found in many papers cited in Section 1 (e.g. Asgharzadeh Talebi et al., 2007; Harinarayan et al., 1996).

Although, one cost model is considered, the algorithms described in this paper are not only limited to that model, e.g. a view size may be measured in bytes or pages instead of tuples. Formally, as in Paraboschi et al. (2003), a realistic assumption is made that if vi
                        ≻vj
                        , then ci
                         ≤ cj
                        , where ci, cj
                         are the costs of answering query from the materialized views i, j, respectively.

Let:

                           
                              •
                              
                                 G be the graph representing a lattice framework;


                                 I be the set of G nodes;


                                 pi
                                  be the probability of asking for the view i;


                                 ci
                                  be the cost of evaluating the view i when that view is materialized;


                                 si
                                  be the space occupied by the view i;


                                 S be the quantity of space available for views materialization (the storage limit);


                                 M ⊂ I be the set of views selected for materialization;


                                 O ⊂ I be the optimal set of views selected for materialization;


                                 B ⊂ I be the base view;
                                    4
                                 
                                 
                                    4
                                    Although B is a view, it is defined as a set because the algorithms presented in this paper are valid when there are many base views.
                                 
                              


                                 costi
                                 (M) be the cost of evaluating the view i using the view from G guaranteeing the cheapest way of evaluating the view i provided that the set M of views is materialized; costi
                                 (∅) means that nothing is materialized (M = ∅), that only base views are available;


                                 V be any set of views in G;


                                 B(V, M) = ∑
                                    i ∈ I
                                 
                                 picosti
                                 (M) − ∑
                                    i ∈ I
                                 
                                 picosti
                                 (M∪V) be the benefit of V with respect to M.


                        Problem definition. Given the graph G, probabilities of queries distribution pi
                         and a quantity of space available for the views materialization S find a set of the views M which minimizes the mean time needed to answer user queries. Formally:

                           
                              (1)
                              
                                 
                                    
                                       min
                                       
                                          M
                                          ∈
                                          
                                             2
                                             
                                                I
                                                ∖
                                                B
                                             
                                          
                                       
                                    
                                    
                                       
                                          ∑
                                          
                                             i
                                             ∈
                                             I
                                          
                                       
                                       
                                          p
                                          i
                                       
                                       c
                                       o
                                       s
                                       
                                          t
                                          i
                                       
                                       
                                          (
                                          M
                                          )
                                       
                                    
                                    ,
                                 
                              
                           
                        subject to the constraint:

                           
                              (2)
                              
                                 
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          M
                                       
                                    
                                    
                                       s
                                       i
                                    
                                    ≤
                                    S
                                    .
                                 
                              
                           
                        
                     

As observed in Gupta (1997), the problem corresponds to a well known k-median problem – one can easily formulate the view selection problem as a weighted k-median problem.

In order to formulate the problem as an Integer Program, it is needed to introduce more definitions. Let yj, j ∈ I be a decision variable denoting whether the view j is chosen for materialization,

                           
                              
                                 
                                    
                                       y
                                       j
                                    
                                    =
                                    
                                       {
                                       
                                          
                                             
                                                1
                                             
                                             
                                                
                                                   
                                                      if
                                                      
                                                      the
                                                      
                                                      view
                                                   
                                                   
                                                   j
                                                   
                                                   
                                                      is
                                                      
                                                      materialized
                                                   
                                                
                                             
                                          
                                          
                                             
                                                0
                                             
                                             
                                                
                                                   otherwise
                                                   ,
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        and xij, i, j ∈ I be a decision variable denoting whether the view i is computed from the view j,

                           
                              
                                 
                                    
                                       x
                                       
                                          i
                                          j
                                       
                                    
                                    =
                                    
                                       {
                                       
                                          
                                             
                                                1
                                             
                                             
                                                
                                                   if
                                                   
                                                   i
                                                   
                                                   is
                                                   
                                                   calculated
                                                   
                                                   from
                                                   
                                                   j
                                                
                                             
                                          
                                          
                                             
                                                0
                                             
                                             
                                                otherwise,
                                             
                                          
                                       
                                    
                                 
                              
                           
                        and cij, i, j ∈ I be the cost of calculating the view i from the view j. cij
                         = ∞ when the view i cannot be computed from the view j.

Now, the view selection problem can be stated as an Integer Program.

                           
                              (3)
                              
                                 
                                    
                                       min
                                       
                                          
                                             x
                                             
                                                i
                                                j
                                             
                                          
                                          ,
                                          
                                             y
                                             j
                                          
                                       
                                    
                                    
                                       ∑
                                       
                                          i
                                          ∈
                                          I
                                       
                                    
                                    
                                       ∑
                                       
                                          j
                                          ∈
                                          I
                                       
                                    
                                    
                                       
                                          p
                                          i
                                       
                                       
                                          c
                                          
                                             i
                                             j
                                          
                                       
                                       
                                          x
                                          
                                             i
                                             j
                                          
                                       
                                    
                                    ,
                                 
                              
                           
                        subject to the constraints

                           
                              
                                 
                                    
                                       
                                          
                                             
                                                ∑
                                                
                                                   j
                                                   ∈
                                                   I
                                                
                                             
                                             
                                                x
                                                
                                                   i
                                                   j
                                                
                                             
                                             =
                                             1
                                             
                                             ∀
                                             i
                                             ∈
                                             I
                                             ,
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                ∑
                                                
                                                   j
                                                   ∈
                                                   I
                                                
                                             
                                             
                                                y
                                                j
                                             
                                             
                                                s
                                                j
                                             
                                             ≤
                                             S
                                             ,
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                x
                                                
                                                   i
                                                   j
                                                
                                             
                                             ≤
                                             
                                                y
                                                j
                                             
                                             
                                             ∀
                                             
                                             i
                                             ,
                                             j
                                             ∈
                                             I
                                             ,
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                x
                                                
                                                   i
                                                   j
                                                
                                             
                                             ,
                                             
                                                y
                                                j
                                             
                                             ∈
                                             
                                                {
                                                0
                                                ,
                                                1
                                                }
                                             
                                             
                                             ∀
                                             i
                                             ,
                                             j
                                             ∈
                                             I
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        
                     

The first constraint assures that every view is computed from only one view (note that it can be computed from itself). The second constraint guarantees that the space occupied by materialized views does not exceed the total space available for materialization. The third constraint states, that the view i can be computed from the view j, only when j is chosen for materialization. The remaining constraints set variables domains. Coefficients domains are:

                           
                              
                                 
                                    
                                       c
                                       
                                          i
                                          j
                                       
                                    
                                    ∈
                                    N
                                    ,
                                    
                                    
                                       p
                                       i
                                    
                                    ∈
                                    
                                       [
                                       0
                                       ,
                                       1
                                       ]
                                    
                                    ,
                                    
                                    
                                       s
                                       j
                                    
                                    ,
                                    S
                                    >
                                    0
                                    .
                                 
                              
                           
                        In order to guarantee that the base view is always available (materialized), an additional constraint has to be added:

                           
                              
                                 
                                    
                                       y
                                       i
                                    
                                    =
                                    1
                                    
                                    ∀
                                    
                                       i
                                       ∈
                                       B
                                    
                                    .
                                 
                              
                           
                        
                     

Note that, under the adopted cost model, the cost of computing the view i from the view j is equal to the view j cost, so one can replace cij
                         with cj
                        . When the view cost and occupied space are measured in the number of tuples cj
                         = sj
                        .

The first greedy algorithm described in this paper comes from Harinarayan et al. (1996). It will be called Algorithm GreedyH.


                     
                        
                           
                        
                     
                  

Here, k is the number of views which are to be selected in addition to the base view.

In every iteration the benefit of every view not selected so far is computed and the one with the maximum value is chosen. To find out the benefit of the view v ∈ I∖(M∪B) materialization, B({v}, M), one has to:

                        
                           1.
                           Find all views which can be computed from v – let W(v) be the set consisting of these views and the view v.

For any w ∈ W(v) determine benefit on w due to v materialization denoted as Bw
                              ({v}, M) and evaluated as follows:
                                 
                                    (a)
                                    suppose that u(w) ∈ B∪M is the view such that w can be determined from u(w) in the shortest time;

if costw
                                       (u(w)), costw
                                       (v) are the costs of determining the view w from the view u(w), v respectively, then

                                          
                                             
                                                
                                                   
                                                      B
                                                      w
                                                   
                                                   
                                                      (
                                                      
                                                         {
                                                         v
                                                         }
                                                      
                                                      ,
                                                      M
                                                      )
                                                   
                                                   =
                                                   
                                                      p
                                                      w
                                                   
                                                   m
                                                   a
                                                   x
                                                   
                                                      [
                                                      c
                                                      o
                                                      s
                                                      
                                                         t
                                                         w
                                                      
                                                      
                                                         (
                                                         u
                                                         
                                                            (
                                                            w
                                                            )
                                                         
                                                         )
                                                      
                                                      −
                                                      c
                                                      o
                                                      s
                                                      
                                                         t
                                                         w
                                                      
                                                      
                                                         (
                                                         v
                                                         )
                                                      
                                                      ,
                                                      0
                                                      ]
                                                   
                                                   .
                                                
                                             
                                          
                                       
                                    

Determine the benefit due to v materialization

                                 
                                    
                                       
                                          B
                                          
                                             (
                                             
                                                {
                                                v
                                                }
                                             
                                             ,
                                             M
                                             )
                                          
                                          =
                                          
                                             ∑
                                             
                                                w
                                                ∈
                                                W
                                                (
                                                v
                                                )
                                             
                                          
                                          
                                             
                                                B
                                                w
                                             
                                             
                                                (
                                                
                                                   {
                                                   v
                                                   }
                                                
                                                ,
                                                M
                                                )
                                             
                                          
                                          .
                                       
                                    
                                 
                              
                           


                           The benefit of GreedyH Algorithm is at least (1 − 1/e) of the benefit of an optimal solution, where e is the base of the natural logarithm (
                           
                              Harinarayan et al., 1996
                           
                           ).
                        

It was noticed in Karloff and Mihail (1999) that the correct way of measuring performance is “performance ratio”, that is the cost of a solution found by a heuristic divided by the cost of an optimal solution. Furthermore, they proved the following theorems.

                        Theorem 2
                        
                           For any n ≥ 20, n = 4m, where
                           
                              
                                 m
                                 ∈
                                 N
                              
                            
                           and n is the number of views in the lattice, the performance ratio of the solution found by GreedyH is at least
                           
                              
                                 n
                                 12
                              
                            
                           (
                           
                              Karloff & Mihail, 1999
                           
                           ).
                        


                           If for some ε > 0 there is a polynomial time approximation algorithm A
                           ε 
                           for the view selection problem (from 
                           Harinarayan et al., 1996) with performance ratio at most n
                           1 − ε 
                           on all n-node, rooted, weighted dags,
                              5
                           
                           
                              5
                              dag – directed acyclic graph.
                           
                           when n is sufficiently large, then P = NP (Karloff & Mihail, 1999).

To summarize, GreedyH approximately solves the following problem: maximize the benefit from views materialization (max B(M, ∅)), subject to the constraint that k views are selected in addition to the base view.

Note, that in the considered problem, one is limited by the available space instead of the number of views, which may be materialized. A very straightforward approach to adopt the greedy algorithm to the problem was taken in Asgharzadeh Talebi et al. (2006). The authors just modified the constraint appearing in Algorithm GreedyH. It will be called Algorithm GreedyA.

                        
                           
                        
                     
                  

In papers Gupta (1997) and Gupta and Mumick (2005), a different approach to the greedy algorithm adaptation was taken – in every iteration of the algorithm a view with the maximum benefit per unit space is chosen. It results in the algorithm which will be called Algorithm GreedyG.


                     
                        
                           
                        
                     
                     
                        Theorem 4
                        
                           GreedyG finds a solution with the benefit at least (1 − 1/e) times the optimal benefit achievable using as much space as GreedyG, if it will be allowed to use space S + r, where r is the size of the largest view in G. Without the assumption to use r more units of available space, GreedyG finds a solution with the benefit at least
                           
                              
                                 
                                    1
                                    −
                                    
                                       1
                                       e
                                    
                                 
                                 2
                              
                            
                           times the optimal benefit achievable (
                           
                              Gupta & Mumick, 2005
                           
                           ).
                        

The differences between the discussed greedy algorithms are summarized in Table 1
                     .

In Appendix A, the following theorem regarding the worst case performance of GreedyA is proved.

                        Theorem 5
                        
                           In contrast to GreedyG (and GreedyH), GreedyA has no performance guarantee even for the benefit maximization problem. There is an infinite number of lattices for which the benefit of GreedyA divided by the benefit of an optimal (GreedyG) solution is less than
                           
                              
                                 2
                                 /
                                 n
                                 <
                                 
                                    
                                       1
                                       −
                                       1
                                       /
                                       e
                                    
                                    2
                                 
                              
                            
                           provided that the number of views n ≥ 7. There is also infinite number of data cube lattices for which the benefit of GreedyA divided by the benefit of an optimal (GreedyG) solution is less than
                           
                              
                                 
                                    96
                                    
                                       
                                          m
                                          3
                                       
                                       +
                                       5
                                       m
                                       +
                                       6
                                    
                                 
                                 ,
                              
                            
                           where m ≥ 5 is the number of data cube dimensions.
                        

Now, look at “quality” of a solution found by GreedyG when applied to the problem defined by (1) and (2). If there is the only one base view, v
                     0 with the cost c
                     0, and every view has the same probability of being asked (so it is omitted from formulas), then the performance ratio of the solution found by GreedyG will be:

                        
                           (4)
                           
                              
                                 
                                    
                                       c
                                       0
                                    
                                    ·
                                    
                                       |
                                       I
                                       |
                                    
                                    −
                                    B
                                    
                                       (
                                       M
                                       ,
                                       ∅
                                       )
                                    
                                 
                                 
                                    
                                       c
                                       0
                                    
                                    ·
                                    
                                       |
                                       I
                                       |
                                    
                                    −
                                    B
                                    
                                       (
                                       O
                                       ,
                                       ∅
                                       )
                                    
                                 
                              
                           
                        
                     
                  

In Appendix B, it is proved that the performance of GreedyG is even worse than the performance of GreedyH stated in Theorem 2.

                        Theorem 6
                        
                           For any n ≥ 20, where n is a multiple of 4 Algorithm GreedyG finds solution with the cost more than
                           
                              
                                 
                                    n
                                    +
                                    4
                                 
                                 12
                              
                            
                           times worse than its optimal value.
                        

As observed in Appendix B, the above theorem is also valid for GreedyA.

Although the greedy algorithms inefficiency has been proved for general lattices and it has been shown that there is no hope for finding a good suboptimal algorithm if P ≠ NP, it does not mean that such a heuristic algorithm does not exist for the view selection problem defined by data cube lattices (Theorem 3). Moreover, as the numerical results presented in Section 5 show, GreedyG chooses quite good solutions for data cube lattices.

Two schemas for improving algorithms running time without sacrificing the goal function values are described in this section. The first is the search space reduction schema – it takes advantage of the special structure of data cubes. The second is the memory usage reduction schema – it applies a suitable data structure.

The schema of the search space reduction is based on observation that some views have the same cost as their children. This behaviour is typical for data cubes and comes from two facts:

                           
                              1.
                              existence of dimensional hierarchies;

data sparsity.

The members of dimensions in the real data cubes are grouped into hierarchies. In a simple form hierarchy shows the relationships between domains of values and an operation on a hierarchy can be viewed as a mapping from a bigger to a smaller domain (Pourabbas & Rafanelli, 2003). In most papers devoted to the view selection problem, dimensional hierarchies are not considered at all (exceptions are Agrawal et al., 2007; Harinarayan et al., 1996), though they exist in database schemas used in experiments (e.g. in TPC-H – Transaction Performance Processing Council, 2010). In fact, using hierarchies has a huge impact on the number of views considered for materialization.

The data
                         sparsity means that a relatively high percentage of the possible combinations of the members from the data set’s dimensions do not contain data. 0.01 percent or even smaller percentages of possible data combinations are quite common (OLAP Council, 1995).

Based on the above observations the following theorem, on which the space reduction schema is based, can be proved.

                           Theorem 7
                           
                              If the view i can be computed from the view j (j ≠ i) and ci
                               = cj, si
                               = sj then the optimal solution cost is not changed if i is removed from search space and pj is increased by pi.
                           

First, it will be shown that it is always better to choose the view j than the view i, when one is willing to expand si
                               amount of space for materialization. Let W(i), W(j) be the sets of views which can be computed from i, j respectively, including the views i, j. Since i could be computed from j, W(i)⊂W(j). As ci
                               = cj, B({j}, M) = B({i}, M) + Bj
                              , where Bj
                               is the benefit associated with the views from W(j)∖W(i) due to j materialization. From Bj
                               ≥ 0 comes that B({j}, M) ≥ B({i}, M).

When j is materialized all views from the set W(i) can be computed from j with the cost cj
                               = ci
                              , so the benefit from i materialization is 0 and i will never be chosen for materialization. As i is removed from the search space, all queries to the view i will be answered by the view j, or the view from which j is computed. Thus, the probability associated with the view i has to be assigned to the probability of the view j.□

Since aggregates can have, at most, the same cost as the cost of views from which they are derived, all views between i and j in the lattice will have the same cost ci
                        . If all views, which lay directly below the view j (children of the view j) have cost greater than cj
                         and j is not materialized, then Bj
                         > 0 as W(j)∖W(i) contains at least the view j.

The following search space reduction algorithm eliminates all views mentioned in Theorem 7. 
                           6
                        
                        
                           6
                           The algorithm operates as heuristic reduction algorithm from Paraboschi et al. (2003) with ρ → 1+, though it works on all views and it takes into account views probabilities.
                        
                     


                        
                           
                              
                           
                        
                     

Here, CH(v) is the set of views laying directly below the view v (children of the view v) in the data cube lattice, OV is the set of omitted views, A(v) is the set of the views assigned to v.

The inseparable problem connected with the view selection problem is the cost data representation. The cost of computing one view from another is stored in |I| × |I| matrix. If the view i cannot be computed from the view j, the cost cij
                         is set to some big number which represents infinity. It ensures that a solver never assigns i to j, however, it also creates the cost matrix with many infinities, especially for lattices with many nodes. This leads to high memory usage and increases the computing time.

Instead of storing the full connection matrix |I| × |I| one can only keep information about valid connections. Likewise, only one xij
                         variable is needed for every valid connection in the IP model. As it is shown in Section 5, this leads to serious execution time reduction.

All experiments were done on the machine with 8 Quad-Core AMD Opteron™(2354) processors, 1100 megahertz, 2 gigabytes RAM running Linux Fedora release 16 (Verne).

The experiments were performed on TPC-H (decision support) database (Transaction Performance Processing Council, 2010). The database was populated with scale factor 1 (see Transaction Performance Processing Council, 2010 for the details). 3–15 attributes were chosen and on that basis data cube lattices were constructed. Special attention was paid to large problems – problems for lattices with at least 1024 views (10 attributes). For every lattice a storage limit was set: as space occupied by a base view multiplied by {1, 2, 3, 4, 5, 10}, unless it exceeded 50 percent of fully materialized data cube; as {5 percent, 10 percent, 15 percent, 20 percent, 25 percent, 50 percent} of fully materialized data cube unless it exceeded 10 times space occupied by a base view. Information about all test problems is summarized in Table 2. The examples of three problems are presented in Table 3. In all tests it was assumed that all views have the same probability of being queried. A measured time granularity was 0.01 second.

The results of the experiments are presented graphically with the help of performance profiles as developed by Dolan and Moré (2002). Performance profiles were created for the distribution functions of the performance ratios defined by two measures: the goal function and CPU time. In implementation of the discussed algorithms, CPU time is measured in seconds. In the case of CPLEX, seconds as well as ticks (unit of time measure available in CPLEX, IBM, 2013) were used. Results in ticks are shown whenever it is possible, because CPU time measured in seconds may vary for different, especially short, runs. Additionally, to mitigate influence of CPU time variations (measured in seconds) the experiments were conducted on unloaded machine and large dataset were used. Following Dolan and Moré (2002), m(i, p, s) was defined – value of the ith measure obtained by applying the solver s, from the set of the solvers SV, to the problem p from the set of the problems P (here i = 1 corresponds to the goal function and i = 2 to CPU time). Let np be the number of problems, then

                        
                           
                              
                                 r
                                 
                                    (
                                    i
                                    ,
                                    p
                                    ,
                                    s
                                    )
                                 
                                 =
                                 
                                    
                                       m
                                       (
                                       i
                                       ,
                                       p
                                       ,
                                       s
                                       )
                                    
                                    
                                       {
                                       min
                                       (
                                       i
                                       ,
                                       p
                                       ,
                                       s
                                       )
                                       :
                                       s
                                       ∈
                                       S
                                       V
                                       }
                                    
                                 
                                 ,
                              
                           
                        
                     is the performance ratio of the sth solver with respect to the pth problem. Then, the performance profile is the function which for each τ ∈ [1, ∞) assigns

                        
                           (5)
                           
                              
                                 P
                                 
                                    (
                                    i
                                    ,
                                    τ
                                    )
                                 
                                 =
                                 
                                    1
                                    
                                       n
                                       p
                                    
                                 
                                 s
                                 i
                                 z
                                 e
                                 
                                    {
                                    p
                                    ∈
                                    P
                                    :
                                    r
                                    
                                       (
                                       i
                                       ,
                                       p
                                       ,
                                       s
                                       )
                                    
                                    ≤
                                    τ
                                    }
                                 
                                 .
                              
                           
                        
                     A wall-clock time limit equal to 1 hour was set and every process which run over that limit was killed (such a process was declared unsuccessful).

Three versions of greedy algorithm were implemented in C++:

                        
                           1.
                           GreedyG

GreedyGImp (the modification of GreedyG, where it was allowed to choose only the views which do not exceed the available space-like in GreedyA)

GreedyA

As in Asgharzadeh Talebi et al. (2007), and antecedent papers, CPLEX program (IBM, 2013) was used to solve the integer programming problems. In the numerical experiments, version 12.5 of CPLEX program was applied. Unless explicitly stated, all tests were done with the following changes to default settings: (1) computation time reporting = CPU time, (2) limit on number of solutions kept in pool = 0 (collecting alternative solutions turned off), (3) collect profiling information = false. The last two settings save execution time and memory. After Asgharzadeh Talebi et al. (2007), the following relaxation in IP model was made: xij
                      ≥ 0 (instead of xij
                     , ∈{0, 1}). The relaxation reduces running time without affecting optimality of the solution. The greedy algorithms implementations run on one processor, whereas CPLEX was allowed to use multiple processors. Two versions of the above algorithms were implemented: standard one in which the cost of computing one view from another is stored in the |I| × |I| cost matrix and the second one with the list of valid connections. In CPLEX, data structure called tuples (Dong, 2009) was applied.

The best results with respect to the goal function gave GreedyGImp. A little worse was GreedyG and the third place took GreedyA. GreedyGImp returned the minimum objective function value in over 90 percent of cases, where GreedyA and GreedyG have found it in 47 percent of cases. Performance profiles for all problems are presented in Fig. 2(a). The difference between GreedyA and GreedyG (GreedyGImp) is more visible for large problems (Fig. 2(b)).

The fastest algorithm was GreedyA, it had minimal time for all cases in which any algorithm was able to solve the problem in preset time limit. This is expected behaviour – since GreedyA does not “weight” views by their size it tends to choose larger views and in turn makes fewer iterations. The results of GreedyGImp in comparison to GreedyG may come as a surprise. Why the algorithm which does more iterations is faster? Since GreedyGImp, in every iteration, checks whether a candidate view does not exceed available space, it calculates the benefit for fewer views in comparison to GreedyG. In another words, GreedyGImp does more iterations, but less calculations in every iteration. GreedyA, GreedyG, and GreedyGImp were not able to find solutions for 6, 12, and 11 problems, respectively and had the minimum time for 97 percent, 51 percent, and 54 percent of problems, respectively. Whenever GreedyG (GreedyGImp) solved the problem in minimum time, it was equal to the minimum time recorded (0.01 second). The maximum CPU time, for the problems which were solved in the preset time limit, was 200 seconds. Performance profiles for CPU time are presented in Fig. 3. Like for the goal function value, the differences between algorithms are more visible for large problems.

Greedy algorithms after improvements described in Section 4 were also compared, performance profiles are similar to the presented so far, so only short description of the findings are given. When any schema of improvement from Section 4 was applied, all algorithms were able to find a solution. There were also more cases, when the minimum time was the same for all algorithms (it did not exceed 0.01 second).

As GreedyG was not the fastest, nor the best with respect to the goal function measure, it will not be compared with other numerical methods presented later in the section.

The size of the search space after applying the search space reduction schema is presented in Table 4
                        . The maximum ratio of the search space reduction was 23.3 and its median value was equal to 2.5. For 7 out of 33 lattices search space was not reduced at all (see Table 4). The search space reduction algorithm running time was not more than 0.01 seconds for all lattices, except the largest one for which it was 0.2 second. Solutions for the reduced lattices were found from a few to thousands times faster. An exemplary comparison of CPU times for GreedyGImp is presented in Fig. 4
                        . CPU time was not reduced for all cases for the following reasons: (1) some lattices were not reduced at all; (2) some problems were solved in minimal time even before the reduction (0.01 second). The search space reduction influence on the algorithms running time is better visible for large problems (all lattices corresponding to these problems were reduced and the running times were generally longer than in the case of small problems). All 11 problems, which were not solved in the preset time limit, were solved after the space reduction.

CPU times for CPLEX are presented in Fig. 5
                        (a). The performance profiles for large problems are not shown, because all large problems were not solved before the reduction and after the reduction 30 out of 84 (36 percent) problems were solved. The effect of the search space reduction is more spectacular for CPLEX as its running times were longer, thus the effect of small times rounding is not observed.

The problems employing the list of valid connections instead of the cost matrix were solved from a few to hundreds times faster. The exemplary comparison of CPU times for GreedyGImp is presented in Fig. 6
                        . All problems, for which the CPU time reduction was not observed, were solved in minimal time reported – 0.01 second. Like in the search space reduction case, the data structure influence on computation time is better visible for problems solved with higher computational effort, i.e., in the case of large problems solved by GreedyGImp algorithm and by CPLEX solver (Fig. 5(b)). For GreedyGImp, all problems which were not solved by employing the cost matrix, were solved by using the valid connections list. For CPLEX, all large problems using the model with the cost matrix were not solved, whereas 46 out of 84 (55 percent) problems were solved when the model with the valid connections list was applied.

In Figs. 7
                         and 8
                         the search space reduction and the data structure influence are presented for GreedyGImp and CPLEX for all and large problems. The combination of the proper data structure with the search space reduction gives from a few to thousands times CPU time improvement. Also many problems which were not solved before application of the schemas were solved: all of 11 unsolved problems for GreedyGImp and 72 out of 84 (86 percent) for CPLEX. The largest CPU time for GreedyGImp was 2.7 seconds (0.15 second for GreedyA). From the performance profiles one can also see that the data representation has greater influence on running time than the search space reduction for the problems used in experiments.

Both algorithms based on the greedy method, especially GreedyGImp, found very good solutions (Fig. 9
                        ). In particular, GreedyGImp found optimal solutions for 57 percent of all problems and only for 4 percent of problems its solutions were more than 1 percent worse than optimal ones (the maximum difference was 28 percent). GreedyA found optimal solutions for 46 percent of problems and for 21 percent of problems its solutions were more than 1 percent worse than optimal ones (the maximum difference was 9 percent). For large problems, GreedyGImp found optimal values in 20 percent of cases, all other solutions were not more than 1 percent worse than optimal ones. GreedyA did not find an optimal solution for any large problem and 56 percent of solutions were different from optimal solutions by more than 1 percent.

Let us consider now the comparison of CPU times for GreedyA (GreedyGImp) and CPLEX. As greedy algorithms did not find optimal solutions for all problems, numerical tests were performed in which the optimal solver stopped after it found a solution within the distance of 1 percent from an optimal solution. The results are presented in Fig. 10
                        . The computational efforts for greedy algorithms in comparison to CPLEX solver were substantially lower. Almost all large problems were solved in a fraction of a second by both greedy algorithms, where CPLEX needed minutes. Compared to CPLEX solver results, the differences between GreedyA and GreedyGImp CPU times were negligible.

Numerical experiments with problems to which relaxation was applied (integer decision variables were replaced by continuous decision variables) were also conducted. It was found out that the relaxation leads to similar values of the goal function in most cases. Only for 6 percent of cases, the difference was larger than 1 percent (the maximum difference was 18 percent), and for 38 percent the difference was smaller than 0.01 percent (default CPLEX tolerance on the gap between the best integer objective and the objective of the best node remaining – IBM, 2013). 6 out of 12 problems unsolved for IP model were solved for its LP relaxation. As one would expect, the substantially less computational effort was required to solve the relaxed problems. They were solved from a few to 1143 times faster than the original IP problems.

Let us compare now the results of conducted experiments with findings from Asgharzadeh Talebi et al. (2007) and antecedent papers. The obtained results for the mean view evaluation cost are generally the same as theirs. The main difference is that they defined the family of problem instances for which GreedyA finds solution far from optimal. Their poor solutions are the result of their algorithm characteristic – it chooses the views based only on the benefit (not the benefit per unit space) and can be improved if GreedyGImp is used instead of GreedyA. The results reported in this paper regarding greedy heuristics and IP solver running times do not confirm findings from Asgharzadeh Talebi et al. (2007). The biggest difference is in their results for 7-attribute lattice in which every node has an associated user query (like in experiments discussed in this paper), CPLEX solved it in 0.23 seconds, whereas GreedyA in more than 16 hours (see Asgharzadeh Talebi et al., 2007). In experiments presented in this paper, problems with 7-attribute lattices, before applying the improvement schemas, were solved from 0.8 second to 6.8 seconds by CPLEX and in 0.01 second by GreedyGImp. As there is no access to their heuristic implementation code (nor the dataset of problems used in their experiments), one may only describe the probable sources of discrepancies. The first reason for such discrepancies may be that they stumble on some special case lattices. Their experiments were limited to few view lattices for which small differences between IP problems and their LP relaxation execution times were reported–the results reported in this paper show that substantially less computational effort is required to solve problems with the LP relaxations. Their experiments were also conducted on smaller problems with maximum hundred of thousands variables, where we also solved problems with billions of variables. The differences in greedy execution time suggest that the poor greedy performance may be the result of the specific implementation rather than the algorithm itself.

The good results of the heuristic based on a greedy method in regards to the goal function and the evaluation time (in comparison to “standard” optimization software) were also reported in Agrawal et al. (2007), though their findings could not be generalized as experiments were limited to small data cubes (up to 128 views). They also considered only one type of a heuristic (from Harinarayan et al., 1996).

@&#CONCLUSIONS@&#

The paper presents analysis of exact and inexact methods for solving the mean view evaluation time minimization problem. Different heuristics, based on greedy method, presented in literature and standard IP software are compared with the help of performance profiles. Modifications to GreedyG algorithm are proposed, which not only improve its solution cost but also decrease the algorithm running time. Furthermore, two theorems regarding greedy algorithms performance are proved. Additionally, two schemas for reduction of the computational effort are proposed, they tremendously accelerate heuristic as well as optimal algorithms running times without sacrificing the goal function results (these times are up to three orders of magnitude lower after applying the schemas). Arguably, for the first time, the effect of specialized data structure usage on the algorithms computational effort for the view selection problem is discussed. The schema of the search space reduction described in this paper, in contrast to the method from Asgharzadeh Talebi et al. (2007), works for general problems without assumptions regarding a set of possible queries (in particular their method is inapplicable, if all queries from the data cube lattice are possible). The tests presented in this paper have been made on large dataset and that should minimize the influence of untypical cases. Special attention has been paid to large lattices (rarely considered in previous experiments).

Although the paper provides the proof that GreedyG algorithm has no worst case performance guarantee for the cost minimization problem, enclosed numerical results show that in practice the proposed modification of GreedyG resulting in GreedyGImp finds near optimal solutions. Moreover, in combination with the proposed improvement schemas it finds solution in time shorter than a few seconds, even for large lattices. GreedyGImp could be used instead of faster heuristics (Kalnis et al., 2002; Shukla et al., 1998) which find solutions with worse mean query execution times.


                     
                        Proof of Theorem 5
                        To prove Theorem 5 the lattice from Fig. A.1
                            is used. There are n ≥ 7 views. The available space S = n − 2, every view has the same probability of being asked (so it is omitted from formulas).

At the beginning, every view could be computed from the base view with the cost n − 1. When the view b is chosen for materialization, the views ci
                           , where i = 1, 2, …, n − 2, could be computed from b with cost n − 2. The benefit of b materialization is (for the simplicity of presentation the base view is omitted from the calculations)

                              
                                 (A.1)
                                 
                                    
                                       
                                          
                                             
                                                B
                                                (
                                                {
                                                b
                                                }
                                                ,
                                                ∅
                                                )
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                (
                                                n
                                                −
                                                1
                                                )
                                                (
                                                n
                                                −
                                                1
                                                )
                                                −
                                                (
                                                n
                                                −
                                                1
                                                )
                                                (
                                                n
                                                −
                                                2
                                                )
                                             
                                          
                                       
                                       
                                          
                                          
                                             =
                                          
                                          
                                             
                                                (
                                                n
                                                −
                                                1
                                                )
                                                (
                                                n
                                                −
                                                1
                                                −
                                                n
                                                +
                                                2
                                                )
                                                =
                                                n
                                                −
                                                1
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           The benefit of any view ci
                            materialization is

                              
                                 (A.2)
                                 
                                    
                                       
                                          
                                             
                                                B
                                                (
                                                
                                                   {
                                                   
                                                      c
                                                      i
                                                   
                                                   }
                                                
                                                ,
                                                ∅
                                                )
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                (
                                                n
                                                −
                                                1
                                                )
                                                (
                                                n
                                                −
                                                1
                                                )
                                                −
                                                [
                                                (
                                                n
                                                −
                                                2
                                                )
                                                (
                                                n
                                                −
                                                1
                                                )
                                                +
                                                1
                                                ]
                                             
                                          
                                       
                                       
                                          
                                          
                                             =
                                          
                                          
                                             
                                                (
                                                n
                                                −
                                                1
                                                )
                                                (
                                                n
                                                −
                                                1
                                                −
                                                n
                                                +
                                                2
                                                )
                                                −
                                                1
                                                =
                                                n
                                                −
                                                2
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           As the benefit of the view b is the largest, the view b is chosen for materialization by GreedyA. As sb
                            = n − 2 = S GreedyA stops with the solution M = {b}. However, the optimal solution O is to materialize all ci
                            views with the benefit

                              
                                 (A.3)
                                 
                                    
                                       
                                          
                                             
                                                B
                                                (
                                                
                                                   {
                                                   
                                                      c
                                                      1
                                                   
                                                   ,
                                                   
                                                      c
                                                      2
                                                   
                                                   ,
                                                   …
                                                   ,
                                                   
                                                      c
                                                      
                                                         n
                                                         −
                                                         2
                                                      
                                                   
                                                   }
                                                
                                                ,
                                                ∅
                                                )
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                (
                                                n
                                                −
                                                1
                                                )
                                                (
                                                n
                                                −
                                                1
                                                )
                                                −
                                                [
                                                (
                                                n
                                                −
                                                2
                                                )
                                                1
                                                +
                                                n
                                                −
                                                1
                                                ]
                                             
                                          
                                       
                                       
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   n
                                                   2
                                                
                                                −
                                                4
                                                n
                                                +
                                                4
                                                =
                                                
                                                   
                                                      (
                                                      n
                                                      −
                                                      2
                                                      )
                                                   
                                                   2
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           The benefit of M to O is

                              
                                 (A.4)
                                 
                                    
                                       
                                          
                                             B
                                             (
                                             M
                                             ,
                                             ∅
                                             )
                                          
                                          
                                             B
                                             (
                                             O
                                             ,
                                             ∅
                                             )
                                          
                                       
                                       =
                                       
                                          
                                             n
                                             −
                                             1
                                          
                                          
                                             
                                                (
                                                n
                                                −
                                                2
                                                )
                                             
                                             2
                                          
                                       
                                       <
                                       
                                          2
                                          n
                                       
                                       <
                                       
                                          
                                             1
                                             −
                                             1
                                             /
                                             e
                                          
                                          2
                                       
                                       ,
                                    
                                 
                              
                           for n ≥ 7. GreedyG, in contrast to GreedyA, will choose the optimal set of views for the materialization. The benefit of any ci
                            view materialization per unit space is n − 2, whereas benefit of the view b materialization per unit space is 
                              
                                 
                                    
                                       n
                                       −
                                       i
                                    
                                    
                                       n
                                       −
                                       2
                                    
                                 
                                 ,
                              
                            where i = 1, 2, …, n − 2 is the iteration number of the algorithm.

Let us analyse now GreedyA efficiency for special cases such as data cube lattices. The data cube lattice with m ≥ 5 dimensions, each with only one attribute is considered. It is assumed that views which group data by one attribute have the same cost x ≥ 2 while the views which group data by two attributes have the same cost x
                           2. Generally, the views which group data by i attributes have the cost xi
                           . As every dimension in the considered exemplary lattice contains just one attribute, for every dimension, it is possible to aggregate data by that attribute. As there are m dimensions, there are 2
                              m
                            ways of grouping the data (views). For a view which groups data by i attributes, data are already aggregated for m − i dimensions, so there is just i attributes left, for which aggregation is possible. In consequence, there are just 2
                              i
                            views which can be computed from such views (including views themselves). The number of views which group data by i attributes is equal to the number of ways i attributes can be picked out from m attributes. Furthermore, it is assumed that the space available for materialization is equal to x
                           4. The example of such a lattice is presented in Fig. A.2
                            and the benefits of the views grouping are presented in Table A.1
                           .

Let x be such that the sum of the sizes of views grouping data by less than four attributes is less or equal to the size of views grouping data by four attributes:

                              
                                 (A.5)
                                 
                                    
                                       1
                                       +
                                       m
                                       x
                                       +
                                       
                                          
                                             (
                                             m
                                             −
                                             1
                                             )
                                             m
                                          
                                          2
                                       
                                       
                                          x
                                          2
                                       
                                       +
                                       
                                          
                                             (
                                             m
                                             −
                                             2
                                             )
                                             (
                                             m
                                             −
                                             1
                                             )
                                             m
                                          
                                          6
                                       
                                       
                                          x
                                          3
                                       
                                       ≤
                                       
                                          x
                                          4
                                       
                                       .
                                    
                                 
                              
                           Later in the proof it will be shown that there is an infinite number of x which satisfies inequality (A.5).

GreedyA chooses any view which groups data by four attributes with the benefit B(M, ∅) = 16xm
                            − 16x
                           4 as it has the benefit greater than the benefit of any view which groups data by i = {0, 1, 2, 3} attributes:

                              
                                 (A.6)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   2
                                                   4
                                                
                                                
                                                   (
                                                   
                                                      x
                                                      m
                                                   
                                                   −
                                                   
                                                      x
                                                      4
                                                   
                                                   )
                                                
                                                −
                                                
                                                   2
                                                   i
                                                
                                                
                                                   (
                                                   
                                                      x
                                                      m
                                                   
                                                   −
                                                   
                                                      x
                                                      i
                                                   
                                                   )
                                                
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   (
                                                   
                                                      2
                                                      4
                                                   
                                                   −
                                                   
                                                      2
                                                      i
                                                   
                                                   )
                                                
                                                
                                                   x
                                                   m
                                                
                                                −
                                                
                                                   2
                                                   4
                                                
                                                
                                                   x
                                                   4
                                                
                                                +
                                                
                                                   2
                                                   i
                                                
                                                
                                                   x
                                                   i
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   x
                                                   4
                                                
                                                
                                                   [
                                                   
                                                      (
                                                      
                                                         2
                                                         4
                                                      
                                                      −
                                                      
                                                         2
                                                         i
                                                      
                                                      )
                                                   
                                                   
                                                      x
                                                      
                                                         m
                                                         −
                                                         4
                                                      
                                                   
                                                   −
                                                   16
                                                   +
                                                   
                                                      2
                                                      i
                                                   
                                                   
                                                      x
                                                      
                                                         i
                                                         −
                                                         4
                                                      
                                                   
                                                   ]
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                             ≥
                                          
                                          
                                             
                                                
                                                   x
                                                   4
                                                
                                                
                                                   [
                                                   16
                                                   −
                                                   16
                                                   +
                                                   
                                                      2
                                                      i
                                                   
                                                   
                                                      x
                                                      
                                                         i
                                                         −
                                                         4
                                                      
                                                   
                                                   ]
                                                
                                                =
                                                
                                                   2
                                                   i
                                                
                                                
                                                   x
                                                   i
                                                
                                                >
                                                0
                                                ,
                                             
                                          
                                       
                                    
                                 
                              
                           since 24 − 2
                              i
                            ≥ 8, m − 4 ≥ 1 and x ≥ 2.

In the optimal solution all views which group data by less than four attributes are chosen with the benefit

                              
                                 (A.7)
                                 
                                    
                                       
                                          
                                             
                                                B
                                                (
                                                O
                                                ,
                                                ∅
                                                )
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   (
                                                   1
                                                   +
                                                   m
                                                   +
                                                   
                                                      
                                                         (
                                                         m
                                                         −
                                                         1
                                                         )
                                                         m
                                                      
                                                      2
                                                   
                                                   +
                                                   
                                                      
                                                         (
                                                         m
                                                         −
                                                         2
                                                         )
                                                         (
                                                         m
                                                         −
                                                         1
                                                         )
                                                         m
                                                      
                                                      6
                                                   
                                                   )
                                                
                                                
                                                   x
                                                   m
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                          
                                             
                                                −
                                                (
                                                1
                                                +
                                                m
                                                x
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   2
                                                
                                                
                                                   x
                                                   2
                                                
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      2
                                                      )
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   6
                                                
                                                
                                                   x
                                                   3
                                                
                                                )
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

Let us define the following variables:

                              
                                 (A.8)
                                 
                                    
                                       
                                          
                                             
                                                z
                                                1
                                             
                                          
                                          
                                             
                                                =
                                                1
                                                +
                                                m
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   2
                                                
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      2
                                                      )
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   6
                                                
                                                =
                                                
                                                   
                                                      
                                                         m
                                                         3
                                                      
                                                      +
                                                      5
                                                      m
                                                      +
                                                      6
                                                   
                                                   6
                                                
                                                ,
                                             
                                          
                                       
                                       
                                          
                                             
                                                z
                                                2
                                             
                                          
                                          
                                             
                                                =
                                                1
                                                +
                                                m
                                                x
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   2
                                                
                                                
                                                   x
                                                   2
                                                
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      2
                                                      )
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   6
                                                
                                                
                                                   x
                                                   3
                                                
                                                ,
                                             
                                          
                                       
                                    
                                 
                              
                           then

                              
                                 (A.9)
                                 
                                    
                                       
                                          
                                             B
                                             (
                                             M
                                             ,
                                             ∅
                                             )
                                          
                                          
                                             B
                                             (
                                             O
                                             ,
                                             ∅
                                             )
                                          
                                       
                                       =
                                       
                                          
                                             16
                                             
                                                x
                                                m
                                             
                                             −
                                             16
                                             
                                                x
                                                4
                                             
                                          
                                          
                                             
                                                z
                                                1
                                             
                                             
                                                x
                                                m
                                             
                                             −
                                             
                                                z
                                                2
                                             
                                          
                                       
                                       .
                                    
                                 
                              
                           According to (A.5) 
                           z
                           2 ≤ x
                           4 thus the following holds

                              
                                 (A.10)
                                 
                                    
                                       
                                          
                                             B
                                             (
                                             M
                                             ,
                                             ∅
                                             )
                                          
                                          
                                             B
                                             (
                                             O
                                             ,
                                             ∅
                                             )
                                          
                                       
                                       ≤
                                       
                                          
                                             16
                                             
                                                x
                                                m
                                             
                                             −
                                             16
                                             
                                                x
                                                4
                                             
                                          
                                          
                                             
                                                z
                                                1
                                             
                                             
                                                x
                                                m
                                             
                                             −
                                             
                                                x
                                                4
                                             
                                          
                                       
                                       <
                                       
                                          16
                                          
                                             z
                                             1
                                          
                                       
                                       =
                                       
                                          96
                                          
                                             
                                                m
                                                3
                                             
                                             +
                                             5
                                             m
                                             +
                                             6
                                          
                                       
                                       <
                                       
                                          
                                             (
                                             1
                                             −
                                             1
                                             /
                                             e
                                             )
                                          
                                          2
                                       
                                       ,
                                    
                                 
                              
                           for large enough m.□

Assume that x ≥ m. Since

                              
                                 (A.11)
                                 
                                    
                                       
                                          
                                          
                                          
                                             
                                                m
                                                x
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   2
                                                
                                                
                                                   x
                                                   2
                                                
                                                ≤
                                                
                                                   x
                                                   2
                                                
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   2
                                                
                                                
                                                   x
                                                   2
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                          
                                             
                                                
                                                =
                                                
                                                   
                                                      
                                                         m
                                                         2
                                                      
                                                      −
                                                      m
                                                      +
                                                      2
                                                   
                                                   2
                                                
                                                
                                                   x
                                                   2
                                                
                                                <
                                                
                                                   
                                                      m
                                                      2
                                                   
                                                   2
                                                
                                                
                                                   x
                                                   2
                                                
                                                ≤
                                                
                                                   m
                                                   2
                                                
                                                
                                                   x
                                                   3
                                                
                                                ,
                                             
                                          
                                       
                                    
                                 
                              
                           then

                              
                                 (A.12)
                                 
                                    
                                       
                                          
                                          
                                          
                                             
                                                1
                                                +
                                                m
                                                x
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   2
                                                
                                                
                                                   x
                                                   2
                                                
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      2
                                                      )
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   6
                                                
                                                
                                                   x
                                                   3
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                          
                                             
                                                
                                                <
                                                1
                                                +
                                                
                                                   m
                                                   2
                                                
                                                
                                                   x
                                                   3
                                                
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      2
                                                      )
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   6
                                                
                                                
                                                   x
                                                   3
                                                
                                                =
                                                1
                                                +
                                                
                                                   
                                                      
                                                         m
                                                         3
                                                      
                                                      −
                                                      3
                                                      
                                                         m
                                                         2
                                                      
                                                      +
                                                      5
                                                      m
                                                   
                                                   6
                                                
                                                
                                                   x
                                                   3
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           Now, these values of m for which the following inequality is true (with x ≥ m) are determined:

                              
                                 (A.13)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         1
                                                         +
                                                         
                                                            
                                                               
                                                                  m
                                                                  3
                                                               
                                                               −
                                                               3
                                                               
                                                                  m
                                                                  2
                                                               
                                                               +
                                                               5
                                                               m
                                                            
                                                            6
                                                         
                                                         
                                                            x
                                                            3
                                                         
                                                         ≤
                                                         
                                                            
                                                               
                                                                  m
                                                                  3
                                                               
                                                               −
                                                               3
                                                               
                                                                  m
                                                                  2
                                                               
                                                               +
                                                               2
                                                               m
                                                            
                                                            5
                                                         
                                                         
                                                            x
                                                            3
                                                         
                                                         .
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

To this end, let us consider the equivalences

                              
                                 (A.14)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                   
                                                      
                                                         1
                                                         +
                                                         
                                                            
                                                               5
                                                               (
                                                               
                                                                  m
                                                                  3
                                                               
                                                               −
                                                               3
                                                               
                                                                  m
                                                                  2
                                                               
                                                               +
                                                               5
                                                               m
                                                               )
                                                            
                                                            30
                                                         
                                                         
                                                            x
                                                            3
                                                         
                                                         ≤
                                                         
                                                            
                                                               6
                                                               (
                                                               
                                                                  m
                                                                  3
                                                               
                                                               −
                                                               3
                                                               
                                                                  m
                                                                  2
                                                               
                                                               +
                                                               2
                                                               m
                                                               )
                                                            
                                                            30
                                                         
                                                         
                                                            x
                                                            3
                                                         
                                                         ,
                                                      
                                                   
                                                
                                                
                                                   
                                                   
                                                      
                                                         
                                                         1
                                                         ≤
                                                         
                                                            
                                                               6
                                                               
                                                                  m
                                                                  3
                                                               
                                                               −
                                                               18
                                                               
                                                                  m
                                                                  2
                                                               
                                                               +
                                                               12
                                                               m
                                                               −
                                                               5
                                                               
                                                                  m
                                                                  3
                                                               
                                                               +
                                                               15
                                                               
                                                                  m
                                                                  2
                                                               
                                                               −
                                                               25
                                                               m
                                                            
                                                            30
                                                         
                                                         
                                                            x
                                                            3
                                                         
                                                         ,
                                                      
                                                   
                                                
                                                
                                                   
                                                   
                                                      
                                                         
                                                         30
                                                         ≤
                                                         m
                                                         
                                                            (
                                                            
                                                               m
                                                               2
                                                            
                                                            −
                                                            3
                                                            m
                                                            −
                                                            13
                                                            )
                                                         
                                                         
                                                            x
                                                            3
                                                         
                                                         .
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           The smallest integer m for which (m
                           2 − 3m − 13) is positive equals 6. Since by assumption x ≥ m, inequality (A.14) is true for any m ≥ 6. From (A.12) and (A.13) one can get

                              
                                 (A.15)
                                 
                                    
                                       
                                          
                                          
                                             
                                                1
                                                +
                                                m
                                                x
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   2
                                                
                                                
                                                   x
                                                   2
                                                
                                                +
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      2
                                                      )
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   6
                                                
                                                
                                                   x
                                                   3
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                             
                                                
                                                <
                                                
                                                   
                                                      (
                                                      m
                                                      −
                                                      2
                                                      )
                                                      (
                                                      m
                                                      −
                                                      1
                                                      )
                                                      m
                                                   
                                                   5
                                                
                                                
                                                   x
                                                   3
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           Inequality (A.5) is surely true when the following inequality is true

                              
                                 (A.16)
                                 
                                    
                                       
                                          
                                             (
                                             m
                                             −
                                             2
                                             )
                                             (
                                             m
                                             −
                                             1
                                             )
                                             m
                                          
                                          5
                                       
                                       
                                          x
                                          3
                                       
                                       ≤
                                       
                                          x
                                          4
                                       
                                       .
                                    
                                 
                              
                           Inequality (A.16) is satisfied if 
                              
                                 x
                                 ≥
                                 
                                    
                                       (
                                       m
                                       −
                                       2
                                       )
                                       (
                                       m
                                       −
                                       1
                                       )
                                       m
                                    
                                    5
                                 
                              
                           . There is an infinite number of such x. Notice that for m = 5, inequality (A.5) is true for any x ≥ 11.□

In contrast to GreedyA, GreedyG chooses the optimal solution. It can be proved by dividing the benefit of the view chosen by GreedyA per unit space, i.e., 
                        
                           
                              2
                              4
                           
                           
                              
                                 (
                                 
                                    x
                                    m
                                 
                                 −
                                 
                                    x
                                    4
                                 
                                 )
                              
                              
                                 x
                                 4
                              
                           
                           ,
                        
                      by a benefit of a view which groups data by i = {0, 1, 2, 3} attributes, i.e., 
                        
                           
                              2
                              i
                           
                           
                              
                                 (
                                 
                                    x
                                    m
                                 
                                 −
                                 
                                    x
                                    i
                                 
                                 )
                              
                              
                                 x
                                 i
                              
                           
                        
                      (see Table A.1):

                        
                           (A.17)
                           
                              
                                 
                                    
                                       
                                          
                                             
                                                2
                                                4
                                             
                                             
                                                2
                                                i
                                             
                                          
                                          
                                             
                                                
                                                   (
                                                   
                                                      x
                                                      m
                                                   
                                                   −
                                                   
                                                      x
                                                      4
                                                   
                                                   )
                                                
                                                
                                                   x
                                                   i
                                                
                                             
                                             
                                                
                                                   (
                                                   
                                                      x
                                                      m
                                                   
                                                   −
                                                   
                                                      x
                                                      i
                                                   
                                                   )
                                                
                                                
                                                   x
                                                   4
                                                
                                             
                                          
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             2
                                             
                                                4
                                                −
                                                i
                                             
                                          
                                          
                                             
                                                (
                                                
                                                   x
                                                   m
                                                
                                                −
                                                
                                                   x
                                                   4
                                                
                                                )
                                             
                                             
                                                (
                                                
                                                   x
                                                   m
                                                
                                                −
                                                
                                                   x
                                                   i
                                                
                                                )
                                             
                                          
                                          
                                             x
                                             
                                                i
                                                −
                                                4
                                             
                                          
                                          =
                                          
                                             
                                                
                                                   x
                                                   m
                                                
                                                −
                                                
                                                   x
                                                   4
                                                
                                             
                                             
                                                
                                                   x
                                                   m
                                                
                                                −
                                                
                                                   x
                                                   i
                                                
                                             
                                          
                                          
                                             
                                                x
                                                
                                                   i
                                                   −
                                                   4
                                                
                                             
                                             
                                                2
                                                
                                                   i
                                                   −
                                                   4
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                   m
                                                
                                                −
                                                
                                                   x
                                                   4
                                                
                                             
                                             
                                                
                                                   x
                                                   m
                                                
                                                −
                                                
                                                   x
                                                   i
                                                
                                             
                                          
                                          
                                             
                                                (
                                                
                                                   x
                                                   2
                                                
                                                )
                                             
                                             
                                                i
                                                −
                                                4
                                             
                                          
                                          <
                                          1
                                          ,
                                       
                                    
                                 
                              
                           
                        
                     as 
                        
                           
                              
                                 
                                    x
                                    m
                                 
                                 −
                                 
                                    x
                                    4
                                 
                              
                              
                                 
                                    x
                                    m
                                 
                                 −
                                 
                                    x
                                    i
                                 
                              
                           
                           <
                           1
                           ,
                           
                              x
                              2
                           
                           ≥
                           1
                        
                      and 
                        
                           
                              
                                 (
                                 
                                    x
                                    2
                                 
                                 )
                              
                              
                                 i
                                 −
                                 4
                              
                           
                           ≤
                           1
                        
                     .

Note that it does not mean that GreedyG always finds a set of views with the benefit greater than GreedyA does. There are cases where GreedyG solution has the benefit lesser than GreedyA solution.


                     
                        Proof of Theorem 6
                        To prove Theorem 6 consider the lattice example from Karloff and Mihail (1999) (Fig. B.1
                           ). Each branch of the lattice has 
                              
                                 N
                                 =
                                 
                                    
                                       n
                                       −
                                       4
                                    
                                    4
                                 
                              
                            nodes where n ≥ 20 is some natural number. The available space S = 4, every view has the same probability of being asked (so it will be omitted from formulas) and it is not possible to use more space than is available for the materialization.

At the beginning every view could be computed from the base view with the cost 36N. The lattice has 4N + 4 views, so the total cost is

                              
                                 (B.1)
                                 
                                    
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          
                                             4
                                             N
                                             +
                                             4
                                          
                                       
                                       
                                          36
                                          N
                                       
                                       =
                                       
                                          (
                                          4
                                          N
                                          +
                                          4
                                          )
                                       
                                       36
                                       N
                                       .
                                    
                                 
                              
                           
                        

When a
                           1 is chosen for the materialization the views c
                           
                              i1 and c
                           
                              i2, where i = 1, 2, …, N, are calculated from a
                           1 instead of from the base view with the cost 2. When a
                           2 is chosen it has the same benefit as a
                           1. The benefit from the a
                           1, or a
                           2 materializations per space occupied by that views is:

                              
                                 (B.2)
                                 
                                    
                                       
                                          
                                             B
                                             (
                                             
                                                {
                                                
                                                   a
                                                   1
                                                
                                                }
                                             
                                             ,
                                             ∅
                                             )
                                          
                                          
                                             s
                                             
                                                a
                                                1
                                             
                                          
                                       
                                       =
                                       
                                          
                                             B
                                             (
                                             
                                                {
                                                
                                                   a
                                                   2
                                                
                                                }
                                             
                                             ,
                                             ∅
                                             )
                                          
                                          
                                             s
                                             
                                                a
                                                2
                                             
                                          
                                       
                                       =
                                       
                                          
                                             36
                                             N
                                             −
                                             2
                                          
                                          2
                                       
                                       
                                          (
                                          2
                                          N
                                          +
                                          1
                                          )
                                       
                                       .
                                    
                                 
                              
                           When b is chosen for the materialization the views c
                           
                              i2 and c
                           
                              i3, where i = 1, 2, …, N, are calculated from b instead of from the base view, with the cost 1. The benefit from b materialization per its space is:

                              
                                 (B.3)
                                 
                                    
                                       
                                          
                                             B
                                             (
                                             {
                                             b
                                             }
                                             ,
                                             ∅
                                             )
                                          
                                          
                                             s
                                             b
                                          
                                       
                                       =
                                       
                                          
                                             36
                                             N
                                             −
                                             1
                                          
                                          1
                                       
                                       
                                          (
                                          2
                                          N
                                          +
                                          1
                                          )
                                       
                                       .
                                    
                                 
                              
                           When any view cij
                           , where i = 1, 2, …, N, j = 1, 2, 3, 4, is chosen only the cost of that view will be reduced from 36N to 1, so the benefit from any cij
                            materialization per its space is:

                              
                                 (B.4)
                                 
                                    
                                       
                                          
                                             B
                                             (
                                             
                                                {
                                                
                                                   c
                                                   
                                                      i
                                                      j
                                                   
                                                
                                                }
                                             
                                             ,
                                             ∅
                                             )
                                          
                                          
                                             s
                                             
                                                c
                                                
                                                   i
                                                   j
                                                
                                             
                                          
                                       
                                       =
                                       
                                          
                                             36
                                             N
                                             −
                                             1
                                          
                                          1
                                       
                                       ,
                                       
                                       where
                                       
                                       
                                       i
                                       =
                                       
                                          {
                                          1
                                          ,
                                          2
                                          ,
                                          …
                                          ,
                                          N
                                          }
                                       
                                       ,
                                       
                                       j
                                       =
                                       
                                          {
                                          1
                                          ,
                                          2
                                          ,
                                          3
                                          ,
                                          4
                                          }
                                       
                                       .
                                    
                                 
                              
                           The view b has the maximum benefit per unit space, so it is chosen for the materialization by GreedyG. In the second iteration of the algorithm, the views will have the following benefits from their materializations:

                              
                                 (B.5)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   B
                                                   (
                                                   
                                                      {
                                                      
                                                         a
                                                         1
                                                      
                                                      }
                                                   
                                                   ,
                                                   
                                                      {
                                                      b
                                                      }
                                                   
                                                   )
                                                
                                                
                                                   s
                                                   
                                                      a
                                                      1
                                                   
                                                
                                             
                                          
                                          
                                             
                                                =
                                                
                                                   
                                                      B
                                                      (
                                                      
                                                         {
                                                         
                                                            a
                                                            2
                                                         
                                                         }
                                                      
                                                      ,
                                                      
                                                         {
                                                         b
                                                         }
                                                      
                                                      )
                                                   
                                                   
                                                      s
                                                      
                                                         a
                                                         2
                                                      
                                                   
                                                
                                                =
                                                
                                                   
                                                      36
                                                      N
                                                      −
                                                      2
                                                   
                                                   2
                                                
                                                
                                                   (
                                                   N
                                                   +
                                                   1
                                                   )
                                                
                                                ,
                                             
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (B.6)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   B
                                                   (
                                                   
                                                      {
                                                      
                                                         c
                                                         
                                                            i
                                                            j
                                                         
                                                      
                                                      }
                                                   
                                                   ,
                                                   
                                                      {
                                                      b
                                                      }
                                                   
                                                   )
                                                
                                                
                                                   s
                                                   
                                                      c
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                =
                                                
                                                   
                                                      36
                                                      N
                                                      −
                                                      1
                                                   
                                                   1
                                                
                                                ,
                                                
                                                where
                                                
                                                
                                                i
                                                =
                                                
                                                   {
                                                   1
                                                   ,
                                                   2
                                                   ,
                                                   …
                                                   ,
                                                   N
                                                   }
                                                
                                                ,
                                                
                                                j
                                                =
                                                
                                                   {
                                                   1
                                                   ,
                                                   4
                                                   }
                                                
                                                ,
                                             
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (B.7)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   B
                                                   (
                                                   
                                                      {
                                                      
                                                         c
                                                         
                                                            i
                                                            j
                                                         
                                                      
                                                      }
                                                   
                                                   ,
                                                   
                                                      {
                                                      b
                                                      }
                                                   
                                                   )
                                                
                                                
                                                   s
                                                   
                                                      c
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                =
                                                
                                                   
                                                      1
                                                      −
                                                      1
                                                   
                                                   1
                                                
                                                =
                                                0
                                                ,
                                                
                                                where
                                                
                                                
                                                i
                                                =
                                                
                                                   {
                                                   1
                                                   ,
                                                   2
                                                   ,
                                                   …
                                                   ,
                                                   N
                                                   }
                                                
                                                ,
                                                
                                                j
                                                =
                                                
                                                   {
                                                   2
                                                   ,
                                                   3
                                                   }
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           The second choice could be a
                           1 or a
                           2, and it is assumed that the view a
                           1 is chosen. In the third iteration, only 1 unit of available space is left, so only cij
                            views could be chosen:

                              
                                 (B.8)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   B
                                                   (
                                                   
                                                      {
                                                      
                                                         c
                                                         
                                                            i
                                                            j
                                                         
                                                      
                                                      }
                                                   
                                                   ,
                                                   
                                                      {
                                                      b
                                                      ,
                                                      
                                                         a
                                                         1
                                                      
                                                      }
                                                   
                                                   )
                                                
                                                
                                                   s
                                                   
                                                      c
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                =
                                                
                                                   
                                                      2
                                                      −
                                                      1
                                                   
                                                   1
                                                
                                                =
                                                1
                                                ,
                                                
                                                where
                                                
                                                i
                                                =
                                                
                                                   {
                                                   1
                                                   ,
                                                   2
                                                   ,
                                                   …
                                                   ,
                                                   N
                                                   }
                                                
                                                ,
                                                
                                                j
                                                =
                                                
                                                   {
                                                   1
                                                   }
                                                
                                                ,
                                             
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (B.9)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   B
                                                   (
                                                   
                                                      {
                                                      
                                                         c
                                                         
                                                            i
                                                            j
                                                         
                                                      
                                                      }
                                                   
                                                   ,
                                                   
                                                      {
                                                      b
                                                      ,
                                                      
                                                         a
                                                         1
                                                      
                                                      }
                                                   
                                                   )
                                                
                                                
                                                   s
                                                   
                                                      c
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                
                                             
                                          
                                          
                                             
                                                =
                                                
                                                   
                                                      1
                                                      −
                                                      1
                                                   
                                                   1
                                                
                                                =
                                                0
                                                ,
                                                
                                                where
                                                
                                                i
                                                =
                                                
                                                   {
                                                   1
                                                   ,
                                                   2
                                                   ,
                                                   …
                                                   ,
                                                   N
                                                   }
                                                
                                                ,
                                                
                                                j
                                                =
                                                
                                                   {
                                                   2
                                                   ,
                                                   3
                                                   }
                                                
                                                ,
                                             
                                          
                                       
                                    
                                 
                              
                           
                           
                              
                                 (B.10)
                                 
                                    
                                       
                                          
                                          
                                          
                                             
                                                
                                                   B
                                                   (
                                                   
                                                      {
                                                      
                                                         c
                                                         
                                                            i
                                                            j
                                                         
                                                      
                                                      }
                                                   
                                                   ,
                                                   
                                                      {
                                                      b
                                                      ,
                                                      
                                                         a
                                                         1
                                                      
                                                      }
                                                   
                                                   )
                                                
                                                
                                                   s
                                                   
                                                      c
                                                      
                                                         i
                                                         j
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                          
                                             
                                                
                                                =
                                                
                                                   
                                                      36
                                                      N
                                                      −
                                                      1
                                                   
                                                   1
                                                
                                                =
                                                36
                                                N
                                                −
                                                1
                                                ,
                                                
                                                where
                                                
                                                i
                                                =
                                                
                                                   {
                                                   1
                                                   ,
                                                   2
                                                   ,
                                                   …
                                                   ,
                                                   N
                                                   }
                                                
                                                ,
                                                
                                                j
                                                =
                                                
                                                   {
                                                   4
                                                   }
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           The third choice will be one of c
                           
                              i4 views, and it is assumed that the view c
                           14 is chosen. To sum up GreedyG choice is M = {a
                           1, b, c
                           14}. The optimal solution is O = {a
                           1, a
                           2}.

The benefit of M to O is quite good, always greater than 
                              
                                 1
                                 2
                              
                           :

                              
                                 (B.11)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   B
                                                   (
                                                   M
                                                   ,
                                                   ∅
                                                   )
                                                
                                                
                                                   B
                                                   (
                                                   O
                                                   ,
                                                   ∅
                                                   )
                                                
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   (
                                                   36
                                                   N
                                                   −
                                                   1
                                                   )
                                                   (
                                                   2
                                                   N
                                                   +
                                                   1
                                                   )
                                                   +
                                                   (
                                                   36
                                                   N
                                                   −
                                                   2
                                                   )
                                                   (
                                                   N
                                                   +
                                                   1
                                                   )
                                                   +
                                                   (
                                                   36
                                                   N
                                                   −
                                                   1
                                                   )
                                                
                                                
                                                   (
                                                   36
                                                   N
                                                   −
                                                   2
                                                   )
                                                   (
                                                   4
                                                   N
                                                   +
                                                   2
                                                   )
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   
                                                      4
                                                      (
                                                      N
                                                      +
                                                      1
                                                      )
                                                      (
                                                      27
                                                      N
                                                      −
                                                      1
                                                      )
                                                   
                                                   
                                                      4
                                                      (
                                                      2
                                                      N
                                                      +
                                                      1
                                                      )
                                                      (
                                                      18
                                                      N
                                                      −
                                                      1
                                                      )
                                                   
                                                
                                                >
                                                
                                                   
                                                      N
                                                      +
                                                      1
                                                   
                                                   
                                                      2
                                                      N
                                                      +
                                                      1
                                                   
                                                
                                                =
                                                
                                                   
                                                      (
                                                      2
                                                      N
                                                      +
                                                      1
                                                      )
                                                      +
                                                      1
                                                   
                                                   
                                                      2
                                                      (
                                                      2
                                                      N
                                                      +
                                                      1
                                                      )
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   1
                                                   2
                                                
                                                +
                                                
                                                   1
                                                   
                                                      2
                                                      (
                                                      2
                                                      N
                                                      +
                                                      1
                                                      )
                                                   
                                                
                                                >
                                                
                                                   1
                                                   2
                                                
                                                ,
                                             
                                          
                                       
                                    
                                 
                              
                           but the ratio of the cost found by GreedyG to the optimal cost (sets M and O) is always greater than 
                              
                                 
                                    n
                                    +
                                    4
                                 
                                 12
                              
                           :

                              
                                 (B.12)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      ∑
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                   c
                                                   o
                                                   s
                                                   
                                                      t
                                                      i
                                                   
                                                   
                                                      (
                                                      M
                                                      )
                                                   
                                                
                                                
                                                   
                                                      ∑
                                                      
                                                         i
                                                         ∈
                                                         I
                                                      
                                                   
                                                   c
                                                   o
                                                   s
                                                   
                                                      t
                                                      i
                                                   
                                                   
                                                      (
                                                      O
                                                      )
                                                   
                                                
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   36
                                                   N
                                                   (
                                                   N
                                                   +
                                                   1
                                                   )
                                                   +
                                                   2
                                                   (
                                                   N
                                                   +
                                                   1
                                                   )
                                                   +
                                                   1
                                                   (
                                                   2
                                                   N
                                                   +
                                                   2
                                                   )
                                                
                                                
                                                   36
                                                   N
                                                   (
                                                   2
                                                   )
                                                   +
                                                   2
                                                   (
                                                   4
                                                   N
                                                   +
                                                   2
                                                   )
                                                
                                             
                                          
                                       
                                       
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   
                                                      4
                                                      (
                                                      N
                                                      +
                                                      1
                                                      )
                                                      (
                                                      9
                                                      N
                                                      +
                                                      1
                                                      )
                                                   
                                                   
                                                      4
                                                      (
                                                      20
                                                      N
                                                      +
                                                      1
                                                      )
                                                   
                                                
                                                >
                                                
                                                   
                                                      N
                                                      +
                                                      2
                                                   
                                                   3
                                                
                                                =
                                                
                                                   
                                                      n
                                                      +
                                                      4
                                                   
                                                   12
                                                
                                                .
                                             
                                          
                                       
                                    
                                 
                              
                           
                           □

Note that GreedyA chooses exactly the same set of views as GreedyG, so Theorem 6 is also valid for GreedyA.

@&#REFERENCES@&#

