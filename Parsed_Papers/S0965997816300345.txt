@&#MAIN-TITLE@&#A novel approach for automatic reconstruction of boundary condition in structure analysis

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Boundary conditions treated as features are represented.


                        
                        
                           
                           Boundary conditions can be applied to the whole or portion of topological entities.


                        
                        
                           
                           A coding mechanism for topological entities of boundary condition feature is proposed.


                        
                        
                           
                           Boundary conditions can be automatically reconstructed in terms of the changing model.


                        
                        
                           
                           Design and analysis processes can be iterated in the same feature historical chain.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Integration of CAD and CAE

Adaptive boundary condition

Analysis feature representation

Structure analysis

Feature modeling

Feature reconstructing mechanism

@&#ABSTRACT@&#


               
               
                  Boundary conditions (BCs)are important parameters of numerical computation for CAE structure analysis. Automatically and correctly reconstructing BCs would evidently improve the design efficiency. In this paper, a novel approach consisting of feature representation of BCs, coding mechanism for BC related topological entity and BC reconstructing mechanism is proposed. BCs treated as features can be adaptive to the changing geometric model in this approach. Coding mechanism guarantees that the specified entities of BCs from the model reconstruction process could be identified. Reconstructing mechanism comprises the maintenance of BC-geometry feature dependency, data consistency and coding transmission, which ensures all the BCs can be automatically updated in terms of the changing geometry. This approach can avoid repeatedly applying BCs to the whole or portion of topological entities. Finally, some representative cases demonstrate that the proposed approach is able to significantly improve the design efficiency.
               
            

@&#INTRODUCTION@&#

Design efficiency and development cycle are widespread concerning issues of a design process since the increased efficiency of the design process allows designers to spend less time on detail and more time on being creative [1]. Generally, design processes are in terms of a design-analysis cycle as shown in Fig. 1
                     . Geometric models should be generated first, and then they were translated into analysis-suitable geometries. After that, designers will apply engineering analysis feature (e.g. BCs) to the model and get the analysis model, and finally solve the analysis model. If the analysis results do not meet the design requirement, designers have to return to the design environment to modify the geometry model. Therefore, the design is iteratively subjected to analysis, followed by changes in design, and so on [2]. In the existing methods and commercial software, BCs applied at the previous stage will be cleared or indicated wrongly, this will lead to a low design efficiency with repetitive analysis modeling tasks. Hence, to facilitate the design-analysis process, a new method that BCs can be reconstructed automatically and correctly is necessary.

Recently, many scholars have made efforts to improve design efficiency. Meanwhile, some commercial software companies have invested lots of researches. Here the related works are surveyed for improving design efficiency.

Currently, feature-based modeling approach (FMA) is used widely in CAD to promote design efficiency by facilitating product model edit and improving data reuse. A feature representing the design intent [3] plays an important role in various engineering activities [4] which is represented by a set of faces of the feature geometry and attributes such as dimensions and material in the design domain. Usually, much useful non-geometric information in engineering applications is associated with geometric entities. Feature-based design technology has been demonstrated very effective in capturing non-geometric information in a geometric design model [5], and many scholars have contributed efforts on this [6,7]. Nevertheless, most of them are not good at supporting BC features, and BC features are non-adaptive to model modification.

To improve product design efficiency through optimizing design-analysis processes, many researchers focus on seamless integration of geometric design and engineering analysis, which collaborates and integrates a variety of CAD and CAE tools [2]. Recent trends taking place in engineering analysis and high-performance computing are also demanding higher precision and tighter integration of the overall modeling-analysis process [8]. One widely favored is a middleware development approach (MDA), it develops a middleware to integrate information between CAD and CAE [9–13]. This approach can generate an acceptable mesh model for CAE analysis through the intermediate model. Meanwhile, there is a variety of commercial CAD/CAE software tools (CATIA, Unigraphics, Solidworks, Pro/Engineer, ANSYS, etc.) focusing on integrating CAD and CAE module in the same software to improve design efficiency [14,15]. Most of these tools adopt Object-Linking Technology (OTL): A CAD software directly calls the corresponding analysis interface to achieve integration through the authorization of CAE software, e.g. COSMOS (i.e. Solidworks Simulation currently) called by SolidWorks, ANSYS to AutoCAD, MSC to Unigraphics, etc. [16]. They provide an integrated design-analysis user interface. But they do not support partial BCs (e.g. point BC, line BC, a portion of face BC) except Workbench. With these software environments, designers have to add BCs again once the design model modified, which is one of the main bottlenecks for current CAD/CAE integration, and these pre-processors would cost most of the design time.

In addition, Isogeometric Analysis (IGA) gave a new idea to make design and analysis be combined more tightly, which was proposed by Hughes in 2005. It adopts NURBS (Non-Uniform Rational Basis Spline) basis function as shape function in the FEA, so that models can be designed, calculated and adjusted in one step, using a common data set [8,17]. Additionally, some researchers also make efforts on IGA (Refs. [18–22]). However, Dirichlet boundary conditions are inhomogeneous in the NURBS space and the control points are not usually on the surfaces, which is difficult to be applied directly and precisely. Recently, some researchers have adopted boundary element method (BEM) for computing analysis [23–29]. Wang proposed an approach to fulfill the seamless integration of CAD and BEA in the model and representation [30]. However, its analysis information (e.g. BCs) cannot be adaptive to the changing model. The authors’ previous article proposed an approach to make BCs be adaptive through determining the variation of the topological face sets related to the BCs [31,32]. In this paper, a more efficient algorithm with coding topological entities of BC features is presented in this paper, which not only support BC applied on the whole face, but also partial area of face (area, curve and point). Besides, there are also many other methods contributing to improve design efficiency (Refs. [27,33–38]).

The key characteristics of the existing approaches are listed in Table 1.
                     
                  

Generally, the existing design-analysis process can be illustrated as Fig. 2
                     . Geometry features are generated first, and then engineering analysis features (e.g. BCs) are applied to the geometric model. Once the previous geometry features is changed, BC features had to be manually re-added since they cannot be adaptively driven. It is apparent that a new method decreasing the repetitive interaction to improve the design-analysis process is required. Hence, a novel approach is proposed that BCs treated as a feature herein can be reconstructed automatically and correctly, and the inspiration of this method originates from the ideas of feature modeling and retrieval. In this approach, the geometry and analysis features can be iterated in the same feature historical chain, and geometry features can be amended in any node if the analysis result did not meet the design requires, which can be illustrated by Fig. 3
                     . Once the geometry feature modified, the BC feature will be adaptive to the changed geometric feature by a feature coding and reconstructing mechanism presented in this paper.

This paper is organized as follows. Section 2 describes the feature representation for boundary conditions. In Section 3, an approach to code topological entity for BC features is presented. A reconstructing mechanism for BC feature is illustrated in Section 4. Examples are demonstrated in Section 5. Finally, a brief summary is given in Section 6.

Generally, features carrying geometric and non-geometric information (engineering information, etc.) can construct a model in terms of functional elements, which have a particular significance for the model design. In a feature-based system, 3D geometric modeling kernel is universally used, while ACIS (a 3D modeling kernel of the Spatial Corp) [39] is adopted in this approach, and it is used by many software developers in industries such as CAD/CAM/CAE, etc. Its base class is derived from ACIS abstract class ENTITY [40] in this approach, which is an abstract geometry representation used to construct the shape of a part. Other user-defined various features are derived from the base class, e.g. additive features (+) (extrude, etc.), subtractive features (-) (hole, slot, shell, etc.) and intersection features (∩). Besides geometric information, an analysis feature carry other analysis attributes as follows:

                        
                           •
                           
                              Preprocessor: mesh parameters (element type, element size, etc.), mesh data (elements, nodes, coordinate value, etc.), material attributes (Elastic Modulus, Poisson's ratio, etc.), constraints for boundary condition (points, lines, areas, etc.), loads for boundary condition (force, pressure, etc.), etc.


                              Computing Analysis: displacement, Von Mises stress, etc.


                              Postprocessor: result rendering (displacement, stress, etc.), result output, etc.

Thus, the analysis features can be represented by geometry data and analysis attribute information as:

                        
                           (1)
                           
                              
                                 
                                    F
                                    E
                                 
                                 =
                                 
                                    (
                                    
                                       G
                                       E
                                    
                                    ,
                                    
                                       R
                                       E
                                    
                                    )
                                 
                              
                           
                        
                     where FE
                      represents an analysis feature, GE
                      indicates the geometry of FE; RE
                      is the attribute information of FE
                     . Analysis features are defined as an information-set with relatively fixed geometry, which is associated with a certain engineering analysis intent (e.g. BCs, computing results, etc.). BC feature is a type of analysis features, which is the key issue in this paper.

In the geometry features, the topological entities (edge and vertex) are not isolated. Geometrically, an edge can be expressed by two intersected faces, and a vertex can be expressed by two intersected edges as shown in Fig. 4
                     (a). Sketch elements (point, curve) are not in the geometry model. However, the load scope of BC feature might be an isolated curve as shown in Fig. 4(b). Thus, BC features should be represented a little different from the design feature.

Therefore, a BC feature can be defined as a mapping feature in this approach, which is illustrated as follows.


                     
                        Definition 1
                        (Mapping feature 
                              Fp
                              
                           )

Mappingfeature includes BC feature, mesh feature, computation feature and rendering feature, etc., which can be iterated with other design features in the design-analysis process. They can be suppressed as well to avoid multiple computing when the model is reconstructed. It interacts with the part model with mapping feature operator (∼), which will not modify the design model. Besides related feature information, a mapping feature includes some mapping entities.


                     
                        Definition 2
                        (Mapping entityΦu
                           ).

Mapping Entity is a set of entities defined as:

                        
                           (2)
                           
                              
                                 
                                    Φ
                                    u
                                 
                                 =
                                 ∑
                                 
                                    (
                                    
                                       f
                                       p
                                    
                                    ,
                                    
                                       e
                                       q
                                    
                                    ,
                                    
                                       v
                                       s
                                    
                                    ,
                                    
                                       a
                                       m
                                    
                                    ,
                                    
                                       c
                                       n
                                    
                                    ,
                                    
                                       p
                                       t
                                    
                                    )
                                 
                                 
                                    (
                                    p
                                    ,
                                    q
                                    ,
                                    s
                                    ,
                                    m
                                    ,
                                    n
                                    ,
                                    t
                                    ≥
                                    0
                                    ,
                                    u
                                    >
                                    0
                                    )
                                 
                              
                           
                        
                     
                  

It is also derived from ENTITY as other features, and mapped to the geometry model. It just records the entities of the mapping feature containing two types: (1) topological entity: face 
                        f
                     
                     
                        p
                     , edge 
                        e
                     
                     
                        q
                     , vertex v
                     s. (2) sketch entity: area 
                        a
                     
                     
                        m
                      (enclosed by polygon, circle, ellipse, etc.) curve 
                        c
                     
                     
                        n
                      (curve, arc, spline, etc.) and point 
                        p
                     
                     
                        t
                     .

BC features have some different types. Thus several typical boundary condition features will be defined before given the BC feature representation.


                     
                        Definition 3
                        (Topological entity boundary condition TBC
                              
                                 F
                                 T
                                 B
                              
                           ).

TBC is a type of boundary condition feature that related to topological entities (face, edge and vertex) defined as:

                        
                           (3)
                           
                              
                                 
                                    
                                       
                                          F
                                          T
                                          B
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             (
                                             
                                                Φ
                                                u
                                             
                                             ,
                                             
                                                B
                                                w
                                             
                                             )
                                          
                                          =
                                          
                                             (
                                             
                                                ⋃
                                                
                                                   m
                                                   =
                                                   1
                                                
                                                u
                                             
                                             
                                                Φ
                                                m
                                             
                                             )
                                          
                                          ∪
                                          
                                             (
                                             
                                                ⋃
                                                
                                                   k
                                                   =
                                                   1
                                                
                                                w
                                             
                                             
                                                B
                                                k
                                             
                                             )
                                          
                                          
                                             (
                                             m
                                             ,
                                             k
                                             ,
                                             u
                                             ,
                                             w
                                             >
                                             0
                                             )
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          Φ
                                          m
                                       
                                    
                                    
                                       ∈
                                    
                                    
                                       
                                          
                                             {
                                             
                                                
                                                   f
                                                   p
                                                
                                                ,
                                                
                                                   e
                                                   q
                                                
                                                ,
                                                
                                                   v
                                                   s
                                                
                                             
                                             }
                                          
                                          
                                             (
                                             p
                                             ,
                                             q
                                             ,
                                             s
                                             ≥
                                             0
                                             )
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

In which, B represents BC parameters, which will be applied to the topological entity as shown in Fig. 5
                     (a), the pressure is applied to face f
                     1, edge e
                     1, vertices v
                     1, v
                     2 respectively, and their direction is perpendicular to f
                     1 (direction can be arbitrary, which can be converted to x, y and z direction), the constraint is applied to the face f
                     2, so they can be represented by:

                        
                           (4)
                           
                              
                                 
                                    
                                       
                                          
                                             F
                                             T
                                             B
                                          
                                          
                                             (
                                             P
                                             r
                                             e
                                             s
                                             s
                                             u
                                             r
                                             e
                                             )
                                          
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             (
                                             
                                                f
                                                1
                                             
                                             ∪
                                             
                                                e
                                                1
                                             
                                             ∪
                                             
                                                v
                                                1
                                             
                                             ∪
                                             
                                                v
                                                2
                                             
                                             )
                                          
                                          ∪
                                          
                                             B
                                             1
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          B
                                          1
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          (
                                          d
                                          i
                                          r
                                          _
                                          
                                             z
                                             −
                                          
                                          ,
                                          p
                                          r
                                          e
                                          s
                                          s
                                          u
                                          r
                                          e
                                          _
                                          v
                                          a
                                          l
                                          u
                                          e
                                          ,
                                          ⋯
                                          )
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             F
                                             T
                                             B
                                          
                                          
                                             (
                                             C
                                             o
                                             n
                                             s
                                             t
                                             r
                                             a
                                             i
                                             n
                                             t
                                             )
                                          
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             f
                                             2
                                          
                                          ∪
                                          
                                             B
                                             2
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          B
                                          2
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          (
                                          d
                                          i
                                          r
                                          _
                                          x
                                          y
                                          z
                                          ,
                                          0
                                          ,
                                          ⋯
                                          )
                                       
                                    
                                 
                              
                           
                        
                     
                  


                     
                        Definition 4
                        (Sketch entity boundary condition - SBC
                              
                                 F
                                 S
                                 B
                              
                           ).

SBC is a type of mapping feature defined as:

                        
                           (5)
                           
                              
                                 
                                    
                                       
                                          F
                                          P
                                          B
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             (
                                             
                                                Φ
                                                u
                                             
                                             ,
                                             
                                                B
                                                w
                                             
                                             )
                                          
                                          =
                                          
                                             (
                                             
                                                ⋃
                                                
                                                   i
                                                   =
                                                   1
                                                
                                                u
                                             
                                             
                                                Φ
                                                i
                                             
                                             )
                                          
                                          ∪
                                          
                                             (
                                             
                                                ⋃
                                                
                                                   j
                                                   =
                                                   1
                                                
                                                w
                                             
                                             
                                                B
                                                j
                                             
                                             )
                                          
                                          
                                          
                                          
                                          
                                             (
                                             
                                                Φ
                                                u
                                             
                                             ∈
                                             
                                                P
                                                E
                                             
                                             |
                                             m
                                             ,
                                             k
                                             ,
                                             u
                                             ,
                                             w
                                             >
                                             0
                                             )
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          Φ
                                          i
                                       
                                    
                                    
                                       ∈
                                    
                                    
                                       
                                          
                                             {
                                             
                                                a
                                                m
                                             
                                             ,
                                             
                                             
                                                c
                                                n
                                             
                                             ,
                                             
                                             
                                                p
                                                t
                                             
                                             }
                                          
                                          
                                             (
                                             m
                                             ,
                                             n
                                             ,
                                             t
                                             ≥
                                             0
                                             )
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

It includes a set of mapping sketch entities (area am
                     , curve cn
                     , point pt
                     ) and some boundary condition parameters. A typical pressure SBC is shown in Fig. 5(b) which is mapped to the face f
                     1, its direction is perpendicular to f
                     1, and it is applied to the curves and points, and the pressure boundary condition can be expressed as:

                        
                           (6)
                           
                              
                                 
                                    
                                       
                                          F
                                          S
                                          B
                                       
                                    
                                    
                                       =
                                    
                                    
                                       
                                          (
                                          
                                             Φ
                                             u
                                          
                                          ,
                                          
                                          
                                             B
                                             w
                                          
                                          )
                                          =
                                          Φ
                                          ∪
                                          B
                                       
                                    
                                 
                                 
                                    
                                       Φ
                                    
                                    
                                       =
                                    
                                    
                                       
                                          {
                                          
                                             
                                                
                                                   
                                                      
                                                         f
                                                         1
                                                      
                                                      ,
                                                      
                                                         a
                                                         1
                                                      
                                                      
                                                         (
                                                         a
                                                         )
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         f
                                                         1
                                                      
                                                      ,
                                                      
                                                         c
                                                         1
                                                      
                                                      ,
                                                      
                                                         c
                                                         2
                                                      
                                                      ,
                                                      
                                                         c
                                                         3
                                                      
                                                      ,
                                                      
                                                         c
                                                         4
                                                      
                                                      ,
                                                      
                                                         c
                                                         5
                                                      
                                                      ,
                                                      
                                                         c
                                                         6
                                                      
                                                      ,
                                                      
                                                         p
                                                         1
                                                      
                                                      ,
                                                      
                                                         p
                                                         2
                                                      
                                                      
                                                         (
                                                         b
                                                         )
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       B
                                    
                                    
                                       =
                                    
                                    
                                       
                                          (
                                          d
                                          i
                                          r
                                          _
                                          
                                             z
                                             −
                                          
                                          ,
                                          p
                                          r
                                          e
                                          s
                                          s
                                          u
                                          r
                                          e
                                          _
                                          v
                                          a
                                          l
                                          u
                                          e
                                          ,
                                          ⋯
                                          )
                                       
                                    
                                 
                              
                           
                        
                     
                  

Several typical analysis features are listed in Table 2.
                     
                  

BC feature representation can illustrate the relations among BC parameters, topological entities of the model and sketch entities, which provides the basis for coding entities related to BC features.

In the existing feature-based modeling systems, a robust feature coding and recording mechanism can guarantees that design feature topological entities can be retrieved correctly from their records in the design history [41–48]. However, BC features cannot be reconstructed automatically and correctly in these systems. Hence, in order to make BCs can be retrieved properly once the geometric model changed, there needs a coding and recording mechanism for BC features. As stated above, the BC-related entities might not be the intersection of faces and edges shown in Fig. 5(b), which also would be sketch entities. Therefore, coding BC features herein should be different from coding pure geometry features.

In a feature-based system, sketch profile is the fundament of the generated features. Hence it is necessary to establish a relation between the sketch elements and the feature entities. Sketch profile is constituted of sketch elements and the relations between them. The sketch elements have five types: point, line, circle, arc and spline (spline can represent an ellipse, hyperbola, parabola, etc.) [49]. In this approach, coding sketch profile is based on the topological adjacency relations of the sketch elements. The code does not record precise geometric representation, which should be a global unique identity and can be reused. A point in a sketch feature can be identified as:

                           
                              (7)
                              
                                 
                                    I
                                    
                                       D
                                       p
                                    
                                    =
                                    
                                       {
                                       
                                          
                                             i
                                             |
                                             i
                                             =
                                             1
                                             ,
                                             
                                             2
                                             ,
                                             
                                             3
                                             ,
                                             
                                             …
                                             ,
                                             
                                          
                                          
                                             n
                                             }
                                          
                                       
                                    
                                 
                              
                           
                        where IDp
                         is the identity of the point beginning with 1 and increments with everypoint increasing. In the topological adjacent level, circles can be identified by one point, lines, arcs and splines can be identified by two points. So a curve in the sketch can be coded as:

                           
                              (8)
                              
                                 
                                    
                                       
                                          
                                             C
                                             c
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             c
                                             I
                                             d
                                             
                                                x
                                                *
                                             
                                             
                                                2
                                                24
                                             
                                             +
                                             I
                                             
                                                
                                                   
                                                      D
                                                      
                                                         p
                                                         2
                                                      
                                                   
                                                
                                                *
                                             
                                             
                                                2
                                                12
                                             
                                             +
                                             I
                                             
                                                
                                                   
                                                      D
                                                      
                                                         p
                                                         1
                                                      
                                                   
                                                
                                                *
                                             
                                             
                                                2
                                                0
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             ×
                                             
                                                (
                                                
                                                   c
                                                   ∈
                                                   
                                                      [
                                                      
                                                         c
                                                         i
                                                         r
                                                         c
                                                         l
                                                         e
                                                         ,
                                                         
                                                         l
                                                         i
                                                         n
                                                         e
                                                         ,
                                                         
                                                         a
                                                         r
                                                         c
                                                         ,
                                                         
                                                         s
                                                         p
                                                         l
                                                         i
                                                         n
                                                         e
                                                         ,
                                                         
                                                         …
                                                      
                                                      ]
                                                   
                                                
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where 
                           C
                        
                        
                           c
                         is an integer with 4 bytes representing the curve code, and curve 
                           c
                         might be one point for closed curves (circle, etc.) and two points for open ones (arc, elliptic arc, spline, etc.). 
                           ID
                        
                        
                           p1
                        , 
                           ID
                        
                        
                           p2
                         are the identities of the start point and end point of the curve 
                           c
                        . If the curve 
                           c
                         is a closed curve, 
                           ID
                        
                        
                           p2
                         = 0. 
                           cIdx
                         is an index value from 0 to 255 (28 − 1) used to solve the concurrent problems. 
                           cIdx
                         is set to 0 if there is no shared problem in the sketch point. 
                           cIdx
                         begins with 1 and increases by 1 when the problem of shared point occurs at the same sketch point as shown in Fig. 6
                        . Then the identities of the curves in Fig. 6 can be identified as listed in Table 3
                        . circle
                        1 and circle
                        2 shared the same identified point p
                        7, arc2
                         and arc3
                         shared point p
                        5 and p
                        6. In order to shorten the length of the identity characters, 
                           Cc
                           
                         is expressed in hexadecimal (short in hex) not binary (short in bin).

In a feature-based model, the basic topological entities are face, edge and vertex. New faces will not be created after Boolean operation while some new edges and new vertices might be generated [47]. These edges and vertices can be recorded by two intersecting feature faces, or three intersecting feature faces respectively. So the feature faces can be taken as the basis of coding. Face code and other feature information are attached attributes to the face are shown as Fig. 7
                        , which is a one-to-one relationship.

From Section 2, BC features include not only geometry data, but also boundary condition related information. Thus coding entities related to BC features should consider two aspects: geometry and boundary condition information.

The coding method for the elements of the sketch features is the basis of coding topological entities of features. The identity of features can be expressed as:

                              
                                 (9)
                                 
                                    
                                       
                                          
                                          
                                          
                                             
                                                I
                                                
                                                   D
                                                   
                                                      f
                                                      e
                                                      a
                                                      t
                                                   
                                                
                                                
                                                   {
                                                   
                                                      
                                                         
                                                            
                                                               f
                                                               I
                                                               
                                                                  D
                                                                  
                                                                     f
                                                                     e
                                                                     a
                                                                     t
                                                                  
                                                               
                                                               =
                                                               
                                                                  {
                                                                  
                                                                     
                                                                        i
                                                                        |
                                                                        i
                                                                        =
                                                                        1
                                                                        ,
                                                                        
                                                                        2
                                                                        ,
                                                                        
                                                                        3
                                                                        ,
                                                                        
                                                                        …
                                                                        ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           n
                                                                           ;
                                                                           
                                                                           
                                                                           f
                                                                           C
                                                                           a
                                                                           t
                                                                           e
                                                                           =
                                                                           1
                                                                        
                                                                        }
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               s
                                                               I
                                                               
                                                                  D
                                                                  
                                                                     f
                                                                     e
                                                                     a
                                                                     t
                                                                  
                                                               
                                                               =
                                                               
                                                                  {
                                                                  
                                                                     
                                                                        i
                                                                        |
                                                                        i
                                                                        =
                                                                        1
                                                                        ,
                                                                        
                                                                        2
                                                                        ,
                                                                        
                                                                        3
                                                                        ,
                                                                        
                                                                        …
                                                                        ,
                                                                     
                                                                     
                                                                        
                                                                           
                                                                           n
                                                                           ;
                                                                           
                                                                           
                                                                           f
                                                                           C
                                                                           a
                                                                           t
                                                                           e
                                                                           =
                                                                           0
                                                                        
                                                                        }
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                                ,
                                             
                                          
                                       
                                       
                                          
                                          
                                          
                                             
                                                f
                                                C
                                                a
                                                t
                                                e
                                                =
                                                
                                                   {
                                                   
                                                      
                                                         
                                                            
                                                               0
                                                               ,
                                                            
                                                         
                                                         
                                                            
                                                               s
                                                               k
                                                               e
                                                               t
                                                               c
                                                               h
                                                               
                                                               f
                                                               e
                                                               a
                                                               t
                                                               u
                                                               r
                                                               e
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               1
                                                               ,
                                                            
                                                         
                                                         
                                                            
                                                               o
                                                               t
                                                               h
                                                               e
                                                               r
                                                               
                                                               f
                                                               e
                                                               a
                                                               t
                                                               u
                                                               r
                                                               e
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

In which, feat represents a feature. fID is the identity of a geometry or BC feature, sID indicates the identity of a sketch feature. fCate represents the category of a feature: sketch, geometry and BC features. Geometry features can be classified into three types: (a) sketch profile based feature, which is mainly determined by one or more profiles, e.g. extrude feature as Fig. 8
                           (a); (b) entity based feature, which references some topological entities in the part body to do some special operations on them, e.g. chamfer feature as Fig. 8(b); (c) feature based feature, which is generated from other features, e.g. pattern feature as Fig. 8(c).

The topological face can be identified by its entities (edge and vertex). In Fig. 8(a), FACE 
                              f
                           
                           1 can be identified by EDGEs {
                              e
                           
                           1, 
                              e
                           
                           2, 
                              e
                           
                           3, 
                              e
                           
                           4} while FACE 
                              f
                           
                           2 by EDGE {
                              e
                           
                           4
                           , 
                           
                              e
                           
                           5
                           , 
                           
                              e
                           
                           6
                           , 
                           
                              e
                           
                           7}. However, edges in the system might be generated by extrude, chamfer and pattern feature, e.g. EDGE 
                              e
                           
                           5, 
                              e
                           
                           6, 
                              e
                           
                           7 in Fig. 8(a) are generated by extrude through path 
                              l
                           
                           2 and there are no identities for them. Similarly, FACE 
                              f
                           
                           3 in Fig. 8(b) cannot be identified by its EDGEs because it is created by the chamfer feature which is based on an entity not profile. Thus, face cannot be coded with only entities, and it has the following description:

                              
                                 (10)
                                 
                                    
                                       C
                                       
                                          (
                                          f
                                          )
                                       
                                       =
                                       
                                          {
                                          
                                             f
                                             I
                                             
                                                D
                                                g
                                             
                                             ,
                                             
                                             
                                                [
                                                G
                                                F
                                                
                                                   I
                                                   g
                                                
                                                ]
                                             
                                          
                                          }
                                       
                                    
                                 
                              
                           
                        

In which, C(f) means the code of a face, g represents a geometry feature. GFI is the information of the related geometry feature. For a face of sketch based feature, it can be decided by two sketch features (profile and path) and face index. For a face of entity based feature, it can be decided by two geometry features and face index. For a face of feature based feature, it can be determined by a geometry feature, a sketch feature (path), sequential number and face index. Therefore, GFI can be expressed as:

                              
                                 (11)
                                 
                                    
                                       
                                          
                                             
                                                G
                                                F
                                                
                                                   I
                                                   g
                                                
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   {
                                                   
                                                      
                                                         
                                                            
                                                               f
                                                               H
                                                               e
                                                               a
                                                               
                                                                  d
                                                                  1
                                                               
                                                               ,
                                                               
                                                               f
                                                               H
                                                               e
                                                               a
                                                               
                                                                  d
                                                                  2
                                                               
                                                               ,
                                                               
                                                               I
                                                               d
                                                               x
                                                               
                                                               
                                                               
                                                                  (
                                                                  f
                                                                  T
                                                                  p
                                                                  =
                                                                  0
                                                                  ,
                                                                  
                                                                  1
                                                                  )
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               f
                                                               H
                                                               e
                                                               a
                                                               
                                                                  d
                                                                  1
                                                               
                                                               ,
                                                               
                                                               f
                                                               H
                                                               e
                                                               a
                                                               
                                                                  d
                                                                  2
                                                               
                                                               ,
                                                               
                                                               f
                                                               P
                                                               n
                                                               ,
                                                               
                                                               I
                                                               d
                                                               x
                                                               
                                                               
                                                               
                                                                  (
                                                                  f
                                                                  T
                                                                  p
                                                                  =
                                                                  2
                                                                  )
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                                ,
                                             
                                          
                                       
                                       
                                          
                                             
                                                f
                                                T
                                                p
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                {
                                                
                                                   
                                                      
                                                         
                                                            0
                                                            ,
                                                         
                                                      
                                                      
                                                         
                                                            s
                                                            k
                                                            e
                                                            t
                                                            c
                                                            h
                                                            
                                                            b
                                                            a
                                                            s
                                                            e
                                                            d
                                                            
                                                            f
                                                            e
                                                            a
                                                            t
                                                            u
                                                            r
                                                            e
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            1
                                                            ,
                                                         
                                                      
                                                      
                                                         
                                                            e
                                                            n
                                                            t
                                                            i
                                                            t
                                                            y
                                                            
                                                            b
                                                            a
                                                            s
                                                            e
                                                            d
                                                            
                                                            f
                                                            e
                                                            a
                                                            t
                                                            u
                                                            r
                                                            e
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            2
                                                            ,
                                                         
                                                      
                                                      
                                                         
                                                            f
                                                            e
                                                            a
                                                            t
                                                            u
                                                            r
                                                            e
                                                            
                                                            b
                                                            a
                                                            s
                                                            e
                                                            d
                                                            
                                                            f
                                                            e
                                                            a
                                                            t
                                                            u
                                                            r
                                                            e
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           where fHead is a head code for a feature as Eq. (16), fTp represents the type of a geometry feature, fPn is the sequential number of the instance in the pattern feature. Idx is a face index for eliminate ambiguity. Ambiguity is a problem of multiple solutions, and it can be described as the number of elements in the set of corresponding topological entities. Herein, ambiguity eliminating is implemented by combining the orientation of local, feature [50] and parametric space [47]. GFI can be expressed in a unified way as follows:

                              
                                 (12)
                                 
                                    
                                       D
                                       F
                                       
                                          I
                                          d
                                       
                                       =
                                       
                                          {
                                          f
                                          H
                                          e
                                          a
                                          
                                             d
                                             1
                                          
                                          ,
                                          f
                                          H
                                          e
                                          a
                                          
                                             d
                                             2
                                          
                                          ,
                                          f
                                          P
                                          n
                                          ,
                                          I
                                          d
                                          x
                                          }
                                       
                                    
                                 
                              
                           
                        

In which, head code of a feature includes the identity of the feature and the code of the sketch profile element of the feature, and it can be expressed as:

                              
                                 (13)
                                 
                                    
                                       f
                                       H
                                       e
                                       a
                                       d
                                       =
                                       
                                          {
                                          
                                             
                                                
                                                   
                                                      
                                                         [
                                                         s
                                                         I
                                                         D
                                                         ,
                                                         
                                                         
                                                            C
                                                            e
                                                         
                                                         ]
                                                      
                                                      
                                                      
                                                         (
                                                         f
                                                         T
                                                         p
                                                         =
                                                         0
                                                         ,
                                                         2
                                                         )
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                         [
                                                         f
                                                         I
                                                         D
                                                         ,
                                                         
                                                         
                                                            C
                                                            e
                                                         
                                                         ]
                                                      
                                                      
                                                      
                                                      
                                                         (
                                                         f
                                                         T
                                                         p
                                                         =
                                                         1
                                                         )
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           where 
                              C
                           
                           
                              e
                            is the code of the profile element related to the feature. In Fig. 8(b) face f3
                            is generated by the chamfer feature, and f3
                            is adjacent to the face f1
                            and f2
                           , so it can be coded from the code of f1
                            and f2
                           . Therefore, the face code in Fig. 8 can be listed in Table 4
                           . If the profile element is a closed curve ring containing several curves, the value of 
                              C
                           
                           
                              e
                            is set to −1 for starting face and as −2 for ending face. So 
                              C
                           
                           
                              l
                           
                           
                              
                                 1
                              
                            is set to −1 for face f1
                            in Fig. 8(a), and l2
                            is the extrude path in the second sketch, so 
                              C
                           
                           
                              l2
                            = 2001 from Section 3.1. In Fig. 8(b), 
                              C
                           
                           
                              e3
                            = 4003. In Fig. 8(c), 
                              C
                           
                           
                              e
                            = −2, 
                              C
                           
                           
                              l3
                            = 2001.

Coding topological entities is a coding hierarchy based topological face. Geometrically two intersected faces can express a topological edge while three intersected faces can express a topological vertex in 3D space, therefore, an edge and vertex can be coded by their adjacent faces as follows:

                              
                                 (14)
                                 
                                    
                                       
                                          
                                             
                                                C
                                                (
                                                e
                                                )
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                [
                                                
                                                   C
                                                   
                                                      f
                                                      1
                                                   
                                                
                                                ,
                                                
                                                   C
                                                   
                                                      f
                                                      2
                                                   
                                                
                                                ,
                                                I
                                                d
                                                x
                                                ]
                                             
                                          
                                       
                                       
                                          
                                             
                                                C
                                                (
                                                v
                                                )
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                [
                                                
                                                   C
                                                   
                                                      f
                                                      1
                                                   
                                                
                                                ,
                                                
                                                   C
                                                   
                                                      f
                                                      2
                                                   
                                                
                                                ,
                                                
                                                   C
                                                   
                                                      f
                                                      3
                                                   
                                                
                                                ,
                                                I
                                                d
                                                x
                                                ]
                                             
                                          
                                       
                                    
                                 
                              
                           where 
                              f
                           
                           1 and 
                              f
                           
                           2 are the adjacent faces of edge 
                              e
                           , and 
                              f
                           
                           1, 
                              f
                           
                           2 and 
                              f
                           
                           3 are the adjacent faces. Idx is an integer using for eliminating entity ambiguity as stated above.

The previous section gives the coding mechanism with geometry features, and it can handle coding topological entities of geometry features. However, it is insufficient to code BC features since that many entities of a BC feature might not be topological entities as shown in Fig. 5(b). Therefore, the coding approach should be enhanced. In this paper, BC features are classified into following three catalogues listed in Table 5
                            through their applied scope to the part model:

                              
                                 •
                                 Area boundary condition: the applied scope of BC is an area of the topological face which might be a surface or plane. It also might be a whole topological face or partial mapping area of the face, i.e. circle area, polygon area and mapping surface area.

Line boundary condition: the applied scope of BC is a curve of the topological face, which might be an edge of the face, sketch element mapping curve of the face, straight line, arc, spline, polygon, circle, mapping curve, etc.

Point boundary condition: the applied scope of BC might be some discrete point of the topological face, i.e. topological edge, mapping point.

Boundary condition type Cbc
                            can be coded as follows:

                              
                                 (15)
                                 
                                    
                                       
                                          C
                                          
                                             b
                                             c
                                          
                                       
                                       =
                                       b
                                       c
                                       S
                                       c
                                       o
                                       p
                                       e
                                       
                                          
                                          *
                                       
                                       
                                          2
                                          4
                                       
                                       +
                                       b
                                       c
                                       E
                                       l
                                       e
                                       m
                                       e
                                       n
                                       t
                                       
                                          
                                          *
                                       
                                       
                                          2
                                          0
                                       
                                    
                                 
                              
                           where, bcScope is an integer (0, 1, 2) capturing the applied scope information of BC, and bcElement is an integer (0–15) representing the entity element of BC. Here, bcScope and bcElement have the following expressions:

                              
                                 (16)
                                 
                                    
                                       
                                          
                                             
                                                b
                                                c
                                                S
                                                c
                                                o
                                                p
                                                e
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                
                                                   {
                                                   
                                                      
                                                         
                                                            
                                                               0
                                                               ,
                                                            
                                                         
                                                         
                                                            
                                                               A
                                                               r
                                                               e
                                                               a
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               1
                                                               ,
                                                            
                                                         
                                                         
                                                            
                                                               L
                                                               i
                                                               n
                                                               e
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               2
                                                               ,
                                                            
                                                         
                                                         
                                                            
                                                               P
                                                               o
                                                               i
                                                               n
                                                               t
                                                            
                                                         
                                                      
                                                   
                                                
                                                ,
                                             
                                          
                                       
                                       
                                          
                                             
                                                b
                                                c
                                                E
                                                l
                                                e
                                                m
                                                e
                                                n
                                                t
                                             
                                          
                                          
                                             =
                                          
                                          
                                             
                                                {
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           0
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           F
                                                                           a
                                                                           c
                                                                           e
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           1
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           E
                                                                           d
                                                                           g
                                                                           e
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           2
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           V
                                                                           e
                                                                           r
                                                                           t
                                                                           e
                                                                           x
                                                                        
                                                                     
                                                                  
                                                               
                                                               }
                                                            
                                                            
                                                            b
                                                            c
                                                            ∈
                                                            T
                                                            B
                                                            C
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        
                                                                           3
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           S
                                                                           P
                                                                           o
                                                                           i
                                                                           n
                                                                           t
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           4
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           S
                                                                           L
                                                                           i
                                                                           n
                                                                           e
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           5
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           A
                                                                           r
                                                                           c
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           6
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           C
                                                                           i
                                                                           r
                                                                           c
                                                                           l
                                                                           e
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           7
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           S
                                                                           p
                                                                           l
                                                                           i
                                                                           n
                                                                           e
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           8
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           P
                                                                           o
                                                                           l
                                                                           y
                                                                           g
                                                                           o
                                                                           n
                                                                           A
                                                                           r
                                                                           e
                                                                           a
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           9
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           C
                                                                           i
                                                                           r
                                                                           c
                                                                           l
                                                                           e
                                                                           A
                                                                           r
                                                                           e
                                                                           a
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        
                                                                           10
                                                                           ,
                                                                        
                                                                     
                                                                     
                                                                        
                                                                           S
                                                                           p
                                                                           l
                                                                           i
                                                                           n
                                                                           e
                                                                           A
                                                                           r
                                                                           e
                                                                           a
                                                                        
                                                                     
                                                                  
                                                                  
                                                                     
                                                                        ⋯
                                                                     
                                                                  
                                                               
                                                               }
                                                            
                                                            b
                                                            c
                                                            ∈
                                                            S
                                                            B
                                                            C
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

The code for the typical boundary condition are listed in Table 5.
                        

Therefore, the code of the face f within BC features can be coded with the following description:

                              
                                 (17)
                                 
                                    
                                       U
                                       C
                                       
                                          (
                                          f
                                          )
                                       
                                       =
                                       
                                          {
                                          
                                             f
                                             I
                                             
                                                D
                                                g
                                             
                                             ,
                                             
                                                [
                                                G
                                                F
                                                
                                                   I
                                                   g
                                                
                                                ]
                                             
                                             ,
                                             f
                                             I
                                             
                                                D
                                                b
                                             
                                             ,
                                             
                                                [
                                                B
                                                F
                                                
                                                   I
                                                   b
                                                
                                                ]
                                             
                                          
                                          }
                                       
                                    
                                 
                              
                           
                        

In which, g is the geometry feature related to f, UC is a unified code of the face f related to BC feature, which contains the information of geometric and boundary conditions, b represents the BC feature related to f, BFI is the information of the BC feature, and BFI can be expressed as:

                              
                                 (18)
                                 
                                    
                                       B
                                       F
                                       
                                          I
                                          b
                                       
                                       =
                                       
                                       
                                          {
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         C
                                                         
                                                            b
                                                            c
                                                         
                                                      
                                                      
                                                      
                                                      
                                                         (
                                                         
                                                            C
                                                            
                                                               b
                                                               c
                                                            
                                                         
                                                         =
                                                         {
                                                         00
                                                         ,
                                                         
                                                         11
                                                         ,
                                                         
                                                         22
                                                         }
                                                         )
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      s
                                                      I
                                                      D
                                                      ,
                                                      
                                                      
                                                         C
                                                         
                                                            b
                                                            c
                                                         
                                                      
                                                      ,
                                                      
                                                      
                                                         {
                                                         
                                                            C
                                                            
                                                               p
                                                               1
                                                            
                                                         
                                                         ,
                                                         
                                                         
                                                            C
                                                            
                                                               p
                                                               2
                                                            
                                                         
                                                         ,
                                                         
                                                         …
                                                         ,
                                                         
                                                         
                                                            C
                                                            
                                                               p
                                                               N
                                                            
                                                         
                                                         }
                                                      
                                                      
                                                      
                                                      
                                                         (
                                                         
                                                            C
                                                            
                                                               b
                                                               c
                                                            
                                                         
                                                         =
                                                         {
                                                         23
                                                         }
                                                         )
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      s
                                                      I
                                                      D
                                                      ,
                                                      
                                                      
                                                         C
                                                         
                                                            b
                                                            c
                                                         
                                                      
                                                      ,
                                                      
                                                      
                                                         {
                                                         
                                                            C
                                                            
                                                               e
                                                               1
                                                            
                                                         
                                                         ,
                                                         
                                                         
                                                            C
                                                            
                                                               e
                                                               2
                                                            
                                                         
                                                         ,
                                                         
                                                         …
                                                         ,
                                                         
                                                         
                                                            C
                                                            
                                                               e
                                                               N
                                                            
                                                         
                                                         }
                                                      
                                                      
                                                      
                                                      
                                                         (
                                                         
                                                            C
                                                            
                                                               b
                                                               c
                                                            
                                                         
                                                         ∈
                                                         
                                                            [
                                                            14
                                                            ,
                                                            
                                                            
                                                            17
                                                            ]
                                                         
                                                         
                                                         )
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      s
                                                      I
                                                      D
                                                      ,
                                                      
                                                      
                                                         C
                                                         
                                                            b
                                                            c
                                                         
                                                      
                                                      ,
                                                      
                                                      
                                                      p
                                                      S
                                                      e
                                                      q
                                                      ,
                                                      
                                                      
                                                         {
                                                         
                                                            C
                                                            
                                                               e
                                                               1
                                                            
                                                         
                                                         ,
                                                         
                                                         
                                                            C
                                                            
                                                               e
                                                               2
                                                            
                                                         
                                                         ,
                                                         
                                                         …
                                                         ,
                                                         
                                                         
                                                            C
                                                            
                                                               e
                                                               N
                                                            
                                                         
                                                         }
                                                      
                                                      
                                                      
                                                      
                                                         (
                                                         
                                                            C
                                                            
                                                               b
                                                               c
                                                            
                                                         
                                                         ∈
                                                         
                                                            {
                                                            08
                                                            ,
                                                            
                                                            09
                                                            ,
                                                            
                                                            0
                                                            A
                                                            }
                                                         
                                                         )
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           where sID is the identity of the BC's sketch, pSeq is the profile sequence in the sketch, pN and eN are the points and elements of the BC related sketch. If a face f contained TBC (C
                           bc=00, 11, 22), the code of f could be determined by its GFI and Cbc
                            since that GFI includes the BC scope without needing sketch information. Therefore, BFI can be expressed in a unified way as follows:

                              
                                 (19)
                                 
                                    
                                       B
                                       F
                                       
                                          I
                                          b
                                       
                                       =
                                       
                                          {
                                          s
                                          I
                                          D
                                          ,
                                          
                                          
                                             C
                                             
                                                b
                                                c
                                             
                                          
                                          ,
                                          
                                          p
                                          S
                                          e
                                          q
                                          ,
                                          
                                          
                                             {
                                             
                                                C
                                                
                                                   e
                                                   1
                                                
                                             
                                             ,
                                             
                                             
                                                C
                                                
                                                   e
                                                   2
                                                
                                             
                                             ,
                                             
                                             …
                                             ,
                                             
                                             
                                                C
                                                
                                                   e
                                                   N
                                                
                                             
                                             }
                                          
                                          }
                                       
                                    
                                 
                              
                           
                        

Note that BFI does not record the detail information of BC features (e.g. value and direction, etc.), which is recorded in the feature class as illustrated in Section 2. BFI is used to retrieve topological entities with boundary condition information due to the Boolean operation is often occurred between features and the model. BFI within typical BC features can be listed in Table 6
                           . Assumed that sID of the sketch feature related to SBC is 1, {
                              C
                           
                           
                              e1
                           , 
                              C
                           
                           
                              e2
                           , …, 
                              C
                           
                           
                              eN
                           } are the code list of corresponding sketch element to SBC as illustrated in Section 3.1.

Therefore, a topological edge and a vertex with BC feature can be coded uniformly by adding BFI to them as follows:

                              
                                 (20)
                                 
                                    
                                       
                                          
                                             
                                                U
                                                C
                                                
                                                   (
                                                   e
                                                   )
                                                
                                                =
                                                
                                                   [
                                                   
                                                      C
                                                      
                                                         f
                                                         1
                                                      
                                                   
                                                   ,
                                                   
                                                      C
                                                      
                                                         f
                                                         2
                                                      
                                                   
                                                   ,
                                                   I
                                                   d
                                                   x
                                                   ,
                                                   B
                                                   F
                                                   
                                                      I
                                                      b
                                                   
                                                   ]
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                U
                                                C
                                                
                                                   (
                                                   v
                                                   )
                                                
                                                =
                                                
                                                   [
                                                   
                                                      C
                                                      
                                                         f
                                                         1
                                                      
                                                   
                                                   ,
                                                   
                                                      C
                                                      
                                                         f
                                                         2
                                                      
                                                   
                                                   ,
                                                   
                                                      C
                                                      
                                                         f
                                                         3
                                                      
                                                   
                                                   ,
                                                   I
                                                   d
                                                   x
                                                   ,
                                                   B
                                                   F
                                                   
                                                      I
                                                      b
                                                   
                                                   ]
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           where Idx is an integer using for eliminating entity ambiguity.

In a history-based system, coding topological entities guarantee that it could identify the same entities from the code in the process of reconstructing a model. Reconstructing a model is a traverse process of the design history, but there are few literatures contributing to make BC features be reconstructed automatically and correctly. From the ideas of feature reconstructing mechanism of CAD system, this section will illustrate the automatical reconstructing mechanism of BC features, which is constituted of history process management, feature data, state maintenance and data consistency.

In the feature-based system, reconstructing a model is the traverse processes of design history, and each feature creation is treated as a state in the history. The history chain is represented with a binary tree data structure [51], all the state histories form the model state history as shown in Fig. 9
                        . For every change of a feature, the difference will be recorded, which constitutes the state history of a feature. In this approach, doubly linked list is used to record BC feature state history. In each state, the BC feature before changed is treated as old BC, while the changed BC feature is new BC. When a BC feature is created, old BC is set to NULL, while new BC is set to NULL when the BC feature is deleted.

Since the reconstruction of BC features is a history-based process, there must be a link between the BC features and other features. According to Section 2, BC feature are mapped to the geometric model, thus it cannot influence geometry features while the latter can influence it. When reconstructing the entire model or editing a geometry feature, it cannot be determined that which BC features are influenced. Therefore, the relations between BC geometry features should be recorded. In order to maintain the relations between features, the graph [4] of BC-geometry feature dependency (GFD) is illustrated as:

                           
                              (21)
                              
                                 
                                    
                                       
                                          
                                             G
                                             F
                                             D
                                          
                                       
                                       
                                          =
                                       
                                       
                                          
                                             (
                                             F
                                             ,
                                             R
                                             )
                                             ,
                                          
                                       
                                    
                                    
                                       
                                          F
                                       
                                       
                                          =
                                       
                                       
                                          
                                             {
                                             F
                                             e
                                             a
                                             t
                                             u
                                             r
                                             e
                                             }
                                             ,
                                          
                                       
                                    
                                    
                                       
                                          R
                                       
                                       
                                          =
                                       
                                       
                                          
                                             {
                                             
                                                〈
                                                
                                                   F
                                                   e
                                                   a
                                                   t
                                                   u
                                                   r
                                                   
                                                      e
                                                      i
                                                   
                                                   ,
                                                   
                                                   F
                                                   e
                                                   a
                                                   t
                                                   u
                                                   r
                                                   
                                                      e
                                                      j
                                                   
                                                
                                                〉
                                                |
                                                i
                                                ≠
                                                j
                                             
                                             }
                                          
                                       
                                    
                                 
                              
                           
                        
                     

In which, 
                           F
                         is the node of GFD, which is a set of features, 
                           R
                         is the arc of GFD, which is a set of dependency relations between two nodes.

However, GFD just can records feature dependency, which cannot reflect the influence of constraints (shape, location, etc.) according to the changing feature. Since the feature dependency and constraints will refer to topological entities and features, there needs a Feature-Entity relation (FER) to record entities, which can be expressed as:

                           
                              (22)
                              
                                 
                                    F
                                    E
                                    
                                       R
                                       e
                                    
                                    =
                                    
                                       {
                                       
                                          f
                                          I
                                          
                                             D
                                             F
                                          
                                          ,
                                          U
                                          
                                             C
                                             e
                                          
                                       
                                       }
                                    
                                 
                              
                           
                        where F represents a feature, e is a topological entity, fID and UC are illustrated in Section 3. When some of entities in the model changed, FER plays a role in notification. If the existence of one feature depends on another feature, the latter is the father feature of the former. Fig. 10
                         shows a feature tree constructing a model, node 1 is a sketch feature, node 2 is a geometry feature, and node 3 is a TBC feature. Thus, sketch feature is the father feature of the geometry feature, which is the father feature of TBC feature. FERf
                        
                        1 maintains the relation between BC feature and the face f
                        1. Once f
                        1 changed, the BC feature will be adaptive to its change. Note that, BC feature is limited to having no child features in this approach.

The algorithm of updating BC-geometry feature dependency in the history chain can be illustrated in Fig. 11
                        . CN represents the current node, it is the first feature if reconstructing entire model. It is the editing feature if someone feature is modified. IFL is an influenced feature list which will be influenced when the feature is edited, it has its all child features at least. UF indicates that it is an updated feature when reconstructing model.

In the process of part modeling, a Boolean operation will be executed between the original feature and part body, hence, the father feature of BC feature might be changed, and the BC related topological entities might be deleted, merged, split or still kept as shown in Fig. 12
                        . The BC-geometry feature dependency can be maintained as illustrated in the previous section. However, there might be some errors indicated in the scope of BC feature (marked with the purple area) as shown in Fig. 12(a). The BC is applied on the top face, but it would be indicated to the left area lacking of the right face when the model was slotted on the upper face. The reason is that the entities of BC features will not automatically update according to the changed model.

Therefore, in order to maintain the data consistence between BC features and their father feature, the BC feature semantics should also be maintained, which can be expressed as:

                           
                              (23)
                              
                                 
                                    
                                       
                                       
                                       
                                          
                                             S
                                             e
                                             
                                                m
                                                
                                                   B
                                                   C
                                                
                                             
                                             =
                                             
                                                {
                                                
                                                   f
                                                   I
                                                   D
                                                   ,
                                                   s
                                                   I
                                                   D
                                                   ,
                                                   
                                                      {
                                                      
                                                         U
                                                         
                                                            C
                                                            
                                                               e
                                                               1
                                                            
                                                         
                                                         ,
                                                         U
                                                         
                                                            C
                                                            
                                                               e
                                                               2
                                                            
                                                         
                                                         ,
                                                         …
                                                         ,
                                                         U
                                                         
                                                            C
                                                            
                                                               e
                                                               n
                                                            
                                                         
                                                      
                                                      }
                                                   
                                                   
                                                      ,
                                                      s
                                                      t
                                                      a
                                                      t
                                                      e
                                                      
                                                      
                                                      |
                                                      n
                                                      ≥
                                                      1
                                                   
                                                
                                                }
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                       
                                          
                                             s
                                             t
                                             a
                                             t
                                             e
                                             ∈
                                             {
                                             c
                                             r
                                             e
                                             a
                                             t
                                             e
                                             d
                                             ,
                                             a
                                             l
                                             i
                                             v
                                             e
                                             ,
                                             s
                                             p
                                             l
                                             i
                                             t
                                             ,
                                             m
                                             e
                                             r
                                             g
                                             e
                                             d
                                             ,
                                             c
                                             h
                                             a
                                             n
                                             g
                                             e
                                             d
                                             ,
                                             d
                                             e
                                             l
                                             e
                                             t
                                             e
                                             d
                                             }
                                          
                                       
                                    
                                 
                              
                           
                        where Sem represents the BC feature semantics, fID is the identity of BC feature, sID is the identity of BC related sketch (is set to be 0 if a TBC feature), UC is the unified code of the BC related topological entity e, state records the change of BC feature state, it can be created, alive, split, merged, changed and deleted since BC feature always rely on sketch and geometry features. The state of BC feature can obtain from BC-geometry feature dependency, while UC is related to FER. In order to make BC features can check the change of state and constraints automatically, a graph of code transmission (GCT) is used in this process, which reflects the transmitting characteristics of the entity codes. GCT is a digraph illustrated as:

                           
                              (24)
                              
                           
                        
                     

In which, C is the node of GCT, which is a set of data elements CI, CI represents the code information related to the face, R is the arc of GCT, which is a set of relations between two nodes. UCface
                         is the unified code of Face face illustrated as Section 3, ord indicates the times of the face split and merge; cnt is the face number on the ordth stage; R represents the relation between two nodes. If the face code is deleted in the transmission process, the code would be indicated to recycling bin (RB) as shown in Fig. 13.
                        
                     

The above method is suitable for most circumstances, but there might be some error when SBC is transmitted and retrieved as shown in Fig. 14
                        . The real applied area of SBC, which is maintained in BC feature class as illustrated in Section 2, is not recorded in the face code 
                           UC
                        
                        
                           f
                         (
                           UC
                        
                        
                           f
                         just records the mapping sketch of SBC feature). 
                           UC
                        
                        
                           f
                        
                        1 carrying SBC information will be transmitted to 
                           UC
                        
                        
                           f
                        
                        1 and 
                           UC
                        
                        
                           f
                        
                        2 with the feature Boolean operation, while 
                           UC
                        
                        
                           f
                        
                        2 might have no SBC information.

As a result, there requires some additional processing such as judging whether SBC is on a face. This needs to calculate the scope of SBC in the 3D space mapped to the parametric space as shown in Fig. 15
                        . The parametric space expressions of the faces before and after splitting are the same only with some changes to the valid definition space area. Suppose that the face can be expressed with surface 
                           P
                         (u, v) in the parametric space, which is defined by 0<u<1, 0 <v<1 before splitting into two faces 
                           f
                        
                        
                           1
                         and 
                           f
                        
                        
                           2
                        . The applied scope of BC can be mapped to the parametric space of the face. Therefore, the applied scope can be recorded to the parametric space of face, and judge the face code whether should be transmitted to the split face. As shown in Fig. 15(a), the face code including BFI should be transmitted to the two faces 
                           f
                        
                        1 and 
                           f
                        
                        2, while it is just transmitted to the face 
                           f
                        
                        2 in Fig. 15(b).

Here some representative BC features are taken as examples to illustrate how BC feature is reconstructed. As shown in Fig. 16
                        , the processes of a model construction are from left to right. The original feature is a extrude feature (as F1), then a TBC feature is applied to the face f
                        1, all the areas of the BC features are rendered with red color in the figure.

In the step (b), (c) and (d), the geometric model is modified, so the BC feature will be reconstructed, the reconstructing processes of TBC feature is illustrated in Algorithm 1
                        . Note that if the outdegree [4] of a node in the GCT was 0, this node could be regarded as a face code in the current model, which is the judgment criteria of searching GCT.

Reconstructing SBC feature shown in Fig. 17
                         are different from TBC feature, which is illustrated in Algorithm 2
                        .

The above reconstructing mechanism makes sure that the BC features can be reconstructed correctly and adaptively. Therefore, the boundary conditions need not to be added repeatedly once the geometric model changed, which makes BC features be adaptive to the changing model.

Based on the proposed approach stated above, a software prototype using C++ is developed, while ACIS (a geometric modeling engine) is used for modeling and HOOPS (a display kernel) for rendering [52–54]. In addition, boundary element method (BEM) is adopted as the calculating method for analysis in the case studies, which is illustrated in detail in the literature [32]. Therefore, product design adopting the proposed approach is in terms of a design-analysis process as shown in Fig. 18
                     , design and analysis intents are all regarded as features, which is very different from the conventional one as shown in Fig. 1. Owing to BEM, the mesh used for calculation is the same as used for model display (surface mesh). When SBC features are applied to the model, the mesh generation should be based on surface mesh generation with boundary constrains [55]. Some examples are taken on the prototype software to validate our approach.

The example in Fig. 19
                      is a gear model used to illustrate one SBC feature (load scope is a line). Its size and BCs are also illustrated in the figure. The pressure value is 12MPa, and its load direction (all the load direction of the cases in this paper can also be arbitrary) and applied scope are shown in the figure. Elastic Modulus of the examples in this chapter are all set to 260,000MPa, Possion's ratio are 0.3. The total displacement and Von Miser stress of the gear model are also given.

Here is an example to show the process of an adaptive BC feature when designing a box model as shown in Fig. 20.
                     
                     
                        
                           (a)
                           A TBC feature 
                                 B
                               (pressure value is 3MPa) is applied to the top faces. A TBC feature 
                                 A
                               (full displacement constraint) is applied to the bottom face. Two SBC features (
                                 D
                               and 
                                 E
                              ) are applied to the two bearing holes, and the pressure values are 18 and 15MPa ,respectively.

A subtractive feature 
                                 F
                               is intersected with the box model. So the bottom face is split into two faces, 
                                 A
                               is transmitted to these two faces automatically.

A cuboid subtractive feature 
                                 G
                               is intersected with the box model. Apparently, all BCs are maintained adaptively in the design tree.

The displacement and Von Mises stress of the box model in the different circumstances are all displayed in Fig. 20.
                  

Here two experimental cases is performed to verify the adaptation of SBC features (curve and point) as Fig. 21.
                     
                  

In Fig. 22
                     (a), a BC feature (pressure) is applied to the surface (red face). When the model is changed by a slot feature as shown in Fig. 22(b), the surface is split into two faces, the BC feature is transmitted to the two faces. In Fig. 22(c), the left surface is changed by an extrude feature, then the BC feature is maintained on the three red faces.

In Fig. 23
                     (a), a BC feature (pressure) is applied to the top red face. When the model is changed with another model obtained from an intersection operation between a cuboid and cylinder with a yellow line, the BC feature is maintained. In Fig. 23(b), a BC feature (pressure) is also applied to the top red face. When the model is subtracted with 4 slot features, the BC feature is maintained. Similar with the previous cases, the BC feature can be maintained when the model is united with another extrude feature shown in Fig. 23(c).

In order to show that BC features can be applied iteratively based on the feature historical chain more clearly, here is an example to show the process of an adaptive BC feature when designing a model with 31 operations (can be more operations) as shown in Fig. 24
                     (a). 
                        A
                      and 
                        B
                      are BC features (pressure value is 3MPa) applied to the red face. 
                        A
                      and 
                        B
                      are the 4th and 12th operations respectively in the feature history chain as shown in Fig. 24(b). Another BC feature with displacement constraint is applied to the bottom face at the 3rd operation. When the model is changed with several operations, both 
                        A
                      and 
                        B
                      are maintained in the last model (31th operation).

The total displacements of the model are given in Fig. 25
                     . As shown in the figures, it can be observed that their distributions are consistent, but there is a little computing error (about 6.8%) between the proposed approach and ANSYS.


                     Table 7
                      shows the operation times comparison of the process for design-analysis-redesign model (as shown in Fig. 24) under different software framework environments. Herein, two typical conventional methods (1: CAD software+CAE software, 2: CAD software with FEM simulation model) are adopted to compare with the proposed approach. Simulation analysis will be executed at every design stage. Apostrophe represents the process can be continued. The processes of modeling, preprocessor and boundary conditions applying are compared in this paper without calculation analysis time, since the focus of this article is on the coding topological entities of design and analysis features and retrieving them from the changed model. Exporting model, importing model, mesh generation are treated as one time separately.

As shown in Fig. 26
                     , the curve of the proposed framework depicts a trend of a gentle increase, while the other curve reveals a trend of a sharper increase with the growing number of model modification. Meanwhile, it is obvious in the figure that the operation times the proposed approach is less than the other, and this difference will be more and more apparent along with the rising times of model changing.

Generally, BC in the engineering problems is area BC. In order to validate the approach proposed in this paper better, more cases should be tested. Some representative engineering parts have been performed and listed in Table 8
                     , and all BCs are applied on some typical geometry features (e.g. extrude, round, chamfer, holes, etc.). More examples for supporting more geometry features are shown in Appendix.


                     Fig. 27
                     (a) shows a more complex model case (tractor cylinder) with its size and BCs. The constraint on the part bottom is displacement constraint, the pressure value in the top face (TBC) is 3MPa while 18MPa in the faces of the bearing holes (SBC). The comparisons between the approach in this paper and ANSYS of the total displacement distribution are shown in Fig. 27(b). As shown in the figure, it can be observed that their distributions are consistent, but there are some differences between them since the calculation error (about 10.7%). The focus of this article is on the coding topological entities of design and analysis features and retrieving them from the changed model, thus the calculation error with ANSYS will not be discussed here.

The above examples have shown that designers can apply partial BCs (line BC, portion area of face, etc.) to the engineering part model using this approach. These BCs can be reconstructed automatically and correctly once the design model changed, which can significantly reduce the interaction. Some commercial software (e.g. UG v9.0, Pro/E v5.0, ANSYS v14.5, SolidWorks v2013, CATIA v5.0, etc.) are also making efforts to support the characteristics stated above. The comparison of some commercial software and the proposed approach are listed in Table 9
                      in more detail.

This paper proposes an approach to improve the design-analysis process. The advantages of this approach are as follows:

                        
                           •
                           A more efficient way to maintain BCs is provided, and this facilitates the interaction of the design-analysis process. Partial (point, line or portion of topological face) BCs universally seen in the engineering design are treated as features in this approach.

A feature coding mechanism for BC features is presented, which guarantee that the topological entities related to BC features could be identified and retrieved in the model.

Reconstructing mechanism for BC features is provided. With this mechanism, all BCs can be transmitted and reconstructed automatically and correctly, which greatly reduces the interaction.

With the help of the advantages, this approach can support an iterative design-analysis process in the same feature historical chain. In general, the proposed approach improves the design efficiency owing to its reconstructing mechanism in the design-analysis process. In addition, boundary element method (BEM) is adopted as the calculating method for analysis in the cases. This approach is also applicable to many other numerical methods, e.g. finite-element method (FEM), isogeometric analysis (IGA), meshfree method and other analysis approaches.

Although the benefits of the proposed approach are visible, it still has some limitations, such as it may have problems on the contact problem since the contact geometry places are uncertain. Other relevant algorithms are required to solve the dynamic BCs in the contact problem, which will be enhanced in the future research. A possible forthcoming work is to extend more interfaces that it can be applied to other analysis methods.

@&#ACKNOWLEDGMENTS@&#

This research was supported by the National Natural Science Foundation of China (51475180 and 51305307).

 
                     
                        
                           
                              
                              
                                 
                                    
                                       
                                          
                                          Image, table

                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                          Image, table

                                       
                                    
                                 
                              
                           
                        
                     
                  

@&#REFERENCES@&#

