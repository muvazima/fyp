@&#MAIN-TITLE@&#A geographic routing approach for IPv6 in large-scale low-power and lossy networks

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We combine RPL and GOAFR protocols for IPv6-enabled large-scale wireless networks.


                        
                        
                           
                           Main drawbacks of the RPL protocol for P2P communication are discussed.


                        
                        
                           
                           A routing protocol (GeoRank) is proposed and its scalability is compared to RPL.


                        
                        
                           
                           Simulations were performed on networks extracted from real street maps.


                        
                        
                           
                           GeoRank is adaptive to variable link densities found in large-scale networks.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Wireless sensor and actuator networks

Internet of things

Smart green cities

Routing

6LoWPAN

Smart street lighting

@&#ABSTRACT@&#


               
               
                  In this paper, we propose GeoRank, a geographic routing approach for the IPv6-enabled large-scale low-power and lossy networks. We discuss the main drawbacks of the RPL (IPv6 Routing Protocol for Low-Power and Lossy Networks) for P2P (point-to-point) communication in large-scale 6LoWPAN networks. Then, we address such drawbacks by proposing a routing protocol, named GeoRank, which integrates RPL protocol with the position-based routing protocol GOAFR (Greedy Other Adaptive Face Routing). The results obtained with simulations show that GeoRank finds shorter routes than RPL in high link density conditions and than GOAFR in low link density conditions. Thus, GeoRank shows to be adaptive to variable link densities found in large-scale networks. Further, GeoRank avoids the use of DAO (Destination Advertisement Object) control messages required in RPL, while being more scalable in terms of memory usage than storing-mode RPL.
               
            

@&#INTRODUCTION@&#

With the increase in world population and the growing urbanization worldwide, cities will need to evolve towards an intelligent infrastructure in order to provide to its citizens a better living environment. This will be achieved through the use of information and communication technology (ICT), with the goal to provide public services that are more accessible and more efficient. This vision is embodied in the “smart city” concept [1,2].

According to several researchers, to enable the smart city it will be required an urban “Internet of Things (IoT)” infrastructure, where sensors and actuators distributed across the city will be interconnected by a pervasive network [3,4]. This urban “IoT” will enable a myriad of services and applications for the smart city, such as structural health monitoring, waste management, air quality monitoring, noise monitoring, traffic congestion avoidance, city energy consumption tracking, smart parking, smart lighting, and charging infrastructure for electrical vehicles [1,2].

One of such applications is smart street lighting. The street lighting system (SLS) is one of the most important assets for a city, due to its role as a public service for the citizens and also due its pervasiveness. However, SLS is very costly to operate, with a share of about 40% of the total amount of electricity spent in a city [5]. Therefore, making it more energy efficient and less costly for maintaining is very important for the cities.

The use of LED (light emitting diode) lamps in street lighting started to be reported in the last few years, and it is being considered a very good solution to improve the energy efficiency of the system and also to reduce the maintenance cost, because of their long lifetime, high luminous efficiency and high color rendering index (CRI) [6]. Also, the addition of communication capability to the SLS decreases the energy consumption and the maintenance cost, because it allows for monitoring the status information of each lamp (state, current, voltage and power measurements, etc.) and to have better control of the system (e.g.: lamp dimming). Then, a smart SLS, based on LED lamps and a communication network, is an interesting application in a smart city context, not only by its clearly advantages but also because it can be one of the foundations for a urban “IoT” due to its pervasiveness across the city [5]. Therefore, it can also be an enabler for the aforementioned applications in the smart city.

However, a street lighting system features a large number of independent devices, with geographic distribution depending on the city streets. Then, adding communication capabilities to these devices requires a complex network topology, as well as interoperability, scalability, security, robustness, low cost, ease to use and maintenance. A few contributions in the literature suggest some technologies that can be used to control a street lighting system. Some use the power lines for data transmission (PLC) [7], while others use wireless communication, such as cellular networks [8], wireless sensor networks (WSN) [9] and both combined [10].

The main drawbacks of the PLC technology are noisy medium, high signal attenuation, susceptibility to interference from nearby devices, time-varying network topology, high complexity and poor scalability, despite its existing infrastructure and extensive coverage. The most suitable area for PLC seems to be the medium voltage distribution network, usually combined with wireless technologies in the low voltage distribution network through a hybrid architecture [11]. Similarly, the scalability and reliability of cellular networks are not questionable, especially under low load traffic. However, the literature has already demonstrated that the limitations of the cellular networks for energy-constrained and/or processing-constrained devices are the tight synchronization requirement and high signalling overhead [12]. Furthermore, the dependency on the cellular carriers are usually not desirable in the smart cities/internet of things context. On the other hand, wireless sensor networks scalability is highly dependent on the routing algorithm performance. Therefore, designing a routing algorithm with high scalability and low overhead is a challenging requirement. It is important to note that we do not completely discard the PLC and cellular technologies for smart cities, but just reinforced that such technologies may be implemented as hybrid solutions, in order to develop redundant or complementary systems.

Recently, the 6LoWPAN protocol has been standardized by the IETF (Internet Engineering Task Force) as an adaptation layer to enable IEEE 802.15.4-based low power and lossy networks (LLNs), such as wireless sensor networks, to reuse the existing IPv6 protocol for the networking layer [13]. Also, the IETF has standardized RPL as the routing protocol for IP-based LLNs [14]. According to the literature, the main reasons to use IPv6 protocol for the LLNs include the connectivity through the internet to enable the IoT, the 128-bit addressing space that enables uniquely addressable devices (“things”), the network layered architecture and the interoperability [15,4].

However, RPL has some drawbacks, as higher amount of control messages than data messages, mainly for constructing routes from the sink to the nodes (downward routes in RPL vocabulary) [16–18]. In a network where nodes are static, a routing protocol could benefit of this condition to find routes with less control overhead than RPL. The routing algorithms that use position to find routes in a communication network are known as geographic routing algorithms and a large body of literature has been devoted to the research on those algorithms in last few decades [19–21].

Our main contribution in this paper is to propose a modification into RPL protocol, in order to better support P2P communication. The proposed technique intend to integrate a geographic routing algorithm in the RPL protocol to reduce the amount of control message required for P2P communication. Such a routing protocol can be used, for example, in a smart street lighting system wireless network for supporting diverse applications in an urban IoT.
                        1
                        Throughout the text we have used the smart street lighting as an example of application where the proposed protocol could be used, however it was not specifically designed for a street lighting system, and thus might not fulfill all the requirements for such use.
                     
                     
                        1
                      This paper is organized as follows: Section 2 addresses the requirements of a wireless sensor network to implement an smart street lighting network. Also, we argue about the benefits of creating a network with such coverage for other public services. Section 3 presents an overview of the 6LoWPAN protocol, describing succinctly its operating modes, routing strategies and main drawbacks. In Section 4 we address the geographic routing technique, highlighting its pros and cons. In Section 5, the GeoRank algorithm is presented, depicting its working principle. We evaluate, by simulation, the performance of the proposed algorithm in Section 6. Finally, we conclude this paper in Section 7.

A smart street lighting system based on a network that covers entire cities is a widespread concept in the literature [8,9,22–24]. However, the requirements for such network are not always clearly defined. Despite that, through a simple analysis it is clear that most of the messages in this system will be towards the sink node, generating a converging traffic. As the majority of the WSN protocols are designed for such traffic (e.g., the RPL protocol), we are led to think that there are few possible contributions that researchers can make to improve the network data flow. Therefore, it is important to express a more complete set of requirements that such a system demands for a communication network, stating the main goals of a smart street lighting system. Based on previous works cited above, we can assert that such goals are usually monitoring tasks, such as measuring current, voltage, energy consumption and state of the lamp/ballast. All this kind of message are sporadic or may be distributed in time to not overload the network, which has limited bandwidth due to the IEEE 802.15.4 standard. Thus, it is not possible to support the need for high performance P2P communication only by the requirements of a smart street lighting system.

The implementation of a network solely for the purpose of monitoring the street lighting system also appears outside the context of smart cities and smart grid. Fortunately, such network has a huge potential for other applications due to its coverage. For instance, it is possible to use this network in order to improve the public transport system, as well as avoid traffic jams through a better control of the traffic lights. The public transport system may benefit from such a network if the bus stops and train stations exchange information with the buses/trains, which makes possible to inform users of this system the position and/or possible arrival time of the desired bus/train line. Furthermore, if the traffic lights and others means of traffic monitoring can communicate, it is possible to better coordinate vehicular traffic flow, even enabling the automatic warning of congestion for vehicles on certain roads [25].

These applications present different traffic patterns than a street lighting system, especially for not having the need to aggregate data in a sink node. The communication is mostly divergent, relying on P2P or multicast messages. Further, it is completely dynamic and application dependent how often and how many packets will be exchanged in a given moment or even in a given location. Therefore, a routing protocol capable of handling such heterogeneous scenario should take the fastest possible decisions with the least number of control messages, but also always looking for the shortest path. All of these requirements and challenges make this subject attractive to several researchers.

6LoWPAN is a protocol definition, standardized in Request for Comments (RFCs) 4944 and 6282 [13,26], that works as an adaptation layer between the IPv6 network layer and the IEEE 802.15.4 MAC (Media Access Control) layer, as depicted in Fig. 1
                     . It is required because IEEE 802.15.4 standard, which defines MAC and PHY layers for low power and low data rate wireless networks, is able to carry packets with maximum size of 127bytes, while IPv6 packets requires a minimum transmission unit of 1280bytes. Thus, the overall goal of 6LoWPAN is to allow IPv6 packets to be carried on top of IEEE 802.15.4-based wireless sensor networks, by defining fragmentation and compression mechanisms of the IPv6 packets and thus enabling IPv6-based wireless sensor networks [27].

In addition to fragmentation and header compression, 6LoWPAN also supports mesh networks, as most wireless sensor networks are expected to require multi-hop communication. Two possible configurations for mesh networking are defined by 6LoWPAN: mesh under and route over. In mesh under, the mesh networking must be provided by the link layer and all IPv6 hosts are only one IP hop away from the border router that is connected to an external IP network (this router is known as 6LoWPAN Border Router (6LBR)). On the other hand, in route over, the routing is done at the IP layer and hosts may be multiple IP hops away from a 6LBR. Thus, every router in the networks act as an IP router. However, although 6LoWPAN supports mesh networking, the decision of how mesh routing is actually performed is out of the scope of the 6LoWPAN specification.

In order to address the lack of a routing protocol for 6LoWPAN networks, the RPL protocol has been proposed in RFC 6550 by IETF. Accordingly, RPL provides support for point-to-point (P2P), point-to-multipoint and multipoint-to-point traffic flows [14].

The RPL protocol is based on directed acyclic graph (DAG). DAGs are directed graphs formed by a collection of n vertices labeled from the set {1,2,…,
                        n}, such that the presence of the edge 
                           
                              (
                              i
                              ,
                              j
                              )
                           
                         implies that 
                           
                              i
                              <
                              j
                           
                        . Therefore, each directed edge connects one vertex to another, such that there is no way to start at some vertex v and follow a sequence of edges that eventually loops back to v again. All edges are contained in paths oriented toward and terminating at one or more root nodes. These root nodes are known as Low power and Lossy Network Border Routers (LBR), which are devices that connects the LLN to another routing domain such as a Local Area Network (LAN) or the internet, where a different routing protocol may be in operation. In addition to its functionality as a routing device, the LBR acts as a sink node to a WSN as well as a data collector or aggregator [28].

In RPL, a DAG grounded at a single LBR is called a Destination Oriented Directed Acyclic Graph (DODAG). For a specific DODAG, each node is assigned to a rank such that rank increases as the node is far from the LBR. Note that the rank of the nodes along any path to the LBR must be monotonically decreasing, avoiding routing loops, as shown in Fig. 2
                         (each path has a label in this figure, which basically informs the average cost to reach the LBR by a specific parent). Therefore, forwarding a packet to the LBR roughly consist in choosing the neighbor node with the lowest rank.

Nodes running RPL exchange control messages to setup and maintain the DODAG, which in the 6LoWPAN implementation are ICMPv6 messages. The 1byte code in the ICMPv6 header is used to differentiate between different sub-type of control messages [29]. The sub-type used to build the DODAG is called DAG Information Object (DIO) [14]. All the nodes in the network regularly broadcast a DIO to its one-hop neighbors, indicating their activity and rank. The instant at which a node issues a DIO is governed by a Trickle timer [30], which is reset only when an inconsistency arises, i.e., very few DIOs are exchanged when the topology is stable. RPL provides optimized paths to one or more LBRs with very little information stored in the routing table. The information stored is limited to its one-hop neighbors and their parents in the DODAGs. A parent of a node within a DODAG is one of the immediate successors of the node on a path towards the DODAG root.

Despite of its advantages, the default RPL using DODAGs does not provide routes from the LBRs to other nodes in the network, which in RPL are known as down routes. Down refers to the direction from DODAG roots towards leaf nodes, following the reverse direction of DODAG edges. The availability of such routes is desirable in several scenarios, mainly in those with actuators nodes and where selective queries to sensors nodes are required. Thus, a RPL router that requires a path from a LBR to itself should send a DAO (Destination Advertisement Object) message to the LBR through the DODAG edges. The nodes that receive a DAO message forward the message as soon as the timer DelayDAO expires, being this time determined by the implementation, according to [14]. Therefore, routes for any destination inside the network, other than the LBRs, are provided by these destinations through DAO messages.

The RPL specification defines two modes of operation for the DAO mechanism, storing and non-storing modes. In non-storing mode, each node has to propagate its parent list up to the root. After receiving such topology information, the root computes the path to the destination. Such mode of operating generally makes use of unicast DAO messages to the DODAG root. The storing mode is fully stateful, i.e., each intermediate router in the path towards the root node stores the routes to the destinations in its routing table. To make this possible, each intermediate node adds its downward route to the DAO message, which is unicast to the selected parent(s).

These down routes generated by DAO messages are extremely important to point-to-point communication in the network. An example of the necessity of P2P messages is a scenario where actuators require data from sensors to decide when and how to act. Therefore, if the application needs P2P communication, each pair of nodes must request at least one downward path in order to allow such message exchange. In the worst case, the message is sent from the source router towards the LBR and, thereafter, from the LBR to the destination node, as shown in Fig. 3
                        . If the RPL protocol is being performed in the non-storing mode, all point-to-point communication will be conducted by one or more LBRs, which are the only nodes in the network that store downward routes.

The RPL protocol has several possible drawbacks, depending on the application. Generally, we can point out three usual problems. First, one can easily realize that the P2P routes provided by RPL can be much larger than the shortest available route, causing high traffic on the DODAGs routes (worsening nearby root nodes), as discussed in [17,18]. Second, the DAO message exchange may lead to excessive packet collisions, mainly in scenarios with lots of link losses. Thus, the generated downward routes are proactive and initiated by the destination. Therefore, in order for an actuator to make a request to a sensor, the sensor should know that an actuator needs to communicate by point-to-point mode. Third, proactive routing also impacts on the size of the routing table, i.e., the more down routes exists, the greater the memory required to store those paths.

Even, there are problems related to the DAO operating modes. In non-storing mode, RPL requires the use of IPv6 source routing mechanism. Therefore, a Source Routing Header (SRH) for use strictly between RPL routers in the same RPL routing domain was proposed in RFC 6554. However, RPL source routing implements a policy where each IPv6 hop between the source and destination of the source route is specified within the SRH. Such approach leads to a large overhead and increases the consumption of the already scarce bandwidth. Further, as the IEEE 802.15.4 standard has a limited maximum transmission unit, that may also imply in increased fragmentation. Therefore, successful delivery of an IP packet depends on the successful delivery of all possible fragments, which are not desirable once the LLNs are generally characterized by high packet loss rates.

In addition to the fragmentation issue, the maximum length of the routing header is limited to 255 octets [13], which restricts the maximum path length to 127 hops if an address compression mechanism is applied [31]. This limitation may exclude scenarios with long chain-like topologies, such as street lighting systems and traffic lights along a street.

In storing mode, each router has to be able to store all the routes downwards its position in the formed DODAGs. This implies that, for routers near to the root node, the required storage is only bounded by the number of paths to all other routers in the network [32]. As RPL targets networks consisting of thousands of memory-constrained devices, the required storing capacity on these devices may not be compatible with the basic precepts of the WSNs.

Due to these not negligible drawbacks, it is wise to develop some work around able to improve the RPL protocol deficiencies, mainly that related with P2P messages. To this end, a reactive distance vector routing protocol called LOADng (Lightweight Ad hoc On-Demand - Next Generation (LOADng)) has been proposed [33]. However, in recently published papers [34,35], LOADng was compared to RPL and, according to the authors, LOADng may even have worse performance than RPL according to several metrics, including average delay, control overhead and maximum memory requirements. Therefore, in this paper, we follow another possible approach for routing. Such approach is the use of geographic routing techniques, which are routing algorithms known by its low overhead and high scalability features [19,20,36].

Geographic routing mainly relies on a simple greedy geographic forwarding strategy, where each router node must select a locally optimal neighbor with a positive progress towards the data packet destination [36]. Such approach is largely known by its low overhead and scalability, which can easily be observed due to its low control message system, i.e., a router in a geographic routing strategy only needs to know its direct neighborhood.

In the geographic routing approach, the destination address is the position of the destination node, instead of a topological address. To discover a node position in the network, each router node must implement a location service. This service is responsible to determine its own position and the destination position. A node position could be obtained by pre-configuration if the node is stationary, or by a GPS receiver. If network nodes are static, the location information of the nodes can be stored during the installation process.

When considering realistic outdoor scenarios, such as a city, any block could turn into a void. A void occurs when all neighbors of a router node are farther away from the destination node than the router itself. In this case, the router fails to locate a next hop node through greedy strategy. If only the greedy-forwarding algorithm is used, packets have to be discarded when a void is reached. However, a void does not necessarily mean that there is no route to the destination, because if the network is connected, a valid topological path exists by circumventing the void.

Many researchers argue that a dense deployment of wireless nodes can reduce the likelihood of the void occurrence in the network [36,37]. Indeed, in scenarios without obstacles that can be true. However, in outdoor large scale wireless networks it is unlikely to have such scenarios. Void handling techniques is an important issue to be addressed in such networks.

Among the main non-hybrid void handling techniques, the Greedy Other Adaptive Face Routing (GOAFR) algorithm and its variations is one of the approaches that can get closer to the optimum path when traversing voids [20]. However, recently some hybrid strategies report having overcome the traditional geographic routing algorithms in terms of hop count, as the Coordinate Depth Forwarding (CDF) technique [21].

Hybrid strategies allow aggregating several techniques in order to achieve better performance than a single technique. In the next section, we propose a hybrid approach that combines the simplicity of the DODAGs routes formed by RPL protocol, the scalability and guaranteed delivery feature of GOAFR algorithm and the inherent optimal paths of the CDF heuristics.

Mainly due to its greedy step, GOAFR algorithm is able to perform quite well in networks with high link density, discovering often optimal or near-optimal paths, in contrast to RPL, which is constrained to route only through the DODAGs and thus, being unable to find the optimal paths. On the other hand, in networks with low link density, mainly around the critical density [20], GOAFR has a performance loss and may usually find longer paths than RPL. Therefore, a hybrid approach that leverages the best characteristics of RPL and GOAFR according to the network link density is proposed, resulting in better performance than a single instance of each one would present. The new routing protocol is named GeoRank to represent the integration of the geometric based behavior of GOAFR with the rank based behavior of RPL. This approach is mainly suitable for large scale networks with non-uniform link density, such as a wireless network for street lighting nodes, where the link density varies from low to high depending on the presence of obstructions and buildings in different places of the network.

In order to achieve such behavior it is proposed to integrate the CDF technique as a intermediate step in the P2P route algorithm. CDF mainly relies in the hop count towards the base stations (which in terms of RPL are the LBR nodes) to generate suboptimal routes for P2P communication. The basic idea behind such technique is to find the base station closer to the packet destination and, use the optimal path towards such base station (which is based on the hop count metric) to approximate the packet to its destination. However, instead of using directly the hop count to generate the suboptimal paths claimed by CDF, we propose to change its routing metric to the DODAG rank and study its behavior in network topologies based on real street maps. In this way it is possible to use the DODAGs as reliable paths that should be used to accelerate the packet delivery process. The main advantage of using such known and trusted path is to avoid the excessive memory consumption needed by the RPL protocol in order to store the P2P path as well as to reduce the hop count in the GOAFR algorithm around the critical density.

The proposed algorithm obviously depends on geographic position to implement the geometric portion of the protocol. Therefore, all networks nodes must be static, which favors the RPL protocol as well. This does not mean that there must be only static nodes on the network, but that mobile nodes must be one hop away from a static node. As the street lighting system and others possible applications of such network are mainly formed by static devices, it is possible to store the node position during the installation process.

In order to better describe the entire proposed algorithm it is important to define the main principles in which it is based. Therefore, considering a RPL network G comprised of a set S of nodes and a set B of border routers (DODAGs root), we describe the concept of Rank, DODAG preferred parent and DODAG root list.
                        Definition 1
                        Rank: Rank 
                              
                                 R
                                 (
                                 u
                                 ,
                                 j
                                 )
                              
                            is a metric of distance from a given node 
                              
                                 u
                                 ∈
                                 S
                              
                            to a given DODAG root 
                              
                                 j
                                 ∈
                                 B
                              
                           .

The exact way Rank is computed depends on the DAG Objective Function (OF). Even though the specific computation of the Rank is left to the OF, the Rank of the nodes must monotonically decrease as the DODAG is followed towards the DODAG destination. Therefore, the Rank can be considered a scalar representation of the location or radius of a node within a DODAG.
                        Definition 2
                        DODAG Preferred Parent (DPP): Let u be a node of 
                              
                                 G
                                 ,
                                 N
                                 (
                                 u
                                 )
                              
                            its one-hop neighbors and 
                              
                                 DPP
                                 (
                                 u
                                 ,
                                 j
                                 )
                              
                            a restricted subset of 
                              
                                 N
                                 (
                                 u
                                 )
                              
                           . For each node 
                              
                                 v
                                 ∈
                                 N
                                 (
                                 u
                                 )
                                 ,
                                 v
                                 ∈
                                 DDP
                                 (
                                 u
                                 ,
                                 j
                                 )
                              
                            if it has the lowest rank to reach a specific DODAG root 
                              
                                 j
                                 ∈
                                 B
                              
                           .

OBS.: Conceptually, the preferred parent is a single parent. However, it may be a set of multiple parents if those parents are equally preferred and have identical Rank.
                        Definition 3
                        DODAG Root List (DRL): each node 
                              
                                 v
                                 ∈
                                 N
                                 (
                                 u
                                 )
                              
                            should broadcast DIO messages regularly, as previously described. For GeoRank operation, the position of the DODAGs root should be included in such messages. So, let 
                              
                                 DRL
                                 (
                                 j
                                 )
                              
                            be a list of the DODAGs root position stored in each node u of the network.

It is important to note that the proposed algorithm is only intended for down routes. The up routes should use the traditional RPL protocol. Therefore, based on the above definitions, the overall procedure of the GeoRank operation is described in Algorithm 1.
                        Algorithm 1
                        GeoRank 
                              
                                 
                                    
                                    
                                       
                                          
                                             1. Initialize the algorithm: Based on the DRL and, the positions of source and destination nodes, trace a line between the source and destination nodes. After, trace lines between the source node and each of the DODAGs root available in the DRL. The DODAG root 
                                                
                                                   j
                                                   ∈
                                                   DRL
                                                
                                              that has the smallest absolute angle difference to the source–destination line is chosen as a anchor node for the P2P communication. Such anchor node will only be used if the greedy forwarding portion of the GOAFR algorithm fails to deliver the packet. Finally, store the position of the chosen DODAG root 
                                                
                                                   j
                                                   ∈
                                                   B
                                                
                                              in the packet being forwarded. The angle calculation is better described in [21].
                                       
                                       
                                          
                                             
                                          
                                       
                                       
                                          
                                             2. Greedy forwarding mode: If there are one or more neighbors in 
                                                
                                                   N
                                                   (
                                                   u
                                                   )
                                                
                                              closer to the destination than the current node holding the packet u, forward the packet to the neighbor 
                                                
                                                   v
                                                   ∈
                                                   N
                                                   (
                                                   u
                                                   )
                                                
                                              with the greater progress towards the destination. Repeat this approach while such condition exists. If there are no neighbor in such position, store the node u position in the packet and switch to GeoRank mode.
                                       
                                       
                                          
                                             
                                          
                                       
                                       
                                          
                                             3. GeoRank mode: If the destination node is closer to the anchor node j (stored in the packet being routed) than the current node holding the packet u, forward the packet to the DODAG Preferred Parent 
                                                
                                                   v
                                                   ∈
                                                   DDP
                                                   (
                                                   u
                                                   ,
                                                   j
                                                   )
                                                
                                             . Repeat such process until: (a) the packet reaches a node u whose position is closer to the destination than the position stored in the packet at step 2; (b) the packet reach the DODAG root j; and (c) the packet reach the destination node. If condition “a” is met, go back to step 2. If condition “b” is satisfied, go to step 4.
                                       
                                       
                                          
                                             
                                          
                                       
                                       
                                          
                                             4. Face routing mode: Execute face routing mode of GOAFR until: (a) delivery the packet; (b) the packet reaches a node u whose position is closer to the destination than the position stored in the packet at step 2. If so, go back to step 2.
                                       
                                    
                                 
                              
                           
                        

In order to evaluate the proposed technique, simulations were performed in scenarios based on real street maps exported from the OpenStreetMap (OSM) data set, which is an open collaborative mapping project [38]. The simulator, written in Julia, is based on an idealistic MAC/PHY layer with disc model for radio propagation. The scenarios have been chosen to cover a wide range of possible street layouts inside a square region. They have been populated with nodes with an average distance of 40m, in order to simulate a real street lighting system, with network sizes ranging from 100 up to 400 nodes. A sample of the chosen scenarios are shown in Fig. 4
                     .

For every scenario, there were generated 1000 random source–destination pairs, giving a coverage of up to 10% of the possible source–destination combinations. For the RPL, the DAG is constructed as the Breadth First Search (BFS) tree for the topology, thus the expected transmission count (ETX) equals one for the preferred parent. Also, every simulation was performed for 10 random positions of the DODAG root in every scenario, which gives a good coverage of the root placements in a square region, and accounts for the unpredictability in the root location due to several factors, such as the availability of infrastructure (e.g. internet connection) and future network scaling. Then, for the each source–destination pair, the route was determined by each algorithm under test (RPL, GOAFR, GeoRank and Dijkstra’ algorithm for shortest path) and length of each route was measured in number of hops. The average length of the routes was computed and the results are shown in Fig. 5
                      with 95% confidence intervals.

For comparison of the scalability of GeoRank and RPL, the number of entries in the routing table was recorded for each node. Then, the maximum value of the size of the routing table was computed over all the nodes, because it gives the worst case memory requirement (excluding the DODAG root). The results are shown in Fig. 6
                     .

The results shown that, for large radio ranges, where the average connectivity is high, the geographic routing is able to find near optimal routes. The reason for this is that with larger radio ranges the number of links that provide shorter paths are increased and the geographic routing is able to use them for routing, while RPL is constrained to the longer DODAG paths. On the other hand, when the radio range is decreased, the network approaches the critical density, where geographic routing starts to reach more voids in the network and needs to resort more often to the face routing mechanism for circumventing the voids. Thus, the overall effect is that the use of geographic routing results in longer paths than RPL in lower link density conditions.

It is noted that the low link density is the density obtained when the radio range is set to the minimum value required to keep the network connected (i.e. 40m in the simulation setup). And the network is connected when, for any two nodes in the network, there is at least one path connecting them. Also, the high link density is the density obtained when the radio range is set to a value that, for every node in the network, greedy routing always works (i.e. there is no void node). Thus, the packet always is routed through the shortest path in the network (i.e. 90m in the simulation setup).

It is remarkable that the GeoRank is able to reduce the length of the route found by geographic routing in lower link densities. It does so by avoiding to circumvent the void with face routing whenever it is possible to use the DODAG to perform this deviation. Thus, GeoRank achieves a significant reduction of the path length when the number of voids is large (i.e. when the radio range is small) compared to geographic routing alone. On the other hand, when the radio range is increased, geographic routing performs better than RPL, and GeoRank does not impact negatively its performance. Therefore, GeoRank works as a selective method, that is able to leverage the best of RPL and geographic routing, and being adaptive to the network density.

In a large scale network, there may be some places where the link density is very low due to obstacles, such as in dense urban environments, while some places may have high link density due to less and lower buildings. Therefore, while in either case RPL or geographic routing alone would not be the best option, the remarkable adaptability of GeoRank makes it the well suited to such variable link density case. Moreover, GeoRank is more scalable than storing-mode RPL according to memory usage, as shown in Fig. 6.

@&#CONCLUSIONS@&#

In this paper, it was proposed a new routing protocol, named GeoRank, which integrates the standardized RPL routing protocol for 6LoWPAN networks with the state-of-the-art GOAFR position-based routing algorithm. Such a protocol is targeted to be used in a large-scale IPv6-enabled wireless sensor network for supporting diverse applications in an urban IoT. The results obtained from simulations on networks extracted from real street maps have shown that GeoRank has an improved routing performance over GOAFR in low link density condition, while outperforming the RPL protocol in high link density condition by finding mostly optimal routes. Therefore, GeoRank is an adaptive approach for scenarios with variable link densities. Further, it is remarked that GeoRank is not required to use the RPL DAO control messages, because it uses the positions of the nodes for the P2P routing, and is more scalable than storing-mode RPL according to memory usage.

@&#REFERENCES@&#

