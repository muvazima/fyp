@&#MAIN-TITLE@&#A reliable data transmission scheme based on compressed sensing and network coding for multi-hop-relay wireless sensor networks

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A scheme of reliable data transmissions for the WSNs is presented.


                        
                        
                           
                           The encoding–decoding method is proposed and its effectiveness is proved.


                        
                        
                           
                           Performances of the proposed and other existing schemes are also analyzed.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Compressed sensing

Multipath routing

Network coding

Wireless sensor networks

@&#ABSTRACT@&#


               
               
                  The joint multipath routing and Network Coding (NC) method has been shown to improve the reliability and energy efficiency of multi-hop-relay wireless sensor networks (WSNs). However, NC is a kind of “all-or-nothing” code: the destination node cannot decode any information unless it successfully receives as many NC coded packets as the raw ones. Observed that WSNs often measure physical signals which show a high degree of correlation, in this paper, we propose a more deliberated scheme combined with Compressed Sensing (CS). Depending on the proposed measurement and recovery method, we prove that the original data can be recovered progressively while preserving the advantage of NC-based scheme. Detailed mathematical analysis of the performance of our proposed scheme along with other existing schemes is given. The experimental results also show the efficiency and robustness of the proposed scheme.
               
            

@&#INTRODUCTION@&#

Harsh environment, failure of certain nodes, and unreliable wireless communication may cause long periods of poor connectivity, which poses challenge in providing reliable transmission in wireless sensor networks (WSNs). The existing transmission schemes to improve the reliability of WSNs include the traditional forward error correction (FEC), the automatic repeat request (ARQ), and some other technologies under development, such as multipath routing [1] and network coding (NC) [2].

Among these technologies, the multipath routing, which takes advantage of the wireless channel’s broadcast property, has attracted more and more researchers’ attention. This scheme establishes multiple paths between the source and the destination/sink node through a procedure of routing discovery. It utilizes such path redundancy to enhance the network packet delivery ratio. In order to further improve the efficiency and reliability, the NC-based multipath routing schemes [3–7] have been proposed recently. Compared to the traditional store-and-forward process, the main idea of using NC is to re-encode several incoming packets into one or multiple outgoing packets at the intermediate (relay) nodes [8]. We illustrate the benefits of using NC through a simple example [3], as shown in Fig. 1
                     .

In Fig. 1, the source node wants to forward three original data blocks A, B and C to the sink node through the traditional method and the NC scheme respectively. In NC scheme, these data blocks will be encoded into X
                     1, X
                     2, and X
                     3 at the source node; then, each coded block will be packed into a data packet with its coding coefficients and broadcasted to the next hop. Because of the harsh network conditions, these packets may not be received correctly by those intermediate nodes (in Fig. 1, a crossed out packet represents its loss during propagation). Next, the intermediate nodes re-encode and relay these successfully received packets until those packets reach the sink node (destination). In this example, the sink node successfully receives 3 packets A/A/C by using the multipath method and Y
                     11/Y
                     21/Y
                     32 by using the NC-based method, respectively. Obviously, due to a redundant A, the sink node only gets two unique packets A and C in the traditional multipath method. While, by utilizing the Gauss-Jordan elimination algorithm, the sink node can recover (decode) all original/raw data blocks in NC scheme if Y
                     11/Y
                     21/Y
                     32 are linearly independent.

Nevertheless, the NC scheme still has a large space to improve. First of all, for most practical NC methods (e.g., Random Linear Network Coding (RLNC) [10]), each packet should be re-encoded at each hop until it is routed to the sink node. As each intermediate node’s local coding coefficients are independently generated, the global coding coefficients of the origin packets may be linearly correlated. Therefore, the original packets may not be successfully recovered at the sink node. Secondly, more importantly, NC scheme has a property called “all-or-nothing” [11]. As mentioned above, all N data blocks are encoded and propagated in the network, thus in order to achieve data recovery in NC scheme, efforts should be made to solve an N-dimensional linear equations. In order to successfully recover the original data, the sink node has to receive no less than N coded packets before recovery. In other words, even though the sink node receives 
                        
                           N
                           
                           −
                           
                           1
                        
                      packets, it cannot recover any information of original data. Because of the transmission requirement of observation datasets, images or videos, the real world applications of WSNs cannot tolerate such a severe constraint on their performance [11].

Motivated by the fact that the data forwarded in WSNs often shows a high degree of correlation (redundancy) [11–14], this paper proposes a scheme which combines NC and compressed sensing (CS)[15] to overcome the shortages of single NC scheme, while preserving its advantages. Both simulation and practical experiments of the influence of different network parameters on proposed scheme have been conducted, and reconstructions of both synthetic and real original data under different network delivery parameters are tested. The main contributions of this study can be summarized as follows:

                        
                           •
                           A complete design of joint application of NC and CS technologies to improve the reliability of data transmissions in WSNs is proposed. Through our proposed scheme, the destination node is able to employ the CS reconstruction algorithms to recover all original data blocks once it has received a certain number of NC coded packets (less than the number required by the existing NC-schemes).

A CS measurement method is proposed, and we theoretically prove that if this method is adopted at the source node, the destination node can extract the measurement coefficients and results from its received packets which have went through NC operating in network, thus the original data can be successfully reconstructed through CS theory.

The performances (successful delivery ratio, successful recovery probability and normalized energy consumption) of the proposed scheme along with several other existing schemes (end-to-end/hop-by-hop ARQ/FEC, multipath routing and NC-based scheme) are specifically analyzed.

The rest of the paper is organized as follows. In Section 2, we introduce the related works of this study. In Section 3, the architecture of the proposed scheme is presented. In Section 4, the performances of our scheme along with several other existing schemes is analytically studied. In Section 5, we experiment on the performances of the proposed and existing schemes under different network conditions. Finally, we conclude the paper with some discussions in Section 6.

@&#RELATED WORKS@&#

The previous related works can be divided into two categories: 1) routing protocols based on NC; 2) data gathering/aggregation schemes based on CS. MORE [16] is the primary routing protocol based on NC in the lossy WSNs. In this protocol, multiple opportunistic paths are constructed between the source node and the destination node(s). By employing the NC operation, each intermediate node will randomly mix the received packets before forwarding them. This randomness ensures nodes forward linearly independent packets despite the fact that they may hear the same transmission, thereby avoiding the node coordination that determines which packets to transmit and consequently, improving the throughput of the whole network. Thereafter, Zhang and Li [17] proposed an optimization scheme of MORE (namely, OMNC). In this protocol, they adopted a distributed optimization algorithm to manage the coding and broadcast rate in MORE while avoiding congestion. Experiment shows this scheme gains two-fold throughput increase than MORE. In order to further improve the reliability of WSNs, Yang et al. [4] proposed a reliable disjoint and braided multipath routing protocol based on NC. In this scheme, each local node can dynamically select the next hops from its neighbors according to the current link quality. They also introduced two useful indices to evaluate the performance of NC-based routing protocol: the successful delivery ratio and the normalized redundancy. In this study, both of them are adopted with a proposed new index (i.e. successful recovery probability). NCCC [7], a scheme combining NC and cooperative multipath communications, is another form of multipath protocol, where each node disseminates information through all available paths, without explicitly discovering or maintaining these paths. Note that, there are some NC-based schemes which are not constructed over multipath routing. Miao et al. [9] proposed an energy efficient broadcast scheme using NC for gradient-based routing in WSNs. The basic idea of this scheme is to reduce the network traffic and the retransmission attempts, thus prolonging the network lifetime. Although schemes making use of NC can bring many benefits, the property of NC technology itself has an impact on them [11].

Katti et al. pointed out that NC had limited success in WSNs, mostly due to two limitations [11]: first, NC is a kind of “all-or-nothing” code (its drawback is described in the Section 1); second, the current NC techniques cannot perform in-network lossy compression to take advantage of the data correlation in WSNs. To optimize the data aggregation in WSNs, they developed “Real Network Coding (RNC)” scheme which combined CS with NC. For WSNs, data aggregation is a developing energy saving method mainly proposed for the data gathering process. It is defined as the process of aggregating network sensed data to eliminate the redundant transmissions in network [18]. On the basis of RNC method, in [13], efforts were made to realize a more practical scheme called “NetCompress”. NetCompress allows each sensor node to encode its readings locally to achieve a distributed data aggregation in WSNs. In the subsequent studies, this in-network compression and routing idea was adopted in a variety of data aggregation/gathering schemes(called CDG), such as Hybrid CDG [12].

Both our scheme and CDG schemes are based on the CS theory, and the difference is that in CDG schemes the aggregation process is mostly formed along a tree structure, which is very susceptible, because a node or transmission failure may lose the aggregation result of entire nodes located in a subtree. Thus, the reliability of packet transmission plays an important role in CDG schemes. Synopsis Diffusion [19] is a reliable and robust aggregation scheme based on multipath approach. In this scheme, the underlying data dissemination topology is organized in concentric rings around the sink node, and the experimental results show that this topology structure fits well with multipath data aggregation method. Thus, in our experiments, we adopt such ring topology, and we select the typical Hybrid CDG scheme as the comparison.

As mentioned in Section 1, data forwarded in WSNs often shows a high degree of spatial or temporal correlation. For example, considering a head node has received the readings (denoted as 
                        X
                     ) observed by its N nearby nodes deployed in the event area, we have 
                        
                           X
                           =
                           
                              
                                 [
                                 
                                    x
                                    1
                                 
                                 ,
                                 
                                    x
                                    2
                                 
                                 ,
                                 .
                                 .
                                 .
                                 ,
                                 
                                    x
                                    N
                                 
                                 ]
                              
                              T
                           
                           ,
                        
                     
                     
                        
                           
                              x
                              i
                           
                           =
                           
                              [
                              
                                 x
                                 
                                    i
                                    1
                                 
                              
                              ,
                              
                                 x
                                 
                                    i
                                    2
                                 
                              
                              ,
                              .
                              .
                              .
                              ,
                              
                                 x
                                 
                                    i
                                    m
                                 
                              
                              ]
                           
                        
                      (we assume that each node observed m readings during this period when the event happened). Because that nearby sensor nodes measured the same event at the same time period, the observed data of each node (
                        xi
                        
                     ) might be spatially correlated in such context. In fact, if 
                        X
                      is an image, 
                        xi
                        
                      can be viewed as an image sub-block in JPEG image compression. And, according to the signal representation model, we can represent each column of 
                        X
                      as 
                        
                           X
                           
                              (
                              i
                              )
                           
                           =
                           
                              
                                 [
                                 
                                    x
                                    
                                       1
                                       i
                                    
                                 
                                 ,
                                 
                                    x
                                    
                                       2
                                       i
                                    
                                 
                                 ,
                                 .
                                 .
                                 .
                                 ,
                                 
                                    x
                                    
                                       N
                                       i
                                    
                                 
                                 ]
                              
                              T
                           
                           =
                           
                              Ψ
                              s
                           
                           ,
                        
                      where 
                        Ψ
                      is a transform basis. Generally, eliminating the data redundancy at the source node before sending packets to the destination will bring many advantages, such as energy consumption and traffic load. In accordance with the CS theory, if an M-by-N measurement matrix 
                        G
                      is used to measure a N-dimensional sparse signal 
                        x
                     , i.e. 
                        
                           
                              y
                              =
                              Gx
                           
                           ,
                        
                      one can successfully recover the original signal 
                        x
                      with high probability when 
                        G
                      satisfies the RIP property [15] and M > cKlog N (c is a constant and K is the sparsity degree of 
                        x
                     ).

Therefore, a simple CS programming example at the source node arises: first of all, the source node generates an M-by-N measurement matrix 
                        G
                     ; then, according to the measurements 
                        
                           
                              Y
                              =
                              GX
                           
                           ,
                        
                     
                     
                        
                           
                              Y
                              i
                           
                           =
                           
                              ∑
                              
                                 j
                                 =
                                 1
                              
                              N
                           
                           
                              
                                 G
                                 
                                    i
                                    ,
                                    j
                                 
                              
                              
                                 x
                                 j
                              
                           
                           ,
                           i
                           =
                           1
                           ,
                           2
                           ,
                           .
                           .
                           .
                           ,
                           M
                           ,
                        
                      
                     M CS encoded packets can be generated. In other words, 
                        G
                      can be considered as a CS coding coefficient matrix. Finally, each packet is forwarded to the network after adding the corresponding generation ID and coding coefficient vector, as shown in Fig. 2
                     . Note that, the transform basis 
                        Ψ
                      can be determined in advance of transmission, thus source and intermediate nodes do not need to encode the transform basis 
                        Ψ
                      into the packets.

However, if the source node packs each 
                        yi
                        
                      and its measurement coefficients in accordance with the method shown in Fig. 2, and sends the packets to the sink node through the traditional multipath routing protocol, the problems as described in Section 1 will appear once again. Therefore, we propose a joint CS and NC transmission scheme next. This scheme does not affect the CS nature during the NC operations on the source node and the intermediate nodes, and it does not require packing additional NC coefficients in data packet; that is to say, we can still use the packet packing format illustrated in Fig. 2 in our proposed scheme. Before we introduce the overall architecture of the proposed scheme, we briefly review the multipath routing protocols and the existing NC schemes.

In general, the multipath routing protocols can be divided into two main categories: the disjoint multipath routing and the braided multipath routing. Here, we only focus on the braided multipath routing which is adopted in both most NC schemes and our proposed scheme. The typical character of this protocol is that certain neighbor nodes are selected around each intermediate node (hop) to serve as its “friend” nodes, and each “friend” node can receive the data packets sent from its previous hop. Therefore, these “friend” nodes form several clusters (also called “relay set” [7]) with its intermediate nodes. The number of nodes in each cluster can be determined by the link quality of the local network and service requirement of this transmission task. An example of braided multipath routing is described in Fig. 3
                        , and a simple braided multipath routing can be established through the following three steps (to simplify this process, we let each cluster hold the same number of nodes).

                           
                              (1)
                              When the source node S has a sending task, it will actively establish n braided paths to the downstream cluster nodes. The value of n is determined according to the requirements of network service and local network conditions.

After that, the source node will select a head node from its downstream nodes (denoted as A), and sends the number of paths to be built to A. A is responsible for managing the rest 
                                    
                                       n
                                       
                                       −
                                       
                                       1
                                    
                                  nodes in the cluster.

Then, node A completes the same work as the source node does, and by doing so several clusters are constructed and connected to the destination node.

The transmission of the data (denoted as 
                           X
                        ) in NC scheme is based on the braided multipath routing created before each transmission task, and it mainly consists of three consecutive steps: encoding at the source node, re-encoding in the intermediate clusters and decoding at the destination node. 1) Firstly, at the source node, 
                           X
                         will be split into N original data blocks 
                           
                              
                                 
                                    [
                                    
                                       x
                                       1
                                    
                                    ,
                                    
                                       x
                                       2
                                    
                                    ,
                                    .
                                    .
                                    .
                                    ,
                                    
                                       x
                                       N
                                    
                                    ]
                                 
                                 T
                              
                              =
                              X
                           
                        ; then, the source node randomly generates an N-by-N coding coefficient matrix 
                           A
                         over a finite field GF(2
                           q
                        ); thereafter, it multiplies 
                           A
                         by 
                           X
                         to generate the N-coded data blocks 
                           Y
                         (
                           
                              Y
                              =
                              
                                 
                                    [
                                    
                                       y
                                       1
                                    
                                    ,
                                    
                                       y
                                       2
                                    
                                    ,
                                    .
                                    .
                                    .
                                    ,
                                    
                                       y
                                       N
                                    
                                    ]
                                 
                                 T
                              
                              =
                              AX
                           
                        ); finally, the source node packs each block 
                           y
                        
                        
                           i
                         with the corresponding coefficients and broadcasts these data packets to nodes in the first cluster, thus encoding at the source node is completed. 2) The nodes in the next cluster are required to re-encode the received packets, and then transfer them to nodes in the following cluster. The re-encoding process is performed as follows: firstly, all the nodes in the current clusters will receive those packets forwarded from the previous cluster’s nodes as far as possible; then, after receiving the packets sent from the previous cluster, similar to the encoding process at the source node, each node in such cluster re-encodes the received packets and updates the encoding coefficient and result domain of those packets before propagating it to the next cluster. Note that in this procedure, each intermediate node also needs to generate a random coding coefficient matrix (i.e. local coding matrix) as the source node. 3) After receiving and unpacking the packets sent from the last cluster, the sink node is able to recover the original data 
                           X
                         through the Gauss-Jordan elimination as long as it has successfully received no less than N NC coded blocks.

Similar to the NC scheme, our proposed scheme also mainly consists of three procedures: encoding at the source node, encoding at the intermediate nodes and decoding at the destination node.

Because the measurement matrix decides the CS encoding process and the recovery probability at the destination node, before introducing the encoding process, the CS measurement matrix should be settled first. The full random Bernoulli matrix 
                              G
                           , with its entries being i.i.d. Bernoulli ( ± 1) numbers, seems to be a good candidate. More specifically, the normalization form of measurement matrix 
                              G
                            containing i.i.d. entries is: 
                              
                                 (1)
                                 
                                    
                                       
                                          
                                             
                                                
                                                   G
                                                   
                                                      i
                                                      j
                                                   
                                                
                                                =
                                                
                                                   1
                                                   
                                                      M
                                                   
                                                
                                                
                                                   {
                                                   
                                                      
                                                         
                                                            
                                                               +
                                                               1
                                                               
                                                               w
                                                               i
                                                               t
                                                               h
                                                               
                                                               p
                                                               r
                                                               o
                                                               b
                                                               a
                                                               b
                                                               i
                                                               l
                                                               i
                                                               t
                                                               y
                                                               
                                                               
                                                                  1
                                                                  2
                                                               
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               −
                                                               1
                                                               
                                                               w
                                                               i
                                                               t
                                                               h
                                                               
                                                               p
                                                               r
                                                               o
                                                               b
                                                               a
                                                               b
                                                               i
                                                               l
                                                               i
                                                               t
                                                               y
                                                               
                                                               
                                                                  1
                                                                  2
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

There are two advantages in employing this type of measurement matrix. One is that, measurement matrix in this distribution has a better payload overhead than in other distributions (such as Gaussian) (note that each row of 
                              G
                            (denoted by 
                              gi
                              
                           ) will be packed with its corresponding measurement result 
                              yi
                              
                           ). For each transmission task, we can develop a field to store M separately, while gij
                            will only consume 1 bit to record the ± 1 information. The other advantage is that, there is a remarkable result in [20] claiming that a random measurement matrix, in which each entry follows an i.i.d Bernoulli distribution, satisfies the RIP property with exponentially high probability, which is irrelevant to the chosen transform domain.

However, this matrix cannot be directly used in our encoding process. Because the row vectors of the measurement matrix 
                              G
                            must be linearly independent. In other words, for the M × N matrix 
                              G
                            generated with this method, we cannot guarantee 
                              
                                 r
                                 a
                                 n
                                 k
                                 (
                                 G
                                 )
                                 =
                                 M
                              
                           . If we use a row non-singular measurement matrix 
                              G
                           , after the NC operation in the network (as depicted in Section 3.2, the measurement matrix received by the sink node after NC (denoted by 
                              G′
                           ) can be regarded as the linear transformation of matrix 
                              G
                           . Therefore, 
                              G′
                            is not full rank either, which will inevitably cause the failure of NC decoding at the destination node, and it will further result in the failure of whole joint NC and CS scheme. In order to eliminate this problem, we introduce an improved measurement matrix. For the convenience of description, we split 
                              G
                            into two parts 
                              
                                 G
                                 =
                                 [
                                 
                                    
                                       G
                                       1
                                    
                                    ,
                                    
                                       G
                                       2
                                    
                                 
                                 ]
                                 ,
                              
                            where 
                              G1
                              
                            is an M-by-M sub-matrix, and 
                              G2
                              
                            is an M-by-
                              
                                 (
                                 N
                                 
                                 
                                 −
                                 
                                 
                                 M
                                 )
                              
                            sub-matrix. If we let 
                              G1
                              
                            be the identity matrix, and the entries in 
                              G2
                              
                            are still drawn according to the Bernoulli ( ± 1) distribution, it will be assured that 
                              
                                 r
                                 a
                                 n
                                 k
                                 (
                                 G
                                 )
                                 =
                                 M
                              
                            and the columns in 
                              G1
                              
                            is orthogonal to each other. Recall that RIP is a metric that describes how close to orthogonal a matrix is, thus, by adding these orthogonal columns, it does not affect the RIP of full random matrix. The detailed proof of this proposition can also be found in [14]. Therefore, for CS encoding (measurement), the following method can be used:

                              
                                 (2)
                                 
                                    
                                       Y
                                       =
                                       
                                          [
                                          
                                             
                                                
                                                   
                                                      y
                                                      1
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      y
                                                      2
                                                   
                                                
                                             
                                             
                                                
                                                   ⋮
                                                
                                             
                                             
                                                
                                                   
                                                      y
                                                      N
                                                   
                                                
                                             
                                          
                                          ]
                                       
                                       =
                                       GX
                                       =
                                       
                                          [
                                          
                                             G
                                             1
                                          
                                          ,
                                          
                                             G
                                             2
                                          
                                          ]
                                       
                                       
                                          [
                                          
                                             
                                                
                                                   
                                                      x
                                                      1
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      x
                                                      2
                                                   
                                                
                                             
                                             
                                                
                                                   ⋮
                                                
                                             
                                             
                                                
                                                   
                                                      x
                                                      N
                                                   
                                                
                                             
                                          
                                          ]
                                       
                                       =
                                       
                                          (
                                          
                                             
                                                
                                                   1
                                                
                                                
                                                   0
                                                
                                                
                                                   ⋯
                                                
                                                
                                                   0
                                                
                                                
                                                   
                                                      g
                                                      
                                                         1
                                                         M
                                                         +
                                                         1
                                                      
                                                   
                                                
                                                
                                                   ⋯
                                                
                                                
                                                   
                                                      g
                                                      
                                                         1
                                                         N
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   0
                                                
                                                
                                                   1
                                                
                                                
                                                   ⋯
                                                
                                                
                                                   0
                                                
                                                
                                                   
                                                      g
                                                      
                                                         2
                                                         M
                                                         +
                                                         1
                                                      
                                                   
                                                
                                                
                                                   ⋯
                                                
                                                
                                                   
                                                      g
                                                      
                                                         2
                                                         N
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   ⋮
                                                
                                                
                                                   ⋮
                                                
                                                
                                                   ⋱
                                                
                                                
                                                   ⋮
                                                
                                                
                                                   ⋮
                                                
                                                
                                                   ⋱
                                                
                                                
                                                   ⋮
                                                
                                             
                                             
                                                
                                                   0
                                                
                                                
                                                   0
                                                
                                                
                                                   ⋯
                                                
                                                
                                                   1
                                                
                                                
                                                   
                                                      g
                                                      
                                                         M
                                                         M
                                                         +
                                                         1
                                                      
                                                   
                                                
                                                
                                                   ⋯
                                                
                                                
                                                   
                                                      g
                                                      
                                                         M
                                                         N
                                                      
                                                   
                                                
                                             
                                          
                                          )
                                       
                                       
                                          [
                                          
                                             
                                                
                                                   
                                                      x
                                                      1
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      x
                                                      2
                                                   
                                                
                                             
                                             
                                                
                                                   ⋮
                                                
                                             
                                             
                                                
                                                   
                                                      x
                                                      N
                                                   
                                                
                                             
                                          
                                          ]
                                       
                                    
                                 
                              
                           
                        

Next, 
                              yi
                              
                            should be encoded in accordance with the NC scheme mentioned in Section 3.2. Because NC operates over the finite field, we need to transfer the CS measurement results 
                              Y
                            and coefficient matrix 
                              G
                            to a finite field before the encoding process of the NC scheme. As the element in 
                              G
                            is ±1 or 0, we are able to directly map it onto the finite field. Then, the NC encoding coefficient matrix 
                              A
                            is randomly generated at the source node, and it is used to conduct NC source coding of rows of 
                              Y
                            and 
                              G
                            at the same time, 
                              
                                 [
                                 
                                    
                                       G
                                       ′
                                    
                                    
                                       |
                                    
                                    
                                       Y
                                       ′
                                    
                                 
                                 ]
                                 =
                                 
                                    A
                                    [
                                    G
                                    |
                                    Y
                                    ]
                                 
                              
                           . As we mentioned before, different from the NC transmission scheme introduced in Section 4.2, the NC coefficient vector is not required to transmit with the coded data. The reason is that we can acquire the global NC coding coefficient matrix at the sink node if our proposed measurement matrix is utilized. The detailed procedure will be illustrated in the following paper. Thus, the source node only needs to pack each row of [
                              G′|Y′
                           ] in accordance with the row order pair, and then propagates it to the network.

After receiving packets from the previous cluster/source node, each intermediate node needs to conduct NC on those received packets. The main coding procedure is same to the NC scheme, but one issue should be pointed out, that is, the packets transmitted between two consecutive clusters may cause cumulative coding and transmission problem. For example, assume that the source node has sent N packets in a transmission task, thus, if the network is in a good condition, each node in the first cluster should have received N packets. If at this time each node in this cluster encodes their received packets and generates equal number of new packets, then after the transmission of those packets each node in the second cluster can receive at most N × n
                           1 packets (ni
                            refers to the number of nodes in the ith
                            cluster). If such encoding and transmission process continues it will cause that the nodes close to the sink node have to encode and send a large number of packets (N × n
                           1 × n
                           2 × ...). In Ref. [7], the authors propose a method to solve this problem through cooperative coding and transmission within each cluster. They let nodes in each cluster maintain a circular transmission queue, and only the node who is pointed by the queue pointer is able to generate and transmit a packet. Thus, it is possible to control the total number of packets generated and transmitted by the entire cluster through scanning a certain rounds of this queue. Despite the fact that this well-designed program can solve this problem, in order to maintain the transmission queue, a lot of control packets will be generated, leading to a very complex network control protocol, and increasing the burden of network energy consumption as well.

In our scheme, we let each intermediate node maintain a threshold Cthreshold
                            to control the number of output packets. For example, assume an intermediate node has received r packets; no matter r > Cthreshold
                            or r < Cthreshold
                           , it will randomly generate an Cthreshold
                            × r local coding coefficient matrix and encode r received packets into Cthreshold
                            new packets. Considering the measurement bound(M) of the CS recovery algorithm used at the destination node, Cthreshold
                            should at least be bigger than M/min(ni
                           ). One can see that, it can improve the recovery quality at the destination node by increasing the value of Cthreshold
                           , but in the meantime, it can also cause higher energy consumption. We will analyze the impact of this value on the network performance in the next section. Note that, in a prior multipath NC scheme [21], they also adopt the Cthreshold
                            and it is fixed to 
                              
                                 N
                                 
                                 +
                                 
                                 k
                                 ,
                              
                            where k refers to the number of added redundant data blocks/packets. This is different from ours, because the purpose of using k redundant packets in [21] is similar to employing the Reed–Solomon codes in the forward error correction (FEC), that is to say, people cannot acquire any extra information from those redundant packets in the decoding process.

The main processes to reconstruct the original data at the destination node are as follows: first of all, the destination node will extract the coding coefficients 
                              G′
                            and results 
                              Y′
                            from the received packets. Then, the original CS measurement coefficients 
                              G
                            and results 
                              Y
                            should be decoded from 
                              G′
                            and results 
                              Y′
                           ; finally, the original data 
                              X
                            will be reconstructed from 
                              Y
                            and 
                              G
                            by using the CS reconstruction method. There are many prior researches on what CS method should be adopted to recover 
                              X
                           , thus we will not discuss this aspect in this paper, and we will only use the classic reconstruction method in our experiments. Therefore, the key of this scheme is whether we could decode the CS measurement coefficients 
                              G
                            and results 
                              Y
                            from the received packets. Next, we will introduce Proposition 1, and the proof process of this proposition is also the decoding process.

                              Proposition 1
                              
                                 If the CS measurement method as shown in 
                                 
                                    Eq. (2)
                                  
                                 is adopted, as long as the number of packets received by the sink node is no less than the number of CS measurement results and NC coding coefficient domains of these packets are linearly independent, the original CS measurement coefficients and results can be definitely decoded from these packets. The probability of linear independence of NC coding coefficients in these packets is decided by the adopted specific NC mechanism.
                              

Assume that, in accordance with Eq. (2), M CS measurement results 
                                    
                                       Y
                                       =
                                       [
                                       
                                          y
                                          1
                                       
                                       ,
                                       
                                          y
                                          2
                                       
                                       ,
                                       .
                                       .
                                       .
                                       ,
                                       
                                          y
                                          M
                                       
                                       ]
                                    
                                  have been generated and each 
                                    yi
                                    
                                  has been sent from the source node after it was packed with its corresponding CS measurement coefficients 
                                    gi
                                    
                                 . Then, according to NC theory, the NC operation of these packets is equivalent to the linear transformation of the coefficient domain 
                                    yi
                                    
                                  and data domain 
                                    gi
                                    
                                 . Thus, without losing generality, assume m packets are successfully received at the sink node, and the payload of the ith
                                  packet includes the data block 
                                    
                                       y
                                       i
                                       ′
                                    
                                  and the encoding coefficient vector 
                                    
                                       
                                          g
                                          i
                                          ′
                                       
                                       =
                                       
                                          [
                                          
                                             g
                                             
                                                i
                                                1
                                             
                                             ′
                                          
                                          ,
                                          
                                             g
                                             
                                                i
                                                2
                                             
                                             ′
                                          
                                          ,
                                          .
                                          .
                                          .
                                          ,
                                          
                                             g
                                             
                                                i
                                                M
                                             
                                             ′
                                          
                                          ]
                                       
                                    
                                 . If there are M (M < m) linearly independent vectors among these m measurement coefficient vectors, consider an augmented matrix 
                                    A
                                  formed by the M encoding coefficient vectors and encoding data blocks 
                                    Y
                                 , thus if the original CS measurement result 
                                    Y
                                  and measurement matrix 
                                    G
                                  can be decoded from this augmented matrix 
                                    A
                                 , then, Proposition 1 is proved. Since the augmented matrix includes M linearly independent vector sets, the rank of 
                                    A
                                  is no less than M; so, if a certain number (l) of elementary row transformations are conducted to matrix 
                                    A
                                  (
                                    Pl...P2P1A
                                 ), it can definitely transform 
                                    A
                                  into a transformational matrix with M × M unit matrix at the top left corner, and the transformation process is as follows:

                                    
                                       (3)
                                       
                                          
                                             A
                                             =
                                             
                                                [
                                                
                                                   
                                                      
                                                         
                                                            g
                                                            11
                                                            ′
                                                         
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               1
                                                               N
                                                            
                                                            ′
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               y
                                                            
                                                            1
                                                            ′
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            g
                                                            21
                                                            ′
                                                         
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               2
                                                               N
                                                            
                                                            ′
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               y
                                                            
                                                            2
                                                            ′
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋱
                                                      
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋮
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            g
                                                            
                                                               m
                                                               1
                                                            
                                                            ′
                                                         
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               m
                                                               N
                                                            
                                                            ′
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               y
                                                            
                                                            m
                                                            ′
                                                         
                                                      
                                                   
                                                
                                                ]
                                             
                                             
                                                ⟹
                                                
                                                   
                                                      P
                                                      l
                                                   
                                                   .
                                                   .
                                                   .
                                                   
                                                      P
                                                      2
                                                   
                                                   
                                                      P
                                                      1
                                                   
                                                   A
                                                
                                             
                                             T
                                             =
                                             
                                                [
                                                
                                                   
                                                      
                                                         1
                                                      
                                                      
                                                         0
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         0
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               1
                                                               M
                                                               +
                                                               1
                                                            
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               1
                                                               N
                                                            
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               y
                                                            
                                                            1
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         0
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               2
                                                               M
                                                               +
                                                               1
                                                            
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               2
                                                               N
                                                            
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               y
                                                            
                                                            2
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋱
                                                      
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋱
                                                      
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋮
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                      
                                                      
                                                         0
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         1
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               M
                                                               M
                                                               +
                                                               1
                                                            
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               M
                                                               M
                                                               +
                                                               1
                                                            
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               y
                                                            
                                                            M
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋱
                                                      
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋱
                                                      
                                                      
                                                         ⋮
                                                      
                                                      
                                                         ⋮
                                                      
                                                   
                                                   
                                                      
                                                         0
                                                      
                                                      
                                                         0
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         0
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               m
                                                               M
                                                               +
                                                               1
                                                            
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                      
                                                         ⋯
                                                      
                                                      
                                                         
                                                            g
                                                            
                                                               m
                                                               M
                                                               +
                                                               1
                                                            
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               y
                                                            
                                                            m
                                                            
                                                               ′
                                                               ′
                                                            
                                                         
                                                      
                                                   
                                                
                                                ]
                                             
                                          
                                       
                                    
                                 
                              

Considering that 
                                    A
                                  consists of the CS measurement coefficients and results which have gone through the NC operation in the network, so each row of 
                                    A
                                  can be regarded as the linear transformation of the original CS measurement matrix and results. Therefore, after the above equation is adopted to conduct transformation, 
                                    Pl...P2P1A
                                  exactly forms the inverse transformation of such linear transformation. As a consequence, the top M rows in 
                                    T
                                  form the original CS measurement matrix 
                                    G
                                  and the result 
                                    Y
                                 , and the sub-matrix in the red box includes our proposed CS measurement sub-matrix 
                                    G2
                                    
                                  and results 
                                    Y
                                 . Thus, this proposition is proved.□

For the decoding probability of CS in our scheme, according to CS theory, if the number of measurements M is higher than Klog(N/K), the K-sparse original signal can be reconstructed by l
                           1-minimization with a probability close to one. As mentioned above, we are not concerned with the tractability so much as it is beyond the scope of this paper, and we do not focus on how to optimize the control overhead of CS. Hence, in our subsequent analysis, it is assumed that CS can be utilized to restore the original data if m, the number of packets received by the sink node, is greater than Klog(N/K). As for the recovery quality of a specific generation data at the destination node, it will be simulated in Section 5.

Reliable data transmission schemes for WSNs must be able to simultaneously achieve a high error recovery rate and conserve the energy consumption by sensor nodes; in order to evaluate the performance of different schemes, based on the existing researches [5,6], we consider the following three metrics: the successful delivery ratio (SDR), the successful recovery probability (SRP) and the normalized redundancy (NR). Suppose that a generation of data to be forwarded from the source node in a task is 
                        X
                     , and 
                        X
                      contains N data blocks. Each data block will be packed into a packet, and each packet only packs one data block. When these packets are sent to the network, SDR refers to the rate of packets being successfully received by the sink node, and SRP refers to the probability of successfully recovering the original N blocks at the sink node. Obviously, SRP is determined by the number of packets received (namely SDR × N) by the sink node, but SRP is also determined by the encoding and decoding strategy. For example, if the source node transfers 
                        
                           N
                           
                           +
                           
                           k
                        
                      packets by using the (N, k) linear block encoding scheme [22], the SRP of such scheme is equal to the probability of the sink node receiving more than N linear independent packets. When the sink node successfully receives a packet, NR is the ratio of the packet payload over the total length of the network in propagating this encoded packet, which reflects the amount of packet transmission redundancy in the network. In addition, sending and receiving data packets consume most part of energy of sensor nodes, so NR can also reflect the network energy consumption.

We now analytically study the performance of various reliable packet forwarding schemes based on the probability theory. We assume that each node has equivalent properties, i.e., each node has the same probability of correctly receiving packets. The channel quality between two hops is evaluated by the bit error rate (BER, denoted by pb
                     ) and such error occurs independently between bits. Therefore, for a packet of L bits, the probability of it being correctly received by a specific downstream node is

                        
                           (4)
                           
                              
                                 
                                    
                                       
                                          p
                                          =
                                          
                                             
                                                (
                                                1
                                                −
                                                
                                                   p
                                                   b
                                                
                                                )
                                             
                                             L
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

First of all, we will analyze the simplest single-path forwarding scheme. Suppose that N data packets which form a generation of source data will be propagated from the source node to the destination node through the single-path routing (as shown in Fig. 4
                        ). With regard to an arbitrary packet, we record ai
                         (1 ≤ i ≤ H) as the probability of it being successfully received by the ith hop, so we have 
                           
                              (5)
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                                i
                                             
                                             =
                                             
                                                p
                                                i
                                             
                                          
                                       
                                    
                                 
                              
                           
                        in this scheme. Because the packets are propagated from source to destination through H hops, SDR of this scheme can be calculated by the formula

                           
                              (6)
                              
                                 
                                    
                                       
                                          
                                             SDR
                                             =
                                             
                                                a
                                                H
                                             
                                             
                                             ×
                                             
                                             N
                                             /
                                             N
                                             =
                                             
                                                a
                                                H
                                             
                                          
                                       
                                    
                                 
                              
                           
                        Since the destination node needs to receive all packets to recover source data, for this scheme,

                           
                              (7)
                              
                                 
                                    
                                       
                                          
                                             SRP
                                             =
                                             
                                                
                                                   (
                                                   
                                                      a
                                                      H
                                                   
                                                   )
                                                
                                                N
                                             
                                          
                                       
                                    
                                 
                              
                           
                        For NR, we should calculate the total number of packets sent on each network link. If we record the number of packets sent from the ith hop to the 
                           
                              i
                              +
                              1
                              th
                           
                         hop as si
                        , we get

                           
                              (8)
                              
                                 
                                    
                                       
                                          
                                             
                                                s
                                                i
                                             
                                             =
                                             
                                                a
                                                
                                                   i
                                                   −
                                                   1
                                                
                                             
                                             
                                             ×
                                             
                                             N
                                          
                                       
                                    
                                 
                              
                           
                        and NR can be calculated by

                           
                              (9)
                              
                                 
                                    
                                       
                                          
                                             NR
                                             =
                                             
                                                ∑
                                                
                                                   i
                                                   =
                                                   0
                                                
                                                
                                                   H
                                                   −
                                                   1
                                                
                                             
                                             
                                                s
                                                i
                                             
                                             /
                                             
                                                (
                                                SDR
                                                
                                                ×
                                                
                                                N
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           
                        In accordance with different transmission control methods, the typical reliable packet transmission schemes for single-path forwarding include the FEC and ARQ schemes, and both of them can be divided into two methods: end-to-end and hop-by-hop. To reduce the length of this section, we move follow-up analysis of these schemes to Appendix A, and the results can be found in Table 1
                        .

As depicted in Fig. 3, in the traditional multipath routing schemes, packets are propagated to the sink node “hop-by-hop”. Each “hop” is composed of several nodes to form a cluster. We divide them into various clusters: Cluster 1 to Cluster H, and each cluster has 
                           
                              
                                 n
                                 i
                              
                              
                                 (
                                 i
                                 =
                                 1
                                 ,
                                 .
                                 .
                                 .
                                 ,
                                 H
                                 )
                              
                           
                         nodes. The destination is located in cluster H, thus,

                           
                              (10)
                              
                                 
                                    
                                       
                                          
                                             
                                                n
                                                H
                                             
                                             =
                                             1
                                          
                                       
                                    
                                 
                              
                           
                        Similar to the single-path forwarding scheme, we assume the source node generates N packets in a generation of a single transmission task. Thus, in traditional store-and-forward schemes, these packets will be propagated to the sink node cluster by cluster. We can successively derive the number of receiving and forwarding packets in each cluster and then calculate each metric at the destination according to the relationship between various clusters. We denote the value 
                           
                              
                                 a
                                 
                                    i
                                    ,
                                    k
                                 
                              
                              ,
                              0
                              ≤
                              k
                              ≤
                              
                                 n
                                 
                                    i
                                    −
                                    1
                                 
                              
                           
                         as the probability of k nodes in cluster i to successfully receive a specific packet. Therefore,

                           
                              (11)
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                                
                                                   1
                                                   ,
                                                   k
                                                
                                             
                                             =
                                             
                                                C
                                                
                                                   
                                                      n
                                                      1
                                                   
                                                
                                                k
                                             
                                             
                                                p
                                                k
                                             
                                             
                                                
                                                   (
                                                   1
                                                   −
                                                   p
                                                   )
                                                
                                                
                                                   
                                                      n
                                                      1
                                                   
                                                   −
                                                   k
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        where p refers to the probability of accurately receiving a packet in one transmission. Furthermore, the probability of correctly receiving a packet for nodes in the first cluster is

                           
                              (12)
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                                1
                                             
                                             =
                                             1
                                             
                                             −
                                             
                                             
                                                
                                                   (
                                                   1
                                                   
                                                   −
                                                   
                                                   p
                                                   )
                                                
                                                
                                                   n
                                                   1
                                                
                                             
                                             =
                                             
                                                ∑
                                                
                                                   k
                                                   =
                                                   1
                                                
                                                
                                                   n
                                                   1
                                                
                                             
                                             
                                                a
                                                
                                                   1
                                                   ,
                                                   k
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        Based on the iterative formula derived in each cluster, the recursive solution of ai
                        (i > 1) is

                           
                              (13)
                              
                                 
                                    
                                       
                                          
                                             
                                                a
                                                i
                                             
                                             =
                                             
                                                ∑
                                                
                                                   k
                                                   =
                                                   1
                                                
                                                
                                                   n
                                                   
                                                      i
                                                      
                                                      −
                                                      
                                                      1
                                                   
                                                
                                             
                                             
                                                
                                                   a
                                                   
                                                      i
                                                      
                                                      −
                                                      
                                                      1
                                                      ,
                                                      k
                                                   
                                                
                                                
                                                   (
                                                   1
                                                   
                                                   −
                                                   
                                                   
                                                      
                                                         
                                                            
                                                               (
                                                               1
                                                               
                                                               −
                                                               
                                                               p
                                                               )
                                                            
                                                            
                                                               n
                                                               i
                                                            
                                                         
                                                      
                                                      k
                                                   
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        In consequence, for the traditional multipath routing scheme,

                           
                              (14)
                              
                                 
                                    
                                       
                                          
                                             SDR
                                             =
                                             
                                                a
                                                H
                                             
                                          
                                       
                                    
                                 
                              
                           
                        Since only by receiving all N packets can the sink node successfully recover the information of whole packets, and in this way,

                           
                              (15)
                              
                                 
                                    
                                       
                                          
                                             SRP
                                             =
                                             
                                                a
                                                H
                                                N
                                             
                                          
                                       
                                    
                                 
                              
                           
                        To evaluate NR of this scheme, we denote the number of packets sent from cluster i by

                           
                              (16)
                              
                                 
                                    
                                       
                                          
                                             
                                                s
                                                i
                                             
                                             =
                                             
                                                ∑
                                                
                                                   k
                                                   =
                                                   1
                                                
                                                
                                                   n
                                                   i
                                                
                                             
                                             
                                                
                                                   a
                                                   
                                                      i
                                                      ,
                                                      k
                                                   
                                                
                                                
                                                ×
                                                
                                                N
                                             
                                             
                                                (
                                                0
                                                ≤
                                                i
                                                ≤
                                                H
                                                
                                                −
                                                
                                                1
                                                ,
                                                
                                                   s
                                                   0
                                                
                                                
                                                −
                                                
                                                N
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           
                        Thus

                           
                              (17)
                              
                                 
                                    
                                       
                                          
                                             NR
                                             =
                                             
                                                ∑
                                                
                                                   i
                                                   
                                                   −
                                                   
                                                   0
                                                
                                                
                                                   H
                                                   
                                                   −
                                                   
                                                   1
                                                
                                             
                                             
                                                s
                                                i
                                             
                                             /
                                             
                                                (
                                                SDR
                                                
                                                ×
                                                
                                                N
                                                )
                                             
                                             =
                                             
                                                (
                                                1
                                                +
                                                
                                                   ∑
                                                   
                                                      i
                                                      =
                                                      1
                                                   
                                                   
                                                      H
                                                      
                                                      −
                                                      
                                                      1
                                                   
                                                
                                                
                                                   
                                                      ∑
                                                      
                                                         k
                                                         =
                                                         1
                                                      
                                                      
                                                         n
                                                         i
                                                      
                                                   
                                                   
                                                      a
                                                      
                                                         i
                                                         ,
                                                         k
                                                      
                                                   
                                                
                                                )
                                             
                                             /
                                             SDR
                                          
                                       
                                    
                                 
                              
                           
                        The same as above, we move follow-up analysis of these schemes to Appendix B and the results can be found in Table 2
                        .

@&#PERFORMANCE EVALUATION@&#

We have evaluated the performance of the proposed and existing schemes through both simulation and practical experiments. In our simulation experiments, there are mainly two parts: the performance simulation of the proposed scheme in the data transmission network environment, and the comparison between our scheme and an existing data aggregation scheme. Based on our previous relevant studies [4,6], we used OMNeT++ [22] to establish our sensor network. In data transmission experiment, according to the description in Section 3.1, we established multipath routing between the source node and the destination node first. In the simulation settings, we adopted the free space model for the physical layer and the CSMA/CA protocol for the MAC layer, and we let the proposed scheme, similar to the NC schemes, work over the network layer. Due to the data reconstruction performance of the sink node involved in the sparsity of data itself and the selected reconstruction algorithm, it belongs to the category of the application layer. Thus, as a matter of convenience, we directly adopted the classical CS recovery algorithm to reconstruct the data received by the sink node by using MATLAB. Table 3
                      shows the rest detailed network parameters.

To account for the potentially high loss rate in networks, we let the BER of links range from 
                           
                              10
                              
                                 −
                                 4
                              
                           
                         to 
                           
                              1.5
                              ×
                              
                                 10
                                 
                                    −
                                    3
                                 
                              
                           
                        . We assume that the source node sends out the same data in different schemes, and each generation of source data contains 64 × 64 characters. We generated and used the following original data signals (as shown in Fig. 5
                        ). Note that both of the synthetic signals and real signals were designed as a generation of source data. We investigated the synthetic signals, because the sparse degree of them could be precisely controlled under a certain transformation domain.

(Fig. 5(a)) We recorded a generation of data as 
                              X
                           , and we regarded 
                              X
                            as a compound of N (
                              
                                 N
                                 =
                                 64
                              
                            ) time sequences, and 
                              X
                            in each time sequence was obtained from four easy trigonometric functions as follows:

                              
                                 (18)
                                 
                                    
                                       
                                          
                                             
                                                X
                                                
                                                   (
                                                   i
                                                   )
                                                
                                                =
                                                sin
                                                
                                                   (
                                                   i
                                                   /
                                                   2
                                                   π
                                                   )
                                                
                                                (
                                                0.3
                                                cos
                                                
                                                   (
                                                   2
                                                   π
                                                   
                                                      f
                                                      1
                                                   
                                                   
                                                      T
                                                      s
                                                   
                                                   
                                                      t
                                                      s
                                                   
                                                   )
                                                
                                                +
                                                0.6
                                                cos
                                                
                                                   (
                                                   2
                                                   π
                                                   
                                                      f
                                                      2
                                                   
                                                   
                                                      T
                                                      s
                                                   
                                                   
                                                      t
                                                      s
                                                   
                                                   )
                                                
                                                +
                                                0.1
                                                cos
                                                
                                                   (
                                                   2
                                                   π
                                                   
                                                      f
                                                      3
                                                   
                                                   
                                                      T
                                                      s
                                                   
                                                   
                                                      t
                                                      s
                                                   
                                                   )
                                                
                                                +
                                                0.9
                                                cos
                                                
                                                   (
                                                   2
                                                   π
                                                   
                                                      f
                                                      4
                                                   
                                                   
                                                      T
                                                      s
                                                   
                                                   
                                                      t
                                                      s
                                                   
                                                   )
                                                
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           In Eq. (18), we set the frequency of each trigonometric function: 
                              
                                 
                                    f
                                    1
                                 
                                 =
                                 50
                                 ,
                              
                           
                           
                              
                                 
                                    f
                                    2
                                 
                                 =
                                 100
                              
                            ,
                              
                                 
                                    f
                                    3
                                 
                                 =
                                 200
                              
                            , 
                              
                                 
                                    f
                                    4
                                 
                                 =
                                 400
                              
                           ; the sampling frequency 
                              
                                 
                                    f
                                    s
                                 
                                 =
                                 800
                              
                           ; the time slice length: 
                              
                                 
                                    t
                                    s
                                 
                                 =
                                 1
                                 /
                                 
                                    f
                                    s
                                 
                              
                           ; the sampling sequence 
                              
                                 
                                    T
                                    s
                                 
                                 =
                                 1
                                 ,
                                 2
                                 ,
                                 .
                                 .
                                 .
                                 ,
                                 N
                              
                           . Thus, under such circumstance, every time sequence has a sparse degree of 7 under the DFT transformation.

(Fig. 5(b)) We created this signal from the DCT domain 
                              S
                            with a size of K × K (
                              
                                 K
                                 =
                                 
                                    N
                                 
                              
                           ). All entries in 
                              S
                            were uniformly and randomly picked in the interval between 0.5 and 1.5. Then, we defined a frequency mask for each entry in 
                              S
                           : 
                              
                                 S
                                 (
                                 p
                                 ,
                                 q
                                 )
                                 =
                                 t
                                 r
                                 i
                                 a
                                 n
                                 g
                                 (
                                 p
                                 ,
                                 q
                                 )
                                 S
                                 (
                                 p
                                 ,
                                 q
                                 )
                              
                           . The mask function triang(p, q) was defined as:

                              
                                 (19)
                                 
                                    
                                       
                                          
                                             
                                                t
                                                r
                                                i
                                                a
                                                n
                                                g
                                                
                                                   (
                                                   p
                                                   ,
                                                   q
                                                   )
                                                
                                                =
                                                
                                                   {
                                                   
                                                      
                                                         
                                                            
                                                               1
                                                               ,
                                                            
                                                         
                                                         
                                                            
                                                               p
                                                               +
                                                               q
                                                               <
                                                               5
                                                               
                                                               o
                                                               r
                                                               
                                                               p
                                                               +
                                                               q
                                                               >
                                                               123
                                                            
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               0
                                                               ,
                                                            
                                                         
                                                         
                                                            
                                                               e
                                                               l
                                                               s
                                                               e
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        

(Fig. 5(c)) We also selected two real signals as a generation of data for different deployment applications. Firstly, we picked an image called “Airplane”, which is frequently used in the image processing literatures.

(Fig. 5(d)) Secondly, we chose the data of ocean surface temperatures at the Georgia coast collected by the National Oceanic and Atmospheric Administration (NOAA, [23]).

Now, first of all, we simulated the influence of BER on those schemes illustrated in Section 4. To achieve this, we fixed the other parameters first. We set the amount of packet redundancy of FEC scheme 
                           
                              k
                              =
                              10
                           
                        . While for the multipath transmission, the number of nodes in a cluster was fixed to 3; for our proposed scheme, the data sparsity of a generation data was 10, and the forwarding threshold was 19. The simulation results are shown in Fig. 6
                        . On the aspect of SDR, those schemes working on single-path routing (except for ARQ schemes) have significantly worse performance than those using the multipath methods. Because of the retransmission by using ARQ strategy, SDR values of both end-to-end and hop-by-hop ARQ schemes are 1. As Fig. 6(a) shows, the hop-by-hop FEC scheme has the worst SDR performance. The sink node can only receive 45% of the packets (
                           
                              SDR
                              =
                              0.45
                           
                        ) when 
                           
                              BER
                              =
                              2.4
                              ×
                              
                                 10
                                 
                                    −
                                    4
                                 
                              
                           
                        . Moreover, when BER is larger than 
                           
                              4
                              ×
                              
                                 10
                                 
                                    −
                                    4
                                 
                              
                              ,
                           
                         the average energy consumption of this scheme is too high to be accepted (NR > 50, as shown in Fig. 6(b)). In fact, this phenomenon is easy to understand, because as long as there is a transmission failure in a single hop, it will lead to the failure of the entire scheme. Compared with the NC scheme, the proposed method can still fully restore the original data when BER is 
                           
                              7.6
                              ×
                              
                                 10
                                 
                                    −
                                    4
                                 
                              
                              ,
                           
                         which is 26.7% higher than the NC scheme (only 
                           
                              6
                              ×
                              
                                 10
                                 
                                    −
                                    4
                                 
                              
                           
                        ), and it can simultaneously maintain a lower energy consumption (for example, when 
                           
                              BER
                              =
                              8.8
                              ×
                              
                                 10
                                 
                                    −
                                    4
                                 
                              
                              ,
                           
                        
                        
                           
                              NR
                              =
                              10
                              ,
                           
                         44.4% lower than the NC scheme).

Above, we fixed the number of nodes in a relay cluster n (
                           
                              n
                              =
                              3
                           
                        ) and the number of hops on a path H (
                           
                              H
                              =
                              3
                           
                        ). Next, we explored the impact of these two parameters on the performance of the proposed CS and NC scheme based on multipath routing. Fig. 7
                        (a) demonstrates the impacts of transmission hop on SRP. The simulation results show that, if we consider the situation of the first appearance of SRP < 1 in each hop, BER (
                           
                              ×
                              
                                 10
                                 
                                    −
                                    4
                                 
                              
                           
                        ) of NC scheme is 4.4, 6.4, 7.6 respectively, while the proposed scheme achieves 7.2, 8.0, 8.0 respectively, indicating that the proposed methods are more insensitive to the length of path hops than the NC scheme. The cause of this phenomenon is that the data recovery strategies adopted by the sink node are different. To recover the source data, our proposed scheme requires fewer packets than NC scheme. For the traditional multipath routing, the path length seems to have little effect on its performance, despite the fact that SRP degrades significantly with the increase of BER. Fig. 7(b) demonstrates the influence of n on the performance of proposed CS and NC scheme based on multipath routing. We observe that when n decreases from 3 to 2, SRP of both schemes drops sharply. This is due to the number of nodes within each cluster will determine the quantity of coding nodes and the output packets. In fact, choosing the number of nodes in each cluster is always a tradeoff, i.e. if the selected value is too great, despite the increased reliability, the burden of energy consumption and network redundancy will increase simultaneously in a proportional way.

For the proposed scheme, we simulated the effects of CThreshold
                         on the network SRP and NR. Because the destination node is located at the Hth
                         hop and can only receive packets from its upstream cluster, the up boundary of the received packets is the product of threshold value and the number of nodes in upstream cluster, i.e., 
                           
                              
                                 C
                                 
                                    T
                                    h
                                    r
                                    e
                                    s
                                    h
                                    o
                                    l
                                    d
                                 
                              
                              ×
                              
                                 n
                                 
                                    H
                                    −
                                    1
                                 
                              
                           
                        . According to the recovery methods proposed at Section 3.3, the destination node can restore the original signal when it receives more than Klog2
                        N/K observation data packets, so we simulate CThreshold
                         which varies from 
                           
                              K
                              
                                 log
                                 2
                              
                              
                                 N
                                 /
                                 K
                              
                              /
                              
                                 n
                                 
                                    H
                                    −
                                    1
                                 
                              
                           
                         to N under different network parameters. The simulation results show that (Fig. 8
                        (a)), before the threshold value reaches Klog2(N/K)/2 ≈ 16, SRP increases dramatically, but none can reach 1. When the threshold value is larger than Klog2(N/K), SRP in all cases is close to 1. Thus we can conclude that the network has a good decoding performance under this larger threshold value. Yet, a greater threshold value requires more node storage space, which will cause excessive energy consumption of nodes to send those packets. It can be observed in Fig. 8(b) that with the increase of threshold value, the NR values will decrease first and then increase, and at the NR bottom, the threshold value is around Klog2(N/K)/2. This stems from the fact that the threshold is the optimal value in the case of NR at the bottom. If the threshold value is less than this value, the network destination node may not successfully reconstruct the original generation of data, while if the threshold value is bigger than this value, more packets than the required packets will be sent to the destination node, which leads to unnecessary energy consumption of nodes in network.

According to the proposed reconstruction methods, the number of signal measurements will affect the quality of signal recovery from the above simulation, and the number of data packets received by the destination node (
                           
                              =
                              SDR
                              ×
                              N
                           
                        ) varies with the threshold value. We simulated the signal reconstruction quality by using 4 signals described in Section 5.1 as a generation of data, and we employed the signal-to-noise-ratio (SNR) to evaluate the reconstruction error. If 
                           x
                         is an original signal and 
                           
                              x
                              ^
                           
                         is the reconstructed signal, then 
                           
                              SNR
                              =
                              20
                              log
                              
                                 (
                                 x
                                 /
                                 ∥
                                 
                                    x
                                    ^
                                 
                                 −
                                 x
                                 ∥
                                 )
                              
                           
                        . In order to prevent the influence of restoration algorithms, we reconstructed these four signals through the typical OMP [24] algorithm, while the difference was that the synthetic signals were reconstructed over the DFT or DCT domains, and the real signals were over the DWT. First, we fixed the other parameters as 
                           
                              H
                              =
                              6
                              ,
                           
                        
                        
                           
                              
                                 p
                                 b
                              
                              =
                              8
                              ×
                              
                                 10
                                 
                                    −
                                    4
                                 
                              
                              ,
                           
                        
                        
                           
                              n
                              =
                              3
                              ,
                           
                         and let the threshold value vary from 10 to 40 at an interval of 2; thus, each signal consists of 16 groups of test values. As shown in Fig. 9
                        , in the fifth group where the threshold value is around 20 (
                           
                              SDR
                              =
                              0.437
                              ,
                           
                         the sink node has received 28 packets), SNR of the reconstruction has a sharp rise suddenly; however, before the threshold value reaches this point, the recovery quality is very poor (SNR < 15). This stems from the fact that the received packets are not sufficient to meet the reconstruction requirement. When the threshold value continues to increase, the sink node also receives more packets increasingly(SDR increases), yet the signal reconstruction SNR does not increase significantly. Therefore, when the sink node is able to reconstruct the original generation of data, it is not only a waste of resources, but also meaningless for the reconstruction original signal to still increase the threshold value. Fig. 10
                         shows the reconstruction result of two signals, and the network threshold values are 10, 14, 18, 22, respectively.

For comparison, the underlying network data aggregation structure used in our scheme should be confirmed first. In general, both our proposed scheme and the NC-based schemes aim at improving the efficiency of encoding and decoding process of packets transmitted in multipath routing. Thus, these schemes can also be adopted in other applications of multipath routing approach. Synopsis Diffusion is a reliable and robust aggregation scheme based on multipath routing. In Synopsis Diffusion scheme, the underlying topology for data dissemination is organized in concentric rings around the sink (as shown in Fig. 11
                        (A), a node is in ring Ri
                         if it is i hops away from the sink node). In our experiments, we also adopted our proposed scheme in the topology of concentric rings, and we selected Hybrid CDG scheme as the comparison object. Hybrid CDG scheme is a well-known data aggregation scheme which is based on the CS theory, and it is organized on the tree-type data aggregation architecture (as shown in Fig. 11(B)).

For the simulation settings of the network, we employed the free space model in the physical layer and TDMA protocol in the MAC layer. To measure the energy consumption of nodes’ signal transmission and reception, first order radio model was adopted. In this model, to transmit and receive a k-bit packet in a distance of d, node will respectively spend 
                           
                              
                                 E
                                 
                                    t
                                    x
                                 
                              
                              
                                 (
                                 k
                                 ,
                                 d
                                 )
                              
                              =
                              
                                 E
                                 
                                    e
                                    l
                                    e
                                    c
                                 
                              
                              
                              ×
                              
                              k
                              +
                              
                                 
                                    ɛ
                                 
                                 
                                    a
                                    m
                                    p
                                 
                              
                              
                              ×
                              
                              k
                              
                              ×
                              
                              
                                 d
                                 2
                              
                           
                         and 
                           
                              
                                 E
                                 
                                    r
                                    x
                                 
                              
                              
                                 (
                                 k
                                 ,
                                 d
                                 )
                              
                              =
                              
                                 E
                                 
                                    e
                                    l
                                    e
                                    c
                                 
                              
                              
                              ×
                              
                              k
                           
                         energy, where Eelec
                         is the energy consumption of starting the radio and Eeamp
                         corresponds to the amplifier circuit. In each epoch, both our scheme and Hybrid CDG scheme consist of two phases: query packets distribution phase and data aggregation phase. Ring and tree architecture are formed in the distribution phase of querying packets. We assume that each node generates 64 readings in each epoch, and each packet can load 64 bytes of data (each reading occupies 2 bytes). We mainly experiment on the influence of the communication losses, and to reduce the complexity, we adopt a simple loss model in which each packet is dropped with a fixed probability. When the loss of packets happens, as the coping approach does not be put forwarded in the tree-based researches, the retransmission method is used in the simulation process. We set the sink node at the center of the deployment area, and the rest detailed network parameters are shown in Table 4
                        .

Experimental results of transmissions in each epoch are presented in Fig. 13
                        
                        (a). Obviously, the original tree-type data gathering scheme incurs higher transmission cost than other schemes (except the original ring scheme). That is partly because all data packets are gathered through the underlying network architecture without aggregation, and with the increase of the packet loss rate, a large number of retransmission packets are generated. In contrast to the original tree-type data gathering scheme, with the increase of the packet loss rate, the number of data packets forwarded in ring-type data gathering scheme declines rapidly. The reason is that when the network condition is good, ring-based data gathering scheme, based on traditional multipath routing, will generate a large number of redundant packets. However, when the network environment becomes worse, since other link protection methods are not required to be used in addition to the multipath routing, nodes in the outer ring will inevitably lose packets.

For the two kinds of aggregation schemes, with the increase of loss rate, in Hybrid CDG scheme nodes’ transmission frequencies increase significantly (when loss rates are 0.1 and 0.8, the transmission frequencies are respectively 2840 and 12784, increased by 3.5 times). For our scheme, when the loss rate is less than 0.6, the amount of packet transmissions is stable around 3349, and if the loss rate continues to increase , it will cause the number of packets received by the sink node lower than the reconstruction required. Then, the network will enter the distribution phase of querying packets once again, thus the number of node transmission will be increased immediately. By comparing with Hybrid CDG, we can find that in the case of good network condition (loss rate is less than 0.3), the transmission frequency of Hybrid CDG is better (15.2% than ours), while as the network performance becomes worse(loss rate is larger than 0.3), ours outperform Hybrid CDG(i.e., it is 47.5% less than that of Hybrid CDG when loss rate= 0.8). Fig. 12(b) and Fig. 12(c) show the energy and time consumptions of our scheme and Hybrid CDG in an epoch, respectively. From Fig. 12(b) we can see that when the loss rate is smaller than 0.3, our scheme will consume more energy than Hybrid CDG scheme, and when the loss rate is greater than 0.3, our scheme will outperforms it (by 37.7% on average). This is because when the loss rate is relatively small, comparing to multi-path routing based ring structure, tree-based scheme will be a more efficient mechanism. Whereas by Fig. 12(c), we can find the time consumption of our protocol is less than the Hybrid scheme (by 70.6% on average), which is due to the triple time slots cost if one packet loss occurs in tree scheme. In fact, thanks to the broadcast nature of wireless channel, it makes our proposed scheme show a relatively better energy and delay performance in such network condition.

Although the sending and receiving processes of the antenna consume the main power energy of the sensor node, the encoding operation will inevitably cause additional energy consumption. Therefore, we first evaluate the encoding computational complexity of the proposed scheme. As the encoding operation of node works on the finite field, in order to eliminate the overhead of repetitive computation, we have accomplished the encoding operations through looking up two mapping tables, namely multiplication table and alpha table (this is so-called the look-up table method). We have conducted our experiments on sensor nodes equipped with Freescale MC13213 chip, which is a popular low-power System in Package (SiP) with 40 MHz low power HCS08 MCU, and the specific parameters of the sensor node are shown in the Table 5
                        . For the encoding domain size and the dimension of the adopted multiplication table, we have completed three groups of experiments for comparison. Each experiment will encode 32KB random data on the node, and each experiment will be repeated 100 times to obtain the average value. The experimental results are shown in Fig. 13.

The experimental results show that increasing the cardinality of the finite field or using a two-dimensional table can improve the encoding efficiency. Especially, the use of the two-dimensional lookup table will significantly reduce the overhead of the encoding time. However, the node using a two-dimensional table will consume a large amount of RAM space. In the three groups of experiments, these lookup tables occupy 512 bytes,32 bytes and 512 bytes, respectively. If a node maintains a two-dimensional table of GF(28), though it will bring a better performance, 128KB memory space will be required to store the two tables, which will be far more than the storage scope (4KB) of the node we selected.

@&#CONCLUSIONS@&#

To avoid the “all-or-nothing” drawback of the existing NC based multipath routing scheme, a joint NC and CS scheme is proposed in this paper. This proposed scheme is established based on the fact that data observed in WSNs often shows a degree of redundancy. In this scheme, an appropriate CS measurement method is proposed for the source node coding procedure, and its validity has also been proved. Mathematical analysis has been used to study the performance of the proposed scheme, along with several other typical reliable packet forwarding schemes. Both simulation and practical experiment results show that, under different evaluation metrics, the proposed method outperforms these existing methods. In the future, we plan to extend our proposed scheme to a kind of adaptive networking transmission method. In such scheme, the sink node can adaptively reconstruct the data without the prior knowledge of the data sparsity. Certainly, some mathematical foundations (such as the adaptive stopping rule of the data construction) should be studied first.

@&#ACKNOWLEDGMENTS@&#

This research was supported by the Innovation Program of Jiangsu (No. CX(14)2114 and CX(13)3054), the Pre-research Fund of General Reserve Department of PLA (No. 9140A05010113xxx), the National Natural Science Foundation of China (No. 61502249), Shenzhen Strategic Emerging Industry Development Special Fund (No. JCYJ20130331151710105), Postdoctoral Science Foundation of China (No. 2015M571633), Postdoctoral Science Foundation of Jiangsu (No. 1401016B) and the Graduates Innovative Projects of Jiangsu (No. KYZZ0124).


                     End-to-end/hop-by-hop single-path forwarding scheme based on FEC. In the end-to-end FEC scheme, by using the Vandermonde or Cauchy encoding coefficient matrix, the source node encodes a generation of source data consisting of N blocks into 
                        
                           N
                           
                           +
                           
                           k
                        
                      blocks; then, each block is packed into a packet and sent to the network. As long as the sink node arbitrarily receives N packets, it can successfully recover all the original N blocks. Specific to end-to-end FEC, the encoding and decoding processes are performed the source end and the destination end, respectively. The packets are forwarded independently from each other, thus the packets received by the sink node obey the Bernoulli distribution: 
                        
                           B
                           e
                           r
                           n
                           o
                           u
                           l
                           l
                           i
                           (
                           N
                           
                           +
                           
                           k
                           ,
                           
                              a
                              H
                           
                           )
                        
                     . Therefore,

                        
                           (A.1)
                           
                              
                                 
                                    
                                       
                                          SDR
                                          =
                                          
                                             (
                                             N
                                             
                                             +
                                             
                                             k
                                             )
                                          
                                          
                                             a
                                             H
                                          
                                          /
                                          N
                                       
                                    
                                 
                              
                           
                        
                     and

                        
                           (A.2)
                           
                              
                                 
                                    
                                       
                                          NR
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                0
                                             
                                             
                                                H
                                                −
                                                1
                                             
                                          
                                          
                                             
                                                s
                                                i
                                             
                                             
                                                (
                                                N
                                                
                                                +
                                                
                                                k
                                                )
                                             
                                             /
                                             
                                                (
                                                SDR
                                                
                                                ×
                                                
                                                N
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     Because the sink node can only successfully decode all original packets after receiving no less than N packets, so

                        
                           (A.3)
                           
                              
                                 
                                    
                                       
                                          SRP
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                N
                                             
                                             
                                                N
                                                +
                                                k
                                             
                                          
                                          
                                             
                                                C
                                                
                                                   N
                                                   +
                                                   k
                                                
                                                i
                                             
                                             
                                                a
                                                H
                                                i
                                             
                                             
                                                
                                                   (
                                                   1
                                                   −
                                                   
                                                      a
                                                      H
                                                   
                                                   )
                                                
                                                
                                                   N
                                                   +
                                                   k
                                                   −
                                                   i
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     In the end-to-end FEC scheme, the decoding process only occurs at the sink node, while in the hop-by-hop FEC scheme, each intermediate node that decodes the N original packets will try its best. If such decoding process is successful, the intermediate node re-encodes those N recovered packets into new 
                        
                           N
                           +
                           k
                        
                      packets as the source node does, and then it will forward these newly encoded packets to its next hop. This process will be repeated at the next hop of nodes until the packets are successfully sent to the sink node. Therefore, the probability of successfully transmitting N packets at one hop is

                        
                           (A.4)
                           
                              
                                 
                                    
                                       
                                          
                                             p
                                             ′
                                          
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                N
                                             
                                             
                                                N
                                                +
                                                k
                                             
                                          
                                          
                                             C
                                             
                                                N
                                                +
                                                k
                                             
                                             i
                                          
                                          
                                             p
                                             i
                                          
                                          
                                             
                                                (
                                                1
                                                −
                                                p
                                                )
                                             
                                             
                                                N
                                                +
                                                k
                                                −
                                                i
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     the probability of successfully decoding packets at the ith
                      intermediate node is

                        
                           (A.5)
                           
                              
                                 
                                    
                                       
                                          
                                             a
                                             i
                                             ′
                                          
                                          =
                                          
                                             
                                                (
                                                
                                                   p
                                                   ′
                                                
                                                )
                                             
                                             i
                                          
                                       
                                    
                                 
                              
                           
                        
                     and such node transmits

                        
                           (A.6)
                           
                              
                                 
                                    
                                       
                                          
                                             s
                                             i
                                             ′
                                          
                                          =
                                          
                                             a
                                             
                                                i
                                                −
                                                1
                                             
                                             ′
                                          
                                          
                                             (
                                             N
                                             +
                                             k
                                             )
                                          
                                       
                                    
                                 
                              
                           
                        
                     packets. Thus, it is easy to find that in this scheme,

                        
                           (A.7)
                           
                              
                                 
                                    
                                       
                                          SDR
                                          =
                                          
                                             a
                                             H
                                             ′
                                          
                                          =
                                          
                                             
                                                (
                                                
                                                   p
                                                   ′
                                                
                                                )
                                             
                                             H
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (A.8)
                           
                              
                                 
                                    
                                       
                                          SRP
                                          =
                                          
                                             
                                                (
                                                
                                                   a
                                                   H
                                                   ′
                                                
                                                )
                                             
                                             N
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                     
                        
                           (A.9)
                           
                              
                                 
                                    
                                       
                                          NR
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             H
                                          
                                          
                                             
                                                
                                                   
                                                      s
                                                      i
                                                   
                                                
                                                ′
                                             
                                             /
                                             
                                                (
                                                SDR
                                                ×
                                                N
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  


                     End-to-end/hop-by-hop single-path forwarding scheme based on ARQ. In schemes based on ARQ, after sending a data packet, the sender will wait for an acknowledgement message returned by the receiver. If the sender does not receive the acknowledgment message before timeout, it will retransmit the data packet, and the waiting procedure will be re-initiated. This process will repeat until the sender successfully receives such acknowledgement message, so both SDR and SRP of this scheme are 1. Now, we merely analyze NR of both two schemes. In the end-to-end ARQ scheme, the sender should transmit each packet until the sink node has received it. Therefore, for an arbitrary packet, the number of transmissions that sender makes (tree
                     ) obeys the geometric distribution with a success probability of pH
                     , thus tree
                      is equal to the expected value of such distribution, i.e.

                        
                           (A.10)
                           
                              
                                 
                                    
                                       
                                          t
                                          
                                             r
                                             
                                                e
                                                e
                                             
                                          
                                          =
                                          1
                                          /
                                          
                                             p
                                             H
                                          
                                       
                                    
                                 
                              
                           
                        
                     and

                        
                           (A.11)
                           
                              
                                 
                                    
                                       
                                          NR
                                          =
                                          t
                                          
                                             r
                                             
                                                e
                                                e
                                             
                                          
                                          
                                          ×
                                          
                                          N
                                          /
                                          
                                             (
                                             SDR
                                             
                                             ×
                                             
                                             N
                                             )
                                          
                                          =
                                          1
                                          /
                                          
                                             p
                                             H
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

For the hop-by-hop ARQ scheme, the retransmission process occurs between each hop. Therefore, in order to correctly transmit one packet, the number of transmissions on each hop (trhh
                      ) also obeys a geometric distribution, and the difference is that this distribution has a success probability of p. Hence, if the sender sends N packets in one generation, the NR of this scheme is

                        
                           (A.12)
                           
                              
                                 
                                    
                                       
                                          NR
                                          =
                                          
                                             ∑
                                             
                                                i
                                                =
                                                1
                                             
                                             H
                                          
                                          
                                             t
                                             
                                                r
                                                
                                                   h
                                                   h
                                                
                                             
                                             
                                             ×
                                             
                                             N
                                             /
                                             
                                                (
                                                SDR
                                                
                                                ×
                                                
                                                N
                                                )
                                             
                                          
                                          =
                                          H
                                          /
                                          p
                                       
                                    
                                 
                              
                           
                        
                     
                  


                     NC scheme. Similar to the above schemes, we still assume N blocks are generated at the source node in each transmission task. And the source node encodes such blocks into N new blocks by using the method depicted in Section 3.2. Each encoded data block will be packed into a packet with its encoding coefficients, and then propagated to the next hop. Thus, the length of package transmitted in NC scheme is

                        
                           (B.1)
                           
                              
                                 
                                    
                                       
                                          
                                             L
                                             ′
                                          
                                          =
                                          L
                                          +
                                          N
                                          ×
                                          
                                             log
                                             2
                                          
                                          
                                             (
                                             
                                                L
                                                
                                                   c
                                                   a
                                                   r
                                                   d
                                                   i
                                                   n
                                                   a
                                                   l
                                                   t
                                                   y
                                                
                                             
                                             )
                                          
                                       
                                    
                                 
                              
                           
                        
                     and Lcardinalty
                      is the cardinality of the selected domain of NC encoding coefficients. We denote the probability of successfully forwarding such package as p′, obviously

                        
                           (B.2)
                           
                              
                                 
                                    
                                       
                                          
                                             p
                                             ′
                                          
                                          =
                                          
                                             
                                                (
                                                1
                                                
                                                −
                                                
                                                
                                                   p
                                                   b
                                                
                                                )
                                             
                                             
                                                L
                                                ′
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

We use r
                     
                        i, k
                      to denote the probability of the node in cluster i (1 ≤ i ≤ H ) to receive k ( 0 ≤ k ≤ Cthreshold
                     ) packets from an arbitrary node j(
                        
                           1
                           
                           ≤
                           
                           j
                           
                           ≤
                           
                           
                              n
                              
                                 i
                                 
                                 −
                                 
                                 1
                              
                           
                        
                      ) located at the 
                        
                           (
                           i
                           
                           −
                           
                           1
                           )
                           th
                        
                      cluster, where Cthreshold
                      is the intermediate node coding and transmission threshold value. We then use r
                     
                        i, j, k
                      to denote the probability of any node in the 
                        
                           i
                           th
                        
                      cluster receiving k packets from the 
                        
                           j
                           th
                        
                      node in the 
                        
                           (
                           i
                           
                           −
                           
                           1
                           )
                           th
                        
                      cluster. The analysis of the three metrics of this scheme is shown as follows:

Step 1, calculate r
                     1, k
                     . r
                     1, k
                      refers to the probability of any node in the first cluster to receive exactly k packets. As the source node has sent N packets, r
                     1, k
                      follows the Bernoulli(N, p) distribution, which can be represented by the formula

                        
                           (B.3)
                           
                              
                                 
                                    
                                       
                                          
                                             r
                                             
                                                1
                                                ,
                                                k
                                             
                                          
                                          =
                                          
                                             C
                                             N
                                             k
                                          
                                          
                                          ×
                                          
                                          
                                             p
                                             k
                                          
                                          
                                          ×
                                          
                                          
                                             
                                                (
                                                1
                                                
                                                −
                                                
                                                p
                                                )
                                             
                                             
                                                (
                                                N
                                                
                                                −
                                                
                                                k
                                                )
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

Step 2, derive 
                        
                           r
                           
                              i
                              
                              +
                              
                              1
                              ,
                              k
                           
                        
                      from r
                     
                        i, k
                     . First of all, we need to obtain 
                        
                           r
                           
                              i
                              
                              +
                              
                              1
                              ,
                              j
                              ,
                              k
                           
                        
                      from r
                     
                        i, k
                     . Since m (the number of packets received by node j in cluster i ) must be greater than or equal to k, then the nodes in cluster 
                        
                           i
                           
                           +
                           
                           1
                        
                      can receive k packets from node j. Hence, under the condition of i ≥ 1, 1 ≤ j ≤ ni
                     , 1 ≤ k ≤ CThreshold
                     , 
                        
                           r
                           
                              i
                              
                              +
                              
                              1
                              ,
                              j
                              ,
                              k
                           
                        
                      is the total probability of successfully sending exactly k packets in each case of m ≥ k, thus

                        
                           (B.4)
                           
                              
                                 
                                    
                                       
                                          
                                             r
                                             
                                                i
                                                
                                                +
                                                
                                                1
                                                ,
                                                j
                                                ,
                                                k
                                             
                                          
                                          =
                                          
                                             ∑
                                             
                                                n
                                                =
                                                k
                                             
                                             
                                                C
                                                
                                                   T
                                                   h
                                                   r
                                                   e
                                                   s
                                                   h
                                                   o
                                                   l
                                                   d
                                                
                                             
                                          
                                          
                                             
                                                r
                                                
                                                   i
                                                   ,
                                                   n
                                                
                                             
                                             
                                                C
                                                n
                                                k
                                             
                                             
                                                p
                                                k
                                             
                                             
                                                
                                                   (
                                                   1
                                                   
                                                   −
                                                   
                                                   p
                                                   )
                                                
                                                
                                                   (
                                                   n
                                                   
                                                   −
                                                   
                                                   k
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     As each packet forwarded from cluster i will be received by the node in cluster 
                        
                           i
                           
                           +
                           
                           1
                        
                      with a same probability, each node in the 
                        
                           (
                           i
                           
                           +
                           
                           1
                           )
                        
                      cluster will has the same capability in receiving packets. After 
                        
                           r
                           
                              i
                              
                              +
                              
                              1
                              ,
                              j
                              ,
                              k
                           
                        
                      is determined, we can calculate the probability of receiving k packets from each node in the previous cluster. In fact, the probability of the node in cluster i receiving k packets from the previous cluster is 
                        
                           
                              r
                              
                                 i
                                 
                                 +
                                 
                                 1
                                 ,
                                 k
                              
                           
                           ,
                        
                      which is the permutation and combination of the probabilities of receiving k packets from the previous cluster (consisting of ni
                      nodes). Therefore, 
                        
                           r
                           
                              i
                              
                              +
                              
                              1
                              ,
                              k
                           
                        
                      can be expressed by the following formula

                        
                           (B.5)
                           
                              
                                 
                                    
                                       
                                          
                                             r
                                             
                                                i
                                                +
                                                1
                                                ,
                                                k
                                             
                                          
                                          =
                                          
                                             ∑
                                             
                                                
                                                   k
                                                   j
                                                
                                                =
                                                0
                                                ,
                                                .
                                                .
                                                .
                                                ,
                                                k
                                                
                                                s
                                                .
                                                t
                                                .
                                                
                                                
                                                   ∑
                                                   
                                                      j
                                                      =
                                                      1
                                                   
                                                   
                                                      n
                                                      i
                                                   
                                                
                                                
                                                   
                                                      k
                                                      j
                                                   
                                                   =
                                                   k
                                                
                                             
                                          
                                          
                                             
                                                ∏
                                                
                                                   j
                                                   =
                                                   1
                                                
                                                
                                                   n
                                                   i
                                                
                                             
                                             
                                                r
                                                
                                                   i
                                                   +
                                                   1
                                                   ,
                                                   j
                                                   ,
                                                   
                                                      k
                                                      j
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     where 
                        
                           1
                           ≤
                           i
                           ≤
                           H
                           −
                           1
                           ,
                        
                      0 ≤ k ≤ Cthreshold
                      · ni
                     .

Step 3, calculate the metrics (SRP, SDR and NR) of this scheme. By means of Steps 1 and 2, it is easy to iteratively calculate the probability of the sink nodes successfully receiving k (
                        
                           k
                           =
                           0
                           ,
                           1
                           ,
                           2
                           ,
                           .
                           .
                           .
                           ,
                           
                              n
                              
                                 H
                                 −
                                 1
                              
                           
                           
                           ×
                           
                           
                              C
                              
                                 T
                                 h
                                 r
                                 e
                                 s
                                 h
                                 o
                                 l
                                 d
                              
                           
                        
                     ) packets. Because in this scheme, only when the sink node located at the H hop receives more than N packets can it decode all the original data correctly, thus the SRP of this scheme is

                        
                           (B.6)
                           
                              
                                 
                                    
                                       
                                          SRP
                                          =
                                          
                                             ∑
                                             
                                                k
                                                =
                                                N
                                             
                                             
                                                
                                                   n
                                                   
                                                      i
                                                      −
                                                      1
                                                   
                                                
                                                
                                                ×
                                                
                                                
                                                   C
                                                   
                                                      t
                                                      h
                                                      r
                                                      e
                                                      s
                                                      h
                                                      o
                                                      l
                                                      d
                                                   
                                                
                                             
                                          
                                          
                                             r
                                             
                                                H
                                                ,
                                                k
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     and the number of successfully receiving packets is

                        
                           (B.7)
                           
                              
                                 
                                    
                                       
                                          SDR
                                          =
                                          
                                             ∑
                                             
                                                k
                                                =
                                                0
                                             
                                             
                                                N
                                                −
                                                1
                                             
                                          
                                          
                                             
                                                r
                                                
                                                   H
                                                   ,
                                                   k
                                                
                                             
                                             k
                                             /
                                             N
                                             +
                                             
                                                ∑
                                                
                                                   k
                                                   =
                                                   N
                                                
                                                
                                                   
                                                      n
                                                      
                                                         H
                                                         −
                                                         1
                                                      
                                                   
                                                   
                                                   ×
                                                   
                                                   N
                                                
                                             
                                             
                                                r
                                                
                                                   H
                                                   ,
                                                   k
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     In this scheme, if the nodes in each cluster receive k packets, and 
                        
                           k
                           ≤
                           
                              C
                              
                                 t
                                 h
                                 r
                                 e
                                 s
                                 h
                                 o
                                 l
                                 d
                              
                           
                           =
                           N
                           ,
                        
                      it will encode those received packets and forward k new packets. If it receives more than CThreshold
                      packets, it will only encode and forward CThreshold
                      packets, so we can get the number of packets sent in the network just by calculating at every node. Therefore, the NR of this scheme can be calculated by

                        
                           (B.8)
                           
                              
                                 
                                    
                                       
                                          NR
                                          =
                                          L
                                          
                                             (
                                             N
                                             +
                                             
                                                ∑
                                                
                                                   i
                                                   =
                                                   1
                                                
                                                
                                                   H
                                                   −
                                                   1
                                                
                                             
                                             
                                                (
                                                
                                                   n
                                                   i
                                                
                                                
                                                   (
                                                   
                                                      ∑
                                                      
                                                         k
                                                         =
                                                         1
                                                      
                                                      N
                                                   
                                                   
                                                      a
                                                      
                                                         i
                                                         ,
                                                         k
                                                      
                                                   
                                                   k
                                                   +
                                                   
                                                      ∑
                                                      
                                                         k
                                                         =
                                                         N
                                                         +
                                                         1
                                                      
                                                      
                                                         
                                                            n
                                                            
                                                               i
                                                               −
                                                               1
                                                            
                                                         
                                                         ·
                                                         N
                                                      
                                                   
                                                   
                                                      a
                                                      
                                                         i
                                                         ,
                                                         k
                                                      
                                                   
                                                   N
                                                   )
                                                
                                                )
                                             
                                             )
                                          
                                          /
                                          
                                             L
                                             ′
                                          
                                          
                                             (
                                             SDR
                                             
                                             ×
                                             
                                             N
                                             )
                                          
                                       
                                    
                                 
                              
                           
                        
                     Note that, here, we believe the encoding coefficients between various packets are linearly irrelevant. Because, the previous researchers have proposed this probability should be very high (i.e. when the size of the finite field is 256, the probability is 0.996).


                     Proposed scheme. The proposed scheme has a similar transmission model with the NC scheme, thus we can analyze our scheme based on the computation model proposed above. The difference is that our proposed scheme takes advantage of the case that the provided CS measurement matrix is equal to the encoding matrix used in NC scheme. Similar to above schemes, if a generation of data contains N data blocks, each block consists K non-zero elements when it is represented over a certain sparse basis. Due to the application of our proposed decoding method and existing CS recovery algorithm, it only needs

                        
                           (B.9)
                           
                              
                                 
                                    
                                       
                                          r
                                          =
                                          K
                                          
                                             log
                                             2
                                          
                                          
                                             (
                                             N
                                             /
                                             K
                                             )
                                          
                                       
                                    
                                 
                              
                           
                        
                     packets for the sink node to decode the original packets, rather than N packets required by using the Gaussian elimination in NC scheme. Therefore, the probability of successful decoding at the sink nodes is

                        
                           (B.10)
                           
                              
                                 
                                    
                                       
                                          SRP
                                          =
                                          1
                                          −
                                          
                                             ∑
                                             
                                                k
                                                =
                                                0
                                             
                                             r
                                          
                                          
                                             r
                                             
                                                H
                                                ,
                                                k
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     Based on the calculation in the NC scheme, after considering the CThreshold
                      (greater than 
                        
                           r
                           =
                           K
                           log
                           
                              (
                              N
                              /
                              K
                              )
                           
                           /
                           
                              n
                              
                                 H
                                 −
                                 1
                              
                           
                        
                      ),

                        
                           (B.11)
                           
                              
                                 
                                    
                                       
                                          SDR
                                          =
                                          
                                             ∑
                                             
                                                k
                                                =
                                                0
                                             
                                             r
                                          
                                          
                                             
                                                r
                                                
                                                   H
                                                   ,
                                                   k
                                                
                                             
                                             k
                                          
                                          
                                          +
                                          
                                          
                                             ∑
                                             
                                                k
                                                =
                                                N
                                             
                                             
                                                
                                                   n
                                                   
                                                      H
                                                      −
                                                      1
                                                   
                                                
                                                
                                                ×
                                                
                                                
                                                   C
                                                   
                                                      T
                                                      h
                                                      r
                                                      e
                                                      s
                                                      h
                                                      o
                                                      l
                                                      d
                                                   
                                                
                                             
                                          
                                          
                                             
                                                r
                                                
                                                   H
                                                   ,
                                                   k
                                                
                                             
                                             
                                             ×
                                             
                                             N
                                          
                                       
                                    
                                 
                              
                           
                        
                     and

                        
                           (B.12)
                           
                              
                                 
                                    
                                       
                                          NR
                                          =
                                          L
                                          
                                             (
                                             N
                                             +
                                             
                                                ∑
                                                
                                                   i
                                                   =
                                                   1
                                                
                                                
                                                   H
                                                   −
                                                   1
                                                
                                             
                                             
                                                (
                                                
                                                   n
                                                   i
                                                
                                                
                                                   (
                                                   
                                                      ∑
                                                      
                                                         k
                                                         =
                                                         1
                                                      
                                                      
                                                         C
                                                         
                                                            T
                                                            h
                                                            r
                                                            e
                                                            s
                                                            h
                                                            o
                                                            l
                                                            d
                                                         
                                                      
                                                   
                                                   
                                                      (
                                                      
                                                         r
                                                         
                                                            i
                                                            ,
                                                            k
                                                         
                                                      
                                                      k
                                                      +
                                                      
                                                         C
                                                         
                                                            T
                                                            h
                                                            r
                                                            e
                                                            s
                                                            h
                                                            o
                                                            l
                                                            d
                                                         
                                                      
                                                      
                                                         (
                                                         1
                                                         −
                                                         
                                                            ∑
                                                            
                                                               k
                                                               =
                                                               0
                                                            
                                                            
                                                               C
                                                               
                                                                  T
                                                                  h
                                                                  r
                                                                  e
                                                                  s
                                                                  h
                                                                  o
                                                                  l
                                                                  d
                                                               
                                                            
                                                         
                                                         
                                                            r
                                                            
                                                               i
                                                               ,
                                                               k
                                                            
                                                         
                                                         )
                                                      
                                                      )
                                                   
                                                   )
                                                
                                                )
                                             
                                             )
                                          
                                          /
                                          
                                             (
                                             
                                                L
                                                ′
                                             
                                             
                                             ×
                                             
                                             SDR
                                             
                                             ×
                                             
                                             N
                                             )
                                          
                                       
                                    
                                 
                              
                           
                        
                     
                  

@&#REFERENCES@&#

