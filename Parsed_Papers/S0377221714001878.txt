@&#MAIN-TITLE@&#Combining discrete-event simulation and system dynamics in a healthcare setting: A composite model for Chlamydia infection

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We developed a composite discrete event system dynamics simulation model.


                        
                        
                           
                           The simulation software Simul8 and VENSIM were joined in a novel way to form model.


                        
                        
                           
                           We model the transmission and treatment of Chlamydia and treatment of other STIs.


                        
                        
                           
                           Operational decisions at the clinic affect Chlamydia prevalence in the community.


                        
                        
                           
                           The model was developed in collaboration with St. Mary’s Hospital, Portsmouth, UK.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

OR in health services

Simulation

Chlamydia

Composite model

@&#ABSTRACT@&#


               
               
                  This paper presents a composite model in which two simulation approaches, discrete-event simulation (DES) and system dynamics (SD), are used together to address a major healthcare problem, the sexually transmitted infection Chlamydia. The paper continues an on-going discussion in the literature about the potential benefits of linking DES and SD. Previous researchers have argued that DES and SD are complementary approaches and many real-world problems would benefit from combining both methods. In this paper, a DES model of the hospital outpatient clinic which treats Chlamydia patients is combined with an SD model of the infection process in the community. These two models were developed in commercial software and linked in an automated fashion via an Excel interface. To our knowledge this is the first time such a composite model has been used in a healthcare setting. The model shows how the prevalence of Chlamydia at a community level affects (and is affected by) operational level decisions made in the hospital outpatient department. We discuss the additional benefits provided by the composite model over and above the benefits gained from the two individual models.
               
            

@&#INTRODUCTION@&#

The potential benefits of combining discrete-event simulation (DES) and system dynamics (SD) have been discussed in the simulation literature for over a decade (Brailsford, Churilov, & Liew, 2003), prompted by an increasing realisation that many real-life problems cannot be divided neatly into the two opposing categories of strategic or operational, but may exhibit features of both. In many organisations, strategic decisions can rapidly affect day-to-day operations – and vice versa – due to organisational complexity and the speed of modern communications. Moreover, it is often difficult to draw clearly-defined boundaries round any part of a large system and study the resulting subsystem in isolation. This is particularly, although not uniquely, true in healthcare organisations, where “everything affects everything else”. DES is a classical operational technique, designed for optimisation of system performance at a very detailed level and widely used since the 1950s. Although SD originated around the same time (Forrester, 1961) for many years it was not really part of the mainstream OR armoury. However, during the 1990s new OR techniques such as Strategic Options Development and Analysis (Eden, 1989) were developed and successfully used for strategic decision-making (Dyson & O’Brien, 1998). These approaches paved the way for system dynamics (SD) to become a more widely accepted part of the OR toolkit. SD is a more strategic tool, typically used at a much higher level, for understanding overall system behaviour.

Many researchers have considered the question of which approach should be used and when (Brailsford & Hilton, 2001; Brailsford et al., 2003; Morecroft & Robinson, 2006). More broadly, taxonomies have been developed to assess the advantages and disadvantages of various modelling approaches for specific problems in specific contexts, and provide guidance to modellers. Examples of such taxonomies in healthcare include Barton, Bryan, and Robinson (2004), Brennan, Chick, and Davies (2006); and Cooper, Brailsford, and Davies (2007). These taxonomies determine which methodology is best suited for a given problem, and work well if the problem fits neatly into their classification structures. Others have compared the differences in model-building approaches by users of DES and SD (Tako & Robinson, 2009).

DES is a stochastic modelling approach ideally suited to queuing network systems, where state changes occur at discrete points of time and individuals (entities) move stochastically through a system of queues and activities whose durations are sampled from probability distributions. It is a highly flexible approach in which almost anything can be coded; models can be incredibly detailed. Most DES software has a graphical interface which allows the user to see the system operating on the screen, almost like watching a movie. DES has the ability to capture detail complexity, the system behaviour that results from the possible combinations of many random processes, coupled with the system structure, leading to interconnection effects (Lorenz & Jost, 2006). The main limitations of DES are its inability to adequately capture the feedback dynamics associated with the holistic structure of a system, the very demanding data requirements to populate such models, and the need to perform multiple replications, leading to long runtimes.

The basic principle underlying system dynamics is that the structure of a system determines its behaviour over time (Forrester, 1961; Sterman, 2000). In other words, the way that the separate components of any system relate to and affect each other determines the emergent behaviour of the system as a whole. Such emergent behaviour can be counterintuitive, and it is only by analysis of the component subsystems that the reasons for this can be understood. Lorenz and Jost (2006) stated that SD models capture dynamic complexity, defined as the way variables can influence one another causing nonlinearities, delays and accumulative or draining relationships. SD has two distinct aspects, one qualitative and one quantitative. The qualitative aspect involves the construction of causal loop diagrams. Through discussions with problem owners and other stakeholders, the relationships between identified system elements are graphically depicted by a network of arcs and nodes, where the polarity of an arc indicates the direction of influence, positive or negative. The aim is to identify feedback loops, which can be of two kinds: balancing loops which retain a steady-state, or vicious circles leading to uncontrolled growth. The understanding and insights that this approach can bring are very useful. However the overall net effect of all the feedback loops in a complex system cannot be determined merely by inspecting the diagram. To do this it is necessary to quantify the variables, and this is not always straightforward if some variables (e.g. “happiness”) are qualitative. Quantitative SD modelling requires the use of stock-flow diagrams. These models are best conceptualised as a system of tanks connected by pipes, around which water flows. The rate of flow is governed by taps or valves on the pipes. The “water” which flows around such a system is a continuous, homogeneous quantity. Mathematically, stock-flow SD models are a discretisation of a set of ordinary differential equations representing the rates of change of the level of each stock; these are solved numerically using a discrete time-step. Clearly, SD models are deterministic, and do not capture individual variability.

The “holy grail” (Brailsford, Desai, & Viana, 2010), and the research objective of this paper, would be to develop a methodology which combined the benefits and virtues of both DES and SD, allowing a truly holistic systems view yet at the same time capturing the essential detailed individual variability within parts of that system. The challenge is far greater than simply using continuous and discrete variables in the same model. Hybrid simulation executives designed to handle both continuous and discrete parameters have been available for many years. Most DES software packages can handle continuous variables and can therefore be adapted (albeit with some difficulty) to provide the underlying structures of SD models. Similarly, modern SD packages allow the user to sample from probability distributions. The aptly named AnyLogic (www.xjtek.com/AnyLogic) is a Java-based package in which it is possible to develop both DES and SD (and also agent-based) models. However although all these tools do produce models which contain both continuous and discrete parameters, they do not truly capture the spirit of SD and DES as understood by most users of these approaches and are only part of the story. A truly integrated approach would be advantageous because at a macro level, it could describe the movement of individual entities as a homogeneous flow, which would be fast and data-efficient, whereas at a micro level, where there were detailed interactions that affected the overall behaviour of the system, it would be possible to incorporate individual characteristics. The real challenge is therefore, not to develop software to handle continuous and discrete variables, but to develop both a conceptual philosophy and a practical methodology for combining SD and DES in a real context.

Combining different models in a hybrid framework to represent different parts of a larger system is of course not new. Frameworks for combining models have been proposed in many disciplines, including chemical engineering (Ingram, Cameron, & Hangos, 2004); construction (Alvanchi, Lee, & AbouRizk, 2011) and healthcare (Chahal & Eldabi, 2008). In addition to these discipline-specific frameworks, more generic frameworks are proposed by Shanthikumar and Sargent (1983), Chahal and Eldabi (2010), Morgan, Howick, and Belton (2011); and Swinerd and McNaught (2012). In each case the purpose was to deliver cost effective and computationally efficient solutions, incorporating those parts of the whole system which were required to gain greater insight.


                     Chahal and Eldabi (2008) identify three modes in which DES and SD can be combined. The simplest is the “hierarchical” mode in which two distinct models simply pass data from one to the other. The second mode is the “process environment” where there are still two distinct models, but the DES model actually sits inside the SD model and models a small section of the system, which then interacts cyclically with the wider SD environment. This is the approach used in the model presented in this paper. Finally, in the genuine “integrated” mode, there is one single hybrid model with no clear distinction between the discrete and continuous parts.

It has been suggested that healthcare systems in particular would benefit from a combined DES–SD approach (Brailsford et al., 2003). Bar-Yam (2006) argued that multi-scale modelling approaches are required to improve the effectiveness of the US health care and public health systems. Chahal and Eldabi’s hybrid frameworks (2008, 2010) were devised with healthcare systems in mind. Morgan et al. (2011) modelled the radiotherapy delivery at a large Scottish hospital, utilising both DES and SD. The DES was used to understand and improve the operational capability of changing patient treatment regimes, and SD was used to understand the impact of wider system changes such as the impact of government targets and their interactions with R&D adoption. Ahmad, Ghani, Kamil, and Tahar (2012) used DES to model the detailed operations of an Emergency Department, and SD to model the wider hospital system. Brailsford et al. (2010) briefly presented two case studies representing the connections between the wider environment (depicted by an SD model) and a detailed subsystem (depicted by a DES model). One of these case studies was the Chlamydia model presented in much greater detail here.

This paper is structured as follows: Section 2 describes the problem context; Section 3 presents a DES model representing patient flows through the hospital clinic; Section 4 presents the SD Chlamydia transmission model primarily designed to investigate interventions; and Section 5 addresses the key research question of this paper, namely how and why the DES and SD models were combined. Finally, in Section 6 we reflect on the combined modelling approach and discuss the additional benefits provided by the composite model, over and above the benefits gained from the two individual models.


                     Chlamydia trachomatis is the most common bacterial sexually transmitted infection (STI) in the world. About 70% of women and 50% of men are asymptomatic, meaning that infected people have no symptoms and may be unaware that they have the infection and remain undetected. However, Chlamydia can be easily diagnosed and effectively treated using antibiotics. (NCSP, 2012) Although a proportion of infected patients will recover naturally if left untreated, Chlamydia can lead to a wide range of complications, (sequelae) including pelvic inflammatory disease (10–30% of women – Egger, Low, Smith, Lindblom, & Herrmann, 1998), ectopic pregnancy and tubal factor infertility in women and epididymitis (inflammation of the testes) in men (NCSP, 2012) and represents a substantial public health problem.

These complications are not only very distressing for the individual but also very expensive to treat. The annual cost of Chlamydia and its consequences in the United Kingdom in 2003 was estimated to be more than £100 million (DH, 2004). UK population based studies such as NATSAL suggested a prevalence of 2–6% in men and women under 25 (Fenton et al., 2001). In 1998 Chlamydia screening became part of the UK Government’s National Sexually Transmitted Infections strategy, and two pilot studies were undertaken, one in the south of England (Portsmouth) and one in the north (the Wirral, near Liverpool). The success of these pilot studies led to the establishment in 2003 of the National Chlamydia Screening Programme (NCSP) across the whole of England. Screening was targeted at people aged under 25, as these were at the greatest risk. This was in line with other national Chlamydia screening programmes such as in Sweden (Egger et al., 1998), which demonstrated decreasing rates of ectopic pregnancy following a period of intense screening. A contributory factor towards the recommendation of the NCSP was an SD model developed by Townshend and Turner (2000). The SD model emphasised the importance of the population prevalence, and incorporated risk groups and the possibility of re-infection following treatment. The model was used to evaluate the cost effectiveness of proposed screening strategies.

The NCSP website (NCSP, 2012) provides very detailed quarterly reports from all regions of England. The NCSP provides opportunistic screening, namely offering a Chlamydia test if young adults contact the National Health Service (NHS) for some other reason. For example, around 75% of young adults visit their General Practitioner (GP) every year, providing an ideal opportunity to offer an annual Chlamydia screen (NCSP, 2012). Hospital-based sexual and reproductive health services provide confidential sexual health services for large numbers of sexually active young adults. Pharmacists are already established providers of sexual health services (e.g. pregnancy tests, emergency contraception provision) and Chlamydia screening is an appropriate addition to these services. Community pharmacists are also well placed to provide treatment and partner notification, with long opening hours and high-street presence (NCSP, 2012). Fig. 1
                      shows Chlamydia diagnosis rates per 100,000 population in the UK, by age and gender. The rates reported for both males and females aged under 25 rise sharply in 2007, reflecting the high levels of testing and consequent diagnoses achieved by the roll-out of the NCSP in community-based settings.

Portsmouth is an island city situated on the coast of Southern England and has a population of just under 200,000. It was selected for the pilot study because it has a high proportion of young people at risk of Chlamydia infection: it is a major naval base and also contains a university. Portsmouth achieved very high levels of population coverage during the pilot study, and this was regarded as an important factor in the success of future screening interventions. There is a long history of research collaboration between the Department of Genito-Urinary Medicine (GUM) at St. Mary’s Hospital Portsmouth, and the University of Southampton, dating back to Gove’s doctoral study (1997). This was followed by Evenden, Harper, Brailsford, and Harindra (2005, 2006) who produced an SD model which evaluated targeted screening of high risk groups, rather than the blanket screening of the whole at-risk population. Targeting high-risk sub-populations was shown to achieve greater cost-effectiveness while still controlling the incidence of Chlamydia.

A number of practical problems arose across England following the implementation of the NCSP. A person who tests positive for Chlamydia is advised to seek treatment at their local hospital GUM outpatient department clinic. However, because so many more cases were being identified, this led to hugely increased demand on GUM clinics. If this demand could not be met, untreated people would remain in the community and could continue to infect other people. This would in turn then lead to more new cases, even greater demand, and the situation would spiral out of control.

The model(s) presented in this paper address this problem. Although the research was conducted in collaboration with St. Mary’s Hospital in Portsmouth and uses local data, the models themselves are generic. The “whole system” community-level model represents the population disease dynamics and is modelled using system dynamics. This is a classical application for SD. The GUM clinic model is a DES which enables alternative clinic configurations to be evaluated, hopefully resulting in more patients being treated, shorter patient waiting times and better utilisation of resources. This is a classical application of DES. However, neither of the models on its own tells the whole story, and it is the interactions between these two models which enable health planners to see the bigger picture and make optimal decisions for the whole system. The performance of the clinic has an impact on the population prevalence of Chlamydia (and other STIs). If the clinic is operating effectively, the population prevalence of Chlamydia should fall and hence fewer people would need to visit the clinic. However, if the clinic were unable to cope with the additional demand, then screening could actually be counterproductive if it produces a cohort of dissatisfied, symptom-free and infectious young people who tell all their friends “Why bother? – it is pointless going for treatment because you have to wait for so long”.

The DES model represents the GUM clinic at St. Mary’s Hospital, Portsmouth. Like most GUM clinics, it is a confidential walk-in clinic where patients do not need an appointment in advance or a referral letter from a GP. The clinic does not only treat Chlamydia, but also many other STIs, and therefore the model also included HIV, gonorrhoea, syphilis, genital warts, and genital herpes. The purpose of the model was to enable the hospital to evaluate alternative walk-in clinic designs to utilise existing resources more efficiently and treat more patients in a timely manner.

@&#IMPLEMENTATION@&#

The model was constructed in the software Simul8 (www.simul8.com). Prior to model construction, discussion regarding the patient pathways was undertaken with clinical collaborators. All patients who attend the walk-in clinics go through the pathway illustrated in Fig. 2
                        . At the time of the study, the walk in clinic was overstretched and it was not uncommon for patients to be turned away due to excessive waiting times.


                        Fig. 2 is split into three vertical swim lanes. The solid arrows represent patient routes through the clinic, and the dotted arrows represent the movement of inanimate items such as paperwork or medical samples. The reception tasks include issuing a form to the patient and subsequently entering the data onto the system. This is required before the patient can proceed to the medical side of the system (the third swim lane). The reception staff also make follow-up appointments (if required) when patients leave the clinic.

Patients themselves only perform four tasks on their own, namely entering the clinic, completing the form, returning the completed form to reception, and leaving the clinic. The medical processes in the system illustrated in the third swim lane are carried out by nurses and/or doctors, according to patient symptoms and other individual characteristics. During the management stage they may also, but only with the patient’s permission, initiate contact tracing (identification and contacting any of the patient’s sexual partners) if the patient is confirmed as infected and the patient does not wish to contact their partner(s) themself. The tasks depicted in Fig. 2 represent the processes that all patients can potentially go through, but clinical staff can vary the medical processes if necessary. For example, if the patient does not require a blood test s/he can go straight to the management stage. The clinic classifies three different patient types: new, old/new (people who have not been to the clinic for six months, or who are returning for another reason), and Follow-Up Patients (FUP) who are returning to be tested to check their treatment was successful or for treatment of specific conditions. All three types of patient proceed through the processes illustrated in Fig. 2, although the durations of each process may differ according to patient type. Moreover, the genders were separated for all the clinical activities, although not for reception.

Data were collected from the clinic for all of the processes illustrated in Fig. 2. Audit forms were designed and completed by the clinic staff over a one-week period, to ascertain process times. Distributions were fitted to the data using Stat Fit, a Simul8 plugin. Where the data did not fit well, a user-defined empirical distribution was created and included in the model. Data were segregated by gender, age groups and patient type if statistically significant differences were identified. Additional data obtained included arrival data from the clinic information system, which enabled arrival profiles to be created by hour of day and day of week; the probability of being infected with the STIs of interest, which was provided at an aggregate level by clinic staff; staff (medical and reception) schedules; and clinic opening times. Such data is not presented here in the interests of space and that the focus of this paper is on the composite model, although a full set of data is available from the authors on request.

The model assumes that patients arrive at the clinic individually and are assigned a waiting time tolerance which represents how long they are willing to wait in reception. Based on the expert opinion of clinic staff, this was sampled from a normal distribution with mean 240 minutes, std. dev. 60 minutes. Patients were also assigned a waiting time tolerance for the medical waiting area, sampled from a normal distribution (mean 60 minutes, std. dev. 10 minutes). The clinic staff felt that patients would re-evaluate their waiting strategy as they progressed further through the system. The model also assumes that clinical staff do not work through their breaks. Finally, it assumes that the clinic will operate after its official closing time for a certain time period: in the model, as in reality, staff are scheduled to work an hour after the clinic had closed.

The key performance indicators (KPIs) of the model were the number of patients who leave without being seen, the total patient throughput, and the patient waiting time. The number of patients who leave without being seen was identified as the main KPI, as these patients could not only develop sequelae associated with STIs but might also potentially infect other people if left untreated.

The model was run for 20 iterations of 31days (44,640minutes) and results were averaged over the 20 iterations. There was no warm up period because the clinic opened from empty each day. For initial face validation, the visual interactive nature of the model enabled patient pathways, waiting times, and the utilisation of the correct resources to be confirmed as accurate by clinic staff. The model was further validated through comparison of the model results with historical data, which were deemed to be sufficiently close by the clinic staff. In Table 1
                         the “base model” discussed below is based on actual staffing and arrival patterns at the time. Two of the KPIs, the number of patients seen and not seen, are compared with historically recorded data. In all cases, the observed value fell within the 95% confidence interval, and in all bar one case the mean simulation result was within 1.5% of the observed value. Only in one case was it greater (an absolute deviation of 3%).

The key decision variables were identified through discussion with the clinic staff, and were: the number of medical rooms for both genders (and the associated doctors); the number of dedicated blood and lab staff; and, the waiting area capacities. A fractional factorial experimental design was used to explore the interaction of these key variables. The values of the decision variables are shown in Table 2
                        . The fourth column in Table 2 indicates the experiments when the factor is set to the Low value. For example the number of female medical rooms (X1) is set to the Low value in experiments 2, 3, 4, 8, etc. For the remaining experiments factor X1 is set to the High value. The numbers relate to Full Time Equivalents (FTEs) or total numbers (No.) where stated. The “Low” and “High” values were selected as being at the extremes of what was plausible in reality. Based on these variables, 32 scenarios were evaluated, for various realistic combinations of the decision variables.

@&#RESULTS AND DISCUSSION@&#

The most important performance indicator, the number of patients who leave the clinic without being seen, is shown in Fig. 3
                         for all 32 scenarios. Patients leave without being seen for the following reasons. Firstly, they baulk in Reception, i.e. exceed the time their individual waiting time tolerance (the blue bars). This happens because they cannot be called through to the clinical area until their details have been entered into the computer system. Secondly, they exceed the time they are willing to wait in the medical area (the red
                           1
                           For interpretation of colour in Fig. 3, the reader is referred to the web version of this article.
                        
                        
                           1
                         bars, actually all zero in Fig. 3). Thirdly, due to the large numbers of patients currently in the clinic they may be advised by the reception staff to try again another day (the pink bars, labelled “Turned Away”).

If there are not enough staff in reception, then patients will leave unnecessarily and starve the costly clinical resources. This is clearly undesirable. It can be seen that in many scenarios, large numbers of patients leave without being seen. These are the experiments in which the number of reception staff is at the “Low” level.

Further experiments were conducted to explore in more detail the impact of the number of reception staff. The results are shown in Fig. 4
                        . In these experiments, the number of reception staff was incremented from 1 to 10 and all the remaining decision variables were fixed at the current clinic values. As the number of reception staff increases, the number of patients who leave without being seen falls. There is a steep decline up to about four reception staff, but after this the marginal benefit of adding one extra person is much lower. It can be seen that when the number of reception staff reaches seven, the number of clinical staff finally becomes a constraint in the system and a red “medical” bar appears. It can therefore be seen that the optimal number of reception staff is about four or five. Using six or more staff does not appear to be cost-effective unless the number of doctors and nurses is also increased.

The purpose of the SD model was to provide an understanding of the complex dynamics involved in the spread of Chlamydia, and to evaluate the impact of different interventions. This model builds on the previous modelling work by Townshend and Turner (2000) and Evenden et al. (2005, 2006).

@&#IMPLEMENTATION@&#

An initial causal loop diagram (CLD) used in the preliminary stages of SD model development was constructed in collaboration with healthcare professionals. Fig. 5
                         depicts a simplified CLD showing the key feedback loops in the system. There are two susceptible and infected loops, one representing full recovery and one representing recovery with sequelae.

From the qualitative CLD a quantitative stock-flow simulation diagram was constructed in the commercial SD software VENSIM (www.vensim.com). Fig. 6
                         shows a simplified view of the stock-flow diagram and highlights the key differences between this model and earlier models. Townshend and Turner (2000) captured behavioural change through an ageing process. Evenden, Harper, Brailsford, and Harindra (2006) captured behavioural change both through ageing and through the use of two risk groups, a lower risk group and a higher risk group. This reflected the fact that STIs can be maintained in a population by core groups of high-risk people with higher prevalence levels. As people age in these models, it is assumed that the number of new sexual partnerships decreases. A drawback of these early models is that people assigned to the high or low risk groups would remain in those groups for the entire time horizon of the model and there was no possibility to alter behaviour through interventions.

The model allows people to change from the high risk (the core group) to the lower risk group following treatment (or some other intervention). Fig. 6 illustrates the basic principle of the model. Additional important relationships are the “mixing ratio” between the high and low risk groups, the probabilities of sequelae, and all the associated costs. Due to the aggregate nature of SD the model assumed that the probability of a susceptible person becoming infected by an infective person was fixed for the whole population in each stock, and was not based on individual characteristics such as the number of sexual acts or the duration of a partnership. As in the cited models of Chlamydia, it was assumed that the number of new sexual partners decreases with age. Additionally the model contains variables relating to the effectiveness of partner contact tracing and the fraction of the treated population who adhere to treatment. A full set of model parameters can be obtained from the authors. The model was run for 24months. The model was validated against existing Chlamydia transmission SD models (Evenden, Harper, Brailsford, & Harindra, 2005; Evenden et al., 2006; Townshend & Turner, 2000). In addition extensive sensitivity analysis was undertaken to validate the model.

The main model outputs were the number of cases of sequelae, the numbers of infected and susceptible people, and of course the costs (treatment, screening and sequelae) all over time and broken down by gender and age group if necessary. The rationale for any screening programme is to devise interventions for which there is an overall net benefit for the population. This may be purely a health benefit, purely a financial benefit or a combination of the two through cost-effectiveness studies which use quality-adjusted life years, QALYs, to compare the cost per QALY of various interventions. This model considers only the financial aspect, and thus the key output was the total cost of any proposed interventions, i.e. the screening costs plus the treatment costs plus the sequelae costs. Blanket screening of the whole population would be extremely expensive and might only yield a small number of cases in the low-risk groups. On the other hand, screening only a small number of people could miss some cases of sequelae, which would also be expensive. The model allows the user to explore the trade-offs between these short-term and long-term costs, by targeting screening at certain subsets of the population.

@&#RESULTS AND DISCUSSION@&#


                        Fig. 7
                         shows the total cost burden of Chlamydia, for three particular scenarios which were selected following discussion with the GUM clinic staff. These were (a) screening only women under 25, combined with contact tracing; (b) screening all women, combined with contact tracing; and (c) screening every one aged under 25, combined with contact tracing. In these experiments, the screening rate (the proportion of the target population who are screened) increases from 0% to 100%. It can be seen that the best strategy is scenario (a), screening women under 25 with effective contact tracing.

The model, in line with Evenden et al. (2006), also illustrated that targeting the high risk group is cheaper than blanket screening, even when the high costs of sequelae are taken into account. Due to the uncertainty around certain model parameters extensive sensitivity analysis was undertaken and the model was found to be sensitive to the population prevalence of Chlamydia, which needs to be greater than 5% for screening to be beneficial, and the probability of developing sequelae and the costs of these sequelae need to be high enough to justify screening.

Clearly, in the real world, the GUM clinic is part of the “big picture” of the overall problem of Chlamydia in south-east Hampshire. The demand at the GUM clinic is affected by the prevalence of Chlamydia in the population, which is affected by the screening programme and other methods of case identification. Likewise, the prevalence of Chlamydia is affected by the capability of the GUM department to manage cases effectively and treat both asymptomatic and symptomatic patients. In order to provide this more holistic approach, to represent the above, the SD model of Chlamydia transmission and the DES model of the GUM department were combined into a composite model, represented graphically in Fig. 8
                        .

@&#IMPLEMENTATION@&#

Two versions of the SD model were produced. The version used for the composite model was slightly different from the model described in Section 4 in that it utilised what are termed “Game” variables in VENSIM. Game variables are designed so that users can interact directly with the model and observe the effects of making manual changes to parameters. In this composite model, the “Game” variable values are the outputs from the GUM DES model.

The SD model generates the monthly demand for the DES model, in terms of the number of people per month who are identified through screening, contact tracing or self-presentation. These numbers are exported from Vensim into Excel. This monthly demand is then converted within Excel into inter-arrival rates which vary by day of the week and hour of the day, based upon historical data analysis. These data are then imported from Excel into Simul8 and become the parameters for the arrival distributions at the clinic. The GUM DES model then runs for 20 iterations and the results (the average number of people treated) is exported from Simul8, via Excel, to the SD Chlamydia screening model. The SD model advances a time step and the process is repeated a predetermined number of times.

This model was implemented by linking the two simulation tools Simul8 and Vensim via a Microsoft Excel interface, utilising Visual Basic for Applications (VBA) to control both models. The interface facilitated the linking of the models, and the passing of parameters from one to the other, as both these packages are able to communicate with Excel. The actual process is depicted graphically in Fig. 9
                        .

To illustrate the consequences of embedding the DES model inside the SD model, two simple experiments were conducted, based on suggestions from the clinic staff. These experiments investigated the effects of different initial clinic configurations on the performance of the whole system, over the SD model time horizon of 24months. Table 3
                         provides the main parameters from the DES model which were changed to in the two experiments conducted with the composite model.


                        Table 3 contains three groups of parameters: those which relate to staff resources, those which relate to waiting area resources (chairs and standing space), and a binary variable which specifies whether medical resources are shared between genders or are segregated by gender as was the current practice at the time. The staff resources are expressed as the total number of “available person-days per week”. For example, a value of 5.0 would mean there is one member of staff in that category who works without any breaks for the entire week (the clinic is only open Monday to Friday). The Baseline scenario parameters are based on the configuration of the department at the time of this study. Normally, there were three reception staff on duty each day, which equates to a weekly total of 14.91 person-days; two female- specific medical staff who work each day, which equates to a weekly total of 10.50; and 1.5 male-specific medical staff who work each day, which equates to a weekly total of 7.73. Note that these numbers exceed 5days a week for each individual because the medical staff routinely work overtime. The Max scenario is based on the maximum number of reception, female medical and male medical staff which the clinic can currently physically accommodate, given the space available. This would be 10 members of each type of staff each day, which equates to weekly totals of 47.46 for each staff type, once breaks are taken into account (and assuming that now, the medical staff no longer need to work overtime). The waiting area capacity was not changed. In addition to the Baseline and the Max scenarios discussed above, a selection of results will also be compared with the standalone SD model.

The composite model was run for 24months with the initial DES parameters set to those shown in Table 3, and the SD parameters set to the default SD initial values. The standalone SD model was run for the same period, for comparison (using the baseline values). In the Baseline and the Max scenarios, the number of patients seen and treated by the GUM department is determined partly by the SD model which generates the demand for the clinic, but also the configuration of the clinic in the DES. In the standalone SD model the demand and supply is generated and satisfied by the relationships embedded in the SD model.

@&#RESULTS AND DISCUSSION@&#


                        Figs. 10–12
                        
                        
                         respectively show the total number of people who leave the clinic without being seen, the total prevalence of Chlamydia, and the total estimated costs. These clearly demonstrate the additional insight gained from the composite model. The numbers of patients who leave without being seen are depicted in Fig. 10. This graph shows that even if the clinic resources were increased by a factor of 5, a small number of patients would still leave the department without being seen. After approximately a year, the numbers stabilise in the Baseline scenario, because the number of people who actually show up at the clinic in the first place also stabilises. However this means that there are infected people out in the community who do not show up at the clinic because of its known poor performance. Fig. 11 demonstrates this effect: if the GUM clinic is insufficiently resourced this can lead to a situation in which even more people become infected.


                        Fig. 12 presents the total costs of treating Chlamydia and its sequelae. It can be seen that the standalone SD model (“SD only”) underestimates the total cost because it does not include the longer-term impact of untreated infections in the community caused by the impact of clinic performance.

@&#DISCUSSION@&#

In common with much published research in healthcare modelling, the results from the composite model have not yet been directly implemented by the clinic. Nevertheless, the clinic staff commented that the discussions which took place during the process of constructing both models were very useful. The composite model shows that operational decisions made at the clinic level have consequences at the population level, which in turn affect the GUM clinic and were not captured in the standalone SD model. A potential use of the composite model would be to demonstrate that if budgetary constraints were imposed which limited the service the GUM clinic could provide, configurations could still be devised to make effective use of the resources available. However this would have an effect on the prevalence of Chlamydia in the population which can now be estimated with the composite approach.

The composite model presented in Section 5 passes data automatically between the DES and the SD components. It is also possible to run the composite model in semi-automated (interactive) mode. In practice, the decision to change the configuration of the clinic (i.e., modify the DES model) would be a human/management decision. In order to allow decisions to be made interactively, the composite model can be paused between SD time steps to enable the users of the model to change the configuration of the clinic.

From a technical point of view, combining the models in this way enabled the feedback normally associated with SD to be incorporated (to a degree) within a DES model, while the SD model was enhanced by explicitly incorporating the detail associated with DES modelling (i.e. the mechanisms which drove clinic performance). This is not to suggest that it is completely impossible to model feedback using DES, or to incorporate detail into an SD model. However, effort is required to enable one approach to perform what the other methodology is better suited for. Of course there were many technical challenges in producing this composite model. It was necessary to enable the two commercial packages Simul8 and VENSIM to communicate with one another. Simul8 communicated with Excel via COM commands and Visual Logic (Simul8’s internal coding language); VENSIM communicated with Excel via VBA. Knowledge of all of these languages was required. Prior to joining the models, detailed specification was required of how the models would be linked, how often they would transfer information between each other, and what form that information would take. The composite model presented here is a “proof of concept” of the benefit of linking models through the use of two paradigm-specific software tools, rather than a definitive claim to be the only, or even the best, way to do this. It would also have been possible to build this model in a multi-paradigm package such as ANYLOGIC (www.xjtek.com/AnyLogic) or even, indeed, to program it from scratch. The composite model presented in this paper provides what we believe is the first fully automated combined SD–DES model in a healthcare context and the first fully automated combined Simul8 and VENSIM model.

Composite modelling (hybrid, integrated, multi-methodology, and multi-scale) where multiple simulation approaches are combined and applied to understand or improve a particular problem, is gaining momentum in many disciplines. As the number of case studies and frameworks for integrating models increase, the boundaries between simulation modelling paradigms are becoming blurred. For example, most SD packages now provide some (albeit limited) capability to handle stochasticity and sample from probability distributions. Agent-based simulation is rapidly gaining in popularity. Time will tell whether these different paradigms will evolve into a new unified technique, or whether the existing paradigms will survive and simply communicate with one another more efficiently.

Healthcare provides a fertile ground for the development of new modelling approaches. The problems that arise in healthcare are complex and require increasingly novel solutions. The composite model has been shown in this context to have advantages over the individual components. There are many further opportunities to explore the use of combining SD and DES and also to explore the combination of other approaches, such as agent-based simulation (Viana, Rossiter, Channon, Brailsford, & Lotery, 2012). It is hoped that combining modelling approaches will expand the number of healthcare problems that can be successfully tackled, and will also be relevant for problems in many other fields.

@&#ACKNOWLEDGEMENTS@&#

The authors are grateful to the busy staff at the Department of Genito-Urinary Medicine, St. Mary’s Hospital, Portsmouth, UK for their time in assisting with data collection and model validation. This research was funded through a Doctoral Training Grant (DTG) the EPSRC (ref: EP/P501792/1). Finally we are grateful for the Berkshire NHS research committee for granting ethical approval to conduct this research (ref: 08/H0505/71).

@&#REFERENCES@&#

