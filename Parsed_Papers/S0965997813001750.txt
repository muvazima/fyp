@&#MAIN-TITLE@&#Hybrid modelling of the contact gap conductance heat transfer in welding process

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Using artificial neural network (ANN) to find the thermal boundary condition in welding model.


                        
                        
                           
                           Correlated on the ANN model components with quality of prediction on the thermal boundary.


                        
                        
                           
                           A second stage modeling method was proposed for improving the results.


                        
                        
                           
                           The accuracy of the prediction was validated and found to be relevant largely to the ANN topology.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Artificial neural network

Heat transfer

Welding process

Contact gap conductance

Finite element method

Topology

@&#ABSTRACT@&#


               
               
                  One of the difficulties encountered in thermal modelling of welding processes is the determination of the input parameters and in particular the thermal boundary conditions. This paper describes a novel method of determining these values using an artificial neural network to solve the Inverse Heat Conduction Problem using the thermal history as input data. The method has been successfully applied to models that represent the heat transfer to the backing bar with a contact gap conductance heat transfer. Both constant and temperature dependent values of the contact gap conductance heat transfer coefficient have been used. The ANN was able to find the contact gap conductance heat transfer successfully in both cases, however the error was significantly lower for the constant value. The key to successful implementation is the ANN topology (e.g. generalized feedforward), and the development of effective methods of abstracting the thermal data.
               
            

@&#INTRODUCTION@&#

Determining the input parameters and in particular the thermal boundary conditions in a numerical model of a welding process is often difficult. The boundary condition is not only difficult to measure experimentally, but is dependent on the type and temperature of the backing bar as well as the clamping used. If we consider thermal models of Friction Stir Welding (FSW) as an example, three different approaches have been used to describe the heat loss to the backing bar. The first method assumes that there is no heat loss at the bottom of the workpiece [1], giving an adiabatic boundary condition. This gives a significant over-estimation of the temperature. Alternatively, the heat loss can be represented by a convective heat transfer coefficient by excluding the backing bar in the model. Khandkar et al. [2] showed that this method was able to predict the peak temperature, however getting a good match with the cooling region was difficult. A more comprehensive method involves including the backing bar in the model and using a contact gap conductance heat transfer coefficient k (Wm−2
                     K−1), to represent the imperfect contact with the workpiece [1–3]. In this case, the contact gap conductance heat transfer k is implemented in the model with the flowing equation:
                        
                           (1)
                           
                              Q
                              =
                              k
                              (
                              
                                 
                                    T
                                 
                                 
                                    W
                                 
                              
                              -
                              
                                 
                                    T
                                 
                                 
                                    B
                                 
                              
                              )
                           
                        
                     where Q is the heat flux from workpiece to the backing bar, TW
                      is the temperature at the workpiece and TB
                      is the temperature at the backing bar. This method has been claimed [2] to give a better prediction of the temperature profile than the convective heat transfer coefficient method. An even better prediction can be obtained with a variable contact gap conductance heat transfer coefficient. Variable values have been used by Simar et al. [1] who used a value which varied with the normal pressure. Colegrove et al. [3] applied a higher constant contact gap conductance heat transfer coefficient to the welded area under the tool and Shi et al. [4] used a temperature dependent contact gap conductance heat transfer coefficient. Recent work by Wang et al. [5] showed that a temperature dependent value based on an exponential function provided a good fit with experimental data for FSW. These methods were used because in FSW there is better contact under the tool due to the high temperatures and pressures – hence the reason for increasing the contact gap conductance with temperature. Regardless of the method used, there is the issue of obtaining representative values of the boundary condition, which is usually done by trial and error. The problem can be classified as an Inverse Heat Conduction Problem (IHCP) [6], which involves calculating the boundary conditions from measured outputs such as the temperature history.

One way of finding the boundary conditions in a more efficient manner is with an artificial neural network (ANN). An ANN is a numerical modelling technique that simulates the structure and functions of biological neural network [7]. It consists of an interconnected group of artificial neurons and processes information using a connectionist approach to computation. In most cases it is an adaptive system that changes its structure based on external information that flows through the network during the learning stage, which is used to investigate complex relationships between inputs and outputs or to find patterns in data.

ANN models can be linked with process models to find unknown boundary coefficients. In an analysis of the heat transfer that occurs between solid particles and a fluid, Sablani [8] and Sreekanth et al. [6] have demonstrated how an ANN can be used to solve an IHCP. Three steps were used to find the solution [8]:
                        
                           •
                           Use an analytic or numerical thermal model to generate a series of temperature–time histories from a series of training input parameters.

Train the ANN using the outputs from the thermal model as inputs. Likewise the inputs to the thermal model are used as the outputs to the ANN.

Once the ANN has been trained, a series of test input thermal profiles can be used to determine whether the ANN is able to accurately predict the outputs, i.e. the boundary conditions.

This method has been highly effective in determining the fluid to particle heat transfer coefficient. One important step in the analysis is to find a way of inputting the thermal history. The authors did this by identifying the slope and intercept of the thermal profile. Another important outcome of this work is the importance of the ANN topology to the success of the ANN model. Three important topologies are:
                        
                           •
                           The multilayer perceptrons network (MLP) [9]. This is a layered feed-forward network typically trained with static back-propagation. It can be used for most problems, but it requires a large amount of data for training.

The generalized feed-forward network [9]. This is a variant of the MLP network which allows information to jump over one or more layers. It can solve problems more efficiently than an MLP network with less training data, however it needs more time for training.

The modular feed-forward network [10]. This has the most sophisticated structure, and the information is processed through several parallel MLPs, which are then recombined. This network requires the least training data.

The back propagation algorithm is the most common way of adjusting the weights in the neural network. There are however two gradient decent methods which are used to adjust the local weights. These are the momentum method and the Levenberg–Marquardt (LM) algorithm, which has the advantage of being higher order.

Some authors have applied similar concepts to welding processes. Weiss et al. [11] developed a similar hybrid modelling approach and applied it to hybrid laser welding. The model automates the determination of the fitting parameters for the thermal model using an ANN. However, rather than using thermal profiles as inputs, the author used the dimensions of the fusion zone. Alternatively, genetic algorithms can be used to find the adjustable parameters in models of FSW [12] and arc welding [13].

The aim of this work is to find the input parameters and in particular the heat loss to the backing bar for a simple welding process using a hybrid finite element (FE)/ANN model.

@&#METHOD@&#

A simple FE thermal model is developed in COMSOL multiphysics, and the geometry is shown in Fig. 1
                        . This model only calculated the heat flow during the welding process to simply the case for analysis. The model is steady state and only half the geometry is modelled because of the symmetry along the welding axis. Gaussian power distributions have been used by many researchers [14–18] to represent the heat input from a welding arc. It can also be used to represent the power input from a laser process [19]. The Gaussian heat flux q applied to a semi-circle, as shown in Fig. 1, is given by:
                           
                              (2)
                              
                                 q
                                 (
                                 r
                                 )
                                 =
                                 
                                    
                                       Q
                                    
                                    
                                       weld
                                    
                                 
                                 ·
                                 
                                    
                                       exp
                                       
                                          
                                             
                                                
                                                   
                                                      -
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            r
                                                         
                                                         
                                                            s
                                                         
                                                         
                                                            2
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             
                                                1
                                                -
                                                exp
                                                
                                                   
                                                      
                                                         
                                                            
                                                               -
                                                               
                                                                  
                                                                     r
                                                                  
                                                                  
                                                                     h
                                                                  
                                                                  
                                                                     2
                                                                  
                                                               
                                                            
                                                            
                                                               
                                                                  
                                                                     r
                                                                  
                                                                  
                                                                     s
                                                                  
                                                                  
                                                                     2
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       ·
                                       π
                                       ·
                                       
                                          
                                             r
                                          
                                          
                                             s
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                              
                           
                        where Qweld
                         is the total power input to the weld; rh
                         is radius of a semi-circle. In this study rh
                         is set to 15mm; r is distance from the centre of the spot; rs
                         is a constant which describes the distribution of the power. All the models in this study use a value of 5mm.

The welding speed is set to 400mm/min and is fixed for all the trials in this study. Note the welding speed is not included in the ANN model because it is a known parameter in any welding experiment. The properties of the workpiece and backing bar are shown in Table 1
                        . Please note that in this simple model constant values are used and latent heat effects are ignored. A convective heat transfer coefficient of 10Wm−2
                        K−1 by Shi et al. [4] was used on the top surface of the workpiece and a value of 1000Wm−2K−1 from Colegrove et al. [23] was used on the underside of the backing bar. The adjustable parameters in the model are the total power input, Qweld
                         and the contact gap conductance heat transfer coefficient, k. The contact gap conductance heat transfer coefficient describes the imperfect heat transfer between the workpiece and the backing bar due to asperity contact. Two different models are used in this work. One model uses a constant value of k and the other uses a temperature dependent value [4]. Although Shi et al. [4] does not provide a function for k, the values approximate an exponential of the form:
                           
                              (3)
                              
                                 k
                                 =
                                 a
                                 ·
                                 exp
                                 (
                                 b
                                 ·
                                 T
                                 )
                              
                           
                        where T is the temperature in unit of K, a and b are constants whose values are approximately 22.16Wm−2
                        K−1 and 0.0107K−1 respectively for the data in this paper.

The ANN methodology is the same as for the Inverse Heat Conduction Problem described in Sablani [8] previously. Two stages of applying an ANN model are described in Fig. 2
                        (a). The input parameters to the ANN are the thermal profiles from the thermal model which are obtained at distances of 10, 15 and 20mm from the weld centreline, mid-thickness. The outputs are the weld power input and the contact gap conductance heat transfer coefficient.

In Table 2
                        , it shows the five power inputs and six contact gap conductance heat transfer coefficient values used for training the single contact gap conductance heat transfer coefficient model, giving 30 combinations. These values were chosen around typical gap conductance values of 1000 to 10,000, from literature [2]. It also gives the three power inputs and four values of both a and b for the temperature dependent contact gap conductance heat transfer coefficient model giving 48 combinations. The values of a and b are chosen so that the contact gap conductance heat transfer coefficient range is around the values used by Shi et al. [4]. Note that many of these combinations lead to unrealistically high temperatures. The focus of this work is on the method and not the numerical values of temperature.

Testing the ANN models is done with the parameter combinations in Table 3
                        . To prove the feasibility of the ANN model, the testing data is generated by the FE model and is not experimental data. Therefore the thermal profiles from the testing values are first input to the FE model and the corresponding thermal profiles are generated. These are then input into the trained ANN model which finds predicted values of the input parameters (e.g. Qweld
                        , a and b). These values are then compared against the correct values and the mean relative error (MRE) is calculated by:
                           
                              (4)
                              
                                 MRE
                                 =
                                 
                                    
                                       1
                                    
                                    
                                       N
                                    
                                 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          N
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             Y
                                          
                                          
                                             i
                                          
                                       
                                       -
                                       
                                          
                                             D
                                          
                                          
                                             i
                                          
                                       
                                    
                                    
                                       
                                          
                                             D
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                              
                           
                        where Yi
                         is the neural network output and Di
                         is the desired value. This is calculated for each test condition as well as the test conditions as a whole for a particular neural network topology.

The commercial software package NeuroSolutions was used to implement the ANN. Three neural network types were used for the analysis: MLP, generalised feed-forward and modular feed-forward. Two back-propagation methods were tested: the momentum method and the LM algorithm. Three hidden layers were used and the number of nodes depended on the model type. Note that there is no procedure for determining the number of neurons and hidden layers which had to be determined by experiment [24].

Although it is theoretically possible to input a series of temperature values from the thermal profile directly into the ANN, it is very inefficient because of the large amount of data. Therefore a series of methods for abstracting the thermal profile were developed. The first one uses four point temperatures at times of 40, 55, 70 and 85s and is shown in Fig. 2(b). The second one called ‘9 inputs’ is also shown in Fig. 2(b) and uses the peak temperature, cooling slope and integral of temperature against time at distances of 10, 15 and 20mm from the weld centreline. Note the total time corresponds to the plate length divided by the travel speed. The ‘6 input’ method is a variant on the ‘9 input’ method and excludes the cooling slope. The ‘4 input’ method is the same as the 6 input method except the thermal data from point 15mm from the centreline is removed. Finally the ‘2 input’ method only includes the peak temperature and integral of temperature from the point 10mm from the centreline. The different models are summarised in Table 4
                         for the single contact gap conductance heat transfer coefficient model and Table 5
                         for the temperature dependent contact gap conductance heat transfer coefficient model.

To improve the results from the ANN model that used a temperature dependent contact gap conductance heat transfer coefficient, a second stage was applied to the ANN model. This involved taking the predicted values from the first stage and using the FE model to produce seven additional training values around the predicted value as shown in Fig. 2(c). The model was then retrained with the original 48 values plus the 7 additional ones to find an improved prediction of the input parameters.

@&#RESULTS AND DISCUSSION@&#

In Table 6
                     , it shows the predicted input parameters and corresponding MRE for one of the ANN models that was applied to the single contact gap conductance heat transfer coefficient model. This particular ANN predicts all the test values well as indicated by the small MRE values. The average MRE for this particular model is found by averaging the MRE’s for each test condition.

To better understand how the discrepancies in predicted Qweld
                      and k affect the temperature profile, the predicted values are inserted into the FE model and the new thermal profiles compared with the original ones. This is shown for the best (Fig. 3
                     (a)) and worst cases (Fig. 3(b)). A good match is obtained in both cases indicating that an ANN can be used to predict the boundary conditions for a simple FE model with constant gap conductance.

The average MRE’s for all the single contact gap conductance heat transfer coefficient models are shown in Fig. 4
                     (a). Comparing the different abstracting methods, the least effective is the four point temperature method and therefore only two ANN model types were tested. Of the remaining methods, the 9, 6 and 4 inputs give very good predictions of the power and gap conductance. Therefore the additional data provided by the 9 input methods does not lead to any improvement in the overall prediction quality, compared with the four input method. However, reducing the inputs to two provided insufficient information leading to a high MRE. The comparison between the different ANN model topologies was also interesting. The model that used the momentum method for back-propagation had very large values of MRE compared with the higher order LM method. Being higher order the LM method is able to handle plateaus in the responses (such as that which occurs with high values of contact gap conductance heat transfer coefficient) better than the momentum method. The three remaining methods which all used the LM algorithm for back-propagation gave similar values for the MRE and there did not seem to be any particular advantage with any of the models when using 4 inputs. The generalised feed-forward method had a slightly greater error when 9 inputs were used.

The results with the temperature dependent backing bar condition are shown in Fig. 4(b) and indicate a greater error with this more complex model. The results for the four input model indicate that all the ANN topologies are able to predict the result equally well with an average MRE of a little over 15%. Hence the greater sophistication of the feed-forward topologies does not lead to an improvement in prediction quality. As the amount of input data to the ANN model increases the prediction quality with the MLP method actually decreases suggesting that with this topology the model is possibly over-trained. The opposite occurs for the two feed-forward topologies where the MRE is halved with 9 inputs. This suggests that the additional information is beneficial when predicting the boundary conditions for this more complex model. Finally, there was no advantage with the modular feed-forward network with greater nodes (9-6-6) for the 9 input models.

Once again a visual comparison is obtained between the thermal profiles from the original and predicted values which are shown in Fig. 5
                     . While the curve for the best match with an MRE of 2.39% (Fig. 5(a)) is very good the one with the worst match and an MRE of 12.3% (Fig. 5(b)) was poor. This prediction could however be improved by implementing the second stage ANN as described in Section 2.2, which reduced the average MRE from 7.62% to 0.62%. The new temperature prediction for the worst case condition (Fig. 5(b)) is shown in Fig. 5(c) and shows a significant improvement.

The uniqueness of the solution is one of the concerns when applying the ANN method to study this problem i.e. is the solution provided unique, or is it possible to have more than one set of power and contact gap conductance inputs that give a particular thermal profile. This issue has been discussed in greater detail in Wang et al. [5] where the technique was applied to FSW. This work demonstrated that a high power input and high contact gap conductance may give a similar result to a low power input and contact gap conductance. This is perhaps one of the weaknesses of the methodology, however it should be stated that the conventional trial and error approach also has this problem. The only way to properly resolve the issue is to experimentally determine the power input from the welding process.

@&#CONCLUSION@&#

This study has demonstrated how an ANN model can be used to determine the input parameters to an FE model from the temperature history. This required the development of methods to abstract the thermal profile so that it can be input to the ANN. The results showed that:
                        
                           •
                           A model which used a single contact gap conductance heat transfer coefficient required 4 thermal data input values to accurately predict the input parameters. The input required was the peak temperature and the integral of temperature vs. time at two locations.

The model that used temperature dependent contact gap conductance heat transfer coefficient required significantly more data (9 inputs) to predict the input parameters for this more complex model. In addition, the accuracy of the prediction was poorer.

This prediction could be significantly improved by implementing a second stage ANN where additional training data was obtained around the initial estimate of the input parameters.

The accuracy of the prediction depended on the topology of the ANN. The higher order LM back propagation method gave better predictions than the momentum method. In addition, there was an advantage of using the feed-forward topologies (modular and generalised) for the temperature dependent contact gap conductance heat transfer coefficient.

@&#ACKNOWLEDGEMENTS@&#

The authors would like to acknowledge the support from the Virtual Institute for Improving Performance and Productivity of Integral Structures through Fundamental Understanding of Metallurgical Reactions in Metallic Joints (VI-IPSUS). The VI-IPSUS is an initiative of the Helmholtz Association coordinated by the Helmholtz-Zentrum Geesthacht (HZG formerly GKSS).

@&#REFERENCES@&#

