@&#MAIN-TITLE@&#Development and application of consumer credit scoring models using profit-based classification measures

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We develop a profit-based classification performance measure for credit scoring.


                        
                        
                           
                           This performance measure enables selection of the most profitable credit scoring model, and provides the optimal cutoff point.


                        
                        
                           
                           Results indicate that this approach outperforms traditional approaches in terms of accuracy and monetary value.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Data analytics

Credit scoring

Classification

Performance measurement

Cutoff point

@&#ABSTRACT@&#


               
               
                  This paper presents a new approach for consumer credit scoring, by tailoring a profit-based classification performance measure to credit risk modeling. This performance measure takes into account the expected profits and losses of credit granting and thereby better aligns the model developers’ objectives with those of the lending company. It is based on the Expected Maximum Profit (EMP) measure and is used to find a trade-off between the expected losses – driven by the exposure of the loan and the loss given default – and the operational income given by the loan. Additionally, one of the major advantages of using the proposed measure is that it permits to calculate the optimal cutoff value, which is necessary for model implementation. To test the proposed approach, we use a dataset of loans granted by a government institution, and benchmarked the accuracy and monetary gain of using EMP, accuracy, and the area under the ROC curve as measures for selecting model parameters, and for determining the respective cutoff values. The results show that our proposed profit-based classification measure outperforms the alternative approaches in terms of both accuracy and monetary value in the test set, and that it facilitates model deployment.
               
            

@&#INTRODUCTION@&#

Credit scoring is a very important application in statistical modeling, and concerns distinguishing good from bad loan applicants (Thomas, Crook, & Edelman, 2002). The main goal is to estimate the probability of default, i.e. the event of a customer not paying back a loan in a given period. For this task, a predictive model is developed which assigns a score to each loan applicant. Such a model is then put to practice, by defining a cutoff value. Each applicant with a score lower than this cutoff will be rejected, others will be granted a loan.

During the past decades, a myriad of classification techniques has been used for credit scoring (Baesens et al., 2003). Hence, performance measurement is essential for model selection, i.e. to identify the most suited classification technique as well as to tune the respective parameters (Ali & Smith, 2006). It has been shown that traditional performance measures such as the Gini coefficient, the KS statistic, and the AUC measure are inappropriate in many cases and may lead to incorrect conclusions (Hand, 2005, 2009), since they do not always properly take into account the business reality of credit scoring. Thus a guideline to select the most appropriate classification model as well as to calculate an adequate cutoff value is still missing if it comes to apply credit scoring in a profit-oriented setting, which has already been advocated by e.g. Thomas (2009) and Finlay (2010).

The main contribution of this paper is to establish an approach which tackles both requirements simultaneously. That is, we propose a profit-based classification performance measure, inspired by the EMP measure (Verbraken, Verbeke, & Baesens, 2013), that takes into account the business reality of credit scoring and allows to calculate the optimal cutoff value from a profitability perspective. In Section 2 of this paper we discuss the problem of classification and the respective performance measurement. Section 3 shows in detail how a profit-based performance measure can be implemented in a credit scoring context. Section 4 reports the experimental setup and the obtained results. Conclusions and future work are presented in Section 5.

Classification is an important task in predictive modeling. A variety of performance measures has been proposed to assess classification models. Section 2.1 outlines the use of such models in a business context. Section 2.2 discusses statistically motivated classification performance measures.

We focus on binary classification and follow the convention that cases, i.e. the instances of interest such as e.g. the defaulters in credit scoring, belong to class 0, whereas the non-cases correspond to class 1. Note that in the literature several conventions have been adopted, such as class 1 for default cases (the opposite of this paper). In credit scoring, some authors assign the labels g (good) and b (bad) to non-defaulters and defaulters, respectively. The convention we opted for, however, offers the advantages that it simplifies notation and has also been adopted by Hand (2009), among others, which is relevant for this paper. The prior probabilities of class 0 and 1 are 
                           
                              
                                 
                                    π
                                 
                                 
                                    0
                                 
                              
                           
                         and 
                           
                              
                                 
                                    π
                                 
                                 
                                    1
                                 
                              
                           
                        , respectively.

Typically, the output from a classification model serves as input for business decisions, such as e.g. accepting/rejecting a loan application in credit scoring. Generally, a classification model provides a continuous score, 
                           
                              s
                              
                                 
                                    
                                       x
                                    
                                 
                              
                           
                        , which is a function of the attribute vector 
                           
                              x
                           
                         of the respective instance. In this paper, it is assumed that the instances from class 0 have a lower score than those from class 1 (if not, for logistic regression models, simply multiply the beta coefficients by 
                           
                              -
                              1
                           
                         before constructing the score).

The actual classification, i.e. the assignment of each instance to one of the two classes, is achieved by defining a cutoff value t, such that all instances with 
                           
                              s
                              <
                              t
                           
                         are classified as cases, whereas instances for which 
                           
                              s
                              ⩾
                              t
                           
                         are classified as non-cases. Function 
                           
                              
                                 
                                    F
                                 
                                 
                                    0
                                 
                              
                              (
                              s
                              )
                           
                         (
                           
                              
                                 
                                    F
                                 
                                 
                                    1
                                 
                              
                              (
                              s
                              )
                           
                        ) is the cumulative density function of the cases’ (non-cases’) scores s. Analogously, 
                           
                              
                                 
                                    f
                                 
                                 
                                    0
                                 
                              
                              (
                              s
                              )
                           
                         (
                           
                              
                                 
                                    f
                                 
                                 
                                    1
                                 
                              
                              (
                              s
                              )
                           
                        ) is the probability density function of the cases’ (non-cases’) scores s; see Fig. 1
                        . Cases for which 
                           
                              s
                              <
                              t
                           
                         (corresponding to the shaded area under 
                           
                              
                                 
                                    f
                                 
                                 
                                    0
                                 
                              
                              (
                              s
                              )
                           
                        ) are correctly predicted. On the other hand, non-cases with 
                           
                              s
                              <
                              t
                           
                         (corresponding to the shaded area under 
                           
                              
                                 
                                    f
                                 
                                 
                                    1
                                 
                              
                              (
                              s
                              )
                           
                        ) are incorrectly predicted.

The outcome of a classification model applied to N instances can be summarized in a confusion matrix, as displayed in Table 1
                        , where the diagonal represents the correct predictions. The off-diagonal quadrants concern incorrect predictions, expressed as proportions. Varying the cutoff value t changes these proportions.

Each cell in the confusion matrix has related costs or benefits. In general, the cost or benefit 
                           
                              c
                              (
                              i
                              |
                              j
                              )
                           
                         of classifying an instance from class j into class i (with 
                           
                              i
                              ,
                              
                              j
                              ∈
                              {
                              0
                              ,
                              1
                              }
                           
                        ) can be different for each of the four cells. These costs and benefits should be measured against a base scenario, as mentioned by Verbraken et al. (2013). They propose taking as base scenario the situation where no classification occurs at all, and measuring costs and benefits in comparison to this scenario. In the case of credit scoring, the base scenario would be that all loans are granted. Obviously, this is not a realistic scenario, since every financial institution will have a credit scoring program in place. But comparing to the “grant all loans” base scenario, ensures consistency when evaluating different credit scoring models.

By using a credit scoring system, the financial institution will be able to reject potentially harmful applications, hereby increasing its profit as compared to accepting all customers. Different models can thus be compared in terms of the extra profit they generate.

As a result, only costs and benefits corresponding to predicted cases (here: defaulters) are relevant (i.e. 
                           
                              c
                              (
                              1
                              |
                              0
                              )
                              =
                              c
                              (
                              1
                              |
                              1
                              )
                              =
                              0
                           
                        ), since only predicted cases will experience an impact from the action undertaken – and hence will differ from the base scenario. For notational convenience, we define 
                           
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                              
                              ≔
                              
                              c
                              (
                              0
                              |
                              0
                              )
                           
                         and 
                           
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                              
                              ≔
                              
                              c
                              (
                              0
                              |
                              1
                              )
                           
                        , where 
                           
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                              ,
                              
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                              ⩾
                              0
                           
                         are a benefit and a cost, respectively. In general, the action undertaken by the company towards an individual case may come at a cost 
                           
                              
                                 
                                    c
                                 
                                 
                                    ∗
                                 
                              
                           
                        . Finally, we should mention the fixed cost of building classification models, such as the cost of data collection, data preprocessing, model building, and model maintenance. However, these costs are irrelevant for model selection, as they will be approximately the same for all models.

Several performance measures have been proposed to evaluate classification models; see e.g. Baldi, Brunak, Chauvin, Andersen, and Nielsen (2000). In the data mining community, the best-known measures include (Hand, 2009):
                           
                              
                                 
                                    
                                       
                                       
                                          
                                             Accuracy
                                             =
                                             
                                                
                                                   π
                                                
                                                
                                                   0
                                                
                                             
                                             
                                                
                                                   F
                                                
                                                
                                                   0
                                                
                                             
                                             (
                                             t
                                             )
                                             +
                                             
                                                
                                                   π
                                                
                                                
                                                   1
                                                
                                             
                                             (
                                             1
                                             -
                                             
                                                
                                                   F
                                                
                                                
                                                   1
                                                
                                             
                                             (
                                             t
                                             )
                                             )
                                             ,
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             Sensitivity
                                             =
                                             
                                                
                                                   F
                                                
                                                
                                                   0
                                                
                                             
                                             (
                                             t
                                             )
                                             ,
                                             
                                             Specificity
                                             =
                                             1
                                             -
                                             
                                                
                                                   F
                                                
                                                
                                                   1
                                                
                                             
                                             (
                                             t
                                             )
                                             ,
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             AUC
                                             =
                                             
                                                ∫
                                                
                                                   -
                                                   ∞
                                                
                                                
                                                   ∞
                                                
                                             
                                             
                                                
                                                   F
                                                
                                                
                                                   0
                                                
                                             
                                             (
                                             s
                                             )
                                             
                                                
                                                   f
                                                
                                                
                                                   1
                                                
                                             
                                             (
                                             s
                                             )
                                             
                                             d
                                             s
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        
                     

A classifier’s accuracy measures the proportion of correctly classified observations. Sensitivity is the proportion of cases which are correctly classified, whereas specificity is the proportion of correctly predicted non-cases. The Area Under the receiver operating characteristic Curve (AUC) takes the entire range of possible cutoff values into account (Fawcett, 2006).

Most of these performance measures do not consider the misclassification costs, and are therefore only applicable when these costs are equal. Nevertheless, a lot of attention has been paid to cost-sensitive learning recently. Domingos (1999) proposed a general method to construct cost-sensitive classifiers, Provost and Fawcett (2001) combined ROC curve analysis with cost distribution information, Bernstein, Provost, and Hill (2005) developed an ontology-based approach for cost-sensitive classification, Zhou and Liu (2006) used over- and undersampling and threshold moving (and an ensemble of these methods) for cost-sensitive learning with neural networks, and Hand (2009) introduced the H-measure, which takes misclassification costs into account. However, this paper looks at the incremental profit generated by employing a classification model in a business context.

This section presents the application of the Expected Maximum Profit (EMP) measure, a general profit-based performance measure, to the particular case of credit scoring. Section 3.1 explains this general framework for classification performance.

Its application in a particular setting requires determining the respective cost and benefit parameters, which is discussed in Section 3.2. Section 3.3 presents how the EMP measure can be estimated empirically. Its relationship with AUC is analyzed in Section 3.4.

The general framework starts by defining the average classification profit per borrower, generated by employing a classifier, which is calculated as follows:
                           
                              (1)
                              
                                 P
                                 (
                                 t
                                 ;
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 =
                                 (
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 -
                                 
                                    
                                       c
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 
                                    
                                       π
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       F
                                    
                                    
                                       0
                                    
                                 
                                 (
                                 t
                                 )
                                 -
                                 (
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 +
                                 
                                    
                                       c
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       F
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 t
                                 )
                                 .
                              
                           
                        Optimizing the average profit which depends on the cutoff value t leads to the maximum profit measure, introduced by Verbeke, Dejaeger, Martens, Hur, and Baesens (2012):
                           
                              (2)
                              
                                 MP
                                 =
                                 
                                    
                                       
                                          max
                                       
                                       
                                          ∀
                                          t
                                       
                                    
                                 
                                 P
                                 (
                                 t
                                 ;
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 =
                                 P
                                 (
                                 T
                                 ;
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 ,
                              
                           
                        with T the optimal cutoff value under the given circumstances:
                           
                              (3)
                              
                                 T
                                 =
                                 arg
                                 
                                    
                                       
                                          max
                                       
                                       
                                          ∀
                                          t
                                       
                                    
                                 
                                 P
                                 (
                                 t
                                 ;
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 .
                              
                           
                        The optimal cutoff value T satisfies the first order condition:
                           
                              (4)
                              
                                 
                                    
                                       
                                          
                                             f
                                          
                                          
                                             0
                                          
                                       
                                       (
                                       T
                                       )
                                    
                                    
                                       
                                          
                                             f
                                          
                                          
                                             1
                                          
                                       
                                       (
                                       T
                                       )
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             π
                                          
                                          
                                             1
                                          
                                       
                                       (
                                       
                                          
                                             c
                                          
                                          
                                             1
                                          
                                       
                                       +
                                       
                                          
                                             c
                                          
                                          
                                             ∗
                                          
                                       
                                       )
                                    
                                    
                                       
                                          
                                             π
                                          
                                          
                                             0
                                          
                                       
                                       (
                                       
                                          
                                             b
                                          
                                          
                                             0
                                          
                                       
                                       -
                                       
                                          
                                             c
                                          
                                          
                                             ∗
                                          
                                       
                                       )
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             π
                                          
                                          
                                             1
                                          
                                       
                                    
                                    
                                       
                                          
                                             π
                                          
                                          
                                             0
                                          
                                       
                                    
                                 
                                 θ
                                 ,
                              
                           
                        where 
                           
                              θ
                           
                         is the cost-benefit ratio, introduced for notational convenience:
                           
                              (5)
                              
                                 θ
                                 =
                                 
                                    
                                       
                                          
                                             c
                                          
                                          
                                             1
                                          
                                       
                                       +
                                       
                                          
                                             c
                                          
                                          
                                             ∗
                                          
                                       
                                    
                                    
                                       
                                          
                                             b
                                          
                                          
                                             0
                                          
                                       
                                       -
                                       
                                          
                                             c
                                          
                                          
                                             ∗
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

Note that the right-hand side of (4) only contains priors and cost and benefit parameters. The left-hand side is a ratio of the probability density functions evaluated at cutoff T and corresponds to a certain slope on the receiver operating characteristic (ROC) curve. Thus, varying 
                           
                              θ
                           
                         from zero to infinity corresponds to a translation over the ROC curve (a more detailed derivation can be found in Verbraken et al. (2013)). As argued by Verbeke et al. (2012), MP in itself could be used as a classification performance measure which allows to select the model with the highest incremental profit. Moreover, contrary to traditional performance measures, the optimal cutoff is clearly defined and the fraction of the customer base towards which the action should be undertaken is equal to:
                           
                              (6)
                              
                                 
                                    
                                       
                                          
                                             η
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       mp
                                    
                                 
                                 =
                                 
                                    
                                       π
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       F
                                    
                                    
                                       0
                                    
                                 
                                 (
                                 T
                                 )
                                 +
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       F
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 T
                                 )
                                 .
                              
                           
                        
                     

The maximum profit measure was further refined by Verbraken et al. (2013), assuming that the cost and benefit parameters, 
                           
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                           
                         and 
                           
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                           
                        , are not always exactly known but follow a probability distribution. This assumption generalizes the profit model shown in Eq. (1), and allows explicitly considering randomness in costs and benefits across the observed sample. The Expected Maximum Profit measure (EMP) is defined as follows:
                           
                              (7)
                              
                                 EMP
                                 =
                                 
                                    ∫
                                    
                                       
                                          
                                             b
                                          
                                          
                                             0
                                          
                                       
                                    
                                 
                                 
                                    ∫
                                    
                                       
                                          
                                             c
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 P
                                 (
                                 T
                                 (
                                 θ
                                 )
                                 ;
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       ∗
                                    
                                 
                                 )
                                 ·
                                 h
                                 (
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                 d
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 
                                 d
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 ,
                              
                           
                        with 
                           
                              h
                              (
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                              ,
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                              )
                           
                         the joint probability density of the classification costs.

It has been shown (Verbraken et al., 2013) that EMP corresponds to an integration over a range of the ROC curve, and it is an upper bound to the profit a company can achieve by applying the classifier. Analogously to the deterministic optimal fraction 
                           
                              
                                 
                                    
                                       
                                          η
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    mp
                                 
                              
                           
                        , the expected profit maximizing fraction, 
                           
                              
                                 
                                    
                                       
                                          η
                                       
                                       
                                          ¯
                                       
                                    
                                 
                                 
                                    emp
                                 
                              
                           
                        , is the fraction of cases towards which an action is undertaken:
                           
                              (8)
                              
                                 
                                    
                                       
                                          
                                             η
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                    
                                       emp
                                    
                                 
                                 =
                                 
                                    ∫
                                    
                                       
                                          
                                             b
                                          
                                          
                                             0
                                          
                                       
                                    
                                 
                                 
                                    ∫
                                    
                                       
                                          
                                             c
                                          
                                          
                                             1
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                π
                                             
                                             
                                                0
                                             
                                          
                                          
                                             
                                                F
                                             
                                             
                                                0
                                             
                                          
                                          
                                             
                                                
                                                   T
                                                   (
                                                   θ
                                                   )
                                                
                                             
                                          
                                          +
                                          
                                             
                                                π
                                             
                                             
                                                1
                                             
                                          
                                          
                                             
                                                F
                                             
                                             
                                                1
                                             
                                          
                                          (
                                          T
                                          
                                             
                                                
                                                   θ
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                                 ·
                                 h
                                 (
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 ,
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                 d
                                 
                                    
                                       c
                                    
                                    
                                       1
                                    
                                 
                                 
                                 d
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 .
                              
                           
                        
                     

To apply the general EMP framework to the case of credit scoring, the conditions to determine the optimal cutoff value (4) have to be adapted. This requires specifying the parameters 
                           
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                              ,
                              
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                           
                        , and 
                           
                              
                                 
                                    c
                                 
                                 
                                    ∗
                                 
                              
                           
                         as well as the probability distribution 
                           
                              h
                              (
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                              ,
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                              )
                           
                         in Eq. (7). Next, we will use the methodology developed by Bravo, Maldonado, and Weber (2013) to calculate each of these parameters.

Parameter 
                           
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                           
                         is the benefit of correctly identifying a defaulter, more precisely it is the fraction of the loan amount which is lost after default:
                           
                              (9)
                              
                                 
                                    
                                       b
                                    
                                    
                                       0
                                    
                                 
                                 =
                                 
                                    
                                       LGD
                                       ·
                                       EAD
                                    
                                    
                                       A
                                    
                                 
                                 =
                                 λ
                                 ,
                              
                           
                        with 
                           
                              λ
                              ∈
                              
                                 
                                    
                                       0
                                       ,
                                       1
                                    
                                 
                              
                           
                         for notational convenience. A is the principal, LGD is the loss given default, and EAD is the exposure at default (Mays & Nuetzel, 2004).

Parameter 
                           
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                           
                         is the cost of incorrectly classifying a good applicant as a defaulter and is equal to the return on investment (ROI) of the loan, which considers the cost of the funds and all operational costs, i.e. 
                           
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                           
                        
                        =ROI. For any loan with instalments p to pay, the borrower-requested maturity M and principal A can be used to estimate the return, considering the interest rate r typically offered at that term and principal level. Under those assumptions, the ROI can be estimated using the well-known total interest (I) formulas (Broverman, 2010):
                           
                              (10)
                              
                                 
                                    
                                       
                                       
                                          
                                             I
                                             =
                                             pM
                                             -
                                             A
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             p
                                             =
                                             
                                                
                                                   Ar
                                                
                                                
                                                   1
                                                   -
                                                   
                                                      
                                                         (
                                                         1
                                                         +
                                                         r
                                                         )
                                                      
                                                      
                                                         -
                                                         M
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                       
                                          
                                             ROI
                                             =
                                             
                                                
                                                   I
                                                
                                                
                                                   A
                                                
                                             
                                             =
                                             
                                                
                                                   rM
                                                
                                                
                                                   1
                                                   -
                                                   
                                                      
                                                         (
                                                         1
                                                         +
                                                         r
                                                         )
                                                      
                                                      
                                                         -
                                                         M
                                                      
                                                   
                                                
                                             
                                             -
                                             1
                                          
                                       
                                    
                                 
                              
                           
                        
                     

Parameter 
                           
                              
                                 
                                    c
                                 
                                 
                                    ∗
                                 
                              
                           
                         is the cost of the action. Since rejecting a customer does not generate costs, we assume 
                           
                              
                                 
                                    c
                                 
                                 
                                    ∗
                                 
                              
                              =
                              0
                           
                        . Note that there is a cost involved with building the credit scoring model, but this cost is not related to a particular individual (i.e. it is not a variable cost). Therefore, in the long run, it is marginal for large portfolios – as is usually the case in consumer credit scoring (Edelberg, 2006) – and can be omitted.

Finally, we have to specify the probability distribution 
                           
                              h
                              (
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                              ,
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                              )
                           
                        . We assume the ROI (
                           
                              
                                 
                                    c
                                 
                                 
                                    1
                                 
                              
                           
                        ) to be constant for all loans, as is usually the case in consumer credit scoring. Eq. (10) shows that at fixed terms the ROI depends on the interest rate. Furthermore, Edelberg (2006) noticed that the interest rates varied between 3% and 5% p.a. in over a decade. This justifies our assumption of a constant ROI in portfolios with similar terms.

Parameter 
                           
                              λ
                           
                         (
                           
                              
                                 
                                    b
                                 
                                 
                                    0
                                 
                              
                           
                        ), however, is much more uncertain, since recovery rates may vary between 0% and 100% of the total loan amount, and several distributions may arise (Somers & Whittaker, 2007). The empirical cumulative distribution 
                           
                              H
                              (
                              λ
                              )
                           
                         for the three datasets used in this paper has three parts: a large part of the probability mass is situated in 
                           
                              λ
                              =
                              0
                           
                        , i.e. complete recovery of the loan amount. Another, smaller probability is observed for 
                           
                              λ
                              =
                              1
                           
                         (i.e. complete loss). The remainder of the probability is spread out roughly evenly between zero and one. Thus, to calculate EMP, for each defaulter it is assumed that:
                           
                              •
                              
                                 
                                    
                                       λ
                                       =
                                       0
                                    
                                  with probability 
                                    
                                       
                                          
                                             p
                                          
                                          
                                             0
                                          
                                       
                                    
                                 , i.e. the customer pays back the entire loan,


                                 
                                    
                                       λ
                                       =
                                       1
                                    
                                  with probability 
                                    
                                       
                                          
                                             p
                                          
                                          
                                             1
                                          
                                       
                                    
                                 , i.e. the customer defaults on the entire loan,


                                 
                                    
                                       λ
                                    
                                  follows a uniform distribution in 
                                    
                                       (
                                       0
                                       ,
                                       1
                                       )
                                    
                                 , with 
                                    
                                       h
                                       (
                                       λ
                                       )
                                       =
                                       1
                                       -
                                       
                                          
                                             p
                                          
                                          
                                             0
                                          
                                       
                                       -
                                       
                                          
                                             p
                                          
                                          
                                             1
                                          
                                       
                                    
                                 ,

With these elements, the EMP measure, as introduced in (7), becomes:
                           
                              (11)
                              
                                 EMP
                                 =
                                 
                                    ∫
                                    
                                       0
                                    
                                    
                                       1
                                    
                                 
                                 P
                                 (
                                 T
                                 (
                                 θ
                                 )
                                 ;
                                 λ
                                 ,
                                 ROI
                                 )
                                 ·
                                 h
                                 (
                                 λ
                                 )
                                 
                                 d
                                 λ
                                 ,
                              
                           
                        with
                           
                              (12)
                              
                                 P
                                 (
                                 t
                                 ;
                                 λ
                                 ,
                                 ROI
                                 )
                                 =
                                 λ
                                 ·
                                 
                                    
                                       π
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       F
                                    
                                    
                                       0
                                    
                                 
                                 (
                                 t
                                 )
                                 -
                                 ROI
                                 ·
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       F
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 t
                                 )
                              
                           
                        and 
                           
                              θ
                              =
                              ROI
                              /
                              λ
                           
                         (since 
                           
                              
                                 
                                    c
                                 
                                 
                                    ∗
                                 
                              
                              =
                              0
                           
                        ); see (5). Note that the cost-benefit ratio 
                           
                              θ
                           
                         ranges from ROI (for 
                           
                              λ
                              =
                              1
                           
                        ) to 
                           
                              +
                              ∞
                           
                         (for 
                           
                              λ
                              →
                              0
                           
                        ). This means that the EMP integration does not cover the entire ROC curve, since the slope of the ROC curve varies from 
                           
                              +
                              ∞
                           
                         (in the origin) to 0 (in 
                           
                              (
                              1
                              ,
                              1
                              )
                           
                        ). As a consequence, different ROC curves with the same AUC can lead to different EMP values. This is illustrated by the four ROC curves shown in Fig. 2
                        a. All four curves have the same AUC, but different EMP values, as shown in Fig. 2b (for this calculation we assumed 
                           
                              
                                 
                                    π
                                 
                                 
                                    0
                                 
                              
                              =
                              0.20
                           
                         and 
                           
                              ROI
                              =
                              0.2644
                           
                        ).

For theoretical derivations, it is usually assumed that ROC curves are smooth. An empirical ROC curve, however, is stepwise constant with diagonal elements if there are ties. Furthermore, Fawcett (2006) showed that the points on the convex hull of a ROC curve are the set of optimal operational points. Also Verbraken et al. (2013) use the convex hull to calculate the EMP measure for customer churn models. This section will derive an analogous algorithm to calculate the EMP measure for credit scoring models based on the convex hull of the ROC curve.

Assume the convex hull of the ROC curve consists of m segments, and let 
                           
                              (
                              
                                 
                                    r
                                 
                                 
                                    1
                                    i
                                 
                              
                              ,
                              
                                 
                                    r
                                 
                                 
                                    0
                                    i
                                 
                              
                              )
                           
                         be the end point of segment i (
                           
                              i
                              =
                              1
                              ,
                              …
                              m
                           
                        ) with 
                           
                              (
                              
                                 
                                    r
                                 
                                 
                                    10
                                 
                              
                              ,
                              
                                 
                                    r
                                 
                                 
                                    00
                                 
                              
                              )
                              
                              ≔
                              
                              (
                              0
                              ,
                              0
                              )
                           
                        .

A score 
                           
                              s
                              ∈
                              [
                              
                                 
                                    r
                                 
                                 
                                    1
                                    i
                                 
                              
                              ,
                              
                                 
                                    r
                                 
                                 
                                    1
                                    i
                                    +
                                    1
                                 
                              
                              ]
                           
                        , will be the optimal cutoff value for the following value of 
                           
                              λ
                           
                         (due to Eq. (4)):
                           
                              (13)
                              
                                 
                                    
                                       λ
                                    
                                    
                                       i
                                       +
                                       1
                                    
                                 
                                 =
                                 
                                    
                                       
                                          
                                             π
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      1
                                                      (
                                                      i
                                                      +
                                                      1
                                                      )
                                                   
                                                
                                                -
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      1
                                                      i
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             π
                                          
                                          
                                             0
                                          
                                       
                                       (
                                       
                                          
                                             r
                                          
                                          
                                             0
                                             (
                                             i
                                             +
                                             1
                                             )
                                          
                                       
                                       -
                                       
                                          
                                             r
                                          
                                          
                                             0
                                             i
                                          
                                       
                                       )
                                    
                                 
                                 ·
                                 ROI
                                 
                                 (
                                 i
                                 =
                                 0
                                 ,
                                 …
                                 ,
                                 m
                                 -
                                 1
                                 )
                                 .
                              
                           
                        
                     

We define 
                           
                              
                                 
                                    λ
                                 
                                 
                                    0
                                 
                              
                              
                              ≔
                              
                              0
                           
                        . The values 
                           
                              λ
                           
                         are not bounded by 1 along the ROC curve. When approaching the point 
                           
                              (
                              1
                              ,
                              1
                              )
                              ,
                              λ
                           
                         becomes infinitely large.

Then, when calculating EMP, one replaces the series 
                           
                              {
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                              |
                              i
                              =
                              0
                              ,
                              …
                              ,
                              m
                              }
                           
                         by 
                           
                              {
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                              |
                              i
                              =
                              0
                              ,
                              …
                              c
                              ,
                              k
                              +
                              1
                              }
                           
                        , with 
                           
                              k
                              
                              ≔
                              
                              max
                              {
                              i
                              |
                              
                                 
                                    λ
                                 
                                 
                                    i
                                 
                              
                              <
                              1
                              }
                           
                        , and 
                           
                              
                                 
                                    λ
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              
                              ≔
                              
                              1
                           
                        . Based on Eqs. (11) and (12), the EMP can be estimated by:
                           
                              (14)
                              
                                 EMP
                                 =
                                 
                                    
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                0
                                             
                                          
                                          ·
                                          
                                             
                                                π
                                             
                                             
                                                0
                                             
                                          
                                          ·
                                          
                                             
                                                r
                                             
                                             
                                                00
                                             
                                          
                                          ·
                                          
                                             
                                                p
                                             
                                             
                                                0
                                             
                                          
                                          -
                                          ROI
                                          ·
                                          
                                             
                                                π
                                             
                                             
                                                1
                                             
                                          
                                          ·
                                          
                                             
                                                r
                                             
                                             
                                                10
                                             
                                          
                                          ·
                                          
                                             
                                                p
                                             
                                             
                                                0
                                             
                                          
                                       
                                    
                                 
                                 +
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          0
                                       
                                       
                                          k
                                       
                                    
                                 
                                 
                                    ∫
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             i
                                          
                                       
                                    
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             i
                                             +
                                             1
                                          
                                       
                                    
                                 
                                 λ
                                 ·
                                 
                                    
                                       π
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       r
                                    
                                    
                                       0
                                       i
                                    
                                 
                                 ·
                                 h
                                 (
                                 λ
                                 )
                                 
                                 d
                                 λ
                                 -
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          0
                                       
                                       
                                          k
                                       
                                    
                                 
                                 
                                    ∫
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             i
                                          
                                       
                                    
                                    
                                       
                                          
                                             λ
                                          
                                          
                                             i
                                             +
                                             1
                                          
                                       
                                    
                                 
                                 ROI
                                 ·
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       r
                                    
                                    
                                       1
                                       i
                                    
                                 
                                 ·
                                 h
                                 (
                                 λ
                                 )
                                 
                                 d
                                 λ
                                 +
                                 
                                    
                                       
                                          
                                             
                                                λ
                                             
                                             
                                                k
                                                +
                                                1
                                             
                                          
                                          ·
                                          
                                             
                                                π
                                             
                                             
                                                0
                                             
                                          
                                          ·
                                          
                                             
                                                r
                                             
                                             
                                                0
                                                (
                                                k
                                                +
                                                1
                                                )
                                             
                                          
                                          ·
                                          
                                             
                                                p
                                             
                                             
                                                1
                                             
                                          
                                          -
                                          ROI
                                          ·
                                          
                                             
                                                π
                                             
                                             
                                                1
                                             
                                          
                                          ·
                                          
                                             
                                                r
                                             
                                             
                                                1
                                                (
                                                k
                                                +
                                                1
                                                )
                                             
                                          
                                          ·
                                          
                                             
                                                p
                                             
                                             
                                                1
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

The contributions in the square brackets are the probability masses for 
                           
                              λ
                              =
                              0
                           
                         and 
                           
                              λ
                              =
                              1
                           
                        , respectively. Since 
                           
                              λ
                           
                         is constant over the segments, 
                           
                              
                                 
                                    r
                                 
                                 
                                    0
                                    i
                                 
                              
                           
                         and 
                           
                              
                                 
                                    r
                                 
                                 
                                    1
                                    i
                                 
                              
                           
                         are constant in the end points of the segments, and 
                           
                              h
                              (
                              λ
                              )
                              =
                              1
                              -
                              
                                 
                                    p
                                 
                                 
                                    0
                                 
                              
                              -
                              
                                 
                                    p
                                 
                                 
                                    1
                                 
                              
                           
                        , this can be written as:
                           
                              (15)
                              
                                 EMP
                                 =
                                 (
                                 1
                                 -
                                 
                                    
                                       p
                                    
                                    
                                       0
                                    
                                 
                                 -
                                 
                                    
                                       p
                                    
                                    
                                       1
                                    
                                 
                                 )
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          0
                                       
                                       
                                          k
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      π
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      r
                                                   
                                                   
                                                      0
                                                      i
                                                   
                                                
                                             
                                             
                                                2
                                             
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         i
                                                         +
                                                         1
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                   -
                                                   
                                                      
                                                         λ
                                                      
                                                      
                                                         i
                                                      
                                                      
                                                         2
                                                      
                                                   
                                                
                                             
                                          
                                          -
                                          ROI
                                          ·
                                          
                                             
                                                π
                                             
                                             
                                                1
                                             
                                          
                                          
                                             
                                                r
                                             
                                             
                                                1
                                                i
                                             
                                          
                                          (
                                          
                                             
                                                λ
                                             
                                             
                                                i
                                                +
                                                1
                                             
                                          
                                          -
                                          
                                             
                                                λ
                                             
                                             
                                                i
                                             
                                          
                                          )
                                       
                                    
                                 
                                 +
                                 
                                    
                                       
                                          
                                             
                                                π
                                             
                                             
                                                0
                                             
                                          
                                          ·
                                          
                                             
                                                r
                                             
                                             
                                                0
                                                (
                                                k
                                                +
                                                1
                                                )
                                             
                                          
                                          ·
                                          
                                             
                                                p
                                             
                                             
                                                1
                                             
                                          
                                          -
                                          ROI
                                          ·
                                          
                                             
                                                π
                                             
                                             
                                                1
                                             
                                          
                                          ·
                                          
                                             
                                                r
                                             
                                             
                                                1
                                                (
                                                k
                                                +
                                                1
                                                )
                                             
                                          
                                          ·
                                          
                                             
                                                p
                                             
                                             
                                                1
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

Note that the contribution for 
                           
                              λ
                              =
                              0
                           
                         vanishes since 
                           
                              
                                 
                                    r
                                 
                                 
                                    00
                                 
                              
                              =
                              
                                 
                                    r
                                 
                                 
                                    10
                                 
                              
                              =
                              0
                           
                        , and that 
                           
                              
                                 
                                    λ
                                 
                                 
                                    k
                                    +
                                    1
                                 
                              
                              =
                              1
                           
                        . Since the upper bound for 
                           
                              λ
                           
                         is equal to 1, the integration does not cover the entire ROC curve.

AUC is a standard measure when evaluating binary classification models, and it has been related to most other measures by Hernández-Orallo, Flach, and Ferri (2012). We study the relationship between AUC and EMP, in order to enable the comparison to all other common measures.

We start from the definition of EMP (see (12)) and will carry out a variable transformation from 
                           
                              λ
                           
                         to T, the optimal cutoff value. From Eqs. (4) and (9) we know that:
                           
                              (16)
                              
                                 λ
                                 =
                                 
                                    
                                       ROI
                                       ·
                                       
                                          
                                             π
                                          
                                          
                                             1
                                          
                                       
                                       
                                          
                                             f
                                          
                                          
                                             1
                                          
                                       
                                       (
                                       T
                                       )
                                    
                                    
                                       
                                          
                                             π
                                          
                                          
                                             0
                                          
                                       
                                       
                                          
                                             f
                                          
                                          
                                             0
                                          
                                       
                                       (
                                       T
                                       )
                                    
                                 
                                 =
                                 
                                    
                                       ROI
                                       ·
                                       
                                          
                                             π
                                          
                                          
                                             1
                                          
                                       
                                    
                                    
                                       
                                          
                                             π
                                          
                                          
                                             0
                                          
                                       
                                       ·
                                       
                                          
                                             S
                                          
                                          
                                             ROC
                                          
                                       
                                    
                                 
                                 ,
                              
                           
                        with 
                           
                              
                                 
                                    S
                                 
                                 
                                    ROC
                                 
                              
                              =
                              
                                 
                                    
                                       
                                          f
                                       
                                       
                                          0
                                       
                                    
                                    (
                                    T
                                    )
                                 
                                 
                                    
                                       
                                          f
                                       
                                       
                                          1
                                       
                                    
                                    (
                                    T
                                    )
                                 
                              
                           
                         the slope of the ROC curve for 
                           
                              s
                              =
                              T
                           
                        . Substituting 
                           
                              λ
                           
                         by T, leads to:
                           
                              (17)
                              
                                 EMP
                                 =
                                 
                                    ∫
                                    
                                       -
                                       ∞
                                    
                                    
                                       
                                          
                                             T
                                          
                                          
                                             max
                                          
                                       
                                    
                                 
                                 
                                    
                                       ROI
                                       
                                          
                                             π
                                          
                                          
                                             0
                                          
                                       
                                       
                                          
                                             π
                                          
                                          
                                             1
                                          
                                       
                                    
                                    
                                       
                                          
                                             π
                                          
                                          
                                             0
                                          
                                       
                                       f
                                       (
                                       T
                                       )
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                f
                                             
                                             
                                                1
                                             
                                          
                                          (
                                          T
                                          )
                                          
                                             
                                                F
                                             
                                             
                                                0
                                             
                                          
                                          (
                                          T
                                          )
                                          -
                                          
                                             
                                                f
                                             
                                             
                                                0
                                             
                                          
                                          (
                                          T
                                          )
                                          
                                             
                                                F
                                             
                                             
                                                1
                                             
                                          
                                          (
                                          T
                                          )
                                       
                                    
                                 
                                 w
                                 (
                                 T
                                 )
                                 
                                 d
                                 T
                                 ,
                              
                           
                        where 
                           
                              w
                              (
                              T
                              )
                           
                         is 
                           
                              h
                              (
                              λ
                              )
                           
                         which absorbed the Jacobian of the variable transformation. Note that the integration bounds have changed due to the variable transformation. The lower bound (
                           
                              λ
                              =
                              0
                           
                        ) corresponds to a cutoff at 
                           
                              -
                              ∞
                           
                        . The upper bound (
                           
                              λ
                              =
                              1
                           
                        ), however, is linked to a finite cutoff 
                           
                              T
                              =
                              
                                 
                                    T
                                 
                                 
                                    max
                                 
                              
                           
                         due to the fact that for 
                           
                              λ
                              =
                              1
                           
                        , the slope of the ROC curve is 
                           
                              
                                 
                                    S
                                 
                                 
                                    ROC
                                 
                              
                              =
                              ROI
                              ·
                              
                                 
                                    π
                                 
                                 
                                    1
                                 
                              
                              /
                              
                                 
                                    π
                                 
                                 
                                    0
                                 
                              
                           
                        . Note that we also assumed a one-to-one relationship between T and 
                           
                              λ
                           
                        , which is valid when the ROC curve is bijective. Since the convex hull of the ROC curve is used, this condition is met.

If we assume that 
                           
                              w
                              (
                              T
                              )
                              =
                              
                                 
                                    π
                                 
                                 
                                    0
                                 
                              
                              
                                 
                                    f
                                 
                                 
                                    0
                                 
                              
                              (
                              T
                              )
                           
                        , EMP can be written as:
                           
                              (18)
                              
                                 EMP
                                 =
                                 ROI
                                 ·
                                 
                                    
                                       π
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∫
                                                            
                                                               -
                                                               ∞
                                                            
                                                            
                                                               
                                                                  
                                                                     T
                                                                  
                                                                  
                                                                     max
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               f
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         (
                                                         T
                                                         )
                                                         
                                                            
                                                               F
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         (
                                                         T
                                                         )
                                                         
                                                         d
                                                         T
                                                      
                                                      
                                                         ︸
                                                      
                                                   
                                                
                                                
                                                   (
                                                   a
                                                   )
                                                
                                             
                                          
                                          -
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∫
                                                            
                                                               -
                                                               ∞
                                                            
                                                            
                                                               
                                                                  
                                                                     T
                                                                  
                                                                  
                                                                     max
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               f
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         (
                                                         T
                                                         )
                                                         
                                                            
                                                               F
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         (
                                                         T
                                                         )
                                                         
                                                         d
                                                         T
                                                      
                                                      
                                                         ︸
                                                      
                                                   
                                                
                                                
                                                   (
                                                   b
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

Since AUC is equal to:
                           
                              (19)
                              
                                 AUC
                                 =
                                 
                                    ∫
                                    
                                       -
                                       ∞
                                    
                                    
                                       +
                                       ∞
                                    
                                 
                                 
                                    
                                       f
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 T
                                 )
                                 
                                    
                                       F
                                    
                                    
                                       0
                                    
                                 
                                 (
                                 T
                                 )
                                 
                                 d
                                 T
                                 ,
                              
                           
                        element (a) in Eq. (18) is a part of the area under the ROC curve, from the origin up to 
                           
                              
                                 
                                    T
                                 
                                 
                                    max
                                 
                              
                           
                        . Element (b) can be worked out as follows:
                           
                              
                                 
                                    ∫
                                    
                                       -
                                       ∞
                                    
                                    
                                       
                                          
                                             T
                                          
                                          
                                             max
                                          
                                       
                                    
                                 
                                 
                                    
                                       f
                                    
                                    
                                       0
                                    
                                 
                                 (
                                 T
                                 )
                                 
                                    
                                       F
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 T
                                 )
                                 
                                 d
                                 T
                                 =
                                 
                                    ∫
                                    
                                       -
                                       ∞
                                    
                                    
                                       
                                          
                                             T
                                          
                                          
                                             max
                                          
                                       
                                    
                                 
                                 
                                    
                                       F
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 T
                                 )
                                 
                                 d
                                 
                                    
                                       F
                                    
                                    
                                       0
                                    
                                 
                                 (
                                 T
                                 )
                                 =
                                 
                                    
                                       F
                                    
                                    
                                       0
                                    
                                 
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       max
                                    
                                 
                                 )
                                 
                                    
                                       F
                                    
                                    
                                       1
                                    
                                 
                                 (
                                 
                                    
                                       T
                                    
                                    
                                       max
                                    
                                 
                                 )
                                 -
                                 
                                    
                                       
                                          
                                             
                                                
                                                   ∫
                                                   
                                                      -
                                                      ∞
                                                   
                                                   
                                                      
                                                         
                                                            T
                                                         
                                                         
                                                            max
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      f
                                                   
                                                   
                                                      1
                                                   
                                                
                                                (
                                                T
                                                )
                                                
                                                   
                                                      F
                                                   
                                                   
                                                      0
                                                   
                                                
                                                (
                                                T
                                                )
                                                
                                                d
                                                T
                                             
                                             
                                                ︸
                                             
                                          
                                       
                                       
                                          (
                                          a
                                          )
                                       
                                    
                                 
                              
                           
                        Replacing this result in Eq. (18), we obtain:
                           
                              (20)
                              
                                 EMP
                                 =
                                 2
                                 ·
                                 ROI
                                 ·
                                 
                                    
                                       π
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            ∫
                                                            
                                                               -
                                                               ∞
                                                            
                                                            
                                                               
                                                                  
                                                                     T
                                                                  
                                                                  
                                                                     max
                                                                  
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               f
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         (
                                                         T
                                                         )
                                                         
                                                            
                                                               F
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         (
                                                         T
                                                         )
                                                         
                                                         d
                                                         T
                                                      
                                                      
                                                         ︸
                                                      
                                                   
                                                
                                                
                                                   (
                                                   a
                                                   )
                                                
                                             
                                          
                                          -
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               1
                                                            
                                                            
                                                               2
                                                            
                                                         
                                                         
                                                            
                                                               F
                                                            
                                                            
                                                               0
                                                            
                                                         
                                                         (
                                                         
                                                            
                                                               T
                                                            
                                                            
                                                               max
                                                            
                                                         
                                                         )
                                                         
                                                            
                                                               F
                                                            
                                                            
                                                               1
                                                            
                                                         
                                                         (
                                                         
                                                            
                                                               T
                                                            
                                                            
                                                               max
                                                            
                                                         
                                                         )
                                                      
                                                      
                                                         ︸
                                                      
                                                   
                                                
                                                
                                                   (
                                                   c
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

This has been illustrated on the graph in Fig. 3
                        , and shows how EMP measures the area under the ROC curve which is relevant for decision making.

It is straightforward to see that, for 
                           
                              
                                 
                                    T
                                 
                                 
                                    max
                                 
                              
                              →
                              +
                              ∞
                           
                         (i.e. moving the point corresponding to 
                           
                              
                                 
                                    T
                                 
                                 
                                    max
                                 
                              
                           
                         to 
                           
                              (
                              1
                              ,
                              1
                              )
                           
                        ), the EMP measure becomes a linear combination of AUC:
                           
                              (21)
                              
                                 EMP
                                 →
                                 2
                                 ·
                                 ROI
                                 ·
                                 
                                    
                                       π
                                    
                                    
                                       0
                                    
                                 
                                 
                                    
                                       π
                                    
                                    
                                       1
                                    
                                 
                                 
                                    
                                       
                                          AUC
                                          -
                                          
                                             
                                                1
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                 
                                 .
                              
                           
                        
                     

We study next under which conditions AUC and EMP are equivalent. This will be so when:
                           
                              1.
                              
                                 
                                    
                                       w
                                       (
                                       T
                                       )
                                       =
                                       
                                          
                                             π
                                          
                                          
                                             0
                                          
                                       
                                       
                                          
                                             f
                                          
                                          
                                             0
                                          
                                       
                                       (
                                       T
                                       )
                                    
                                 ,


                                 
                                    
                                       
                                          
                                             T
                                          
                                          
                                             max
                                          
                                       
                                       →
                                       +
                                       ∞
                                    
                                 
                              

Assumption 1 means that the probability distribution of 
                           
                              λ
                           
                         depends on the score distribution, i.e. the output of a classifier. This clearly is not desirable since the costs are then depending on classification results themselves (as pointed out by Hand (2009)). Assumption 2 occurs when either 
                           
                              
                                 
                                    π
                                 
                                 
                                    1
                                 
                              
                              →
                              0
                           
                         or 
                           
                              ROI
                              →
                              0
                           
                        , which is unlikely to happen. Furthermore, in this case, the EMP measure vanishes to zero.

We argue that, in a business context, EMP is a better measure than AUC, since it analyzes the segments of the ROC curve which will indeed be used for decision-making.

In this section, we demonstrate the potential of the proposed profit-based performance measure for credit scoring using real-world data. We focus on two widely used performance measures for comparison: AUC and accuracy (ACC). Our experimental procedure compares the use of each of these metrics, while focusing on two important aspects: parameter tuning and cutoff point determination. Section 4.1 describes the dataset, after which the experimental setup is discussed in Section 4.2. Sections 4.3 and 4.4 respectively address the results with regards to parameter selection and to cutoff point determination. In Section 4.5 we perform a sensitivity analysis regarding some of the parameters used.

For our experiments, we use two datasets composed of loans for micro-entrepreneurs granted by a government organization between 1997 and 2007. The dataset characteristics are:
                           
                              •
                              
                                 New borrowers: The first dataset consists of 37,492 loans granted to borrowers with no previous credit history with the organization. Each loan is described by 16 variables, such as socio-demographic descriptors (age, employment, etc.) and an economic profile (ownership of properties, goods relevant for the application of the loan, etc.). The mean loan value is 1123euro, the mean term is 2.5years, and the dataset presents a default rate of 30.56%.


                                 Returning borrowers: This dataset is formed by 103,466 loans granted to borrowers that already had a loan with the institution, i.e. there was credit history available. The variables presented before are complemented by eight credit history variables, such as the total number of past and current loans, maximum and mean arrears in previous loans, total amount granted, etc. The dataset has an average loan value of 1150euro, with a mean term of 2.4years and a default rate of 20.47%.

Both datasets have already been used to develop credit scoring models (Bravo et al., 2013), where the before mentioned variables turned out to be statistically significant. Furthermore, additional information was captured while the loan was being repaid (in particular information necessary to estimate the exposure and the loss, i.e. repayments made after default, total number of payments, collateral value, and recovery percentage at default). The EAD and LGD of defaulted loans are used to estimate the perceived loss. The granted amount is used to estimate each loan’s profit; see Section 3.

For our experiments we chose logistic regression and artificial neural networks (ANN) using logistic output and transfer functions and one hidden layer. The reasons for these models are that logistic regression is by far the most commonly used method for credit scoring according to Thomas et al. (2002). ANN, however, gave best results on a large number of datasets (Baesens et al., 2003). The problem with ANN is that their black-box nature goes against Basel II/III regulations which require transparency in the loan granting process. Nevertheless, we use ANN as a benchmark to obtain best-case results.

Both datasets were divided into three subsets: validation set (20% of observations), used to vary the parameters, a training set (60% of observations) for training the model once the optimal parameters were found, and an independent test set (20% of observations) which is used for reporting results. The test set is the same across all experiments, so results are comparable throughout the paper.

During the model building step of ANN, certain parameters, such as the number of hidden neurons and the number of training iterations need to be tuned, as will be shown in Section 4.3. Once the model is obtained, a decision has to be made regarding the classification of any given loan applicant. That decision is made by setting a cutoff point, which transforms the continuous score into a binary output; see Section 4.4 for more details. To assess the quality of the resulting credit scoring model, we compare three different measures: accuracy, total profit, and the average profit per accepted loan.

For the ANN we determined two parameters: the number of training iterations and the number of hidden neurons. We conducted a grid search over a set of candidate parameters. The number of hidden neurons was chosen from the interval 
                           
                              
                                 
                                    
                                       
                                          
                                             V
                                          
                                          
                                             2
                                          
                                       
                                       ,
                                       2
                                       V
                                    
                                 
                              
                           
                        , with V the number of input variables. The number of iterations was chosen from the interval 
                           
                              [
                              50
                              ,
                              1000
                              ]
                           
                         in steps of 50 iterations.

In order to select the best set of parameters, a performance measure is needed. We will contrast AUC, accuracy, and EMP. To estimate EMP, we have programmed an R package, publicly available at CRAN (Bravo & Verbraken, 2014) with the necessary functions.

A model was trained in each of the grid elements for the corresponding parameter set. The best model for each measure (AUC, ACC, EMP) was then trained using the respective parameter set. Subsequently, the resulting models were applied to the test sets. Tables 2 and 3
                        
                         show the results for each of the datasets.

For “New Borrowers”, both AUC and EMP select the same configuration: 150 iterations and 32 neurons, whereas accuracy expands the training time (450 iterations), but reduces the network’s complexity (29 hidden neurons). For the dataset of returning borrowers, EMP selects 400 training iterations, but only 21 neurons, versus 250 iterations and 26 neurons for AUC.

The last two columns of Tables 2 and 3 show the value of the respective performance measure (PM) and the optimal fraction (see Eq. (8)). The performance in terms of AUC and accuracy is better for the returning borrowers, as one would expect given the richer data. This is not true, however, for EMP, where performance decreases from 3% to 2.3%. This seems counter-intuitive considering the richer data for “Returning Borrowers”, but is explained by the fact that the dataset of new borrowers contains more defaulters (30.56%) than the dataset of returning borrowers (20.47%). Remember that EMP measures the incremental profit as compared to not building a credit scoring model, expressed as a percentage of the total loan amount. The more defaulters there are in a dataset, the easier it is to increase the profitability by building a credit scoring model, even with less data available. This also means that it is worthwhile to reject more applicants for “New Borrowers” (17.56%) as compared to “Returning Borrowers” (10.16%). Note that AUC and accuracy do not provide information about the profitability, one of the major strengths of EMP besides the optimal fraction, as will be discussed in the next section.

After having trained a model, the cutoff point has to be determined. According to Bravo et al. (2013), there are two methods to take that decision (without using the EMP measure): (1) focusing on the cost of the operation or (2) using the accuracy to define the optimal cutoff. The EMP measure, however, gives the optimal fraction of cases that should be rejected, which can then be transformed to the corresponding cutoff point. This characteristic is unique among all methods compared. For our benchmark we chose two approaches: if a model was built using accuracy as performance measure, then accuracy is also used to determine the cutoff point (maximum accuracy in training set). For AUC, we use the cutoff in which the derivative of the ROC curve tangent is equal to the ratio of the error costs, estimating for each point in the ROC curve the total loss perceived and the total utility lost. The cutoff value has been determined for the different performance measures, after which the performance of the model has been assessed using the test set. Tables 4 and 5
                        
                         present the results for the ANN, using the parameters determined in Section 4.3.

The results employing logistic regression are shown in Tables 6 and 7
                        
                        . From these tables, the advantages of using a profit-driven measure are evident. Considering the total profit, EMP brings the highest value among all combinations, with differences of up to 12% as compared to the scenario where no model is used.

EMP achieves best results regarding both criteria, accuracy as well as profit. The EMP-based model also selects the highest number of loans to be granted (except Table 4). This shows that the EMP-based model ensures better total rewards across the granted loans, even though some riskier loans could be accepted that might end in default.

Since logistic regression models do not have parameters to be tuned, the variation in the results is entirely attributable to the cutoff value. Hence, these results underline the importance of an adequate cutoff point determination. For the new borrowers model, the difference between EMP-based and ACC-based cutoff value is very small in terms of accuracy, and it is non-existent in the case of returning borrowers. However, there are again differences in the total profit and the average profit per loan. This once again illustrates that the EMP-based cutoff determination is a better overall choice, resulting in the best accuracy and a significant, although lower, improvement in the monetary gain. The results are also consistent regarding the average profit per loan: EMP leads to the lowest one among the three models, and in this case AUC is the one with highest average profit. The reason is that the AUC model is much more restrictive, since we reproduce an already high default rate, with a cutoff of 0.60 for the first dataset and 0.70 for the second one, so it takes a much more conservative approach than the other two measures.

As shown in Bravo et al. (2013), a cutoff purely based on accuracy is too lenient to be used on its own, mostly because there usually is a much higher number of good borrowers than bad borrowers in a dataset. On the other hand, a cutoff based solely on average cost, or the proportion of them as is the case of AUC, is too restrictive, since this implies rejecting too many loans as each loan represents a risk. The use of a profit-oriented performance measure such as EMP has the advantage of achieving an excellent trade-off between both criteria, when just one cutoff is to be determined.

The final question to be answered is how relevant the parameter selection in the EMP application process is. There are two decisions to be made: the ROI to be used and the distribution of 
                           
                              λ
                           
                        , i.e. the losses perceived. In the previous sections, 
                           
                              λ
                           
                         is determined using an ad hoc distribution estimated from data. The ROI is the actual utility that each loan brings. To adjust this decision, Loterman, Brown, Martens, Mues, and Baesens (2012) show that the LGD distribution follows, in most cases, either a distribution that decays exponentially, or a U-shaped distribution; both can be modeled using a Beta distribution with parameters 
                           
                              (
                              2
                              ,
                              0
                              )
                           
                         and 
                           
                              (
                              0.5
                              ,
                              0.5
                              )
                           
                        , respectively. Additionally, we perturbed the obtained ROI value by steps of 5% in the range 
                           
                              [
                              -
                              50
                              %
                              ,
                              +
                              50
                              %
                              ]
                           
                        , accounting for potential errors or divergences in this value. Then we measured the change in utility perceived if the model was applied with these quantities to the test set. The results for both universes (new and returning borrowers) are depicted in Fig. 4
                        .

The graphs show that determining correctly both the distribution and the ROI is paramount to obtaining a maximum-profit result, as it is to be expected. The most critical parameter is the distribution of 
                           
                              λ
                           
                        , since there can be a rapid decay in the obtained utility if a theoretical distribution is used. For example, in Fig. 4b we observe a 10% drop in utility. The most likely explanation for this comes from the nature of the loss distribution: it can vary greatly among institutions, so using an approximation that is closer to reality, such as the one proposed in this paper, can improve significantly the final result.

For the ROI little deviation in utility close to the parameter’s true value is observed. However, in both datasets there is a significant drop in utility if the ROI is over-estimated, i.e., the estimated utility per granted Euro is larger than it actually is. By over-estimating the ROI, the institution is more prone to take riskier positions, accepting more bad borrowers to take advantage of the larger utility that each good borrower seemingly brings, and thus causing a larger loss than by using the correct ROI. In turn, under-estimating ROI may improve the results by a small percentage, which can be explained by particular loans that cause a large loss.

@&#CONCLUSIONS AND FUTURE WORK@&#

This paper presents a profit-based performance measure based on EMP, a recently proposed general classification performance measure. Our contribution is to adapt this general approach to the specific case of consumer credit scoring. This performance measure accounts for the benefits generated by healthy loans and the costs caused by loan defaults. As a result, the profit-based measure allows for profit-driven model selection, i.e. it allows practitioners identifying the credit scoring model which increases profitability most. Furthermore, the proposed measure provides the optimal cutoff value, which is required in order to transform the continuous score from a credit scoring model into a binary decision. This feature which other performance measures do not have is a major advantage of the EMP measure.

The results of our experiments indicate that using the EMP measure for model selection leads to more profitable credit scoring models. Moreover, employing the EMP-based cutoff value further increases the profitability by granting more loans than traditional approaches. Besides, the lender gains insight in the monetary reward of implementing a credit scoring model, which improves its practical use.

This paper focuses on profit-based model performance measurement. An interesting venue for future research is to incorporate the profitability criterion into the model building step. Currently, models typically optimize a statistical criterion, such as e.g. maximum likelihood. A focus shifted to profitability may provide further opportunities for improving credit scoring practices. A second opportunity for future research is to apply this measure to other types of credit. The EMP parameter values determined in this paper are tailored to consumer credits. It would be interesting to determine the respective cost distributions for other types of credit, such as e.g. mortgages.

@&#ACKNOWLEDGEMENTS@&#

The authors acknowledge support from the “Instituto Sistemas Complejos de Ingeniería” (ICM: P-05-004-F, CONICYT: FBO16), the Flemish Research Council (FWO, Odysseus Grant B.0915.09), Conicyt’s Becas Chile Program (PD-74140041), and the Explorative Scientific Co-operation Programme 2012–2013 which funded the project “Development of rule-based classification models using profit maximization” (BIL 12/01).

@&#REFERENCES@&#

