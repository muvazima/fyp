@&#MAIN-TITLE@&#Cell packing structures

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Recent and ongoing research in architectural geometry.


                        
                        
                           
                           Links between cell packing structures and discrete differential geometry.


                        
                        
                           
                           Applications, e.g. to shading and indirect lighting.


                        
                        
                           
                           Interplay of geometry, optimization, statics, manufacturing.


                        
                        
                           
                           Combining form, function and fabrication into novel design tools.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Architectural geometry

Fabrication-aware design

Spatial tiling

Polyhedral packing

Cell packing

Polyhedral mesh

Offset mesh

Sphere packing

Torsion-free support structure

Shading system

@&#ABSTRACT@&#


               
               
                  This paper is an overview of architectural structures which are either composed of polyhedral cells or closely related to them. We introduce the concept of a support structure of such a polyhedral cell packing. It is formed by planar quads and obtained by connecting corresponding vertices in two combinatorially equivalent meshes whose corresponding edges are coplanar and thus determine planar quads. Since corresponding triangle meshes only yield trivial structures, we focus on support structures associated with quad meshes or hex-dominant meshes. For the quadrilateral case, we provide a short survey of recent research which reveals beautiful relations to discrete differential geometry. Those are essential for successfully initializing numerical optimization schemes for the computation of quad-based support structures. Hex-dominant structures may be designed via Voronoi tessellations, power diagrams, sphere packings and various extensions of these concepts. Apart from the obvious application as load-bearing structures, we illustrate here a new application to shading and indirect lighting. On a higher level, our work emphasizes the interplay between geometry, optimization, statics, and manufacturing, with the overall aim of combining form, function and fabrication into novel integrated design tools.
               
            

@&#INTRODUCTION@&#

The formation of complex materials and structures from smaller and simpler cells is an omnipresent concept in nature and certainly also in architecture. While nature is abundant in shapes of cells, architecture–at least so far–had to be more conservative and uses simple cells which can be easily manufactured. Hence, we here deal mostly with polyhedral cells, i.e., those which exhibit flat faces. Since part of contemporary architecture favors organic freeform shapes, we will discuss the following basic question: How can one generate freeform shells by tightly packing polyhedral cells? We mainly focus on just one layer of cells, although we will comment on how to generate multiple layers. In the actual architectural realization, the polyhedral cells may not be completely realized or may be decorated with additional detail (see Figs. 1 and 4
                     ). Moreover, we discuss derived structures which are not really polyhedral anymore, but can easily be generated from polyhedral cell packings.

The present paper may be seen as a survey with new results. It covers some core developments in Architectural Geometry of the past few years, but is written from a somewhat different perspective. We therefore do not discuss prior research at the beginning of our paper, but prefer to integrate it into the relevant sections.

Our paper is organized as follows: In Section  2, we formulate the problem, introduce the basic terminology and concepts and focus on cell arrangements related to Voronoi diagrams and hexagonal patterns. Section  3 presents a survey of packings with quadrilateral combinatorics and its close relations to discrete differential geometry. Aspects of statics, especially self-supporting surfaces, and the rigidity of the presented structures are discussed in Section  5. Throughout the paper, we illustrate the discussions with various applications. Section  6 concludes the paper.


                     The Material Ecology aspect. Material Ecology is an interdisciplinary research initiative which, we quote, “undertakes design research in the intersection between architecture, engineering, computation, and ecology [… It] undertakes research in advanced digital applications for architectural practice and pursuits their contribution to a design paradigm promoting generative design processes”. The study of geometric and physical aspects of freeform architecture certainly fits most of these items directly or indirectly, in particular it lies in the intersection between computation, architecture and engineering. Our philosophy could be described as analytic and knowledge-based, laying the foundations for generative design. Guiding thoughts are efficiency of construction, and also the exploration of the most general shapes obtainable from specified local geometric and other constraints. Since often local geometry (cell shapes) is inspired by forms occurring in nature–most famously in honeycombs or radiolaria–we might argue that we are borrowing shapes from a source which already has performed specific optimization on them. This again puts our research in the context of Material Ecology.

A polyhedron is a solid whose boundary has planar faces only; if no confusion can arise, also the boundary surface is called a polyhedron. The polyhedra shall be tightly packed in order to form a thick shell (see Fig. 2
                        ). Shared faces of neighboring polyhedra are called inner faces or transverse faces; the other faces are boundary faces. Analogously, a polyhedral packing has inner edges and boundary edges.


                        The support structure of a polyhedral cell packing. Packing polyhedra in this way, the planes of the inner faces, confined by the lines of the inner edges, form a structure which is of central importance for our considerations. As we want the packing to have nonzero thickness everywhere, each inner face contains two inner edges, which we can connect to form a quad (see Fig. 2). The resulting arrangement of quads will be called the support structure of the polyhedral cell packing. This name also indicates an important application: One can align prismatic beams of a load-bearing structure with its faces (see e.g.  Fig. 1, left). In this case we speak of a torsion-free support structure, and the inner edges are called the node axes.


                        Polyhedral plate structures. In some cases it is possible to close all cells of the support structure with just two flat faces, one on either side. Then we have two combinatorially equivalent polyhedral meshes 
                           A
                           ,
                           B
                        , which form the boundary of a structure we refer to as a polyhedral plate structure. It is obtained by joining corresponding vertices and edges in meshes 
                           A
                         and 
                           B
                         (which have the particular property that corresponding edges are coplanar). One may see meshes 
                           A
                         and 
                           B
                         as variable distance offsets of each other.


                        Parallel meshes and offsets. A practically useful special case occurs when corresponding faces of 
                           A
                         and 
                           B
                         lie in parallel planes; then also corresponding edges are parallel. Such offset meshes have been investigated in detail  [1]. If the plates are of constant thickness (width) 
                           w
                        , the planes of the support structure are bisecting planes of the adjacent face planes of the plates and the two meshes 
                           A
                         and 
                           B
                         are so-called conical meshes introduced by Liu et al.  [2]. At each vertex 
                           
                              
                                 a
                              
                              
                                 i
                              
                           
                         of 
                           A
                        , the bisecting planes of the incident edges of 
                           A
                         intersect in an inner edge (node axis) 
                           
                              
                                 n
                              
                              
                                 i
                              
                           
                           =
                           
                              
                                 a
                              
                              
                                 i
                              
                           
                           
                              
                                 b
                              
                              
                                 i
                              
                           
                        , where 
                           
                              
                                 b
                              
                              
                                 i
                              
                           
                         is the vertex in 
                           B
                         which corresponds to 
                           
                              
                                 a
                              
                              
                                 i
                              
                           
                         (see Fig. 2 for notation): hence, 
                           
                              
                                 n
                              
                              
                                 i
                              
                           
                         is the axis of a right circular cone which touches all face planes meeting at 
                           
                              
                                 a
                              
                              
                                 i
                              
                           
                        .

Note that a polyhedral mesh is always conical if its vertices have valence 3. In that case there always exists a polyhedral plate structure of constant thickness which is defined by mesh 
                           A
                         and a suitable partner mesh 
                           B
                        . We come back to this topic in Section  2.5.

The faces of the boundary meshes 
                           A
                         and 
                           B
                         of a support structure are arranged similar to the tiles of a planar tiling. Thus, the basic regular types can be taken from the planar case: triangular, quadrilateral and hexagonal. In the plane, we have regular tilings all of whose tiles and vertex stars are congruent. This is clearly not possible for general freeform shapes, even not on the combinatorial side. For example, instead of a regular quad tiling, the inner faces will be arranged in a quad-dominant structure, which may exhibit extraordinary vertices (
                           
                              valence
                           
                           ≠
                           4
                        ) and extraordinary faces (non-quads).


                        Triangular structures. If the support structure is bounded by triangle meshes 
                           A
                           ,
                           B
                        , then all inner edges (node axes) pass through a common point or are parallel. This is obvious, since (i) the three face planes of a triangular cell intersect in a common point 
                           C
                         or are parallel and thus its three inner edges pass through 
                           C
                         or are parallel, and (ii) neighboring polyhedra share two inner edges. Reformulating this property, we can say that a triangle mesh does not possess a torsion-free support structure. In the present context, this is the least interesting case which will not be further pursued.


                        Quadrilateral structures. A quadrilateral support structure is geometrically very interesting, and its discussion depends a bit on whether it is a plate structure or not. The quad structure in Fig. 1, left, is obviously not a plate structure, as seen clearly by means of the detail of its upper side in Fig. 1 (center). We discuss the remarkable geometry of quadrilateral structures in Section  3.


                        Hexagonal structures. Such structures seem to appear frequently in nature and are closely related to Voronoi diagrams. We discuss them below.

This paper treats quad-based and hex-based structures but as explained above, structures based on triangle meshes have too few degrees of freedom to be considered in this context. There is more material on quad-based structures than on hexagonal ones, owing to the richer geometry of the former, and their connections to discrete differential geometry. All kinds of structures have counterparts in nature, the most common being hexagonal ones. Fig. 3
                        
                         demonstrates that even with a specified narrow class of organisms all kinds can occur.

Given a set of seed points 
                           
                              
                                 s
                              
                              
                                 i
                              
                           
                        , a Voronoi diagram associates with each of these points a cell 
                           C
                           
                              (
                              
                                 
                                    s
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         formed by all points which are closer to 
                           
                              
                                 s
                              
                              
                                 i
                              
                           
                         than to any other seed point 
                           
                              
                                 s
                              
                              
                                 k
                              
                           
                        . For our application, we can place the seeds 
                           
                              
                                 s
                              
                              
                                 i
                              
                           
                         on a surface 
                           Φ
                         and consider only that part of the Voronoi diagram which is sufficiently close to 
                           Φ
                        . This immediately determines the support structure of a polyhedral cell packing, whose nodes are generically of valence three and whose faces tend to be hexagonal, especially if the cells are roughly of the same size.

A good way to achieve nearly the same size for all cells is to use a centroidal Voronoi tessellation (CVT, see  [4]). In the plane or for a full 3D diagram, this means that the seeds are the barycenters of their cells. For a diagram on a surface 
                           Φ
                        , the seeds 
                           
                              
                                 s
                              
                              
                                 i
                              
                           
                         are placed by an optimization algorithm. With 
                           S
                         as the set of seeds and 
                           
                              
                                 V
                              
                              
                                 i
                              
                           
                         as cells obtained by restricting the Voronoi diagram 
                           V
                         of 
                           S
                         to the surface 
                           Φ
                        , such a CVT minimizes 
                           
                              (1)
                              
                                 
                                    
                                       ∑
                                    
                                    
                                       i
                                    
                                 
                                 
                                    
                                       ∫
                                    
                                    
                                       
                                          
                                             V
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          ‖
                                          p
                                          −
                                          
                                             
                                                s
                                             
                                             
                                                i
                                             
                                          
                                          ‖
                                       
                                    
                                    
                                       2
                                    
                                 
                                 d
                                 p
                                 .
                              
                           
                         We refer to Yan et al.  [5] and to Liu et al.  [6] for fast computation. Fig. 5
                         shows examples of such structures.

In order to vary the size of CVT cells in a controlled way, one can use weighted Voronoi diagrams, which are also called power diagrams   [7]. Recalling that the power of point 
                           p
                         with respect to a sphere with center 
                           c
                         and radius 
                           r
                         is defined as 
                           
                              
                                 
                                    (
                                    p
                                    −
                                    c
                                    )
                                 
                              
                              
                                 2
                              
                           
                           −
                           
                              
                                 r
                              
                              
                                 2
                              
                           
                        , we define a power diagram by seed spheres 
                           
                              
                                 S
                              
                              
                                 i
                              
                           
                        . The cell 
                           C
                           
                              (
                              
                                 
                                    S
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         is the set of all points whose power with respect to 
                           
                              
                                 S
                              
                              
                                 i
                              
                           
                         is smaller than the power with respect to any other seed sphere 
                           
                              
                                 S
                              
                              
                                 k
                              
                           
                        . All points which have equal power with respect to two spheres lie in a plane, the so-called power plane. As a consequence, the power planes to three spheres in general position pass through a line, and four spheres in general position generate 6 power planes which pass through a common point, the power center. These geometric properties immediately imply that the cells 
                           C
                           
                              (
                              
                                 
                                    S
                                 
                                 
                                    i
                                 
                              
                              )
                           
                         are polyhedral. Obviously, if all spheres have the same radius, the power diagram reduces to the ordinary Voronoi diagram.

The concept of centroidal Voronoi tessellation can be extended to weighted centroidal Voronoi tessellation. For that, one prescribes a density function 
                           ρ
                           
                              (
                              p
                              )
                           
                         on the input domain (part of 3-space) and seeks a power diagram where each seed sphere center lies at the barycenter of its cell, and such that its radius is given by the density function. Using the variational formulation, one can extend this also to surfaces by replacing the integrand in Eq. (1) by 
                           ρ
                           
                              (
                              p
                              )
                           
                           
                              
                                 
                                    ‖
                                    p
                                    −
                                    
                                       
                                          s
                                       
                                       
                                          i
                                       
                                    
                                    ‖
                                 
                              
                              
                                 2
                              
                           
                         and thus generate hex-dominant patterns where the designer can steer the cell sizes (see  [5,6] and for an example, Fig. 6
                        ).

Irregular hexagonal structures occurring in nature can be easily thought to have grown around irregularly arranged centers. The similarity between Figs. 6 and 3 leads to the speculation that there are biological process with act on growing “cells” in a manner similar to the optimization of centroidal Voronoi cells.

A special case of power diagrams arises when the seed spheres are tangent to each other (and therefore are tangent to their respective cell boundaries). This amounts to tightly packing spheres which are centered at a surface. Such sphere packings provide us with a good way of designing support structures with well-shaped “round” cells. Schiftner et al.  [8] discussed the basic geometry and construction of such structures.


                        Computing sphere packings. When computing a sphere packing, we start with a reference surface 
                           Φ
                         and an initial triangle mesh approximating it. The vertices of that mesh move along 
                           Φ
                         during optimization, but the mesh combinatorics remain fixed. At each vertex 
                           
                              
                                 v
                              
                              
                                 i
                              
                           
                         we place a sphere of radius 
                           
                              
                                 r
                              
                              
                                 i
                              
                           
                        ; some of the radii may be fixed, but most will change during optimization. The centers of adjacent spheres are connected by an edge of the mesh. To achieve a sphere packing, the sum of radii of neighboring spheres must equal the distance of centers, so we minimize the objective function 
                           
                              (2)
                              
                                 
                                    
                                       f
                                    
                                    
                                       p
                                    
                                 
                                 =
                                 
                                    
                                       ∑
                                    
                                    
                                       
                                          edges
                                       
                                       
                                          
                                             v
                                          
                                          
                                             i
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             j
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          (
                                          
                                             len
                                          
                                          
                                             
                                                
                                                   (
                                                   
                                                      
                                                         v
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   −
                                                   
                                                      
                                                         v
                                                      
                                                      
                                                         j
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                2
                                             
                                          
                                          −
                                          
                                             
                                                
                                                   (
                                                   
                                                      
                                                         r
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         r
                                                      
                                                      
                                                         j
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                2
                                             
                                          
                                          )
                                       
                                    
                                    
                                       2
                                    
                                 
                                 .
                              
                           
                         To make sure that vertices stay close to the reference surface 
                           Φ
                         and boundary vertices remain close to the boundary 
                           ∂
                           Φ
                        , we use functions 
                           
                              
                                 f
                              
                              
                                 
                                    prox
                                 
                              
                           
                         and 
                           
                              
                                 f
                              
                              
                                 
                                    prox
                                 
                              
                              
                                 ∂
                              
                           
                         which penalize deviation of the mesh from the reference surface, and deviation of the mesh boundary from the reference surface’s boundary, respectively. The resulting optimization problem “
                           F
                           =
                           
                              
                                 f
                              
                              
                                 p
                              
                           
                           +
                           
                              
                                 λ
                              
                              
                                 1
                              
                           
                           
                              
                                 f
                              
                              
                                 
                                    prox
                                 
                              
                           
                           +
                           
                              
                                 λ
                              
                              
                                 2
                              
                           
                           
                              
                                 f
                              
                              
                                 
                                    prox
                                 
                              
                              
                                 ∂
                              
                           
                           →
                           min
                        ” is a nonlinear least squares problem which can be solved with a damped Gauss–Newton method; for details, especially for computationally effective approximations to 
                           
                              
                                 f
                              
                              
                                 
                                    prox
                                 
                              
                           
                         and 
                           
                              
                                 f
                              
                              
                                 
                                    prox
                                 
                              
                              
                                 ∂
                              
                           
                        , see  [8].


                        Geometric properties of sphere packings. We consider a mesh triangle with vertices 
                           
                              
                                 v
                              
                              
                                 i
                              
                           
                           
                              
                                 v
                              
                              
                                 j
                              
                           
                           
                              
                                 v
                              
                              
                                 k
                              
                           
                         and the pairwise tangent spheres 
                           
                              
                                 S
                              
                              
                                 i
                              
                           
                           ,
                           
                              
                                 S
                              
                              
                                 j
                              
                           
                           ,
                           
                              
                                 S
                              
                              
                                 k
                              
                           
                        . Then, the spheres’ tangent planes at their contact points intersect in the rotational axis of the triangle’s incircle. This implies that the incircles of the mesh faces form a packing in the sense that the circles of adjacent faces share the same contact point at the common edge; the mesh is therefore called a circle packing (CP) mesh. The support structure associated with a CP mesh has the incircle axes as its node axes. A CP mesh and its sphere packing, incircle packing and support structure, are illustrated in Figs. 7 and 8
                        
                        .


                        Design flexibility. There is numerical evidence for an intuitively plausible conjecture, namely that the natural correspondence between combinatorially equivalent CP meshes approximates a conformal mapping of surfaces (this is known to be true for circle packings in the plane). Employing results of conformal geometry (see e.g.  [9]), one then comes to the conclusion that optimization of a triangle mesh towards the CP property works if the reference geometry is a topological disk or topological sphere. Convergence (on closed surfaces or with fixed boundaries) is unlikely to happen in examples whose topology is different  [8]. A nice feature of CP meshes and the associated cell structures is the good control of the combinatorics. In a CVT-based cell structure, non-hexagonal cells may pop up in an undesired way, but one has the advantage of no topological restrictions (which also get weakened in CP-meshes if one adds freedom at boundaries).

Much of the work discussed so far can be extended to the design of cell packings whose cells exhibit a given anisotropy. Geometrically, anisotropy is expressed by the wish that the cells on the reference surface approximate the shapes of prescribed ellipses. When computing anisotropic cell packings we therefore try to repeat what we have done above, but with ellipsoids instead of spheres. Prescribing a field of ellipsoids on a reference geometry amounts to prescribing a 3×3 tensor field 
                           M
                           
                              (
                              x
                              )
                           
                         on it. In order to closely mimick the sphere case described above, we redefine the length of a vector 
                           y
                         attached to a vertex 
                           v
                         by 
                           
                              
                                 
                                    
                                       
                                          len
                                       
                                    
                                    
                                       v
                                    
                                 
                                 
                                    
                                       
                                          (
                                          y
                                          )
                                       
                                    
                                    
                                       2
                                    
                                 
                                 =
                                 
                                    
                                       y
                                    
                                    
                                       T
                                    
                                 
                                 ⋅
                                 M
                                 
                                    (
                                    v
                                    )
                                 
                                 ⋅
                                 y
                              
                           
                         and require that the cell centered at point 
                           v
                         shall be shaped according to the ellipsoid with equation 
                           
                              
                                 
                                    
                                       
                                          len
                                       
                                    
                                    
                                       v
                                    
                                 
                                 
                                    (
                                    x
                                    −
                                    v
                                    )
                                 
                                 =
                                 1
                              
                           
                         (this ellipsoid plays the role of a unit sphere in a local metric).

Numerical experiments confirm that both circle packing meshes and associated polyhedral packings can be extended towards anisotropic cell packings as follows. As mentioned above, the desired cell shapes are encoded in a tensor field 
                           M
                           
                              (
                              x
                              )
                           
                         which is seen as input. Typically one will prescribe a few tensors and obtain the field by interpolation (for tensor field design, see also Zhang et al.  [10]). Another way how to readily obtain tensor fields is to derive them from the curvatures of the surface. To get nice hexahedral cells, one would now start with a triangle mesh of regular combinatorics and optimize it so that its edges are of nearly equal length in these local metric defined by the tensor field. This is done by replacing Eq. (2) by 
                           
                              
                                 
                                    
                                       f
                                    
                                    
                                       p
                                    
                                 
                                 =
                                 
                                    
                                       ∑
                                    
                                    
                                       
                                          edges
                                       
                                       
                                          
                                             v
                                          
                                          
                                             i
                                          
                                       
                                       
                                          
                                             v
                                          
                                          
                                             j
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          (
                                          
                                             
                                                
                                                   
                                                      
                                                         len
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            i
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         (
                                                         
                                                            
                                                               v
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         −
                                                         
                                                            
                                                               v
                                                            
                                                            
                                                               j
                                                            
                                                         
                                                         )
                                                      
                                                   
                                                   
                                                      2
                                                   
                                                
                                                +
                                                
                                                   
                                                      
                                                         len
                                                      
                                                   
                                                   
                                                      
                                                         
                                                            v
                                                         
                                                         
                                                            j
                                                         
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         (
                                                         
                                                            
                                                               v
                                                            
                                                            
                                                               i
                                                            
                                                         
                                                         −
                                                         
                                                            
                                                               v
                                                            
                                                            
                                                               j
                                                            
                                                         
                                                         )
                                                      
                                                   
                                                   
                                                      2
                                                   
                                                
                                             
                                             
                                                2
                                             
                                          
                                          −
                                          
                                             
                                                
                                                   (
                                                   
                                                      
                                                         r
                                                      
                                                      
                                                         i
                                                      
                                                   
                                                   +
                                                   
                                                      
                                                         r
                                                      
                                                      
                                                         j
                                                      
                                                   
                                                   )
                                                
                                             
                                             
                                                2
                                             
                                          
                                          )
                                       
                                    
                                    
                                       2
                                    
                                 
                                 .
                              
                           
                         The desired sphere radii 
                           
                              
                                 r
                              
                              
                                 i
                              
                           
                           ,
                           
                              
                                 r
                              
                              
                                 j
                              
                           
                         are also subject to optimization. In order to control the size of cells and penalize cases of widely different sizes of neighboring cells we also add 
                           ∑
                           
                              
                                 
                                    (
                                    
                                       
                                          r
                                       
                                       
                                          i
                                       
                                    
                                    −
                                    
                                       
                                          r
                                       
                                       
                                          j
                                       
                                    
                                    )
                                 
                              
                              
                                 2
                              
                           
                         to the target functional. Fig. 9
                         illustrates an example. 
                           Remark
                           Shimada  [11] formulates the problem of finding anisotropic cells as an ellipsoid packing problem. Li et al.  [12] extended centroidal Voronoi diagrams on surfaces to the anisotropic case, but their discussion would go beyond the scope of our article.

In general, it is not possible to obtain a plate structure from a hex-dominant support structure by simply closing each cell by a planar face on either side: misalignment is inevitable (see Fig. 10
                        ). Certainly, there is a variety of options to arrive at a polyhedral cell packing by using more faces per cell. This is illustrated by Fig. 11
                         and by Fig. 4, right (for details on this bio-inspired structure, see Knippers et al.  [13]).

To design a polyhedral plate structure with hex combinatorics, one has to start from a polyhedral hex mesh. Their computation appears at first sight easy since such a mesh can be obtained by intersecting tangent planes at the vertices of a triangle mesh  [14]. A vertex of valence 6 in the triangle mesh thus generates a hexagon of the tangent plane mesh. This approach has various shortcomings, including numerical instability, high sensitivity and lack in aesthetics. An improvement can be achieved by slightly deviating from tangent planes based on a variational formulation  [15]. However, the problem is even harder: if one wants to have aesthetically pleasing faces, which cannot be convex in negatively curved areas of an underlying reference surface 
                           Φ
                         (see Fig. 12
                        , right), one should base the design of the hex mesh on a careful curvature analysis of 
                           Φ
                        , since the hexagons approximate the shapes of 
                           Φ
                        ’s Dupin indicatrices  [16]. The advantage of polyhedral meshes with planar faces and vertices of only valence 3 is that they always define plate structures of constant thickness; cf.  Fig. 12.

Arbitrary patterns on surfaces can be generated by parameterization algorithms. Parameterization is of central importance for texture mapping in computer graphics and thus it has been studied extensively. Its discussion within the present context would lead too far. However we would like to refer to work by Nieser et al.  [17] on hexagonal global parameterization, since we extensively deal with hexagonal patterns. That paper also contains a long list of references on parameterization.

Given mesh 
                           A
                         with vertices 
                           
                              
                                 a
                              
                              
                                 i
                              
                           
                        , can we find mesh 
                           B
                         with vertices 
                           
                              
                                 b
                              
                              
                                 i
                              
                           
                         so that they define a support structure? This associates a constraint with each edge 
                           
                              
                                 a
                              
                              
                                 i
                              
                           
                           
                              
                                 a
                              
                              
                                 j
                              
                           
                        , namely planarity of the quad 
                           
                              
                                 a
                              
                              
                                 i
                              
                           
                           
                              
                                 a
                              
                              
                                 j
                              
                           
                           
                              
                                 b
                              
                              
                                 j
                              
                           
                           
                              
                                 b
                              
                              
                                 i
                              
                           
                        . We have one degree of freedom for the plane of this quad. At a vertex of valence 
                           ν
                        , all these planes have to be co-axial, which amounts to 
                           ν
                           −
                           2
                         scalar constraint equations.

A support structure to a mesh all of whose vertices have valence 3 gives rise to one degree of freedom per face and one scalar condition per vertex. Leaving aside a possible boundary, the numbers 
                           v
                           ,
                           e
                         of vertices and edges respectively are related by 
                           2
                           e
                           =
                           3
                           v
                        , and thus we have 1.5 times more degrees of freedom than constraints and an optimization algorithm will work in general. We can even be more specific and try to get node axes as orthogonal as possible to the reference surface (see Figs. 13 and 26
                        ), or planes of the structure arranged so that they optimally block sun light for selected sun positions (Fig. 27). The formulation and implementation of the optimization algorithm follows the final optimization step suggested by Wang et al.  [18,19] for the harder case of quad structures.

The above count of degrees of freedom also shows that chances to compute a support structure to a quad mesh (without allowing to adapt the mesh) are much smaller, since we have 2 constraints for a vertex of valence 4, leading roughly to balance between the number of unknowns and degrees of freedom. This is not sufficient if the support structure has to satisfy additional constraints like orthogonality to a reference surface or blocking of sun. Fortunately, as discussed in the next section, the quadrilateral case is deeply rooted in differential geometry and this helps us to succeed.

Support structures associated with PQ meshes have been extensively studied from various points of view. One reason for this interest is that they represent a discrete version of “conjugate” surfaces and their higher-dimensional generalizations, and they have interesting relations with integrable systems  [20]. It turns out that a support structure defined by a PQ mesh 
                           A
                         is always spanned by parallel meshes 
                           A
                         and 
                           B
                        , meaning that 
                           B
                         is a PQ mesh combinatorially equivalent to 
                           A
                        , such that corresponding edges are parallel.

PQ meshes have also appeared in architecture; see e.g. Glymph et al.  [21]. From the viewpoint of geometry processing, they have been studied by  [2] (especially their circular and conical versions), and in  [1] (with regard to multi-layer constructions and support structures).

Zadravec et al.  [22] and Liu et al.  [23] study the design flexibility of PQ meshes by means of conjugate curve networks. Alternative ways of computing PQ meshes have been presented by  [24–26]. The abstract constraint manifold (“shape space”) of PQ meshes is investigated by  [27]. Yang et al.  [28] utilized the shape space for interactively exploring the shapes of PQ meshes.

It is worth mentioning that sphere packings (cf. Section  2.3) have been combined with PQ meshes, both for theory and practice—see e.g.  [29,30].


                        Design flexibility. Assuming that a PQ mesh 
                           A
                         is given, there is actually little design flexibility in finding a support structure associated with it. This problem is equivalent to finding a mesh 
                           B
                         parallel to 
                           A
                        . If 
                           A
                         has rectangular combinatorics with 
                           n
                           ×
                           m
                         faces, we have essentially 
                           n
                           +
                           m
                         degrees of freedom to do that. However one must bear in mind that certain special cases, like the conical and the circular meshes, possess canonical support structures with nice properties, and there is little to no freedom in choosing them. For a comprehensive overview of this topic we refer to  [1].

The collection of node axes of a quad-based support structure (cf. Fig. 2) has been the topic of discrete differential geometry  [31]. It also plays an important role in the optimization of support structures which have the function of shading or aiding in indirect lighting  [18,19]. Fig. 16 illustrates an example of this. Wang et al. in  [18] manage to deal with quad-based support structures by interpreting them as a discrete analog of a torsal parameterization of line congruences  [32], by first optimizing a congruence and subsequently extracting a torsal parameterization of it. These notions are explained in Figs. 14 and 15
                        
                        , but it would lead too far to discuss the details here. A result of this work is shown by Fig. 16
                        .


                        Relation of support structures with PQ meshes. Since meshes with planar faces are a topic of great interest, we discuss here the question whether it is important that a quad-based support structure is guided by a quad mesh with planar faces, or if the planarity of faces is not relevant. The answer depends on the circumstances. Quad-based support structures can always be defined by quad meshes with planar faces (at least locally, see below), but there is in general too little design freedom for such a mesh. So unless we must have a PQ mesh for some reason, it is usually better not to insist on planarity of faces if the only purpose of a quad mesh is to guide the support structure.

In order to estimate the design flexibility of a PQ mesh which can guide a given support structure, we do the following. Assume regular combinatorics and denote the node axes by 
                           
                              
                                 L
                              
                              
                                 i
                                 j
                              
                           
                        . We locally fit a PQ mesh with vertices 
                           
                              
                                 a
                              
                              
                                 i
                                 j
                              
                           
                         to them, by arbitrarily choosing a polyline with vertices 
                           
                              
                                 a
                              
                              
                                 i
                                 ,
                                 0
                              
                           
                           ∈
                           
                              
                                 L
                              
                              
                                 i
                                 ,
                                 0
                              
                           
                         (
                           i
                           =
                           0
                           ,
                           …
                           ,
                           n
                        ) and another polyline transverse to the first one by vertices 
                           
                              
                                 a
                              
                              
                                 0
                                 ,
                                 j
                              
                           
                           ∈
                           
                              
                                 L
                              
                              
                                 0
                                 ,
                                 j
                              
                           
                         (
                           j
                           =
                           0
                           ,
                           …
                           ,
                           m
                        )—see Fig. 17
                        . This data uniquely determines a PQ mesh with vertices 
                           
                              
                                 a
                              
                              
                                 i
                                 j
                              
                           
                           ∈
                           
                              
                                 L
                              
                              
                                 i
                                 j
                              
                           
                        , by requiring coplanarity of all quads 
                           
                              
                                 a
                              
                              
                                 i
                                 ,
                                 j
                              
                           
                           ,
                           
                              
                                 a
                              
                              
                                 i
                                 +
                                 1
                                 ,
                                 j
                              
                           
                           ,
                           
                              
                                 a
                              
                              
                                 i
                                 ,
                                 j
                                 +
                                 1
                              
                           
                           ,
                           
                              
                                 a
                              
                              
                                 i
                                 +
                                 1
                                 ,
                                 j
                                 +
                                 1
                              
                           
                        . Thus we have 
                           n
                           +
                           m
                           +
                           1
                         degrees of freedom for an 
                           n
                           ×
                           m
                         piece of quad mesh which is usually not sufficient to let the mesh follow a reference surface.


                        Beams of constant height. Depending on the application, additional geometric constraints may be imposed on a support structure. One such question concerns the geometric dimensions of the quads it is composed of: we ask if it is possible to generate support structures where all quads have constant height. The question if edges of meshes 
                           A
                           ,
                           B
                         with planar faces can be at constant distance was studied by  [1]. It turns out that 
                           A
                         must have special properties. For a general mesh 
                           A
                         lying on a discrete torsal parameterization we can always achieve parallel edges along one family of mesh polygons, but not for both. In this one family one can achieve constant height of the beams in exactly two cases which are illustrated by Fig. 18
                        .


                        Multiple layers and extension to 3D. So far we have considered only one layer of polyhedral cells which follow a surface. It is an obvious question to what extent the concepts above extend to multi-layer structures and polyhedral cell decompositions of volumes. For some this is easy: for instance, Voronoi cells are just well defined for arbitrary points in space. For other structures there is actually an extensive mathematical theory on their extension. For example, for many kinds of discrete surfaces the extension to 3D is summarized under “consistency of integrable systems”, see  [20]. A particular example can be seen in the paper on circular arc structures by Bo et al.  [33].

There are many ways to derive further structures from those we have discussed so far. The following paragraphs discuss some of them.


                     Resolving nodes and reciprocal structures. Given a support structure, one may resolve its node axes into cells either by an appropriate rotation or translation of the face planes of cells. An example is provided by Fig. 19
                     , where the nodes of valence 3 in the original structure become triangular cells. They are stable and easier to be manufactured from wooden elements than the original nodes. The resulting design shares some basic geometry with reciprocal frame structures. For a classical architectural discussion of reciprocal structures, see  [34]; a recent computational design approach is due to Song et al.  [35].

There is obviously a close connection between tilings of the plane on the one hand and patterns arising in reciprocal frame structures on the other (for another example based on a quad mesh, see Fig. 20
                     ). This fact is relevant for the computing of reciprocal frame structures, since one can, e.g., employ parameterization algorithms followed by optimization  [35]. It is not necessary to start the computation from a support structure with nodes of higher valence and resolve them. The challenge lies in providing the designer with handles to steer shape, orientation and size of the cells. This is part of our ongoing research and is connected to the computational design of shading structures.


                     Transfer of 3D textures. Support structures frequently consist of a regular arrangement of small elements of similar size and shape. This property suggests to employ 3D textures to generating designs which contain repeating small elements. An example is shown in Fig. 21
                     : it consists of many combinatorial cubes, and a 3D texture mapping has been employed to transfer a master element (contained in the unit cube) to each of them.


                     Cells bounded by developable surfaces. A sequence of planar quadrilaterals is a discrete developable surface. This interpretation motivates us to apply a refinement procedure according to  [2] to a support structure in order to convert it into a system of smooth developable surface strips: we iteratively apply splitting, smoothing, and optimization towards planar faces (see Fig. 22
                     ). Depending on how exactly the splitting is done, we end up with different patterns of developables— Fig. 22, top row, and Fig. 23
                     , left, shows one which follows the mesh polylines, while Fig. 22, bottom row, Fig. 23, right, and Fig. 24
                      exhibit one developable per cell. Applications for the former are structures built from plywood or sheet metal, whose manufacturing depends on the developability property. The latter is useful for applying known methods of lighting to curved building skins (see Fig. 24; for previous work combining shading with subdivision, but such that the shading system follows the edges of a mesh created by subdivision, see http://aedasresearch.com/features/view/all/method/envelope-design).

While all structures undergo statics analysis before construction starts, this is mostly done separately from architectural design. However in some cases it is possible to actively incorporate statics in the geometric shape optimization process. Already J. C. Maxwell in the 19th century observed relations between geometry and statics, by noting that the polyhedral surfaces which lie over a given cell decomposition of a planar domain are in correspondence with so-called reciprocal force diagrams associated with that decomposition (a continuous version of this discrete statement is the correspondence between the Airy potential surface of a shell on the one hand, and the stresses which occur in this shell on the other hand). Interestingly, this correspondence can also be utilized for exploring the shapes of polyhedral surfaces  [36].


                     Self-supporting masonry. A particular way of combining geometric modeling with statics is the thrust network method developed by  [37,38], which is attracting much interest in recent years. It is based on the following Safe Theorem proposed in the 1960s: whenever a masonry structure contains in its interior a fictitious network of compressive forces which at every node balances a lumped amount of gravity, that structure is stable (under the assumption that friction between individual bricks is sufficient to counteract shearing forces so that no sliding occurs). It turns out that in case the force network is triangular, this approach is equivalent to a finite element discretization of the method of Airy potentials used in continuum mechanics, and that this is because of Maxwell’s observation mentioned in the previous paragraph. The thrust network method is very attractive from the computational viewpoint, as has been demonstrated by Vouga et al.  [39] (see e.g. Fig. 26). These authors also study links with discrete differential geometry. The topic of self-supporting surfaces was taken further by recent work  [40–42]. In particular we mention that Panozzo et al.  [42] study brick-type hexagonal cell decompositions of self-supporting shapes which prevent sliding failure.


                     Stability of support structures. Geometric methods dealing with the statics of meshes and of support structures depend on mathematical abstractions. One such abstraction is that the structure is a mesh whose edges are connected by spherical joints in the vertices, so they can rotate freely against each other. Of course it is very unlikely that an arbitrarily chosen quad mesh is stable under these conditions, but on the other hand, by finding meshes which are, we provide structures which can be built with low moments in the nodes. Vouga et al.  [39] use methods of differential geometry to solve the problem of approximating a freeform shape by a quad mesh with planar faces which is in equilibrium in this sense.

Another abstraction suitable for structures like the ones shown in Fig. 1 is to consider an arrangement of quadrilaterals connected by hinges (in particular, support structures and reciprocal structures can be thought of in this way). We then consider rigidity and flexibility of this arrangement. The more rigid this hinge-quad arrangement is, the less effort has to be made to make the original structure stable.

It is well known that the individual points of a moving rigid body experience velocities of the form 
                        v
                        
                           (
                           x
                           )
                        
                        =
                        c
                        ×
                        x
                        +
                        d
                     , where vectors 
                        c
                        ,
                        d
                      encode the 6 degrees of freedom of motion  [32]. To describe the arrangement of faces 
                        
                           
                              f
                           
                           
                              1
                           
                        
                        ,
                        …
                        ,
                        
                           
                              f
                           
                           
                              N
                           
                        
                      we choose on each hinge which connects 
                        
                           
                              f
                           
                           
                              i
                           
                        
                      with 
                        
                           
                              f
                           
                           
                              j
                           
                        
                      two points 
                        
                           
                              x
                           
                           
                              i
                              j
                              ,
                              k
                           
                        
                      with 
                        k
                        =
                        1
                        ,
                        2
                     . In order to find out if this arrangement is flexible, we assign to each quad 
                        
                           
                              f
                           
                           
                              i
                           
                        
                      two vectors 
                        
                           
                              c
                           
                           
                              i
                           
                        
                        ,
                        
                           
                              d
                           
                           
                              i
                           
                        
                      such that the velocities experienced by 
                        
                           
                              x
                           
                           
                              i
                              j
                              ,
                              k
                           
                        
                      are the same regardless if they count as members of 
                        
                           
                              f
                           
                           
                              i
                           
                        
                      or of 
                        
                           
                              f
                           
                           
                              j
                           
                        
                     . This is expressed by smallness of the discrepancy 
                        
                           
                              
                                 
                                    δ
                                 
                                 
                                    i
                                    ,
                                    j
                                    ,
                                    k
                                 
                              
                              =
                              
                                 ‖
                                 
                                    
                                       v
                                    
                                    
                                       
                                          
                                             f
                                          
                                          
                                             i
                                          
                                       
                                    
                                 
                                 
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          i
                                          j
                                          ,
                                          k
                                       
                                    
                                    )
                                 
                                 −
                                 
                                    
                                       v
                                    
                                    
                                       
                                          
                                             f
                                          
                                          
                                             j
                                          
                                       
                                    
                                 
                                 
                                    (
                                    
                                       
                                          x
                                       
                                       
                                          i
                                          j
                                          ,
                                          k
                                       
                                    
                                    )
                                 
                                 ‖
                              
                              =
                              
                                 ‖
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 ×
                                 
                                    
                                       x
                                    
                                    
                                       i
                                       j
                                       ,
                                       k
                                    
                                 
                                 +
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 −
                                 
                                    
                                       c
                                    
                                    
                                       j
                                    
                                 
                                 ×
                                 
                                    
                                       x
                                    
                                    
                                       i
                                       j
                                       ,
                                       k
                                    
                                 
                                 −
                                 
                                    
                                       d
                                    
                                    
                                       j
                                    
                                 
                                 ‖
                              
                              .
                           
                        
                      Without going into details, we minimize the target function 
                        
                           
                              ∑
                           
                           
                              i
                              ,
                              j
                              ,
                              k
                           
                        
                        
                           
                              δ
                           
                           
                              i
                              ,
                              j
                              ,
                              k
                           
                           
                              2
                           
                        
                      under the side condition that 
                        ∑
                        
                           
                              
                                 ‖
                                 
                                    
                                       c
                                    
                                    
                                       i
                                    
                                 
                                 ‖
                              
                           
                           
                              2
                           
                        
                        +
                        
                           
                              
                                 ‖
                                 
                                    
                                       d
                                    
                                    
                                       i
                                    
                                 
                                 ‖
                              
                           
                           
                              2
                           
                        
                        =
                        1
                     . The side condition corresponds to our forcing the structure to move, and the magnitude of discrepancies exhibited by the minimal solution shows how far from flexible the structure is. Fig. 25
                      shows an example.

@&#DISCUSSION@&#

There are numerous applications of cell packing structures, many of which have already been encountered above, simply because it is in most cases not feasible to build a large structure in a monolithic way. One has to decompose it into smaller units, which naturally leads to some kind of cell packing. Obviously, the geometric concept of support structures as discussed in our paper is suitable for load-bearing structures and has been used for that in many real projects, especially steel/glass constructions. Cell packing structures, in particular those which are statically optimized (such as the ones in Fig. 26
                     ) may be built from opaque material like stone, leading to contemporary freeform designs from natural and maybe often locally available material.

A wide and not yet systematically studied application area is the use of cell packing structures for shading and indirect lighting (see Wang et al.  [18] and Figs. 16 and 27
                     ).


                     Conclusion and future work. We have provided an overview of architectural structures which are composed of polyhedral cells or closely related to them. As this is a wide topic, our paper is certainly biased towards work in Architectural Geometry, especially by researchers from geometry processing. We added new aspects at various places, having in mind the overall goal of combining form, function and fabrication into novel integrated design tools.

We have very briefly touched our own ongoing work on the theme of this paper, which develops around structurally sound shading systems based on reciprocal meshes in a design environment which leaves enough artistic freedom and helps to keep the structure as light and cost-effective as possible.

It is hoped that our discussion illustrated the necessity to carefully elaborate on the relationships between geometry, numerical analysis and aspects of statics, functionality and manufacturing. In this area, we have so far only scratched the surface, and there are plenty of possibilities for future research.

@&#ACKNOWLEDGMENTS@&#

This research was supported in part by the DFG-Collaborative Research Center, TRR 109, Discretization in Geometry and Dynamics, through grants I 705 N-26 and I 706-N26 of the Austrian Science Fund (FWF), and by the European Community’s 7th Framework Programme under grant agreement 286426 (GEMS). We would like to thank Dongming Yan for his help with the CVT examples and Chengcheng Tang for providing the hex mesh to Fig. 12.

@&#REFERENCES@&#

