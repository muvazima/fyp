@&#MAIN-TITLE@&#Application of probabilistic and fuzzy cognitive approaches in semantic web framework for medical decision support

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           Bayesian belief networks (BBNs) and fuzzy cognitive maps (FCMs), as dynamic influence graphs, were applied to handle the task of medical knowledge formalization for decision support.


                        
                        
                           
                           Both approaches were implemented in semantic web framework.


                        
                        
                           
                           For reasoning on these knowledge models, a general purpose reasoning engine, EYE, with the necessary plug-ins was developed in the semantic web.


                        
                        
                           
                           To assess the formal models’ performance, the UTI therapy problem was selected as a proof of concept example.


                        
                        
                           
                           The validation results showed that using probabilistic networks and fuzzy cognitive maps in semantic web framework is reliable and efficient for decision support tasks.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Knowledge representation

Bayesian networks

Fuzzy cognitive maps

Decision support

@&#ABSTRACT@&#


               
               
                  This study aimed to focus on medical knowledge representation and reasoning using the probabilistic and fuzzy influence processes, implemented in the semantic web, for decision support tasks. Bayesian belief networks (BBNs) and fuzzy cognitive maps (FCMs), as dynamic influence graphs, were applied to handle the task of medical knowledge formalization for decision support. In order to perform reasoning on these knowledge models, a general purpose reasoning engine, EYE, with the necessary plug-ins was developed in the semantic web. The two formal approaches constitute the proposed decision support system (DSS) aiming to recognize the appropriate guidelines of a medical problem, and to propose easily understandable course of actions to guide the practitioners. The urinary tract infection (UTI) problem was selected as the proof-of-concept example to examine the proposed formalization techniques implemented in the semantic web. The medical guidelines for UTI treatment were formalized into BBN and FCM knowledge models. To assess the formal models’ performance, 55 patient cases were extracted from a database and analyzed. The results showed that the suggested approaches formalized medical knowledge efficiently in the semantic web, and gave a front-end decision on antibiotics’ suggestion for UTI.
               
            

@&#INTRODUCTION@&#

Extensive medical guidelines are produced by medical committees in order to support physician in his/her decision making process, helping him/her which relevant therapy is proper to be applied to patient [1–3]. However because of the sheer volume and the rigid structure of such guidelines, it is very difficult for the physician to apply and strictly follow the workflow presented by such guidelines. It seems to be a challenge for decision support to create a computerized system that dynamically guides the physician through the workflow [4]. Besides, the need to adjust general guidelines to individual circumstances is becoming the future goal of medical research.

In our approach, we follow these principles by trying to model medical knowledge, while keeping its main characteristics of uncertainty in focus. From this necessity, we decide to use dynamic solutions (such as dynamic networks) rather than just follow the classical way of medical knowledge modeling with static structures such as decision trees. So, BBNs and FCMs, because of their natural dynamic properties, are selected to support modeling, knowledge integration of clinical practice guidelines and decision support in medicine.

Previous studies have shown that probabilistic networks and fuzzy logic based methodologies have been proposed for medical decision support [5–11]. Leibovici et al. tried to model bacterial infections by suggesting a causal probabilistic network for optimal treatment of these infections [5]. Kao and Li also proposed an optimal treatment model for bacterial infections with fuzzy information using influence diagrams [8]. These diagrams were used simultaneously for diagnostic reasoning and treatment planning, too [7,9,10]. On the other hand, FCM methodologies have been proved to be efficient medical approaches as far as decision-making and support are concerned [12–17].

In a previous study, Cheah and co-workers presented the advantages and limitations of FCMs and BBNs and proposed an FCM-BBN conversion process. Based on the comparison results, FCM has been shown to be simpler, more intuitive, more high-level and user-friendly, whereas BBN has been shown to be more expressive, powerful, formal and sound mathematically [18]. In their suggested methodology, BBN were constructed by FCM that acquires knowledge from domain experts. The results showed that the BBN constructed by FCM is similar, based on reasoning results, to the BBN constructed directly by specifying conditional probability tables of BBNs. The main potential of the cognitive map to Bayesian network conversion process is the reduction of knowledge acquisition time and effort [18,19].

The undertaken work is focused on knowledge representation and reasoning, using probabilistic and cognitive processes, implemented in semantic web framework, because an explicit knowledge with a clear semantic meaning is needed. The Notation3 [20.21] was selected as an open and semantic web language to implement the directed influence networks.

The primary objectives of the paper is to point out the construction, reasoning and usefulness of BBNs and FCMs implemented in N3 for medical knowledge modeling and decision support. A general purpose EulerSharp reasoning engine, (EYE [22]) and the necessary plug-ins which can perform the reasoning on these knowledge models were also developed to accomplish the objectives of this study. Both techniques were formalized in semantic web for modeling and reasoning processes, providing the advantages and disadvantages of each one for medical treatment suggestions, thus to drive our future work in a technical unification of them, to overcome the limitations of each one, and proposing a more efficient DSS method.

Our effort is focused on a decision support system (DSS), moving beyond classical clinical pathways. The application of probabilistic and fuzzy cognitive networks for DSS creates a path dynamically, based on the current and constantly changing clinical information of the patient, the environment and the guidelines.

The problem of urinary tract infection (UTI) in adult community, which is a common medical problem, was selected as a proof-of-concept example to examine the proposed approach. The problem of handling imprecision and uncertainty in the assignment of UTI treatment was tackled through the combined use of dynamic graphs and semantic web approaches. The therapy theories for UTI were formalized using the BBN and FCM formalisms and used by the DSS. The inference was performed by the general purpose First Order Logic reasoning engine EYE, which is released as open source software. The simulations of 55 real patients that were performed using the system implementation provide therapy recommendations for these patients. The results of both approaches emerged high accuracy for the examined cases as they were in fully agreement with the treatment guidelines. A comparative analysis between both proposed approaches was accomplished. The validation results showed that using probabilistic networks and fuzzy cognitive maps in semantic web framework is reliable and efficient for decision support tasks.

Seven more sections are included in this paper. Section 2 provides the main aspects of modeling medical knowledge using probabilistic and fuzzy cognitive maps, formalized in semantic web. Section 3 provides BBN and FCM built-ins and plug-ins in notation3. Section 4 describes the decision support theories in N3, whereas in Section 5 the development of DSS for UTI treatment is described. Validation analysis and comparison on the proof-of-concept decision support problem are both presented in Section 6, whereas the discussion and deriving conclusions are summarized in the last two sections.

Medical knowledge modeling starts with a standard procedure, by defining the problem to be modeled (as a domain) and all variables that represent it. Such modeling follows a goal-driven, need-oriented approach, meaning that each model will serve a certain purpose and is custom-made. Two basic models can be identified for the medical DSS. These are the diagnostic and therapeutic model.

Medical knowledge can be represented in several ways. Perhaps, the most commonly used is the clinical pathway (clinical guideline). It is quite easy and handy for the physician to use such guideline, because it provides a simple decision tree algorithm that could be followed in the diagnostic or therapeutic path to aid conclusions. The decision tree approach has some main limitations/disadvantages such as the possibility of duplication with the same sub-tree on different paths, the limitation to one output per attribute, and the inability to represent tests that refer to two or more different objects. Even a small change in input data can occasionally cause large changes in the decision tree. The absence of dynamicity in decision trees makes them a second choice for decision support tasks in the field of medicine.

Moreover, many guidelines are not so easy to be used in daily practice, due to the complexity of clinical cases and guideline itself, as physicians have to consider a large number of small chunks of information spread over large text documents. Therefore, there is a need to create a computerized decision support system (DSS) that aims to recognize the appropriate guidelines of a medical problem, to search for selector factors in the patient's medical record and to propose guided actions to physicians [7,23].

Based on this necessity, BBNs and FCMs were selected to handle with the task of medical knowledge modeling and formalization in semantic web for decision support. Due to their dynamic properties, such as the efficient modeling of complex cases, the ability to cope with uncertainty and missing information, the flexibility on changing variables, and the ability to include more knowledge without cost, BBNs and FCMs find wide acceptance in medicine.

A Bayesian network, belief network or directed acyclic graphical model is a probabilistic graphical model that represents a set of variables (nodes) and their conditional interdependencies. Nodes can represent medical observables, such as medical goals, therapies, examinations, clinical signs etc., while their directed interconnected arches can bear measures of quantitative or qualitative origin to describe the given relationship. The nodes are known with certainty or even uncertainty described by a subjective probability. Subjective probabilities express the degree of a person's belief, given a certain knowledge background of him. This notion of probability differs from the most used classical probability. The subjective or Bayesian probabilities can describe a value of belief to unique events that are not repeatable [24,25].

Modeling with BBN includes the identification of all variables (observables) and the definition of a clear conditional interdependence between variables. The conditional interdependencies of variables in the BBN mean that the variables which are not directly interconnected with an arch are not directly dependent on each other, yet they influence each other. This makes the BBN an ideal candidate for medical modeling. In order to simplify the modeling process, Naïve BBN with one parent and multiple child nodes is used.

The construction of a belief network follows a common set of guidelines such as:
                              
                                 1.
                                 Including all variables that are important for system modeling.

Using causal knowledge for assigning interconnections in the graph.

Using prior knowledge for specifying the conditional distributions (probabilities).

Designing a BN requires drawing arcs from cause variables to their immediate effects. In this way, causal relationships reveal the conditional dependencies and interdependencies. After constructing the network based on prior knowledge and data, appropriate algorithms [26,27] are used, in order to determine various probabilities from the network. Probabilistic inferences can be produced with the estimation of a certain probability of interest from the model.

After inference, the updated probabilities reflect the new levels of belief in (or probabilities of) all possible outcomes, coded in the model.

The beliefs originally encoded in the model are known as prior probabilities, because they are determined before any evidence about the situation becomes known. The beliefs computed after evidence, are known as posterior probabilities, because they reflect the levels of belief computed in light of new evidence.

To express a BBN model in semantic web, the following classes and properties are used:
                              
                                 
                                    
                                    
                                       
                                          
                                             @prefix log: <http://www.w3.org/2000/10/swap/log#>.
                                          
                                       
                                       
                                          
                                             @prefix owl: <http://www.w3.org/2002/07/owl#>.
                                          
                                       
                                       
                                          
                                             @prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>.
                                          
                                       
                                       
                                          
                                             @prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>.
                                          
                                       
                                       
                                          
                                             @prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:comment “class of things that are not the case”.
                                          
                                       
                                       
                                          
                                             e:T a rdfs:Class;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:comment “class of things that are the case”.
                                          
                                       
                                       
                                          
                                             e:biconditional a rdf:Property, e:Builtin;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:comment “builtin and object is conditional belief of first element of subject list given rest of subject list”;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:domain rdf:List;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:range xsd:decimal.
                                          
                                       
                                       
                                          
                                             e:boolean a rdf:Property;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:comment “to model a logical proposition”;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:domain rdfs:Resource;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:range [owl:oneOf (e:F e:T)].
                                          
                                       
                                       
                                          
                                             e:conditional a rdf:Property;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:comment “object is conditional belief of first element of subject list given rest of subject list”;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:domain rdf:List;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:range xsd:decimal.
                                          
                                       
                                    
                                 
                              
                           
                        

The e:biconditional built-in implements the Bayesian (probabilistic) inference based on the following Belief Calculus Model Theory:
                              
                                 
                                    
                                    
                                    
                                       
                                          
                                             Given truth-value function t and boolean decision/support variables X and Y
                                          
                                       
                                       
                                          
                                             t(X,Y)
                                             
                                             =
                                             
                                             t(X|Y)*t(Y)
                                          
                                          
                                             [A1] [conjunction]
                                          
                                       
                                       
                                          
                                             t(X,Y)
                                             
                                             =
                                             
                                             t(Y,X)
                                          
                                          
                                             [A2] [commutativity]
                                          
                                       
                                       
                                          
                                             t(X;Y)
                                             
                                             =
                                             
                                             t(X)
                                             
                                             +
                                             
                                             t(Y)-t(X,Y)
                                          
                                          
                                             [A3] [disjunction]
                                          
                                       
                                       
                                          
                                             t(X;∼X)
                                             
                                             =
                                             
                                             1
                                          
                                          
                                             [A4] [complement]
                                          
                                       
                                       
                                          
                                             t(∼X)
                                             
                                             =
                                             
                                             1-t(X)
                                          
                                          
                                             [A5] [negation]
                                          
                                       
                                       
                                          
                                             t(X|Y)
                                             
                                             =
                                             
                                             t(Y,X)/t(Y)
                                          
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             =
                                             
                                             t(Y|X)*t(X)/t(Y)
                                          
                                          
                                             [T1] [Bayes theorem]
                                          
                                       
                                       
                                          
                                             t(X|Y)
                                             
                                             =
                                             
                                             (t(∼Y;X)-t(∼Y))/t(Y)
                                          
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             is undefined when Y is the empty set F
                                          
                                          
                                             [T2] [no “ex falso quodlibet”]
                                          
                                       
                                       
                                          
                                             t(X)
                                             
                                             =
                                             
                                             t(X,Y)
                                             
                                             +
                                             
                                             t(X,∼Y)
                                          
                                          
                                             [T3] [total belief theorem]
                                          
                                       
                                       
                                          
                                             t(∼X,∼Y)
                                             
                                             =
                                             
                                             t(∼(X;Y))
                                          
                                          
                                             [T4] [De Morgan theorem 1]
                                          
                                       
                                       
                                          
                                             t(∼X;∼Y)
                                             
                                             =
                                             
                                             t(∼(X,Y))
                                          
                                          
                                             [T5] [De Morgan theorem 2]
                                          
                                       
                                    
                                 
                              
                           
                        

Additional semantic constraints are:
                              
                           
                        

For naive BBN, which is selected for all our current models, a more efficient nbbn-plugin has been developed. The rough design of this plug-in is presented in [28].

If it is needed to express some conditional dependency on duration (this could be the prevalence of lung cancer which is almost linear proportional to the years of smoking), it could be said:
                              
                                 
                                    
                                    
                                       
                                          
                                             {?R:beginningOfEpisode001?A.
                                          
                                       
                                       
                                          
                                             
                                             ?R:currentTime?D.
                                          
                                       
                                       
                                          
                                             
                                             
                                             (?D?A) math:difference?E.
                                          
                                       
                                       
                                          
                                             
                                             
                                             (?E “P10M”^^xsd:duration) math:difference?F.
                                          
                                       
                                       
                                          
                                             
                                             
                                             (?F “P15D”^^xsd:duration) math:quotient?G.
                                          
                                       
                                       
                                          
                                             
                                             ?G e:sigmoid?B}
                                          
                                       
                                       
                                          
                                             
                                             =>
                                          
                                       
                                       
                                          
                                             
                                             {({{:Sign003:assessedBy:Process003} e:boolean e:T}
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             {:Disease001 e:boolean e:T})
                                          
                                       
                                       
                                          
                                             e:conditional?B}
                                          
                                       
                                    
                                 
                              
                           
                        

At the current stand of modeling, we are only making limited use of this kind of dynamicity. The belief can be dynamically influenced by external factors.

The relationships between observables are quantified in each model. In Bayesian Networks each relationship needs to be determined with two (2) numbers. For being able to make proper calculation we need to know the probability in a relationship (A–B) for A given B and of course the “reverse” A given NOT B. Statistically these two numbers correspond to the sensitivity of A in relation to B and a-specificity (1-specificity) in relation to B. Obtaining these numbers might be challenging. Usually these numbers can be determined by a reliable source (clinical trial) or by using experts’ opinions, because they are not known in the medical literature.

Receiver operating characteristics (ROC) curves are commonly used methods to determine cut-off values of clinical tests using sensitivity and a-specificity from measurements. This method can be applied to determine (estimate) relationship between medical observables, by assuming that sensitivity and specificity are interdependent (which in fact is the case in most of the clinical cases). In order to work with ROC curves, it is necessary to estimate the strength of relationship between the observables in question. This can be done by using expert opinion through a number of limited option ranges given to the experts to select from. This limitation is necessary in order to ensure less variability between answers. Six ranges of strengths were introduced: high_positive, medium_positive, low_positive, low_negative, medium_negative and high_negative. These correspond to ranges of 0.95–1.0, 0.7–0.95, 0.51–0.7, 0.3–0.49, 0.05–0.3, 0–0.05 respectively. The value ranges can be translated into ROC curve strength which will define which curve to be used. If sensitivity is known, this can be easily mapped onto the corresponding curve, the requested a-specificity is calculated from the given x-axis value. When none of the values are known, the middle point of the curve can be used as reference to sensitivity and a-specificity. Estimating these values, with the above mentioned method, is a valid approach as long as the result is medically validated. Even if values are estimated, we will be updating this information based on data mining in order to reach higher accuracy.

FCMs constitute an extension of cognitive maps, inheriting the main aspects of fuzzy logic and neural networks. They are ideal causal knowledge acquiring tools with fuzzy signed graphs which can be presented as an associative single layer neural network [29]. They describe particular domains using nodes (variables, states, inputs, outputs) and signed fuzzy relationships between them. The fuzzy part allows us to have degrees of causality, represented as links between the nodes of these diagrams, also known as concepts. This structure establishes the forward and backward propagation of causality, admitting the knowledge base to increase when concepts and links between them are increased [30,31].

The fuzzy relations between concepts can be used to compute the strength of impact of these concepts. Similarly to the BBN, this method will also require a through identification of variables-concepts and their connections, however the relationship is described with numeric value in the range of [−1;1] instead of non-negative real number in the case of BBN [15].

FCM is usually defined as an order pair <C,W>, where C is the set of concepts and W is the connection matrix. Every label Ai
                           ∈
                           C its mapped to its activation value Ai
                           ∈[0,1], where 0 means no activation, and 1 means full activation [16].

The weights assume the values w
                           
                              ij
                           
                           ∈[−1,1], where the value of weight w
                           
                              ij
                           
                           =1 expresses the full positive and w
                           
                              ij
                           
                           =−1 full negative impact of ith causal-concept on jth effect-concept respectively. The intermediate values of weight refer to partial causality.

The construction of an FCM for the modeling of a medical decision making task is implemented in two steps:
                              
                                 1.
                                 The concepts (N) have to be provided by medical experts and/or guidelines that sufficiently describe the decision making task, including the input and the output knowledge. Each concept is modeled as a variable C
                                    
                                       i
                                    , i
                                    =1,2,…
                                    N that can take fuzzy or discrete values according to the problem data. The fuzzy values express the degree to which the concepts occur.

The connections between the concepts and their strengths should be assigned also by medical guidelines and/or physicians’ knowledge using if-then rules. These rules infer a fuzzy weight from a fuzzy set given in Table 1
                                    . These fuzzy sets express the degree to which a concept C
                                    
                                       j
                                     influences another concept C
                                    
                                       i
                                    , i
                                    =1,2,…
                                    N, j
                                    =1,2,…
                                    N.

In the case of FCMs, if-then rules are used to infer a fuzzy linguistic variable from a determined set, namely T{influence}, which associates the relationship between the two concepts and determines the grade of causality between the two concepts. These fuzzy sets express the degree to which a concept Cj influences another concept Ci, i
                           =1,2,…
                           N, j
                           =1,2,…
                           N. The linguistic variables proposed in [32] and used for modeling FCMs are: T(influence)
                           =
                           {negatively very strong, negatively strong, negatively medium, negatively weak, negatively very weak, zero, positively very weak, positively weak, positively medium, positively strong, positively very strong, positively very very strong}. These linguistic variables are transferred to the corresponding membership functions depicted in Table 1. These twelve triangular membership functions have been previously described in [15,16] showing their functionality. Using more fuzzy sets than 5 or 7, a better description on fuzzy influences among concepts could be assigned. The fuzzy influences among concepts are transferred to numerical values of connections, called weights W
                           
                              ij
                           , which are estimated by defuzzification of the aggregated, linguistically expressed, concept connections.

In semantic web, for the notion of N3, the weights W
                           
                              ij
                            are transferred to semantic weights, namely W
                           
                              ij
                           
                           semantic within the range [0,1] that depict the semantic value of numerical weight in N3 [16]. Each one of the FCM weights (concepts’ influences) presents a degree of belief from 0 to 1. Thus, using the EYE predicate fl:sigma the weight is formalized in N3.

The FCM reasoning process follows a number of steps till the system's equilibrium point. These steps can be found in previous works [16,29] and we briefly present the algorithm in Appendix A.

To express a FCM model in semantic web, the following classes and properties are used:
                              
                                 
                                    
                                    
                                       
                                          
                                             ### ontology
                                          
                                       
                                       
                                          
                                             fl:mu a rdf:Property;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:domain rdf:List;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:range xsd:decimal;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:comment “to express fuzzy set membership e.g. (:x:C) fl:mu 0.8 says that:x a:C to a degree of 0.8”.
                                          
                                       
                                    
                                 
                              
                           
                        


                           fl:mu is an rdfs:property referring to express fuzzy subsethood for each node-concept of the FCM model; (it is also an Euler built-in). An example is given:


                           (:x:C) fl:mu 0.8
                        

says that the concept C (object)belong to the subject-entity x (:x a:C)to a degree of 0.8.In FCM model, the concept C (object) (:C) participates in patient state (describing an entity) to a degree of 0.8 and is activated with this value.
                              
                                 
                                    
                                    
                                       
                                          
                                             fl:sigma a rdf:Property;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:domain
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdf:List;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:range xsd:decimal;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:comment “to express fuzzy subsethood e.g. (:C:D) fl:sigma 0.9 says that:C rdfs:subClassOf:D to a degree of 0.9”.
                                          
                                       
                                    
                                 
                              
                           
                        


                           fl:sigma is an rdfs:property referring to express fuzzy set membership (that described the strength of relationship), between the interconnected concepts of FCM model; (it is euler built-in). An example is given:


                           (:x:C) fl:sigma 0.8
                        

says that the influence from subject xto object C 
                           (:x a:C) has a degree of 0.8.
                              
                                 
                                    
                                    
                                       
                                          
                                             fl:pi a rdf:Property, e:Builtin;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:domain rdf:List;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:range xsd:decimal;
                                          
                                       
                                       
                                          
                                             
                                             
                                             
                                             
                                             
                                             
                                             rdfs:comment “builtin to calculate fuzzy set membership according to Elpiniki Papageorgiou method”.
                                          
                                       
                                    
                                 
                              
                           
                        


                           fl:pi is an euler built-in rdfs:property to express the propagation algorithm of FCM (inference algorithm described in Appendix A).

The BBN and FCM formalization and reasoning was implemented in Notation3 (N3), using plug-ins and built-ins of the inference engine, called EYE (Euler YAP Engine). N3 is a shorthand non-XML serialization of Resource Description Framework models [20]. This language has been selected for its high readability and ability to efficiently represent medical knowledge. It is also a part of the semantic web stack as an alternative RDF serialization format, next to the RDF/XML format [21]. In comparison with RDF, where information is simply a collection of statements, each with a subject, verb and object, N3 has the ability to represent information as an RDF triple:
                        
                           
                              
                              
                                 
                                    
                                       :patient
                                       
                                       :has
                                       
                                       :fever
                                    
                                 
                              
                           
                        
                     
                  

An RDF example describing the “cystitis” diagnosis, translated in N3, is given as follows, where the triples are clearly assigned.
                        
                           
                              
                              
                                 
                                    
                                       @Prefix MUI:
                                       <
                                       http://www.urologie.eu/disease#>
                                    
                                 
                                 
                                    
                                       
                                          :Fever
                                       
                                       :
                                          Symptom
                                       
                                       
                                       
                                          :Cystitis.
                                       
                                    
                                 
                              
                           
                        
                     
                  

Models are written in a form of T-rules which simplifies the modeling technique by expressing relationships with True or False structures and by defining believes to them [21,33]. In a T-rule, premise is the subject and the conclusion is the complement (object). The sign “=>” is a common predicate expression of the T-rule, called implies. An example of N3 T-rule is given:

If the patient is pregnant Then TMP/SMX antibiotic treatment is inadequate for UTI (cystitis) caused by E. coli.
                        
                           
                              
                              
                                 
                                    
                                       {(?P:Pregnancy) fl:mu 1}
                                       
                                       =>
                                       
                                       {(:UrinaryTractInfection:TMP_SMX) fl:sigma 0}.
                                    
                                 
                              
                           
                        
                     
                  

Furthermore, the rules expressing medical knowledge [37] make use of built-ins of the EYE reasoner which is used as a fundamental reasoner engine in the project framework (see Section 3.1).

The Web Ontology Language (OWL) is a markup semantics language and is used for sharing ontologies on the World Wide Web [34]. OWL is developed as an extension of RDF vocabulary [33] and is used in the proposed decision support process.

EYE (it is an acronym for “Euler YAP Engine”) [22] is an inference engine with backward-forward-backward chaining that allows “loop-checking” to ensure the processing of all data, to reason with data, queries and rules in N3. The backward-forward-backward chaining is realized via an underlying Prolog backward chaining, a forward meta-level reasoning and a backward proof construction. We choose to use EulerSharp on the basis of its historical performance
                           1
                        
                        
                           1
                           http://eulersharp.sourceforge.net/2003/03swap/dtb-2010.txt
                        , frequent updates
                           2
                        
                        
                           2
                           http://eulersharp.sourceforge.net/DONE
                        , plugins and the possibility of integrating new features
                           3
                        
                        
                           3
                           http://eulersharp.sourceforge.net/2003/03swap/euler-builtins.html
                         (built-in).

EYE is the latest implementation of the Euler proof engine and is released as open source on http://eulersharp.sourceforge.net.

In the case of BBN modeling, the following EYE predicates are used:
                           
                              •
                              
                                 e:conditional is an EYE built-in predicate to express conditional dependency: the object is conditional belief in the first element of the subject list given the rest of the subject list (description see in [28]),


                                 e:biconditional is an EYE built-in predicate to calculate conditional dependency: the object is conditional belief in the first element of the subject list given the rest of the subject list,


                                 e:roc is an EYE built-in to simulate the Receiver Operating Characteristics (ROC) curve based on an input of sensitivity and/or a-specificity. A specific value that represents the strength is used to determine the appropriate roc curve. This enables the rapid calculation of either the sensitivity or the a-specificity value by plotting one of them on the curve. The calculation of the curve is made based on the following formula; e.g. knowing sensitivity, a-specificity
                                 
                                 =
                                 
                                 1-(1-exp(-K*(S-1)))*(1
                                 
                                 +
                                 
                                 exp(K))/(1
                                 
                                 +
                                 
                                 exp(-K*(S-1)))/(1-exp(K)) where S is the sensitivity and K is the strength value.

In the case of FCM modeling the following EYE predicates are used with the Euler built-in:
                           
                              •
                              
                                 fl:mu is an EYE predicate to express fuzzy set membership, e.g. (:x:C) fl:mu 0.8 says that:x is a:C to a fuzzy membership degree of 0.8.


                                 fl:sigma is an EYE predicate to express fuzzy subsethood e.g. (:C:D) fl:sigma 0.9 says that:C is a rdfs:subClassOf:D to a degree of 0.9.


                                 fl:pi is an EYE built-in rdf:Property to express the reasoning process of FCM. fl:pi is a built-in supplied via plug-in [34]. In FCM rules [35] and reasoning [34], the main aspects of programming FCM approach in N3 are presented.

The observables and therapy theories are included in an ontology repository established for the project needs, namely DCO [38,39]. DCO is updated continuously in order to contain all relevant clinical concepts.

In the context of BBNs and FCMs, the formalized medical knowledge is represented with ontological concepts and semantic relationships using N3 and logic-rules (T-rules) format. Each attribute was aligned with a concept of DCO ontology. The concepts were manually standardized with the DebugIT core ontology (DCO) of Infectious Diseases [16].

The construction of the dynamic graphs for the medical knowledge modeling is implemented in two steps:

At the first step, the variables of the domain problem (observables) (N) have to be provided by medical experts and/or guidelines that sufficiently describe the decision making task, including the input and the output knowledge. Each observable is modeled as a concept variable C
                        
                           i
                        , i
                        =1,2,…
                        N that can take probabilistic or fuzzy values according to the problem data. For example, in the case of FCMs, the fuzzy values express the degree to which the concepts occur.

The concepts Ci are categorized in four categories according to the variable they represent; Observables – O
                        
                           i
                         (usually represent symptoms/signs and/or lab exams), Conditions – C
                        
                           i
                         which are related observables defined around the domain of a therapeutic process and might be for example indications, contraindications, relative indications, relative contraindications, Diagnosis – Di (represent the type of diagnosis) and Therapy – Ti (represent the suggested therapy for specific patient case).

At the second step, the connections (probabilistic and fuzzy relationships) between the concepts are assigned by medical guidelines and/or physicians’ knowledge. Conditional probability tables and fuzzy rules, that describe the conditional and fuzzy relationships between concepts, are used for BBNs and FCMs respectively. The quantification of these relationships is based on clinical studies and/or experts’ opinion and is accomplished using the BBN and FCM methodologies (as described in Sections 2.1 and 2.2) (see Fig. 1
                        ).

Two types of decision support theory N3 files are currently used by the proposed system: therapy theory N3 files and observable theory N3 files. In the case of BBN, the BBN formalism is used to describe the relationship between the evidence and the hypothesis as depicted in Figs. 2 and 3
                     
                     . In the case of FCMs, the therapy theory N3 file is the file which shows the interactions between observables and therapies, whereas the observable theory N3 files are the files described the initial state of the patient and the rules that were assigned to support the suggestion of the antibiotic therapies [16]. As the decision support theories in N3 for FCM have been previously described in [15,16], (https://livelink.agfa.net/Livelink/livelink.exe/overview/32401811), in this section we mainly present the decision support theories for BBN.

The therapy theory N3 files (Fig. 2) capture the conditional dependency between the therapy hypothesis (of needing to administer) Amoxicillin and the evidences (limited in this example extract to) Leukopenia, HIV and AllergyToAmoxicillin.

Informally the theory can be read as:

For Leukopenia:
                           
                              •
                              If amoxicillin was administered 35% of the patients would (already) experience leukopenia.

If Amoxicillin was not administered 1.25% of the patients would experience Leukopenia (the prevalence).

This indicates that Amoxicillin is a preferred treatment for patients that also experience Leukopenia because the sensitivity is higher than the a-specificity.

For HIV:
                           
                              •
                              If Amoxicillin was administered 10% of the patients would (already) be HIV positive.

If Amoxicillin was not administered 0.5% of the patients would be HIV positive (the prevalence).

This indicates that Amoxicillin is also promoted for patient that is HIV positive because the sensitivity is higher than the a-specificity.

For AllergyToAmoxicillin:
                           
                              •
                              If Amoxicillin was administered 0% of the patients would (already) be allergic to Amoxicillin, i.e. it is a contra-indication.

If Amoxicillin was not administered 0.5% of the patients would be allergic to Amoxicillin (the prevalence).

This indicates that Amoxicillin is a preferred treatment for patients that are allergic to Amoxicillin because the sensitivity is lower than the a-specificity. The sensitivity is actually 0% so it is prohibited in that case.

Note that these provided sensitivity and a-specificity numbers are based on expert opinion.

In order for the system to present a list of observables that are relevant to investigate next, i.e. knowing the result will change the belief in the therapies, observable theories are constructed (Fig. 3).

Informally the theory can be read as:

For Amoxicillin:
                           
                              •
                              If Leukopenia is examined (knowing the result) would give an indication for the use of Amoxicillin. This influence has the value of?belief, the value being calculated by the DSS.

If Leukopenia is not examined (not knowing the result) would still give an indication for the use of Amoxicillin. This influence has the value of?belief being calculated by the DSS and then the a-specificity is calculated using the ROC-curve.

For HighCost:
                           
                              •
                              If Leukopenia is examined a small cost is associated to it (60%).

If Leukopenia is not examined the cost is neutral (50%).

The indication belief value P(Indication|E
                        
                           n+1) is calculated as:
                           
                              (1)
                              
                                 
                                    
                                       
                                          
                                             
                                                P
                                                (
                                                I
                                                n
                                                d
                                                i
                                                c
                                                a
                                                t
                                                i
                                                o
                                                n
                                                
                                                   
                                                      
                                                         E
                                                         
                                                            n
                                                            +
                                                            1
                                                         
                                                      
                                                   
                                                
                                                )
                                             
                                          
                                          
                                             
                                                =
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  P
                                                                  
                                                                     
                                                                        
                                                                           
                                                                              E
                                                                              ¯
                                                                           
                                                                           
                                                                              n
                                                                              +
                                                                              1
                                                                           
                                                                        
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    Λ
                                                                                 
                                                                                 
                                                                                    i
                                                                                    =
                                                                                    0
                                                                                 
                                                                                 n
                                                                              
                                                                              
                                                                                 E
                                                                                 i
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  ⋅
                                                                  
                                                                     
                                                                        1
                                                                        −
                                                                        2
                                                                        P
                                                                        
                                                                           
                                                                              T
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          Λ
                                                                                       
                                                                                       
                                                                                          i
                                                                                          =
                                                                                          0
                                                                                       
                                                                                       n
                                                                                    
                                                                                    
                                                                                       E
                                                                                       i
                                                                                    
                                                                                    ∧
                                                                                    
                                                                                       E
                                                                                       
                                                                                          n
                                                                                          +
                                                                                          1
                                                                                       
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  +
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  P
                                                                  
                                                                     
                                                                        
                                                                           E
                                                                           
                                                                              n
                                                                              +
                                                                              1
                                                                           
                                                                        
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    Λ
                                                                                 
                                                                                 
                                                                                    i
                                                                                    =
                                                                                    0
                                                                                 
                                                                                 n
                                                                              
                                                                              
                                                                                 E
                                                                                 i
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  ⋅
                                                                  
                                                                     
                                                                        1
                                                                        −
                                                                        2
                                                                        P
                                                                        
                                                                           
                                                                              T
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          Λ
                                                                                       
                                                                                       
                                                                                          i
                                                                                          =
                                                                                          0
                                                                                       
                                                                                       
                                                                                          n
                                                                                          +
                                                                                          1
                                                                                       
                                                                                    
                                                                                    
                                                                                       E
                                                                                       i
                                                                                    
                                                                                    ∧
                                                                                    
                                                                                       
                                                                                          E
                                                                                          ¯
                                                                                       
                                                                                       
                                                                                          n
                                                                                          +
                                                                                          1
                                                                                       
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       
                                          
                                              
                                          
                                          
                                             
                                                
                                                   
                                                      
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        P
                                                                        
                                                                           
                                                                              
                                                                                 
                                                                                    T
                                                                                    
                                                                                       
                                                                                          Λ
                                                                                       
                                                                                       
                                                                                          i
                                                                                          =
                                                                                          0
                                                                                       
                                                                                       n
                                                                                    
                                                                                    
                                                                                       E
                                                                                       i
                                                                                    
                                                                                    ∧
                                                                                    
                                                                                       E
                                                                                       
                                                                                          n
                                                                                          +
                                                                                          1
                                                                                       
                                                                                    
                                                                                    −
                                                                                    P
                                                                                 
                                                                              
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          T
                                                                                          
                                                                                             
                                                                                                Λ
                                                                                             
                                                                                             
                                                                                                i
                                                                                                =
                                                                                                0
                                                                                             
                                                                                             n
                                                                                          
                                                                                          
                                                                                             E
                                                                                             i
                                                                                          
                                                                                       
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                                  +
                                                               
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  
                                                                     
                                                                        P
                                                                        
                                                                           
                                                                              T
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          Λ
                                                                                       
                                                                                       
                                                                                          i
                                                                                          =
                                                                                          0
                                                                                       
                                                                                       n
                                                                                    
                                                                                    
                                                                                       E
                                                                                       i
                                                                                    
                                                                                    ∧
                                                                                    
                                                                                       
                                                                                          E
                                                                                          ¯
                                                                                       
                                                                                       
                                                                                          n
                                                                                          +
                                                                                          1
                                                                                       
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                        −
                                                                        P
                                                                        
                                                                           
                                                                              T
                                                                              
                                                                                 
                                                                                    
                                                                                       
                                                                                          Λ
                                                                                       
                                                                                       
                                                                                          i
                                                                                          =
                                                                                          0
                                                                                       
                                                                                       n
                                                                                    
                                                                                    
                                                                                       E
                                                                                       i
                                                                                    
                                                                                 
                                                                              
                                                                           
                                                                        
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

where
                           
                              
                                 
                                 
                                 
                                    
                                       
                                          
                                             
                                                P
                                                
                                                   
                                                      
                                                         E
                                                         
                                                            n
                                                            +
                                                            1
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  Λ
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  0
                                                               
                                                               n
                                                            
                                                            
                                                               E
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       The probability that the result of the next examination would be true given the currently known examination results, i.e. the predication that the next examination result is true.
                                    
                                    
                                       
                                          
                                             
                                                P
                                                
                                                   
                                                      
                                                         
                                                            E
                                                            ¯
                                                         
                                                         
                                                            n
                                                            +
                                                            1
                                                         
                                                      
                                                      
                                                         
                                                            
                                                               
                                                                  Λ
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  0
                                                               
                                                               n
                                                            
                                                            
                                                               E
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       The probability that the result of the next examination would be false given the currently known examination results, i.e. the predication that the next examination result is false.
                                    
                                    
                                       
                                          
                                             
                                                P
                                                
                                                   
                                                      T
                                                      
                                                         
                                                            
                                                               
                                                                  Λ
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  0
                                                               
                                                               n
                                                            
                                                            
                                                               E
                                                               i
                                                            
                                                            ∧
                                                            
                                                               E
                                                               
                                                                  n
                                                                  +
                                                                  1
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       The belief in the therapy given the currently known examination results and if the result of the next examination would be true.
                                    
                                    
                                       
                                          
                                             
                                                P
                                                
                                                   
                                                      T
                                                      
                                                         
                                                            
                                                               
                                                                  Λ
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  0
                                                               
                                                               
                                                                  n
                                                                  +
                                                                  1
                                                               
                                                            
                                                            
                                                               E
                                                               i
                                                            
                                                            ∧
                                                            
                                                               
                                                                  E
                                                                  ¯
                                                               
                                                               
                                                                  n
                                                                  +
                                                                  1
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       The belief in the therapy given the currently known examination results and if the result of the next examination would be false.
                                    
                                    
                                       
                                          
                                             
                                                P
                                                
                                                   
                                                      T
                                                      
                                                         
                                                            
                                                               
                                                                  Λ
                                                               
                                                               
                                                                  i
                                                                  =
                                                                  0
                                                               
                                                               n
                                                            
                                                            
                                                               E
                                                               i
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       The belief in the therapy given the currently known examination results.
                                    
                                 
                              
                           
                        
                     

And thus:
                           
                              
                                 
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      1
                                                      −
                                                      2
                                                      P
                                                      
                                                         
                                                            T
                                                            
                                                               
                                                                  
                                                                     
                                                                        Λ
                                                                     
                                                                     
                                                                        i
                                                                        =
                                                                        0
                                                                     
                                                                     n
                                                                  
                                                                  
                                                                     E
                                                                     i
                                                                  
                                                                  ∧
                                                                  
                                                                     E
                                                                     
                                                                        n
                                                                        +
                                                                        1
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       The information value of knowing that the next examination result is true.
                                    
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      1
                                                      −
                                                      2
                                                      P
                                                      
                                                         
                                                            T
                                                            
                                                               
                                                                  
                                                                     
                                                                        Λ
                                                                     
                                                                     
                                                                        i
                                                                        =
                                                                        0
                                                                     
                                                                     
                                                                        n
                                                                        +
                                                                        1
                                                                     
                                                                  
                                                                  
                                                                     E
                                                                     i
                                                                  
                                                                  ∧
                                                                  
                                                                     
                                                                        E
                                                                        ¯
                                                                     
                                                                     
                                                                        n
                                                                        +
                                                                        1
                                                                     
                                                                  
                                                               
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                       The information value of knowing that the next examination result is false.
                                    
                                 
                              
                           
                        
                     

Note in Eq. (1) that “the predication that the next examination result is false” is multiplied with “the information value of knowing that the next examination result is true” because if we can predict the result of the examination upfront there is no need to perform the examination anymore, i.e. we want to know the information value of deviating from the predicted results.

Note too that this indication belief is some kind of value of mutual information between the examination and the therapy. Based on these kinds of theories the system will infer the belief in the therapy hypothesis given the selected patient observables.

The DSS calculates the therapy recommendations and ranks the suggested medical procedures. It receives the relevant patient state on input from the clinical information system (CIS) and therefore doesn’t need access to the CIS data store. The CIS contains the patient records from the participating hospital. Due to privacy issues DSS systems must either operate within the hospital (in which case a direct access to the CIS might be possible) which would limit and forge the purpose of semantic data interoperability, or outside with full conformity of patient data safety. Since our goal is to employ semantic tools on multiple, independent sources for data aggregation and interoperability, the DSS might not be able to directly access the CIS. It requires the introduction of anonymizing services (e.g. a middle tier, anonymized data storage, the so called clinical data repository (CDR) containing only anonymized mirrors of the clinical data. The DSS operates on a knowledge base that contains the rules necessary to process patient information and makes decisions.

The treatment of urinary tract infection (UTI) caused by e.coli has been selected as proof-of concept example. The task of UTI treatment management in adult community is an important and complex task that demands a special attention. Urinary tract infection (UTI) is a bacterial infection that affects individuals with normal urinary tracts from both structural and functional perspective [39]. UTI can be classified as uncomplicated (patients with urinary tracts that are normal from both structural and functional perspective) and complicated (that does not fit the uncomplicated category) [41,42]. Uncomplicated UTIs are most common in young, sexually active women (due to shorter urethra) as well as in hospitalized patients. Because women have a shorter urethra than men, they are 14-times more likely to suffer from an UTI [41]. Escherichia coli (E. coli) is the most common cause of uncomplicated UTI and accounts for approximately 75–95% of all infections [40].

Treatment of UTIs ranges from conservative therapy (abundant fluid intake) to antibiotic therapy. There are several medications available for oral therapy of such as trimethoprim (TMP), cephalosporine, nitrofurantoin, fluoroquinolone. Trimethoprim (also in combined form with Sulfametoxazol, aka TMP/SMX) is one widely used antibiotic for UTIs and suggested as first line therapy. Fluoroquinolones (2nd and 3rd generation drugs such as levofloxacin or ciprofloxacin) should be preserved (as backup) for patients with allergies or with underlying diseases that predispose to serious condition as well as for patients where first line drugs fail.

Trimethoprim-sulfamethoxazole (TMP/SMX) for 3 days should be considered the current standard therapy. Trimethoprim alone and ofloxacin are equivalent to TMP-SMX. Fluoroquinolones are more expensive than TMP-SMX and trimethoprim, and, to postpone emergence of resistance to these drugs, we do not recommend them as initial empirical therapy except in communities with high rates of resistance (i.e., .10–20%) to TMP-SMX. Nitrofurantoin and fosfomycin may become more useful as resistance to TMP-SMX and trimethoprim increase [42].

The treatment of UTIs and the appropriate selection of antibiotics require the combinatorial analysis of a number of parameters, symptoms, adverse events, indications and contraindications, stand as decision variables [42]. Thus, due to the complexity and vagueness involved in the decision making process, physicians need some level of decision support.

The therapy model has been designed with the contribution of medical guidelines/treatment suggestions [43] 
                        [44] and reasoned following the plug-ins described in Section 3. The medical guidelines for the treatment of uncomplicated UTI were formalized into BBN and FCM therapy models which used to model the medical knowledge concerning therapy. The formal models include a number of concepts (observables/conditions), therapies and relationships among them. The currently presented formalisms relate solely to the domain of UTI as it has been chosen as proof-of-concept example.

Both models consist of 44 nodes, which represent concepts (observables/conditions), and eight therapy (decision) concepts that define the antibiotics for UTI treatment caused by E. coli in adult community as described from AAFP guidelines. Table B1 and Table B2 in Appendix B depict the observables and therapy concepts of both the therapeutic models.

The concepts within this domain are observables/conditions from the scope of a therapy (e.g. indications, contra-indications, relative indications, relative contra-indications etc.). The set of nodes represents the patient's profile, indicating the likely contraindications, side effects or adverse events that a drug/therapy have on patient's organism and harm his health.

In our project, we worked with the domain ontology of Infectious Diseases DCO (DebugIT Core Ontology) [39]. DCO serves as the core component of the interoperability platform for the DebugIT project
                           4
                        
                        
                           4
                           DebugIt: The DebugIT project is a large -scale integrating project funded within the 7th EU Framework Program (FP7).
                        .


                        An example for the formal BBN and FCM Models
                     

Due to aim of this study to present a generic approach on formalizing medical knowledge and in order to avoid the complexity to present the whole development of the formal therapy model, the modeling process for the treatment of UTI with Nitrofurantoin (Figs. 4 and 5
                        
                        ) is demonstrated by using Nitrofurantoin therapy model as an example.

The modeling of negative and positive effects for this example therapy model is presented in Figs. 6 and 7
                        
                         respectively.

In the case of the formal FCM model, the description of the above mentioned relationships in terms of membership and subsethood are required using built-ins (see Section 3.2), Where fl:sigma expresses a “subsethood” between the 2 variables (therapy and observable) which can be interpreted as how much the observable is contained in the set of therapy. Note that specificity values are not required here.

In order to apply this knowledge we also need to define membership relations, meaning that we have to tell the system about the actual symptom (e.g. neuritis or pregnancy) with regard to a case, which could be one patient, therefore:
                           
                              
                                 
                                 
                                    
                                       
                                          (:patient001:Neuritis) fl:mu 0. (i.e. patient has NO neuritis)
                                       
                                    
                                    
                                       
                                          (:patient001:Pregnancy) fl:mu 1. (i.e. patient IS pregnant)
                                       
                                    
                                 
                              
                           
                        
                     

All the input concepts take three discrete values (0, 0.5 or 1). If the patient does not present one or more diseases, conditions, allergies etc. (assigned as input concepts), then the initial values of input concepts are zero (0), in the case we do not have knowledge of a specific patient condition (or missing data) then the initial value of its concept is 0.5. In other cases, the initial values of concepts are one (1) [15].

In order to assess the formal models performance, fifty five patient cases on UTI, caused by E. coli, were extracted from a database and analyzed. These cases were selected from a data set of anonymous patients at General Hospital of Larisa, Greece. More specifically, these fifty five (55) patients were diagnosed with uncomplicated UTI, cystitis, caused by pathogen of E. coli. Out of this data set, 48 patients were female and 7 male, with an average age of 48±16 (average±stdev). Four out of the above fifty five patients had allergy to Ciprofloxacin, two had allergy to Nitrofurantoin, three had allergy to Amoxicillin, and three were in condition Glucose Metabsorption. Five out of forty eight female patients were pregnant. Table C1 in Appendix gathers the examined cases.

These cases were selected by doctors/urologists from a 2009-year database of patients diagnosed with different types of UTIs and a medical intervention was given for each one. The criteria followed for the selection were the specific type of the disease, which was UTIs, the type of pathogen, which was E. coli, the treatment antibiotic for first or second line therapy, and some conditions, such as known allergies (allergies to TMP/SMX, Fluoroquinolones, Amoxicillin), pregnancy, geriatrics and the route of prescription of antibiotics to be PO (not intravenous).

The decision making capabilities of each technique (BBN and FCM) were presented by simulating these patient cases and finding the predicted treatments (outcomes), according to the available dataset. The results were compared to the recommendations provided by the relevant medical guidelines/treatment suggestions (AAFP and European Association of Urology clinical guidelines) [42,44]. An important part of decision support system construction was to check that the obtained treatments’ suggestions match the clinical guidelines.

Most of the cases were treated with the first line therapy which was the TMP/SMX determined by clinical practice guidelines. The medical guidelines for UTI treatment were formalized into BBN and FCM knowledge models. Then, the reasoning of probabilistic and fuzzy cognitive approaches was performed using the plug-ins and built-ins of EulerSharp Engine [22].

Two patient cases, one simple and a complex one, were selected to present the functionality of the proposed DSS. The first patient case was considered to demonstrate a simple decision behavior of the system. In this case, the patient suffered from UTI caused by E. coli infection, with known allergy to TMP/SMX. Thus, the following three observables were considered for both techniques: UrinaryTractInfection – True, EColiInfection – True, AllergyToTMP_SMX – True (see Table 1). Medically, there is a serious limiting condition which is the allergy to TMP/SMX. Obviously, this would limit the usage of ciprofloxacin but would not interfere with the usage of other medications. The produced results are depicted in Table 1 from each one of both applied dynamic graphs, BBN and FCM. The results clearly state that all available therapeutic approaches were suggested by the system, except the TMP/SMX. Within this group of considered therapies, there is still not enough evidence to clearly suggest one over the other. In the case of BBN, beliefs are around 0.5, whereas in the case of FCM, where there is no belief degree, the value of each one therapy concept indicates the most appropriate therapy. These results seem to concur well with the clinical guidelines, so both systems are considered to provide “correct” therapy suggestions.

To present how the inference works in the case of FCM approach, let us consider this first patient case using N3 files. The initial state of the patient is described in N3 as follows:
                        
                           
                              
                              
                                 
                                    
                                       @prefix fl: <http://eulersharp.sourceforge.net/2003/03swap/fl-rules#>.
                                    
                                 
                                 
                                    
                                       @prefix
                                       
                                       :
                                       
                                       <fcm#>.
                                    
                                 
                                 
                                    
                                       (:patient001 dco:UrinaryTractInfection) fl:mu 1.
                                    
                                 
                                 
                                    
                                       (:patient001 dco:EscherichiaColiInfection) fl:mu 1.
                                    
                                 
                                 
                                    
                                       (:patient001 dco:AllergyToCiprofloxacin) fl:mu 1.
                                    
                                 
                              
                           
                        
                     
                  

The query in N3 is established as follows: @prefix 
                     fl:<
                     
                        http://eulersharp.sourceforge.net/2003/03swap/fl-rules#
                     
                     >.
                  


                     {?X fl:pi?Y}
                     
                     =
                     
                     
                     >
                     
                     {?X fl:pi?Y}.
                  


                     ########
                  

Then, using the EYE plugin and reasoning engine [22,36], the system provides the suggested therapies for this patient case. An overview of the RDF file of the produced results is represented in Fig. 7. The inference engine was supplied via FCM plug-in for EYE [36].

It is concluded that the patient001 is very likely to receive Nitrofurantoin as suggested treatment therapy. However, except Nitrofurantoin, which is the first line therapy, Ciprofloxacin, Amoxicillin, Lomefloxacine, Norfloxacine, Ofloxacine, and Fosfomycin could be also suggested as therapies according to other patient's conditions.

The second complex case was selected to present a complicated multi-factorial decision process. In this case, the following five observables were considered for both techniques: UrinaryTractInfection – True, EColiInfection – True, AllergyToCiprofloxacin – True, GlucoseMetabsorption- True, Nursing-True (see Table 2
                     ). Medically, this case needs special attention, because there is a contraindication with the Glucose Metabsorption, thus Fosfomycin have to be excluded. Also, TMP/SMX must be excluded due to its teratogenic effect. Also ciprofloxacin should be avoided in this patient, thus all the fluoroquinolones have to be excluded. Therefore the only applicable drugs in this case are Nitrofurantoin and Amoxicillin. For this patient case (which is the case #7 at the pilot dataset), both techniques gave results that were in disagreement with the treatment guidelines, so both systems are considered to provide “incorrect” therapy suggestions.

The proposed BBN therapy system (DSS) suggests an order of possible antibiotic treatments with a degree of belief, as it is usual in clinical practice. On the other hand, the proposed FCM therapy system (DSS) provides an appropriateness order of suggested antibiotics without a degree of belief. The rate of “correct” decisions, i.e. the decisions complying with the practice guidelines, was considered to determine the accuracy (success rate) of the proposed methods/models. The accuracy of both proposed approaches in semantic web framework was 91% (50/55 cases), which was in fully agreement with the considered clinical guidelines.

The developed DSS proposed 55 therapy suggestions (including first, second and third line therapies) but only 50 of them were “correct” (concur well with clinical guidelines) while the other 5 were “incorrect” (do not concur with the treatment suggestions produced by medical guidelines). The results are illustrated in Fig. 8
                     , where the “incorrect” suggestions of BBN and FCM DSS are presented with zero values for these models.

It is important to pinpoint, that the two cases which the BBN and FCM DSS gave “incorrect” suggestions, were different to each other (BBN DSS gave incorrect results in cases #34 and #17, whereas the FCM DSS gave “incorrect” results in cases #12 and #43). For example, in case #34, the patient (younger but over the age of 18) was suffering from UTI caused by Escherichia coli infection. She was nursing and had an indication of Glucose Metabsorption. She had allergy to Nitrofurantoin. Both methods produced results that clearly state that Ciprofloxacin was the first line therapy, while other Fluoroquinolones was the second line suggested ones. Also, TMP/SMX and/or amoxicillin were suggested by the system, but with no strong recommendation in the case of BBN DSS. As far as FCM DSS is concerned, TMP/SMX was excluded from the suggested antibiotics, and the Amoxicillin was the last of antibiotics that were suggested. Although, both techniques produced “correct” results for the first line therapy (Ciprofloxacin), only FCM DSS excluded the TMP/SMX, according to clinical guidelines for this patient case.

Both models gave incorrect results for only three of the cases (cases #7, #13, #28). For example, in case #13, the patient was suffering from UTI caused by Escherichia coli infection, and had an indication of Glucose Metabsorption along with allergy to ciprofloxacin. Both techniques produced results that do not concur exactly with the treatment guidelines, as all the Fluoroquinolones (Norfloxacin, Lomefloxacin) and the TMP/SMX had to be excluded due to contraindications.

In order to assess the system performance deeper, an evaluation was conducted by measuring: recall, precision and F-measure. F-measure can be interpreted as a weighted average of the precision and recall, where a F-measure reaches its best value at 1 and its worst at 0. The results of this evaluation for both approaches were: Recall=1−Precision=0.91−
                     F-measure=0.952, meaning that both approaches returned more relevant results than irrelevant.

A cross-table with correct and incorrect predictions (Table 3
                     ) was constructed. It was observed that the methods/models were performed in a similar way.

@&#DISCUSSION@&#

The proposed decision support system was validated by applying the probabilistic and fuzzy cognitive reasoning to a pilot patient database. The produced therapy recommendations that came from the decision support system were depicted and compared with the relevant clinical guidelines. A total of 55 simulations for decision making were performed and run for patients with a certain patient state (for example but certainly not limited to age, conditions, allergies, resistances…) (see Table C1 in Appendix C), together with the selected formal knowledge methods leading to the therapy recommendations inferred by the system. The accuracy of the proposed DSS performance was 91% (50/55 cases) on the examined patient cases for both techniques.

It is important to highlight that in some cases, the FCM DSS gave different results from BBN DSS, in respect with the appropriateness order of the suggested therapies. Also, there were five cases, where both techniques gave different therapy recommendations than those suggested by the clinical guidelines. In the case of BBN DSS, a series of possible antibiotic treatments, giving a degree of belief in each one, is produced, whereas the FCM DSS suggests a series of appropriate antibiotics. Both decision support systems are able to recognize the appropriate guidelines of the medical problem with an accuracy of 91%. Of course, more clinical cases and experiments are needed to be accomplished in order to further confirm this result.

Furthermore, we constructed a decision tree from the available data set, using the D4.5 algorithm [45,46]. The whole set of 55 patient cases was divided into (1) a training set of 45 cases (randomly selected), which was used for the induction of decision tree, and (2) a testing set of the remaining 10 cases, which was used to check the accuracy of an obtained solution. We ran 10 times different sets of training and testing (randomly selected) to address the accuracy of prediction. The accuracy of the produced decision tree (to predict the “correct” antibiotic according to the guidelines) was approximately 81%. The decision trees give a forward chaining inference and suggest only one antibiotic for each patient case, whereas the proposed techniques (BBNs and FCMs) suggest a probabilistic order and an appropriateness order of acceptable antibiotics respectively, for first and second line therapies, which is more close to the physician's way of thinking.

The construction of BBNs and FCMs is completely based on previous knowledge, from experts and medical guidelines, thus there is no need for a large amount of data to construct them, whereas the construction of decision trees is based on data.

Due to the objective of our study concerning the construction, applicability and usefulness of BBNs and FCMs implemented in N3, as well as due to not available decision tree implementation in semantic web till now, it is not possible a straightforward comparison of the suggested methodologies with decision trees.

The results demonstrated that the application of both proposed models in semantic web is functional and useful in clinical practice. The main features of FCM such as simplicity in construction, flexibility in system analysis and design, user-friendly and high-level decision making, make it very suitable for use at the front-end of knowledge engineering for acquisition of causal knowledge from human experts. BBN, on the other hand, is very suitable for use at the back-end of knowledge engineering for representation and automated causal reasoning due to expressiveness, formality and sound mathematical inference [18].

Both techniques implemented in N3 present the advantages of: sharing and reuse of knowledge from clinical practice guidelines, flexibility to represent new knowledge, easiness for use, transferability to other systems and low time consuming. The sharing and reuse of knowledge from clinical practice guidelines can further simplify maintenance. The knowledge base of facts and rules was implemented in the same environment (RDF, N3, Euler, OWL…) without compatibility constraint, taking advantage of Semantic Web tools. Moreover, the formalization using graphical influence methods can be easily altered to incorporate new phenomena and thus adjust its behavior in decision making.

The main deficiency of BBN is the huge effort and the knowledge acquisition time for specifying conditional probability tables, whereas the main limitation of FCMs is their less sound inference mechanism. Thus the potential of a technical unification of both BBN and FCM approaches for medical decision support seems to be an essential task for future research, to overcome the limitations of each one, and proposing a more efficient medical DSS method, capable of producing robust inference results for the given medical problems.

The DSS user interface includes only the BBN approach yet. This interface is under construction in order to further include the FCM method and its inference. Then, the user will be able to select between BBN and FCM formal models.

To sum up, future work is directed toward to: integrating the knowledge repository, creating additional treatment knowledge about UTI, extending therapy theories toward other therapy domains (besides UTI), and further developing a new unified approach of FCM and BBN, overcoming the limitations of each one.

@&#CONCLUSIONS@&#

This study investigates the application of graphical influence graphs, such as BBNs and FCMs for modeling medical knowledge and capturing system's behavior for decision support. The formalization of both approaches in semantic web framework and the respected results are presented. This work establishes a decision support system based on probabilistic and fuzzy cognitive formalisms for UTI therapy, by proposing the appropriate therapies for each individual case.

Two clinical practice guidelines for UTI therapy were formalized constituting the formal knowledge models. The decisions of both therapy models (BBN and FCM) coincide with medical recommendations, and thus the suggested formalization approaches (using EulerSharp reasoning engine) exhibit more robust performance, regardless of the number of given input concepts. Missing data and incomplete knowledge, inherent in this domain, were considered by both approaches. The accuracy of the decision support system performance was 91% on the examined patient cases. In most cases BBN and FCM decision support suggestions concur well and are in fully agreement with the treatment guidelines. Obviously, more trials and clinical experiences are needed through the examination of a large number of patient cases, in order to confirm and/or improve the results.

@&#ACKNOWLEDGMENTS@&#

The DebugIT project (http://www.debugit.eu/) is receiving funding from the European Community‘s Seventh Framework Program under grant agreement no. FP7-217139, which is gratefully acknowledged. The information in this document reflects solely the views of the authors and no guarantee or warranty is given that it is fit for any particular purpose. The European Commission, Directorate General Information Society and Media, Brussels, is not liable for any use that may be made of the information contained therein.

FCM Inference Algorithm
                  


                     Step 1: Give input for concepts C
                     
                        i
                     , 1≤
                     i
                     ≤
                     n as n the input concepts or parameters.


                     Step 2: Create a vector A with each single cell containing values within [0,1] depending upon the input for C
                     
                        i
                     .


                     Step 3: Create a n-dimensional array W storing numeric impact values where W
                     i,j
                     =impact of ith concept on jth concept.


                     Step 4: Inference process
                        
                           
                              
                              
                                 
                                    do
                                 
                                 
                                    
                                       
                                       Set A
                                       current
                                       =(2A
                                       −1)×
                                       W
                                       +(2A
                                       −1)
                                 
                                 
                                    
                                       
                                       for i
                                       =1 to n
                                       +1 do
                                 
                                 
                                    
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       if A
                                       current(i)≠0 then
                                 
                                 
                                    
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                          
                                             
                                                A
                                                
                                                   n
                                                   e
                                                   w
                                                
                                             
                                             (
                                             i
                                             )
                                             =
                                             
                                                1
                                                
                                                   1
                                                   +
                                                   
                                                      e
                                                      
                                                         −
                                                         λ
                                                         ×
                                                         
                                                            A
                                                            
                                                               c
                                                               u
                                                               r
                                                               r
                                                               e
                                                               n
                                                               t
                                                            
                                                         
                                                         (
                                                         i
                                                         )
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       else
                                 
                                 
                                    
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       A
                                       new(i)=0
                                 
                                 
                                    
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       end if
                                 
                                 
                                    
                                       
                                       
                                       
                                       
                                       
                                       
                                       
                                       if A
                                       current(i)<0 then A
                                       new(i)=−A
                                       new(i)
                                 
                                 
                                    
                                       
                                       end for
                                 
                                 
                                    
                                       
                                       Set A
                                       =
                                       A
                                       new
                                    
                                 
                                 
                                    While (∑A
                                       new
                                       ≠∑A
                                       current)
                                 
                                 
                                    
                                       Return A
                                       new(n
                                       +1)
                                 
                              
                           
                        
                     
                  

See Appendix Table B1
                      and Table B2
                     .

See Appendix Table C1
                     .

@&#REFERENCES@&#

