@&#MAIN-TITLE@&#A virtual reality based fire training simulator with smoke hazard assessment capacity

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A VR fire training simulator with smoke hazard assessment capacity is proposed.


                        
                        
                           
                           Realistic and accurate smoke environment is created for virtual training.


                        
                        
                           
                           Integrated smoke hazard in the path for evacuation or rescue is accurately assessed.


                        
                        
                           
                           A subway station and a primary school are investigated for virtual fire training.


                        
                        
                           
                           The simulator helps trainee identify the safest path and minimize smoke hazards.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Virtual reality

Fire training

Smoke hazard

Visualization

Integrated assessment model

Safe path

@&#ABSTRACT@&#


               
               
                  Smoke is a leading cause of death in fire. To minimize the potential harm from the smoke hazards in the course of a fire, a rational virtual reality (VR)-based fire training simulator taking full account of the various aspects of smoke hazards has been developed and is described herein. In this simulator, a visualization technique based on volume rendering and fire dynamics data has been especially designed to create a realistic and accurate smoke environment for the purposes of effective virtual training, which allows the trainees to experience a realistic and yet non-threatening fire scenario. In addition, an integrated assessment model of smoke hazards is also established in order to assess the safety of different paths for evacuation or rescue in virtual training, which allows the trainees to learn to identify the safest path. Two case studies of a subway station and a primary school demonstrated a high level of accuracy and smooth interactive performance of the proposed simulator, which is thus shown to be valuable for the training of both people who might become trapped in fire and firefighters engaged in learning the proper rescue procedures.
               
            

@&#INTRODUCTION@&#

Fire, as one of the major disasters that commonly occur in urban areas, frequently results in economic losses and human death [1]. According to an international report [2], smoke is the cause of up to 2/3 of the total deaths in building fires annually in the United States. In many fire accidents, the safety of a path for evacuation or rescue is highly constrained by the level of smoke hazards. Therefore, minimizing the impact of smoke is a critical issue in effectively reducing fire-related injuries and death for evacuation and rescue.

Through a process of evacuation or rescue training in the event of actual fire, inexperienced firefighters or even the general public can be exposed to real fire scenarios to improve their ability to deal with smoke hazards [3]. However, due to concerns associated with enormous social and economic costs, and high degree of risks (e.g. toxic gas and uncontrolled fire) that may potentially lead to casualties [4], actual fire training for inexperienced firefighters and the general public is not yet practical. In contrast to such potentially dangerous training, VR training systems are able to provide a safe, low-cost, planned and repetitive training environment for learning the proper procedures for evacuation and rescue. Indeed, such a VR fire training system has been investigated by a number of researchers [5–12]. For instance, Cha et al. [13] developed a VR training simulator integrated with fire dynamics data in an attempt to develop an effective training procedure. Similarly, Ren et al. [14] also proposed a simulation method for fire evacuation in a VR environment based on fire numerical simulations. However, smoke hazards (e.g. harmful gases and heat) have not been taken into account in the existing VR training systems. Hence, a VR training system incorporating smoke hazards merits in-depth study for the purpose of safer fire evacuation and rescue training.

There are two critical technical challenges in such a VR training simulator: (1) visualize an accurate and realistic smoke environment for the purpose of virtual training; (2) assess smoke hazards in different paths available for evacuation or rescue in the course of training to allow the identification of the safest path.

For challenge (1), visualization based on the data of fire dynamic simulation is believed to be an appropriate method. Smoke can hamper the capacity of occupants to see during an evacuation, which makes it difficult to search for exits, thereby hindering escape [15]. Firefighters as well as the occupants encounter this same difficulty of restricted vision. Thus, accurate smoke visualization is critically important for effective evacuation and rescue in virtual training. Amongst the existing literatures on smoke visualization [5,16,17], several simplified methods (e.g. cellular automata, particle systems and random variables) have been used to model the dynamic evolution of smoke, which may be significantly different from the actual situation. To achieve a rational visualization of smoke, an accurate determination of the essential smoke features (e.g. its distribution and density) is necessary in the development of an optimized VR simulator. A number of computational fluid dynamics (CFD) computer programs [18] have the ability to output fairly accurate smoke data. For example, the Fire Dynamics Simulator (FDS) developed by the National Institute of Standards and Technology (NIST) of the United States, has a margin of error of 5–20% from the actual experimental values and is widely applied in various fire investigations [18,19]. In addition, volume rendering is a common visualization method and has been widely used in high-fidelity visualization of the CFD data. In view of the above, the CFD data and volume rendering will be used in this study to develop an accurate and efficient smoke visualization technique.

For challenge (2), an integrated assessment model of smoke hazards is necessary to assist the trainees in properly identifying the safest path for evacuation or rescue. The main direct hazards of smoke are toxicity and heat. Amongst the evaluation models describing the toxic effect of smoke, the fractional effective dose (FED) is one of the most widely used indices in the world [20]. Further, NIST proposed a well known 6-Gas model [21] on the basis of the FED. Concurrently, several studies on the heat effect have determined the maximum smoke temperature that can be borne by humans in a fire [22–25]. Based on the FED, an assessment index for the heat hazard of smoke was proposed [23]. It is evident that both toxicity and heat heavily impact the relative safety of the possible evacuation paths. However, an integrated assessment model considering these two hazards has not yet been extensively studied.

A realistic VR fire training simulator that takes smoke hazards into account is therefore developed in this study. In this simulator, a visualization technique based on fire dynamics data and volume rendering is specially designed to vividly and accurately display the process of smoke evolution in a VR scenario. In addition, to identify the safest path for evacuation or rescue, an integrated assessment model of smoke hazards is also established based on the FED. Finally, two fire scenarios, a subway station and a primary school, are investigated in order to validate the proposed simulator, with the result that the simulator is shown to be of benefit for people trapped in fires as well as firefighters engaged in rescue efforts.

In this study, the data on smoke evolution in the virtual scenario is obtained using the FDS that have been proven to be able to provide accurate fire dynamics results [26]. Volume rendering is often used as an important method of visualization to depict smoke and is highly suited for working with the FDS grid data [27]. Thus, a visualization method based on FDS data and volume rendering is designed to create accurate and realistic smoke environment.

The FDS uses a grid system to divide the space into discrete volumes with specified thermo physical properties [19]. In addition, the duration of the simulation is automatically divided into a number of time steps in the FDS, and the soot densities in each grid are available at all time steps [19]. For smoke visualization, a 3D grid of voxels, which is a volume element used in volume rendering [27], is created in the VR environment following the grids in the FDS. The opaqueness value of a voxel can be assigned by the normalized soot density value in the corresponding grid (see Fig. 1
                     ), which is used to accurately represent the low visibility induced by smoke. In Fig. 1, the opaqueness value of each voxel is equal to the ratio of the corresponding soot density to the maximum soot density. In the process of rendering, the opaqueness values of voxel grids are dynamically adjusted according to the values of soot densities in each time step. Using this method, an accurate process of dynamic smoke evolution can be realistically visualized in the VR training.

As the number of grids and time steps in FDS simulation increases, the amount of the fire dynamics data increases dramatically. Such a large quantity of data leads to a slow data query in the process of rendering and becomes a bottleneck for a real-time smoke visualization. It should be noted that too low a rendering efficiency precludes a beneficial experience by users in the interactive performance of virtual training.

To reduce the burden of data storage and thus accelerate the rendering efficiency, a simplified multi-level data model for smoke visualization is proposed herein. In this study, the range of opaqueness in a voxel (i.e. 0–1, 0 indicates fully transparent, whereas 1 indicates fully opaque) is divided into 50levels, which implies that the minimum increment of opaqueness is 0.02. The comparisons in this study indicate that an increment lower than 0.02 is insignificant for the opaqueness effect and can be ignored during the rendering process. Similarly, the normalized soot density values of each grid are also divided into multi-levels. For any grid, only soot density values corresponding to level changes need to be stored for the purpose of smoke visualization. Specifically, the initial normalized soot density is selected as the original stored value. When the soot density at a subsequent time step is more than the preceding stored value by 0.02, this density will be stored as a new value and the soot densities between the two adjacent stored values will not be stored.

In general, hundreds of time steps are needed for an accurate dynamic fire simulation in FDS. As an example, a curve of the soot density of a grid in 100time steps is taken herein to demonstrate the advantages of the proposed multi-level data model. This is illustrated in Fig. 2
                     . The range of soot density in this grid (0–0.2) can be divided into 10levels. Therefore, only 10level-changing time steps are stored for the smoke visualization. Within the 100time steps, this is equivalent to 90% removal of the redundancy data in this multi-level data model. Thus, this simplified multi-level data model reduces the data burden remarkably. In addition, for the grids with zero soot density (i.e. the grids that are not occupied by smoke), the corresponding voxel grids are not rendered. Thus, this data model also reduces the rendering workload.

A video card, i.e. the GeForce GTX 650 (384 cores, 1GB memory, widely used in desktop computers), and a quad CPU of 2.66GHz are used as the test platform. When the number of grids reaches 10,000, the rendering efficiency of the data model directly obtained from the FDS grids is only 22frames per second (FPS). This low rendering efficiency exerts an adverse effect on the interactive performance capability in the course of virtual training, and some simple but necessary operations (e.g. moving and changing the view angle) will take a long time. Under the same conditions, the rendering efficiency of the proposed model in smoke visualization is beyond 60FPS. This confirms the effectiveness of the proposed data model in simulating a real-time process of smoke evolution in the VR training system. It should be noted that this proposed multi-level data model is intended to accelerate smoke rendering and will not be used in smoke hazard assessment which requires the original FDS data.

The main hazards of smoke include toxicity and heat, which have been separately studied by several researchers [22–25]. Amongst the evaluation indices for the smoke toxicity of the integrated effects of multiple gases, FED is an important model of toxicity for a 30-min exposure [20]. On the basis of FED, the well known 6-Gas model [21] was proposed to assess the integrated toxicity of 6 gases (i.e. CO, CO2, HCN, O2, HCl and HBr) that commonly appear in smoke, as expressed in Eq. (1): 
                           
                              (1)
                              
                                 
                                    
                                       FED
                                    
                                    
                                       6
                                       -
                                       Gas
                                    
                                 
                                 =
                                 
                                    
                                       m
                                       [
                                       CO
                                       ]
                                    
                                    
                                       [
                                       
                                          
                                             CO
                                          
                                          
                                             2
                                          
                                       
                                       ]
                                       -
                                       b
                                    
                                 
                                 +
                                 
                                    
                                       [
                                       HCN
                                       ]
                                    
                                    
                                       
                                          
                                             LC
                                          
                                          
                                             50
                                             ,HCN
                                          
                                       
                                    
                                 
                                 +
                                 
                                    
                                       
                                          
                                             21
                                             -
                                             [
                                             
                                                
                                                   O
                                                
                                                
                                                   2
                                                
                                             
                                             ]
                                          
                                          
                                             21
                                             -
                                             LC
                                          
                                       
                                    
                                    
                                       50
                                       ,
                                       
                                          
                                             O
                                          
                                          
                                             2
                                          
                                       
                                    
                                 
                                 +
                                 
                                    
                                       [
                                       HCl
                                       ]
                                    
                                    
                                       
                                          
                                             LC
                                          
                                          
                                             50
                                             ,HCI
                                          
                                       
                                    
                                 
                                 +
                                 
                                    
                                       [
                                       HBr
                                       ]
                                    
                                    
                                       
                                          
                                             LC
                                          
                                          
                                             50
                                             ,HBr
                                          
                                       
                                    
                                 
                              
                           
                        where the number notations in brackets indicate the time-integrated average atmospheric concentrations during a 30-min exposure period [(%×min)/min]. These atmospheric concentrations can be obtained by FDS-based simulation, the results of which are accurate within 20% of the experimental measurements [18,19,26]. The factors m and b are used to determine the combined toxic effects of CO and CO2. The LC50 is the concentration of a toxic gas that causes 50% of the laboratory animals to die after a 30-min exposure [28]. The higher the FED6-Gas
                         is, the stronger the integrated toxicity of the smoke is. When FED
                        =1.0, the toxicity of the smoke is associated with a high probability of death [20,28].

The heat hazards of smoke consist of convection and radiation. Based on the FED, the fractional dose of heat acquired during exposure can be calculated by summing the radiant and convective fractions using Eq. (2) 
                        [23]:
                           
                              (2)
                              
                                 
                                    
                                       FED
                                    
                                    
                                       heat
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          
                                             
                                                t
                                             
                                             
                                                1
                                             
                                          
                                       
                                       
                                          
                                             
                                                t
                                             
                                             
                                                2
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                1
                                             
                                             
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      rad
                                                   
                                                
                                             
                                          
                                          +
                                          
                                             
                                                1
                                             
                                             
                                                
                                                   
                                                      t
                                                   
                                                   
                                                      conv
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 Δ
                                 t
                              
                           
                        where Δt is a fixed time interval between the time steps in the simulation. The tconv
                         represents the time (minute) to incapacitation due to convective heat and can be calculated by Eq. (3) 
                        [23] at temperature T (°C).
                           
                              (3)
                              
                                 
                                    
                                       t
                                    
                                    
                                       conv
                                    
                                 
                                 =
                                 
                                    
                                       5
                                       ×
                                       
                                          
                                             10
                                          
                                          
                                             7
                                          
                                       
                                    
                                    
                                       
                                          
                                             T
                                          
                                          
                                             3.4
                                          
                                       
                                    
                                 
                              
                           
                        
                     

The variable trad
                         in Eq.(2) means the time (minute) to incapacitation due to radiant heat and can be given by Eq. (4) 
                        [29] at a radiant flux of q
                        kWm−2.
                           
                              (4)
                              
                                 
                                    
                                       t
                                    
                                    
                                       rad
                                    
                                 
                                 =
                                 
                                    
                                       1.333
                                    
                                    
                                       
                                          
                                             q
                                          
                                          
                                             1.33
                                          
                                       
                                    
                                 
                              
                           
                        
                     

The data of temperature T and radiant flux q which are needed for FEDheat
                         can be obtained by the valid FDS-based simulation. The higher the FEDheat
                         is, the greater the heat hazard is. When FEDheat
                        
                        =1.0, the radiant heat and convective heat are close to the thresholds for human life [23], and people are thus in imminent danger of death.

Toxicity and heat have different injury mechanisms [22,23], but either can be fatal if the degree of exposure is sufficient. Based on the above discussion of the separate evaluation on smoke hazards (i.e., toxicity and heat), an integrated assessment model of smoke hazards, namely the Integrated Hazards Dose (IHD), is proposed, as given in Eq. (5):
                           
                              (5)
                              
                                 IHD
                                 =
                                 
                                    max
                                 
                                 (
                                 
                                    
                                       FED
                                    
                                    
                                       6
                                       -
                                       Gas
                                    
                                 
                                 ,
                                 
                                    
                                       FED
                                    
                                    
                                       heat
                                    
                                 
                                 )
                              
                           
                        
                     

The higher the FEDheat
                         is, the greater the integrated hazards of smoke are. According to FED6-Gas
                         and FEDheat
                        , when the IHD reaches 1.0, the smoke may prove fatal for human beings.

Determining whether the path for evacuation or rescue is safe is the most important issue in virtual evacuation training. Given that the path for evacuation or rescue is a specific spatial–temporal curve, the integrated hazards of a path can be assessed by the integral of IHD on the corresponding curve. To determine the toxicity hazard in the path 
                           
                              
                                 
                                    FED
                                 
                                 
                                    6
                                    -
                                    Gas
                                 
                                 
                                    path
                                 
                              
                           
                        , the time-integrated average concentrations of the ith gas (i.e., [Ci
                        ] in Eq. (1)) can be calculated by Eq.(6). It should be noted that [Ci
                        ] must be transformed into the average concentrations during a 30-min exposure period due to the limits of LC50 set in Eq. (1) 
                        [28].
                           
                              (6)
                              
                                 [
                                 
                                    
                                       C
                                    
                                    
                                       i
                                    
                                 
                                 ]
                                 =
                                 
                                    
                                       
                                          ∫
                                          
                                             a
                                          
                                          
                                             b
                                          
                                       
                                       
                                          
                                             C
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       x
                                       ,
                                       y
                                       ,
                                       z
                                       ,
                                       t
                                       )
                                       dt
                                    
                                    
                                       30
                                    
                                 
                              
                           
                        where Ci
                        (x, y, z, t) represents the spatial–temporal function of the atmospheric concentration of the ith gas (i.e. CO2, O2, HCl, etc.) in the path. The variables a and b represent the initial point and the end point of the path, respectively.

It should be noted that the paths for evacuation or rescue are determined by the operation of trainees and are not likely to be described by any explicit function. In this study, the fire dynamic simulation and the VR scenario are both grid-based. The fire dynamics data (e.g. the atmospheric concentration, temperature and radiant flux) in the grids where the trainees are located at each time step can be obtained by FDS. Thus, by defining a fixed time interval between the time steps as Δt, the [Ci
                        ] at the time step k can be calculated by Eq. (7):
                           
                              (7)
                              
                                 [
                                 
                                    
                                       C
                                    
                                    
                                       i
                                    
                                 
                                 ]
                                 =
                                 
                                    
                                       
                                          
                                             ∑
                                          
                                          
                                             j
                                             =
                                             1
                                          
                                          
                                             k
                                          
                                       
                                       
                                          
                                             C
                                          
                                          
                                             i
                                          
                                       
                                       (
                                       
                                          
                                             x
                                          
                                          
                                             j
                                          
                                       
                                       ,
                                       
                                          
                                             y
                                          
                                          
                                             j
                                          
                                       
                                       ,
                                       
                                          
                                             z
                                          
                                          
                                             j
                                          
                                       
                                       ,
                                       j
                                       Δ
                                       t
                                       )
                                       Δ
                                       t
                                    
                                    
                                       30
                                    
                                 
                              
                           
                        where 
                           
                              
                                 
                                    C
                                 
                                 
                                    i
                                 
                              
                              (
                              
                                 
                                    x
                                 
                                 
                                    j
                                 
                              
                              ,
                              
                                 
                                    y
                                 
                                 
                                    j
                                 
                              
                              ,
                              
                                 
                                    z
                                 
                                 
                                    j
                                 
                              
                              ,
                              j
                              Δ
                              t
                              )
                           
                         represents the atmospheric concentration of the ith gas at the time step j in the path and can be obtained from the fire dynamics data of FDS.Based on [Ci
                        ], 
                           
                              
                                 
                                    FED
                                 
                                 
                                    6
                                    -
                                    Gas
                                 
                                 
                                    path
                                 
                              
                           
                        at the time step k can be calculated by Eq. (1). Since the radiant flux q and the temperature T at each time step are available along the whole path, 
                           
                              
                                 
                                    FED
                                 
                                 
                                    heat
                                 
                                 
                                    path
                                 
                              
                           
                        at the time step k can be calculated by Eq. (8):
                           
                              (8)
                              
                                 
                                    
                                       FED
                                    
                                    
                                       heat
                                    
                                    
                                       path
                                    
                                 
                                 =
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          j
                                          =
                                          1
                                       
                                       
                                          k
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   
                                                      q
                                                   
                                                   
                                                      1.33
                                                   
                                                
                                                (
                                                x
                                                ,
                                                y
                                                ,
                                                z
                                                ,
                                                j
                                                Δ
                                                t
                                                )
                                             
                                             
                                                1.333
                                             
                                          
                                          +
                                          
                                             
                                                
                                                   
                                                      T
                                                   
                                                   
                                                      3.4
                                                   
                                                
                                                (
                                                x
                                                ,
                                                y
                                                ,
                                                z
                                                ,
                                                j
                                                Δ
                                                t
                                                )
                                             
                                             
                                                5
                                                ×
                                                
                                                   
                                                      10
                                                   
                                                   
                                                      7
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                                 Δ
                                 t
                              
                           
                        Thus, the integrated hazard in the path, i.e., IHDpath
                        , can be expressed by the maximum of 
                           
                              
                                 
                                    FED
                                 
                                 
                                    6
                                    -
                                    Gas
                                 
                                 
                                    path
                                 
                              
                           
                         and 
                           
                              
                                 
                                    FED
                                 
                                 
                                    heat
                                 
                                 
                                    path
                                 
                              
                           
                        , as expressed by Eq. (9).
                           
                              (9)
                              
                                 
                                    
                                       IHD
                                    
                                    
                                       path
                                    
                                 
                                 =
                                 
                                    max
                                 
                                 
                                    
                                       
                                          
                                             
                                                FED
                                             
                                             
                                                6
                                                -
                                                Gas
                                             
                                             
                                                path
                                             
                                          
                                          ,
                                          
                                             
                                                FED
                                             
                                             
                                                heat
                                             
                                             
                                                path
                                             
                                          
                                       
                                    
                                 
                              
                           
                        
                     

In the VR training, due to the uneven distribution of smoke hazards, different paths for evacuation or rescue have different values of IHDpath
                        . The lower IHDpath
                         is, the safer the evacuation path is. Therefore, the VR training based on IHDpath
                         can help trainees discover the safest path for evacuation or rescue.

Based on the above described smoke visualization and integrated assessment of smoke hazards, a VR fire training simulator is developed. This simulator, supported by the fire dynamics data of FDS, adopts an open-source graphics engine OSG as the VR platform [30]. There are four major steps in the entire VR training system, as illustrated in Fig. 3
                     : (1) The VR model and the FDS model are coherently created according to the same building information. (2) The fire dynamics simulation is performed by FDS and its result is obtained. In particular, the soot density data is efficiently stored by the proposed multi-level data model for the purpose of smoke visualization. (3) The voxel grids are created in correspondence with the FDS grids, by which the process of smoke evolution is accurately visualized in order to provide a realistic fire scenario for VR training. (4) Using the VR training simulator, the trainees can undergo training in a realistic fire scenario and choose different paths for evacuation or rescue. Subsequently, the smoke hazards of these paths are assessed according to the values of IHDpath
                     . The smaller the IHDpath
                      is, the safer the corresponding path is. By comparing values of IHDpath
                     , the path with the minimum IHDpath
                      is determined to be the safest.

This simulator can be used to train the general public to properly evacuate or inexperienced firefighters to perform a rescue in the course of a fire. For a trainee, loading a pre-computed fire scenario (i.e. VR model and fire dynamic data of FDS) is the first step for an application of the simulator. A trainee is located in the simulated fire scenario like a first-person video game. The trainee can observe the smoke spreading in the virtual scenarios, such as a subway, building or tunnel, each of which simulates a realistic fire environment, and move in any direction in the virtual scenario. Without the assessment results of smoke hazards, the trainee can just choose the evacuation path by his intuition at the first time. When the virtual training ends up, the hazard assessment of the selected evacuation path will be presented to the trainee, which will increase the understanding of the hazard features to recognize in the course of a safe evacuation. Through several trainings, the trainees will eventually learn to choose the safest path for evacuation or rescue in a given fire scenario. Such training experience will be important to minimize smoke hazards in the course of an actual fire, especially for inexperienced firefighters.

To carry out effective evacuation training, the simulator should have a high degree of accuracy and good interactive performance. Specifically, the spatial–temporal distribution of the smoke in the virtual scenario should be consistent with the simulation results of FDS, so that the simulator can provide a realistic fire environment for training. Furthermore, the rendering efficiency should be greater than 30FPS to ensure a satisfactory interactive performance [31].

The double-tunnel subway station illustrated in Fig. 4
                         is investigated to simulate fire evacuation in the proposed VR training simulator. In this station, two tunnels are crossed up and down, and connected by a stairway. The fire source is located near the stairway in the lower tunnel. For the trainees who are located near the fire source, there are two possible evacuation paths, as illustrated in Fig. 4. Path 1 is through the lower tunnel, which is 45m from the exit; whereas Path 2 is through the upper tunnel, at a distance of 31.8m from the exit. Through virtual evacuation training, the trainees will learn how to determine which path is safer.

The VR model of the station and the fire dynamic data of FDS are important input for the simulator, by which the simulator provides a realistic and effective training environment. The VR model and the FDS model of this subway station are established, as shown in Figs. 5 and 6
                        
                        , respectively. The VR model (Fig. 5) shows the details inside the station (e.g. the fire source, columns and stairway) while the FDS model (Fig. 6) presents the global layout of the station. In the FDS, the combustion reaction of fire involves polyvinyl chloride (PVC), which is a common material in daily life, and the simulation time is 10min. The soot density data obtained from FDS is stored by the proposed multi-level data model and is used for smoke visualization; the other FDS data (e.g. temperature, atmospheric concentrations and radiant flux) is used for smoke hazard assessment. In this simulator, the range of an imposed evacuation speed is 0.8–2.0m/s, which is measured in actual fires [32], and trainees can control the speed within the above range in the evacuation training.

A trainee participates in evacuation training along two different paths when the fire has been fully developed. The processes of training in Paths 1 and 2 that correspond to the observation points given in Fig. 4 are presented in Figs. 7 and 8
                        
                        , respectively.

To validate the accuracy of smoke visualization, the correlation coefficients between the distribution of soot densities by FDS and the distribution of smoke in the virtual scenario are calculated. The smoke at height of human eyes has significant effect on evacuation safety and can be therefore used to evaluate the typical features of smoke distribution [33,34]. At the height of the trainee’s eyes (1.75m in this study), the values of soot density in the plane of the FDS grids are defined as matrix A, while the values of opaqueness in the plane of voxel grids are defined as matrix B. By doing so, the correlation coefficients between A and B can represent the similarity of smoke distribution in the FDS simulation and virtual scenario. The variation of the correlation coefficients in the process of virtual training is always close to 1.0 and the maximum error is only 2.1×10−4, as illustrated in Fig. 9
                        . Therefore, the spatial–temporal distribution of smoke in the virtual scenario is remarkably consistent with the FDS simulation, which ensures an accurate smoke environment for evacuation.

In addition, given that the proposed multi-level data model is adopted, the rendering efficiency of the fire virtual scenario can attain 60FPS on a desktop computer with a widely-used video card (GeForce GTX 650, 384 cores, 1GB memory), which provides smooth interactions for VR training.

Based on the FDS fire dynamics, the distribution of the integrated smoke hazards (i.e. IHD) when the fire is fully developed is calculated using Eq.(5), as demonstrated in Fig. 10
                        . Fig. 10 indicates that the smoke hazards in the upper tunnel, especially near the stairway, are stronger than the hazards in the lower tunnel, although the fire started in the lower one. Such distribution of the smoke hazards is consistent with the virtual smoke environment illustrated in Figs. 7 and 8. This confirms that smoke visualization in the proposed VR training simulator provides a valid fire scenario for training.

To accurately quantify the safety of these two evacuation paths, the hazards to the trainees in these two paths (i.e. IHDpath
                        ) are calculated according to Eq.(9), as presented in Fig. 11
                        . In Path 1, the evacuation duration is approximately 46s, and the IHDpath
                         is equal to 0.193; whereas in Path 2, the evacuation duration is approximately 36s, and the IHDpath
                         is 0.335. It is evident that Path 2 exhibits a relatively shorter evacuation duration, but a higher hazard level. Thus, Path 1 is safer than Path 2.

This training aims to help firefighters choose the safer path for rescue. The fire scenario is a 4-floor primary school in which the top floor is on fire. The plan view of the school is presented in Fig. 12
                        . In this scenario, a pupil is trapped in a classroom near the fire source, and two paths are available to the firefighter for rescue: Path 1 of 30.5m long passes through the corridor near the fire source; Path 2 is 43.8m long, but not as near the fire source as Path 1. Through virtual training, the firefighter will be able to determine which path is safer for rescue.

In FDS, the fire evolution is simulated with the combustion reaction of wood and plastic, and the time for the entire simulation is 10min. Based on the CFD data of FDS, an accurate virtual smoke environment is created for the rescue training, as demonstrated in Fig. 13
                        . This virtual environment provides the firefighter with an intuitive means of comparison that shows the smoke in Path 1 is much heavier than that of Path 2. Hence, the firefighter is likely to consider Path 1 to be dangerous. Such distribution of smoke shown in Fig. 13 is consistent with the FDS results, and the rendering efficiency can reach 60FPS, which provides an effective interactive environment for the trainees.

In the training, the traveling speed ranges from 0.8 to 2.0m/s, the same as the case study of the subway station. The results of the virtual training indicate that the rescue times in Paths 1 and 2 are 30s and 36.5s, respectively. Due to the visibility restriction of the smoke, the traveling speed in Path 1 is slightly slower than that in Path 2, which results in a non-remarkable difference in rescue time. However, the difference in the smoke hazards (i.e. IHDpath
                        ) in the two paths is remarkable, as shown in Fig. 14
                        . The IHDpath
                         in Path 1 reaches 0.25, whereas the IHDpath
                         in Path 2 is only 0.09, almost one third of that in Path 1. Given that Path 2 takes almost the same time as Path1 but is much safer, Path 2 is considered a better choice.

@&#CONCLUSIONS@&#

Based on the FDS fire dynamics data and volume rendering, a technique for visualizing smoke evolution in fire VR scenarios has been specially designed, which provides a realistic smoke environment and achieves a smooth interaction performance in the practice of virtual training.

Integrating the hazards of toxicity and heat in smoke, a hazard assessment model for the evacuation or rescue paths, i.e. IHDpath
                     , is thus established. The smaller the IHDpath
                      is, the safer the corresponding path is. Thus, IHDpath
                      can be used to identify the safest path in virtual training.

Based on smoke visualization and the IHDpath
                      model, a rational VR fire training simulator with smoke hazard assessment is proposed. The study cases of a subway station and a primary school demonstrate that the simulator allows trainees to experience realistic fire scenarios and identify the safest path available for evacuation or rescue, which assists the trainees to learn how to minimize smoke hazards to the greatest extent possible.

@&#ACKNOWLEDGEMENTS@&#

The authors are grateful for the financial support received from the National Basic Research Program of China (973 Program) (No. 2012CB719703), the National Nature Science Foundation of China (Nos. 51222804, 51308321), the Tsinghua University Initiative Scientific Research Program (No. 2011THZ03) and China Postdoctoral Science Foundation (2013M530632).

@&#REFERENCES@&#

