@&#MAIN-TITLE@&#The benefits of differential variance-based constraints in portfolio optimization

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           We suggest extensions to portfolio optimization with constraints.


                        
                        
                           
                           The constraints on a stock’s portfolio weight are determined by its sample variance.


                        
                        
                           
                           The suggested methods yield improved performance relative to existing methods.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Mean–variance analysis

Portfolio optimization

Portfolio constraints

Estimation error

@&#ABSTRACT@&#


               
               
                  The main problem of portfolio optimization is parameter estimation error. Various methods have been suggested to mitigate this problem, among which are shrinkage, resampling, Bayesian updating, naïve diversification, and imposing constraints on the portfolio weights. This study suggests two substantial extensions of the constrained optimization approach: the Variance-Based Constraints (VBC), and the Global Variance-Based Constraints (GVBC) methods. By the VBC method the constraint imposed on the weight of a given stock is inversely proportional to its standard deviation: the higher a stock’s sample standard deviation, the higher the potential estimation error of its parameters, and therefore the tighter the constraint imposed on its weight. GVBC employs a similar idea, but instead of imposing a sharp boundary constraint on each stock, a quadratic “cost” is assigned to deviations from the naive 1/N weight, and a single global constraint is imposed on the total cost of all deviations. Comparing ten optimization methods we find that the two new suggested methods typically yield the best performance, as measured by the Sharpe ratio. GVBC ranks first. These results are obtained for two different datasets, and are also robust to the number of assets under consideration.
               
            

@&#INTRODUCTION@&#

The Mean–Variance (MV) rule of Markowitz (1952, 1959) is probably the most commonly employed investment rule by both academics and professional investors, hence the intensive research on the theoretical and practical implication of the MV paradigm. If one assumes normality of returns and risk aversion, it is well known that the MV rule is optimal in the expected utility framework (see Tobin (1958) and Hanoch & Levy (1969)).
                        2
                        When distributions are not normal the MV rule provides an excellent approximation to expected utility as long as the returns are not extreme, see Levy and Markowitz (1979), Kroll, Levy, and Markowitz (1984) and Markowitz (1991). MV analysis has been extended in several different directions, some of which are: suggesting other measures of risk to replace variance (Markowitz, 1993; Grootveld & Hallerbach, 1999; Deng, Li, & Wang, 2005; and Huang, 2008); considering Prospect Theory preferences (Levy & Levy, 2004), and employing a fuzzy logic approach to optimization (Huang, 2007).
                     
                     
                        2
                      Therefore, the application of the MV rule is straightforward as long as the various parameters of the multivariate normal distribution are known. Thus, given the normality assumption, the criticism of employing Markowitz’s MV optimizer in a straightforward manner is not related to the theoretical aspects of this paradigm, but rather to the statistical estimation errors of the various parameters needed to employ this rule in practice. This problem, and various solutions for dealing with it, are the focus of this paper.

The application of the MV rule presumes that the investors have exact knowledge of expected returns, variances and covariances. In practice, the ex-ante parameters are unknown and one must rely on the limited available information, which is generally composed from the historical returns. However, employing the historical distributions of returns, the MV rule typically yields unacceptable investment strategies, with extreme portfolio weights, and with many assets held short. Moreover, the aggregate percent of the portfolio in short position in the MV optimal investment strategy based on historical returns is generally very large, and may reach hundreds and even thousands of percent. While holding short positions is a legitimate investment strategy, many institutional investors refrain from having short positions, and typically restrict the investment weights (e.g., see Frost & Savarino, 1988, p. 29).

In addition, one cannot be very confident about the portfolio weights generated by the MV optimizer with sample estimates, because these weights are very sensitive to the sample parameters, especially to the sample means (see Best & Grauer (1991) and Chopra & Ziemba (1993)). This is quite unsettling, as a manager may find that the MV optimal portfolio based on the sample of the last 50 monthly returns, for example, is completely different than the portfolio constructed based on the last 60months. Numerical analyses of the MV efficiency frontier reveals that even a little reduction in the mean of a given asset may shift the asset from a large long position to a large short position. Thus, even a small difference between the true unknown means and the sample estimated means, quite in the plausible error range, may yield a large deviation between the optimal investment strategy and the one recommended based on the estimated sample parameters.

Estimation errors may also lead to incorrect theoretical conclusions. For example, Levy and Roll (2010) show that with historical mean returns and standard deviations the market portfolio is MV inefficient. Yet, little changes in these parameters, which are statistically legitimate, reveals that the market portfolio is located on the MV frontier. This finding indicates that sampling errors in the various means may greatly influence the conclusion regarding the validity of Sharpe (1964) – Lintner (1965) CAPM, let alone the MV efficiency of a particular portfolio under consideration.

Because of the theoretical and practical importance of the MV rule, numerous papers suggest various ways to deal with the fact that the ex-ante parameters are unknown and sampling errors strongly affect the results. As a consequence of the extreme sensitivity of the optimal diversification weights to the potential errors in the sample estimates of the mean returns, and the typically large errors involved in estimating mean returns, some researchers suggest an extreme investment policy which ignores the historical sample means altogether, and focuses on the investment weights corresponding to the sample minimum variance portfolio (see Green & Hollifield (1992)). An even more extreme suggestion is to ignore all historical parameters, means and variance–covariance matrix alike, and to employ the naïve diversification strategy, namely, investing an equal proportion of 1/N in each of the N available assets (see, for example, DeMiguel et al. (2009) and Duchin & Levy (2009)). Most other suggested methods incorporate all the sample parameters, but with some modification, either to the parameters or to the optimization procedure. One possibility is to apply “shrinkage” to the sample parameters (Ledoit & Wolf, 2003, Jagannathan & Ma, 2003). Other methods which consider the sampling errors and suggest manners to mitigate these errors are the Bayesian approach (Jorion, 1986; Markowitz & Usmen, 2003), the Monte Carlo resampling approach (Michaud, 1989, 1998), and the Black and Litterman (1992) approach. Many of the suggested modifications are related hence, achieve similar results. In the next section we provide a brief literature review which covers the various methods examined in the present study.

Which optimization method is better at handling the sampling errors, hence performs best? Is the relative ranking of the various methods invariant to the number of assets under consideration? If constraints are imposed on the portfolio weights to avoid extreme positions due to sampling error, what type of constraints should be imposed, and how stringent should they be? In answering these questions, one needs to consider two potential economic losses that should be balanced in the derivation of the portfolio weights:
                        
                           (a)
                           Using the historical sample parameters may lead to a portfolio which is very different from the optimal portfolio which is based on the true parameters, due to the sampling errors.

Drastically modifying the sample parameters (or completely ignoring them) or, alternatively, imposing severe constraints on the portfolio weights may lead, once again, to sub-optimality and economic loss. For example, if the parameter estimates are very close to the true parameters, imposing stringent constraints on the weights may hamper performance.

Researchers who suggest modifications for the simple MV optimizer are aware of the importance of the historical sample data, as well as the above two possible losses. Hence, most of them do not advocate ignoring the historical data completely, but rather giving it some weight in the portfolio construction procedure. The main issue the investor faces is how much weight to give to the historical information. Indeed, the goal is to find a golden path that balances the two potential losses discussed above. Namely, one needs to employ the information from the sample returns, but simultaneously to restrict extreme diversification policies, which may be due to sampling errors.

In this paper we compare the performance of the main optimization methods suggested in the literature. In addition, we suggest two novel methods that turn out to improve upon the performance of the existing methods mentioned above. We call these two new methods Variance-Based Constrained optimization (VBC) and Global Variance-Based Constrained optimization (GVBC). These methods are generalizations of the portfolio weight constraints method. The main idea in both new methods is to take into account the fact that the estimation error is not the same for all stocks: the estimation errors are larger for stocks with larger sample variances. The VBC method imposes constraints that are inversely related to the stock’s sample standard deviation: the lower the standard deviation, the lower the estimation error, and the looser the constraints imposed on the stock’s portfolio weight.

The VBC method, however, does not imply a higher “cost” for more extreme weights, as long as they are within the allowed bounds. It also does not take into account the relative contribution of different stocks to the portfolio’s performance. For example, if we have two stocks with the same sample standard deviation but very different sample means, we may want to allow looser constraints for the stock with the higher mean, because it contributes more to the portfolio’s mean. The Global VBC (GVBC) method incorporates these two elements by formulating a quadratic “cost” on the deviation of weights from the naïve 1/N weight and imposing a single constraint on the total cost of all weights. We explain these two methods in detail in Section 3.

Methodologically, the performance of the various optimization methods can be analyzed in several different frameworks. One can assume stable return distributions, or alternatively, one can employ out-of-sample analysis. The out-of-sample framework may yield very similar results to the stable case if indeed the return distributions are stable, but may yield different results when the distributions vary over time. While the stable distribution scenario measures purely the economic loss due to sampling estimation errors, the out-of-sample approach measures two combined effects: sampling errors for given distributions, as well as the instability of the distributions. Professional investors are rightfully interested in the combined effect, namely, out-of-sample analysis. However, the empirical out-of-sample performance of the various optimization methods under consideration are highly sensitive to the sample period selected for the analysis. One method may outperform the other if, say, the last decade is considered, and the opposite holds if the last two decades are considered. Kritzman, Page, and Turkington (2010) convincingly demonstrate this point by showing that the results of DeMiguel et al. (2009a) in favor of naïve diversification are overturned when long sample periods are employed. Thus, it may be very hard to reach general conclusions based on out-of-sample analysis. In contrast, the stable distribution approach allows a more controlled experiment, as the true parameters are known to a “referee” who compares the performance of the various suggested methods, where each method relies solely on sample information. This method is employed by Frost and Savarino (1988), Michaud (1998), Markowitz and Usmen (2003), Harvey, Liechty, and Liechty (2008), and it is the one we follow here.

The structure of this paper is as follows. Section 2 provides a brief review of the methods that appear in the literature and are examined in this paper. Section 3 introduces the two new methods (VBC and GVBC) suggested here. Section 4 provides the methodology and results. Section 5 concludes.

@&#LITERATURE REVIEW@&#

This section provides a brief review of the main portfolio optimization methods suggested in the literature. For a more detailed discussion of these methods, we refer the reader to the relevant original papers.

Mean–variance optimization yields the portfolio which maximizes the mean for a given standard deviation, or stated differently, the portfolio with the maximal Sharpe ratio. In the basic application of this method the sample parameters are employed as estimates of the ex-ante parameters. Given a set of sample mean excess returns, 
                           
                              
                                 
                                    μ
                                 
                                 
                                    ˆ
                                 
                              
                           
                        , and sample covariance matrix, 
                           
                              
                                 
                                    Σ
                                 
                                 
                                    ^
                                 
                              
                           
                        , the MV optimizer is the solution to:
                           
                              (1)
                              
                                 
                                    
                                       
                                          
                                             Maximize
                                             :
                                          
                                       
                                       
                                          
                                             
                                             
                                                
                                                   
                                                      
                                                         x
                                                      
                                                      
                                                         ′
                                                      
                                                   
                                                   
                                                      
                                                         μ
                                                      
                                                      
                                                         ˆ
                                                      
                                                   
                                                
                                                
                                                   
                                                      
                                                         (
                                                         
                                                            
                                                               x
                                                            
                                                            
                                                               ′
                                                            
                                                         
                                                         
                                                            
                                                               Σ
                                                            
                                                            
                                                               ^
                                                            
                                                         
                                                         x
                                                         )
                                                      
                                                      
                                                         1
                                                         /
                                                         2
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                    
                                       
                                          
                                             s
                                             .
                                             t
                                             .
                                             :
                                          
                                       
                                       
                                          
                                             
                                             
                                                
                                                   x
                                                
                                                
                                                   ′
                                                
                                             
                                             ·
                                             
                                                
                                                   1
                                                
                                                
                                                   ̲
                                                
                                             
                                             =
                                             1
                                             ,
                                          
                                       
                                    
                                 
                              
                           
                        where x is a vector of N portfolio weights, x′ is its transpose, and 1 is a vector of N 1’s. Note that as 
                           
                              
                                 
                                    μ
                                 
                                 
                                    ˆ
                                 
                              
                           
                         denotes the vector of returns in excess of the risk-free rate, the expression in (1) is the portfolio’s Sharpe ratio.

This method typically yields extreme portfolio weights. Specifically, as the number of assets under consideration, N, increases, the percentage of assets held short position approaches 50% – an unacceptable result by both professional investors and academics who are interested in equilibrium models (for example, see Levy (1983), Brennan & Lo (2010), & Levy & Ritov (2011)). One possible solution to these many short positions is to directly impose a no-short constraint, which was Markowitz’s original suggestion, and his motivation for developing his critical line algorithm (Markowitz, 1959). Maximizing the Sharpe ratio under this constraint typically yields only a small number of assets in the portfolio, where most of the assets are left out (i.e. with portfolio weights of zero).


                        Best and Grauer (1991, 1992) show that portfolio weights are very sensitive to the mean return estimates, and Green and Hollifield (1992) argue that the main factor inducing the selection of a portfolio which substantially deviates from the optimal portfolio is the error in the mean return estimates. Therefore, they suggest ignoring the assets’ sample means altogether. This implies holding the Minimum Variance Portfolio (MVP), which is given by the solution to:
                           
                              (2)
                              
                                 
                                    
                                       
                                          
                                             Minimize
                                             :
                                          
                                       
                                       
                                          
                                             
                                             
                                                
                                                   x
                                                
                                                
                                                   ′
                                                
                                             
                                             
                                                
                                                   Σ
                                                
                                                
                                                   ^
                                                
                                             
                                             x
                                          
                                       
                                    
                                    
                                       
                                          
                                             s
                                             .
                                             t
                                             .
                                             :
                                          
                                       
                                       
                                          
                                             
                                             
                                                
                                                   x
                                                
                                                
                                                   ′
                                                
                                             
                                             ·
                                             
                                                
                                                   1
                                                
                                                
                                                   ̲
                                                
                                             
                                             =
                                             1
                                             .
                                          
                                       
                                    
                                 
                              
                           
                        Unfortunately, the MVP also typically involves extreme portfolio weights and many short positions.


                        Jagannathan and Ma (2003), add to the MVP approach the no-short constraints, and show that the non-negativity constraints can help in practice. They show that each of the non-negativity constraints is equivalent to reducing the estimated covariance of the asset under consideration with other available assets. As stocks with high positive covariances tend to be held short, any positive estimation error in the covariance estimate may induce suboptimal short position. Thus, imposing the non-negativity constraints reduces the portfolio asset misallocation due to sampling errors. Moreover, they show that imposing upper bounds on the investment proportions reduces the sampling errors and achieve an effect which is similar to the effect induced by parameter shrinkage methods (for more on the shrinkage method, see, for example, Ledoit & Wolf (2003)). In this paper we present the performance of the MVP approach with and without the short-selling constraints.

The naïve 1/N strategy is perhaps the world’s first portfolio diversification advice, which is about 1500years old.
                           3
                           The Babylonian Talmud recommends: “Man should always divide his wealth into three parts: one-third in land, one-third in commerce and one-third retained in his own hands” (Baba Metzia 42a), see also Levy and Sarnat (1972), p. 3.
                        
                        
                           3
                         While Green and Hollifield suggest ignoring the sample mean returns in seeking the optimal investment weights, the naïve approach suggests ignoring all historical information and to simply invest 1/N in each of the N available assets. Thus, this method implicitly assumes that the sampling errors of the means and variance covariance matrix are very large, hence to protect against possible extreme non-optimal investment policies, it is recommended to diversify equally between the N available assets. In out-of-sample analysis the 1/N diversification strategy may have merits when the distributions of returns are very unstable. For the discussion of the performance of the 1/N strategy for small and large number of assets see Duchin and Levy (2009), DeMiguel et al. (2009a), and Kritzman et al. (2010). Tu and Zhou (2011) suggest combining naïve diversification with other optimization strategies by taking the portfolio weights as a weighted average between the naïve weights and the weights suggested by the optimization strategy.


                        Michaud (1989, 1998) suggests the following procedure in order to avoid large sampling errors. First, estimate the sample means and the sample variance covariance matrix. Then draw T observations from a multivariate normal distribution with these sample parameters, i.e. generate a resampled history of T periods. Next, calculate the various parameters as well as the optimal investment weights based on this resampled history. The weights are constrained to be non-negative in this optimization. Repeat this procedure 500 times, hence obtaining 500 vectors of investment weights. Then, average the portfolio weight for each asset across these 500 vectors. Averaging out 500 times for each portfolio weight attenuates the extreme weights due to sampling errors.

In a nutshell, this method takes into account the fact that the estimation error regarding the mean return induces an increased estimation of the variance (and covariance). For example, suppose that in one sample we obtain a mean return of 10% and a standard deviation of 20%, and that in another sample we obtain a mean return of 15% and the same standard deviation of 20%. Taking into account the fact that the location of the distribution may be centered either about 10% or about 15% provides a distribution with a variance larger than 20%, which has to be taken into account in deriving the optimal investment weights. The Bayesian method takes this factor into account in the parameters’ estimation procedure. The Bayesian method can be applied with various priors. Here we employ the diffuse prior as in Markowitz and Usmen (2003). For more details on the Bayesian method see Markowitz and Usmen (2003) and Harvey et al. (2008).

The solution to the MV optimizer as in Eq. (1) typically leads to extreme portfolio weights, especially when the number of assets is large. These extreme weights, in turn, imply that the parameter estimation errors usually lead to poor portfolio performance. To mitigate this problem it has been suggested to impose constraints on the portfolio weights (Frost & Savarino, 1988; Jagannathan & Ma, 2003). Namely, one can add the following constraint to optimization problem (1):
                           
                              
                                 |
                                 
                                    
                                       x
                                    
                                    
                                       i
                                    
                                 
                                 |
                                 ⩽
                                 α
                                 
                                 for
                                 
                                 all
                                 
                                 i
                                 ,
                                 
                                 i
                                 =
                                 1
                                 ,
                                 2
                                 ,
                                 …
                                 ,
                                 N
                              
                           
                        where α is a positive constant and N stands for the number of assets under consideration. Alternatively, one can take the naive 1/N portfolio as the benchmark and impose the following constraint:
                           
                              (3)
                              
                                 
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                i
                                             
                                          
                                          -
                                          
                                             
                                                1
                                             
                                             
                                                N
                                             
                                          
                                       
                                    
                                 
                                 ⩽
                                 α
                                 ,
                                 
                                 for
                                 
                                 all
                                 
                                 i
                                 ,
                                 
                                 i
                                 =
                                 1
                                 ,
                                 2
                                 ,
                                 …
                                 ,
                                 N
                                 .
                              
                           
                        This formulation is natural as some specific diversification policies emerge as special cases: the case of α
                        =0 implies the naïve portfolio, which is the benchmark case of “zero information” about the ex-ante parameters. The larger α, the looser the constraint, and for α
                        →∞ we are back to the unconstrained MV optimizer, which is optimal in the other extreme case where perfect information about the ex-ante parameters is available.

Each of the above six methods has its pros and cons. While the performance of each of these methods has been previously studied, there is no clear consensus about the relative ranking of their performance. This is for two main reasons. First, most studies compare two or three methods, but not all six (which, with and without short-selling, increases to eight methods). Second, different studies employ different methodologies and different sample periods to evaluate performance. For example, Jagannathan and Ma (2003), using out-of-sample analysis, show that the minimum variance portfolio with non-negativity constraints has a higher Sharpe ratio than the 1/N naïve strategy. Moreover, the minimum variance strategy with non-negativity constrains performs as well as shrinkage methods. DeMiguel, Garlappi, Nogales, and Uppal (2009b) employ out-of-sample analysis to compare the performance of various strategies, and show that imposing a constraint on the portfolio norm can improve performance relative to the naïve portfolio.

As discussed in the introduction, out-of-sample analysis may be very sensitive to the sample period employed. Therefore, several studies assume a stable return distribution, which is known to a “referee” evaluating ex-ante performance, but not to the investors who observe a single sample period of returns drawn from this distribution. Frost and Savarino (1988) employ this framework and assume various specific utility functions to calculate the certainty equivalent induced by different investment strategies. Their results depend on the assumed risk aversion parameter; however, they show that imposing a uniform upper bound constraint on the investment weight of each security increases the certainty equivalent in comparison to the case of no upper bound constraint. Thus, imposing an effective upper bound improves performance because it avoids the consequence of large sampling errors. Three other studies employing the stable distribution research methodology are those by Michaud (1989), Markowitz and Usmen (2003), and Harvey et al. (2008). While Markowitz and Usmen reveal a clear advantage of the resampling method over the diffuse Bayesian method, Harvey, Liechty and Liechty cast doubt on this result, reporting a more balanced performance of the two methods, with some advantage to the Bayesian method.

Using the stable distribution framework with a referee, in this paper, we present a comparison of all six methods, as well as the two new methods suggested in the next section, in a unified setting. This comparison provides a bird’s-eye perspective on the relative standing of the various optimization methods.

The idea in both new methods is to impose more stringent constraints on stocks with relatively high standard deviations, as the estimation errors for these stocks’ parameters, and hence the potential economic loss, are larger than for stocks with relatively low standard deviations. Below we describe the two suggested new methods, and then provide the intuition and motivation for them with a numerical example.

In the VBC method we suggest replacing the homogeneous constraint 
                           
                              
                                 
                                    
                                       
                                          
                                             x
                                          
                                          
                                             i
                                          
                                       
                                       -
                                       
                                          
                                             1
                                          
                                          
                                             N
                                          
                                       
                                    
                                 
                              
                              ⩽
                              α
                           
                         with:
                           
                              (4)
                              
                                 
                                    
                                       
                                          
                                             
                                                x
                                             
                                             
                                                i
                                             
                                          
                                          -
                                          
                                             
                                                1
                                             
                                             
                                                N
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             i
                                          
                                       
                                    
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                 
                                 ⩽
                                 α
                                 ,
                                 
                                 for
                                 
                                 all
                                 
                                 i
                                 ,
                                 
                                 i
                                 =
                                 1
                                 ,
                                 2
                                 ,
                                 …
                                 ,
                                 N
                                 .
                              
                           
                        where 
                           
                              
                                 
                                    σ
                                 
                                 
                                    ¯
                                 
                              
                              ≡
                              
                                 
                                    1
                                 
                                 
                                    N
                                 
                              
                              
                                 
                                    ∑
                                 
                                 
                                    i
                                    =
                                    1
                                 
                                 
                                    N
                                 
                              
                              
                                 
                                    σ
                                 
                                 
                                    i
                                 
                              
                           
                         is the average standard deviation of all stocks. Eq. (4) implies that the higher σ
                        
                           i
                         (relative to the average standard deviation) the tighter the constraint imposed on the weight of stock i. Note that if all stocks have the same standard deviation, the VBC method reduces to the homogeneous constraint method, as in Eq. (3).

The VBC method suggests that the higher the asset’s variance the tighter the imposed constraint on its weight. Thus, it implies identical constraints for all stocks with the same standard deviation. Recalling that the goal is to find a set of constraints which maximizes the ex-ante Sharpe ratio, this may be suboptimal, because the contribution of different stocks with the same standard deviation to the portfolio’s Sharpe ratio may be different. In addition, the VBC method does not attach any “cost” to deviations from the benchmark naïve weights, as long as these deviations are within the allowed bounds. The GVBC method addresses these two issues by imposing a single global constraint (rather than a specific constraint on each stock) on the vector of portfolio weights:
                           
                              (5)
                              
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          N
                                       
                                    
                                 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   i
                                                
                                             
                                             -
                                             
                                                
                                                   1
                                                
                                                
                                                   N
                                                
                                             
                                          
                                       
                                    
                                    
                                       2
                                    
                                 
                                 
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             i
                                          
                                       
                                    
                                    
                                       
                                          
                                             σ
                                          
                                          
                                             ¯
                                          
                                       
                                    
                                 
                                 ⩽
                                 α
                                 .
                              
                           
                        Note that the higher the asset’s standard deviation, the more costly are deviations of its weight from 1/N. Therefore the GVBC optimization will tend to restrict extreme positions for such stocks. This is similar to the VBC method. However, in contrast to the VBC method, we may allow different deviations for stocks with the same standard deviations. For example, suppose that we have two stocks with the same standard deviations, but one with a higher sample mean than the other. The GVBC method will allow a larger deviation for the stock with the higher mean, and thus will assign a higher weight for this stock. Thus, we have global constraint (α) and each stock will get a different share of this α, depending on its standard deviation as well as its contribution to the Sharpe ratio. The following example illustrates the various constraints and their impact of the investment weights.

The following example may help explain the logic behind the VBC and GVBC methods, and contrast them with one another and each one of them with the standard homogeneous constraints method.

Consider the six stocks with sample parameters given in Table 1
                        . Assume for simplicity of the presentation that the sample correlations are zero. Column (3) in the table shows the portfolio weights obtained by maximizing the portfolio’s Sharpe ratio with the standard unconstrained MV optimization (Eq. (1)). Column (4) shows the equal weights of the naïve portfolio, and column (5) depicts the weights with the standard homogeneous constraints method, as given in Eq. (3), with α
                        =2%. As column (3) shows, the unconstrained optimization implies that the weights of the first three stocks are much lower than the naïve weight of 16.67%, while the weights of the last three stocks are larger than the naïve weight. Also, note that in this case the first three stocks have the same weight as they have the same parameters. The simple homogenous constraint with α
                        =2% allows weights to deviate by no more than 2% from 16.67% (see Eq. (3)), which leads to the first three stocks’ weights being constrained at 16.67%−2%=14.67%, and the last three stocks’ weights at 16.67%+2%=18.67%. Recalling that the goal is the maximization of the Sharpe ratio, if the constraints are not binding it is possible that the stock with the higher mean will have a higher weight. However, if the constraint is binding, as in our example, the stock’s mean, namely its contribution to Sharpe ratio, does not affect the weight.

The homogeneous constraints method, however, does not take into account the fact that the stock’s standard deviations are different – which means that we have higher confidence about the parameters of the first four stocks (with σ
                        =8%) than we do about the parameters of stocks 5 and 6 (with σ
                        =12%). As the larger the standard deviation the larger the potential economic damage induced by sampling errors corresponding to the mean return estimates, we suggest the VBC method. Indeed, the VBC method (Eq. (4)) takes the different standard deviations into account, as revealed by the weights in column (6). If no constraints were imposed, the weights of stocks 4–6 would all have been higher, and the weights of stocks 1–3 would have been lower (see column 3). The weights under VBC shown in column (6), reveal, of course, perfect symmetry between the first three stocks. Notice, however, that the VBC method assigns a higher weight to stock 4 than to stocks 5 and 6, because of its lower standard deviation.
                           4
                           The average standard deviation of the six assets given in Table 1 is 
                                 
                                    
                                       
                                          σ
                                       
                                       
                                          ¯
                                       
                                    
                                    =
                                    9.33
                                    %
                                 
                              , thus the constraint on the first four stocks, with σ
                              =8%, is 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   i
                                                
                                             
                                             -
                                             
                                                
                                                   1
                                                
                                                
                                                   N
                                                
                                             
                                          
                                       
                                    
                                    ⩽
                                    α
                                    
                                       
                                          
                                             
                                                σ
                                             
                                             
                                                ¯
                                             
                                          
                                       
                                       
                                          
                                             
                                                σ
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    =
                                    2
                                    
                                       
                                          9.33
                                       
                                       
                                          8
                                       
                                    
                                    =
                                    2.33
                                    %
                                 
                              . The constraint on the last two stocks, with σ
                              =12%, is 
                                 
                                    
                                       
                                          
                                             
                                                
                                                   x
                                                
                                                
                                                   i
                                                
                                             
                                             -
                                             
                                                
                                                   1
                                                
                                                
                                                   N
                                                
                                             
                                          
                                       
                                    
                                    ⩽
                                    α
                                    
                                       
                                          
                                             
                                                σ
                                             
                                             
                                                ¯
                                             
                                          
                                       
                                       
                                          
                                             
                                                σ
                                             
                                             
                                                i
                                             
                                          
                                       
                                    
                                    =
                                    2
                                    
                                       
                                          9.33
                                       
                                       
                                          12
                                       
                                    
                                    =
                                    1.55
                                    %
                                 
                              . Accordingly, the weights of the last two stocks are 16.67%+1.55%=18.22%, and the weight of stock 4 is 16.67%+2.33%=19%. Note that in addition to the individual constraints on each of the stocks, we also have the constraint 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          6
                                       
                                    
                                    
                                       
                                          x
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    1
                                 
                              . This means that the total positive deviations from 1/N must be balanced with the total negative deviations. In this example, the direct constraints on the positive deviations (stocks 4–6) are more stringent than the constraints on the negative deviations (stocks 1–3), because of the higher standard deviations of stocks 5 and 6. Thus, the effective constraint on the first three stocks is not ∣x
                              −16.67∣⩽2.33, but rather the combination of the constraint 
                                 
                                    
                                       
                                          ∑
                                       
                                       
                                          i
                                          =
                                          1
                                       
                                       
                                          6
                                       
                                    
                                    
                                       
                                          x
                                       
                                       
                                          i
                                       
                                    
                                    =
                                    1
                                 
                               plus the constraints on stocks 4–6.
                        
                        
                           4
                        
                     

Finally, like in the homogeneous constraints method, the stock mean return may affect the weight only if the constraint is not binding. A comparison of the weight of stocks 5 and 6 reveals that the same weight is assigned to these two stocks despite the fact that both have the same standard deviation and stock 6 has a higher mean. This occurs because the constraint on the weight given by Eq. (3) is binding. Thus, the mean return of the stock by the simple constraint and by the VBC methods may or may not affect the optimal weight depending whether the constraint is binding.

We believe that taking account of the heterogeneous standard deviations offers an improvement relative to the homogeneous constraints method. However, this method still misses an important point: the fact that the relative contribution of different stocks to the portfolio performance (Sharpe ratio) is not the same. Specifically, the mean returns of the various assets are completely ignored in case where the imposed constraints are binding. For instance, the VBC method assigns the same weight of 18.22% to stocks 5 and 6, even though stock 6 has exactly the same sample standard deviation as stock 5, but a higher sample mean. Common sense would suggest assigning a higher weight to stock 6 than to stock 5 in this case. Indeed, this is exactly what the GVBC method yields, as shown in column (7). By the GVBC method deviations from the naïve portfolio weights have a quadratic cost, and the only constraint is on the total cost. This is opposed to the homogeneous constraints and VBC methods, that impose a separate boundary constraint for each stock. Thus, the GVBC methods gives more flexibility to allow larger deviations for stocks that contribute more to the portfolio performance. In addition, the continuous cost function seems to be more reasonable than the binary boundary constraint–it assigns a cost to any deviation, rather than being indifferent to any deviations within the allowed limits, as in the homogeneous and VBC methods. Chow (1995) makes a similar argument about the drawbacks of sharp portfolio constraints in a context where one of the investor’s objectives is the minimization of tracking error.

@&#METHODOLOGY@&#

We conduct a “horse race” between the various portfolio optimization strategies described in the previous two sections. There are N assets with true mean excess returns μ and covariance matrix Σ, which are known to the “referee”, but not to the investors employing the different strategies which are based on sample parameters. In order for the parameters to be realistic, we take μ and Σ as the sample estimates of actual assets: one set of assets we use is the set stocks of 100 largest U.S. firms (according to December 2011 market values) with complete 20-year monthly return records, and the other set is composed of the 48 Fama–French industry portfolios.
                           5
                           See http://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library. html.
                        
                        
                           5
                         Parameters are estimated for monthly returns, in the period 1992–2011 for the first set, and the period 1969–2011 for the second set.


                        μ and Σ are considered as the true parameters, and the referee evaluates the ex-ante performance with respect to these parameters. The investors do not know the true parameters. They observe a sample of T returns for each asset, drawn from a multivariate normal distribution with the true parameters. Thus, they observe sample parameters which are generally different from the true parameters. Given these sample parameters, each strategy S yields a set of portfolio weights, x
                        
                           s
                        , as explained in the previous sections. These weights, in turn, determine the true ex-ante portfolio performance for the strategy, calculated with the true parameters: 
                           
                              
                                 
                                    μ
                                 
                                 
                                    P
                                 
                              
                              =
                              
                                 
                                    x
                                 
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              μ
                              ,
                              
                                 
                                    σ
                                 
                                 
                                    P
                                 
                                 
                                    2
                                 
                              
                              =
                              
                                 
                                    x
                                 
                                 
                                    s
                                 
                                 
                                    ′
                                 
                              
                              Σ
                              
                                 
                                    x
                                 
                                 
                                    s
                                 
                              
                           
                        .

We repeat this procedure for 100 different samples, drawn from the same true multivariate distribution. The performance of each strategy is evaluated across all 100 scenarios. The Sharpe ratio can be calculated in two ways:
                           
                              (1)
                              Calculate the Sharpe ratio for each sample, and then calculate the average Sharpe ratio across all 100 samples. By this approach one can also calculate the variation of the Sharpe ratio across the 100 samples, as well as the relevant confidence interval.

For each sample we have a different normal distribution of portfolio returns. Calculate the portfolio mean return and standard deviation for each sample. Then construct the return distribution which is a mixture of these 100 distributions, each with weight 1/100. Calculate (numerically) the Sharpe ratio of this “grand” mixed distribution.

We argue that method (2) described above is the correct method, and that employing method (1) may yield substantially misleading results. A simple example may help demonstrate this point. Suppose that there are only two samples, and that a given strategy (one of the ten strategies considered in this paper) yields μ
                        =2% and σ
                        =2% in one sample, and μ
                        =10% and σ
                        =2% in a second sample. The Sharpe ratios are 1 and 5, respectively,
                           6
                           Note that all returns are in excess of the risk-free rate.
                        
                        
                           6
                         and the average Sharpe ratio, as calculated by method (1), is 3. However, investor actually faces a mixed distribution, with each of the two distributions occurring with a probability of 1/2. The actual return distribution generated by this strategy (assuming for simplicity that these are the only two scenarios possible) is a mixed distribution with mean 6% and a standard deviation exceeding 4%, much higher than the standard deviation corresponding to each of the two samples, which is equal to 2. The standard deviation of the grand distribution is relatively large (hence the Sharpe ratio is relatively low) because of the differences in the means across the two states.
                           7
                           The standard deviation can be numerically calculated in this case, and it is 4.4%. Thus, the Sharpe ratio is 6/4.4=1.36.
                        
                        
                           7
                         Thus, the actual Sharpe ratio, as produced by this strategy is less than 1.5, less than half of the Sharpe ratio averaged across states.

Therefore, in this paper we employ method (2): we look at the return distribution which is a mixture of the distributions in all 100 sample scenarios, and then we calculate the single Sharpe ratio for this “grand” distribution. I.e. for each scenario we have a different distribution, and we look at the mixed distribution, which is the average of all 100 distributions.
                           8
                           In general, the mixed distribution can be different from a normal distribution, as in the example above with a two-peaked distribution. However, we find that the mixed distributions across the 100 states, as generated by the various strategies, are very close to normal, and normality cannot be rejected. This is important, because we are working in the MV framework and employing the Sharpe ratio as the performance measure.
                        
                        
                           8
                         We should stress that the mixed distribution is the true distribution that the investor actually faces: given the investor’s strategy, each sample implies certain portfolio weights, and thus a distribution of returns; as each sample has the same probability of being realized, the investor faces the grand distribution of returns.

@&#RESULTS@&#

We compare 10 optimization methods: the MV optimizer, the MV optimizer with no short positions, the minimum variance portfolio, the minimum variance portfolio with no shorts, naïve optimization, Resampling, Bayes, homogeneous constraints, and the two new methods suggested: the variance based constraints (VBC), and global variance based constraints (GVBC). The results of the last three methods, based on portfolio weight constraints, depend on the value of the constraint imposed, α. Fig. 1
                         shows the Sharpe ratios of the various strategies as a function of α, where the assets are the 100 largest U.S. firms. Obviously, the results for the first seven strategies, which do not depend on α, appear as horizontal lines in the figure.

Looking first at the investment strategies which are independent of the constraint, α, we find that the best strategy out of these seven strategies is the MV optimizer with no short positions, followed by the minimum variance portfolio with no short positions, the Resampling method, the naïve optimization and the minimum variance portfolio with short (not shown in the figure because of the break in the y-axis, but see the performance ranking in Table 2
                        ). The worst strategies are the MV optimizer (with short) and Bayes, which are very close.
                           9
                           In fact, we find that the Bayes method always yields results very close to that of the MV optimizer. This can be interpreted in the following way. The Bayes method adds to the sample variance a correction term which is the variance of the sample mean across samples (and similarly for covariances, see Eqs. (7)–(9) in Markowitz & Usmen (2003)). The variance of the sample mean is σ
                              2/T, where T is the sample size. Thus, the correction to the variance is of order 1/T, which is typically very small. For example, with T
                              =100 observations the correction to the sample variance is only 1% of the sample value. Hence, the Bayes weights are very similar to the MV optimizer weights.
                        
                        
                           9
                         The result revealing that the Resampling method outperforms the Bayes strategy is consistent with the results reported by Markowitz and Usmen (2003).

Now let us turn to the performance of the three constraints strategies, which are function of the size of the constraint, α. For very small α all three strategies converge to the naïve strategy, as the portfolio weights converge to 1/N. For very large α, the strategies converge to the unconstrained MV optimizer, as the constraints become ineffective (this is not evident in the figure, because this convergence occurs at very high values of α). The most important result is that there is a range of α where all three constraints methods outperform all other methods.

Two comments regarding the choice of α are called for. First, note that the investor does not know in advance neither the optimal value of α, nor the corresponding Sharpe ratio, which are known only to the referee. Therefore, the selected value of α, which is at the investor’s discretion, may be non-optimal. However, the precise purpose of this exercise is to calculate the Sharpe ratio for various values α, hence the optimal value is revealed at the end of the exercise by the referee, and this knowledge can be adopted in practice. Those investors who mistakenly considered employing a non-optimal α value before seeing the results of this study, may adjust their α according to the results of this paper. Secondly, one should not expect a single value of α to be optimal in all cases. The optimal value will generally depend on the nature of the assets under consideration. For example, the higher the variance of the assets’ returns, the smaller the optimal value α one would expect. Therefore, when a portfolio of portfolios (e.g., a portfolio of ETFs) is considered, α would generally be relatively large, as the variance of the ETFs is typically small relative to the variance of individual assets. The optimal value of α may also depend on the number of assets included in the portfolio. This is particularly true for the GVBC method where a single constraint is imposed on all assets included in the portfolio. Hence, each strategy should be evaluated at the value of α that maximizes its Sharpe ratio. Although we present the Sharpe ratio for various values of α, only the value which maximizes the Sharpe ratio is relevant to the investor.
                           10
                           We are very grateful to the anonymous referee for raising this point.
                        
                        
                           10
                         
                        Fig. 1 reveals that the best performance is obtained by the GVBC method with α
                        =4%.
                           11
                           Note that the three curves are not perfectly smooth due to a finite number (100) of samples employed in the analysis. As one increases the number of samples, smoother curves are obtained. However, even with 100 samples, the difference in the Sharpe ratios obtained for different sets of 100 samples is very small, and thus the reported values are very close to the true Sharpe ratios.
                        
                        
                           11
                        
                     


                        Fig. 2
                         shows the MV frontier with the true parameters, which are known to the referee but not to the investors, as well as the performance corresponding to the investment strategies under consideration. The figure reveals that the GVBC method has both higher mean and lower standard deviation relative to most other methods. The only two methods that yield lower standard deviation are the minimum variance portfolio with no short-selling and the resampling strategies. These strategies, however, also yield considerably lower mean returns, therefore they underperform relative to the GVBC method.

Another observation emerging from this figure is related to the economic loss due to the estimation errors. Even for the best investment strategy, GVBC, the mean return is about 1.3% per month while a hypothetical referee who possesses the information on the true parameters makes about 2.6% per month for the same level of risk (see Fig. 2). This dramatic difference indicates how worthwhile it may be to invest in analysis and data collection to improve the parameter estimates, if these efforts do indeed provide better estimation. However, in practice the potential improvement is probably very limited, due to the difficulty of obtaining more accurate estimates.


                        Table 2 reports the Sharpe ratios of the 10 strategies. In order to examine the dependence of the results on the number of assets, we repeat the analysis for 20 stocks and 5 stocks, randomly drawn from the set of 100 stocks. In general, the Sharpe ratio increases with the number of assets, because of the greater benefit of diversification. As the table reveals, the three constraints methods yield the highest Sharpe ratios in all three cases, and the GVBC method always ranks first. The differences between the various optimization methods are most pronounced when the number of assets is large. In the case of only 5 assets the differences across strategies are rather small, except for the unconstrained MV optimizer and Bayes methods, which are always significantly worse than the rest.


                        Table 3
                         reports the short positions for each of the six strategies which allow short-selling (the naïve, resampling, MV and mean–variance optimization with no short-selling strategies are obviously absent in Table 3). This information is important, as some investors would reject any investment strategies with large short positions. Moreover, the large short position may indicate a position which is due to sampling errors, hence may shed some light on the performance reported in Table 2 and on the importance of the imposed constraints on the investment weights.

The left hand side of the table report the average percentage of assets in short position. (Recall that we have 100 samples drawn, and each strategy yields a portfolio in each one of these cases). For example, with 100 assets and the MV optimization, on average 47.5 of the assets (which in the 100 asset case is also equal to 47.5%) are held in short positions, and 52.5 of the assets are held long. Two phenomena emerge from this part of the table: the percentage of assets in short positions increases with the number of assets under consideration, and for the 100 asset case all methods yield a percentage of 38.3–48.7% of the assets held short. This is consistent with the results of Levy (1983) and Levy and Ritov (2011). Thus, considering short positions as a deficiency, it seems that for large portfolios all six strategies suffer from this deficiency.

However, the right hand side of the table is more meaningful for examining the short position effect, as it reports the percentage of the investment in short positions rather than the percentage of the number of assets in short position. Here we obtain large differences between the various methods. For example, with the MV optimization, for each $1 investment we have $13.10 in short position (and therefore $14.10 in long position). Thus, the short position in this case is 1,310%. These extreme weights explain the low Sharpe ratios of the MV optimizer, Bayes method, and the minimum variance portfolio. With the three constraints methods the short positions are much smaller, and are less than 100%. Short positions are lowest in the GVBC method.

In practice, investors may consider even these short positions as too large. Table 4
                         reveals the Sharpe ratios of the constraints methods when we add the no-short constraint, and compares them with those of the other no-short strategies. In this case, the no-short VBC and no-short MV optimizer yield the highest Sharpe ratios, followed by the no-short GVBC and homogeneous constraints with no short. A comparison of Tables 2 and 4 shows that imposing the additional no-short constraint hampers the constraints methods’ performance. Thus, it seems that the constraints imposing weights not to be extreme (as in Eqs. (3)–(5)) are sufficient, and that some modest short positions enhance performance.

In order to examine how the different strategies compare when the assets are themselves portfolios, rather than individual stocks, we apply the analysis to the set of 48 Fama–French industry portfolios. The results are shown in Fig. 3
                         and Table 5
                        . Fig. 3 shows the Sharpe ratios when the sample observed by the investor consists of T
                        =120 periods (the same as in the preceding 100-stock case). In Table 5 we also report the performance with T
                        =60 and T
                        =30 periods. Obviously, the lower T, the larger the estimation errors and the lower the Sharpe ratio for all strategies, except for the naïve strategy which does not dependent on the sample at all. It is interesting that the ranking is relatively stable across the different values of T: GVBC is first, VBC is second, and the homogeneous constraints method is third in all cases. This is very similar to the results obtained for the 100 stocks. Fig. 3 shows that performance is best for values of α that are higher than in the case of individual stocks. The optimal value is in the range 15–20%. This is most likely due to the fact that the industry portfolios are less volatile than individual stocks: the average industry portfolio monthly standard deviation is 5.5%, compared to an average of 8.8% for individual stocks. This lower volatility implies lower estimation error, and thus one does better with looser constraints in this case.

@&#CONCLUSION@&#

This paper suggests two new portfolio optimization methods that are extensions of the homogeneous constrained optimization method: the Variance-Based Constraint (VBC) method, and the Global Variance-Based Constraint (GVBC) method. The idea behind the VBC method is straightforward: for assets with relatively high variances the parameter estimation errors are relatively large, hence the potential economic loss induced by sampling errors is relatively large. Therefore, the higher the asset’s variance, the tighter the constraint imposed on the asset’s weight. Put differently, we have more confidence in the parameters of assets with lower sample variances, and therefore we allow the weights of these assets to deviate more from the “zero information” benchmark of the naïve 1/N weight.

The advantage of the GVBC method relative to VBC is that rather than imposing a sharp boundary constraint on the weight of each asset, it assigns a quadratic cost to any deviation from the naïve weight, depending again on the variance, and it imposes a single global constraint on the total cost for all assets. This allows imposing looser constraints on assets that contribute more to the Sharpe ratio. It is important to emphasize that in the homogeneous constraints method and in the VBC method the mean returns of the various assets play no role in the optimization if the constraints are binding. In contrast, in the GVBC method, as there is a global constraint rather than a specific constraint on each asset, the higher the mean of an asset, other things being kept equal, the higher the weight of the asset. This gives an edge to the GVBC method over the other methods.

We compare the performance of 10 optimization methods: the unconstrained MV optimizer, no-short MV optimizer, minimum variance portfolio, no-short minimum variance portfolio, naïve optimization, resampling, Bayes method, homogeneous constraints on portfolio weights, VBC and GVBC. The comparison is done in a framework where there is a “referee” who knows the true return parameters, and investors who only observe a sample from the true distribution and form their portfolios according to one of the 10 strategies above. The investor constructs a portfolio based on sample parameters, and the referee then evaluates performance of the selected portfolio, based on the true parameters. We find that the constrained optimization methods generally outperform the other methods. The best results are obtained with the GVBC method. These results are robust to the length of the observed sample period, and the set of assets considered. The differences between the various methods are most pronounced when the number of assets is large.

It is well-known that imposing no-short constraints typically improves performance. This is certainly true for the MV optimizer and the minimum variance portfolio, methods that yield very extreme short positions if they are unconstrained. However, we find that the VBC and GVBC methods work best without imposing the additional no-short constraint. These methods yield relatively small short positions, and these moderate positions enhance portfolio performance.


                     Frost and Savarino’s (1988) classic title is: “For Better Performance: Constrain Portfolio Weights”. The main message of this study is an addition of three words to this title: For Better Performance: Constrain Portfolio Weights 
                        Globally and Differentially
                     .

@&#REFERENCES@&#

