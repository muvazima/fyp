@&#MAIN-TITLE@&#Pediatric decision support using adapted Arden Syntax

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           In 2004 we developed a pediatric computer based clinical decision support system, CHICA, using Arden Syntax medical logic modules (MLM).


                        
                        
                           
                           CHICA has run continuously for 10 years and has been used by 755 physicians, residents, fellows, nurse practitioners, nurses and clinical staff.


                        
                        
                           
                           There are 429 MLMs implemented in CHICA using the Arden Syntax standard.


                        
                        
                           
                           CHICA has served over 44,000 patients at 7 pediatric clinics in our healthcare system in the last decade and its MLMs have been fired 6182,700 times to produce and 5334,021 times to read patient documents.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Clinical decision support

CHICA

Arden Syntax

@&#ABSTRACT@&#


               
               
                  Background
                  Pediatric guidelines based care is often overlooked because of the constraints of a typical office visit and the sheer number of guidelines that may exist for a patient's visit. In response to this problem, in 2004 we developed a pediatric computer based clinical decision support system using Arden Syntax medical logic modules (MLM).
               
               
                  Methods
                  The Child Health Improvement through Computer Automation system (CHICA) screens patient families in the waiting room and alerts the physician in the exam room. Here we describe adaptation of Arden Syntax to support production and consumption of patient specific tailored documents for every clinical encounter in CHICA and describe the experiments that demonstrate the effectiveness of this system.
               
               
                  Results
                  As of this writing CHICA has served over 44,000 patients at 7 pediatric clinics in our healthcare system in the last decade and its MLMs have been fired 6182,700 times in “produce” and 5334,021 times in “consume” mode. It has run continuously for over 10 years and has been used by 755 physicians, residents, fellows, nurse practitioners, nurses and clinical staff. There are 429 MLMs implemented in CHICA, using the Arden Syntax standard. Studies of CHICA's effectiveness include several published randomized controlled trials.
               
               
                  Conclusions
                  Our results show that the Arden Syntax standard provided us with an effective way to represent pediatric guidelines for use in routine care. We only required minor modifications to the standard to support our clinical workflow. Additionally, Arden Syntax implementation in CHICA facilitated the study of many pediatric guidelines in real clinical environments.
               
            

@&#INTRODUCTION@&#

Preventive services are a critical part of pediatric care as they assure proper growth and development and early detection of remediable conditions. About half of outpatient visits for children in the US are for health maintenance. Logically, then, scores of preventive care guidelines for children exist [1–4]. Unfortunately, these guidelines are often not followed in routine care [5]. This is for two main reasons. First, guideline based care may often be overlooked because of less important, but more immediate problems, and second, the sheer number of primary care guidelines exceeds what can be done in the typical 18min well child visit [6].

In response to this problem, we developed the Child Health Improvement through Computer Automation system (CHICA) in 2004 [7]. CHICA is a computer-based clinical decision support system (CDSS) that has been operating for the last decade in practices of the Eskenazi Health System in Indianapolis, IN. CHICA uses a set of Arden Syntax [8,9] Medical Logic Module (MLM) or rules to produce a set of encounter documents for each patient visit. The first set is to select 20 questions that the patient's family answers in the waiting room, and the second set is to produce alerts and reminders to the physician [10,11]. We describe the adaptation of Arden Syntax to support this system [12] and the experiments that demonstrate its effectiveness.

First, we briefly describe CHICA and then our methods to represent a pediatric guideline using Arden Syntax in CHICA in detail. We also describe adaptation of the standard to support our clinical workflow and a brief description of the expected value prioritization scheme that we implemented to execute guidelines (encoded as MLMs) within the context of a patient visit. Lastly, we describe our minor modifications to the Arden Syntax standard and the design and development of our Arden Syntax parser.

@&#METHODS@&#

CHICA is a pediatric CDSS and front end to the Regenstrief Medical Record System (RMRS), an electronic medical record (EMR) established over 30 years ago [13]. However, CHICA is designed to work with any EMR and work is in progress on this front. At a patient's visit, CHICA generates an age-appropriate and patient-specific screening questionnaire that the patient family completes in the waiting room. The results from screening are then combined with information from patient's electronic medical record to generate patient specific recommendations and reminders for the physician for use during the clinical encounter.

The system integrates into clinical workflow seamlessly. At each visit, the patient registration system sends a HL7 (http://www.hl7.org/implement/standards/product_brief.cfm?product_id=143, Accessed: 9 September 2015) Admission Discharge Transfer (ADT) message to CHICA to trigger its clinical decision support. On receipt of this message, CHICA requests a download of the patient's medical record and applies a set of Arden Syntax MLMs [12] or rules to the data in order to generate patient and visit specific document forms. Because these forms are tailored (or adapted) to the patient but are used to return data to the system, we call them adaptive turnaround documents (ATAD) [10]. In essence, ATADs collect information from the patient or caregivers and provide tailored patient specific content to the providers.

The first ATAD form is the pre-screener form (PSF) (Fig. 1
                        ) and is administered to the patient family in the waiting room. The PSF contains up to 20 yes/no questions that address a wide range of clinical issues (Table 1
                        ). Each screening question on the PSF is selected when its corresponding MLM in the system concludes true. The questions are produced in both English and Spanish language with English versions of questions printed on one side and Spanish on the other [14]. Additionally, the nurse or medical assistant can record vital signs and other screening results on the PSF before the physician encounter. In the CHICA version up to now, the PSF was printed as a customized scan-able paper document (leveraging third party software—Automerge Publisher and Teleforms, originally Cardiff Teleform, now owned by HP (http://www.hpteleform.com/cardiff-teleform, Accessed: 9 September 2015). We have recently adapted the PSF output to an electronic tablet interface that displays the questionnaire and also toggles between languages [15]. Responses to the PSF questions, entered on tablets or scanned, are returned to the system as coded observations. This triggers CHICA to produce the second ATAD, the physician worksheet (PWS) (Fig. 2
                        ).

The PWS provides patient specific reminders and prompts to the physician and contains up to six reminders, each corresponding to an MLM in the system. Each reminder consists of a “stem” that explains the purpose of the alert and up to six “leaves” with check boxes. The physicians can record their responses using these check boxes. These responses are stored as structured data in CHICA for future patient visits and follow up care. Starting in June 2015, the scan-able PWS will be replaced by an electronic PWS (ePWS) that is web based and accessible via a link from our EMR. In the ePWS version, clinician responses to check boxes are translated to human readable responses to populate the physician's note in the EMR. In both versions of the PWS, clinically relevant data e.g. vitals sign, pain and allergy information for a patient are exported to the EMR.

CHICA also produces “Just-in-Time” handouts (JITs) for the clinical encounter (either automatically or on demand). JITs are a set of printed materials that help the physician with patient assessment or education. In general, each JIT is associated with a physician reminder and is used for patient education or decision support. For example, a smoking cessation JIT may be printed for a parent who smokes or an age appropriate developmental screening instrument may be printed for a family that has developmental concerns.

A rule or a group of rules encoded as Arden Syntax MLMs represents a computationally enabled pediatric guideline. Each MLM contains a Knowledge Category that encodes data that need to be retrieved from patient databases, logic that is to be applied to these data, and action that is to be performed by the MLM (e.g. write physician reminder text on PWS) if the logic evaluates TRUE. The MLM also contains Library Category for metadata to provide hyperlink(s) to the corresponding guideline if available. An example of encoding a guideline for smoking cessation counseling (as implemented in CHICA) is described in Downs et al. [16]. Encoding of more complex guidelines using Arden Syntax in CHICA, such as for Developmental screening and ADHD diagnosis and management in school aged children, are described in our other work [17,18].

The CHICA knowledge base represents guidelines based functionality in modules. The first module that we developed covered the vast majority of routine preventive services for children [1]. Subsequently, modules have been developed for detecting and managing maternal depression, parental smoking, obesity, adolescent depression, developmental delay, autism, attention deficit hyperactivity disorder, domestic violence, and many others. Please see Table 1 for a complete list.

When a new CHICA module is developed, we typically start with a standard algorithm [19] describing the actions to be taken (Fig. 3
                        ). Then MLMs are authored to represent different portions of the algorithm. For example in Fig. 3, a PSF MLM assesses whether environmental tobacco smoke exposure is documented in the database (box 1) and, if it's not known, the MLM concludes true and writes a question on PSF, asking if there is a smoker in the home. If the family answers yes to this question, this observation (smoker_in_home=yes) is stored in the EMR. Then an MLM for the PWS queries whether there is a smoker in the home by checking the last observation (smoker_in_home). This is generally done during the same patient visit. If smoker_in_home equals yes, the MLM concludes TRUE and writes a prompt to the physician to assess the smoker's readiness to quit. In this way, arbitrarily complex algorithms can be followed over multiple visits. Using the electronic tablet based interface [15], the current version of CHICA is able to support “fillable JITs.” These JITs are produced based on screening answers from the PSF in the same patient visit. Due to limitations of scannable paper, the current implementation of the PWS lacks functionality to model multi-stage advice to physicians in the same patient visit. However, work is in progress for implementing such functionality by implementing an electronic version of the PWS.

CHICA implements an expected value prioritization scheme that gives each MLM a unique priority score. The unique score allows for the most relevant and important questions to be selected for each patient at each visit. The priority score is based on four factors: (1) the probability that a patient (meeting the conditions of the MLM) will have a condition, (2) the seriousness (or disutility) of the condition, (3) the effectiveness of detecting or alerting the physician to the condition, and (4) the evidence (or subjective probability) of the intervention's effectiveness. Each of these terms (probabilities or utilities) can be scaled from zero to one. So the expected value of each question or prompt is the product of the terms. Thus, each MLM is given a priority based on its expected value relative to the other MLMs [20].

In practical terms, the prioritization scores are developed by a small group of pediatricians. Typically, this is two general pediatricians with training in informatics and health services research and one or more pediatricians with specialization in the topic of interest. Usually, implemented protocols come from published, evidence based (or best practice) guidelines for which evidence on prevalence and effectiveness are often available. However, when they are not, the expert judgment of the panel is used. Achieving consensus has not been a problem. Likewise, disutility measures can often be derived from existing literature [21,22]. For most outcomes, a utility for a comparable outcome can be identified. When it cannot be identified, expert judgment is, again, the fall back. Two of the authors (SMD, AEC) work closely with the American Academy of Pediatrics (the most important source of child health guidelines) through their Partnership for Policy Implementation, a project of the Child Health Informatics Center (http://www2.aap.org/informatics/chic.html, Accessed: 26 June 2015). Through this connection, it has been possible for our group to keep track of changes in evidence and update the Arden Syntax MLMs as necessary.

The static prioritization scheme described above will eventually be replaced by a more dynamic prioritization scheme in CHICA [23]. Such a scheme will allow for priority scores of each MLM to be computed on the fly, considering individual patient's evidence of risk and other factors mentioned above. The dynamic prioritization scheme will adjust the priority score based on known risk factors at the time of the visit, for example, knowing that a child has anemia would raise the priority of blood lead screening in real-time because anemia increases the risk of lead intoxication.

The CHICA algorithm for producing each of the ATADs proceeds as follows: (1) CHICA selects all MLMs covering an age range that contains the patient's age; (2) CHICA then orders the MLMs by priority score; (3) Beginning with the MLM with the highest expected value, CHICA evaluates each rule; (4) If the MLM concludes TRUE, then CHICA adds the corresponding question or prompt to the ATAD form; and (5) Moves on to the next MLM until 20 questions (PSF) or 6 prompts (PWS) have been selected for the ATAD at hand.

Creative use of Arden Syntax was essential to implement the clinical workflow described above and run the randomized trials described elsewhere [17,18,24,25]. First, we defined and used a system variable called “mode.” The mode variable is read as a data source to an MLM whenever it is invoked. On invocation each MLM tests the mode variable to check whether it has been set in “produce” mode generating questions for the patients or prompts for the physician, or “consume” mode for reading the user (i.e. patient or physician) responses. Using the mode variable, each MLM is able to link the action of displaying a question or prompt with storing the user's response in the EMR. For instance in the MLM fragment below, to assess if a child under 2 years of age watches TV, both the data and logic slots evaluate the mode variable and, based on its value, evaluate different expressions.


                        
                           
                        
                     

We also created study variables for clinical trials. CHICA can randomize patients, physicians, or clinics into any number of study arms (see below). Using the study variable, MLMs can be written to test which study arm it is being applied to and conclude true or false accordingly. This allowed us to run randomized controlled trials at the patient level or clustered by physician or clinic. For example, in the MLM snippet below, the study variable (e.g. ADHDStudy) for the patient at hand, is read from the corresponding record in CHICA. If the patient were randomized to the “control” arm (i.e. at his or her first visit at the start of this study, and if he or she met the age coverage) then the MLM concludes false.


                        
                           
                        
                     

We created three minor modifications to the Arden Syntax standard for use in CHICA workflow. The first modification was for each MLM to specify an age limit with two constructs, Age_Min and Age_Max. For each MLM, these two constructs are stored in special slots at the end of the Action slot in CHICA's Arden Syntax implementation. Please see the code snippet above. The two constructs expediently select all MLMs covering an age range containing the patient's age (as described in the execution algorithm above—step 1). The second modification is expansion of the Arden Syntax prioritization score from 100 to 1000 (please see priority score of 128 for the MLM snippet above). This expansion was needed so that each MLM could be assigned a unique priority score (based on its four factors defined above) for the expected value prioritization scheme implemented in CHICA.

Additionally, we adapted the use of the concatenation operator, vertical pipes (||) in the Arden Syntax standard, to define and implement a specialized local variable (e.g. ||variable||). The intent of this local variable is to define a placeholder to assemble a text string on execution so that customized write statements in the action slot can be written. For instance in the write statement in the MLM fragment below, the variable ||firstname|| in the action slot is replaced with its assigned value, i.e. patient's first name (populated by a prior function call) on execution. Please note that in the example below, the use of quotes (“”) to specify the write statement text is idiosyncratic in CHICA's implementation of the Arden Syntax parser. A newer version of the parser (under development) will rectify this incorrect behavior and the concatenation operator. The new version will adhere to the Arden Syntax standard use. Following the standard usage, the syntax “At Spanish” in the example below specifies where the action text is to be written, i.e. on the Spanish side of the PSF in this example.


                        
                           
                        
                     

We developed a lexical analyzer and an abstract syntax tree (AST) parser for Arden Syntax grammar [26] version 2.5. These programs were developed from the ground up using an open source tool–Another Tool for Language Recognition (ANTLR version 2.3)—http://www.antlr2.org (Accessed: 26 June 2015) and the JAVA programming language. The ANTLR tool can generate a compiler (in JAVA language) from a grammar file and is best suited for LL(k) grammars [27], a computer grammar parsing methodology that supports left-derivation (look ahead up to k tokens) when evaluating ASTs. Therefore, we transformed the Arden Syntax grammar published in [26]. The Backus Naur Form (BNF) of the published grammar is in left to right derivation (look ahead 1) or LALR(1) form, it was transformed to LL(k) form as follows—First we left-factored the grammar and used left-recursion thoughtfully, i.e. considering precedence of operators. For example, the production rule for the <logic_statement> below was left-factored to our use case of Arden Syntax (i.e. conclude statement, or logic_assignment or call statement) and <logic_assignment> was left factored to || variable ||=<expr>. Please note that the ANTLR tool also provides syntactic predicates (e.g. use of + or *) and semantic predicates for disambiguation. Please refer to their documentation for details. These predicates allowed us to use the left-most derivation (instead of the right most derivation) of the AST parsing. Below is a snippet of the Arden Syntax BNF (from v2.5) for LALR(1) parsing.


                        
                           
                        
                     


                        
                           
                        
                     

Here is the BNF from above that is suitable for LL(k) parsing using the ANTLR tool. The capital letters are terminal symbols.


                        
                           
                        
                     

Because LL(k) parsing can become ambiguous, our implemented parser supports only a subset of the standard Arden Syntax that is required for our use case and clinical workflow. A new parser is being developed using the Arden2Bytecode java library (http://arden2bytecode.sourceforge.net/) (Accessed: 26 June 2015) to support all the standard Arden Syntax features. Following its development, the new parser will go through a series of regression tests before deployment in fall of 2015. However, the data presented in here were collected using a parser that implements a subset of the Arden Syntax standard plus our enhancements as described above.

From a clinical process point of view, the ANTLR generated Arden compiler compiles each MLM into its equivalent JAVA code. The Java code is then compiled into a native JAVA class (before run time) by a standard JAVA language compiler. The compiled JAVA class for the MLM is dynamically loaded and executed in CHICA at run time. The latter enables execution of pertinent guideline(s) encoded as MLM(s) for each patient's visit. From a parallel processes point of view, multiple MLMs can be loaded and chained for execution as CHICA processes registration or check-ins from multiple patients simultaneously. For this purpose, CHICA implements parallel processes (a thread pool) that allows for thread-safe execution of the compiled JAVA class for an MLM. Typically a thread in a thread pool is used to process each patient visit such that all MLMs for the patient at hand are executed sequentially in the same thread.

@&#RESULTS@&#

CHICA has been a highly successful CDSS and certainly the most studied decision support system in child health care [12,16–18,24,25,28–33]. First implemented in one community health center in 2004, CHICA has expanded to 7 pediatric clinics affiliated with the Eskenazi Health System in Indianapolis, IN, and has run continuously for over 10 years serving over 44,000 patients to date. Over these last 10 years, CHICA has been used by 755 physicians, residents, fellows, nurse practitioners, nurses and clinical staff such as medical assistants and front desk registration personnel. In an observational study analyzing rates of positive screen, we found that of those screened, CHICA identified an average of 2.3 positive risk factors per child-visit [28].

Studies of CHICA's effectiveness include several randomized controlled trials (RCT). The first such study showed significant increases in risk assessments for tuberculosis and iron-deficiency anemia [25]. A three armed RCT showed screening in the waiting room produced dramatic increases in the detection of post-natal depression, and providing JIT handouts with resources helped physicians detect it earlier [24]. An RCT of an attention deficit disorder module showed improved physician adherence to standard diagnostic guidelines [17]. An RCT of a guideline-based developmental screening module showed not only increased rates of screening, but detection of developmental delay nearly 8 months earlier [18]. An autism screening module showed dramatic improvements in rates of autism screening [34]. A CHICA based intervention more than doubled rate of self-reported smoking cessation among parents (manuscript in preparation). Studies underway are also looking at detection and management of adolescent risk behaviors and legal issues affecting child health. We have completed seven randomized controlled trials to date and all have shown significant improvements in the delivery of care and, in some cases, outcomes, including improved parental smoking cessation [16] and earlier detection of developmental delay and asthma cases [30].

CHICA provides an extensible platform for testing decision support interventions. At the same time, CHICA has accumulated large amounts of structured data through routine use, data that are not typically collected in EMRs in a coded form. These data have provided the basis for eight published observational studies of associations among risk factors. In a cohort of 11,141 children, we showed that the presence of a television (TV) in the bedroom increased the odds of childhood obesity by 13% [35]. Among a group of 3435 school-aged children 63.5% had a TV in the bedroom and the TV in the bedroom increased their odds of having an ADHD diagnosis by 55% (manuscript in preparation). Among a group of 3254 infants, 50% viewed a TV screen daily by 2 months of age, 75% by 4 months of age and up to 90% by 2 years of age [36]. Children of depressed mothers had higher odds of TV viewing at a very young age [36]. In a group of 2441 patients, we found children of mothers with depression were twice as likely to be on psychotropic medications by age 3 [37], and children of mothers with depression who were also exposed to interpersonal violence were four times as likely to have ADHD [38].

At the time of this writing, there are 429 MLMs or rules implemented in CHICA using the Arden Syntax standard. Broadly, these MLMs are divided into those used for “research” or for “standard” use. Collectively, they represent 41 categories of pediatric guidelines for children, adolescents and young adults 0 to 21 years of age. (Table 1) In the last decade, these MLMs have been fired 6182,700 times in “produce” mode and 5334,021 times in “consume” mode for over 42,000 distinct patients. Fig. 4
                      details the number of patients served by CHICA each year for which these rules were fired.

The research MLMs are restricted for use in intervention sites (of the 7 CHICA sites) in research studies while the standard MLMs are used in all sites for routine care. However, in some research studies (depending upon their design) there are control equivalents of standard MLMs. As new pediatrics guidelines become available (e.g. for Ebola screening), new rule(s) are added to the existing MLM library. Similarly, as new clinical studies are started or completed, MLMs are added or retired in CHICA. Typically, when a RCT shows that a guideline (encoded as a set of MLMs) is effective, the MLMs are also implemented in control sites at the end of the trial. Please see Fig. 5
                      for details of the number of MLMs authored every year since the start of the CHICA system in 2004. By executing Arden Syntax code (from the vast library of MLMs) representing many pediatric guidelines, CHICA has enabled evidence-based and guidelines driven care and care processes in routine practice. However, this success did not come immediately.

@&#DISCUSSIONS@&#

Despite our successful implementation in clinical workflow, adherence to evidence based guidelines in routine practice largely depended on the physician and nursing staff. One of our earlier studies showed poor physician adherence [32]. We addressed this issue by forming a CHICA users group (CHUG) consisting of both physicians and nursing staff to have their input in CHICA related processes. Similarly, we formed a physician expert panel to advice on the process of guidelines implementation. Given the system's demonstrated value to pediatric preventive care and the fact that it only runs as a front end to the Regenstrief medical record system, we believe that CHICA's technical design currently is limited. Therefore, we are re-architecting its clinical decision support capabilities into a series of web services. This will open the possibility of linking CHICA to any EMR and in many health care settings.

A new instance of the CHICA system has been developed to work with a Cerner® EHR implementation at Indiana University Health. In this implementation, the Cerner® system sends an ADT message containing coded observations about the patient to CHICA at the time of registration. Subsequently, Cerner® sends an HL7 message with vitals and anthropometrics entered by the nurse or medical assistant. CHICA delivers the patient/parent questionnaire through a webpage displayed on a tablet and served on the health system's secure wireless network. When the physician sees the patient, s/he can access CHICA's decision support through a web browser opened from within Cerner's PowerNote™ environment. Observations generated by CHICA are delivered as a text blob back to Cerner® in an HL7 message and are inserted into the PowerNote™. This interaction is currently being pilot tested in one clinic.

Regardless of the new development focused on web services for integration with commercial EMRs, the current CHICA system is able to represent a plethora of guidelines and ever growing clinical knowledge using Arden Syntax MLMs successfully.

@&#CONCLUSIONS@&#

CHICA's success is related to its ability to be useful with virtually every patient who walks in the door. The modules created for CHICA cover the full gamut of preventive services and the most common chronic conditions of childhood. To achieve this, we needed a sophisticated rule-based system with an expected value based prioritization scheme. Because we are committed to standards based health information technology development, we chose Arden Syntax, but minor modifications were needed to accommodate CHICA's specialized functionality. Arden Syntax provided us with a way to not only effectively represent pediatric guidelines but to also study them in a real clinical environment and modify or enhance them as needed. Dozens of publications now demonstrate the value of CHICA, and we are moving forward with distributing it through a web services model.

@&#ACKNOWLEDGEMENTS@&#

The CHICA project was supported by grants 1R01HS018453 and R01 HS017939 from the Agency for Healthcare Research and Quality and R01 LM010031Z from the U.S. National Library of Medicine.

@&#REFERENCES@&#

