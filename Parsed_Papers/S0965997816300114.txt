@&#MAIN-TITLE@&#Study on the reconstruction method of stereo vision in glass flume

@&#HIGHLIGHTS@&#


               
               
                  
                     
                        
                           
                           A new 3D reconstruction method with refraction revision is proposed for the experiments in glass flume.


                        
                        
                           
                           The revision process for refraction distortion only need to know few parameters and no additional equipment is required.


                        
                        
                           
                           In the proposed method, the camera calibration need not be operated in water and this method is simple to apply.


                        
                     
                  
               
            

@&#KEYPHRASES@&#

Stereo vision

Three-dimensional reconstruction

Underwater positioning

Distortion correction

Light refraction

Flume experiment

@&#ABSTRACT@&#


               
               
                  In three-dimensional reconstruction experiments based on stereo vision theory in a glass flume, there is usually more than one medium in the travel path of the light, such as air, glass and water. These media not only degrade image quality, but also change the light route. Large errors are generated if the effects of these media are ignored. To solve the problems of media effects, a new method of object reconstruction for the glass flume is proposed, based on computer vision theory and laws of refraction. Firstly, the light refraction effects are analyzed and a coordinate correction formula is developed. Secondly, correction parameters are obtained based on a stereo vision method to correct the coordinates of a target point. Finally, model experiments in glass flume are described and the errors are analyzed. The experimental results show that the proposed method is effective in correcting refraction distortion, and improves the accuracy of three-dimensional reconstruction of target points.
               
            

@&#INTRODUCTION@&#

Measurement methods based on computer vision are untouched measurement techniques with high accuracy. These forms of measurement mainly rely on the methods of digital image analysis, which make it suitable for glass flume model experiments. Thus, they have been widely used in the ocean engineering field. Many experiments have been made in glass flumes in recent years – for example, for vision techniques that locate the accurate positions of moving objects, and to study the deformation of structures. These applications include six degrees-of-freedom (6-DOF) motion measurement, particle image velocimetry (PIV) and particle tracking velocimetry (PTV), among others. Many related studies have been reported in the literature [1–7].

However, the media effect is usually ignored in research and applied procedures. This factor is negligible for experiments conducted in air, but is significant for experiments in a glass flume. When cameras outside the flume take photographs of the target objects, the light travels through at least three media: air, water and glass. Since these affect the geometrical relationships of the image, the reconstruction methods differ from those used for experiments in air [8–10]; however, few studies of this problem have been reported.

In some flume experiments, the optical axis of the camera is perpendicular to the glass flume, and refraction is ignored or regarded as optical distortion in the calculations. This approach is usually used in PIV and PTV exiperiments. The approach utilizes the vertical imaging principle and computation is mature in camera calibration, but the measurement result is valid only for a small-scale field.

In other experiments, in order to make camera position flexible, an optical prism is used to correct refraction distortion without changing the calculation process. When measuring objects in this way, different experiments may need different prisms, making the operation very complicated and more costly. Refractive index matching is used for distortion correction in some experiments [11,12], most commonly in microscope-based analysis; due to the cost problem and amount of disturbance, however, this approach is difficult to apply to large-scale measurements and these physical methods may limit the application scope of vision technology.

To date, no appropriate method is available for reconstructing target objects in a glass flume. In this work, we improve the experimental convenience through changing the vision reconstruction algorithms. Firstly, we examine the refraction routes of reconstruction experiments in a flume, then derive the geometrical relationship between the true position and the pseudo-position of an object. A new reconstruction method for flume experiments is also proposed based on stereo vision theory. The last part of the paper describes model experiments designed to evaluate the performance of the proposed algorithm.

To derive the 3D coordinates of an object using vision theory, images are captured by two cameras at different viewing angles to the object. In Fig. 1
                     , P(X, Y, Z) is a point in space; subscripts l and r indicate left and right view; pl
                      and pr
                      and are image points of P in different image planes; and Ol
                      and Or
                      are the optical centers of the two cameras. Target P is located at the intersection of projected lines Ol
                     
                     
                     pl
                      and Or
                     
                     
                     pr
                     .

To calculate the coordinates of P, the cameras must first be calibrated to determine the necessary intrinsic and extrinsic parameters [13]. The relationship between the 3D point P and its projection p(u, v) in the image coordinate system is given by

                        
                           (1)
                           
                              
                                 s
                                 
                                    [
                                    
                                       
                                          
                                             u
                                          
                                       
                                       
                                          
                                             v
                                          
                                       
                                       
                                          
                                             1
                                          
                                       
                                    
                                    ]
                                 
                                 =
                                 
                                    [
                                    
                                       
                                          
                                             α
                                          
                                          
                                             γ
                                          
                                          
                                             
                                                u
                                                0
                                             
                                          
                                          
                                             0
                                          
                                       
                                       
                                          
                                             0
                                          
                                          
                                             β
                                          
                                          
                                             
                                                v
                                                0
                                             
                                          
                                          
                                             0
                                          
                                       
                                       
                                          
                                             0
                                          
                                          
                                             0
                                          
                                          
                                             1
                                          
                                          
                                             0
                                          
                                       
                                    
                                    ]
                                 
                                 
                                    [
                                    
                                       
                                          
                                             R
                                          
                                          
                                             T
                                          
                                       
                                       
                                          
                                             0
                                          
                                          
                                             1
                                          
                                       
                                    
                                    ]
                                 
                                 
                                    [
                                    
                                       
                                          
                                             X
                                          
                                       
                                       
                                          
                                             Y
                                          
                                       
                                       
                                          
                                             Z
                                          
                                       
                                       
                                          
                                             1
                                          
                                       
                                    
                                    ]
                                 
                                 ,
                              
                           
                        
                     where s is an arbitrary scale factor. The first matrix on the right-hand side is the camera intrinsic matrix in which (u
                     0, v
                     0) are the coordinates of the principal point; α and β are the scale factors on the image u and v axes; and γ is a parameter describing the skewness of the two image axes. The middle matrix on the right-hand side is the camera extrinsic matrix, in which R and T are the rotation and translation which relate the world coordinate system to the camera coordinate system.

In practice, especially using industrial cameras, γ in Eq. (1) is usually ignored. The camera parameter matrix M is defined as Eq. (2):

                        
                           (2)
                           
                              
                                 
                                    
                                       M
                                    
                                    
                                       =
                                    
                                    
                                       
                                          [
                                          
                                             
                                                
                                                   
                                                      m
                                                      11
                                                   
                                                
                                                
                                                   
                                                      m
                                                      12
                                                   
                                                
                                                
                                                   
                                                      m
                                                      13
                                                   
                                                
                                                
                                                   
                                                      m
                                                      14
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      m
                                                      21
                                                   
                                                
                                                
                                                   
                                                      m
                                                      22
                                                   
                                                
                                                
                                                   
                                                      m
                                                      23
                                                   
                                                
                                                
                                                   
                                                      m
                                                      24
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      m
                                                      31
                                                   
                                                
                                                
                                                   
                                                      m
                                                      32
                                                   
                                                
                                                
                                                   
                                                      m
                                                      33
                                                   
                                                
                                                
                                                   
                                                      m
                                                      34
                                                   
                                                
                                             
                                          
                                          ]
                                       
                                    
                                 
                                 
                                    
                                    
                                       =
                                    
                                    
                                       
                                          
                                             [
                                             
                                                
                                                   
                                                      
                                                         f
                                                         /
                                                         
                                                            S
                                                            x
                                                         
                                                      
                                                   
                                                   
                                                      0
                                                   
                                                   
                                                      
                                                         u
                                                         0
                                                      
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      0
                                                   
                                                   
                                                      
                                                         f
                                                         /
                                                         
                                                            S
                                                            y
                                                         
                                                      
                                                   
                                                   
                                                      
                                                         v
                                                         0
                                                      
                                                   
                                                   
                                                      0
                                                   
                                                
                                                
                                                   
                                                      0
                                                   
                                                   
                                                      0
                                                   
                                                   
                                                      1
                                                   
                                                   
                                                      0
                                                   
                                                
                                             
                                             ]
                                          
                                          
                                             [
                                             
                                                
                                                   
                                                      R
                                                   
                                                   
                                                      T
                                                   
                                                
                                                
                                                   
                                                      0
                                                   
                                                   
                                                      1
                                                   
                                                
                                             
                                             ]
                                          
                                          .
                                       
                                    
                                 
                              
                           
                        
                     
                  

In Eq. (2), f is the focal length; Sx
                      and Sy
                      are the pixel dimensions of two axes. For a point pair in different images, the relationship between 2D points and their corresponding 3D points is expressed as

                        
                           (3)
                           
                              
                                 
                                    {
                                    
                                       
                                          
                                             
                                                
                                                   m
                                                   
                                                      11
                                                   
                                                   l
                                                
                                                X
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      12
                                                   
                                                   l
                                                
                                                Y
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      13
                                                   
                                                   l
                                                
                                                Z
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      14
                                                   
                                                   l
                                                
                                                −
                                                
                                                   m
                                                   
                                                      31
                                                   
                                                   l
                                                
                                                
                                                   u
                                                   l
                                                
                                                X
                                                −
                                                
                                                   m
                                                   
                                                      32
                                                   
                                                   l
                                                
                                                
                                                   u
                                                   l
                                                
                                                Y
                                                −
                                                
                                                   m
                                                   
                                                      33
                                                   
                                                   l
                                                
                                                
                                                   u
                                                   l
                                                
                                                Z
                                                =
                                                
                                                   u
                                                   l
                                                
                                                
                                                   m
                                                   
                                                      34
                                                   
                                                   l
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   m
                                                   
                                                      21
                                                   
                                                   l
                                                
                                                X
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      22
                                                   
                                                   l
                                                
                                                Y
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      23
                                                   
                                                   l
                                                
                                                Z
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      24
                                                   
                                                   l
                                                
                                                −
                                                
                                                   m
                                                   
                                                      31
                                                   
                                                   l
                                                
                                                
                                                   v
                                                   l
                                                
                                                X
                                                −
                                                
                                                   m
                                                   
                                                      32
                                                   
                                                   l
                                                
                                                
                                                   v
                                                   l
                                                
                                                Y
                                                −
                                                
                                                   m
                                                   
                                                      33
                                                   
                                                   l
                                                
                                                
                                                   v
                                                   l
                                                
                                                Z
                                                =
                                                
                                                   v
                                                   l
                                                
                                                
                                                   m
                                                   
                                                      34
                                                   
                                                   l
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   m
                                                   
                                                      11
                                                   
                                                   r
                                                
                                                X
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      12
                                                   
                                                   r
                                                
                                                Y
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      13
                                                   
                                                   r
                                                
                                                Z
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      14
                                                   
                                                   r
                                                
                                                −
                                                
                                                   m
                                                   
                                                      31
                                                   
                                                   r
                                                
                                                
                                                   u
                                                   r
                                                
                                                X
                                                −
                                                
                                                   m
                                                   
                                                      32
                                                   
                                                   r
                                                
                                                
                                                   u
                                                   r
                                                
                                                Y
                                                −
                                                
                                                   m
                                                   
                                                      33
                                                   
                                                   r
                                                
                                                
                                                   u
                                                   r
                                                
                                                Z
                                                =
                                                
                                                   u
                                                   r
                                                
                                                
                                                   m
                                                   
                                                      34
                                                   
                                                   r
                                                
                                             
                                          
                                       
                                       
                                          
                                             
                                                
                                                   m
                                                   
                                                      21
                                                   
                                                   r
                                                
                                                X
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      22
                                                   
                                                   r
                                                
                                                Y
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      23
                                                   
                                                   r
                                                
                                                Z
                                                
                                                +
                                                
                                                
                                                   m
                                                   
                                                      24
                                                   
                                                   r
                                                
                                                −
                                                
                                                   m
                                                   
                                                      31
                                                   
                                                   r
                                                
                                                
                                                   v
                                                   r
                                                
                                                X
                                                −
                                                
                                                   m
                                                   
                                                      32
                                                   
                                                   r
                                                
                                                
                                                   v
                                                   r
                                                
                                                Y
                                                −
                                                
                                                   m
                                                   
                                                      33
                                                   
                                                   r
                                                
                                                
                                                   v
                                                   r
                                                
                                                Z
                                                =
                                                
                                                   v
                                                   r
                                                
                                                
                                                   m
                                                   
                                                      34
                                                   
                                                   r
                                                
                                             
                                          
                                       
                                    
                                 
                                 
                                 ,
                              
                           
                        
                     where l and r are defined as above.

To ensure that the flow field is not disturbed, the cameras must be outside the flume; the image light will then pass through air, glass and water. The light path in the experiment is shown in Fig. 2.
                     
                  

In Fig. 2, Ol
                      is the optical center of the left-hand camera; Or
                      is the optical center of the right-hand camera; h is the distance between the left-hand optical center and the glass surface of the flume; d is the thickness of the glass; pl
                      and pr
                      are the image points of P in the left-hand and right-hand images; P′ is the point reconstructed from pl
                      and pr; λ and η are the outer and inner surfaces of the glass; A
                     1, A
                     2, C
                     1, C
                     2 are the intersections of the image light and glass surface; and l
                     1, 
                        
                           l
                           1
                           ′
                        
                     , 
                        
                           l
                           1
                           
                              ′
                              ′
                           
                        
                     , l
                     2, l
                     3, 
                        
                           l
                           3
                           ′
                        
                     , 
                        
                           l
                           3
                           
                              ′
                              ′
                           
                        
                      are lines normal to the glass.

Because of refraction effects, P and P′ are not the same points. The refractive indices of air, glass and water are nair, nglass
                      and nwater
                     , where nair
                     (1.0003) < nglass
                     (1.3333) < nwater
                     (1.5000). Thus P′ is closer to the observation position thanP. In order to determine the true position P, the pseudo-position P′ must be modified.

Firstly, the glass thickness is assumed to be fixed. A parallel relationship λ//η is defined in Fig. 2. P and P′ are collinear according to their geometrical relationship, which is simply proved as follows:


∵P ∈ [OlA
                     1
                     B
                     1
                     C
                     1],  P′ ∈ [OlA
                     1
                     B
                     1
                     C
                     1],  P ∈ [OrA
                     2
                     B
                     2
                     C
                     2],  P′ ∈ [OrA
                     2
                     B
                     2
                     C
                     2] and [OlA
                     1
                     B
                     1
                     C
                     1]⊥λ,  [OrA
                     2
                     B
                     2
                     C
                     2]⊥λ,  P ∈ l
                     2,  l
                     2⊥λ∴P′ ∈ l
                     2. So P and P′ are collinear in l
                     2.

To deduce the correction formula, the coordinate system is then defined with the 
                        
                           x
                           −
                           y
                        
                      plane on the glass surface. Let Ol
                     (X
                     0, Y
                     0, Z
                     0) be the optical center of left-hand camera; P(X, Y, Z) is the real position of the target; P′(Xw, Yw, Zw
                     ) is its pseudo-position. In Fig. 2, the relationships 
                        
                           X
                           =
                           
                              X
                              w
                           
                        
                      and 
                        
                           Y
                           =
                           
                              Y
                              w
                           
                        
                      are readily found. In addition, Eq. (4) is deduced from the geometrical relationship in Fig. 2:
                     
                        
                           (4)
                           
                              
                                 Z
                                 
                                 −
                                 
                                 h
                                 
                                 −
                                 
                                 d
                                 
                                 =
                                 
                                 (
                                 
                                    
                                       
                                          
                                             
                                                (
                                                
                                                   
                                                      X
                                                      w
                                                   
                                                   −
                                                   
                                                      x
                                                      0
                                                   
                                                
                                                )
                                             
                                             2
                                          
                                          +
                                          
                                             
                                                (
                                                
                                                   
                                                      Y
                                                      w
                                                   
                                                   −
                                                   
                                                      y
                                                      0
                                                   
                                                
                                                )
                                             
                                             2
                                          
                                       
                                    
                                    −
                                    h
                                    ·
                                    t
                                    g
                                    α
                                    −
                                    d
                                    ·
                                    t
                                    g
                                    β
                                 
                                 )
                                 ·
                                 c
                                 t
                                 g
                                 γ
                                 .
                              
                           
                        
                     
                  

Defining the
                     
                      refractive ratios as n
                     1 and n
                     2, with 
                        
                           
                              
                                 n
                                 1
                              
                              =
                              sin
                              α
                           
                           /
                           
                              sin
                              β
                           
                        
                     , 
                        
                           
                              
                                 n
                                 2
                              
                              =
                              sin
                              β
                           
                           /
                           
                              sin
                              γ
                           
                        
                     , we can obtain the equations from Eq. (5) to Eq. (7):

                        
                           (5)
                           
                              
                                 t
                                 g
                                 α
                                 
                                    =
                                 
                                 
                                    
                                       
                                          
                                             
                                                (
                                                
                                                   X
                                                   w
                                                
                                                −
                                                
                                                   X
                                                   0
                                                
                                                )
                                             
                                             2
                                          
                                          +
                                          
                                             
                                                (
                                                
                                                   Y
                                                   w
                                                
                                                −
                                                
                                                   Y
                                                   0
                                                
                                                )
                                             
                                             2
                                          
                                       
                                    
                                    /
                                    
                                       (
                                       
                                          Z
                                          w
                                       
                                       −
                                       
                                          Z
                                          0
                                       
                                       )
                                    
                                 
                                 ,
                              
                           
                        
                     
                     
                        
                           (6)
                           
                              
                                 t
                                 g
                                 β
                                 
                                    =
                                 
                                 
                                    
                                       sin
                                       α
                                    
                                    /
                                    
                                       
                                          
                                             n
                                             1
                                             2
                                          
                                          −
                                          
                                             
                                                sin
                                             
                                             2
                                          
                                          α
                                       
                                    
                                 
                                 ,
                              
                           
                        
                     
                     
                        
                           (7)
                           
                              
                                 c
                                 t
                                 g
                                 γ
                                 
                                    =
                                 
                                 
                                    
                                       
                                          
                                             n
                                             1
                                             2
                                          
                                          ·
                                          
                                             n
                                             2
                                             2
                                          
                                          −
                                          
                                             
                                                sin
                                             
                                             2
                                          
                                          α
                                       
                                    
                                    /
                                    
                                       sin
                                       α
                                    
                                 
                                 .
                              
                           
                        
                     
                  

Combined with Eq. (4), these give the correction equation

                        
                           (8)
                           
                              
                                 
                                    
                                       Z
                                    
                                    
                                       =
                                    
                                    
                                       
                                          h
                                          +
                                          d
                                          +
                                          
                                             
                                                
                                                   
                                                      (
                                                      
                                                         X
                                                         w
                                                      
                                                      −
                                                      
                                                         X
                                                         0
                                                      
                                                      )
                                                   
                                                   2
                                                
                                                +
                                                
                                                   
                                                      (
                                                      
                                                         Y
                                                         w
                                                      
                                                      −
                                                      
                                                         Y
                                                         0
                                                      
                                                      )
                                                   
                                                   2
                                                
                                             
                                          
                                          ·
                                          
                                             
                                                
                                                   
                                                      n
                                                      1
                                                      2
                                                   
                                                   
                                                      n
                                                      2
                                                      2
                                                   
                                                   −
                                                   
                                                      
                                                         sin
                                                      
                                                      2
                                                   
                                                   α
                                                
                                             
                                             
                                                sin
                                                α
                                             
                                          
                                       
                                    
                                 
                                 
                                    
                                    
                                    
                                       
                                          −
                                          
                                          h
                                          ·
                                          
                                             
                                                
                                                   
                                                      n
                                                      1
                                                      2
                                                   
                                                   
                                                      n
                                                      2
                                                      2
                                                   
                                                   −
                                                   
                                                      
                                                         sin
                                                      
                                                      2
                                                   
                                                   α
                                                
                                             
                                             
                                                cos
                                                α
                                             
                                          
                                          −
                                          d
                                          ·
                                          
                                             
                                                
                                                   
                                                      n
                                                      1
                                                      2
                                                   
                                                   
                                                      n
                                                      2
                                                      2
                                                   
                                                   −
                                                   
                                                      
                                                         sin
                                                      
                                                      2
                                                   
                                                   α
                                                
                                             
                                             
                                                
                                                   
                                                      n
                                                      1
                                                      2
                                                   
                                                   −
                                                   
                                                      
                                                         sin
                                                      
                                                      2
                                                   
                                                   α
                                                
                                             
                                          
                                          .
                                       
                                    
                                 
                              
                           
                        
                     
                  

If 
                        
                           
                              n
                              1
                           
                           =
                           
                              n
                              2
                           
                           =
                           1
                        
                     , 
                        
                           Z
                           =
                           
                              Z
                              w
                           
                           −
                           
                              Z
                              0
                           
                        
                      in Eq. (8), the coordinates of the target object in water are not affected when the image system and target objects are both in the same medium. Furthermore, if these parameters (e.g., distance between optical center and glass surface, thickness of glass, refractive index) are already known, the true position of a target point in the glass flume is computed accurately.

Suppose two cameras in a binocular vision system are placed outside the flume (Fig. 3) and the target objects are under water. Three reference points are marked on the outer surface of the glass wall of the flume (the red dots in Fig. 3) to correct the coordinate system and calculate the distance between optical center and the glass.

The procedure is:

                        
                           (1)
                           The cameras are calibrated in air to determine their intrinsic and extrinsic parameters. Then, if the object is also in air, the position of the object is calculated from Eq. (3). The extrinsic parameters of the left-hand and right-hand cameras are referred to as Rl, Tl
                               and Rr, Tr
                              . The optical center of the left-hand camera is POL
                              .

Provided the signature dots P
                              1, P
                              2, P
                              3 are not collinear, their positions may be found from Eq. (3), and the distance h between the glass surface containing P
                              1, P
                              2, P
                              3 and POL
                               is obtained.

After vision calibration, the world coordinate system is usually not satisfied with the requirements of Eq. (8). So the original coordinate system must be revised. The glass surface containing P
                              1, P
                              2, P
                              3 is taken as the 
                                 
                                    x
                                    −
                                    y
                                 
                               plane. In this reference system, suppose the new coordinates of 
                                 
                                    
                                       P
                                       i
                                    
                                    
                                       (
                                       i
                                       =
                                       1
                                       ,
                                       2
                                       ,
                                       3
                                       )
                                    
                                 
                               are 
                                 
                                    
                                       P
                                       i
                                       ′
                                    
                                    
                                       (
                                       i
                                       =
                                       1
                                       ,
                                       2
                                       ,
                                       3
                                       )
                                    
                                 
                              . The relationship between Pi
                               and 
                                 
                                    P
                                    i
                                    ′
                                 
                               is expressed as Eq. (9):
                                 
                                    (9)
                                    
                                       
                                          
                                             P
                                             i
                                             ′
                                          
                                          =
                                          
                                             R
                                             t
                                          
                                          ·
                                          
                                             P
                                             i
                                          
                                          +
                                          
                                             T
                                             t
                                          
                                          ,
                                          
                                             (
                                             i
                                             =
                                             1
                                             ,
                                             2
                                             ,
                                             3
                                             )
                                          
                                          ,
                                       
                                    
                                 
                              where Rt
                               and Tt
                               are the rotation matrix and translation matrix relating the original coordinate system to the new coordinate system.

The origin of the measurement coordinate system is now moved to the optical center Ol
                               of the left-hand camera. The media refraction ratios n
                              1 and n
                              2 are calculated and the glass thickness d must be known. The geometrical relationship is shown in Fig. 2.
                           

In the new coordinate system, the rotation matrix of the left-hand camera is RtRl
                               and the translation matrix is null. The new rotation matrix of the right-hand camera is RtRr
                               and the translation matrix is 
                                 
                                    
                                       R
                                       t
                                    
                                    
                                       T
                                       r
                                    
                                    +
                                    
                                       R
                                       t
                                    
                                    
                                       R
                                       r
                                    
                                    
                                       P
                                       
                                          O
                                          L
                                       
                                    
                                 
                              .

Utilizing the extrinsic parameters and the intrinsic parameters of the cameras, the pseudo-position P′(Xw, Yw, Zw
                              ) is readily obtained (Fig. 2).

In Fig. 2, the angle α is given by 
                                 
                                    α
                                    =
                                    arctg
                                    (
                                    
                                       
                                          
                                             X
                                             w
                                             2
                                          
                                          +
                                          
                                             Y
                                             w
                                             2
                                          
                                       
                                    
                                    /
                                    
                                       Z
                                       w
                                    
                                    )
                                 
                              .

After steps (1)–(7), the coordinates (X, Y, Z) of Pare corrected by Eq. (8), giving the revised equations
                                 
                                    (10)
                                    
                                       
                                          {
                                          
                                             
                                                
                                                   
                                                      X
                                                      =
                                                      
                                                         X
                                                         w
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      Y
                                                      =
                                                      
                                                         Y
                                                         w
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      Z
                                                      =
                                                      h
                                                      +
                                                      d
                                                      +
                                                      
                                                         
                                                            
                                                               X
                                                               w
                                                               2
                                                            
                                                            +
                                                            
                                                               Y
                                                               w
                                                               2
                                                            
                                                         
                                                      
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  n
                                                                  1
                                                                  2
                                                               
                                                               
                                                                  n
                                                                  2
                                                                  2
                                                               
                                                               −
                                                               
                                                                  
                                                                     sin
                                                                  
                                                                  2
                                                               
                                                               a
                                                            
                                                         
                                                         
                                                            sin
                                                            a
                                                         
                                                      
                                                   
                                                
                                             
                                             
                                                
                                                   
                                                      
                                                      −
                                                      
                                                      h
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  n
                                                                  1
                                                                  2
                                                               
                                                               
                                                                  n
                                                                  2
                                                                  2
                                                               
                                                               −
                                                               
                                                                  
                                                                     sin
                                                                  
                                                                  2
                                                               
                                                               a
                                                            
                                                         
                                                         
                                                            cos
                                                            a
                                                         
                                                      
                                                      −
                                                      d
                                                      ·
                                                      
                                                         
                                                            
                                                               
                                                                  n
                                                                  1
                                                                  2
                                                               
                                                               
                                                                  n
                                                                  2
                                                                  2
                                                               
                                                               −
                                                               
                                                                  
                                                                     sin
                                                                  
                                                                  2
                                                               
                                                               a
                                                            
                                                         
                                                         
                                                            
                                                               
                                                                  n
                                                                  1
                                                                  2
                                                               
                                                               −
                                                               
                                                                  
                                                                     sin
                                                                  
                                                                  2
                                                               
                                                               a
                                                            
                                                         
                                                      
                                                   
                                                
                                             
                                          
                                       
                                    
                                 
                              
                           

In short, the cameras are calibrated first, then the correction parameters in Eq. (8) are computed, and finally the position of the target object is obtained from Eq. (10).

In this section, the proposed method is evaluated under the real experimental conditions shown in Fig. 4. Two cameras (model JAI CM-140CL) were placed outside the flume. The glass was 8mm thick. Three reference points marked on the glass surface formed a right triangle (shown as red circles in Fig. 4). The water was 1m deep. Target objects with red LEDs were placed in the water. During the experiment, the object was moved by a stepmotor in 10mm steps.

Following the procedure set out in Section 5, the cameras were calibrated, then the parameters used in Eq. (10) were computed step by step. The distance between the optical center of the left-hand camera and the glass surface was calculated to be 63.29cm. The refraction indices of air, glass and water were taken to be 1.0, 1.3 and 1.5, respectively. During the experiment, the target objects always moved along a route perpendicular to the surface of the flume. The original distance between object and glass was 10cm. The target object was able to move only a total distance of 80cm due to the limited size of the flume.


                     Fig. 5 shows the changes of X- and Y-axis coordinates of the three LEDs on the target object. We see that the positions of the LEDs in the x–y plane are fixed, but the object moves; thus the object positions in the x–y plane are not disturbed by media refraction. However, the geometrical relationship in Fig. 2 shows that the coordinates change along the Z-axis.

The Z coordinates of the LEDs are shown in Fig. 6, in which the ‘*’ symbols represent the reconstruction results from Eq. (3), and the ‘o’ symbols represent the revised reconstruction results from Eq. (10).


                     Fig. 6 shows that the revised coordinates along the Z-axis are larger than reconstruction results and the differences of the Z coordinates before and after correction increase as the distance between the object and the glass increases. To test the effect of the coordinate corrections, Fig. 7 shows the differences between the adjacent positions in Fig. 6. Meanwhile, comparing the data in Fig. 7 with the standard step of 10mm, the percent root-mean-square difference (PRD) is used to evaluate experimental results. PRD is defined by Eq. (11):

                        
                           (11)
                           
                              
                                 P
                                 R
                                 D
                                 =
                                 
                                    
                                       
                                          ∑
                                          
                                             i
                                             =
                                             1
                                          
                                          N
                                       
                                       
                                          
                                             
                                                (
                                                
                                                   d
                                                   
                                                      o
                                                      r
                                                      g
                                                   
                                                
                                                
                                                   (
                                                   i
                                                   )
                                                
                                                −
                                                
                                                   d
                                                   
                                                      r
                                                      e
                                                      c
                                                   
                                                
                                                
                                                   (
                                                   i
                                                   )
                                                
                                                )
                                             
                                             2
                                          
                                          /
                                          
                                             
                                                ∑
                                                
                                                   i
                                                   =
                                                   1
                                                
                                                N
                                             
                                             
                                                
                                                   d
                                                   
                                                      o
                                                      r
                                                      g
                                                   
                                                   2
                                                
                                                
                                                   (
                                                   i
                                                   )
                                                
                                             
                                          
                                       
                                    
                                 
                                 ×
                                 100
                                 %
                                 ,
                              
                           
                        
                     where dorg
                      is the original data and drec
                      is the experimental data; N is the number of sample points. Table 1
                      indicates the comparison results computed by PRD. From Fig. 7 and Table 1, it is concluded that the revised values of the coordinates is much closer to the true value, meaning that the proposed method succeeds in reducing refraction distortion in flume experiments.

@&#CONCLUSION@&#

Stereo vision technology is very convenient for getting accurate position of an object. However, when using stereo vision theory to reconstruct the position of an object in a water flume, refraction distortion occurs. The distortion make the results achieved by 3D reconstruction inaccurate. To obtain the correct coordinates, the imaging geometrical relationship has been studied and the following conclusion is drawn: the true position of the object in the flume is related both to the thickness of glass walls of the flume and the positions of the cameras relative to the flume. By taking account of this relationship, we have proposed a new correction method based on binocular vision theory: Firstly, the distance between vision system and flume is computed after calibration. Secondly, the x–y plane in the world coordinate system is made coincide with the glass sidewalls of flume. At last, the revision process can be done by using the algorithm proposed in Section 4. The whole revision procedure is carried out without additional instruments and the system calibration is not required to be done under the water. All these features make the method proposed in this paper very appropriate for position reconstruction in a glass flume.

In the experiments (Section 6), we used a stepmotor to make the objects move and achieved the real positons. By this way, we have studied the coordinates changes of objects caused by refraction distortion and computed the revised results by the proposed method. Through PRD analyses, we can see that the revised values are approximate to the real values. Experiments conducted in the flume have demonstrated the effectiveness of the proposed method.

@&#ACKNOWLEDGMENTS@&#

This research is supported by the Chinese National Natural Science Foundation (No. 61202253), the Scientific Research Project of Liaoning Provincial Department of Education (L2012258), the High Scientific Research Projects of Liaoning Province (LS2010032), and the Funds of State Key Laboratory (LP1118).

@&#REFERENCES@&#

